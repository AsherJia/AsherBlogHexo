{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/img/avatar.jpg","path":"img/avatar.jpg","modified":1,"renderable":0},{"_id":"source/img/favicon.ico","path":"img/favicon.ico","modified":1,"renderable":0},{"_id":"source/img/tag-bg.jpg","path":"img/tag-bg.jpg","modified":1,"renderable":0},{"_id":"source/img/404-bg.jpg","path":"img/404-bg.jpg","modified":1,"renderable":0},{"_id":"source/img/home-bg-o.jpg","path":"img/home-bg-o.jpg","modified":1,"renderable":0},{"_id":"themes/huxblog/source/css/hux-blog.css","path":"css/hux-blog.css","modified":1,"renderable":1},{"_id":"themes/huxblog/source/css/highlight.styl","path":"css/highlight.styl","modified":1,"renderable":1},{"_id":"themes/huxblog/source/css/hux-blog.min.css","path":"css/hux-blog.min.css","modified":1,"renderable":1},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.eot","path":"fonts/glyphicons-halflings-regular.eot","modified":1,"renderable":1},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.ttf","path":"fonts/glyphicons-halflings-regular.ttf","modified":1,"renderable":1},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.woff","path":"fonts/glyphicons-halflings-regular.woff","modified":1,"renderable":1},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.woff2","path":"fonts/glyphicons-halflings-regular.woff2","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/hux-blog.min.js","path":"js/hux-blog.min.js","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/hux-blog.js","path":"js/hux-blog.js","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/bootstrap.min.js","path":"js/bootstrap.min.js","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/jquery.tagcloud.js","path":"js/jquery.tagcloud.js","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/jquery.nav.js","path":"js/jquery.nav.js","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/new.js","path":"js/new.js","modified":1,"renderable":1},{"_id":"source/img/home-bg.jpg","path":"img/home-bg.jpg","modified":1,"renderable":0},{"_id":"themes/huxblog/source/css/bootstrap.min.css","path":"css/bootstrap.min.css","modified":1,"renderable":1},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.svg","path":"fonts/glyphicons-halflings-regular.svg","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/bootstrap.js","path":"js/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/jquery.min.js","path":"js/jquery.min.js","modified":1,"renderable":1},{"_id":"source/img/contact-bg.jpg","path":"img/contact-bg.jpg","modified":1,"renderable":0},{"_id":"themes/huxblog/source/css/bootstrap.css","path":"css/bootstrap.css","modified":1,"renderable":1},{"_id":"themes/huxblog/source/js/jquery.js","path":"js/jquery.js","modified":1,"renderable":1},{"_id":"source/img/about-bg.jpg","path":"img/about-bg.jpg","modified":1,"renderable":0}],"Cache":[{"_id":"themes/huxblog/README.md","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1495870312000},{"_id":"source/404.md","hash":"83c2c6d587beaa967a976e5969d60fa97fcdbe55","modified":1495870312000},{"_id":"source/.DS_Store","hash":"5ae3d439aaabbd1a2084e33f5bb5daa4235174c8","modified":1496368820000},{"_id":"themes/huxblog/_config.yml","hash":"78c57a69155be39d8e91d3ad8cb8d0367760d7f6","modified":1495871349000},{"_id":"themes/huxblog/.DS_Store","hash":"9457f542cf2c3f2a50b9ecd64858fc6f50b0d0c4","modified":1495870767000},{"_id":"themes/huxblog/LICENSE","hash":"2b209f06bebeb2a8c2b7e187e436f3e1e1fbc8a7","modified":1495870312000},{"_id":"source/_posts_backup/2016-05-20-eslint.markdown","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1495849829000},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1496368642000},{"_id":"source/_posts/2015-12-07-react-server-render.markdown","hash":"2f895650dd0d02f0c4296413d4868ff0230dd3ee","modified":1495849829000},{"_id":"source/_posts/2015-12-06-reducer-react-app-size.markdown","hash":"4a06da2d9894d8443963d84b96a09f839f28299c","modified":1495849829000},{"_id":"source/_posts/2015-12-20-partial-scroll.markdown","hash":"bf8f57fd1aa48ea70866c442afdf6b375890430f","modified":1495849829000},{"_id":"source/_posts/2016-05-19-flex-layout.markdown","hash":"c281cba4b5bdfed71e771570572b3544bf179d29","modified":1495849829000},{"_id":"source/_posts/2016-05-19-wow-old-or-our-old.markdown","hash":"2731e7ddbda14d6801e0b87351579d4fefbc99bf","modified":1495849829000},{"_id":"source/_posts/2016-05-20-gulp.markdown","hash":"86b53c0f224716babb900755b342b49d56821325","modified":1495849829000},{"_id":"source/_posts/2016-05-20-frontend.markdown","hash":"b3486a81dc29e843af0e314deaf19a29fcc842fb","modified":1495849829000},{"_id":"source/_posts/2016-06-28-redraw-and-rearrangement.markdown","hash":"de247e1b972ed33cc02cb67cf35b5bb7a98a1c76","modified":1495849829000},{"_id":"source/_posts/2016-07-08-frontend-module-definition.markdown","hash":"bf3bda0ada88096fc473007fd78d0a9db2ece1f9","modified":1495849829000},{"_id":"source/_posts/2016-09-05-javascript-source-code.markdown","hash":"a0a287f1af6606328c7e97e4379c41389f6d4e91","modified":1495849829000},{"_id":"source/_posts/2016-08-17-webpack.markdown","hash":"cbd0f1d47d6248da00ce5baec5403a2f708e0e84","modified":1495849829000},{"_id":"source/_posts/2016-12-06-jekyll-github-page-travis-ci.markdown","hash":"0780507a320023bf44c8bebd368db2c256896e5b","modified":1495849829000},{"_id":"source/_posts/2016-08-29-vue-demo.markdown","hash":"2c45adc9bf495df872b27738c324b979ef160d19","modified":1495849829000},{"_id":"source/_posts/2016-08-18-underscore.markdown","hash":"55e7b33b07ac7b35073e85054f7136486178887e","modified":1495849829000},{"_id":"source/_posts/2016-12-28-understore-analysis.markdown","hash":"ae3b4a98e37229668a781c3ffc103b31e7994803","modified":1495849829000},{"_id":"source/_posts/2017-01-06-nodejs.markdown","hash":"cb32fbdc1067a4fbf4079b70f05ec49ffa7500b9","modified":1495849829000},{"_id":"source/_posts/2017-01-06-freshman-guide.markdown","hash":"5d67537564d3c563e061c9ec7a337cd8561eec2b","modified":1495849829000},{"_id":"source/_posts/2017-01-19-frontend-summary.markdown","hash":"a8c950deba595ecbfe1eae3bf2070b38370fc675","modified":1495867323000},{"_id":"source/_posts/2017-01-19-javascript-note.markdown","hash":"98156d2fee03c6e7fd825d9ec9bc460f5c380b02","modified":1495849829000},{"_id":"source/_posts/2017-01-19-javascript-summary.markdown","hash":"7f19bc20a0992e43e2e138d4275e06873153ff86","modified":1495849829000},{"_id":"source/_posts/2017-02-09-nextgen-web-pwa.markdown","hash":"5b43a5a6cca0875bc604519691d89fb16ded49ed","modified":1495849829000},{"_id":"source/_posts/2017-03-06-we-have-a-problem-with-promise.markdown","hash":"2c2480130361b2d552342e11f01751dc02930b3d","modified":1495849829000},{"_id":"source/_posts/2017-03-09-functional-program.markdown","hash":"0368e946578e5980a83240bed2eb2c6f144c6a70","modified":1495849829000},{"_id":"source/_posts/2017-03-22-frontend-interview-question.markdown","hash":"241dfcfd73e06d277c6b28169f5ea7d8ffd5364d","modified":1495849829000},{"_id":"source/_posts/2017-03-17-mobx.markdown","hash":"321599a6fcb370ca29e076b7118c47efc1e5dc4a","modified":1495849829000},{"_id":"source/_posts/2017-04-28-gulp-and-webpack.markdown","hash":"3e9a3746bdd0fd176153fede7f3fb942ae97ded8","modified":1495849829000},{"_id":"source/_posts/2017-05-06-redux-async.markdown","hash":"3aedd4dc945b8f4810a0cc6ba2f7c52ee65fe0c1","modified":1495849829000},{"_id":"source/_posts2/2014-08-16-miui6.markdown","hash":"6d0932af947708513d51a9698b6e68bc94bc7ed2","modified":1495849829000},{"_id":"source/_posts/2017-05-10-throttle-debounce.markdown","hash":"0c2c50290d2509b82cb0d3048d1a442eecbfd73a","modified":1495849829000},{"_id":"source/_posts2/2014-09-04-is-pure-android-better.markdown","hash":"0e2e069fda14c32ceec99efa0f61cec25a3ea93e","modified":1495849829000},{"_id":"source/_posts2/2014-01-29-hello-2015.markdown","hash":"9717e74daf37a5c26df489e75303dfe28d5d648d","modified":1495849829000},{"_id":"source/_posts2/2014-11-20-responsive-web-design.markdown","hash":"d7c749ee719560c4d7411613406b8e737a5bcda7","modified":1495849829000},{"_id":"source/_posts2/2015-03-10-apple-event-2015.markdown","hash":"a196bd813fd34df2e83832a8b286a32ff14a0ed8","modified":1495849829000},{"_id":"source/_posts2/2014-12-13-wechat-block-kuaidi.markdown","hash":"c0d749aff22f875de046b9ef25b8620c1b3c4695","modified":1495849829000},{"_id":"source/_posts2/2014-10-01-why-alibaba-ux-sucks.markdown","hash":"f31816da1f1d57b6bcbf5cdb3a2bb94329764141","modified":1495849829000},{"_id":"source/_posts2/2015-03-25-digital-native.markdown","hash":"0fd09aeccbbaf597d6de47f758963ecdd4e21a9f","modified":1495849829000},{"_id":"source/_posts2/2015-03-31-e2e_user_scenarios.markdown","hash":"2f5c8706278aa571b5cee75cc1c4b5d5df398a27","modified":1495849829000},{"_id":"source/_posts2/2015-04-15-os-metro.markdown","hash":"dbd409f866121c994eb0691aaad19154e9b60eba","modified":1495849829000},{"_id":"source/_posts2/2015-04-14-unix-linux-note.markdown","hash":"33f0355b51c4e0669e9d3130054b6a294f3a91f6","modified":1495849829000},{"_id":"source/_posts2/2015-05-11-see-u-ali.markdown","hash":"162152f921d2e51473a89151d4bd8dab766419ab","modified":1495849829000},{"_id":"source/_posts2/2015-05-25-js-module-loader.markdown","hash":"caffbffb0fbfbaa8b239422946e4819dddbb1255","modified":1495849829000},{"_id":"source/_posts2/2015-06-15-alitrip-strategy.markdown","hash":"f8ece64556bf77341d0e7e6bb5508db0cb6a5a66","modified":1495849829000},{"_id":"source/_posts2/2015-07-09-js-module-7day.markdown","hash":"bab02ca5dadc9b073bf3f9f904dbf876411f4caf","modified":1495849829000},{"_id":"source/_posts2/2015-09-22-js-version.markdown","hash":"2a27616f57cb7f7d73dbd0b8ca168181f4f13896","modified":1495849829000},{"_id":"source/_posts2/2015-10-28-how-designer-learn-fe.markdown","hash":"29b093cd0647f3f188f2ebf062d64c148f82b32c","modified":1495849829000},{"_id":"source/_posts2/2015-12-28-css-sucks-2015.markdown","hash":"6c09c5aeb190b72c4211a0ad8710ff908bd874e5","modified":1495849829000},{"_id":"source/_posts2/2015-12-15-ios9-safari-web.markdown","hash":"c81c0c545acd667d53365d6d28eb05c77df89eee","modified":1495849829000},{"_id":"source/_posts2/2016-02-01-React-vs-Angular2.markdown","hash":"01d71e721a4e718b3b1852a75be1252891d4bc05","modified":1495849829000},{"_id":"source/_posts2/2016-06-05-pwa-in-my-pov.markdown","hash":"2f4e3b75aaf3579e05a45b8dbdc77d160d63b284","modified":1495849829000},{"_id":"source/_posts2/2016-10-20-pwa-qcon2016.markdown","hash":"1e509464054ac4b640ad13095772dc3c318adafc","modified":1495849829000},{"_id":"source/_posts_backup/2016-06-06-html-tab.markdown","hash":"9457ee219288b92b05112ddaead83c781a615b6a","modified":1495849829000},{"_id":"source/_posts2/2016-11-20-sw-101-gdgdf.markdown","hash":"1e934f06925ce476a21a74901594531bb911514f","modified":1495849829000},{"_id":"source/_posts_backup/2016-05-19-css3.markdown","hash":"a8385e9cbdb60f1a74f94905dd17d4e645dc7285","modified":1495849829000},{"_id":"source/_posts_backup/2016-06-12-performance-optimization.markdown","hash":"e5df8c10ed874648f3c689aebd18718f3c8f55f4","modified":1495849829000},{"_id":"source/_posts_backup/2016-06-22-React.markdown","hash":"e3effeee4c9dc610e85b34bff5d53c65c29b7e68","modified":1495849829000},{"_id":"source/_posts_backup/2016-07-04-redux.markdown","hash":"d06619ffe2f89af2f0d41aaa01a11b2ecfd54819","modified":1495849829000},{"_id":"source/_posts_backup/2016-06-29-html-DOM.markdown","hash":"5e31b1bb76af770bec4fa9057baa3629f7e1b311","modified":1495849829000},{"_id":"source/_posts_backup/2016-07-18-React-Native.markdown","hash":"5fa3acdde7ee969070b6805bfecfd2c523df3f81","modified":1495849829000},{"_id":"source/_posts_backup/2016-07-18-javascript-this.markdown","hash":"59d120f588684b87b104b8faeb4da57dc0422493","modified":1495849829000},{"_id":"source/_posts_backup/2017-03-10-got-git-notes.markdown","hash":"de8f82a56e7d68a6cae977ee57c98d934dfea589","modified":1495849829000},{"_id":"source/_posts_backup/2017-03-10-functional-lib-ramada.markdown","hash":"f7bac88f79e1263717915df0252c42bdd347eb01","modified":1495849829000},{"_id":"source/_posts_backup/2017-03-24-babel-plugin.markdown","hash":"806ae1df286c084b37b1f20aff10516d0e8234d7","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-06-CSS-BEM.markdown","hash":"11025fcb6002c9bd87ba7486ddbc5991d337eb3d","modified":1495849829000},{"_id":"source/_posts_backup/2017-03-24-require-modules.markdown","hash":"4632eaabd244daafba8a6bfd02d894b71b65430c","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-10-gray.markdown","hash":"34f101ec538b80af8ae2e6aca7c211f21f64b032","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-11-CommonJS-AMD-CMD-UMD.markdown","hash":"63d3a6be6df8a37cf3f4ca2ad907f90662e3457e","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-11-react-top-10-2017.markdown","hash":"b655ed7008476b5d7a1646f48fe4754467648e5d","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-21-Nginx.markdown","hash":"d49debd3b878a0a698aa86c82ea68b17566121c0","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-11-webpack-and-rollup-the-same-but-different.markdown","hash":"7eaffe074fbeefe58e80d686d24c51306f0d8532","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-21-PWA.markdown","hash":"57d73df8bffd6a6bbb86036a3b45095b03e828c3","modified":1495849829000},{"_id":"source/_posts_backup/2017-04-21-RxJs.markdown","hash":"f4b76fb549c307a1b8ef3b09c7487e193f6521d4","modified":1495849829000},{"_id":"source/_posts_backup/2017-05-02-Cross-Domain.markdown","hash":"cd202158e7c289fe03b74c590963d91d56f595b9","modified":1495870871000},{"_id":"source/_posts_backup/2017-05-02-React-js-post.markdown","hash":"8fd90ec5836d00644e927c52cf9c7e6eece469aa","modified":1495849829000},{"_id":"source/_posts_backup/lazyMan.js","hash":"6b66730009b5bd719a23e52b461454b85bc538e4","modified":1495849829000},{"_id":"source/_posts_backup/2017-05-15-redux-sage-vs-redux-observable.markdown","hash":"1d195f75b82e875e558dc0db2ef0f7fc4d47fe43","modified":1495849829000},{"_id":"source/_posts_backup/2017-05-22-type-script.markdown","hash":"93dc10054bc00d8a9f70855fbce5d6068c2c4adb","modified":1495849829000},{"_id":"source/_posts_backup/2017-05-24-trip-xi-zang.markdown","hash":"d0d06c70c2d53174420cae23693c438dfdd6a1cf","modified":1495849829000},{"_id":"source/about/index.md","hash":"900b72df10ceb5337e4be7bbb51d077a2b901ba4","modified":1495870312000},{"_id":"source/archives/index.md","hash":"f30bcd9cd0fbe690c2398f21dbf27e56c0c72499","modified":1495870312000},{"_id":"source/img/avatar.jpg","hash":"3aef487dc3076381998e8be91abd565b3ee553b2","modified":1495875657000},{"_id":"source/img/favicon.ico","hash":"a854832cbfc336f43489c599bc2278a51055e730","modified":1490702284000},{"_id":"source/news/index.md","hash":"7d6cb7f4c29d7b3594033ac1a310a4bcb9f7d1b8","modified":1495871165000},{"_id":"source/tags/index.md","hash":"0bc541f4c6a0f21bec67b6717ee86226f0eddf39","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/de.yml","hash":"424a9c1e6ab69334d7873f6574da02ca960aa572","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/default.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/no.yml","hash":"8ca475a3b4f8efe6603030f0013aae39668230e1","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/pl.yml","hash":"de7eb5850ae65ba7638e907c805fea90617a988c","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/ru.yml","hash":"42df7afeb7a35dc46d272b7f4fb880a9d9ebcaa5","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/es.yml","hash":"cb4eeca0ed3768a77e0cd216300f2b2549628b1b","modified":1495870312000},{"_id":"themes/huxblog/layout/404.ejs","hash":"a4d73541a53e56b7dd46249c6d27cb59f4d97422","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/en.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/zh-CN.yml","hash":"7bfcb0b8e97d7e5edcfca8ab26d55d9da2573c1c","modified":1495870312000},{"_id":"themes/huxblog/languages_to_be_added/zh-TW.yml","hash":"9acac6cc4f8002c3fa53ff69fb8cf66c915bd016","modified":1495870312000},{"_id":"themes/huxblog/layout/about.ejs","hash":"7f56c71383ef6c156b56d79b3984e07cc466606a","modified":1495870312000},{"_id":"themes/huxblog/layout/archive.ejs","hash":"6c3ed5d914379319efe835a4aa505abbc616c328","modified":1495870312000},{"_id":"themes/huxblog/layout/archives.ejs","hash":"f0046e58cc1dd876133be2bf927aed2b1821cb3e","modified":1495870312000},{"_id":"themes/huxblog/layout/index.ejs","hash":"a27b99b280e33c263ef3613e8c853a46960bb40f","modified":1496370300000},{"_id":"themes/huxblog/layout/news.ejs","hash":"16883106d00ba38827fa7444dc41c3980c07ca6c","modified":1496369198000},{"_id":"themes/huxblog/layout/layout.ejs","hash":"03e278a3b8bc4503183276b6130ac04a8d5b9865","modified":1495870312000},{"_id":"themes/huxblog/layout/keynote.ejs","hash":"f5689862281e34dbe8402b0e72f632902e53e88b","modified":1495870312000},{"_id":"themes/huxblog/layout/page.ejs","hash":"3fde0787e883274563f9de5aaeb8130b667e132a","modified":1495870312000},{"_id":"themes/huxblog/layout/post.ejs","hash":"fd68124c3de2bbe7d870cecadcf684df7cf82519","modified":1495870312000},{"_id":"themes/huxblog/layout/tags.ejs","hash":"a51bf2828af20939d702de1fdae067439a1153c0","modified":1495870312000},{"_id":"source/img/tag-bg.jpg","hash":"8844274a812ae19e8f2a3b7e4e465342e63eb852","modified":1495870312000},{"_id":"source/img/404-bg.jpg","hash":"68f7d525269a94287e0ad18713ae232fb59dcf71","modified":1495870312000},{"_id":"source/img/home-bg-o.jpg","hash":"990f6f9dd0ecb5348bfcc47305553d58c0d8f326","modified":1495870312000},{"_id":"themes/huxblog/layout/_partial/head.ejs","hash":"87c544a64ea49b835330135a616deb2e9fd39bbb","modified":1495870312000},{"_id":"themes/huxblog/layout/_partial/footer.ejs","hash":"e325a9953abc1a3751aa1a927bc3ecbdd627803a","modified":1495870312000},{"_id":"themes/huxblog/layout/_partial/nav.ejs","hash":"4c905166c960852e9b9a3c9d5c680091e37b481f","modified":1495870312000},{"_id":"themes/huxblog/layout/_partial/pagination.ejs","hash":"557d6bb069a1d48af49ae912994653f44b32a570","modified":1495870312000},{"_id":"themes/huxblog/source/css/hux-blog.css","hash":"64c450f6fb583be4815ccc3899df94c0c6973090","modified":1495877098000},{"_id":"themes/huxblog/source/css/highlight.styl","hash":"e842080e6d580f0f70a7df71fbde3c4e49463c19","modified":1495870312000},{"_id":"themes/huxblog/source/css/hux-blog.min.css","hash":"9062ad56f0c71966fb9c9a4730780e3a904c4e32","modified":1495877110000},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1495870312000},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1495870312000},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1495870312000},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1495870312000},{"_id":"themes/huxblog/source/js/hux-blog.min.js","hash":"f53ca932468d695f612117c915a735b7ed8d1af3","modified":1495879051000},{"_id":"themes/huxblog/source/js/hux-blog.js","hash":"69c34d4d7f46e62e933104c9bb3f8b34e318d952","modified":1495879003000},{"_id":"themes/huxblog/source/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1495870312000},{"_id":"themes/huxblog/source/js/jquery.tagcloud.js","hash":"4e5fd0b07f3bd935f2e603710447e039e3677211","modified":1495870312000},{"_id":"themes/huxblog/source/js/jquery.nav.js","hash":"ef2160a456176a4d09cc0b95d52b27dfbbadf2d8","modified":1495870312000},{"_id":"themes/huxblog/source/js/new.js","hash":"80c352351c45157b69d268d967295a06a305925f","modified":1495992552000},{"_id":"source/img/home-bg.jpg","hash":"a191201c3a98728e6ea66d6827df827ecfcc9d33","modified":1495870312000},{"_id":"themes/huxblog/source/css/bootstrap.min.css","hash":"973e37a8502921d56bc02bb55321f45b072b6f71","modified":1495870312000},{"_id":"themes/huxblog/source/fonts/glyphicons-halflings-regular.svg","hash":"de51a8494180a6db074af2dee2383f0a363c5b08","modified":1495870312000},{"_id":"themes/huxblog/source/js/bootstrap.js","hash":"f8752e9ae24daec0a0baffd7819122f8c6fd9103","modified":1495870312000},{"_id":"themes/huxblog/source/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1495870312000},{"_id":"source/img/contact-bg.jpg","hash":"6af63305c923899017e727b5ca968a2703bc08cf","modified":1495870312000},{"_id":"themes/huxblog/source/css/bootstrap.css","hash":"41c54bf695145ae0b4d9020a1da308ceb05dcaf3","modified":1495870312000},{"_id":"themes/huxblog/source/js/jquery.js","hash":"1852661bd11a09ca9b9cb63d1aa6ff390fffaf4e","modified":1495870312000},{"_id":"source/img/about-bg.jpg","hash":"b5814b2d10eb38dfda0072365567f3823bc34aba","modified":1495870312000}],"Category":[],"Data":[],"Page":[{"layout":"404","description":"ä½ æ¥åˆ°äº†æ²¡æœ‰çŸ¥è¯†çš„è’åŸ :(","header-img":"img/404-bg.jpg","_content":"","source":"404.md","raw":"---\nlayout: 404\ndescription: \"ä½ æ¥åˆ°äº†æ²¡æœ‰çŸ¥è¯†çš„è’åŸ :(\"\nheader-img: \"img/404-bg.jpg\"\n---\n","date":"2017-05-27T07:31:52.000Z","updated":"2017-05-27T07:31:52.000Z","path":"404.html","title":"","comments":1,"_id":"cj3f8dhtn0000mmt7vv19yipa","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"about","title":"About","date":"2016-04-20T20:48:33.000Z","description":"Hey, this is Kaijun.","header-img":"img/about-bg.jpg","comments":1,"_content":"\n\n>å†™å†™ä»£ç ï¼Œåšåšè®¾è®¡ï¼Œçœ‹çœ‹äº§å“ã€‚\n>ä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œå¤šç©ç©çœ‹çœ‹ã€‚\n\n9æœˆ21æ—¥ä¸Šåˆï¼Œé˜³å…‰æ˜åªšï¼Œé²œèŠ±æ–—è‰³ã€‚å¸•æ´›é˜¿å°”æ‰˜è‹¹æœåº—é‡Œæ¬¢å£°ç¬‘è¯­ï¼Œäººå¤´æ”’åŠ¨ã€‚è‹¹æœå…¬å¸é¦–å¸­æ‰§è¡Œå®˜è’‚å§†Â·åº“å…‹å…ˆç”Ÿåœ¨åº—é•¿æ¬§é˜³çŒ›å—é™ªåŒä¸‹ï¼Œä¸è¿œåƒç±³ï¼Œæ·±å…¥åˆ°ä¸€çº¿åº—é¢ï¼Œä¸ºé‚£é‡Œçš„å‘˜å·¥å¸¦å»èŠ‚æ›°çš„é—®å€™å’Œè‰¯å¥½çš„ç¥æ„¿ã€‚<br><br>â€œæœç²‰ä»¬ï¼Œä½ ä»¬è¾›è‹¦äº†ï¼Œæˆ‘ä»£è¡¨æŸæœå…¬å¸ï¼Œç¥ä½ ä»¬èº«ä½“å¥åº·ï¼Œç”Ÿæ´»å¹¸ç¦ï¼Œå·¥ä½œæˆåŠŸï¼â€åº“å…‹äº²åˆ‡æ…°é—®å¹¿å¤§å‘˜å·¥å’Œé¡¾å®¢ï¼Œå¹¶å°±iOS7ã€iPhone 5Så’ŒiPhone 5Cçš„é”€å”®çŠ¶å†µè¿›è¡Œè°ƒç ”ã€‚ <br><br>â€œæ‚¨ç°åœ¨æ¯æœˆå·¥èµ„æœ‰å¤šå°‘ï¼Ÿè‚¾5Sæ‹¿åˆ°äº†å—ï¼Ÿâ€åœ¨åº—é‡Œï¼Œåº“å…‹å…³åˆ‡åœ°å‘æœç²‰ä»¬é—®èµ·è¿™ä¸€é—®é¢˜ã€‚å½“å¬è¯´æœç²‰ä»¬æ’åˆ°äº†5Sï¼Œåº“å…‹æ»¡æ„åœ°è¿è¿ç‚¹å¤´ã€‚æ¥ç€ä»–æŒ‡å‡ºï¼Œè¿‘å¹´æ¥è‹¹æœäº‹ä¸šå‘å±•å–å¾—å·¨å¤§æˆå°±ï¼Œç‰¹åˆ«æ˜¯iPhoneå½±å“å‰§å¢ï¼Œè€ç™¾å§“å¯¹iOSæ»¡æ„åº¦é€æ­¥æé«˜ï¼Œåœ¨è¿™ä¸ªè½¬å˜è¿‡ç¨‹ä¸­ï¼Œæœç²‰çš„è¾›å‹¤å·¥ä½œåŠŸä¸å¯æ²¡ã€‚<br><br>åº“å…‹çœ‹åˆ°ä¸€ä¸ªä¸­å›½å°æœ‹å‹åœ¨æ’é˜Ÿä¹°iPhone 5Sï¼Œäº²åˆ‡çš„é—®ï¼šâ€œ5288å…ƒä¸€å°èƒ½æ‰¿å—ä¸ï¼Ÿâ€å°æœ‹å‹å›ç­”åˆ°ï¼šâ€œèƒ½ï¼â€å½“å¾—çŸ¥è¿™ä½å°æœ‹å‹å–äº†ä¸€ä¸ªè‚¾æ¥ä¹°iPhone 5Sæ—¶ï¼Œåº“å…‹å®å˜±é“ï¼šâ€œåœ¨æ”¯æŒè‹¹æœçš„åŒæ—¶ï¼Œä¹Ÿè¦çˆ±æŠ¤èº«ä½“ã€‚â€<br><br>åº“å…‹ä¸è´­ä¹°è‹¹æœæ‰‹æœºçš„æœç²‰ä»¬å…´è‡´å‹ƒå‹ƒåœ°å‚è§‚äº†è‹¹æœä¸“å–åº—ï¼Œå’Œå‘˜å·¥ä»¬æ‹‰äº†æ‹‰å®¶å¸¸ï¼Œå¹¶é¥¶æœ‰å…´è¶£åœ°ç©äº†å››ç›˜åˆ‡è¥¿ç“œæ¸¸æˆï¼Œä¸æ™®é€šå‘˜å·¥åŒä¹ã€‚<br><br>åœ¨äº¤è°ˆä¸­ï¼Œåº“å…‹å¤šæ¬¡å…³å¿ƒåœ°å¼ºè°ƒï¼šâ€œæœ‰äº†iPhone 5Cï¼Œå°±ä¸å–iPhone 5äº†ã€‚â€å¹¶å¯¹é¡¾å®¢è¯´ï¼šâ€œå¥½å¥½ä¼‘æ¯ï¼Œèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±å˜›ï¼â€ä¼šè°ˆå§‹ç»ˆåœ¨äº²åˆ‡å‹å¥½çš„æ°”æ°›ä¸­è¿›è¡Œã€‚<br><br>é¡¾å®¢ä»¬å°±åº“å…‹çš„è®²è¯è¾¾æˆäº†å¹¿æ³›çš„å…±è¯†ï¼Œå¹¶æ‰¿è®¤ä¸–ç•Œä¸Šåªæœ‰iOSæœ€æµç•…ï¼Œè¦ç´§ç´§çš„å›¢ç»“åœ¨ä»¥åº“å…‹å…ˆç”Ÿä¸ºé¦–å¸­æ‰§è¡Œå®˜çš„è‹¹æœå…¬å¸é›†ä½“å‘¨å›´ï¼Œä¸€å¿ƒä¸€æ„æŠ“å­¦ä¹ ï¼Œèšç²¾ä¼šç¥è°‹å‘å±•ã€‚<br>\n<br>å¸•æ´›é˜¿å°”æ‰˜è‹¹æœä¸“å–åº—å½“æ—¥åŸåˆ™é€šè¿‡ã€Šè’‚å§†Â·åº“å…‹é¦–å¸­æ‰§è¡Œå®˜åœ¨åŠ å·æ–°è‹¹æœåº—çš„è®²è¯çºªè¦ã€‹ï¼Œå¹¶ä¸‹å‘å„åˆ†åº—è®¤çœŸå­¦ä¹ ã€ç ”è®¨ã€‚\n\n<p style=\"text-align:right;\">\n    â€”â€” <a href=\"http://www.zhihu.com/question/19687065\">æä¹¦èˆª ï¼ ä»€ä¹ˆæ˜¯ã€Œå…±äº§ä¸­æ–‡è…”è°ƒã€ï¼Ÿ </a>\n</p>","source":"about/index.md","raw":"---\nlayout: \"about\"\ntitle: \"About\"\ndate: 2016-04-21 04:48:33\ndescription: \"Hey, this is Kaijun.\"\nheader-img: \"img/about-bg.jpg\"\ncomments: true\n---\n\n\n>å†™å†™ä»£ç ï¼Œåšåšè®¾è®¡ï¼Œçœ‹çœ‹äº§å“ã€‚\n>ä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œå¤šç©ç©çœ‹çœ‹ã€‚\n\n9æœˆ21æ—¥ä¸Šåˆï¼Œé˜³å…‰æ˜åªšï¼Œé²œèŠ±æ–—è‰³ã€‚å¸•æ´›é˜¿å°”æ‰˜è‹¹æœåº—é‡Œæ¬¢å£°ç¬‘è¯­ï¼Œäººå¤´æ”’åŠ¨ã€‚è‹¹æœå…¬å¸é¦–å¸­æ‰§è¡Œå®˜è’‚å§†Â·åº“å…‹å…ˆç”Ÿåœ¨åº—é•¿æ¬§é˜³çŒ›å—é™ªåŒä¸‹ï¼Œä¸è¿œåƒç±³ï¼Œæ·±å…¥åˆ°ä¸€çº¿åº—é¢ï¼Œä¸ºé‚£é‡Œçš„å‘˜å·¥å¸¦å»èŠ‚æ›°çš„é—®å€™å’Œè‰¯å¥½çš„ç¥æ„¿ã€‚<br><br>â€œæœç²‰ä»¬ï¼Œä½ ä»¬è¾›è‹¦äº†ï¼Œæˆ‘ä»£è¡¨æŸæœå…¬å¸ï¼Œç¥ä½ ä»¬èº«ä½“å¥åº·ï¼Œç”Ÿæ´»å¹¸ç¦ï¼Œå·¥ä½œæˆåŠŸï¼â€åº“å…‹äº²åˆ‡æ…°é—®å¹¿å¤§å‘˜å·¥å’Œé¡¾å®¢ï¼Œå¹¶å°±iOS7ã€iPhone 5Så’ŒiPhone 5Cçš„é”€å”®çŠ¶å†µè¿›è¡Œè°ƒç ”ã€‚ <br><br>â€œæ‚¨ç°åœ¨æ¯æœˆå·¥èµ„æœ‰å¤šå°‘ï¼Ÿè‚¾5Sæ‹¿åˆ°äº†å—ï¼Ÿâ€åœ¨åº—é‡Œï¼Œåº“å…‹å…³åˆ‡åœ°å‘æœç²‰ä»¬é—®èµ·è¿™ä¸€é—®é¢˜ã€‚å½“å¬è¯´æœç²‰ä»¬æ’åˆ°äº†5Sï¼Œåº“å…‹æ»¡æ„åœ°è¿è¿ç‚¹å¤´ã€‚æ¥ç€ä»–æŒ‡å‡ºï¼Œè¿‘å¹´æ¥è‹¹æœäº‹ä¸šå‘å±•å–å¾—å·¨å¤§æˆå°±ï¼Œç‰¹åˆ«æ˜¯iPhoneå½±å“å‰§å¢ï¼Œè€ç™¾å§“å¯¹iOSæ»¡æ„åº¦é€æ­¥æé«˜ï¼Œåœ¨è¿™ä¸ªè½¬å˜è¿‡ç¨‹ä¸­ï¼Œæœç²‰çš„è¾›å‹¤å·¥ä½œåŠŸä¸å¯æ²¡ã€‚<br><br>åº“å…‹çœ‹åˆ°ä¸€ä¸ªä¸­å›½å°æœ‹å‹åœ¨æ’é˜Ÿä¹°iPhone 5Sï¼Œäº²åˆ‡çš„é—®ï¼šâ€œ5288å…ƒä¸€å°èƒ½æ‰¿å—ä¸ï¼Ÿâ€å°æœ‹å‹å›ç­”åˆ°ï¼šâ€œèƒ½ï¼â€å½“å¾—çŸ¥è¿™ä½å°æœ‹å‹å–äº†ä¸€ä¸ªè‚¾æ¥ä¹°iPhone 5Sæ—¶ï¼Œåº“å…‹å®å˜±é“ï¼šâ€œåœ¨æ”¯æŒè‹¹æœçš„åŒæ—¶ï¼Œä¹Ÿè¦çˆ±æŠ¤èº«ä½“ã€‚â€<br><br>åº“å…‹ä¸è´­ä¹°è‹¹æœæ‰‹æœºçš„æœç²‰ä»¬å…´è‡´å‹ƒå‹ƒåœ°å‚è§‚äº†è‹¹æœä¸“å–åº—ï¼Œå’Œå‘˜å·¥ä»¬æ‹‰äº†æ‹‰å®¶å¸¸ï¼Œå¹¶é¥¶æœ‰å…´è¶£åœ°ç©äº†å››ç›˜åˆ‡è¥¿ç“œæ¸¸æˆï¼Œä¸æ™®é€šå‘˜å·¥åŒä¹ã€‚<br><br>åœ¨äº¤è°ˆä¸­ï¼Œåº“å…‹å¤šæ¬¡å…³å¿ƒåœ°å¼ºè°ƒï¼šâ€œæœ‰äº†iPhone 5Cï¼Œå°±ä¸å–iPhone 5äº†ã€‚â€å¹¶å¯¹é¡¾å®¢è¯´ï¼šâ€œå¥½å¥½ä¼‘æ¯ï¼Œèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±å˜›ï¼â€ä¼šè°ˆå§‹ç»ˆåœ¨äº²åˆ‡å‹å¥½çš„æ°”æ°›ä¸­è¿›è¡Œã€‚<br><br>é¡¾å®¢ä»¬å°±åº“å…‹çš„è®²è¯è¾¾æˆäº†å¹¿æ³›çš„å…±è¯†ï¼Œå¹¶æ‰¿è®¤ä¸–ç•Œä¸Šåªæœ‰iOSæœ€æµç•…ï¼Œè¦ç´§ç´§çš„å›¢ç»“åœ¨ä»¥åº“å…‹å…ˆç”Ÿä¸ºé¦–å¸­æ‰§è¡Œå®˜çš„è‹¹æœå…¬å¸é›†ä½“å‘¨å›´ï¼Œä¸€å¿ƒä¸€æ„æŠ“å­¦ä¹ ï¼Œèšç²¾ä¼šç¥è°‹å‘å±•ã€‚<br>\n<br>å¸•æ´›é˜¿å°”æ‰˜è‹¹æœä¸“å–åº—å½“æ—¥åŸåˆ™é€šè¿‡ã€Šè’‚å§†Â·åº“å…‹é¦–å¸­æ‰§è¡Œå®˜åœ¨åŠ å·æ–°è‹¹æœåº—çš„è®²è¯çºªè¦ã€‹ï¼Œå¹¶ä¸‹å‘å„åˆ†åº—è®¤çœŸå­¦ä¹ ã€ç ”è®¨ã€‚\n\n<p style=\"text-align:right;\">\n    â€”â€” <a href=\"http://www.zhihu.com/question/19687065\">æä¹¦èˆª ï¼ ä»€ä¹ˆæ˜¯ã€Œå…±äº§ä¸­æ–‡è…”è°ƒã€ï¼Ÿ </a>\n</p>","updated":"2017-05-27T07:31:52.000Z","path":"about/index.html","_id":"cj3f8dhvs0002mmt7ckwvp12y","content":"<blockquote>\n<p>å†™å†™ä»£ç ï¼Œåšåšè®¾è®¡ï¼Œçœ‹çœ‹äº§å“ã€‚<br>ä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œå¤šç©ç©çœ‹çœ‹ã€‚</p>\n</blockquote>\n<p>9æœˆ21æ—¥ä¸Šåˆï¼Œé˜³å…‰æ˜åªšï¼Œé²œèŠ±æ–—è‰³ã€‚å¸•æ´›é˜¿å°”æ‰˜è‹¹æœåº—é‡Œæ¬¢å£°ç¬‘è¯­ï¼Œäººå¤´æ”’åŠ¨ã€‚è‹¹æœå…¬å¸é¦–å¸­æ‰§è¡Œå®˜è’‚å§†Â·åº“å…‹å…ˆç”Ÿåœ¨åº—é•¿æ¬§é˜³çŒ›å—é™ªåŒä¸‹ï¼Œä¸è¿œåƒç±³ï¼Œæ·±å…¥åˆ°ä¸€çº¿åº—é¢ï¼Œä¸ºé‚£é‡Œçš„å‘˜å·¥å¸¦å»èŠ‚æ›°çš„é—®å€™å’Œè‰¯å¥½çš„ç¥æ„¿ã€‚<br><br>â€œæœç²‰ä»¬ï¼Œä½ ä»¬è¾›è‹¦äº†ï¼Œæˆ‘ä»£è¡¨æŸæœå…¬å¸ï¼Œç¥ä½ ä»¬èº«ä½“å¥åº·ï¼Œç”Ÿæ´»å¹¸ç¦ï¼Œå·¥ä½œæˆåŠŸï¼â€åº“å…‹äº²åˆ‡æ…°é—®å¹¿å¤§å‘˜å·¥å’Œé¡¾å®¢ï¼Œå¹¶å°±iOS7ã€iPhone 5Så’ŒiPhone 5Cçš„é”€å”®çŠ¶å†µè¿›è¡Œè°ƒç ”ã€‚ <br><br>â€œæ‚¨ç°åœ¨æ¯æœˆå·¥èµ„æœ‰å¤šå°‘ï¼Ÿè‚¾5Sæ‹¿åˆ°äº†å—ï¼Ÿâ€åœ¨åº—é‡Œï¼Œåº“å…‹å…³åˆ‡åœ°å‘æœç²‰ä»¬é—®èµ·è¿™ä¸€é—®é¢˜ã€‚å½“å¬è¯´æœç²‰ä»¬æ’åˆ°äº†5Sï¼Œåº“å…‹æ»¡æ„åœ°è¿è¿ç‚¹å¤´ã€‚æ¥ç€ä»–æŒ‡å‡ºï¼Œè¿‘å¹´æ¥è‹¹æœäº‹ä¸šå‘å±•å–å¾—å·¨å¤§æˆå°±ï¼Œç‰¹åˆ«æ˜¯iPhoneå½±å“å‰§å¢ï¼Œè€ç™¾å§“å¯¹iOSæ»¡æ„åº¦é€æ­¥æé«˜ï¼Œåœ¨è¿™ä¸ªè½¬å˜è¿‡ç¨‹ä¸­ï¼Œæœç²‰çš„è¾›å‹¤å·¥ä½œåŠŸä¸å¯æ²¡ã€‚<br><br>åº“å…‹çœ‹åˆ°ä¸€ä¸ªä¸­å›½å°æœ‹å‹åœ¨æ’é˜Ÿä¹°iPhone 5Sï¼Œäº²åˆ‡çš„é—®ï¼šâ€œ5288å…ƒä¸€å°èƒ½æ‰¿å—ä¸ï¼Ÿâ€å°æœ‹å‹å›ç­”åˆ°ï¼šâ€œèƒ½ï¼â€å½“å¾—çŸ¥è¿™ä½å°æœ‹å‹å–äº†ä¸€ä¸ªè‚¾æ¥ä¹°iPhone 5Sæ—¶ï¼Œåº“å…‹å®å˜±é“ï¼šâ€œåœ¨æ”¯æŒè‹¹æœçš„åŒæ—¶ï¼Œä¹Ÿè¦çˆ±æŠ¤èº«ä½“ã€‚â€<br><br>åº“å…‹ä¸è´­ä¹°è‹¹æœæ‰‹æœºçš„æœç²‰ä»¬å…´è‡´å‹ƒå‹ƒåœ°å‚è§‚äº†è‹¹æœä¸“å–åº—ï¼Œå’Œå‘˜å·¥ä»¬æ‹‰äº†æ‹‰å®¶å¸¸ï¼Œå¹¶é¥¶æœ‰å…´è¶£åœ°ç©äº†å››ç›˜åˆ‡è¥¿ç“œæ¸¸æˆï¼Œä¸æ™®é€šå‘˜å·¥åŒä¹ã€‚<br><br>åœ¨äº¤è°ˆä¸­ï¼Œåº“å…‹å¤šæ¬¡å…³å¿ƒåœ°å¼ºè°ƒï¼šâ€œæœ‰äº†iPhone 5Cï¼Œå°±ä¸å–iPhone 5äº†ã€‚â€å¹¶å¯¹é¡¾å®¢è¯´ï¼šâ€œå¥½å¥½ä¼‘æ¯ï¼Œèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±å˜›ï¼â€ä¼šè°ˆå§‹ç»ˆåœ¨äº²åˆ‡å‹å¥½çš„æ°”æ°›ä¸­è¿›è¡Œã€‚<br><br>é¡¾å®¢ä»¬å°±åº“å…‹çš„è®²è¯è¾¾æˆäº†å¹¿æ³›çš„å…±è¯†ï¼Œå¹¶æ‰¿è®¤ä¸–ç•Œä¸Šåªæœ‰iOSæœ€æµç•…ï¼Œè¦ç´§ç´§çš„å›¢ç»“åœ¨ä»¥åº“å…‹å…ˆç”Ÿä¸ºé¦–å¸­æ‰§è¡Œå®˜çš„è‹¹æœå…¬å¸é›†ä½“å‘¨å›´ï¼Œä¸€å¿ƒä¸€æ„æŠ“å­¦ä¹ ï¼Œèšç²¾ä¼šç¥è°‹å‘å±•ã€‚<br><br><br>å¸•æ´›é˜¿å°”æ‰˜è‹¹æœä¸“å–åº—å½“æ—¥åŸåˆ™é€šè¿‡ã€Šè’‚å§†Â·åº“å…‹é¦–å¸­æ‰§è¡Œå®˜åœ¨åŠ å·æ–°è‹¹æœåº—çš„è®²è¯çºªè¦ã€‹ï¼Œå¹¶ä¸‹å‘å„åˆ†åº—è®¤çœŸå­¦ä¹ ã€ç ”è®¨ã€‚</p>\n<p style=\"text-align:right;\"><br>    â€”â€” <a href=\"http://www.zhihu.com/question/19687065\" target=\"_blank\" rel=\"external\">æä¹¦èˆª ï¼ ä»€ä¹ˆæ˜¯ã€Œå…±äº§ä¸­æ–‡è…”è°ƒã€ï¼Ÿ </a><br></p>","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>å†™å†™ä»£ç ï¼Œåšåšè®¾è®¡ï¼Œçœ‹çœ‹äº§å“ã€‚<br>ä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œå¤šç©ç©çœ‹çœ‹ã€‚</p>\n</blockquote>\n<p>9æœˆ21æ—¥ä¸Šåˆï¼Œé˜³å…‰æ˜åªšï¼Œé²œèŠ±æ–—è‰³ã€‚å¸•æ´›é˜¿å°”æ‰˜è‹¹æœåº—é‡Œæ¬¢å£°ç¬‘è¯­ï¼Œäººå¤´æ”’åŠ¨ã€‚è‹¹æœå…¬å¸é¦–å¸­æ‰§è¡Œå®˜è’‚å§†Â·åº“å…‹å…ˆç”Ÿåœ¨åº—é•¿æ¬§é˜³çŒ›å—é™ªåŒä¸‹ï¼Œä¸è¿œåƒç±³ï¼Œæ·±å…¥åˆ°ä¸€çº¿åº—é¢ï¼Œä¸ºé‚£é‡Œçš„å‘˜å·¥å¸¦å»èŠ‚æ›°çš„é—®å€™å’Œè‰¯å¥½çš„ç¥æ„¿ã€‚<br><br>â€œæœç²‰ä»¬ï¼Œä½ ä»¬è¾›è‹¦äº†ï¼Œæˆ‘ä»£è¡¨æŸæœå…¬å¸ï¼Œç¥ä½ ä»¬èº«ä½“å¥åº·ï¼Œç”Ÿæ´»å¹¸ç¦ï¼Œå·¥ä½œæˆåŠŸï¼â€åº“å…‹äº²åˆ‡æ…°é—®å¹¿å¤§å‘˜å·¥å’Œé¡¾å®¢ï¼Œå¹¶å°±iOS7ã€iPhone 5Så’ŒiPhone 5Cçš„é”€å”®çŠ¶å†µè¿›è¡Œè°ƒç ”ã€‚ <br><br>â€œæ‚¨ç°åœ¨æ¯æœˆå·¥èµ„æœ‰å¤šå°‘ï¼Ÿè‚¾5Sæ‹¿åˆ°äº†å—ï¼Ÿâ€åœ¨åº—é‡Œï¼Œåº“å…‹å…³åˆ‡åœ°å‘æœç²‰ä»¬é—®èµ·è¿™ä¸€é—®é¢˜ã€‚å½“å¬è¯´æœç²‰ä»¬æ’åˆ°äº†5Sï¼Œåº“å…‹æ»¡æ„åœ°è¿è¿ç‚¹å¤´ã€‚æ¥ç€ä»–æŒ‡å‡ºï¼Œè¿‘å¹´æ¥è‹¹æœäº‹ä¸šå‘å±•å–å¾—å·¨å¤§æˆå°±ï¼Œç‰¹åˆ«æ˜¯iPhoneå½±å“å‰§å¢ï¼Œè€ç™¾å§“å¯¹iOSæ»¡æ„åº¦é€æ­¥æé«˜ï¼Œåœ¨è¿™ä¸ªè½¬å˜è¿‡ç¨‹ä¸­ï¼Œæœç²‰çš„è¾›å‹¤å·¥ä½œåŠŸä¸å¯æ²¡ã€‚<br><br>åº“å…‹çœ‹åˆ°ä¸€ä¸ªä¸­å›½å°æœ‹å‹åœ¨æ’é˜Ÿä¹°iPhone 5Sï¼Œäº²åˆ‡çš„é—®ï¼šâ€œ5288å…ƒä¸€å°èƒ½æ‰¿å—ä¸ï¼Ÿâ€å°æœ‹å‹å›ç­”åˆ°ï¼šâ€œèƒ½ï¼â€å½“å¾—çŸ¥è¿™ä½å°æœ‹å‹å–äº†ä¸€ä¸ªè‚¾æ¥ä¹°iPhone 5Sæ—¶ï¼Œåº“å…‹å®å˜±é“ï¼šâ€œåœ¨æ”¯æŒè‹¹æœçš„åŒæ—¶ï¼Œä¹Ÿè¦çˆ±æŠ¤èº«ä½“ã€‚â€<br><br>åº“å…‹ä¸è´­ä¹°è‹¹æœæ‰‹æœºçš„æœç²‰ä»¬å…´è‡´å‹ƒå‹ƒåœ°å‚è§‚äº†è‹¹æœä¸“å–åº—ï¼Œå’Œå‘˜å·¥ä»¬æ‹‰äº†æ‹‰å®¶å¸¸ï¼Œå¹¶é¥¶æœ‰å…´è¶£åœ°ç©äº†å››ç›˜åˆ‡è¥¿ç“œæ¸¸æˆï¼Œä¸æ™®é€šå‘˜å·¥åŒä¹ã€‚<br><br>åœ¨äº¤è°ˆä¸­ï¼Œåº“å…‹å¤šæ¬¡å…³å¿ƒåœ°å¼ºè°ƒï¼šâ€œæœ‰äº†iPhone 5Cï¼Œå°±ä¸å–iPhone 5äº†ã€‚â€å¹¶å¯¹é¡¾å®¢è¯´ï¼šâ€œå¥½å¥½ä¼‘æ¯ï¼Œèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±å˜›ï¼â€ä¼šè°ˆå§‹ç»ˆåœ¨äº²åˆ‡å‹å¥½çš„æ°”æ°›ä¸­è¿›è¡Œã€‚<br><br>é¡¾å®¢ä»¬å°±åº“å…‹çš„è®²è¯è¾¾æˆäº†å¹¿æ³›çš„å…±è¯†ï¼Œå¹¶æ‰¿è®¤ä¸–ç•Œä¸Šåªæœ‰iOSæœ€æµç•…ï¼Œè¦ç´§ç´§çš„å›¢ç»“åœ¨ä»¥åº“å…‹å…ˆç”Ÿä¸ºé¦–å¸­æ‰§è¡Œå®˜çš„è‹¹æœå…¬å¸é›†ä½“å‘¨å›´ï¼Œä¸€å¿ƒä¸€æ„æŠ“å­¦ä¹ ï¼Œèšç²¾ä¼šç¥è°‹å‘å±•ã€‚<br><br><br>å¸•æ´›é˜¿å°”æ‰˜è‹¹æœä¸“å–åº—å½“æ—¥åŸåˆ™é€šè¿‡ã€Šè’‚å§†Â·åº“å…‹é¦–å¸­æ‰§è¡Œå®˜åœ¨åŠ å·æ–°è‹¹æœåº—çš„è®²è¯çºªè¦ã€‹ï¼Œå¹¶ä¸‹å‘å„åˆ†åº—è®¤çœŸå­¦ä¹ ã€ç ”è®¨ã€‚</p>\n<p style=\"text-align:right;\"><br>    â€”â€” <a href=\"http://www.zhihu.com/question/19687065\" target=\"_blank\" rel=\"external\">æä¹¦èˆª ï¼ ä»€ä¹ˆæ˜¯ã€Œå…±äº§ä¸­æ–‡è…”è°ƒã€ï¼Ÿ </a><br></p>"},{"layout":"archives","title":"Archives","description":"Hey, this is Archives.","header-img":"img/tag-bg.jpg","_content":"","source":"archives/index.md","raw":"---\nlayout: \"archives\"\ntitle: \"Archives\"\ndescription: \"Hey, this is Archives.\"\nheader-img: \"img/tag-bg.jpg\"\n---\n","date":"2017-05-27T07:31:52.000Z","updated":"2017-05-27T07:31:52.000Z","path":"archives/index.html","comments":1,"_id":"cj3f8dhvv0004mmt7bmqkh3l8","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"news","title":"News","description":"Hey, this is Kaijun.","header-img":"img/about-bg.jpg","comments":1,"_content":"\n# News","source":"news/index.md","raw":"---\nlayout: \"news\"\ntitle: \"News\"\ndescription: \"Hey, this is Kaijun.\"\nheader-img: \"img/about-bg.jpg\"\ncomments: true\n---\n\n# News","date":"2017-05-27T07:46:05.000Z","updated":"2017-05-27T07:46:05.000Z","path":"news/index.html","_id":"cj3f8dhw40007mmt7q0ehaet7","content":"<h1 id=\"News\"><a href=\"#News\" class=\"headerlink\" title=\"News\"></a>News</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"News\"><a href=\"#News\" class=\"headerlink\" title=\"News\"></a>News</h1>"},{"layout":"tags","title":"Tags","description":"Hey, this is Tags.","header-img":"img/tag-bg.jpg","_content":"","source":"tags/index.md","raw":"---\nlayout: \"tags\"\ntitle: \"Tags\"\ndescription: \"Hey, this is Tags.\"\nheader-img: \"img/tag-bg.jpg\"\n---\n","date":"2017-05-27T07:31:52.000Z","updated":"2017-05-27T07:31:52.000Z","path":"tags/index.html","comments":1,"_id":"cj3f8dhwa0009mmt7tnxsq7re","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"layout":"post","title":"Reducer React App's Size In Production","subtitle":"webpack","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"webpack-bg.png","header-mask":0.3,"catalog":true,"_content":"\n[App](https://medium.com/@rajaraodv/two-quick-ways-to-reduce-react-apps-size-in-production-82226605771a#.qaey3854r){:target=\"_block\"}\n\nIf you are building a React + Redux App that has Webpack, then you might have noticed that the size of the final bundle.js (the dev version) for a simple app itself could be 1MB- 2MB!\nFor example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!\n\n\nFor example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!\n![](http://o7d3ayvg2.bkt.clouddn.com/react-redux-webpack-node_modules.png)\n\nIt could be scaryğŸ˜± but Webpack and Node.js has all the tools you need to reduce the size.\nI could reduce the size from 1.5MB to just 90KB by simply doing the following two things:\n\n1: Add the following Webpack plugins (source code)\n\n```javascript\nplugins: [\n    new webpack.DefinePlugin({ // <-- key to reducing React's size\n        // This can reduce react lib size and disable some dev feactures like props validation\n        'process.env': {\n            'NODE_ENV': JSON.stringify('production')\n        }\n    }),\n    new webpack.optimize.DedupePlugin(), //dedupe similar code\n    new webpack.optimize.UglifyJsPlugin(), //minify everything\n    new webpack.optimize.AggressiveMergingPlugin()//Merge chunks\n  ],\n```\n\n> DefinePlugin\nThe DefinePlugin allows you to create global constants which can be configured at compile time. This can be very useful for allowing different behaviour between development builds and release builds. For example, you might use a global constant to determine whether logging takes place; perhaps you perform logging in your development build but not in the release build. Thatâ€™s the sort of scenario the DefinePlugin facilitates.\n\n> DedupePlugin\nSearch for equal or similar files and deduplicate them in the output. This comes with some overhead for the entry chunk, but can reduce file size effectively.\n\nThis doesnâ€™t change the module semantics at all. Donâ€™t expect to solve problems with multiple module instance. They wonâ€™t be one instance after deduplication.\n\n`Note: Donâ€™t use it in watch mode. Only for production builds.`\n\n> UglifyJsPlugin\nMinimize all JavaScript output of chunks. Loaders are switched into minimizing mode.\nYou can pass an object containing [UglifyJS options](https://github.com/mishoo/UglifyJS2#usage){:target=\"_block\"}.\n\n> AggressiveMergingPlugin\nA plugin for a more aggressive chunk merging strategy. Even similar chunks are merged if the total size is reduced enough. As an option modules that are not common in these chunks can be moved up the chunk tree to the parents.\n","source":"_posts/2015-12-06-reducer-react-app-size.markdown","raw":"---\nlayout:     post\ntitle:      \"Reducer React App's Size In Production\"\nsubtitle:   \"webpack\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"webpack-bg.png\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - WebPack\n---\n\n[App](https://medium.com/@rajaraodv/two-quick-ways-to-reduce-react-apps-size-in-production-82226605771a#.qaey3854r){:target=\"_block\"}\n\nIf you are building a React + Redux App that has Webpack, then you might have noticed that the size of the final bundle.js (the dev version) for a simple app itself could be 1MB- 2MB!\nFor example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!\n\n\nFor example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!\n![](http://o7d3ayvg2.bkt.clouddn.com/react-redux-webpack-node_modules.png)\n\nIt could be scaryğŸ˜± but Webpack and Node.js has all the tools you need to reduce the size.\nI could reduce the size from 1.5MB to just 90KB by simply doing the following two things:\n\n1: Add the following Webpack plugins (source code)\n\n```javascript\nplugins: [\n    new webpack.DefinePlugin({ // <-- key to reducing React's size\n        // This can reduce react lib size and disable some dev feactures like props validation\n        'process.env': {\n            'NODE_ENV': JSON.stringify('production')\n        }\n    }),\n    new webpack.optimize.DedupePlugin(), //dedupe similar code\n    new webpack.optimize.UglifyJsPlugin(), //minify everything\n    new webpack.optimize.AggressiveMergingPlugin()//Merge chunks\n  ],\n```\n\n> DefinePlugin\nThe DefinePlugin allows you to create global constants which can be configured at compile time. This can be very useful for allowing different behaviour between development builds and release builds. For example, you might use a global constant to determine whether logging takes place; perhaps you perform logging in your development build but not in the release build. Thatâ€™s the sort of scenario the DefinePlugin facilitates.\n\n> DedupePlugin\nSearch for equal or similar files and deduplicate them in the output. This comes with some overhead for the entry chunk, but can reduce file size effectively.\n\nThis doesnâ€™t change the module semantics at all. Donâ€™t expect to solve problems with multiple module instance. They wonâ€™t be one instance after deduplication.\n\n`Note: Donâ€™t use it in watch mode. Only for production builds.`\n\n> UglifyJsPlugin\nMinimize all JavaScript output of chunks. Loaders are switched into minimizing mode.\nYou can pass an object containing [UglifyJS options](https://github.com/mishoo/UglifyJS2#usage){:target=\"_block\"}.\n\n> AggressiveMergingPlugin\nA plugin for a more aggressive chunk merging strategy. Even similar chunks are merged if the total size is reduced enough. As an option modules that are not common in these chunks can be moved up the chunk tree to the parents.\n","slug":"2015-12-06-reducer-react-app-size","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhvn0001mmt78ori14o9","content":"<p><a href=\"https://medium.com/@rajaraodv/two-quick-ways-to-reduce-react-apps-size-in-production-82226605771a#.qaey3854r\" target=\"_blank\" rel=\"external\">App</a>{:target=â€_blockâ€}</p>\n<p>If you are building a React + Redux App that has Webpack, then you might have noticed that the size of the final bundle.js (the dev version) for a simple app itself could be 1MB- 2MB!<br>For example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!</p>\n<p>For example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!<br><img src=\"http://o7d3ayvg2.bkt.clouddn.com/react-redux-webpack-node_modules.png\" alt=\"\"></p>\n<p>It could be scaryğŸ˜± but Webpack and Node.js has all the tools you need to reduce the size.<br>I could reduce the size from 1.5MB to just 90KB by simply doing the following two things:</p>\n<p>1: Add the following Webpack plugins (source code)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123; <span class=\"comment\">// &lt;-- key to reducing React's size</span></div><div class=\"line\">        <span class=\"comment\">// This can reduce react lib size and disable some dev feactures like props validation</span></div><div class=\"line\">        <span class=\"string\">'process.env'</span>: &#123;</div><div class=\"line\">            <span class=\"string\">'NODE_ENV'</span>: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'production'</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.DedupePlugin(), <span class=\"comment\">//dedupe similar code</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(), <span class=\"comment\">//minify everything</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.AggressiveMergingPlugin()<span class=\"comment\">//Merge chunks</span></div><div class=\"line\">  ],</div></pre></td></tr></table></figure>\n<blockquote>\n<p>DefinePlugin<br>The DefinePlugin allows you to create global constants which can be configured at compile time. This can be very useful for allowing different behaviour between development builds and release builds. For example, you might use a global constant to determine whether logging takes place; perhaps you perform logging in your development build but not in the release build. Thatâ€™s the sort of scenario the DefinePlugin facilitates.</p>\n<p>DedupePlugin<br>Search for equal or similar files and deduplicate them in the output. This comes with some overhead for the entry chunk, but can reduce file size effectively.</p>\n</blockquote>\n<p>This doesnâ€™t change the module semantics at all. Donâ€™t expect to solve problems with multiple module instance. They wonâ€™t be one instance after deduplication.</p>\n<p><code>Note: Donâ€™t use it in watch mode. Only for production builds.</code></p>\n<blockquote>\n<p>UglifyJsPlugin<br>Minimize all JavaScript output of chunks. Loaders are switched into minimizing mode.<br>You can pass an object containing <a href=\"https://github.com/mishoo/UglifyJS2#usage\" target=\"_blank\" rel=\"external\">UglifyJS options</a>{:target=â€_blockâ€}.</p>\n<p>AggressiveMergingPlugin<br>A plugin for a more aggressive chunk merging strategy. Even similar chunks are merged if the total size is reduced enough. As an option modules that are not common in these chunks can be moved up the chunk tree to the parents.</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://medium.com/@rajaraodv/two-quick-ways-to-reduce-react-apps-size-in-production-82226605771a#.qaey3854r\" target=\"_blank\" rel=\"external\">App</a>{:target=â€_blockâ€}</p>\n<p>If you are building a React + Redux App that has Webpack, then you might have noticed that the size of the final bundle.js (the dev version) for a simple app itself could be 1MB- 2MB!<br>For example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!</p>\n<p>For example: Below is a picture from Webpack stats analyzer for the simple react-redux-blog (live). It shows that total size is 1.5MB and 90% (1.2MB) is just libraries in node_modules!<br><img src=\"http://o7d3ayvg2.bkt.clouddn.com/react-redux-webpack-node_modules.png\" alt=\"\"></p>\n<p>It could be scaryğŸ˜± but Webpack and Node.js has all the tools you need to reduce the size.<br>I could reduce the size from 1.5MB to just 90KB by simply doing the following two things:</p>\n<p>1: Add the following Webpack plugins (source code)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">plugins: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.DefinePlugin(&#123; <span class=\"comment\">// &lt;-- key to reducing React's size</span></div><div class=\"line\">        <span class=\"comment\">// This can reduce react lib size and disable some dev feactures like props validation</span></div><div class=\"line\">        <span class=\"string\">'process.env'</span>: &#123;</div><div class=\"line\">            <span class=\"string\">'NODE_ENV'</span>: <span class=\"built_in\">JSON</span>.stringify(<span class=\"string\">'production'</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;),</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.DedupePlugin(), <span class=\"comment\">//dedupe similar code</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin(), <span class=\"comment\">//minify everything</span></div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.AggressiveMergingPlugin()<span class=\"comment\">//Merge chunks</span></div><div class=\"line\">  ],</div></pre></td></tr></table></figure>\n<blockquote>\n<p>DefinePlugin<br>The DefinePlugin allows you to create global constants which can be configured at compile time. This can be very useful for allowing different behaviour between development builds and release builds. For example, you might use a global constant to determine whether logging takes place; perhaps you perform logging in your development build but not in the release build. Thatâ€™s the sort of scenario the DefinePlugin facilitates.</p>\n<p>DedupePlugin<br>Search for equal or similar files and deduplicate them in the output. This comes with some overhead for the entry chunk, but can reduce file size effectively.</p>\n</blockquote>\n<p>This doesnâ€™t change the module semantics at all. Donâ€™t expect to solve problems with multiple module instance. They wonâ€™t be one instance after deduplication.</p>\n<p><code>Note: Donâ€™t use it in watch mode. Only for production builds.</code></p>\n<blockquote>\n<p>UglifyJsPlugin<br>Minimize all JavaScript output of chunks. Loaders are switched into minimizing mode.<br>You can pass an object containing <a href=\"https://github.com/mishoo/UglifyJS2#usage\" target=\"_blank\" rel=\"external\">UglifyJS options</a>{:target=â€_blockâ€}.</p>\n<p>AggressiveMergingPlugin<br>A plugin for a more aggressive chunk merging strategy. Even similar chunks are merged if the total size is reduced enough. As an option modules that are not common in these chunks can be moved up the chunk tree to the parents.</p>\n</blockquote>\n"},{"layout":"post","title":"React Server-Site Render","subtitle":"Github","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"webpack-bg.png","header-mask":0.3,"catalog":true,"_content":"\n### react-router\n\n`react-router` é€šè¿‡å£°æ˜å¼çš„æ–¹å¼åŒ¹é…ä¸åŒçš„è·¯ç”±å†³å®šåœ¨é¡µé¢ä¸Šå±•ç¤ºä¸åŒçš„ç»„ä»¶ã€‚\n","source":"_posts/2015-12-07-react-server-render.markdown","raw":"---\nlayout:     post\ntitle:      \"React Server-Site Render\"\nsubtitle:   \"Github\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"webpack-bg.png\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - React\n---\n\n### react-router\n\n`react-router` é€šè¿‡å£°æ˜å¼çš„æ–¹å¼åŒ¹é…ä¸åŒçš„è·¯ç”±å†³å®šåœ¨é¡µé¢ä¸Šå±•ç¤ºä¸åŒçš„ç»„ä»¶ã€‚\n","slug":"2015-12-07-react-server-render","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhvt0003mmt7fknsh0u3","content":"<h3 id=\"react-router\"><a href=\"#react-router\" class=\"headerlink\" title=\"react-router\"></a>react-router</h3><p><code>react-router</code> é€šè¿‡å£°æ˜å¼çš„æ–¹å¼åŒ¹é…ä¸åŒçš„è·¯ç”±å†³å®šåœ¨é¡µé¢ä¸Šå±•ç¤ºä¸åŒçš„ç»„ä»¶ã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"react-router\"><a href=\"#react-router\" class=\"headerlink\" title=\"react-router\"></a>react-router</h3><p><code>react-router</code> é€šè¿‡å£°æ˜å¼çš„æ–¹å¼åŒ¹é…ä¸åŒçš„è·¯ç”±å†³å®šåœ¨é¡µé¢ä¸Šå±•ç¤ºä¸åŒçš„ç»„ä»¶ã€‚</p>\n"},{"layout":"post","title":"Partial Scroll","subtitle":"Github","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"webpack-bg.png","header-mask":0.3,"catalog":true,"_content":"\n### å±€éƒ¨æ»šåˆ°\n\n```html\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n<html lang=\"en\">\n<head>\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\">\n\t<title>Document</title>\n</head>\n<style type=\"text/css\">\n\t.page {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\n\t\tbackground: #F0F8FF;\n\t}\n\n\t.header {\n\t    position: absolute;\n\t    top: 0;\n\t    right: 0;\n\t    left: 0;\n\t    background: #2A3BC6;\n\t    height: 140px;\n\t    z-index: 2;\n\t}\n\n\t.side {\n\t\tposition: absolute;\n\t\twidth: 200px;\n\t\ttop: 140px;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\toverflow: auto;\n\n\t\tbackground: #54E5AB;\n\t}\n\n\t.content {\n\t\tposition: absolute;\n\t\toverflow: auto;\n\t\ttop: 140px;\n\t\tleft: 200px;\n\t\tright: 0;\n\t\tbottom: 0;\n\t}\n\n</style>\n<body>\n\t<div class='page'>\n\t\t<div class='header'></div>\n\t\t<div class='side'></div>\n\t\t<div class='content'></div>\n\t</div>\n</body>\n</html>\n```\n","source":"_posts/2015-12-20-partial-scroll.markdown","raw":"---\nlayout:     post\ntitle:      \"Partial Scroll\"\nsubtitle:   \"Github\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"webpack-bg.png\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - HTML\n---\n\n### å±€éƒ¨æ»šåˆ°\n\n```html\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">\n<html lang=\"en\">\n<head>\n\t<meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\">\n\t<title>Document</title>\n</head>\n<style type=\"text/css\">\n\t.page {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tleft: 0;\n\n\t\tbackground: #F0F8FF;\n\t}\n\n\t.header {\n\t    position: absolute;\n\t    top: 0;\n\t    right: 0;\n\t    left: 0;\n\t    background: #2A3BC6;\n\t    height: 140px;\n\t    z-index: 2;\n\t}\n\n\t.side {\n\t\tposition: absolute;\n\t\twidth: 200px;\n\t\ttop: 140px;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\toverflow: auto;\n\n\t\tbackground: #54E5AB;\n\t}\n\n\t.content {\n\t\tposition: absolute;\n\t\toverflow: auto;\n\t\ttop: 140px;\n\t\tleft: 200px;\n\t\tright: 0;\n\t\tbottom: 0;\n\t}\n\n</style>\n<body>\n\t<div class='page'>\n\t\t<div class='header'></div>\n\t\t<div class='side'></div>\n\t\t<div class='content'></div>\n\t</div>\n</body>\n</html>\n```\n","slug":"2015-12-20-partial-scroll","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhw20006mmt7j5qi84y2","content":"<h3 id=\"å±€éƒ¨æ»šåˆ°\"><a href=\"#å±€éƒ¨æ»šåˆ°\" class=\"headerlink\" title=\"å±€éƒ¨æ»šåˆ°\"></a>å±€éƒ¨æ»šåˆ°</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html;charset=UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\">\t.page &#123;</div><div class=\"line\">\t\tposition: absolute;</div><div class=\"line\">\t\ttop: 0;</div><div class=\"line\">\t\tright: 0;</div><div class=\"line\">\t\tbottom: 0;</div><div class=\"line\">\t\tleft: 0;</div><div class=\"line\"></div><div class=\"line\">\t\tbackground: #F0F8FF;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t.header &#123;</div><div class=\"line\">\t    position: absolute;</div><div class=\"line\">\t    top: 0;</div><div class=\"line\">\t    right: 0;</div><div class=\"line\">\t    left: 0;</div><div class=\"line\">\t    background: #2A3BC6;</div><div class=\"line\">\t    height: 140px;</div><div class=\"line\">\t    z-index: 2;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t.side &#123;</div><div class=\"line\">\t\tposition: absolute;</div><div class=\"line\">\t\twidth: 200px;</div><div class=\"line\">\t\ttop: 140px;</div><div class=\"line\">\t\tbottom: 0;</div><div class=\"line\">\t\tleft: 0;</div><div class=\"line\">\t\toverflow: auto;</div><div class=\"line\"></div><div class=\"line\">\t\tbackground: #54E5AB;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t.content &#123;</div><div class=\"line\">\t\tposition: absolute;</div><div class=\"line\">\t\toverflow: auto;</div><div class=\"line\">\t\ttop: 140px;</div><div class=\"line\">\t\tleft: 200px;</div><div class=\"line\">\t\tright: 0;</div><div class=\"line\">\t\tbottom: 0;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'page'</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'header'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'side'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'content'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"å±€éƒ¨æ»šåˆ°\"><a href=\"#å±€éƒ¨æ»šåˆ°\" class=\"headerlink\" title=\"å±€éƒ¨æ»šåˆ°\"></a>å±€éƒ¨æ»šåˆ°</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html;charset=UTF-8\"</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/css\"</span>&gt;</span><span class=\"undefined\"></span></div><div class=\"line\">\t.page &#123;</div><div class=\"line\">\t\tposition: absolute;</div><div class=\"line\">\t\ttop: 0;</div><div class=\"line\">\t\tright: 0;</div><div class=\"line\">\t\tbottom: 0;</div><div class=\"line\">\t\tleft: 0;</div><div class=\"line\"></div><div class=\"line\">\t\tbackground: #F0F8FF;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t.header &#123;</div><div class=\"line\">\t    position: absolute;</div><div class=\"line\">\t    top: 0;</div><div class=\"line\">\t    right: 0;</div><div class=\"line\">\t    left: 0;</div><div class=\"line\">\t    background: #2A3BC6;</div><div class=\"line\">\t    height: 140px;</div><div class=\"line\">\t    z-index: 2;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t.side &#123;</div><div class=\"line\">\t\tposition: absolute;</div><div class=\"line\">\t\twidth: 200px;</div><div class=\"line\">\t\ttop: 140px;</div><div class=\"line\">\t\tbottom: 0;</div><div class=\"line\">\t\tleft: 0;</div><div class=\"line\">\t\toverflow: auto;</div><div class=\"line\"></div><div class=\"line\">\t\tbackground: #54E5AB;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t.content &#123;</div><div class=\"line\">\t\tposition: absolute;</div><div class=\"line\">\t\toverflow: auto;</div><div class=\"line\">\t\ttop: 140px;</div><div class=\"line\">\t\tleft: 200px;</div><div class=\"line\">\t\tright: 0;</div><div class=\"line\">\t\tbottom: 0;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'page'</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'header'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'side'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'content'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Flex å¸ƒå±€","subtitle":"å¼¹æ€§å¸ƒå±€","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"post-bg-e2e-ux.jpg","header-mask":0.3,"catalog":true,"_content":"\n# Flex å¸ƒå±€\n\nFlexæ˜¯Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸º\"å¼¹æ€§å¸ƒå±€\"ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚\nä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€.\n\n``` css\n.box {\n    display: flex;\n    display: -webkit-flex;\n}\n\n.box {\n    display: inline-flex;\n    display: -webkit-inline-flex;\n}\n```\n\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071004.png)\n\n> å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆ`main axis`ï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆ`cross axis`ï¼‰ã€‚\n> ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆ`ä¸è¾¹æ¡†çš„äº¤å‰ç‚¹`ï¼‰å«åš`main start`ï¼Œç»“æŸä½ç½®å«åšm`ain end`ï¼›\n> äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš`cross start`ï¼Œç»“æŸä½ç½®å«åš`cross end`ã€‚\n> é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš`main size`ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš`cross size`ã€‚\n\n# å®¹å™¨\n\n## flex-direction\n\né¡¹ç›®çš„æ’åˆ—æ–¹å‘\n\n``` css\n.box {\n  flex-direction: row | row-reverse | column | column-reverse;\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071005.png)\n\n* row å‚ç›´å‘ä¸Š (`default`)\n* row-reverse å‚ç›´å‘ä¸‹\n* column æ°´å¹³å‘å³\n* column-reverse æ°´å¹³å‘å·¦\n\n\n## flex-warp\nå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚\n\n```css\n.box{\n  flex-wrap: nowrap | wrap | wrap-reverse;\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071006.png)\n\n* nowrap ä¸æ¢è¡Œ (`default`)\n* wrap æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸Š\n* wrap-reverse æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸‹\n\n\n## flex-flow\n\nflex-direction + flex-wrap\n\n```css\n.box {\n  flex-flow: <flex-direction> || <flex-wrap>;\n}\n```\n\n\n## justify-content\n\né¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚\n\n```css\n.box {\n    justify-content: flex-start | flex-end | center | space-between | space-around\n}\n```\n\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071010.png)\n\n* felx-start å·¦å¯¹é½\n* flex-end å³å¯¹é½\n* center å±…ä¸­\n* space-between ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰\n* space-around é¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰\n\n## align-items\n\né¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½\n\n```css\n.box {\n    align-items: flex-start | flex-end | center | baseline | stretch\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071011.png)\n\nflex-start äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½\nflex-end äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½\ncenter äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½\nbaseline é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½\nstretch å¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ (`default`)\n\n## align-content\n\nå½“æœ‰å¤šè·Ÿè½´çº¿çš„æ—¶å€™é¡¹ç›®çš„å¯¹é½æ–¹å¼\n\n```css\n.box {\n    align-content: flex-start | flex-end | center | space-around | space-between | stretch\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071012.png)\n\n* flex-start ä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½\n* flex-end ä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½\n* center ä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½\n* space-between ä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒ\n* space-around æ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€\n* stretch è½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´(`defalut`)\n\n\n# é¡¹ç›®çš„å±æ€§\n\n## order\n\nå®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚\n\n```css\n.item {\n  order: <integer>;\n}\n```\n\n\n## flex-grow\n\nå®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å­˜åœ¨å‰©ä½™ç©ºé—´ä¹Ÿä¸æ”¾å¤§ã€‚\n\n```css\n.item {\n    flex-grow: <number>  // default 0\n}\n```\n\n\n## flex-shrink\n\nå®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚\n\n```css\n.item {\n    flex-shrink: <number> // default 1\n}\n```\n\n> å¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±æ€§ä¸º0ï¼Œå…¶\n> é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚\n> è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚\n\n\n## flex-basis\n\nå®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚\n\n```css\n.item {\n  flex-basis: <length> | auto; /* default auto */\n}\n```\n\n## flex\n\nflex: flex-grow flex-shrik fles-basis\nflex: auto (1 1 auto)\nflex: none (0 0 auto)\n\n## align-self\n\nå…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸åŒçš„å¯¹é½æ–¹å¼ã€‚ å¯è¦†ç›–align-itemã€‚\n\næ¥ä¸ªæ —å­:\n\n``` css\n    .container1 {\n        display: flex;\n        background-color: yellow;\n        width: 500px;\n        height: 500px;\n        flex-flow: row wrap;\n        justify-content: flex-start;\n        align-content: center;\n    }\n\n    .sub1 {\n        background-color: red;\n        margin: 10px;\n        width: 40px;\n        height: 40px;\n        flex-shrink: 0;\n        align-self: flex-end;\n    }\n\n    .sub2 {\n        background-color: green;\n        margin: 10px;\n        width: 40px;\n        height: 40px;\n        flex-shrink: 0;\n    }\n\n    .sub3 {\n        background-color: black;\n        margin: 10px;\n        width: 40px;\n        height: 40px;\n        flex-shrink: 0;\n    }\n```\n\n```html\n    <div class='container1'>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n    </div>\n```\n","source":"_posts/2016-05-19-flex-layout.markdown","raw":"---\nlayout:     post\ntitle:      \"Flex å¸ƒå±€\"\nsubtitle:   \"å¼¹æ€§å¸ƒå±€\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"post-bg-e2e-ux.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - CSS\n---\n\n# Flex å¸ƒå±€\n\nFlexæ˜¯Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸º\"å¼¹æ€§å¸ƒå±€\"ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚\nä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€.\n\n``` css\n.box {\n    display: flex;\n    display: -webkit-flex;\n}\n\n.box {\n    display: inline-flex;\n    display: -webkit-inline-flex;\n}\n```\n\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071004.png)\n\n> å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆ`main axis`ï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆ`cross axis`ï¼‰ã€‚\n> ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆ`ä¸è¾¹æ¡†çš„äº¤å‰ç‚¹`ï¼‰å«åš`main start`ï¼Œç»“æŸä½ç½®å«åšm`ain end`ï¼›\n> äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš`cross start`ï¼Œç»“æŸä½ç½®å«åš`cross end`ã€‚\n> é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš`main size`ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš`cross size`ã€‚\n\n# å®¹å™¨\n\n## flex-direction\n\né¡¹ç›®çš„æ’åˆ—æ–¹å‘\n\n``` css\n.box {\n  flex-direction: row | row-reverse | column | column-reverse;\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071005.png)\n\n* row å‚ç›´å‘ä¸Š (`default`)\n* row-reverse å‚ç›´å‘ä¸‹\n* column æ°´å¹³å‘å³\n* column-reverse æ°´å¹³å‘å·¦\n\n\n## flex-warp\nå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚\n\n```css\n.box{\n  flex-wrap: nowrap | wrap | wrap-reverse;\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071006.png)\n\n* nowrap ä¸æ¢è¡Œ (`default`)\n* wrap æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸Š\n* wrap-reverse æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸‹\n\n\n## flex-flow\n\nflex-direction + flex-wrap\n\n```css\n.box {\n  flex-flow: <flex-direction> || <flex-wrap>;\n}\n```\n\n\n## justify-content\n\né¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚\n\n```css\n.box {\n    justify-content: flex-start | flex-end | center | space-between | space-around\n}\n```\n\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071010.png)\n\n* felx-start å·¦å¯¹é½\n* flex-end å³å¯¹é½\n* center å±…ä¸­\n* space-between ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰\n* space-around é¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰\n\n## align-items\n\né¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½\n\n```css\n.box {\n    align-items: flex-start | flex-end | center | baseline | stretch\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071011.png)\n\nflex-start äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½\nflex-end äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½\ncenter äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½\nbaseline é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½\nstretch å¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ (`default`)\n\n## align-content\n\nå½“æœ‰å¤šè·Ÿè½´çº¿çš„æ—¶å€™é¡¹ç›®çš„å¯¹é½æ–¹å¼\n\n```css\n.box {\n    align-content: flex-start | flex-end | center | space-around | space-between | stretch\n}\n```\n\n![](http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071012.png)\n\n* flex-start ä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½\n* flex-end ä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½\n* center ä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½\n* space-between ä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒ\n* space-around æ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€\n* stretch è½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´(`defalut`)\n\n\n# é¡¹ç›®çš„å±æ€§\n\n## order\n\nå®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚\n\n```css\n.item {\n  order: <integer>;\n}\n```\n\n\n## flex-grow\n\nå®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å­˜åœ¨å‰©ä½™ç©ºé—´ä¹Ÿä¸æ”¾å¤§ã€‚\n\n```css\n.item {\n    flex-grow: <number>  // default 0\n}\n```\n\n\n## flex-shrink\n\nå®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚\n\n```css\n.item {\n    flex-shrink: <number> // default 1\n}\n```\n\n> å¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±æ€§ä¸º0ï¼Œå…¶\n> é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚\n> è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚\n\n\n## flex-basis\n\nå®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚\n\n```css\n.item {\n  flex-basis: <length> | auto; /* default auto */\n}\n```\n\n## flex\n\nflex: flex-grow flex-shrik fles-basis\nflex: auto (1 1 auto)\nflex: none (0 0 auto)\n\n## align-self\n\nå…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸åŒçš„å¯¹é½æ–¹å¼ã€‚ å¯è¦†ç›–align-itemã€‚\n\næ¥ä¸ªæ —å­:\n\n``` css\n    .container1 {\n        display: flex;\n        background-color: yellow;\n        width: 500px;\n        height: 500px;\n        flex-flow: row wrap;\n        justify-content: flex-start;\n        align-content: center;\n    }\n\n    .sub1 {\n        background-color: red;\n        margin: 10px;\n        width: 40px;\n        height: 40px;\n        flex-shrink: 0;\n        align-self: flex-end;\n    }\n\n    .sub2 {\n        background-color: green;\n        margin: 10px;\n        width: 40px;\n        height: 40px;\n        flex-shrink: 0;\n    }\n\n    .sub3 {\n        background-color: black;\n        margin: 10px;\n        width: 40px;\n        height: 40px;\n        flex-shrink: 0;\n    }\n```\n\n```html\n    <div class='container1'>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n        <div class='sub2'></div>\n        <div class='sub3'></div>\n        <div class='sub1'></div>\n    </div>\n```\n","slug":"2016-05-19-flex-layout","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhw90008mmt71iy4la9f","content":"<h1 id=\"Flex-å¸ƒå±€\"><a href=\"#Flex-å¸ƒå±€\" class=\"headerlink\" title=\"Flex å¸ƒå±€\"></a>Flex å¸ƒå±€</h1><p>Flexæ˜¯Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚<br>ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€.</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: flex;</div><div class=\"line\">    <span class=\"attribute\">display</span>: -webkit-flex;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: inline-flex;</div><div class=\"line\">    <span class=\"attribute\">display</span>: -webkit-inline-flex;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071004.png\" alt=\"\"></p>\n<blockquote>\n<p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆ<code>main axis</code>ï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆ<code>cross axis</code>ï¼‰ã€‚<br>ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆ<code>ä¸è¾¹æ¡†çš„äº¤å‰ç‚¹</code>ï¼‰å«åš<code>main start</code>ï¼Œç»“æŸä½ç½®å«åšm<code>ain end</code>ï¼›<br>äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš<code>cross start</code>ï¼Œç»“æŸä½ç½®å«åš<code>cross end</code>ã€‚<br>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš<code>main size</code>ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš<code>cross size</code>ã€‚</p>\n</blockquote>\n<h1 id=\"å®¹å™¨\"><a href=\"#å®¹å™¨\" class=\"headerlink\" title=\"å®¹å™¨\"></a>å®¹å™¨</h1><h2 id=\"flex-direction\"><a href=\"#flex-direction\" class=\"headerlink\" title=\"flex-direction\"></a>flex-direction</h2><p>é¡¹ç›®çš„æ’åˆ—æ–¹å‘</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex-direction</span>: row | row-reverse | column | column-reverse;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071005.png\" alt=\"\"></p>\n<ul>\n<li>row å‚ç›´å‘ä¸Š (<code>default</code>)</li>\n<li>row-reverse å‚ç›´å‘ä¸‹</li>\n<li>column æ°´å¹³å‘å³</li>\n<li>column-reverse æ°´å¹³å‘å·¦</li>\n</ul>\n<h2 id=\"flex-warp\"><a href=\"#flex-warp\" class=\"headerlink\" title=\"flex-warp\"></a>flex-warp</h2><p>å¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span>&#123;</div><div class=\"line\">  <span class=\"attribute\">flex-wrap</span>: nowrap | wrap | wrap-reverse;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071006.png\" alt=\"\"></p>\n<ul>\n<li>nowrap ä¸æ¢è¡Œ (<code>default</code>)</li>\n<li>wrap æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸Š</li>\n<li>wrap-reverse æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸‹</li>\n</ul>\n<h2 id=\"flex-flow\"><a href=\"#flex-flow\" class=\"headerlink\" title=\"flex-flow\"></a>flex-flow</h2><p>flex-direction + flex-wrap</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"justify-content\"><a href=\"#justify-content\" class=\"headerlink\" title=\"justify-content\"></a>justify-content</h2><p>é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">justify-content</span>: flex-start | flex-end | center | space-between | space-around</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071010.png\" alt=\"\"></p>\n<ul>\n<li>felx-start å·¦å¯¹é½</li>\n<li>flex-end å³å¯¹é½</li>\n<li>center å±…ä¸­</li>\n<li>space-between ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰</li>\n<li>space-around é¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰</li>\n</ul>\n<h2 id=\"align-items\"><a href=\"#align-items\" class=\"headerlink\" title=\"align-items\"></a>align-items</h2><p>é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">align-items</span>: flex-start | flex-end | center | baseline | stretch</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071011.png\" alt=\"\"></p>\n<p>flex-start äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½<br>flex-end äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½<br>center äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½<br>baseline é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½<br>stretch å¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ (<code>default</code>)</p>\n<h2 id=\"align-content\"><a href=\"#align-content\" class=\"headerlink\" title=\"align-content\"></a>align-content</h2><p>å½“æœ‰å¤šè·Ÿè½´çº¿çš„æ—¶å€™é¡¹ç›®çš„å¯¹é½æ–¹å¼</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">align-content</span>: flex-start | flex-end | center | space-around | space-between | stretch</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071012.png\" alt=\"\"></p>\n<ul>\n<li>flex-start ä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½</li>\n<li>flex-end ä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½</li>\n<li>center ä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½</li>\n<li>space-between ä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒ</li>\n<li>space-around æ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€</li>\n<li>stretch è½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´(<code>defalut</code>)</li>\n</ul>\n<h1 id=\"é¡¹ç›®çš„å±æ€§\"><a href=\"#é¡¹ç›®çš„å±æ€§\" class=\"headerlink\" title=\"é¡¹ç›®çš„å±æ€§\"></a>é¡¹ç›®çš„å±æ€§</h1><h2 id=\"order\"><a href=\"#order\" class=\"headerlink\" title=\"order\"></a>order</h2><p>å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">order</span>: &lt;integer&gt;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"flex-grow\"><a href=\"#flex-grow\" class=\"headerlink\" title=\"flex-grow\"></a>flex-grow</h2><p>å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å­˜åœ¨å‰©ä½™ç©ºé—´ä¹Ÿä¸æ”¾å¤§ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">flex-grow</span>: &lt;number&gt;  // default <span class=\"number\">0</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"flex-shrink\"><a href=\"#flex-shrink\" class=\"headerlink\" title=\"flex-shrink\"></a>flex-shrink</h2><p>å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: &lt;number&gt; // default <span class=\"number\">1</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±æ€§ä¸º0ï¼Œå…¶<br>é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚<br>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p>\n</blockquote>\n<h2 id=\"flex-basis\"><a href=\"#flex-basis\" class=\"headerlink\" title=\"flex-basis\"></a>flex-basis</h2><p>å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex-basis</span>: &lt;length&gt; | auto; <span class=\"comment\">/* default auto */</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"flex\"><a href=\"#flex\" class=\"headerlink\" title=\"flex\"></a>flex</h2><p>flex: flex-grow flex-shrik fles-basis<br>flex: auto (1 1 auto)<br>flex: none (0 0 auto)</p>\n<h2 id=\"align-self\"><a href=\"#align-self\" class=\"headerlink\" title=\"align-self\"></a>align-self</h2><p>å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸åŒçš„å¯¹é½æ–¹å¼ã€‚ å¯è¦†ç›–align-itemã€‚</p>\n<p>æ¥ä¸ªæ —å­:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.container1</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: flex;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: yellow;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-flow</span>: row wrap;</div><div class=\"line\">    <span class=\"attribute\">justify-content</span>: flex-start;</div><div class=\"line\">    <span class=\"attribute\">align-content</span>: center;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.sub1</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: red;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"attribute\">align-self</span>: flex-end;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.sub2</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: green;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.sub3</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: black;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'container1'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Flex-å¸ƒå±€\"><a href=\"#Flex-å¸ƒå±€\" class=\"headerlink\" title=\"Flex å¸ƒå±€\"></a>Flex å¸ƒå±€</h1><p>Flexæ˜¯Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚<br>ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€.</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: flex;</div><div class=\"line\">    <span class=\"attribute\">display</span>: -webkit-flex;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: inline-flex;</div><div class=\"line\">    <span class=\"attribute\">display</span>: -webkit-inline-flex;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071004.png\" alt=\"\"></p>\n<blockquote>\n<p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆ<code>main axis</code>ï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆ<code>cross axis</code>ï¼‰ã€‚<br>ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆ<code>ä¸è¾¹æ¡†çš„äº¤å‰ç‚¹</code>ï¼‰å«åš<code>main start</code>ï¼Œç»“æŸä½ç½®å«åšm<code>ain end</code>ï¼›<br>äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš<code>cross start</code>ï¼Œç»“æŸä½ç½®å«åš<code>cross end</code>ã€‚<br>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš<code>main size</code>ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš<code>cross size</code>ã€‚</p>\n</blockquote>\n<h1 id=\"å®¹å™¨\"><a href=\"#å®¹å™¨\" class=\"headerlink\" title=\"å®¹å™¨\"></a>å®¹å™¨</h1><h2 id=\"flex-direction\"><a href=\"#flex-direction\" class=\"headerlink\" title=\"flex-direction\"></a>flex-direction</h2><p>é¡¹ç›®çš„æ’åˆ—æ–¹å‘</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex-direction</span>: row | row-reverse | column | column-reverse;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071005.png\" alt=\"\"></p>\n<ul>\n<li>row å‚ç›´å‘ä¸Š (<code>default</code>)</li>\n<li>row-reverse å‚ç›´å‘ä¸‹</li>\n<li>column æ°´å¹³å‘å³</li>\n<li>column-reverse æ°´å¹³å‘å·¦</li>\n</ul>\n<h2 id=\"flex-warp\"><a href=\"#flex-warp\" class=\"headerlink\" title=\"flex-warp\"></a>flex-warp</h2><p>å¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span>&#123;</div><div class=\"line\">  <span class=\"attribute\">flex-wrap</span>: nowrap | wrap | wrap-reverse;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071006.png\" alt=\"\"></p>\n<ul>\n<li>nowrap ä¸æ¢è¡Œ (<code>default</code>)</li>\n<li>wrap æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸Š</li>\n<li>wrap-reverse æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸‹</li>\n</ul>\n<h2 id=\"flex-flow\"><a href=\"#flex-flow\" class=\"headerlink\" title=\"flex-flow\"></a>flex-flow</h2><p>flex-direction + flex-wrap</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"justify-content\"><a href=\"#justify-content\" class=\"headerlink\" title=\"justify-content\"></a>justify-content</h2><p>é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">justify-content</span>: flex-start | flex-end | center | space-between | space-around</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071010.png\" alt=\"\"></p>\n<ul>\n<li>felx-start å·¦å¯¹é½</li>\n<li>flex-end å³å¯¹é½</li>\n<li>center å±…ä¸­</li>\n<li>space-between ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰</li>\n<li>space-around é¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰</li>\n</ul>\n<h2 id=\"align-items\"><a href=\"#align-items\" class=\"headerlink\" title=\"align-items\"></a>align-items</h2><p>é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">align-items</span>: flex-start | flex-end | center | baseline | stretch</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071011.png\" alt=\"\"></p>\n<p>flex-start äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½<br>flex-end äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½<br>center äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½<br>baseline é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½<br>stretch å¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ (<code>default</code>)</p>\n<h2 id=\"align-content\"><a href=\"#align-content\" class=\"headerlink\" title=\"align-content\"></a>align-content</h2><p>å½“æœ‰å¤šè·Ÿè½´çº¿çš„æ—¶å€™é¡¹ç›®çš„å¯¹é½æ–¹å¼</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.box</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">align-content</span>: flex-start | flex-end | center | space-around | space-between | stretch</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><img src=\"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071012.png\" alt=\"\"></p>\n<ul>\n<li>flex-start ä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½</li>\n<li>flex-end ä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½</li>\n<li>center ä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½</li>\n<li>space-between ä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒ</li>\n<li>space-around æ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€</li>\n<li>stretch è½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´(<code>defalut</code>)</li>\n</ul>\n<h1 id=\"é¡¹ç›®çš„å±æ€§\"><a href=\"#é¡¹ç›®çš„å±æ€§\" class=\"headerlink\" title=\"é¡¹ç›®çš„å±æ€§\"></a>é¡¹ç›®çš„å±æ€§</h1><h2 id=\"order\"><a href=\"#order\" class=\"headerlink\" title=\"order\"></a>order</h2><p>å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">order</span>: &lt;integer&gt;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"flex-grow\"><a href=\"#flex-grow\" class=\"headerlink\" title=\"flex-grow\"></a>flex-grow</h2><p>å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å­˜åœ¨å‰©ä½™ç©ºé—´ä¹Ÿä¸æ”¾å¤§ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">flex-grow</span>: &lt;number&gt;  // default <span class=\"number\">0</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"flex-shrink\"><a href=\"#flex-shrink\" class=\"headerlink\" title=\"flex-shrink\"></a>flex-shrink</h2><p>å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: &lt;number&gt; // default <span class=\"number\">1</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±æ€§ä¸º0ï¼Œå…¶<br>é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚<br>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p>\n</blockquote>\n<h2 id=\"flex-basis\"><a href=\"#flex-basis\" class=\"headerlink\" title=\"flex-basis\"></a>flex-basis</h2><p>å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.item</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">flex-basis</span>: &lt;length&gt; | auto; <span class=\"comment\">/* default auto */</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"flex\"><a href=\"#flex\" class=\"headerlink\" title=\"flex\"></a>flex</h2><p>flex: flex-grow flex-shrik fles-basis<br>flex: auto (1 1 auto)<br>flex: none (0 0 auto)</p>\n<h2 id=\"align-self\"><a href=\"#align-self\" class=\"headerlink\" title=\"align-self\"></a>align-self</h2><p>å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸åŒçš„å¯¹é½æ–¹å¼ã€‚ å¯è¦†ç›–align-itemã€‚</p>\n<p>æ¥ä¸ªæ —å­:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-class\">.container1</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">display</span>: flex;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: yellow;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">500px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">500px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-flow</span>: row wrap;</div><div class=\"line\">    <span class=\"attribute\">justify-content</span>: flex-start;</div><div class=\"line\">    <span class=\"attribute\">align-content</span>: center;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.sub1</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: red;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"attribute\">align-self</span>: flex-end;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.sub2</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: green;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.sub3</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">background-color</span>: black;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">40px</span>;</div><div class=\"line\">    <span class=\"attribute\">flex-shrink</span>: <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'container1'</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub2'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub3'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">'sub1'</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬é•¿å¤§äº†","subtitle":"æ„ŸåŠ¨ä¸€ä»£äººçš„è®°å¿†","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"post-bg-wow.jpg","header-mask":0.3,"catalog":true,"_content":"\n### é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œã€€è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\n\n[![é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†](http://o7d3ayvg2.bkt.clouddn.com/post-wow-old-or-our-old-video.jpg)](http://o7d3ayvg2.bkt.clouddn.com/2626347-1.mp4 \"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†\"){:target=\"_blank\"}\n\n##ã€€æˆ‘çš„é­”å…½\n\n> 6æœˆ8å·æˆ‘ä»¬ç”µå½±é™¢è§ã€‚\n","source":"_posts/2016-05-19-wow-old-or-our-old.markdown","raw":"---\nlayout:     post\ntitle:      \"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬é•¿å¤§äº†\"\nsubtitle:   \"æ„ŸåŠ¨ä¸€ä»£äººçš„è®°å¿†\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"post-bg-wow.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - å›å¿†\n---\n\n### é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œã€€è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\n\n[![é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†](http://o7d3ayvg2.bkt.clouddn.com/post-wow-old-or-our-old-video.jpg)](http://o7d3ayvg2.bkt.clouddn.com/2626347-1.mp4 \"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†\"){:target=\"_blank\"}\n\n##ã€€æˆ‘çš„é­”å…½\n\n> 6æœˆ8å·æˆ‘ä»¬ç”µå½±é™¢è§ã€‚\n","slug":"2016-05-19-wow-old-or-our-old","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhwc000ammt7mxe1aa6t","content":"<h3 id=\"é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œ-è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\"><a href=\"#é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œ-è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\" class=\"headerlink\" title=\"é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œã€€è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\"></a>é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œã€€è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚</h3><p><a href=\"http://o7d3ayvg2.bkt.clouddn.com/2626347-1.mp4\" title=\"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†\" target=\"_blank\" rel=\"external\"><img src=\"http://o7d3ayvg2.bkt.clouddn.com/post-wow-old-or-our-old-video.jpg\" alt=\"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†\"></a>{:target=â€_blankâ€}</p>\n<p>##ã€€æˆ‘çš„é­”å…½</p>\n<blockquote>\n<p>6æœˆ8å·æˆ‘ä»¬ç”µå½±é™¢è§ã€‚</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œ-è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\"><a href=\"#é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œ-è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\" class=\"headerlink\" title=\"é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œã€€è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚\"></a>é¦–å…ˆæ˜¯ä¸€æ®µMVï¼Œã€€è®©æˆ‘ä»¬é‡æ¸©ä¸€ä¸‹é‚£ä¸ªå¹´ä»£ã€‚</h3><p><a href=\"http://o7d3ayvg2.bkt.clouddn.com/2626347-1.mp4\" title=\"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†\" target=\"_blank\" rel=\"external\"><img src=\"http://o7d3ayvg2.bkt.clouddn.com/post-wow-old-or-our-old-video.jpg\" alt=\"é­”å…½è€äº†è¿˜æ˜¯æˆ‘ä»¬å·²ç»é•¿å¤§äº†\"></a>{:target=â€_blankâ€}</p>\n<p>##ã€€æˆ‘çš„é­”å…½</p>\n<blockquote>\n<p>6æœˆ8å·æˆ‘ä»¬ç”µå½±é™¢è§ã€‚</p>\n</blockquote>\n"},{"layout":"post","title":"Gulp","subtitle":"Github","date":"2016-05-20T09:57:00.000Z","author":"Asher","header-img":"post-bg-gulp.jpg","header-mask":0.3,"catalog":true,"_content":"\n# Gulp\n\n> gulp æ˜¯åŸºäº Nodejs çš„è‡ªåŠ¨ä»»åŠ¡è¿è¡Œå™¨ï¼Œèƒ½è‡ªåŠ¨åŒ–åœ°å®Œæˆjavascript/coffee/sass/less/html/image/css\n> ç­‰æ–‡ä»¶çš„çš„æµ‹è¯•ã€æ£€æŸ¥ã€åˆå¹¶ã€å‹ç¼©ã€æ ¼å¼åŒ–ã€æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ã€éƒ¨ç½²æ–‡ä»¶ç”Ÿæˆï¼Œå¹¶ç›‘å¬æ–‡ä»¶åœ¨æ”¹åŠ¨åé‡å¤æŒ‡å®šçš„è¿™äº›\n> æ­¥éª¤ã€‚åœ¨å®ç°ä¸Šï¼Œ gulp\n> å€Ÿé‰´äº†Unixæ“ä½œç³»ç»Ÿçš„ç®¡é“ï¼ˆpipeï¼‰æ€æƒ³ï¼Œå‰ä¸€çº§çš„è¾“å‡ºï¼Œç›´æ¥å˜æˆåä¸€çº§çš„è¾“å…¥ï¼Œä½¿å¾—åœ¨æ“ä½œä¸Šéå¸¸ç®€å•.\n\n![](http://o7d3ayvg2.bkt.clouddn.com/gulp-detail.jpg)\n\n# æ¨èä½¿ç”¨nvm\n\n[NVM](https://github.com/creationix/nvm){:target=\"_block\"}\n\n```javascript\nnpm install gulp --global --save-dev\n```\n\n# Gulpfile.js\n\n```javascript\nvar gulp = require('gulp');\n\ngulp.task('default', () => {\n    gulp.src()\n        .pipe()\n        .pipe()\n        ...\n})\n\n```\n\n## gulp.src(globs[, options])\n\n> Emits files matching provided glob or an array of globs.\n> Returns a [stream](http://nodejs.org/api/stream.html){:target=\"_block\"} of\n> [Vinyl](https://github.com/gulpjs/vinyl-fs){:target=\"_block\"} files that can be\n> [piped](https://nodejs.org/api/stream.html#stream_readable_pipe_destination_options){:target=\"_block\"} to plugins.\n\n> è¯»å–å•ä¸ªæˆ–ä¸€ç»„æ–‡ä»¶ï¼Œã€€è¿”å›ä¸€ä¸ªå¯ä»¥è¢«æ¥å…¥å…¶ä»–æ’ä»¶çš„æ–‡ä»¶æµã€‚\n\n### options {}\n\n* options.buffer boolean/true\nfalseçš„æ—¶å€™ã€€è¿”å›ä¸å¸¦ç¼“å†²çš„æ–‡ä»¶æµ\n\n* options.read boolean/true\n\nè¿”å›nullã€€ä¸è¯»å–æ–‡ä»¶\n\n* options.base string everyting before glob starts [gulp2base](https://github.com/contra/glob2base)\n\n\n## gulp.dest(path[, options])\n\nå¯æ‰©å±•ï¼Œå…·æœ‰å†™å…¥åŠŸèƒ½ã€‚ã€€åå‘è¾“å‡ºæ–‡ä»¶å¯å¤šä¸ªï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨åˆ›å»ºã€‚\n\n```javascript\ngulp.src('./client/templates/*.jade')\n  .pipe(jade())\n  .pipe(gulp.dest('./build/templates'))\n  .pipe(minify())\n  .pipe(gulp.dest('./build/minified_templates'));\n```\n\n\n* path è¾“å‡ºåœ°å€\n\n### options {}\n\n* options.cwd process.cwd()ï¼šå‰è„šæœ¬çš„å·¥ä½œç›®å½•çš„è·¯å¾„ å½“æ–‡ä»¶è¾“å‡ºè·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„å°†ä¼šç”¨åˆ°\n* options.mode 0777 æŒ‡å®šè¢«åˆ›å»ºæ–‡ä»¶å¤¹çš„æƒé™\n\n\n## gulp.task(name[, deps], fn)\n\nåˆ›å»ºgulpä»»åŠ¡\n\n* name string ä»»åŠ¡å\n* deps stringArray ä»»åŠ¡ä¾èµ–ï¼Œè¢«ä¾èµ–çš„ä»»åŠ¡ä¼šè¿”å›å½“å‰ä»»åŠ¡çš„äº‹ä»¶æµæ‰€ä»¥ä¼šå…ˆæ‰§è¡Œã€‚\n* fn fun å½“å‰ä»»åŠ¡çš„å†…å®¹\n\n\n## gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])\n\nç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå½“æ–‡ä»¶å˜åŒ–æ—¶æ‰§è¡Œtasks\n\n* glob éœ€è¦å¤„ç†çš„æ–‡ä»¶\n* opts [gaze](https://github.com/shama/gaze)\n* tasks array æ–‡ä»¶å˜åŒ–æ—¶è¦è·‘çš„ä»»åŠ¡\n* cbã€€callback function\n\n```javascript\ngulp.watch('js/**/*.js', function(event) {\n  console.log('File ' + event.path + ' was ' + event.type + ', running tasks...');\n});\n```\n\n* event.type added, changed, deleted or renamed.\n* event.path è§¦å‘æ—¶é—´çš„æ–‡ä»¶çš„è·¯å¾„(The path to the file that triggered the event.)\n\n# Gulp plugin\n\n[æ…¢æ…¢æ•´ç†](http://www.open-open.com/lib/view/open1426232157888.html)\n\n## HTML&CSS\n\n* [autoprefixer](https://github.com/postcss/autoprefixer) - parse CSS and add vendor prefixes to rules by Can I Use.\n\n\n[H1](http://yaowenjie.github.io/front-end/using-gulp-with-babel)\n[H2](https://www.talkingcoder.com/article/6367591948982623481)\n","source":"_posts/2016-05-20-gulp.markdown","raw":"---\nlayout:     post\ntitle:      \"Gulp\"\nsubtitle:   \"Github\"\ndate:       2016-05-20 17:57:00\nauthor:     \"Asher\"\nheader-img: \"post-bg-gulp.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - å‰ç«¯å·¥å…·\n---\n\n# Gulp\n\n> gulp æ˜¯åŸºäº Nodejs çš„è‡ªåŠ¨ä»»åŠ¡è¿è¡Œå™¨ï¼Œèƒ½è‡ªåŠ¨åŒ–åœ°å®Œæˆjavascript/coffee/sass/less/html/image/css\n> ç­‰æ–‡ä»¶çš„çš„æµ‹è¯•ã€æ£€æŸ¥ã€åˆå¹¶ã€å‹ç¼©ã€æ ¼å¼åŒ–ã€æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ã€éƒ¨ç½²æ–‡ä»¶ç”Ÿæˆï¼Œå¹¶ç›‘å¬æ–‡ä»¶åœ¨æ”¹åŠ¨åé‡å¤æŒ‡å®šçš„è¿™äº›\n> æ­¥éª¤ã€‚åœ¨å®ç°ä¸Šï¼Œ gulp\n> å€Ÿé‰´äº†Unixæ“ä½œç³»ç»Ÿçš„ç®¡é“ï¼ˆpipeï¼‰æ€æƒ³ï¼Œå‰ä¸€çº§çš„è¾“å‡ºï¼Œç›´æ¥å˜æˆåä¸€çº§çš„è¾“å…¥ï¼Œä½¿å¾—åœ¨æ“ä½œä¸Šéå¸¸ç®€å•.\n\n![](http://o7d3ayvg2.bkt.clouddn.com/gulp-detail.jpg)\n\n# æ¨èä½¿ç”¨nvm\n\n[NVM](https://github.com/creationix/nvm){:target=\"_block\"}\n\n```javascript\nnpm install gulp --global --save-dev\n```\n\n# Gulpfile.js\n\n```javascript\nvar gulp = require('gulp');\n\ngulp.task('default', () => {\n    gulp.src()\n        .pipe()\n        .pipe()\n        ...\n})\n\n```\n\n## gulp.src(globs[, options])\n\n> Emits files matching provided glob or an array of globs.\n> Returns a [stream](http://nodejs.org/api/stream.html){:target=\"_block\"} of\n> [Vinyl](https://github.com/gulpjs/vinyl-fs){:target=\"_block\"} files that can be\n> [piped](https://nodejs.org/api/stream.html#stream_readable_pipe_destination_options){:target=\"_block\"} to plugins.\n\n> è¯»å–å•ä¸ªæˆ–ä¸€ç»„æ–‡ä»¶ï¼Œã€€è¿”å›ä¸€ä¸ªå¯ä»¥è¢«æ¥å…¥å…¶ä»–æ’ä»¶çš„æ–‡ä»¶æµã€‚\n\n### options {}\n\n* options.buffer boolean/true\nfalseçš„æ—¶å€™ã€€è¿”å›ä¸å¸¦ç¼“å†²çš„æ–‡ä»¶æµ\n\n* options.read boolean/true\n\nè¿”å›nullã€€ä¸è¯»å–æ–‡ä»¶\n\n* options.base string everyting before glob starts [gulp2base](https://github.com/contra/glob2base)\n\n\n## gulp.dest(path[, options])\n\nå¯æ‰©å±•ï¼Œå…·æœ‰å†™å…¥åŠŸèƒ½ã€‚ã€€åå‘è¾“å‡ºæ–‡ä»¶å¯å¤šä¸ªï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨åˆ›å»ºã€‚\n\n```javascript\ngulp.src('./client/templates/*.jade')\n  .pipe(jade())\n  .pipe(gulp.dest('./build/templates'))\n  .pipe(minify())\n  .pipe(gulp.dest('./build/minified_templates'));\n```\n\n\n* path è¾“å‡ºåœ°å€\n\n### options {}\n\n* options.cwd process.cwd()ï¼šå‰è„šæœ¬çš„å·¥ä½œç›®å½•çš„è·¯å¾„ å½“æ–‡ä»¶è¾“å‡ºè·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„å°†ä¼šç”¨åˆ°\n* options.mode 0777 æŒ‡å®šè¢«åˆ›å»ºæ–‡ä»¶å¤¹çš„æƒé™\n\n\n## gulp.task(name[, deps], fn)\n\nåˆ›å»ºgulpä»»åŠ¡\n\n* name string ä»»åŠ¡å\n* deps stringArray ä»»åŠ¡ä¾èµ–ï¼Œè¢«ä¾èµ–çš„ä»»åŠ¡ä¼šè¿”å›å½“å‰ä»»åŠ¡çš„äº‹ä»¶æµæ‰€ä»¥ä¼šå…ˆæ‰§è¡Œã€‚\n* fn fun å½“å‰ä»»åŠ¡çš„å†…å®¹\n\n\n## gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])\n\nç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå½“æ–‡ä»¶å˜åŒ–æ—¶æ‰§è¡Œtasks\n\n* glob éœ€è¦å¤„ç†çš„æ–‡ä»¶\n* opts [gaze](https://github.com/shama/gaze)\n* tasks array æ–‡ä»¶å˜åŒ–æ—¶è¦è·‘çš„ä»»åŠ¡\n* cbã€€callback function\n\n```javascript\ngulp.watch('js/**/*.js', function(event) {\n  console.log('File ' + event.path + ' was ' + event.type + ', running tasks...');\n});\n```\n\n* event.type added, changed, deleted or renamed.\n* event.path è§¦å‘æ—¶é—´çš„æ–‡ä»¶çš„è·¯å¾„(The path to the file that triggered the event.)\n\n# Gulp plugin\n\n[æ…¢æ…¢æ•´ç†](http://www.open-open.com/lib/view/open1426232157888.html)\n\n## HTML&CSS\n\n* [autoprefixer](https://github.com/postcss/autoprefixer) - parse CSS and add vendor prefixes to rules by Can I Use.\n\n\n[H1](http://yaowenjie.github.io/front-end/using-gulp-with-babel)\n[H2](https://www.talkingcoder.com/article/6367591948982623481)\n","slug":"2016-05-20-gulp","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhwe000dmmt7u237xe3r","content":"<h1 id=\"Gulp\"><a href=\"#Gulp\" class=\"headerlink\" title=\"Gulp\"></a>Gulp</h1><blockquote>\n<p>gulp æ˜¯åŸºäº Nodejs çš„è‡ªåŠ¨ä»»åŠ¡è¿è¡Œå™¨ï¼Œèƒ½è‡ªåŠ¨åŒ–åœ°å®Œæˆjavascript/coffee/sass/less/html/image/css<br>ç­‰æ–‡ä»¶çš„çš„æµ‹è¯•ã€æ£€æŸ¥ã€åˆå¹¶ã€å‹ç¼©ã€æ ¼å¼åŒ–ã€æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ã€éƒ¨ç½²æ–‡ä»¶ç”Ÿæˆï¼Œå¹¶ç›‘å¬æ–‡ä»¶åœ¨æ”¹åŠ¨åé‡å¤æŒ‡å®šçš„è¿™äº›<br>æ­¥éª¤ã€‚åœ¨å®ç°ä¸Šï¼Œ gulp<br>å€Ÿé‰´äº†Unixæ“ä½œç³»ç»Ÿçš„ç®¡é“ï¼ˆpipeï¼‰æ€æƒ³ï¼Œå‰ä¸€çº§çš„è¾“å‡ºï¼Œç›´æ¥å˜æˆåä¸€çº§çš„è¾“å…¥ï¼Œä½¿å¾—åœ¨æ“ä½œä¸Šéå¸¸ç®€å•.</p>\n</blockquote>\n<p><img src=\"http://o7d3ayvg2.bkt.clouddn.com/gulp-detail.jpg\" alt=\"\"></p>\n<h1 id=\"æ¨èä½¿ç”¨nvm\"><a href=\"#æ¨èä½¿ç”¨nvm\" class=\"headerlink\" title=\"æ¨èä½¿ç”¨nvm\"></a>æ¨èä½¿ç”¨nvm</h1><p><a href=\"https://github.com/creationix/nvm\" target=\"_blank\" rel=\"external\">NVM</a>{:target=â€_blockâ€}</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install gulp --global --save-dev</div></pre></td></tr></table></figure>\n<h1 id=\"Gulpfile-js\"><a href=\"#Gulpfile-js\" class=\"headerlink\" title=\"Gulpfile.js\"></a>Gulpfile.js</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp'</span>);</div><div class=\"line\"></div><div class=\"line\">gulp.task(<span class=\"string\">'default'</span>, () =&gt; &#123;</div><div class=\"line\">    gulp.src()</div><div class=\"line\">        .pipe()</div><div class=\"line\">        .pipe()</div><div class=\"line\">        ...</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h2 id=\"gulp-src-globs-options\"><a href=\"#gulp-src-globs-options\" class=\"headerlink\" title=\"gulp.src(globs[, options])\"></a>gulp.src(globs[, options])</h2><blockquote>\n<p>Emits files matching provided glob or an array of globs.<br>Returns a <a href=\"http://nodejs.org/api/stream.html\" target=\"_blank\" rel=\"external\">stream</a>{:target=â€_blockâ€} of<br><a href=\"https://github.com/gulpjs/vinyl-fs\" target=\"_blank\" rel=\"external\">Vinyl</a>{:target=â€_blockâ€} files that can be<br><a href=\"https://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\" target=\"_blank\" rel=\"external\">piped</a>{:target=â€_blockâ€} to plugins.</p>\n<p>è¯»å–å•ä¸ªæˆ–ä¸€ç»„æ–‡ä»¶ï¼Œã€€è¿”å›ä¸€ä¸ªå¯ä»¥è¢«æ¥å…¥å…¶ä»–æ’ä»¶çš„æ–‡ä»¶æµã€‚</p>\n</blockquote>\n<h3 id=\"options\"><a href=\"#options\" class=\"headerlink\" title=\"options {}\"></a>options {}</h3><ul>\n<li><p>options.buffer boolean/true<br>falseçš„æ—¶å€™ã€€è¿”å›ä¸å¸¦ç¼“å†²çš„æ–‡ä»¶æµ</p>\n</li>\n<li><p>options.read boolean/true</p>\n</li>\n</ul>\n<p>è¿”å›nullã€€ä¸è¯»å–æ–‡ä»¶</p>\n<ul>\n<li>options.base string everyting before glob starts <a href=\"https://github.com/contra/glob2base\" target=\"_blank\" rel=\"external\">gulp2base</a></li>\n</ul>\n<h2 id=\"gulp-dest-path-options\"><a href=\"#gulp-dest-path-options\" class=\"headerlink\" title=\"gulp.dest(path[, options])\"></a>gulp.dest(path[, options])</h2><p>å¯æ‰©å±•ï¼Œå…·æœ‰å†™å…¥åŠŸèƒ½ã€‚ã€€åå‘è¾“å‡ºæ–‡ä»¶å¯å¤šä¸ªï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨åˆ›å»ºã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.src(<span class=\"string\">'./client/templates/*.jade'</span>)</div><div class=\"line\">  .pipe(jade())</div><div class=\"line\">  .pipe(gulp.dest(<span class=\"string\">'./build/templates'</span>))</div><div class=\"line\">  .pipe(minify())</div><div class=\"line\">  .pipe(gulp.dest(<span class=\"string\">'./build/minified_templates'</span>));</div></pre></td></tr></table></figure>\n<ul>\n<li>path è¾“å‡ºåœ°å€</li>\n</ul>\n<h3 id=\"options-1\"><a href=\"#options-1\" class=\"headerlink\" title=\"options {}\"></a>options {}</h3><ul>\n<li>options.cwd process.cwd()ï¼šå‰è„šæœ¬çš„å·¥ä½œç›®å½•çš„è·¯å¾„ å½“æ–‡ä»¶è¾“å‡ºè·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„å°†ä¼šç”¨åˆ°</li>\n<li>options.mode 0777 æŒ‡å®šè¢«åˆ›å»ºæ–‡ä»¶å¤¹çš„æƒé™</li>\n</ul>\n<h2 id=\"gulp-task-name-deps-fn\"><a href=\"#gulp-task-name-deps-fn\" class=\"headerlink\" title=\"gulp.task(name[, deps], fn)\"></a>gulp.task(name[, deps], fn)</h2><p>åˆ›å»ºgulpä»»åŠ¡</p>\n<ul>\n<li>name string ä»»åŠ¡å</li>\n<li>deps stringArray ä»»åŠ¡ä¾èµ–ï¼Œè¢«ä¾èµ–çš„ä»»åŠ¡ä¼šè¿”å›å½“å‰ä»»åŠ¡çš„äº‹ä»¶æµæ‰€ä»¥ä¼šå…ˆæ‰§è¡Œã€‚</li>\n<li>fn fun å½“å‰ä»»åŠ¡çš„å†…å®¹</li>\n</ul>\n<h2 id=\"gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb\"><a href=\"#gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb\" class=\"headerlink\" title=\"gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])\"></a>gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])</h2><p>ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå½“æ–‡ä»¶å˜åŒ–æ—¶æ‰§è¡Œtasks</p>\n<ul>\n<li>glob éœ€è¦å¤„ç†çš„æ–‡ä»¶</li>\n<li>opts <a href=\"https://github.com/shama/gaze\" target=\"_blank\" rel=\"external\">gaze</a></li>\n<li>tasks array æ–‡ä»¶å˜åŒ–æ—¶è¦è·‘çš„ä»»åŠ¡</li>\n<li>cbã€€callback function</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.watch(<span class=\"string\">'js/**/*.js'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'File '</span> + event.path + <span class=\"string\">' was '</span> + event.type + <span class=\"string\">', running tasks...'</span>);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<ul>\n<li>event.type added, changed, deleted or renamed.</li>\n<li>event.path è§¦å‘æ—¶é—´çš„æ–‡ä»¶çš„è·¯å¾„(The path to the file that triggered the event.)</li>\n</ul>\n<h1 id=\"Gulp-plugin\"><a href=\"#Gulp-plugin\" class=\"headerlink\" title=\"Gulp plugin\"></a>Gulp plugin</h1><p><a href=\"http://www.open-open.com/lib/view/open1426232157888.html\" target=\"_blank\" rel=\"external\">æ…¢æ…¢æ•´ç†</a></p>\n<h2 id=\"HTML-amp-CSS\"><a href=\"#HTML-amp-CSS\" class=\"headerlink\" title=\"HTML&amp;CSS\"></a>HTML&amp;CSS</h2><ul>\n<li><a href=\"https://github.com/postcss/autoprefixer\" target=\"_blank\" rel=\"external\">autoprefixer</a> - parse CSS and add vendor prefixes to rules by Can I Use.</li>\n</ul>\n<p><a href=\"http://yaowenjie.github.io/front-end/using-gulp-with-babel\" target=\"_blank\" rel=\"external\">H1</a><br><a href=\"https://www.talkingcoder.com/article/6367591948982623481\" target=\"_blank\" rel=\"external\">H2</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Gulp\"><a href=\"#Gulp\" class=\"headerlink\" title=\"Gulp\"></a>Gulp</h1><blockquote>\n<p>gulp æ˜¯åŸºäº Nodejs çš„è‡ªåŠ¨ä»»åŠ¡è¿è¡Œå™¨ï¼Œèƒ½è‡ªåŠ¨åŒ–åœ°å®Œæˆjavascript/coffee/sass/less/html/image/css<br>ç­‰æ–‡ä»¶çš„çš„æµ‹è¯•ã€æ£€æŸ¥ã€åˆå¹¶ã€å‹ç¼©ã€æ ¼å¼åŒ–ã€æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ã€éƒ¨ç½²æ–‡ä»¶ç”Ÿæˆï¼Œå¹¶ç›‘å¬æ–‡ä»¶åœ¨æ”¹åŠ¨åé‡å¤æŒ‡å®šçš„è¿™äº›<br>æ­¥éª¤ã€‚åœ¨å®ç°ä¸Šï¼Œ gulp<br>å€Ÿé‰´äº†Unixæ“ä½œç³»ç»Ÿçš„ç®¡é“ï¼ˆpipeï¼‰æ€æƒ³ï¼Œå‰ä¸€çº§çš„è¾“å‡ºï¼Œç›´æ¥å˜æˆåä¸€çº§çš„è¾“å…¥ï¼Œä½¿å¾—åœ¨æ“ä½œä¸Šéå¸¸ç®€å•.</p>\n</blockquote>\n<p><img src=\"http://o7d3ayvg2.bkt.clouddn.com/gulp-detail.jpg\" alt=\"\"></p>\n<h1 id=\"æ¨èä½¿ç”¨nvm\"><a href=\"#æ¨èä½¿ç”¨nvm\" class=\"headerlink\" title=\"æ¨èä½¿ç”¨nvm\"></a>æ¨èä½¿ç”¨nvm</h1><p><a href=\"https://github.com/creationix/nvm\" target=\"_blank\" rel=\"external\">NVM</a>{:target=â€_blockâ€}</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">npm install gulp --global --save-dev</div></pre></td></tr></table></figure>\n<h1 id=\"Gulpfile-js\"><a href=\"#Gulpfile-js\" class=\"headerlink\" title=\"Gulpfile.js\"></a>Gulpfile.js</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> gulp = <span class=\"built_in\">require</span>(<span class=\"string\">'gulp'</span>);</div><div class=\"line\"></div><div class=\"line\">gulp.task(<span class=\"string\">'default'</span>, () =&gt; &#123;</div><div class=\"line\">    gulp.src()</div><div class=\"line\">        .pipe()</div><div class=\"line\">        .pipe()</div><div class=\"line\">        ...</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h2 id=\"gulp-src-globs-options\"><a href=\"#gulp-src-globs-options\" class=\"headerlink\" title=\"gulp.src(globs[, options])\"></a>gulp.src(globs[, options])</h2><blockquote>\n<p>Emits files matching provided glob or an array of globs.<br>Returns a <a href=\"http://nodejs.org/api/stream.html\" target=\"_blank\" rel=\"external\">stream</a>{:target=â€_blockâ€} of<br><a href=\"https://github.com/gulpjs/vinyl-fs\" target=\"_blank\" rel=\"external\">Vinyl</a>{:target=â€_blockâ€} files that can be<br><a href=\"https://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\" target=\"_blank\" rel=\"external\">piped</a>{:target=â€_blockâ€} to plugins.</p>\n<p>è¯»å–å•ä¸ªæˆ–ä¸€ç»„æ–‡ä»¶ï¼Œã€€è¿”å›ä¸€ä¸ªå¯ä»¥è¢«æ¥å…¥å…¶ä»–æ’ä»¶çš„æ–‡ä»¶æµã€‚</p>\n</blockquote>\n<h3 id=\"options\"><a href=\"#options\" class=\"headerlink\" title=\"options {}\"></a>options {}</h3><ul>\n<li><p>options.buffer boolean/true<br>falseçš„æ—¶å€™ã€€è¿”å›ä¸å¸¦ç¼“å†²çš„æ–‡ä»¶æµ</p>\n</li>\n<li><p>options.read boolean/true</p>\n</li>\n</ul>\n<p>è¿”å›nullã€€ä¸è¯»å–æ–‡ä»¶</p>\n<ul>\n<li>options.base string everyting before glob starts <a href=\"https://github.com/contra/glob2base\" target=\"_blank\" rel=\"external\">gulp2base</a></li>\n</ul>\n<h2 id=\"gulp-dest-path-options\"><a href=\"#gulp-dest-path-options\" class=\"headerlink\" title=\"gulp.dest(path[, options])\"></a>gulp.dest(path[, options])</h2><p>å¯æ‰©å±•ï¼Œå…·æœ‰å†™å…¥åŠŸèƒ½ã€‚ã€€åå‘è¾“å‡ºæ–‡ä»¶å¯å¤šä¸ªï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨åˆ›å»ºã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.src(<span class=\"string\">'./client/templates/*.jade'</span>)</div><div class=\"line\">  .pipe(jade())</div><div class=\"line\">  .pipe(gulp.dest(<span class=\"string\">'./build/templates'</span>))</div><div class=\"line\">  .pipe(minify())</div><div class=\"line\">  .pipe(gulp.dest(<span class=\"string\">'./build/minified_templates'</span>));</div></pre></td></tr></table></figure>\n<ul>\n<li>path è¾“å‡ºåœ°å€</li>\n</ul>\n<h3 id=\"options-1\"><a href=\"#options-1\" class=\"headerlink\" title=\"options {}\"></a>options {}</h3><ul>\n<li>options.cwd process.cwd()ï¼šå‰è„šæœ¬çš„å·¥ä½œç›®å½•çš„è·¯å¾„ å½“æ–‡ä»¶è¾“å‡ºè·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„å°†ä¼šç”¨åˆ°</li>\n<li>options.mode 0777 æŒ‡å®šè¢«åˆ›å»ºæ–‡ä»¶å¤¹çš„æƒé™</li>\n</ul>\n<h2 id=\"gulp-task-name-deps-fn\"><a href=\"#gulp-task-name-deps-fn\" class=\"headerlink\" title=\"gulp.task(name[, deps], fn)\"></a>gulp.task(name[, deps], fn)</h2><p>åˆ›å»ºgulpä»»åŠ¡</p>\n<ul>\n<li>name string ä»»åŠ¡å</li>\n<li>deps stringArray ä»»åŠ¡ä¾èµ–ï¼Œè¢«ä¾èµ–çš„ä»»åŠ¡ä¼šè¿”å›å½“å‰ä»»åŠ¡çš„äº‹ä»¶æµæ‰€ä»¥ä¼šå…ˆæ‰§è¡Œã€‚</li>\n<li>fn fun å½“å‰ä»»åŠ¡çš„å†…å®¹</li>\n</ul>\n<h2 id=\"gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb\"><a href=\"#gulp-watch-glob-opts-tasks-or-gulp-watch-glob-opts-cb\" class=\"headerlink\" title=\"gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])\"></a>gulp.watch(glob [, opts], tasks) or gulp.watch(glob [, opts, cb])</h2><p>ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œå½“æ–‡ä»¶å˜åŒ–æ—¶æ‰§è¡Œtasks</p>\n<ul>\n<li>glob éœ€è¦å¤„ç†çš„æ–‡ä»¶</li>\n<li>opts <a href=\"https://github.com/shama/gaze\" target=\"_blank\" rel=\"external\">gaze</a></li>\n<li>tasks array æ–‡ä»¶å˜åŒ–æ—¶è¦è·‘çš„ä»»åŠ¡</li>\n<li>cbã€€callback function</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">gulp.watch(<span class=\"string\">'js/**/*.js'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'File '</span> + event.path + <span class=\"string\">' was '</span> + event.type + <span class=\"string\">', running tasks...'</span>);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<ul>\n<li>event.type added, changed, deleted or renamed.</li>\n<li>event.path è§¦å‘æ—¶é—´çš„æ–‡ä»¶çš„è·¯å¾„(The path to the file that triggered the event.)</li>\n</ul>\n<h1 id=\"Gulp-plugin\"><a href=\"#Gulp-plugin\" class=\"headerlink\" title=\"Gulp plugin\"></a>Gulp plugin</h1><p><a href=\"http://www.open-open.com/lib/view/open1426232157888.html\" target=\"_blank\" rel=\"external\">æ…¢æ…¢æ•´ç†</a></p>\n<h2 id=\"HTML-amp-CSS\"><a href=\"#HTML-amp-CSS\" class=\"headerlink\" title=\"HTML&amp;CSS\"></a>HTML&amp;CSS</h2><ul>\n<li><a href=\"https://github.com/postcss/autoprefixer\" target=\"_blank\" rel=\"external\">autoprefixer</a> - parse CSS and add vendor prefixes to rules by Can I Use.</li>\n</ul>\n<p><a href=\"http://yaowenjie.github.io/front-end/using-gulp-with-babel\" target=\"_blank\" rel=\"external\">H1</a><br><a href=\"https://www.talkingcoder.com/article/6367591948982623481\" target=\"_blank\" rel=\"external\">H2</a></p>\n"},{"layout":"post","title":"å‰ç«¯Githubæ”¶é›†","subtitle":"Github","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"http://yaowenjie.github.io/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/using-browser-sync-to-test-in-many-plantforms-synchronously\n\n[æ…¢æ…¢æ•´ç†](https://segmentfault.com/a/1190000003510001?utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare)\n\n# HTML/CSS\n\n* [html5-boilerplate](https://github.com/h5bp/html5-boilerplate){:target=\"_blank\"}\n* [html5demos](https://github.com/remy/html5demos){:target=\"_blank\"}\n* [webé¡¹ç›®å¯èˆªåŒ…](https://github.com/google/web-starter-kit){:target=\"_blank\"}\n* [CSSæœ¯è¯­è¡¨](https://github.com/yisibl/css-vocabulary){:target=\"_blank\"}\n* [Respondï¼ˆMedia Query polyfillï¼‰](https://github.com/scottjehl/Respond){:target=\"_blank\"}\n* [Modernizr](https://github.com/Modernizr/Modernizr){:target=\"_blank\"}\n* [normalize.css](https://github.com/necolas/normalize.css){:target=\"_blank\"}\n* [bootstrap](https://github.com/twbs/bootstrap){:target=\"_blank\"}\n* [Semantic-UI](https://github.com/Semantic-Org/Semantic-UI){:target=\"_blank\"}\n* [amazeui](https://github.com/amazeui/amazeui){:target=\"_blank\"}\n* [masonry æ …æ ¼å¸ƒå±€åº“](https://github.com/desandro/masonry){:target=\"_blank\"}\n* [lost æ …æ ¼å¸ƒå±€åº“](https://github.com/peterramsing/lost){:target=\"_blank\"}\n* [bootmetro](https://github.com/aozora/bootmetro){:target=\"_blank\"}\n* [CSSæ¨¡æ‹Ÿå„ç§è®¾å¤‡](https://github.com/marvelapp/devices.css){:target=\"_blank\"}\n* [CSS spinners](https://github.com/jlong/css-spinners){:target=\"_blank\"}\n* [css-loaders](https://github.com/lukehaas/css-loaders){:target=\"_blank\"}\n* [animate.css](https://github.com/daneden/animate.css){:target=\"_blank\"}\n* [velocity](https://github.com/julianshapiro/velocity){:target=\"_blank\"}\n* [dashboardï¼ˆBootstrapæ¨¡æ¿ï¼‰](https://github.com/keen/dashboards){:target=\"_blank\"}\n* [é›ªç¢§å›¾ç”Ÿæˆå·¥å…·](https://github.com/sprity/sprity){:target=\"_blank\"}\n* [svg-sprite-polyfill](https://github.com/frexy/svg-sprite-polyfill){:target=\"_blank\"}\n* [Snap.svg](https://github.com/adobe-webplatform/Snap.svg){:target=\"_blank\"}\n* [SVGå›¾æ ‡é›†](https://github.com/frexy/glyph-iconset){:target=\"_blank\"}\n* [çº¯csså›¾æ ‡](https://github.com/saeedalipoor/icono){:target=\"_blank\"}\n* [Font-Awesome](https://github.com/FortAwesome/Font-Awesome){:target=\"_blank\"}\n* [material-design-icons](https://github.com/google/material-design-icons){:target=\"_blank\"}\n* [Material Design Lite](https://github.com/google/material-design-lite){:target=\"_blank\"}\n* [Materialé£æ ¼cssæ¡†æ¶](https://github.com/Dogfalo/materialize){:target=\"_blank\"}\n* [fullPage.js](https://github.com/alvarotrigo/fullPage.js){:target=\"_blank\"}\n* [FullpageåŸç”Ÿå®ç°](https://github.com/powy1993/fullpage){:target=\"_blank\"}\n* [bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker){:target=\"_blank\"}\n* [bootstrap-additions](https://github.com/mgcrea/bootstrap-additions){:target=\"_blank\"}\n* [pjax](https://github.com/welefen/pjax){:target=\"_blank\"}\n* [Aceï¼ˆCloud9çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰](https://github.com/ajaxorg/ace){:target=\"_blank\"}\n* [quill æ–‡æœ¬ç¼–è¾‘å™¨](https://github.com/quilljs/quill){:target=\"_blank\"}\n* [plupload](https://github.com/moxiecode/plupload){:target=\"_blank\"}\n* [postcss](https://github.com/postcss/postcss){:target=\"_blank\"}\n* [three.js](https://github.com/mrdoob/three.js){:target=\"_blank\"}\n* [stage.js](https://github.com/shakiba/stage.js){:target=\"_blank\"}\n* [html2canvas](https://github.com/niklasvh/html2canvas){:target=\"_blank\"}\n* [nprogress](http://ricostacruz.com/nprogress/){:target=\"_blank\"}\n\n# Shim/Polyfill\n\n* [ES5 shim](https://github.com/es-shims/es5-shim){:target=\"_blank\"}\n* [es6-shim](https://github.com/paulmillr/es6-shim){:target=\"_blank\"}\n* [html5shiv](https://github.com/aFarkas/html5shiv){:target=\"_blank\"}\n* [core-js](https://github.com/zloirock/core-js){:target=\"_blank\"}\n\n\n# å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\n\n* [moment](https://github.com/moment/moment){:target=\"_blank\"}\n* [lodash](https://github.com/lodash/lodash){:target=\"_blank\"}\n* [highland æµå¼é£æ ¼å·¥å…·åº“](https://github.com/caolan/highland){:target=\"_blank\"}\n* [handlebars.js](https://github.com/wycats/handlebars.js){:target=\"_blank\"}\n* [FileAPI](https://github.com/mailru/FileAPI){:target=\"_blank\"}\n* [CryptoJSåŠ å¯†åº“](https://github.com/sytelus/CryptoJS){:target=\"_blank\"}\n* [Esprimaï¼ˆECMAScriptè¯­æ³•è§£æï¼‰](https://github.com/jquery/esprima){:target=\"_blank\"}\n* [jison è¯­æ³•è§£æå™¨ç”Ÿæˆå™¨](https://github.com/zaach/jison){:target=\"_blank\"}\n* [bowser åˆ¤æ–­æµè§ˆå™¨](https://github.com/ded/bowser){:target=\"_blank\"}\n* [reqwestï¼ˆAjaxå®ç°ï¼‰](https://github.com/ded/reqwest){:target=\"_blank\"}\n* [superagent](https://github.com/visionmedia/superagent){:target=\"_blank\"}\n* [es6-promise](https://github.com/stefanpenner/es6-promise){:target=\"_blank\"}\n* [core-jsï¼ˆå„ç§js pollyfillé›†åˆï¼‰](https://github.com/zloirock/core-js){:target=\"_blank\"}\n* [svgo SVGä¼˜åŒ–å·¥å…·](https://github.com/svg/svgo){:target=\"_blank\"}\n* [stateman å‰ç«¯è·¯ç”±](https://github.com/leeluolee/stateman){:target=\"_blank\"}\n* [dragdealer](https://github.com/skidding/dragdealer){:target=\"_blank\"}\n* [pdf.js](https://github.com/mozilla/pdf.js){:target=\"_blank\"}\n* [filesize.js](https://github.com/avoidwork/filesize.js){:target=\"_blank\"}\n* [berserkJS](https://github.com/tapir-dream/berserkJS){:target=\"_blank\"}\n* [umd](https://github.com/umdjs/umd){:target=\"_blank\"}\n* [requirejs](https://github.com/requirejs/requirejs){:target=\"_blank\"}\n\n\n# ä»£ç å¤„ç†å·¥å…·\n\n* [babel](https://github.com/babel/babel){:target=\"_blank\"}\n* [traceur-compiler](https://github.com/google/traceur-compiler){:target=\"_blank\"}\n* [webpack](https://github.com/webpack/webpack){:target=\"_blank\"}\n* [node-browserify](https://github.com/substack/node-browserify){:target=\"_blank\"}\n* [amdclean](https://github.com/gfranko/amdclean){:target=\"_blank\"}\n* [gulp](https://github.com/gulpjs/gulp){:target=\"_blank\"}\n* [grunt](https://github.com/gruntjs/grunt){:target=\"_blank\"}\n* [jspm](http://jspm.io/){:target=\"_blank\"}\n* [rollup.js](http://rollupjs.org/){:target=\"_blank\"}\n\n\n# ç§»åŠ¨ç«¯\n\n* [Swipe](https://github.com/thebird/Swipe){:target=\"_blank\"}\n* [mobileTech ç§»åŠ¨ç«¯èµ„æºæ”¶é›†](https://github.com/jtyjty99999/mobileTech){:target=\"_blank\"}\n\n\n# æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\n\n* [chai](https://github.com/chaijs/chai){:target=\"_blank\"}\n* [jasmine](https://github.com/jasmine/jasmine){:target=\"_blank\"}\n\n\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n\n","source":"_posts/2016-05-20-frontend.markdown","raw":"---\nlayout:     post\ntitle:      \"å‰ç«¯Githubæ”¶é›†\"\nsubtitle:   \"Github\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Github\n---\nhttp://yaowenjie.github.io/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/using-browser-sync-to-test-in-many-plantforms-synchronously\n\n[æ…¢æ…¢æ•´ç†](https://segmentfault.com/a/1190000003510001?utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare)\n\n# HTML/CSS\n\n* [html5-boilerplate](https://github.com/h5bp/html5-boilerplate){:target=\"_blank\"}\n* [html5demos](https://github.com/remy/html5demos){:target=\"_blank\"}\n* [webé¡¹ç›®å¯èˆªåŒ…](https://github.com/google/web-starter-kit){:target=\"_blank\"}\n* [CSSæœ¯è¯­è¡¨](https://github.com/yisibl/css-vocabulary){:target=\"_blank\"}\n* [Respondï¼ˆMedia Query polyfillï¼‰](https://github.com/scottjehl/Respond){:target=\"_blank\"}\n* [Modernizr](https://github.com/Modernizr/Modernizr){:target=\"_blank\"}\n* [normalize.css](https://github.com/necolas/normalize.css){:target=\"_blank\"}\n* [bootstrap](https://github.com/twbs/bootstrap){:target=\"_blank\"}\n* [Semantic-UI](https://github.com/Semantic-Org/Semantic-UI){:target=\"_blank\"}\n* [amazeui](https://github.com/amazeui/amazeui){:target=\"_blank\"}\n* [masonry æ …æ ¼å¸ƒå±€åº“](https://github.com/desandro/masonry){:target=\"_blank\"}\n* [lost æ …æ ¼å¸ƒå±€åº“](https://github.com/peterramsing/lost){:target=\"_blank\"}\n* [bootmetro](https://github.com/aozora/bootmetro){:target=\"_blank\"}\n* [CSSæ¨¡æ‹Ÿå„ç§è®¾å¤‡](https://github.com/marvelapp/devices.css){:target=\"_blank\"}\n* [CSS spinners](https://github.com/jlong/css-spinners){:target=\"_blank\"}\n* [css-loaders](https://github.com/lukehaas/css-loaders){:target=\"_blank\"}\n* [animate.css](https://github.com/daneden/animate.css){:target=\"_blank\"}\n* [velocity](https://github.com/julianshapiro/velocity){:target=\"_blank\"}\n* [dashboardï¼ˆBootstrapæ¨¡æ¿ï¼‰](https://github.com/keen/dashboards){:target=\"_blank\"}\n* [é›ªç¢§å›¾ç”Ÿæˆå·¥å…·](https://github.com/sprity/sprity){:target=\"_blank\"}\n* [svg-sprite-polyfill](https://github.com/frexy/svg-sprite-polyfill){:target=\"_blank\"}\n* [Snap.svg](https://github.com/adobe-webplatform/Snap.svg){:target=\"_blank\"}\n* [SVGå›¾æ ‡é›†](https://github.com/frexy/glyph-iconset){:target=\"_blank\"}\n* [çº¯csså›¾æ ‡](https://github.com/saeedalipoor/icono){:target=\"_blank\"}\n* [Font-Awesome](https://github.com/FortAwesome/Font-Awesome){:target=\"_blank\"}\n* [material-design-icons](https://github.com/google/material-design-icons){:target=\"_blank\"}\n* [Material Design Lite](https://github.com/google/material-design-lite){:target=\"_blank\"}\n* [Materialé£æ ¼cssæ¡†æ¶](https://github.com/Dogfalo/materialize){:target=\"_blank\"}\n* [fullPage.js](https://github.com/alvarotrigo/fullPage.js){:target=\"_blank\"}\n* [FullpageåŸç”Ÿå®ç°](https://github.com/powy1993/fullpage){:target=\"_blank\"}\n* [bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker){:target=\"_blank\"}\n* [bootstrap-additions](https://github.com/mgcrea/bootstrap-additions){:target=\"_blank\"}\n* [pjax](https://github.com/welefen/pjax){:target=\"_blank\"}\n* [Aceï¼ˆCloud9çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰](https://github.com/ajaxorg/ace){:target=\"_blank\"}\n* [quill æ–‡æœ¬ç¼–è¾‘å™¨](https://github.com/quilljs/quill){:target=\"_blank\"}\n* [plupload](https://github.com/moxiecode/plupload){:target=\"_blank\"}\n* [postcss](https://github.com/postcss/postcss){:target=\"_blank\"}\n* [three.js](https://github.com/mrdoob/three.js){:target=\"_blank\"}\n* [stage.js](https://github.com/shakiba/stage.js){:target=\"_blank\"}\n* [html2canvas](https://github.com/niklasvh/html2canvas){:target=\"_blank\"}\n* [nprogress](http://ricostacruz.com/nprogress/){:target=\"_blank\"}\n\n# Shim/Polyfill\n\n* [ES5 shim](https://github.com/es-shims/es5-shim){:target=\"_blank\"}\n* [es6-shim](https://github.com/paulmillr/es6-shim){:target=\"_blank\"}\n* [html5shiv](https://github.com/aFarkas/html5shiv){:target=\"_blank\"}\n* [core-js](https://github.com/zloirock/core-js){:target=\"_blank\"}\n\n\n# å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\n\n* [moment](https://github.com/moment/moment){:target=\"_blank\"}\n* [lodash](https://github.com/lodash/lodash){:target=\"_blank\"}\n* [highland æµå¼é£æ ¼å·¥å…·åº“](https://github.com/caolan/highland){:target=\"_blank\"}\n* [handlebars.js](https://github.com/wycats/handlebars.js){:target=\"_blank\"}\n* [FileAPI](https://github.com/mailru/FileAPI){:target=\"_blank\"}\n* [CryptoJSåŠ å¯†åº“](https://github.com/sytelus/CryptoJS){:target=\"_blank\"}\n* [Esprimaï¼ˆECMAScriptè¯­æ³•è§£æï¼‰](https://github.com/jquery/esprima){:target=\"_blank\"}\n* [jison è¯­æ³•è§£æå™¨ç”Ÿæˆå™¨](https://github.com/zaach/jison){:target=\"_blank\"}\n* [bowser åˆ¤æ–­æµè§ˆå™¨](https://github.com/ded/bowser){:target=\"_blank\"}\n* [reqwestï¼ˆAjaxå®ç°ï¼‰](https://github.com/ded/reqwest){:target=\"_blank\"}\n* [superagent](https://github.com/visionmedia/superagent){:target=\"_blank\"}\n* [es6-promise](https://github.com/stefanpenner/es6-promise){:target=\"_blank\"}\n* [core-jsï¼ˆå„ç§js pollyfillé›†åˆï¼‰](https://github.com/zloirock/core-js){:target=\"_blank\"}\n* [svgo SVGä¼˜åŒ–å·¥å…·](https://github.com/svg/svgo){:target=\"_blank\"}\n* [stateman å‰ç«¯è·¯ç”±](https://github.com/leeluolee/stateman){:target=\"_blank\"}\n* [dragdealer](https://github.com/skidding/dragdealer){:target=\"_blank\"}\n* [pdf.js](https://github.com/mozilla/pdf.js){:target=\"_blank\"}\n* [filesize.js](https://github.com/avoidwork/filesize.js){:target=\"_blank\"}\n* [berserkJS](https://github.com/tapir-dream/berserkJS){:target=\"_blank\"}\n* [umd](https://github.com/umdjs/umd){:target=\"_blank\"}\n* [requirejs](https://github.com/requirejs/requirejs){:target=\"_blank\"}\n\n\n# ä»£ç å¤„ç†å·¥å…·\n\n* [babel](https://github.com/babel/babel){:target=\"_blank\"}\n* [traceur-compiler](https://github.com/google/traceur-compiler){:target=\"_blank\"}\n* [webpack](https://github.com/webpack/webpack){:target=\"_blank\"}\n* [node-browserify](https://github.com/substack/node-browserify){:target=\"_blank\"}\n* [amdclean](https://github.com/gfranko/amdclean){:target=\"_blank\"}\n* [gulp](https://github.com/gulpjs/gulp){:target=\"_blank\"}\n* [grunt](https://github.com/gruntjs/grunt){:target=\"_blank\"}\n* [jspm](http://jspm.io/){:target=\"_blank\"}\n* [rollup.js](http://rollupjs.org/){:target=\"_blank\"}\n\n\n# ç§»åŠ¨ç«¯\n\n* [Swipe](https://github.com/thebird/Swipe){:target=\"_blank\"}\n* [mobileTech ç§»åŠ¨ç«¯èµ„æºæ”¶é›†](https://github.com/jtyjty99999/mobileTech){:target=\"_blank\"}\n\n\n# æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\n\n* [chai](https://github.com/chaijs/chai){:target=\"_blank\"}\n* [jasmine](https://github.com/jasmine/jasmine){:target=\"_blank\"}\n\n\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n* []()\n\n","slug":"2016-05-20-frontend","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhwg000emmt75gymutue","content":"<p><a href=\"http://yaowenjie.github.io/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/using-browser-sync-to-test-in-many-plantforms-synchronously\" target=\"_blank\" rel=\"external\">http://yaowenjie.github.io/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/using-browser-sync-to-test-in-many-plantforms-synchronously</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000003510001?utm_source=Weibo&amp;utm_medium=shareLink&amp;utm_campaign=socialShare\" target=\"_blank\" rel=\"external\">æ…¢æ…¢æ•´ç†</a></p>\n<h1 id=\"HTML-CSS\"><a href=\"#HTML-CSS\" class=\"headerlink\" title=\"HTML/CSS\"></a>HTML/CSS</h1><ul>\n<li><a href=\"https://github.com/h5bp/html5-boilerplate\" target=\"_blank\" rel=\"external\">html5-boilerplate</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/remy/html5demos\" target=\"_blank\" rel=\"external\">html5demos</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/web-starter-kit\" target=\"_blank\" rel=\"external\">webé¡¹ç›®å¯èˆªåŒ…</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/yisibl/css-vocabulary\" target=\"_blank\" rel=\"external\">CSSæœ¯è¯­è¡¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/scottjehl/Respond\" target=\"_blank\" rel=\"external\">Respondï¼ˆMedia Query polyfillï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/Modernizr/Modernizr\" target=\"_blank\" rel=\"external\">Modernizr</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/necolas/normalize.css\" target=\"_blank\" rel=\"external\">normalize.css</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/twbs/bootstrap\" target=\"_blank\" rel=\"external\">bootstrap</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/Semantic-Org/Semantic-UI\" target=\"_blank\" rel=\"external\">Semantic-UI</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/amazeui/amazeui\" target=\"_blank\" rel=\"external\">amazeui</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/desandro/masonry\" target=\"_blank\" rel=\"external\">masonry æ …æ ¼å¸ƒå±€åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/peterramsing/lost\" target=\"_blank\" rel=\"external\">lost æ …æ ¼å¸ƒå±€åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/aozora/bootmetro\" target=\"_blank\" rel=\"external\">bootmetro</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/marvelapp/devices.css\" target=\"_blank\" rel=\"external\">CSSæ¨¡æ‹Ÿå„ç§è®¾å¤‡</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jlong/css-spinners\" target=\"_blank\" rel=\"external\">CSS spinners</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/lukehaas/css-loaders\" target=\"_blank\" rel=\"external\">css-loaders</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/daneden/animate.css\" target=\"_blank\" rel=\"external\">animate.css</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/julianshapiro/velocity\" target=\"_blank\" rel=\"external\">velocity</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/keen/dashboards\" target=\"_blank\" rel=\"external\">dashboardï¼ˆBootstrapæ¨¡æ¿ï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/sprity/sprity\" target=\"_blank\" rel=\"external\">é›ªç¢§å›¾ç”Ÿæˆå·¥å…·</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/frexy/svg-sprite-polyfill\" target=\"_blank\" rel=\"external\">svg-sprite-polyfill</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/adobe-webplatform/Snap.svg\" target=\"_blank\" rel=\"external\">Snap.svg</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/frexy/glyph-iconset\" target=\"_blank\" rel=\"external\">SVGå›¾æ ‡é›†</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/saeedalipoor/icono\" target=\"_blank\" rel=\"external\">çº¯csså›¾æ ‡</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/FortAwesome/Font-Awesome\" target=\"_blank\" rel=\"external\">Font-Awesome</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/material-design-icons\" target=\"_blank\" rel=\"external\">material-design-icons</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/material-design-lite\" target=\"_blank\" rel=\"external\">Material Design Lite</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/Dogfalo/materialize\" target=\"_blank\" rel=\"external\">Materialé£æ ¼cssæ¡†æ¶</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/alvarotrigo/fullPage.js\" target=\"_blank\" rel=\"external\">fullPage.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/powy1993/fullpage\" target=\"_blank\" rel=\"external\">FullpageåŸç”Ÿå®ç°</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/dangrossman/bootstrap-daterangepicker\" target=\"_blank\" rel=\"external\">bootstrap-daterangepicker</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mgcrea/bootstrap-additions\" target=\"_blank\" rel=\"external\">bootstrap-additions</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/welefen/pjax\" target=\"_blank\" rel=\"external\">pjax</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/ajaxorg/ace\" target=\"_blank\" rel=\"external\">Aceï¼ˆCloud9çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/quilljs/quill\" target=\"_blank\" rel=\"external\">quill æ–‡æœ¬ç¼–è¾‘å™¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/moxiecode/plupload\" target=\"_blank\" rel=\"external\">plupload</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/postcss/postcss\" target=\"_blank\" rel=\"external\">postcss</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mrdoob/three.js\" target=\"_blank\" rel=\"external\">three.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/shakiba/stage.js\" target=\"_blank\" rel=\"external\">stage.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/niklasvh/html2canvas\" target=\"_blank\" rel=\"external\">html2canvas</a>{:target=â€_blankâ€}</li>\n<li><a href=\"http://ricostacruz.com/nprogress/\" target=\"_blank\" rel=\"external\">nprogress</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"Shim-Polyfill\"><a href=\"#Shim-Polyfill\" class=\"headerlink\" title=\"Shim/Polyfill\"></a>Shim/Polyfill</h1><ul>\n<li><a href=\"https://github.com/es-shims/es5-shim\" target=\"_blank\" rel=\"external\">ES5 shim</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/paulmillr/es6-shim\" target=\"_blank\" rel=\"external\">es6-shim</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/aFarkas/html5shiv\" target=\"_blank\" rel=\"external\">html5shiv</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/zloirock/core-js\" target=\"_blank\" rel=\"external\">core-js</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\"><a href=\"#å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\" class=\"headerlink\" title=\"å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\"></a>å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“</h1><ul>\n<li><a href=\"https://github.com/moment/moment\" target=\"_blank\" rel=\"external\">moment</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/lodash/lodash\" target=\"_blank\" rel=\"external\">lodash</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/caolan/highland\" target=\"_blank\" rel=\"external\">highland æµå¼é£æ ¼å·¥å…·åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/wycats/handlebars.js\" target=\"_blank\" rel=\"external\">handlebars.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mailru/FileAPI\" target=\"_blank\" rel=\"external\">FileAPI</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/sytelus/CryptoJS\" target=\"_blank\" rel=\"external\">CryptoJSåŠ å¯†åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jquery/esprima\" target=\"_blank\" rel=\"external\">Esprimaï¼ˆECMAScriptè¯­æ³•è§£æï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/zaach/jison\" target=\"_blank\" rel=\"external\">jison è¯­æ³•è§£æå™¨ç”Ÿæˆå™¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/ded/bowser\" target=\"_blank\" rel=\"external\">bowser åˆ¤æ–­æµè§ˆå™¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/ded/reqwest\" target=\"_blank\" rel=\"external\">reqwestï¼ˆAjaxå®ç°ï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/visionmedia/superagent\" target=\"_blank\" rel=\"external\">superagent</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/stefanpenner/es6-promise\" target=\"_blank\" rel=\"external\">es6-promise</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/zloirock/core-js\" target=\"_blank\" rel=\"external\">core-jsï¼ˆå„ç§js pollyfillé›†åˆï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/svg/svgo\" target=\"_blank\" rel=\"external\">svgo SVGä¼˜åŒ–å·¥å…·</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/leeluolee/stateman\" target=\"_blank\" rel=\"external\">stateman å‰ç«¯è·¯ç”±</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/skidding/dragdealer\" target=\"_blank\" rel=\"external\">dragdealer</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mozilla/pdf.js\" target=\"_blank\" rel=\"external\">pdf.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/avoidwork/filesize.js\" target=\"_blank\" rel=\"external\">filesize.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/tapir-dream/berserkJS\" target=\"_blank\" rel=\"external\">berserkJS</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/umdjs/umd\" target=\"_blank\" rel=\"external\">umd</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/requirejs/requirejs\" target=\"_blank\" rel=\"external\">requirejs</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"ä»£ç å¤„ç†å·¥å…·\"><a href=\"#ä»£ç å¤„ç†å·¥å…·\" class=\"headerlink\" title=\"ä»£ç å¤„ç†å·¥å…·\"></a>ä»£ç å¤„ç†å·¥å…·</h1><ul>\n<li><a href=\"https://github.com/babel/babel\" target=\"_blank\" rel=\"external\">babel</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/traceur-compiler\" target=\"_blank\" rel=\"external\">traceur-compiler</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/webpack/webpack\" target=\"_blank\" rel=\"external\">webpack</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/substack/node-browserify\" target=\"_blank\" rel=\"external\">node-browserify</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/gfranko/amdclean\" target=\"_blank\" rel=\"external\">amdclean</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/gulpjs/gulp\" target=\"_blank\" rel=\"external\">gulp</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/gruntjs/grunt\" target=\"_blank\" rel=\"external\">grunt</a>{:target=â€_blankâ€}</li>\n<li><a href=\"http://jspm.io/\" target=\"_blank\" rel=\"external\">jspm</a>{:target=â€_blankâ€}</li>\n<li><a href=\"http://rollupjs.org/\" target=\"_blank\" rel=\"external\">rollup.js</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"ç§»åŠ¨ç«¯\"><a href=\"#ç§»åŠ¨ç«¯\" class=\"headerlink\" title=\"ç§»åŠ¨ç«¯\"></a>ç§»åŠ¨ç«¯</h1><ul>\n<li><a href=\"https://github.com/thebird/Swipe\" target=\"_blank\" rel=\"external\">Swipe</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jtyjty99999/mobileTech\" target=\"_blank\" rel=\"external\">mobileTech ç§»åŠ¨ç«¯èµ„æºæ”¶é›†</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\"><a href=\"#æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\" class=\"headerlink\" title=\"æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\"></a>æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“</h1><ul>\n<li><a href=\"https://github.com/chaijs/chai\" target=\"_blank\" rel=\"external\">chai</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jasmine/jasmine\" target=\"_blank\" rel=\"external\">jasmine</a>{:target=â€_blankâ€}</li>\n</ul>\n<ul>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://yaowenjie.github.io/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/using-browser-sync-to-test-in-many-plantforms-synchronously\" target=\"_blank\" rel=\"external\">http://yaowenjie.github.io/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/using-browser-sync-to-test-in-many-plantforms-synchronously</a></p>\n<p><a href=\"https://segmentfault.com/a/1190000003510001?utm_source=Weibo&amp;utm_medium=shareLink&amp;utm_campaign=socialShare\" target=\"_blank\" rel=\"external\">æ…¢æ…¢æ•´ç†</a></p>\n<h1 id=\"HTML-CSS\"><a href=\"#HTML-CSS\" class=\"headerlink\" title=\"HTML/CSS\"></a>HTML/CSS</h1><ul>\n<li><a href=\"https://github.com/h5bp/html5-boilerplate\" target=\"_blank\" rel=\"external\">html5-boilerplate</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/remy/html5demos\" target=\"_blank\" rel=\"external\">html5demos</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/web-starter-kit\" target=\"_blank\" rel=\"external\">webé¡¹ç›®å¯èˆªåŒ…</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/yisibl/css-vocabulary\" target=\"_blank\" rel=\"external\">CSSæœ¯è¯­è¡¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/scottjehl/Respond\" target=\"_blank\" rel=\"external\">Respondï¼ˆMedia Query polyfillï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/Modernizr/Modernizr\" target=\"_blank\" rel=\"external\">Modernizr</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/necolas/normalize.css\" target=\"_blank\" rel=\"external\">normalize.css</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/twbs/bootstrap\" target=\"_blank\" rel=\"external\">bootstrap</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/Semantic-Org/Semantic-UI\" target=\"_blank\" rel=\"external\">Semantic-UI</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/amazeui/amazeui\" target=\"_blank\" rel=\"external\">amazeui</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/desandro/masonry\" target=\"_blank\" rel=\"external\">masonry æ …æ ¼å¸ƒå±€åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/peterramsing/lost\" target=\"_blank\" rel=\"external\">lost æ …æ ¼å¸ƒå±€åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/aozora/bootmetro\" target=\"_blank\" rel=\"external\">bootmetro</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/marvelapp/devices.css\" target=\"_blank\" rel=\"external\">CSSæ¨¡æ‹Ÿå„ç§è®¾å¤‡</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jlong/css-spinners\" target=\"_blank\" rel=\"external\">CSS spinners</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/lukehaas/css-loaders\" target=\"_blank\" rel=\"external\">css-loaders</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/daneden/animate.css\" target=\"_blank\" rel=\"external\">animate.css</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/julianshapiro/velocity\" target=\"_blank\" rel=\"external\">velocity</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/keen/dashboards\" target=\"_blank\" rel=\"external\">dashboardï¼ˆBootstrapæ¨¡æ¿ï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/sprity/sprity\" target=\"_blank\" rel=\"external\">é›ªç¢§å›¾ç”Ÿæˆå·¥å…·</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/frexy/svg-sprite-polyfill\" target=\"_blank\" rel=\"external\">svg-sprite-polyfill</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/adobe-webplatform/Snap.svg\" target=\"_blank\" rel=\"external\">Snap.svg</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/frexy/glyph-iconset\" target=\"_blank\" rel=\"external\">SVGå›¾æ ‡é›†</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/saeedalipoor/icono\" target=\"_blank\" rel=\"external\">çº¯csså›¾æ ‡</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/FortAwesome/Font-Awesome\" target=\"_blank\" rel=\"external\">Font-Awesome</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/material-design-icons\" target=\"_blank\" rel=\"external\">material-design-icons</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/material-design-lite\" target=\"_blank\" rel=\"external\">Material Design Lite</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/Dogfalo/materialize\" target=\"_blank\" rel=\"external\">Materialé£æ ¼cssæ¡†æ¶</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/alvarotrigo/fullPage.js\" target=\"_blank\" rel=\"external\">fullPage.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/powy1993/fullpage\" target=\"_blank\" rel=\"external\">FullpageåŸç”Ÿå®ç°</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/dangrossman/bootstrap-daterangepicker\" target=\"_blank\" rel=\"external\">bootstrap-daterangepicker</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mgcrea/bootstrap-additions\" target=\"_blank\" rel=\"external\">bootstrap-additions</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/welefen/pjax\" target=\"_blank\" rel=\"external\">pjax</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/ajaxorg/ace\" target=\"_blank\" rel=\"external\">Aceï¼ˆCloud9çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/quilljs/quill\" target=\"_blank\" rel=\"external\">quill æ–‡æœ¬ç¼–è¾‘å™¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/moxiecode/plupload\" target=\"_blank\" rel=\"external\">plupload</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/postcss/postcss\" target=\"_blank\" rel=\"external\">postcss</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mrdoob/three.js\" target=\"_blank\" rel=\"external\">three.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/shakiba/stage.js\" target=\"_blank\" rel=\"external\">stage.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/niklasvh/html2canvas\" target=\"_blank\" rel=\"external\">html2canvas</a>{:target=â€_blankâ€}</li>\n<li><a href=\"http://ricostacruz.com/nprogress/\" target=\"_blank\" rel=\"external\">nprogress</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"Shim-Polyfill\"><a href=\"#Shim-Polyfill\" class=\"headerlink\" title=\"Shim/Polyfill\"></a>Shim/Polyfill</h1><ul>\n<li><a href=\"https://github.com/es-shims/es5-shim\" target=\"_blank\" rel=\"external\">ES5 shim</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/paulmillr/es6-shim\" target=\"_blank\" rel=\"external\">es6-shim</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/aFarkas/html5shiv\" target=\"_blank\" rel=\"external\">html5shiv</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/zloirock/core-js\" target=\"_blank\" rel=\"external\">core-js</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\"><a href=\"#å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\" class=\"headerlink\" title=\"å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“\"></a>å¯èƒ½æ˜¯å¸¸ç”¨çš„å·¥å…·åº“</h1><ul>\n<li><a href=\"https://github.com/moment/moment\" target=\"_blank\" rel=\"external\">moment</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/lodash/lodash\" target=\"_blank\" rel=\"external\">lodash</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/caolan/highland\" target=\"_blank\" rel=\"external\">highland æµå¼é£æ ¼å·¥å…·åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/wycats/handlebars.js\" target=\"_blank\" rel=\"external\">handlebars.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mailru/FileAPI\" target=\"_blank\" rel=\"external\">FileAPI</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/sytelus/CryptoJS\" target=\"_blank\" rel=\"external\">CryptoJSåŠ å¯†åº“</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jquery/esprima\" target=\"_blank\" rel=\"external\">Esprimaï¼ˆECMAScriptè¯­æ³•è§£æï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/zaach/jison\" target=\"_blank\" rel=\"external\">jison è¯­æ³•è§£æå™¨ç”Ÿæˆå™¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/ded/bowser\" target=\"_blank\" rel=\"external\">bowser åˆ¤æ–­æµè§ˆå™¨</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/ded/reqwest\" target=\"_blank\" rel=\"external\">reqwestï¼ˆAjaxå®ç°ï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/visionmedia/superagent\" target=\"_blank\" rel=\"external\">superagent</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/stefanpenner/es6-promise\" target=\"_blank\" rel=\"external\">es6-promise</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/zloirock/core-js\" target=\"_blank\" rel=\"external\">core-jsï¼ˆå„ç§js pollyfillé›†åˆï¼‰</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/svg/svgo\" target=\"_blank\" rel=\"external\">svgo SVGä¼˜åŒ–å·¥å…·</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/leeluolee/stateman\" target=\"_blank\" rel=\"external\">stateman å‰ç«¯è·¯ç”±</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/skidding/dragdealer\" target=\"_blank\" rel=\"external\">dragdealer</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/mozilla/pdf.js\" target=\"_blank\" rel=\"external\">pdf.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/avoidwork/filesize.js\" target=\"_blank\" rel=\"external\">filesize.js</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/tapir-dream/berserkJS\" target=\"_blank\" rel=\"external\">berserkJS</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/umdjs/umd\" target=\"_blank\" rel=\"external\">umd</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/requirejs/requirejs\" target=\"_blank\" rel=\"external\">requirejs</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"ä»£ç å¤„ç†å·¥å…·\"><a href=\"#ä»£ç å¤„ç†å·¥å…·\" class=\"headerlink\" title=\"ä»£ç å¤„ç†å·¥å…·\"></a>ä»£ç å¤„ç†å·¥å…·</h1><ul>\n<li><a href=\"https://github.com/babel/babel\" target=\"_blank\" rel=\"external\">babel</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/google/traceur-compiler\" target=\"_blank\" rel=\"external\">traceur-compiler</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/webpack/webpack\" target=\"_blank\" rel=\"external\">webpack</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/substack/node-browserify\" target=\"_blank\" rel=\"external\">node-browserify</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/gfranko/amdclean\" target=\"_blank\" rel=\"external\">amdclean</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/gulpjs/gulp\" target=\"_blank\" rel=\"external\">gulp</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/gruntjs/grunt\" target=\"_blank\" rel=\"external\">grunt</a>{:target=â€_blankâ€}</li>\n<li><a href=\"http://jspm.io/\" target=\"_blank\" rel=\"external\">jspm</a>{:target=â€_blankâ€}</li>\n<li><a href=\"http://rollupjs.org/\" target=\"_blank\" rel=\"external\">rollup.js</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"ç§»åŠ¨ç«¯\"><a href=\"#ç§»åŠ¨ç«¯\" class=\"headerlink\" title=\"ç§»åŠ¨ç«¯\"></a>ç§»åŠ¨ç«¯</h1><ul>\n<li><a href=\"https://github.com/thebird/Swipe\" target=\"_blank\" rel=\"external\">Swipe</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jtyjty99999/mobileTech\" target=\"_blank\" rel=\"external\">mobileTech ç§»åŠ¨ç«¯èµ„æºæ”¶é›†</a>{:target=â€_blankâ€}</li>\n</ul>\n<h1 id=\"æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\"><a href=\"#æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\" class=\"headerlink\" title=\"æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“\"></a>æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“</h1><ul>\n<li><a href=\"https://github.com/chaijs/chai\" target=\"_blank\" rel=\"external\">chai</a>{:target=â€_blankâ€}</li>\n<li><a href=\"https://github.com/jasmine/jasmine\" target=\"_blank\" rel=\"external\">jasmine</a>{:target=â€_blankâ€}</li>\n</ul>\n<ul>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n<li><a href=\"\"></a></li>\n</ul>\n"},{"layout":"post","title":"Redraw and Rearrangement","subtitle":"Redraw tab","date":"2016-05-23T07:08:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n### é‡ç»˜\n\né‡ç»˜æ˜¯ä¸€ä¸ªå…ƒç´ å¤–è§‚çš„æ”¹å˜æ‰€è§¦å‘çš„æµè§ˆå™¨è¡Œä¸ºï¼Œä¾‹å¦‚æ”¹å˜visibilityã€outlineã€èƒŒæ™¯è‰²ç­‰å±æ€§ã€‚æµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚é‡ç»˜ä¸ä¼šå¸¦æ¥é‡æ–°å¸ƒå±€ï¼Œå¹¶ä¸ä¸€å®šä¼´éšé‡æ’ã€‚\n\n\n### é‡æ’\n\né‡æ’æ˜¯æ›´æ˜æ˜¾çš„ä¸€ç§æ”¹å˜ï¼Œå¯ä»¥ç†è§£ä¸ºæ¸²æŸ“æ ‘éœ€è¦é‡æ–°è®¡ç®—ã€‚ä¸‹é¢æ˜¯å¸¸è§çš„è§¦å‘é‡æ’çš„æ“ä½œï¼š\n\n- DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–\nå½“DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–æ—¶ï¼Œæ¸²æŸ“æ ‘ä¸­çš„ç›¸å…³èŠ‚ç‚¹å°±ä¼šå¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šæ ¹æ®DOMå…ƒç´ çš„å˜åŒ–é‡æ–°æ„å»ºæ¸²æŸ“æ ‘ä¸­å¤±æ•ˆçš„èŠ‚ç‚¹ã€‚ä¹‹åï¼Œä¼šæ ¹æ®æ–°çš„æ¸²æŸ“æ ‘é‡æ–°ç»˜åˆ¶è¿™éƒ¨åˆ†é¡µé¢ã€‚è€Œä¸”ï¼Œå½“å‰å…ƒç´ çš„é‡æ’ä¹Ÿè®¸ä¼šå¸¦æ¥ç›¸å…³å…ƒç´ çš„é‡æ’ã€‚ä¾‹å¦‚ï¼Œå®¹å™¨èŠ‚ç‚¹çš„æ¸²æŸ“æ ‘æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘å­èŠ‚ç‚¹çš„é‡æ–°è®¡ç®—ï¼Œä¹Ÿä¼šè§¦å‘å…¶åç»­å…„å¼ŸèŠ‚ç‚¹çš„é‡æ’ï¼Œç¥–å…ˆèŠ‚ç‚¹éœ€è¦é‡æ–°è®¡ç®—å­èŠ‚ç‚¹çš„å°ºå¯¸ä¹Ÿä¼šäº§ç”Ÿé‡æ’ã€‚æœ€åï¼Œæ¯ä¸ªå…ƒç´ éƒ½å°†å‘ç”Ÿé‡ç»˜ã€‚å¯è§ï¼Œé‡æ’ä¸€å®šä¼šå¼•èµ·æµè§ˆå™¨çš„é‡ç»˜ï¼Œä¸€ä¸ªå…ƒç´ çš„é‡æ’é€šå¸¸ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„ååº”ï¼Œç”šè‡³è§¦å‘æ•´ä¸ªæ–‡æ¡£çš„é‡æ’å’Œé‡ç»˜ï¼Œæ€§èƒ½ä»£ä»·æ˜¯é«˜æ˜‚çš„.\n\n- DOMæ ‘çš„ç»“æ„å˜åŒ–\nå½“DOMæ ‘çš„ç»“æ„å˜åŒ–æ—¶ï¼Œä¾‹å¦‚èŠ‚ç‚¹çš„å¢å‡ã€ç§»åŠ¨ç­‰ï¼Œä¹Ÿä¼šè§¦å‘é‡æ’ã€‚æµè§ˆå™¨å¼•æ“å¸ƒå±€çš„è¿‡ç¨‹ï¼Œç±»ä¼¼äºæ ‘çš„å‰åºéå†ï¼Œæ˜¯ä¸€ä¸ªä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³çš„è¿‡ç¨‹ã€‚é€šå¸¸åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå½“å‰å…ƒç´ ä¸ä¼šå†å½±å“å…¶å‰é¢å·²ç»éå†è¿‡çš„å…ƒç´ ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨bodyæœ€å‰é¢æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œä¼šå¯¼è‡´æ•´ä¸ªæ–‡æ¡£çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œåœ¨å…¶åæ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¸ä¼šå½±å“åˆ°å‰é¢çš„å…ƒç´ ã€‚\n\n- è·å–æŸäº›å±æ€§\næµè§ˆå™¨å¼•æ“å¯èƒ½ä¼šé’ˆå¯¹é‡æ’åšäº†ä¼˜åŒ–ã€‚æ¯”å¦‚Operaï¼Œå®ƒä¼šç­‰åˆ°æœ‰è¶³å¤Ÿæ•°é‡çš„å˜åŒ–å‘ç”Ÿï¼Œæˆ–è€…ç­‰åˆ°ä¸€å®šçš„æ—¶é—´ï¼Œæˆ–è€…ç­‰ä¸€ä¸ªçº¿ç¨‹ç»“æŸï¼Œå†ä¸€èµ·å¤„ç†ï¼Œè¿™æ ·å°±åªå‘ç”Ÿä¸€æ¬¡é‡æ’ã€‚ä½†é™¤äº†æ¸²æŸ“æ ‘çš„ç›´æ¥å˜åŒ–ï¼Œå½“è·å–ä¸€äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºå–å¾—æ­£ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘é‡æ’ã€‚è¿™æ ·å°±ä½¿å¾—æµè§ˆå™¨çš„ä¼˜åŒ–å¤±æ•ˆäº†ã€‚è¿™äº›å±æ€§åŒ…æ‹¬ï¼šoffsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€clientTopã€clientLeftã€clientWidthã€clientHeightã€getComputedStyle() (currentStyle in IE)ã€‚æ‰€ä»¥ï¼Œåœ¨å¤šæ¬¡ä½¿ç”¨è¿™äº›å€¼æ—¶åº”è¿›è¡Œç¼“å­˜ã€‚\n\n##ã€€å‡å°‘é‡æ’çš„æ–¹æ³•\n\n- å°†å¤šæ¬¡æ”¹å˜æ ·å¼å±æ€§çš„æ“ä½œåˆå¹¶æˆä¸€æ¬¡æ“ä½œ\n- å°†éœ€è¦å¤šæ¬¡é‡æ’çš„å…ƒç´ ï¼Œpositionå±æ€§è®¾ä¸ºabsoluteæˆ–fixedï¼Œè¿™æ ·æ­¤å…ƒç´ å°±è„±ç¦»äº†æ–‡æ¡£æµï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ ã€‚ä¾‹å¦‚æœ‰åŠ¨ç”»æ•ˆæœçš„å…ƒç´ å°±æœ€å¥½è®¾ç½®ä¸ºç»å¯¹å®šä½ã€‚\n- åœ¨å†…å­˜ä¸­å¤šæ¬¡æ“ä½œèŠ‚ç‚¹ï¼Œå®Œæˆåå†æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ã€‚ä¾‹å¦‚è¦å¼‚æ­¥è·å–è¡¨æ ¼æ•°æ®ï¼Œæ¸²æŸ“åˆ°é¡µé¢ã€‚å¯ä»¥å…ˆå–å¾—æ•°æ®ååœ¨å†…å­˜ä¸­æ„å»ºæ•´ä¸ªè¡¨æ ¼çš„htmlç‰‡æ®µï¼Œå†ä¸€æ¬¡æ€§æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ï¼Œè€Œä¸æ˜¯å¾ªç¯æ·»åŠ æ¯ä¸€è¡Œã€‚\n- ç”±äºdisplayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œå¯¹éšè—çš„å…ƒç´ æ“ä½œä¸ä¼šå¼•å‘å…¶ä»–å…ƒç´ çš„é‡æ’ã€‚å¦‚æœè¦å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œå¯ä»¥å…ˆéšè—å®ƒï¼Œæ“ä½œå®Œæˆåå†æ˜¾ç¤ºã€‚è¿™æ ·åªåœ¨éšè—å’Œæ˜¾ç¤ºæ—¶è§¦å‘2æ¬¡é‡æ’ã€‚\n- åœ¨éœ€è¦ç»å¸¸è·å–é‚£äº›å¼•èµ·æµè§ˆå™¨é‡æ’çš„å±æ€§å€¼æ—¶ï¼Œè¦ç¼“å­˜åˆ°å˜é‡ã€‚\n\n\n","source":"_posts/2016-06-28-redraw-and-rearrangement.markdown","raw":"---\nlayout:     post\ntitle:      \"Redraw and Rearrangement\"\nsubtitle:   \"Redraw tab\"\ndate:       2016-05-23 15:08\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - HTML\n---\n\n### é‡ç»˜\n\né‡ç»˜æ˜¯ä¸€ä¸ªå…ƒç´ å¤–è§‚çš„æ”¹å˜æ‰€è§¦å‘çš„æµè§ˆå™¨è¡Œä¸ºï¼Œä¾‹å¦‚æ”¹å˜visibilityã€outlineã€èƒŒæ™¯è‰²ç­‰å±æ€§ã€‚æµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚é‡ç»˜ä¸ä¼šå¸¦æ¥é‡æ–°å¸ƒå±€ï¼Œå¹¶ä¸ä¸€å®šä¼´éšé‡æ’ã€‚\n\n\n### é‡æ’\n\né‡æ’æ˜¯æ›´æ˜æ˜¾çš„ä¸€ç§æ”¹å˜ï¼Œå¯ä»¥ç†è§£ä¸ºæ¸²æŸ“æ ‘éœ€è¦é‡æ–°è®¡ç®—ã€‚ä¸‹é¢æ˜¯å¸¸è§çš„è§¦å‘é‡æ’çš„æ“ä½œï¼š\n\n- DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–\nå½“DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–æ—¶ï¼Œæ¸²æŸ“æ ‘ä¸­çš„ç›¸å…³èŠ‚ç‚¹å°±ä¼šå¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šæ ¹æ®DOMå…ƒç´ çš„å˜åŒ–é‡æ–°æ„å»ºæ¸²æŸ“æ ‘ä¸­å¤±æ•ˆçš„èŠ‚ç‚¹ã€‚ä¹‹åï¼Œä¼šæ ¹æ®æ–°çš„æ¸²æŸ“æ ‘é‡æ–°ç»˜åˆ¶è¿™éƒ¨åˆ†é¡µé¢ã€‚è€Œä¸”ï¼Œå½“å‰å…ƒç´ çš„é‡æ’ä¹Ÿè®¸ä¼šå¸¦æ¥ç›¸å…³å…ƒç´ çš„é‡æ’ã€‚ä¾‹å¦‚ï¼Œå®¹å™¨èŠ‚ç‚¹çš„æ¸²æŸ“æ ‘æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘å­èŠ‚ç‚¹çš„é‡æ–°è®¡ç®—ï¼Œä¹Ÿä¼šè§¦å‘å…¶åç»­å…„å¼ŸèŠ‚ç‚¹çš„é‡æ’ï¼Œç¥–å…ˆèŠ‚ç‚¹éœ€è¦é‡æ–°è®¡ç®—å­èŠ‚ç‚¹çš„å°ºå¯¸ä¹Ÿä¼šäº§ç”Ÿé‡æ’ã€‚æœ€åï¼Œæ¯ä¸ªå…ƒç´ éƒ½å°†å‘ç”Ÿé‡ç»˜ã€‚å¯è§ï¼Œé‡æ’ä¸€å®šä¼šå¼•èµ·æµè§ˆå™¨çš„é‡ç»˜ï¼Œä¸€ä¸ªå…ƒç´ çš„é‡æ’é€šå¸¸ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„ååº”ï¼Œç”šè‡³è§¦å‘æ•´ä¸ªæ–‡æ¡£çš„é‡æ’å’Œé‡ç»˜ï¼Œæ€§èƒ½ä»£ä»·æ˜¯é«˜æ˜‚çš„.\n\n- DOMæ ‘çš„ç»“æ„å˜åŒ–\nå½“DOMæ ‘çš„ç»“æ„å˜åŒ–æ—¶ï¼Œä¾‹å¦‚èŠ‚ç‚¹çš„å¢å‡ã€ç§»åŠ¨ç­‰ï¼Œä¹Ÿä¼šè§¦å‘é‡æ’ã€‚æµè§ˆå™¨å¼•æ“å¸ƒå±€çš„è¿‡ç¨‹ï¼Œç±»ä¼¼äºæ ‘çš„å‰åºéå†ï¼Œæ˜¯ä¸€ä¸ªä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³çš„è¿‡ç¨‹ã€‚é€šå¸¸åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå½“å‰å…ƒç´ ä¸ä¼šå†å½±å“å…¶å‰é¢å·²ç»éå†è¿‡çš„å…ƒç´ ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨bodyæœ€å‰é¢æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œä¼šå¯¼è‡´æ•´ä¸ªæ–‡æ¡£çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œåœ¨å…¶åæ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¸ä¼šå½±å“åˆ°å‰é¢çš„å…ƒç´ ã€‚\n\n- è·å–æŸäº›å±æ€§\næµè§ˆå™¨å¼•æ“å¯èƒ½ä¼šé’ˆå¯¹é‡æ’åšäº†ä¼˜åŒ–ã€‚æ¯”å¦‚Operaï¼Œå®ƒä¼šç­‰åˆ°æœ‰è¶³å¤Ÿæ•°é‡çš„å˜åŒ–å‘ç”Ÿï¼Œæˆ–è€…ç­‰åˆ°ä¸€å®šçš„æ—¶é—´ï¼Œæˆ–è€…ç­‰ä¸€ä¸ªçº¿ç¨‹ç»“æŸï¼Œå†ä¸€èµ·å¤„ç†ï¼Œè¿™æ ·å°±åªå‘ç”Ÿä¸€æ¬¡é‡æ’ã€‚ä½†é™¤äº†æ¸²æŸ“æ ‘çš„ç›´æ¥å˜åŒ–ï¼Œå½“è·å–ä¸€äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºå–å¾—æ­£ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘é‡æ’ã€‚è¿™æ ·å°±ä½¿å¾—æµè§ˆå™¨çš„ä¼˜åŒ–å¤±æ•ˆäº†ã€‚è¿™äº›å±æ€§åŒ…æ‹¬ï¼šoffsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€clientTopã€clientLeftã€clientWidthã€clientHeightã€getComputedStyle() (currentStyle in IE)ã€‚æ‰€ä»¥ï¼Œåœ¨å¤šæ¬¡ä½¿ç”¨è¿™äº›å€¼æ—¶åº”è¿›è¡Œç¼“å­˜ã€‚\n\n##ã€€å‡å°‘é‡æ’çš„æ–¹æ³•\n\n- å°†å¤šæ¬¡æ”¹å˜æ ·å¼å±æ€§çš„æ“ä½œåˆå¹¶æˆä¸€æ¬¡æ“ä½œ\n- å°†éœ€è¦å¤šæ¬¡é‡æ’çš„å…ƒç´ ï¼Œpositionå±æ€§è®¾ä¸ºabsoluteæˆ–fixedï¼Œè¿™æ ·æ­¤å…ƒç´ å°±è„±ç¦»äº†æ–‡æ¡£æµï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ ã€‚ä¾‹å¦‚æœ‰åŠ¨ç”»æ•ˆæœçš„å…ƒç´ å°±æœ€å¥½è®¾ç½®ä¸ºç»å¯¹å®šä½ã€‚\n- åœ¨å†…å­˜ä¸­å¤šæ¬¡æ“ä½œèŠ‚ç‚¹ï¼Œå®Œæˆåå†æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ã€‚ä¾‹å¦‚è¦å¼‚æ­¥è·å–è¡¨æ ¼æ•°æ®ï¼Œæ¸²æŸ“åˆ°é¡µé¢ã€‚å¯ä»¥å…ˆå–å¾—æ•°æ®ååœ¨å†…å­˜ä¸­æ„å»ºæ•´ä¸ªè¡¨æ ¼çš„htmlç‰‡æ®µï¼Œå†ä¸€æ¬¡æ€§æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ï¼Œè€Œä¸æ˜¯å¾ªç¯æ·»åŠ æ¯ä¸€è¡Œã€‚\n- ç”±äºdisplayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œå¯¹éšè—çš„å…ƒç´ æ“ä½œä¸ä¼šå¼•å‘å…¶ä»–å…ƒç´ çš„é‡æ’ã€‚å¦‚æœè¦å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œå¯ä»¥å…ˆéšè—å®ƒï¼Œæ“ä½œå®Œæˆåå†æ˜¾ç¤ºã€‚è¿™æ ·åªåœ¨éšè—å’Œæ˜¾ç¤ºæ—¶è§¦å‘2æ¬¡é‡æ’ã€‚\n- åœ¨éœ€è¦ç»å¸¸è·å–é‚£äº›å¼•èµ·æµè§ˆå™¨é‡æ’çš„å±æ€§å€¼æ—¶ï¼Œè¦ç¼“å­˜åˆ°å˜é‡ã€‚\n\n\n","slug":"2016-06-28-redraw-and-rearrangement","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhwi000gmmt713uysnf6","content":"<h3 id=\"é‡ç»˜\"><a href=\"#é‡ç»˜\" class=\"headerlink\" title=\"é‡ç»˜\"></a>é‡ç»˜</h3><p>é‡ç»˜æ˜¯ä¸€ä¸ªå…ƒç´ å¤–è§‚çš„æ”¹å˜æ‰€è§¦å‘çš„æµè§ˆå™¨è¡Œä¸ºï¼Œä¾‹å¦‚æ”¹å˜visibilityã€outlineã€èƒŒæ™¯è‰²ç­‰å±æ€§ã€‚æµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚é‡ç»˜ä¸ä¼šå¸¦æ¥é‡æ–°å¸ƒå±€ï¼Œå¹¶ä¸ä¸€å®šä¼´éšé‡æ’ã€‚</p>\n<h3 id=\"é‡æ’\"><a href=\"#é‡æ’\" class=\"headerlink\" title=\"é‡æ’\"></a>é‡æ’</h3><p>é‡æ’æ˜¯æ›´æ˜æ˜¾çš„ä¸€ç§æ”¹å˜ï¼Œå¯ä»¥ç†è§£ä¸ºæ¸²æŸ“æ ‘éœ€è¦é‡æ–°è®¡ç®—ã€‚ä¸‹é¢æ˜¯å¸¸è§çš„è§¦å‘é‡æ’çš„æ“ä½œï¼š</p>\n<ul>\n<li><p>DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–<br>å½“DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–æ—¶ï¼Œæ¸²æŸ“æ ‘ä¸­çš„ç›¸å…³èŠ‚ç‚¹å°±ä¼šå¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šæ ¹æ®DOMå…ƒç´ çš„å˜åŒ–é‡æ–°æ„å»ºæ¸²æŸ“æ ‘ä¸­å¤±æ•ˆçš„èŠ‚ç‚¹ã€‚ä¹‹åï¼Œä¼šæ ¹æ®æ–°çš„æ¸²æŸ“æ ‘é‡æ–°ç»˜åˆ¶è¿™éƒ¨åˆ†é¡µé¢ã€‚è€Œä¸”ï¼Œå½“å‰å…ƒç´ çš„é‡æ’ä¹Ÿè®¸ä¼šå¸¦æ¥ç›¸å…³å…ƒç´ çš„é‡æ’ã€‚ä¾‹å¦‚ï¼Œå®¹å™¨èŠ‚ç‚¹çš„æ¸²æŸ“æ ‘æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘å­èŠ‚ç‚¹çš„é‡æ–°è®¡ç®—ï¼Œä¹Ÿä¼šè§¦å‘å…¶åç»­å…„å¼ŸèŠ‚ç‚¹çš„é‡æ’ï¼Œç¥–å…ˆèŠ‚ç‚¹éœ€è¦é‡æ–°è®¡ç®—å­èŠ‚ç‚¹çš„å°ºå¯¸ä¹Ÿä¼šäº§ç”Ÿé‡æ’ã€‚æœ€åï¼Œæ¯ä¸ªå…ƒç´ éƒ½å°†å‘ç”Ÿé‡ç»˜ã€‚å¯è§ï¼Œé‡æ’ä¸€å®šä¼šå¼•èµ·æµè§ˆå™¨çš„é‡ç»˜ï¼Œä¸€ä¸ªå…ƒç´ çš„é‡æ’é€šå¸¸ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„ååº”ï¼Œç”šè‡³è§¦å‘æ•´ä¸ªæ–‡æ¡£çš„é‡æ’å’Œé‡ç»˜ï¼Œæ€§èƒ½ä»£ä»·æ˜¯é«˜æ˜‚çš„.</p>\n</li>\n<li><p>DOMæ ‘çš„ç»“æ„å˜åŒ–<br>å½“DOMæ ‘çš„ç»“æ„å˜åŒ–æ—¶ï¼Œä¾‹å¦‚èŠ‚ç‚¹çš„å¢å‡ã€ç§»åŠ¨ç­‰ï¼Œä¹Ÿä¼šè§¦å‘é‡æ’ã€‚æµè§ˆå™¨å¼•æ“å¸ƒå±€çš„è¿‡ç¨‹ï¼Œç±»ä¼¼äºæ ‘çš„å‰åºéå†ï¼Œæ˜¯ä¸€ä¸ªä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³çš„è¿‡ç¨‹ã€‚é€šå¸¸åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå½“å‰å…ƒç´ ä¸ä¼šå†å½±å“å…¶å‰é¢å·²ç»éå†è¿‡çš„å…ƒç´ ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨bodyæœ€å‰é¢æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œä¼šå¯¼è‡´æ•´ä¸ªæ–‡æ¡£çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œåœ¨å…¶åæ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¸ä¼šå½±å“åˆ°å‰é¢çš„å…ƒç´ ã€‚</p>\n</li>\n<li><p>è·å–æŸäº›å±æ€§<br>æµè§ˆå™¨å¼•æ“å¯èƒ½ä¼šé’ˆå¯¹é‡æ’åšäº†ä¼˜åŒ–ã€‚æ¯”å¦‚Operaï¼Œå®ƒä¼šç­‰åˆ°æœ‰è¶³å¤Ÿæ•°é‡çš„å˜åŒ–å‘ç”Ÿï¼Œæˆ–è€…ç­‰åˆ°ä¸€å®šçš„æ—¶é—´ï¼Œæˆ–è€…ç­‰ä¸€ä¸ªçº¿ç¨‹ç»“æŸï¼Œå†ä¸€èµ·å¤„ç†ï¼Œè¿™æ ·å°±åªå‘ç”Ÿä¸€æ¬¡é‡æ’ã€‚ä½†é™¤äº†æ¸²æŸ“æ ‘çš„ç›´æ¥å˜åŒ–ï¼Œå½“è·å–ä¸€äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºå–å¾—æ­£ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘é‡æ’ã€‚è¿™æ ·å°±ä½¿å¾—æµè§ˆå™¨çš„ä¼˜åŒ–å¤±æ•ˆäº†ã€‚è¿™äº›å±æ€§åŒ…æ‹¬ï¼šoffsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€clientTopã€clientLeftã€clientWidthã€clientHeightã€getComputedStyle() (currentStyle in IE)ã€‚æ‰€ä»¥ï¼Œåœ¨å¤šæ¬¡ä½¿ç”¨è¿™äº›å€¼æ—¶åº”è¿›è¡Œç¼“å­˜ã€‚</p>\n</li>\n</ul>\n<p>##ã€€å‡å°‘é‡æ’çš„æ–¹æ³•</p>\n<ul>\n<li>å°†å¤šæ¬¡æ”¹å˜æ ·å¼å±æ€§çš„æ“ä½œåˆå¹¶æˆä¸€æ¬¡æ“ä½œ</li>\n<li>å°†éœ€è¦å¤šæ¬¡é‡æ’çš„å…ƒç´ ï¼Œpositionå±æ€§è®¾ä¸ºabsoluteæˆ–fixedï¼Œè¿™æ ·æ­¤å…ƒç´ å°±è„±ç¦»äº†æ–‡æ¡£æµï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ ã€‚ä¾‹å¦‚æœ‰åŠ¨ç”»æ•ˆæœçš„å…ƒç´ å°±æœ€å¥½è®¾ç½®ä¸ºç»å¯¹å®šä½ã€‚</li>\n<li>åœ¨å†…å­˜ä¸­å¤šæ¬¡æ“ä½œèŠ‚ç‚¹ï¼Œå®Œæˆåå†æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ã€‚ä¾‹å¦‚è¦å¼‚æ­¥è·å–è¡¨æ ¼æ•°æ®ï¼Œæ¸²æŸ“åˆ°é¡µé¢ã€‚å¯ä»¥å…ˆå–å¾—æ•°æ®ååœ¨å†…å­˜ä¸­æ„å»ºæ•´ä¸ªè¡¨æ ¼çš„htmlç‰‡æ®µï¼Œå†ä¸€æ¬¡æ€§æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ï¼Œè€Œä¸æ˜¯å¾ªç¯æ·»åŠ æ¯ä¸€è¡Œã€‚</li>\n<li>ç”±äºdisplayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œå¯¹éšè—çš„å…ƒç´ æ“ä½œä¸ä¼šå¼•å‘å…¶ä»–å…ƒç´ çš„é‡æ’ã€‚å¦‚æœè¦å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œå¯ä»¥å…ˆéšè—å®ƒï¼Œæ“ä½œå®Œæˆåå†æ˜¾ç¤ºã€‚è¿™æ ·åªåœ¨éšè—å’Œæ˜¾ç¤ºæ—¶è§¦å‘2æ¬¡é‡æ’ã€‚</li>\n<li>åœ¨éœ€è¦ç»å¸¸è·å–é‚£äº›å¼•èµ·æµè§ˆå™¨é‡æ’çš„å±æ€§å€¼æ—¶ï¼Œè¦ç¼“å­˜åˆ°å˜é‡ã€‚</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"é‡ç»˜\"><a href=\"#é‡ç»˜\" class=\"headerlink\" title=\"é‡ç»˜\"></a>é‡ç»˜</h3><p>é‡ç»˜æ˜¯ä¸€ä¸ªå…ƒç´ å¤–è§‚çš„æ”¹å˜æ‰€è§¦å‘çš„æµè§ˆå™¨è¡Œä¸ºï¼Œä¾‹å¦‚æ”¹å˜visibilityã€outlineã€èƒŒæ™¯è‰²ç­‰å±æ€§ã€‚æµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚é‡ç»˜ä¸ä¼šå¸¦æ¥é‡æ–°å¸ƒå±€ï¼Œå¹¶ä¸ä¸€å®šä¼´éšé‡æ’ã€‚</p>\n<h3 id=\"é‡æ’\"><a href=\"#é‡æ’\" class=\"headerlink\" title=\"é‡æ’\"></a>é‡æ’</h3><p>é‡æ’æ˜¯æ›´æ˜æ˜¾çš„ä¸€ç§æ”¹å˜ï¼Œå¯ä»¥ç†è§£ä¸ºæ¸²æŸ“æ ‘éœ€è¦é‡æ–°è®¡ç®—ã€‚ä¸‹é¢æ˜¯å¸¸è§çš„è§¦å‘é‡æ’çš„æ“ä½œï¼š</p>\n<ul>\n<li><p>DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–<br>å½“DOMå…ƒç´ çš„å‡ ä½•å±æ€§å˜åŒ–æ—¶ï¼Œæ¸²æŸ“æ ‘ä¸­çš„ç›¸å…³èŠ‚ç‚¹å°±ä¼šå¤±æ•ˆï¼Œæµè§ˆå™¨ä¼šæ ¹æ®DOMå…ƒç´ çš„å˜åŒ–é‡æ–°æ„å»ºæ¸²æŸ“æ ‘ä¸­å¤±æ•ˆçš„èŠ‚ç‚¹ã€‚ä¹‹åï¼Œä¼šæ ¹æ®æ–°çš„æ¸²æŸ“æ ‘é‡æ–°ç»˜åˆ¶è¿™éƒ¨åˆ†é¡µé¢ã€‚è€Œä¸”ï¼Œå½“å‰å…ƒç´ çš„é‡æ’ä¹Ÿè®¸ä¼šå¸¦æ¥ç›¸å…³å…ƒç´ çš„é‡æ’ã€‚ä¾‹å¦‚ï¼Œå®¹å™¨èŠ‚ç‚¹çš„æ¸²æŸ“æ ‘æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘å­èŠ‚ç‚¹çš„é‡æ–°è®¡ç®—ï¼Œä¹Ÿä¼šè§¦å‘å…¶åç»­å…„å¼ŸèŠ‚ç‚¹çš„é‡æ’ï¼Œç¥–å…ˆèŠ‚ç‚¹éœ€è¦é‡æ–°è®¡ç®—å­èŠ‚ç‚¹çš„å°ºå¯¸ä¹Ÿä¼šäº§ç”Ÿé‡æ’ã€‚æœ€åï¼Œæ¯ä¸ªå…ƒç´ éƒ½å°†å‘ç”Ÿé‡ç»˜ã€‚å¯è§ï¼Œé‡æ’ä¸€å®šä¼šå¼•èµ·æµè§ˆå™¨çš„é‡ç»˜ï¼Œä¸€ä¸ªå…ƒç´ çš„é‡æ’é€šå¸¸ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„ååº”ï¼Œç”šè‡³è§¦å‘æ•´ä¸ªæ–‡æ¡£çš„é‡æ’å’Œé‡ç»˜ï¼Œæ€§èƒ½ä»£ä»·æ˜¯é«˜æ˜‚çš„.</p>\n</li>\n<li><p>DOMæ ‘çš„ç»“æ„å˜åŒ–<br>å½“DOMæ ‘çš„ç»“æ„å˜åŒ–æ—¶ï¼Œä¾‹å¦‚èŠ‚ç‚¹çš„å¢å‡ã€ç§»åŠ¨ç­‰ï¼Œä¹Ÿä¼šè§¦å‘é‡æ’ã€‚æµè§ˆå™¨å¼•æ“å¸ƒå±€çš„è¿‡ç¨‹ï¼Œç±»ä¼¼äºæ ‘çš„å‰åºéå†ï¼Œæ˜¯ä¸€ä¸ªä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³çš„è¿‡ç¨‹ã€‚é€šå¸¸åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå½“å‰å…ƒç´ ä¸ä¼šå†å½±å“å…¶å‰é¢å·²ç»éå†è¿‡çš„å…ƒç´ ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨bodyæœ€å‰é¢æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œä¼šå¯¼è‡´æ•´ä¸ªæ–‡æ¡£çš„é‡æ–°æ¸²æŸ“ï¼Œè€Œåœ¨å…¶åæ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¸ä¼šå½±å“åˆ°å‰é¢çš„å…ƒç´ ã€‚</p>\n</li>\n<li><p>è·å–æŸäº›å±æ€§<br>æµè§ˆå™¨å¼•æ“å¯èƒ½ä¼šé’ˆå¯¹é‡æ’åšäº†ä¼˜åŒ–ã€‚æ¯”å¦‚Operaï¼Œå®ƒä¼šç­‰åˆ°æœ‰è¶³å¤Ÿæ•°é‡çš„å˜åŒ–å‘ç”Ÿï¼Œæˆ–è€…ç­‰åˆ°ä¸€å®šçš„æ—¶é—´ï¼Œæˆ–è€…ç­‰ä¸€ä¸ªçº¿ç¨‹ç»“æŸï¼Œå†ä¸€èµ·å¤„ç†ï¼Œè¿™æ ·å°±åªå‘ç”Ÿä¸€æ¬¡é‡æ’ã€‚ä½†é™¤äº†æ¸²æŸ“æ ‘çš„ç›´æ¥å˜åŒ–ï¼Œå½“è·å–ä¸€äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºå–å¾—æ­£ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘é‡æ’ã€‚è¿™æ ·å°±ä½¿å¾—æµè§ˆå™¨çš„ä¼˜åŒ–å¤±æ•ˆäº†ã€‚è¿™äº›å±æ€§åŒ…æ‹¬ï¼šoffsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€clientTopã€clientLeftã€clientWidthã€clientHeightã€getComputedStyle() (currentStyle in IE)ã€‚æ‰€ä»¥ï¼Œåœ¨å¤šæ¬¡ä½¿ç”¨è¿™äº›å€¼æ—¶åº”è¿›è¡Œç¼“å­˜ã€‚</p>\n</li>\n</ul>\n<p>##ã€€å‡å°‘é‡æ’çš„æ–¹æ³•</p>\n<ul>\n<li>å°†å¤šæ¬¡æ”¹å˜æ ·å¼å±æ€§çš„æ“ä½œåˆå¹¶æˆä¸€æ¬¡æ“ä½œ</li>\n<li>å°†éœ€è¦å¤šæ¬¡é‡æ’çš„å…ƒç´ ï¼Œpositionå±æ€§è®¾ä¸ºabsoluteæˆ–fixedï¼Œè¿™æ ·æ­¤å…ƒç´ å°±è„±ç¦»äº†æ–‡æ¡£æµï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ ã€‚ä¾‹å¦‚æœ‰åŠ¨ç”»æ•ˆæœçš„å…ƒç´ å°±æœ€å¥½è®¾ç½®ä¸ºç»å¯¹å®šä½ã€‚</li>\n<li>åœ¨å†…å­˜ä¸­å¤šæ¬¡æ“ä½œèŠ‚ç‚¹ï¼Œå®Œæˆåå†æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ã€‚ä¾‹å¦‚è¦å¼‚æ­¥è·å–è¡¨æ ¼æ•°æ®ï¼Œæ¸²æŸ“åˆ°é¡µé¢ã€‚å¯ä»¥å…ˆå–å¾—æ•°æ®ååœ¨å†…å­˜ä¸­æ„å»ºæ•´ä¸ªè¡¨æ ¼çš„htmlç‰‡æ®µï¼Œå†ä¸€æ¬¡æ€§æ·»åŠ åˆ°æ–‡æ¡£ä¸­å»ï¼Œè€Œä¸æ˜¯å¾ªç¯æ·»åŠ æ¯ä¸€è¡Œã€‚</li>\n<li>ç”±äºdisplayå±æ€§ä¸ºnoneçš„å…ƒç´ ä¸åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œå¯¹éšè—çš„å…ƒç´ æ“ä½œä¸ä¼šå¼•å‘å…¶ä»–å…ƒç´ çš„é‡æ’ã€‚å¦‚æœè¦å¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œå¯ä»¥å…ˆéšè—å®ƒï¼Œæ“ä½œå®Œæˆåå†æ˜¾ç¤ºã€‚è¿™æ ·åªåœ¨éšè—å’Œæ˜¾ç¤ºæ—¶è§¦å‘2æ¬¡é‡æ’ã€‚</li>\n<li>åœ¨éœ€è¦ç»å¸¸è·å–é‚£äº›å¼•èµ·æµè§ˆå™¨é‡æ’çš„å±æ€§å€¼æ—¶ï¼Œè¦ç¼“å­˜åˆ°å˜é‡ã€‚</li>\n</ul>\n"},{"layout":"post","title":"AMD CDM COMMONJS","subtitle":"å‰ç«¯æ¨¡å—åŒ–","date":"2016-07-04T07:23:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n### CMD\nCMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼Œå¯ä»¥æŠŠä¾èµ–å†™è¿›ä½ çš„ä»£ç ä¸­çš„ä»»æ„ä¸€è¡Œã€‚\n```javascript\ndefine(function(require, exports, module) {\n    var a = require('./a');\n    a.doSomething();\n    var b = require('./b');\n    b.doSomething();\n})ï¼›\n```\n\n### AMD\nAMDæ˜¯ä¾èµ–å‰ç½®çš„ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨è§£æå’Œæ‰§è¡Œå½“å‰æ¨¡å—ä¹‹å‰ï¼Œæ¨¡å—ä½œè€…å¿…é¡»æŒ‡æ˜å½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—ã€‚\n```javascript\ndefine(['./a','./b'],function(a,b) {\n     a.doSomething()\n     b.doSomething()\n});\n```\n\n### COMMONJS\nCommonJSæ˜¯æœåŠ¡ç«¯æ¨¡å—çš„è§„èŒƒï¼ŒNode.jsé‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒã€‚\næ ¹æ®CommonJSè§„èŒƒï¼Œä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚åŠ è½½æ¨¡å—ä½¿ç”¨requireæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¯»å–ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œï¼Œæœ€åè¿”å›æ–‡ä»¶å†…éƒ¨çš„exportså¯¹è±¡ã€‚\n```javascript\nconsole.log(\"evaluating example.js\");\n\nvar invisible = function () {\n    console.log(\"invisible\");\n};\n\nexports.message = \"hi\";\n\nexports.say = function () {\n    console.log(message);\n};\n\nvar example = require('./example.js');\n\n{\n    message: \"hi\",\n    say: [Function]\n}\n\nvar example = require('./example');\n```\n\nCommonJS æœ€åˆåªä¸“æ³¨äº Server-side è€Œéæµè§ˆå™¨ç¯å¢ƒï¼Œå› æ­¤å®ƒé‡‡ç”¨äº†åŒæ­¥åŠ è½½çš„æœºåˆ¶ï¼Œè¿™å¯¹æœåŠ¡å™¨ç¯å¢ƒï¼ˆç¡¬ç›˜ I/O é€Ÿåº¦ï¼‰ä¸æ˜¯é—®é¢˜ï¼Œè€Œå¯¹æµè§ˆå™¨ç¯å¢ƒï¼ˆç½‘é€Ÿï¼‰æ¥è¯´å¹¶ä¸åˆé€‚ã€‚\n\nå› æ­¤ï¼Œå„ç§é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒçš„æ¨¡å—æ¡†æ¶ä¸æ ‡å‡†é€ä¸ªè¯ç”Ÿï¼Œä»–ä»¬çš„å…±åŒç‚¹æ˜¯ï¼š\n- é‡‡ç”¨å¼‚æ­¥åŠ è½½ï¼ˆé¢„å…ˆåŠ è½½æ‰€æœ‰ä¾èµ–çš„æ¨¡å—åå›è°ƒæ‰§è¡Œï¼Œç¬¦åˆæµè§ˆå™¨çš„ç½‘ç»œç¯å¢ƒï¼‰\n- è™½ç„¶ä»£ç é£æ ¼ä¸åŒï¼Œä½†å…¶å®éƒ½å¯ä»¥çœ‹ä½œ CommonJS Modules è¯­æ³•çš„å˜ä½“ã€‚\n- éƒ½åœ¨å‘ç€ COMMON çš„æ–¹å‘è¿›åŒ–ï¼šå…¼å®¹ä¸åŒé£æ ¼ï¼Œå…¼å®¹æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¸¤ç§ç¯å¢ƒ\n\n### AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\nCommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚AMDè§„èŒƒåˆ™æ˜¯éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚\n\nç”±äºNode.jsä¸»è¦ç”¨äºæœåŠ¡å™¨ç¼–ç¨‹ï¼Œæ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨äºæœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥åŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œä¸ç”¨è€ƒè™‘éåŒæ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ‰€ä»¥CommonJSè§„èŒƒæ¯”è¾ƒé€‚ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¦ä»æœåŠ¡å™¨ç«¯åŠ è½½æ¨¡å—ï¼Œè¿™æ—¶å°±å¿…é¡»é‡‡ç”¨éåŒæ­¥æ¨¡å¼ï¼Œå› æ­¤æµè§ˆå™¨ç«¯ä¸€èˆ¬é‡‡ç”¨AMDè§„èŒƒã€‚\n\n\n### UMD\nå› ä¸ºAMDï¼ŒCommonJSè§„èŒƒæ˜¯ä¸¤ç§ä¸ä¸€è‡´çš„è§„èŒƒï¼Œè™½ç„¶ä»–ä»¬åº”ç”¨çš„åœºæ™¯ä¹Ÿä¸å¤ªä¸€è‡´ï¼Œä½†æ˜¯äººä»¬ä»ç„¶æ˜¯æœŸæœ›æœ‰ä¸€ç§ç»Ÿä¸€çš„è§„èŒƒæ¥æ”¯æŒè¿™ä¸¤ç§è§„èŒƒã€‚äºæ˜¯ï¼ŒUMDï¼ˆUniversal Module Definitionï¼Œç§°ä¹‹ä¸ºé€šç”¨æ¨¡å—è§„èŒƒï¼‰è§„èŒƒè¯ç”Ÿäº†ã€‚\n\nå®¢è§‚æ¥è¯´ï¼Œè¿™ä¸ªUMDè§„èŒƒçœ‹èµ·æ¥çš„ç¡®æ²¡æœ‰AMDå’ŒCommonJSè§„èŒƒç®€çº¦ã€‚ä½†æ˜¯å®ƒæ”¯æŒAMDå’ŒCommonJSè§„èŒƒï¼ŒåŒæ—¶è¿˜æ”¯æŒå¤è€çš„å…¨å±€æ¨¡å—æ¨¡å¼ã€‚\n\n```javascript\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node, CommonJS-like\n        module.exports = factory(require('jquery'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.jQuery);\n    }\n}(this, function ($) {\n    //    methods\n    function myFunc(){};\n\n    //    exposed public method\n    return myFunc;\n}));\n```\n\n> äººè§‰å¾—UMDè§„èŒƒæ›´åƒä¸€ä¸ªè¯­æ³•ç³–ã€‚åº”ç”¨UMDè§„èŒƒçš„jsæ–‡ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ã€‚å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰\n> è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¨¡å—çš„å®šä¹‰ä½“ã€‚åœ¨æ‰§è¡ŒUMDè§„èŒƒæ—¶ï¼Œä¼šä¼˜å…ˆåˆ¤æ–­æ˜¯å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒAMDç¯å¢ƒï¼Œç„¶åå†æ£€éªŒæ˜¯å¦æ”¯\n> æŒCommonJSç¯å¢ƒï¼Œå¦åˆ™è®¤ä¸ºå½“å‰ç¯å¢ƒä¸ºæµè§ˆå™¨ç¯å¢ƒï¼ˆwindowï¼‰ã€‚å½“ç„¶å…·ä½“çš„åˆ¤æ–­é¡ºåºå…¶å®æ˜¯å¯ä»¥è°ƒæ¢çš„ã€‚\n\n```javascript\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(['jquery', 'underscore'], factory);\n    } else if (typeof exports === 'object') {\n        // Node, CommonJS-like\n        module.exports = factory(require('jquery'), require('underscore'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.jQuery, root._);\n    }\n}(this, function ($, _) {\n    //    methods\n    function a(){};    //    private because it's not returned (see below)\n    function b(){};    //    public because it's returned\n    function c(){};    //    public because it's returned\n\n    //    exposed public methods\n    return {\n        b: b,\n        c: c\n    }\n}));\n```\n","source":"_posts/2016-07-08-frontend-module-definition.markdown","raw":"---\nlayout:     post\ntitle:      \"AMD CDM COMMONJS\"\nsubtitle:   \"å‰ç«¯æ¨¡å—åŒ–\"\ndate:       2016-07-04 15:23\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Frontend\n---\n\n### CMD\nCMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼Œå¯ä»¥æŠŠä¾èµ–å†™è¿›ä½ çš„ä»£ç ä¸­çš„ä»»æ„ä¸€è¡Œã€‚\n```javascript\ndefine(function(require, exports, module) {\n    var a = require('./a');\n    a.doSomething();\n    var b = require('./b');\n    b.doSomething();\n})ï¼›\n```\n\n### AMD\nAMDæ˜¯ä¾èµ–å‰ç½®çš„ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨è§£æå’Œæ‰§è¡Œå½“å‰æ¨¡å—ä¹‹å‰ï¼Œæ¨¡å—ä½œè€…å¿…é¡»æŒ‡æ˜å½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—ã€‚\n```javascript\ndefine(['./a','./b'],function(a,b) {\n     a.doSomething()\n     b.doSomething()\n});\n```\n\n### COMMONJS\nCommonJSæ˜¯æœåŠ¡ç«¯æ¨¡å—çš„è§„èŒƒï¼ŒNode.jsé‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒã€‚\næ ¹æ®CommonJSè§„èŒƒï¼Œä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚åŠ è½½æ¨¡å—ä½¿ç”¨requireæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¯»å–ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œï¼Œæœ€åè¿”å›æ–‡ä»¶å†…éƒ¨çš„exportså¯¹è±¡ã€‚\n```javascript\nconsole.log(\"evaluating example.js\");\n\nvar invisible = function () {\n    console.log(\"invisible\");\n};\n\nexports.message = \"hi\";\n\nexports.say = function () {\n    console.log(message);\n};\n\nvar example = require('./example.js');\n\n{\n    message: \"hi\",\n    say: [Function]\n}\n\nvar example = require('./example');\n```\n\nCommonJS æœ€åˆåªä¸“æ³¨äº Server-side è€Œéæµè§ˆå™¨ç¯å¢ƒï¼Œå› æ­¤å®ƒé‡‡ç”¨äº†åŒæ­¥åŠ è½½çš„æœºåˆ¶ï¼Œè¿™å¯¹æœåŠ¡å™¨ç¯å¢ƒï¼ˆç¡¬ç›˜ I/O é€Ÿåº¦ï¼‰ä¸æ˜¯é—®é¢˜ï¼Œè€Œå¯¹æµè§ˆå™¨ç¯å¢ƒï¼ˆç½‘é€Ÿï¼‰æ¥è¯´å¹¶ä¸åˆé€‚ã€‚\n\nå› æ­¤ï¼Œå„ç§é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒçš„æ¨¡å—æ¡†æ¶ä¸æ ‡å‡†é€ä¸ªè¯ç”Ÿï¼Œä»–ä»¬çš„å…±åŒç‚¹æ˜¯ï¼š\n- é‡‡ç”¨å¼‚æ­¥åŠ è½½ï¼ˆé¢„å…ˆåŠ è½½æ‰€æœ‰ä¾èµ–çš„æ¨¡å—åå›è°ƒæ‰§è¡Œï¼Œç¬¦åˆæµè§ˆå™¨çš„ç½‘ç»œç¯å¢ƒï¼‰\n- è™½ç„¶ä»£ç é£æ ¼ä¸åŒï¼Œä½†å…¶å®éƒ½å¯ä»¥çœ‹ä½œ CommonJS Modules è¯­æ³•çš„å˜ä½“ã€‚\n- éƒ½åœ¨å‘ç€ COMMON çš„æ–¹å‘è¿›åŒ–ï¼šå…¼å®¹ä¸åŒé£æ ¼ï¼Œå…¼å®¹æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¸¤ç§ç¯å¢ƒ\n\n### AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\nCommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚AMDè§„èŒƒåˆ™æ˜¯éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚\n\nç”±äºNode.jsä¸»è¦ç”¨äºæœåŠ¡å™¨ç¼–ç¨‹ï¼Œæ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨äºæœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥åŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œä¸ç”¨è€ƒè™‘éåŒæ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ‰€ä»¥CommonJSè§„èŒƒæ¯”è¾ƒé€‚ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¦ä»æœåŠ¡å™¨ç«¯åŠ è½½æ¨¡å—ï¼Œè¿™æ—¶å°±å¿…é¡»é‡‡ç”¨éåŒæ­¥æ¨¡å¼ï¼Œå› æ­¤æµè§ˆå™¨ç«¯ä¸€èˆ¬é‡‡ç”¨AMDè§„èŒƒã€‚\n\n\n### UMD\nå› ä¸ºAMDï¼ŒCommonJSè§„èŒƒæ˜¯ä¸¤ç§ä¸ä¸€è‡´çš„è§„èŒƒï¼Œè™½ç„¶ä»–ä»¬åº”ç”¨çš„åœºæ™¯ä¹Ÿä¸å¤ªä¸€è‡´ï¼Œä½†æ˜¯äººä»¬ä»ç„¶æ˜¯æœŸæœ›æœ‰ä¸€ç§ç»Ÿä¸€çš„è§„èŒƒæ¥æ”¯æŒè¿™ä¸¤ç§è§„èŒƒã€‚äºæ˜¯ï¼ŒUMDï¼ˆUniversal Module Definitionï¼Œç§°ä¹‹ä¸ºé€šç”¨æ¨¡å—è§„èŒƒï¼‰è§„èŒƒè¯ç”Ÿäº†ã€‚\n\nå®¢è§‚æ¥è¯´ï¼Œè¿™ä¸ªUMDè§„èŒƒçœ‹èµ·æ¥çš„ç¡®æ²¡æœ‰AMDå’ŒCommonJSè§„èŒƒç®€çº¦ã€‚ä½†æ˜¯å®ƒæ”¯æŒAMDå’ŒCommonJSè§„èŒƒï¼ŒåŒæ—¶è¿˜æ”¯æŒå¤è€çš„å…¨å±€æ¨¡å—æ¨¡å¼ã€‚\n\n```javascript\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        // Node, CommonJS-like\n        module.exports = factory(require('jquery'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.jQuery);\n    }\n}(this, function ($) {\n    //    methods\n    function myFunc(){};\n\n    //    exposed public method\n    return myFunc;\n}));\n```\n\n> äººè§‰å¾—UMDè§„èŒƒæ›´åƒä¸€ä¸ªè¯­æ³•ç³–ã€‚åº”ç”¨UMDè§„èŒƒçš„jsæ–‡ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ã€‚å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰\n> è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¨¡å—çš„å®šä¹‰ä½“ã€‚åœ¨æ‰§è¡ŒUMDè§„èŒƒæ—¶ï¼Œä¼šä¼˜å…ˆåˆ¤æ–­æ˜¯å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒAMDç¯å¢ƒï¼Œç„¶åå†æ£€éªŒæ˜¯å¦æ”¯\n> æŒCommonJSç¯å¢ƒï¼Œå¦åˆ™è®¤ä¸ºå½“å‰ç¯å¢ƒä¸ºæµè§ˆå™¨ç¯å¢ƒï¼ˆwindowï¼‰ã€‚å½“ç„¶å…·ä½“çš„åˆ¤æ–­é¡ºåºå…¶å®æ˜¯å¯ä»¥è°ƒæ¢çš„ã€‚\n\n```javascript\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(['jquery', 'underscore'], factory);\n    } else if (typeof exports === 'object') {\n        // Node, CommonJS-like\n        module.exports = factory(require('jquery'), require('underscore'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.jQuery, root._);\n    }\n}(this, function ($, _) {\n    //    methods\n    function a(){};    //    private because it's not returned (see below)\n    function b(){};    //    public because it's returned\n    function c(){};    //    public because it's returned\n\n    //    exposed public methods\n    return {\n        b: b,\n        c: c\n    }\n}));\n```\n","slug":"2016-07-08-frontend-module-definition","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhwm000immt78urbu23c","content":"<h3 id=\"CMD\"><a href=\"#CMD\" class=\"headerlink\" title=\"CMD\"></a>CMD</h3><p>CMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼Œå¯ä»¥æŠŠä¾èµ–å†™è¿›ä½ çš„ä»£ç ä¸­çš„ä»»æ„ä¸€è¡Œã€‚<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require, exports, module</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">'./a'</span>);</div><div class=\"line\">    a.doSomething();</div><div class=\"line\">    <span class=\"keyword\">var</span> b = <span class=\"built_in\">require</span>(<span class=\"string\">'./b'</span>);</div><div class=\"line\">    b.doSomething();</div><div class=\"line\">&#125;)ï¼›</div></pre></td></tr></table></figure></p>\n<h3 id=\"AMD\"><a href=\"#AMD\" class=\"headerlink\" title=\"AMD\"></a>AMD</h3><p>AMDæ˜¯ä¾èµ–å‰ç½®çš„ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨è§£æå’Œæ‰§è¡Œå½“å‰æ¨¡å—ä¹‹å‰ï¼Œæ¨¡å—ä½œè€…å¿…é¡»æŒ‡æ˜å½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—ã€‚<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([<span class=\"string\">'./a'</span>,<span class=\"string\">'./b'</span>],<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>) </span>&#123;</div><div class=\"line\">     a.doSomething()</div><div class=\"line\">     b.doSomething()</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<h3 id=\"COMMONJS\"><a href=\"#COMMONJS\" class=\"headerlink\" title=\"COMMONJS\"></a>COMMONJS</h3><p>CommonJSæ˜¯æœåŠ¡ç«¯æ¨¡å—çš„è§„èŒƒï¼ŒNode.jsé‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒã€‚<br>æ ¹æ®CommonJSè§„èŒƒï¼Œä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚åŠ è½½æ¨¡å—ä½¿ç”¨requireæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¯»å–ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œï¼Œæœ€åè¿”å›æ–‡ä»¶å†…éƒ¨çš„exportså¯¹è±¡ã€‚<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"evaluating example.js\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> invisible = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"invisible\"</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">exports.message = <span class=\"string\">\"hi\"</span>;</div><div class=\"line\"></div><div class=\"line\">exports.say = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(message);</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> example = <span class=\"built_in\">require</span>(<span class=\"string\">'./example.js'</span>);</div><div class=\"line\"></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"attr\">message</span>: <span class=\"string\">\"hi\"</span>,</div><div class=\"line\">    <span class=\"attr\">say</span>: [<span class=\"built_in\">Function</span>]</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> example = <span class=\"built_in\">require</span>(<span class=\"string\">'./example'</span>);</div></pre></td></tr></table></figure></p>\n<p>CommonJS æœ€åˆåªä¸“æ³¨äº Server-side è€Œéæµè§ˆå™¨ç¯å¢ƒï¼Œå› æ­¤å®ƒé‡‡ç”¨äº†åŒæ­¥åŠ è½½çš„æœºåˆ¶ï¼Œè¿™å¯¹æœåŠ¡å™¨ç¯å¢ƒï¼ˆç¡¬ç›˜ I/O é€Ÿåº¦ï¼‰ä¸æ˜¯é—®é¢˜ï¼Œè€Œå¯¹æµè§ˆå™¨ç¯å¢ƒï¼ˆç½‘é€Ÿï¼‰æ¥è¯´å¹¶ä¸åˆé€‚ã€‚</p>\n<p>å› æ­¤ï¼Œå„ç§é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒçš„æ¨¡å—æ¡†æ¶ä¸æ ‡å‡†é€ä¸ªè¯ç”Ÿï¼Œä»–ä»¬çš„å…±åŒç‚¹æ˜¯ï¼š</p>\n<ul>\n<li>é‡‡ç”¨å¼‚æ­¥åŠ è½½ï¼ˆé¢„å…ˆåŠ è½½æ‰€æœ‰ä¾èµ–çš„æ¨¡å—åå›è°ƒæ‰§è¡Œï¼Œç¬¦åˆæµè§ˆå™¨çš„ç½‘ç»œç¯å¢ƒï¼‰</li>\n<li>è™½ç„¶ä»£ç é£æ ¼ä¸åŒï¼Œä½†å…¶å®éƒ½å¯ä»¥çœ‹ä½œ CommonJS Modules è¯­æ³•çš„å˜ä½“ã€‚</li>\n<li>éƒ½åœ¨å‘ç€ COMMON çš„æ–¹å‘è¿›åŒ–ï¼šå…¼å®¹ä¸åŒé£æ ¼ï¼Œå…¼å®¹æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¸¤ç§ç¯å¢ƒ</li>\n</ul>\n<h3 id=\"AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\"><a href=\"#AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\" class=\"headerlink\" title=\"AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\"></a>AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§</h3><p>CommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚AMDè§„èŒƒåˆ™æ˜¯éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚</p>\n<p>ç”±äºNode.jsä¸»è¦ç”¨äºæœåŠ¡å™¨ç¼–ç¨‹ï¼Œæ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨äºæœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥åŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œä¸ç”¨è€ƒè™‘éåŒæ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ‰€ä»¥CommonJSè§„èŒƒæ¯”è¾ƒé€‚ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¦ä»æœåŠ¡å™¨ç«¯åŠ è½½æ¨¡å—ï¼Œè¿™æ—¶å°±å¿…é¡»é‡‡ç”¨éåŒæ­¥æ¨¡å¼ï¼Œå› æ­¤æµè§ˆå™¨ç«¯ä¸€èˆ¬é‡‡ç”¨AMDè§„èŒƒã€‚</p>\n<h3 id=\"UMD\"><a href=\"#UMD\" class=\"headerlink\" title=\"UMD\"></a>UMD</h3><p>å› ä¸ºAMDï¼ŒCommonJSè§„èŒƒæ˜¯ä¸¤ç§ä¸ä¸€è‡´çš„è§„èŒƒï¼Œè™½ç„¶ä»–ä»¬åº”ç”¨çš„åœºæ™¯ä¹Ÿä¸å¤ªä¸€è‡´ï¼Œä½†æ˜¯äººä»¬ä»ç„¶æ˜¯æœŸæœ›æœ‰ä¸€ç§ç»Ÿä¸€çš„è§„èŒƒæ¥æ”¯æŒè¿™ä¸¤ç§è§„èŒƒã€‚äºæ˜¯ï¼ŒUMDï¼ˆUniversal Module Definitionï¼Œç§°ä¹‹ä¸ºé€šç”¨æ¨¡å—è§„èŒƒï¼‰è§„èŒƒè¯ç”Ÿäº†ã€‚</p>\n<p>å®¢è§‚æ¥è¯´ï¼Œè¿™ä¸ªUMDè§„èŒƒçœ‹èµ·æ¥çš„ç¡®æ²¡æœ‰AMDå’ŒCommonJSè§„èŒƒç®€çº¦ã€‚ä½†æ˜¯å®ƒæ”¯æŒAMDå’ŒCommonJSè§„èŒƒï¼ŒåŒæ—¶è¿˜æ”¯æŒå¤è€çš„å…¨å±€æ¨¡å—æ¨¡å¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">        <span class=\"comment\">// AMD</span></div><div class=\"line\">        define([<span class=\"string\">'jquery'</span>], factory);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// Node, CommonJS-like</span></div><div class=\"line\">        <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// Browser globals (root is window)</span></div><div class=\"line\">        root.returnExports = factory(root.jQuery);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    methods</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//    exposed public method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> myFunc;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>äººè§‰å¾—UMDè§„èŒƒæ›´åƒä¸€ä¸ªè¯­æ³•ç³–ã€‚åº”ç”¨UMDè§„èŒƒçš„jsæ–‡ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ã€‚å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰<br>è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¨¡å—çš„å®šä¹‰ä½“ã€‚åœ¨æ‰§è¡ŒUMDè§„èŒƒæ—¶ï¼Œä¼šä¼˜å…ˆåˆ¤æ–­æ˜¯å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒAMDç¯å¢ƒï¼Œç„¶åå†æ£€éªŒæ˜¯å¦æ”¯<br>æŒCommonJSç¯å¢ƒï¼Œå¦åˆ™è®¤ä¸ºå½“å‰ç¯å¢ƒä¸ºæµè§ˆå™¨ç¯å¢ƒï¼ˆwindowï¼‰ã€‚å½“ç„¶å…·ä½“çš„åˆ¤æ–­é¡ºåºå…¶å®æ˜¯å¯ä»¥è°ƒæ¢çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">        <span class=\"comment\">// AMD</span></div><div class=\"line\">        define([<span class=\"string\">'jquery'</span>, <span class=\"string\">'underscore'</span>], factory);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// Node, CommonJS-like</span></div><div class=\"line\">        <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>), <span class=\"built_in\">require</span>(<span class=\"string\">'underscore'</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// Browser globals (root is window)</span></div><div class=\"line\">        root.returnExports = factory(root.jQuery, root._);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$, _</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    methods</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>)</span>&#123;&#125;;    <span class=\"comment\">//    private because it's not returned (see below)</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>)</span>&#123;&#125;;    <span class=\"comment\">//    public because it's returned</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">c</span>(<span class=\"params\"></span>)</span>&#123;&#125;;    <span class=\"comment\">//    public because it's returned</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//    exposed public methods</span></div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">b</span>: b,</div><div class=\"line\">        <span class=\"attr\">c</span>: c</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"CMD\"><a href=\"#CMD\" class=\"headerlink\" title=\"CMD\"></a>CMD</h3><p>CMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼Œå¯ä»¥æŠŠä¾èµ–å†™è¿›ä½ çš„ä»£ç ä¸­çš„ä»»æ„ä¸€è¡Œã€‚<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">define(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">require, exports, module</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">'./a'</span>);</div><div class=\"line\">    a.doSomething();</div><div class=\"line\">    <span class=\"keyword\">var</span> b = <span class=\"built_in\">require</span>(<span class=\"string\">'./b'</span>);</div><div class=\"line\">    b.doSomething();</div><div class=\"line\">&#125;)ï¼›</div></pre></td></tr></table></figure></p>\n<h3 id=\"AMD\"><a href=\"#AMD\" class=\"headerlink\" title=\"AMD\"></a>AMD</h3><p>AMDæ˜¯ä¾èµ–å‰ç½®çš„ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨è§£æå’Œæ‰§è¡Œå½“å‰æ¨¡å—ä¹‹å‰ï¼Œæ¨¡å—ä½œè€…å¿…é¡»æŒ‡æ˜å½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—ã€‚<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">define([<span class=\"string\">'./a'</span>,<span class=\"string\">'./b'</span>],<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>) </span>&#123;</div><div class=\"line\">     a.doSomething()</div><div class=\"line\">     b.doSomething()</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<h3 id=\"COMMONJS\"><a href=\"#COMMONJS\" class=\"headerlink\" title=\"COMMONJS\"></a>COMMONJS</h3><p>CommonJSæ˜¯æœåŠ¡ç«¯æ¨¡å—çš„è§„èŒƒï¼ŒNode.jsé‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒã€‚<br>æ ¹æ®CommonJSè§„èŒƒï¼Œä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚åŠ è½½æ¨¡å—ä½¿ç”¨requireæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¯»å–ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œï¼Œæœ€åè¿”å›æ–‡ä»¶å†…éƒ¨çš„exportså¯¹è±¡ã€‚<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"evaluating example.js\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> invisible = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"invisible\"</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">exports.message = <span class=\"string\">\"hi\"</span>;</div><div class=\"line\"></div><div class=\"line\">exports.say = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(message);</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> example = <span class=\"built_in\">require</span>(<span class=\"string\">'./example.js'</span>);</div><div class=\"line\"></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"attr\">message</span>: <span class=\"string\">\"hi\"</span>,</div><div class=\"line\">    <span class=\"attr\">say</span>: [<span class=\"built_in\">Function</span>]</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> example = <span class=\"built_in\">require</span>(<span class=\"string\">'./example'</span>);</div></pre></td></tr></table></figure></p>\n<p>CommonJS æœ€åˆåªä¸“æ³¨äº Server-side è€Œéæµè§ˆå™¨ç¯å¢ƒï¼Œå› æ­¤å®ƒé‡‡ç”¨äº†åŒæ­¥åŠ è½½çš„æœºåˆ¶ï¼Œè¿™å¯¹æœåŠ¡å™¨ç¯å¢ƒï¼ˆç¡¬ç›˜ I/O é€Ÿåº¦ï¼‰ä¸æ˜¯é—®é¢˜ï¼Œè€Œå¯¹æµè§ˆå™¨ç¯å¢ƒï¼ˆç½‘é€Ÿï¼‰æ¥è¯´å¹¶ä¸åˆé€‚ã€‚</p>\n<p>å› æ­¤ï¼Œå„ç§é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒçš„æ¨¡å—æ¡†æ¶ä¸æ ‡å‡†é€ä¸ªè¯ç”Ÿï¼Œä»–ä»¬çš„å…±åŒç‚¹æ˜¯ï¼š</p>\n<ul>\n<li>é‡‡ç”¨å¼‚æ­¥åŠ è½½ï¼ˆé¢„å…ˆåŠ è½½æ‰€æœ‰ä¾èµ–çš„æ¨¡å—åå›è°ƒæ‰§è¡Œï¼Œç¬¦åˆæµè§ˆå™¨çš„ç½‘ç»œç¯å¢ƒï¼‰</li>\n<li>è™½ç„¶ä»£ç é£æ ¼ä¸åŒï¼Œä½†å…¶å®éƒ½å¯ä»¥çœ‹ä½œ CommonJS Modules è¯­æ³•çš„å˜ä½“ã€‚</li>\n<li>éƒ½åœ¨å‘ç€ COMMON çš„æ–¹å‘è¿›åŒ–ï¼šå…¼å®¹ä¸åŒé£æ ¼ï¼Œå…¼å®¹æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¸¤ç§ç¯å¢ƒ</li>\n</ul>\n<h3 id=\"AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\"><a href=\"#AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\" class=\"headerlink\" title=\"AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§\"></a>AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§</h3><p>CommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚AMDè§„èŒƒåˆ™æ˜¯éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚</p>\n<p>ç”±äºNode.jsä¸»è¦ç”¨äºæœåŠ¡å™¨ç¼–ç¨‹ï¼Œæ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨äºæœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥åŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œä¸ç”¨è€ƒè™‘éåŒæ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ‰€ä»¥CommonJSè§„èŒƒæ¯”è¾ƒé€‚ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¦ä»æœåŠ¡å™¨ç«¯åŠ è½½æ¨¡å—ï¼Œè¿™æ—¶å°±å¿…é¡»é‡‡ç”¨éåŒæ­¥æ¨¡å¼ï¼Œå› æ­¤æµè§ˆå™¨ç«¯ä¸€èˆ¬é‡‡ç”¨AMDè§„èŒƒã€‚</p>\n<h3 id=\"UMD\"><a href=\"#UMD\" class=\"headerlink\" title=\"UMD\"></a>UMD</h3><p>å› ä¸ºAMDï¼ŒCommonJSè§„èŒƒæ˜¯ä¸¤ç§ä¸ä¸€è‡´çš„è§„èŒƒï¼Œè™½ç„¶ä»–ä»¬åº”ç”¨çš„åœºæ™¯ä¹Ÿä¸å¤ªä¸€è‡´ï¼Œä½†æ˜¯äººä»¬ä»ç„¶æ˜¯æœŸæœ›æœ‰ä¸€ç§ç»Ÿä¸€çš„è§„èŒƒæ¥æ”¯æŒè¿™ä¸¤ç§è§„èŒƒã€‚äºæ˜¯ï¼ŒUMDï¼ˆUniversal Module Definitionï¼Œç§°ä¹‹ä¸ºé€šç”¨æ¨¡å—è§„èŒƒï¼‰è§„èŒƒè¯ç”Ÿäº†ã€‚</p>\n<p>å®¢è§‚æ¥è¯´ï¼Œè¿™ä¸ªUMDè§„èŒƒçœ‹èµ·æ¥çš„ç¡®æ²¡æœ‰AMDå’ŒCommonJSè§„èŒƒç®€çº¦ã€‚ä½†æ˜¯å®ƒæ”¯æŒAMDå’ŒCommonJSè§„èŒƒï¼ŒåŒæ—¶è¿˜æ”¯æŒå¤è€çš„å…¨å±€æ¨¡å—æ¨¡å¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">        <span class=\"comment\">// AMD</span></div><div class=\"line\">        define([<span class=\"string\">'jquery'</span>], factory);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// Node, CommonJS-like</span></div><div class=\"line\">        <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// Browser globals (root is window)</span></div><div class=\"line\">        root.returnExports = factory(root.jQuery);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    methods</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myFunc</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//    exposed public method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> myFunc;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>äººè§‰å¾—UMDè§„èŒƒæ›´åƒä¸€ä¸ªè¯­æ³•ç³–ã€‚åº”ç”¨UMDè§„èŒƒçš„jsæ–‡ä»¶å…¶å®å°±æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ã€‚å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰<br>è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¨¡å—çš„å®šä¹‰ä½“ã€‚åœ¨æ‰§è¡ŒUMDè§„èŒƒæ—¶ï¼Œä¼šä¼˜å…ˆåˆ¤æ–­æ˜¯å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒAMDç¯å¢ƒï¼Œç„¶åå†æ£€éªŒæ˜¯å¦æ”¯<br>æŒCommonJSç¯å¢ƒï¼Œå¦åˆ™è®¤ä¸ºå½“å‰ç¯å¢ƒä¸ºæµè§ˆå™¨ç¯å¢ƒï¼ˆwindowï¼‰ã€‚å½“ç„¶å…·ä½“çš„åˆ¤æ–­é¡ºåºå…¶å®æ˜¯å¯ä»¥è°ƒæ¢çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div></pre></td><td class=\"code\"><pre><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">root, factory</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">        <span class=\"comment\">// AMD</span></div><div class=\"line\">        define([<span class=\"string\">'jquery'</span>, <span class=\"string\">'underscore'</span>], factory);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports === <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// Node, CommonJS-like</span></div><div class=\"line\">        <span class=\"built_in\">module</span>.exports = factory(<span class=\"built_in\">require</span>(<span class=\"string\">'jquery'</span>), <span class=\"built_in\">require</span>(<span class=\"string\">'underscore'</span>));</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"comment\">// Browser globals (root is window)</span></div><div class=\"line\">        root.returnExports = factory(root.jQuery, root._);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;(<span class=\"keyword\">this</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$, _</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//    methods</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span>(<span class=\"params\"></span>)</span>&#123;&#125;;    <span class=\"comment\">//    private because it's not returned (see below)</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span>(<span class=\"params\"></span>)</span>&#123;&#125;;    <span class=\"comment\">//    public because it's returned</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">c</span>(<span class=\"params\"></span>)</span>&#123;&#125;;    <span class=\"comment\">//    public because it's returned</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//    exposed public methods</span></div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">b</span>: b,</div><div class=\"line\">        <span class=\"attr\">c</span>: c</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;));</div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"javascript source code","subtitle":"Github","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"### Object-assign\n> Object.assign({'a':1, 'b':2}, {'c':3})\n> Object.assign({}, {'a':1, 'b':2}, {'c':3})\n\n```javascript\n'use strict'\n// è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨æ˜æŒ‡å®šçš„å±æ€§åæ˜¯å¦æ˜¯å½“å‰å¯¹è±¡å¯æšä¸¾çš„è‡ªèº«å±æ€§\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable\n\nfunction ToObject(val) {\n    if (val == null) {\n        throw new TypeError('Object.assign cannot be called with null or undefined')\n    }\n\n    return Object(val)\n}\n\nfunction ownEnumerableKeys(obj) {\n    // è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†æŒ‡å®šå¯¹è±¡æ‰€æœ‰çš„å¯æšä¸¾æˆ–ä¸å¯æšä¸¾çš„å±æ€§åã€‚\n    var keys = Object.getOwnPropertyNames(obj)\n\n    // ES6 è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«äº†æŒ‡å®šå¯¹è±¡è‡ªèº«çš„ï¼ˆéç»§æ‰¿çš„ï¼‰æ‰€æœ‰ symbol å±æ€§é”®ã€‚\n    if (Object.getOwnPropertySymbols) {\n        keys = keys.concat(Object.getOwnPropertySymbols(obj))\n    }\n\n    return keys.filter(function (key) {\n        return propIsEnumerable.call(obj, key)\n    })\n}\n\nmodule.exports = Object.assign || function (target, source) {\n\tvar from\n\tvar keys\n\tvar to = ToObject(target)\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = arguments[s]\n\t\tkeys = ownEnumerableKeys(Object(from))\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tto[keys[i]] = from[keys[i]]\n\t\t}\n\t}\n\n\treturn to\n}\n```\n\n### function.bind()\n\n```javascript\nFunction.prototype.bind = function(context){\n  var args = Array.prototype.slice(arguments, 1),\n  F = function(){},\n  self = this,\n  bound = function(){\n      var innerArgs = Array.prototype.slice.call(arguments);\n      var finalArgs = args.concat(innerArgs);\n      return self.apply((this instanceof F ? this : context), finalArgs);\n  };\n\n  F.prototype = self.prototype;\n  bound.prototype = new F();\n  return bound;\n};\n\nFunction.prototype.bind = function (oThis) {\n    if (typeof this !== \"function\") {\n      throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n    }\n\n    var aArgs = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP = function () {},\n        fBound = function () {\n          return fToBind.apply(\n              this instanceof fNOP && oThis ? this : oThis || window,\n              aArgs.concat(Array.prototype.slice.call(arguments))\n          );\n        };\n\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n\n    return fBound;\n  };\n\nfunction sub_curry(fn /*, variable number of args */) {\n    var args = [].slice.call(arguments, 1);\n    return function () {\n        return fn.apply(this, args.concat(toArray(arguments)));\n    };\n}\n\nfunction curry(fn, length) {\n    // capture fn's # of parameters\n    length = length || fn.length;\n    return function () {\n        if (arguments.length < length) {\n            // not all arguments have been specified. Curry once more.\n            var combined = [fn].concat(toArray(arguments));\n            return length - arguments.length > 0\n                ? curry(sub_curry.apply(this, combined), length - arguments.length)\n                : sub_curry.call(this, combined );\n        } else {\n            // all arguments have been specified, actually call function\n            return fn.apply(this, arguments);\n        }\n    };\n}\n```\n","source":"_posts/2016-09-05-javascript-source-code.markdown","raw":"---\nlayout:     post\ntitle:      \"javascript source code\"\nsubtitle:   \"Github\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - javascript\n---\n### Object-assign\n> Object.assign({'a':1, 'b':2}, {'c':3})\n> Object.assign({}, {'a':1, 'b':2}, {'c':3})\n\n```javascript\n'use strict'\n// è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨æ˜æŒ‡å®šçš„å±æ€§åæ˜¯å¦æ˜¯å½“å‰å¯¹è±¡å¯æšä¸¾çš„è‡ªèº«å±æ€§\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable\n\nfunction ToObject(val) {\n    if (val == null) {\n        throw new TypeError('Object.assign cannot be called with null or undefined')\n    }\n\n    return Object(val)\n}\n\nfunction ownEnumerableKeys(obj) {\n    // è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†æŒ‡å®šå¯¹è±¡æ‰€æœ‰çš„å¯æšä¸¾æˆ–ä¸å¯æšä¸¾çš„å±æ€§åã€‚\n    var keys = Object.getOwnPropertyNames(obj)\n\n    // ES6 è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«äº†æŒ‡å®šå¯¹è±¡è‡ªèº«çš„ï¼ˆéç»§æ‰¿çš„ï¼‰æ‰€æœ‰ symbol å±æ€§é”®ã€‚\n    if (Object.getOwnPropertySymbols) {\n        keys = keys.concat(Object.getOwnPropertySymbols(obj))\n    }\n\n    return keys.filter(function (key) {\n        return propIsEnumerable.call(obj, key)\n    })\n}\n\nmodule.exports = Object.assign || function (target, source) {\n\tvar from\n\tvar keys\n\tvar to = ToObject(target)\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = arguments[s]\n\t\tkeys = ownEnumerableKeys(Object(from))\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tto[keys[i]] = from[keys[i]]\n\t\t}\n\t}\n\n\treturn to\n}\n```\n\n### function.bind()\n\n```javascript\nFunction.prototype.bind = function(context){\n  var args = Array.prototype.slice(arguments, 1),\n  F = function(){},\n  self = this,\n  bound = function(){\n      var innerArgs = Array.prototype.slice.call(arguments);\n      var finalArgs = args.concat(innerArgs);\n      return self.apply((this instanceof F ? this : context), finalArgs);\n  };\n\n  F.prototype = self.prototype;\n  bound.prototype = new F();\n  return bound;\n};\n\nFunction.prototype.bind = function (oThis) {\n    if (typeof this !== \"function\") {\n      throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n    }\n\n    var aArgs = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP = function () {},\n        fBound = function () {\n          return fToBind.apply(\n              this instanceof fNOP && oThis ? this : oThis || window,\n              aArgs.concat(Array.prototype.slice.call(arguments))\n          );\n        };\n\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n\n    return fBound;\n  };\n\nfunction sub_curry(fn /*, variable number of args */) {\n    var args = [].slice.call(arguments, 1);\n    return function () {\n        return fn.apply(this, args.concat(toArray(arguments)));\n    };\n}\n\nfunction curry(fn, length) {\n    // capture fn's # of parameters\n    length = length || fn.length;\n    return function () {\n        if (arguments.length < length) {\n            // not all arguments have been specified. Curry once more.\n            var combined = [fn].concat(toArray(arguments));\n            return length - arguments.length > 0\n                ? curry(sub_curry.apply(this, combined), length - arguments.length)\n                : sub_curry.call(this, combined );\n        } else {\n            // all arguments have been specified, actually call function\n            return fn.apply(this, arguments);\n        }\n    };\n}\n```\n","slug":"2016-09-05-javascript-source-code","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhwp000lmmt7y8wcxrim","content":"<h3 id=\"Object-assign\"><a href=\"#Object-assign\" class=\"headerlink\" title=\"Object-assign\"></a>Object-assign</h3><blockquote>\n<p>Object.assign({â€˜aâ€™:1, â€˜bâ€™:2}, {â€˜câ€™:3})<br>Object.assign({}, {â€˜aâ€™:1, â€˜bâ€™:2}, {â€˜câ€™:3})</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">'use strict'</span></div><div class=\"line\"><span class=\"comment\">// è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨æ˜æŒ‡å®šçš„å±æ€§åæ˜¯å¦æ˜¯å½“å‰å¯¹è±¡å¯æšä¸¾çš„è‡ªèº«å±æ€§</span></div><div class=\"line\"><span class=\"keyword\">var</span> propIsEnumerable = <span class=\"built_in\">Object</span>.prototype.propertyIsEnumerable</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ToObject</span>(<span class=\"params\">val</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (val == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Object.assign cannot be called with null or undefined'</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>(val)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ownEnumerableKeys</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†æŒ‡å®šå¯¹è±¡æ‰€æœ‰çš„å¯æšä¸¾æˆ–ä¸å¯æšä¸¾çš„å±æ€§åã€‚</span></div><div class=\"line\">    <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.getOwnPropertyNames(obj)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// ES6 è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«äº†æŒ‡å®šå¯¹è±¡è‡ªèº«çš„ï¼ˆéç»§æ‰¿çš„ï¼‰æ‰€æœ‰ symbol å±æ€§é”®ã€‚</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.getOwnPropertySymbols) &#123;</div><div class=\"line\">        keys = keys.concat(<span class=\"built_in\">Object</span>.getOwnPropertySymbols(obj))</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> keys.filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> propIsEnumerable.call(obj, key)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"built_in\">Object</span>.assign || <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, source</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> <span class=\"keyword\">from</span></div><div class=\"line\">\t<span class=\"keyword\">var</span> keys</div><div class=\"line\">\t<span class=\"keyword\">var</span> to = ToObject(target)</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> s = <span class=\"number\">1</span>; s &lt; <span class=\"built_in\">arguments</span>.length; s++) &#123;</div><div class=\"line\">\t\t<span class=\"keyword\">from</span> = <span class=\"built_in\">arguments</span>[s]</div><div class=\"line\">\t\tkeys = ownEnumerableKeys(<span class=\"built_in\">Object</span>(<span class=\"keyword\">from</span>))</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</div><div class=\"line\">\t\t\tto[keys[i]] = <span class=\"keyword\">from</span>[keys[i]]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> to</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"function-bind\"><a href=\"#function-bind\" class=\"headerlink\" title=\"function.bind()\"></a>function.bind()</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">context</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> args = <span class=\"built_in\">Array</span>.prototype.slice(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  F = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;,</div><div class=\"line\">  self = <span class=\"keyword\">this</span>,</div><div class=\"line\">  bound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> innerArgs = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">var</span> finalArgs = args.concat(innerArgs);</div><div class=\"line\">      <span class=\"keyword\">return</span> self.apply((<span class=\"keyword\">this</span> <span class=\"keyword\">instanceof</span> F ? <span class=\"keyword\">this</span> : context), finalArgs);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  F.prototype = self.prototype;</div><div class=\"line\">  bound.prototype = <span class=\"keyword\">new</span> F();</div><div class=\"line\">  <span class=\"keyword\">return</span> bound;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">oThis</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"keyword\">this</span> !== <span class=\"string\">\"function\"</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">\"Function.prototype.bind - what is trying to be bound is not callable\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> aArgs = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>),</div><div class=\"line\">        fToBind = <span class=\"keyword\">this</span>,</div><div class=\"line\">        fNOP = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;,</div><div class=\"line\">        fBound = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> fToBind.apply(</div><div class=\"line\">              <span class=\"keyword\">this</span> <span class=\"keyword\">instanceof</span> fNOP &amp;&amp; oThis ? <span class=\"keyword\">this</span> : oThis || <span class=\"built_in\">window</span>,</div><div class=\"line\">              aArgs.concat(<span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>))</div><div class=\"line\">          );</div><div class=\"line\">        &#125;;</div><div class=\"line\"></div><div class=\"line\">    fNOP.prototype = <span class=\"keyword\">this</span>.prototype;</div><div class=\"line\">    fBound.prototype = <span class=\"keyword\">new</span> fNOP();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> fBound;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sub_curry</span>(<span class=\"params\">fn <span class=\"regexp\">/*, variable number of args */</span></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = [].slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> fn.apply(<span class=\"keyword\">this</span>, args.concat(toArray(<span class=\"built_in\">arguments</span>)));</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">curry</span>(<span class=\"params\">fn, length</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// capture fn's # of parameters</span></div><div class=\"line\">    length = length || fn.length;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">arguments</span>.length &lt; length) &#123;</div><div class=\"line\">            <span class=\"comment\">// not all arguments have been specified. Curry once more.</span></div><div class=\"line\">            <span class=\"keyword\">var</span> combined = [fn].concat(toArray(<span class=\"built_in\">arguments</span>));</div><div class=\"line\">            <span class=\"keyword\">return</span> length - <span class=\"built_in\">arguments</span>.length &gt; <span class=\"number\">0</span></div><div class=\"line\">                ? curry(sub_curry.apply(<span class=\"keyword\">this</span>, combined), length - <span class=\"built_in\">arguments</span>.length)</div><div class=\"line\">                : sub_curry.call(<span class=\"keyword\">this</span>, combined );</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            <span class=\"comment\">// all arguments have been specified, actually call function</span></div><div class=\"line\">            <span class=\"keyword\">return</span> fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Object-assign\"><a href=\"#Object-assign\" class=\"headerlink\" title=\"Object-assign\"></a>Object-assign</h3><blockquote>\n<p>Object.assign({â€˜aâ€™:1, â€˜bâ€™:2}, {â€˜câ€™:3})<br>Object.assign({}, {â€˜aâ€™:1, â€˜bâ€™:2}, {â€˜câ€™:3})</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">'use strict'</span></div><div class=\"line\"><span class=\"comment\">// è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨æ˜æŒ‡å®šçš„å±æ€§åæ˜¯å¦æ˜¯å½“å‰å¯¹è±¡å¯æšä¸¾çš„è‡ªèº«å±æ€§</span></div><div class=\"line\"><span class=\"keyword\">var</span> propIsEnumerable = <span class=\"built_in\">Object</span>.prototype.propertyIsEnumerable</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ToObject</span>(<span class=\"params\">val</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (val == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Object.assign cannot be called with null or undefined'</span>)</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Object</span>(val)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ownEnumerableKeys</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†æŒ‡å®šå¯¹è±¡æ‰€æœ‰çš„å¯æšä¸¾æˆ–ä¸å¯æšä¸¾çš„å±æ€§åã€‚</span></div><div class=\"line\">    <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.getOwnPropertyNames(obj)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// ES6 è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«äº†æŒ‡å®šå¯¹è±¡è‡ªèº«çš„ï¼ˆéç»§æ‰¿çš„ï¼‰æ‰€æœ‰ symbol å±æ€§é”®ã€‚</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.getOwnPropertySymbols) &#123;</div><div class=\"line\">        keys = keys.concat(<span class=\"built_in\">Object</span>.getOwnPropertySymbols(obj))</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> keys.filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> propIsEnumerable.call(obj, key)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"built_in\">Object</span>.assign || <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, source</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> <span class=\"keyword\">from</span></div><div class=\"line\">\t<span class=\"keyword\">var</span> keys</div><div class=\"line\">\t<span class=\"keyword\">var</span> to = ToObject(target)</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> s = <span class=\"number\">1</span>; s &lt; <span class=\"built_in\">arguments</span>.length; s++) &#123;</div><div class=\"line\">\t\t<span class=\"keyword\">from</span> = <span class=\"built_in\">arguments</span>[s]</div><div class=\"line\">\t\tkeys = ownEnumerableKeys(<span class=\"built_in\">Object</span>(<span class=\"keyword\">from</span>))</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; keys.length; i++) &#123;</div><div class=\"line\">\t\t\tto[keys[i]] = <span class=\"keyword\">from</span>[keys[i]]</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> to</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"function-bind\"><a href=\"#function-bind\" class=\"headerlink\" title=\"function.bind()\"></a>function.bind()</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">context</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> args = <span class=\"built_in\">Array</span>.prototype.slice(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>),</div><div class=\"line\">  F = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;,</div><div class=\"line\">  self = <span class=\"keyword\">this</span>,</div><div class=\"line\">  bound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> innerArgs = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">var</span> finalArgs = args.concat(innerArgs);</div><div class=\"line\">      <span class=\"keyword\">return</span> self.apply((<span class=\"keyword\">this</span> <span class=\"keyword\">instanceof</span> F ? <span class=\"keyword\">this</span> : context), finalArgs);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  F.prototype = self.prototype;</div><div class=\"line\">  bound.prototype = <span class=\"keyword\">new</span> F();</div><div class=\"line\">  <span class=\"keyword\">return</span> bound;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.bind = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">oThis</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"keyword\">this</span> !== <span class=\"string\">\"function\"</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">\"Function.prototype.bind - what is trying to be bound is not callable\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> aArgs = <span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>),</div><div class=\"line\">        fToBind = <span class=\"keyword\">this</span>,</div><div class=\"line\">        fNOP = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;,</div><div class=\"line\">        fBound = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> fToBind.apply(</div><div class=\"line\">              <span class=\"keyword\">this</span> <span class=\"keyword\">instanceof</span> fNOP &amp;&amp; oThis ? <span class=\"keyword\">this</span> : oThis || <span class=\"built_in\">window</span>,</div><div class=\"line\">              aArgs.concat(<span class=\"built_in\">Array</span>.prototype.slice.call(<span class=\"built_in\">arguments</span>))</div><div class=\"line\">          );</div><div class=\"line\">        &#125;;</div><div class=\"line\"></div><div class=\"line\">    fNOP.prototype = <span class=\"keyword\">this</span>.prototype;</div><div class=\"line\">    fBound.prototype = <span class=\"keyword\">new</span> fNOP();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> fBound;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sub_curry</span>(<span class=\"params\">fn <span class=\"regexp\">/*, variable number of args */</span></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = [].slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> fn.apply(<span class=\"keyword\">this</span>, args.concat(toArray(<span class=\"built_in\">arguments</span>)));</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">curry</span>(<span class=\"params\">fn, length</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// capture fn's # of parameters</span></div><div class=\"line\">    length = length || fn.length;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">arguments</span>.length &lt; length) &#123;</div><div class=\"line\">            <span class=\"comment\">// not all arguments have been specified. Curry once more.</span></div><div class=\"line\">            <span class=\"keyword\">var</span> combined = [fn].concat(toArray(<span class=\"built_in\">arguments</span>));</div><div class=\"line\">            <span class=\"keyword\">return</span> length - <span class=\"built_in\">arguments</span>.length &gt; <span class=\"number\">0</span></div><div class=\"line\">                ? curry(sub_curry.apply(<span class=\"keyword\">this</span>, combined), length - <span class=\"built_in\">arguments</span>.length)</div><div class=\"line\">                : sub_curry.call(<span class=\"keyword\">this</span>, combined );</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            <span class=\"comment\">// all arguments have been specified, actually call function</span></div><div class=\"line\">            <span class=\"keyword\">return</span> fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"webpack","subtitle":"Github","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"webpack-bg.png","header-mask":0.3,"catalog":true,"_content":"\n### Webpack\nTwo core philosophies of Webpack are:\n* Everything is a moduleâ€Šâ€”â€ŠJust like JS files can be â€œmodulesâ€, everything else (CSS, Images, HTML) can also be modules. That is, you can require(â€œmyJSfile.jsâ€) or require(â€œmyCSSfile.cssâ€). This mean we can split any artifact into smaller manageable pieces, reuse them and so on.\n* Load only â€œwhatâ€ you need and â€œwhenâ€ you needâ€Šâ€”â€ŠTypically module bundlers take all the modules and generate a large single output â€œbundle.jsâ€ file. But in many real-world apps, this â€œbundle.jsâ€ could be 10MB-15MB and could take forever to load! So Webpack has various features to split your code and generate multiple â€œbundleâ€ files, and also load parts of the app asynchronously so that you just load what you need and when you need it.\n\n### Install\n```javascript\n// golbal install\nnpm install -g webpack\n\n// install in your local workspace\nnpm install --save-dev webpack\n\n// install webpack dev server\nnpm install webpack-dev-server --save\n```\n\n### Devtool\n> source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­äº§ç”Ÿä¸€ä¸ªå®Œæ•´ä¸”åŠŸèƒ½å®Œå…¨çš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…·æœ‰æœ€å¥½çš„source mapï¼Œä½†æ˜¯å®ƒä¼šå‡æ…¢æ‰“åŒ…æ–‡ä»¶çš„æ„å»ºé€Ÿåº¦\n\n> cheap-module-source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ç”Ÿæˆä¸€ä¸ªä¸å¸¦åˆ—æ˜ å°„çš„mapï¼Œä¸å¸¦åˆ—æ˜ å°„æé«˜é¡¹ç›®æ„å»ºé€Ÿåº¦ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—æµè§ˆå™¨å¼€å‘è€…å·¥å…·åªèƒ½å¯¹åº”åˆ°å…·ä½“çš„è¡Œï¼Œä¸èƒ½å¯¹åº”åˆ°å…·ä½“çš„åˆ—ï¼ˆç¬¦å·ï¼‰ï¼Œä¼šå¯¹è°ƒè¯•é€ æˆä¸ä¾¿\n\n> eval-source-map: ä½¿ç”¨evalæ‰“åŒ…æºæ–‡ä»¶æ¨¡å—ï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆå¹²å‡€çš„å®Œæ•´çš„source mapã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥åœ¨ä¸å½±å“æ„å»ºé€Ÿåº¦çš„å‰æä¸‹ç”Ÿæˆå®Œæ•´çš„sourcemapï¼Œä½†æ˜¯å¯¹æ‰“åŒ…åè¾“å‡ºçš„JSæ–‡ä»¶çš„æ‰§è¡Œå…·æœ‰æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚ä¸è¿‡åœ¨å¼€å‘é˜¶æ®µè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰é¡¹ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§é˜¶æ®µä¸€å®šä¸è¦ç”¨è¿™ä¸ªé€‰é¡¹\n\n> cheap-module-eval-source-map: è¿™æ˜¯åœ¨æ‰“åŒ…æ–‡ä»¶æ—¶æœ€å¿«çš„ç”Ÿæˆsource mapçš„æ–¹æ³•ï¼Œç”Ÿæˆçš„Source Map ä¼šå’Œæ‰“åŒ…åçš„JavaScriptæ–‡ä»¶åŒè¡Œæ˜¾ç¤ºï¼Œæ²¡æœ‰åˆ—æ˜ å°„ï¼Œå’Œeval-source-mapé€‰é¡¹å…·æœ‰ç›¸ä¼¼çš„ç¼ºç‚¹\n\n### Config\n\n```javascript\nvar webapck = require('webpack')\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/index.js',\n\n    output: {\n        path: __dirname + '/public',\n        publicPath: '/',\n        filename: 'bundle.js'\n    },\n\n    module: {\n        loaders: [\n            { test: /\\.json$/, loader: 'json' },\n            { test: /\\.jsx?$/, include: '/public/src', loader: 'babel' },\n            { test: /\\.css$/, loader: 'style!css?redules!postcss' }, // æ„Ÿå¹å·çš„ä½œç”¨åœ¨äºä½¿åŒä¸€æ–‡ä»¶èƒ½å¤Ÿä½¿ç”¨ä¸åŒç±»å‹çš„loader\n            { test: /\\.png$/, loader: 'url-loader?limit=1024' },\n            { test: /\\.png$/, loader: 'url-loader', query: { limit: 1024 } },\n            {\n                test: /\\.jsx?$/,\n                exclude: /(node_modules|bower_components)/,\n                loader: 'babel',\n                query: {\n                    presets: ['react', 'es2015']\n                }\n            }\n        ]\n    },\n\n    //.bablerc\n    // {\n    //  \"presets\": [\"react\", \"es2015\"]\n    // },\n\n    resolve: {\n        extensions: ['', '.js', '.jsx']\n    },\n\n    postcss: {\n        require('autoprefixer')\n    },\n\n    plugins: [\n        new HtmlWebpackPlugin{\n            template: './public/index.template.html',\n            inject: true\n        },\n        new webpack.HotModuleReplacementPlugin(),\n    ],\n\n    devtool: 'source-map',\n    devServer: {\n        colors: true,\n        historyApoFailback: true,\n        inLine: true,\n        hot: true,\n        contentBase: './public'\n    }\n\n\n}\n```\n###### Loader\n> test: åŒ¹é…loadersæ‰€å¤„ç†æ–‡ä»¶çš„æ‹“å±•åçš„æ­£åˆ™è¡¨è¾¾å¼\n> loader: loaderå\n> include/exclude: æ‰‹åŠ¨æ·»åŠ å¿…é¡»å¤„ç†æˆ–è€…å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶\n> query: ä¸ºloadersæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹\n\n###### DevServer\n> contentBase: é»˜è®¤webpack-dev-serverä¼šä¸ºæ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¦‚æœæƒ³ä¸ºå¦å¤–ä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œåº”è¯¥åœ¨è¿™é‡Œè®¾ç½®å…¶æ‰€åœ¨ç›®å½•ï¼ˆæœ¬ä¾‹è®¾ç½®åˆ°â€œpublic\"ç›®å½•ï¼‰\n> port: è®¾ç½®é»˜è®¤ç›‘å¬ç«¯å£ï¼Œå¦‚æœçœç•¥ï¼Œé»˜è®¤ä¸ºâ€8080â€œ\n> inline: è®¾ç½®ä¸ºtrueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢\n> colors: è®¾ç½®ä¸ºtrueï¼Œä½¿ç»ˆç«¯è¾“å‡ºçš„æ–‡ä»¶ä¸ºå½©è‰²çš„\n> historyApiFallback: åœ¨å¼€å‘å•é¡µåº”ç”¨æ—¶éå¸¸æœ‰ç”¨ï¼Œå®ƒä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html\n\n\n### Plugin\n###### PostCSS + autoprefixer\n\n ```javascript\n    module: {\n        loaders: [{ test: /\\.css$/, loader: 'style!css?modules!postcss' }]\n    },\n    postcss: [\n        require('autoprefixer')//è°ƒç”¨autoprefixeræ’ä»¶\n    ],\n ```\n\n###### webpack.BannerPlugin\n> ç‰ˆæƒå£°æ˜æ’ä»¶\n\n```javascript\n    new webpack.BannerPlugin(\"Copyright Flying Unicorns inc.\")//åœ¨è¿™ä¸ªæ•°ç»„ä¸­newä¸€ä¸ªå°±å¯ä»¥äº†\n```\n\n###### HtmlWebpackPlugin\n```javascript\n    new HtmlWebpackPlugin({\n        template: __dirname + \"/app/index.tmpl.html\"//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°\n    })\n```\n\n###### Hot Module Replacement\n```javascript\n    new webpack.HotModuleReplacementPlugin()//çƒ­åŠ è½½æ’ä»¶\n    devServer: {\n        colors: true,\n        historyApiFallback: true,\n        inline: true,\n        hot: true\n    }\n```\n\n###### OccurenceOrderPlugin\n> ä¸ºç»„ä»¶åˆ†é…IDï¼Œé€šè¿‡è¿™ä¸ªæ’ä»¶webpackå¯ä»¥åˆ†æå’Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æœ€å¤šçš„æ¨¡å—ï¼Œå¹¶ä¸ºå®ƒä»¬åˆ†é…æœ€å°çš„ID\n\n```javascript\n    new webpack.optimize.OccurenceOrderPlugin()\n```\n\n###### UglifyJsPlugin\n> å‹ç¼©JSä»£ç \n\n ```javascript\n    new webpack.optimize.UglifyJsPlugin()\n ```\n\n###### ExtractTextPlugin\n> åˆ†ç¦»CSSå’ŒJSæ–‡ä»¶\n\n```javascript\n    new ExtractTextPlugin(\"style.css\")\n```\n\n### Caching\n> ç¼“å­˜æ— å¤„ä¸åœ¨ï¼Œä½¿ç”¨ç¼“å­˜çš„æœ€å¥½æ–¹æ³•æ˜¯ä¿è¯ä½ çš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹æ˜¯åŒ¹é…çš„ï¼ˆå†…å®¹æ”¹å˜ï¼Œåç§°ç›¸åº”æ”¹å˜ï¼‰\n\n```javascript\n    output: {\n       path: __dirname + \"/build\",\n       filename: \"[name]-[hash].js\"\n    },\n    plugins: [\n        new ExtractTextPlugin(\"[name]-[hash].css\")\n    ]\n```\n\n### Code Splitting\n> Itâ€™s an opt-in feature. You can define split points in your code base. Webpack takes care of the dependencies, output files and runtime stuff.\n\n###### CommonJS: require.ensure\n> The require.ensure method ensures that every dependency in dependencies can be synchronously required when calling the callback. callback has no parameter.\n```javascript\n    // require.ensure only loads the modules, it doesnâ€™t evaluate them\n    require.ensure([\"module-a\", \"module-b\"], function() {\n      var a = require(\"module-a\");\n      // ...\n    });\n```\n\n###### AMD: require\n> The AMD spec defines an asynchronous require method with this definition\n```javascript\n    require([\"module-a\", \"module-b\"], function(a, b) {\n      // ...\n    });\n    // Note: AMD require loads and evaluate the modules. In webpack modules are evaluated left to right.\n    // Note: Itâ€™s allowed to omit the callback.\n```\n\n###### ES6 Modules\n> Webpack doesnâ€™t support ES6 modules; use require.ensure or require directly depending on which module format your transpiler creates.\n> Luckily, there is a JavaScript API â€œloaderâ€ specification being written to handle the dynamic use case: System.load (or System.import). This API will be the native equivalent to the above require variations. However, most transpilers do not support converting System.load calls to require.ensure so you have to do that directly if you want to make use of dynamic code splitting.\n\n```javascript\n    //static imports\n    import _ from 'lodash'\n\n    // dynamic imports\n    require.ensure([], function() {\n        let contacts = require('./contacts')\n    })\n```\n\n###### Chunk content\n> All dependencies at a split point go into a new chunk. Dependencies are also recursively added.\n> If you pass a function expression (or bound function expression) as callback to the split point, webpack automatically puts all dependencies required in this function expression into the chunk too.\n\n###### Chunk optimization\n> If two chunks contain the same modules, they are merged into one. This can cause chunks to have multiple parents.\n> If a module is available in all parents of a chunk, itâ€™s removed from that chunk.\n> If a chunk contains all modules of another chunk, this is stored. It fulfills multiple chunks.\n\n###### Chunk loading\n> Depending on the configuration option target a runtime logic for chunk loading is added to the bundle. I. e. for the web target chunks are loaded via jsonp. A chunk is only loaded once and parallel requests are merged into one. The runtime checks for loaded chunks whether they fulfill multiple chunks.\n\n\n###### Chunk types\n######### Entry chunk\n> An entry chunk contains the runtime plus a bunch of modules. If the chunk contains the module 0 the runtime executes it. If not, it waits for chunks that contains the module 0 and executes it (every time when there is a chunk with a module 0)\n\n######### Normal chunk\n> A normal chunk contains no runtime. It only contains a bunch of modules. The structure depends on the chunk loading algorithm. I. e. for jsonp the modules are wrapped in a jsonp callback function. The chunk also contains a list of chunk id that it fulfills.\n\n######### Initial chunk (non-entry)\n> An initial chunk is a normal chunk. The only difference is that optimization treats it as more important because it counts toward the initial loading time (like entry chunks). That chunk type can occur in combination with the CommonsChunkPlugin.\n\n```javascript\nvar webpack = require(\"webpack\");\n\nmodule.exports = {\n  entry: {\n    app: \"./app.js\",\n    vendor: [\"jquery\", \"underscore\", ...],\n  },\n  output: {\n    filename: \"bundle.js\"\n  },\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin(/* chunkName= */\"vendor\", /* filename= */\"vendor.bundle.js\")\n  ]\n};\n// This will remove all modules in the vendor chunk from the app chunk. The bundle.js will now contain just your app code, without any of its dependencies. These are in vendor.bundle.js.\n// In your HTML page load vendor.bundle.js before bundle.js.\n<script src=\"vendor.bundle.js\"></script>\n<script src=\"bundle.js\"></script>\n\n\nvar webpack = require(\"webpack\");\nmodule.exports = {\n  entry: { a: \"./a\", b: \"./b\" },\n  output: { filename: \"[name].js\" },\n  plugins: [ new webpack.optimize.CommonsChunkPlugin(\"init.js\") ]\n}\n\n<script src=\"init.js\"></script>\n<script src=\"a.js\"></script>\n<script src=\"b.js\"></script>\n```\n###### Optimization\n    * LimitChunkCountPlugin\n    * MinChunkSizePlugin\n    * AggressiveMergingPlugin\n    [Config Plugin List](https://webpack.github.io/docs/list-of-plugins.html){:target=\"_blank\"}\n\n\nhttp://www.pro-react.com/materials/appendixA/\nhttps://github.com/eyasliu/blog/issues/8\nhttp://www.alloyteam.com/2016/02/code-split-by-routes/\nhttp://www.jianshu.com/p/42e11515c10f\n\nhttps://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9#.m1an35go2\nhttps://medium.com/@rajaraodv/why-redux-needs-reducers-to-be-pure-functions-d438c58ae468#.xcb5p2yux\nhttps://medium.com/@rajaraodv/webpacks-hmr-react-hot-loader-the-missing-manual-232336dc0d96#.mxeblxujo\nhttps://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07#.bsm92y6nd\nhttps://medium.freecodecamp.com/5-javascript-bad-parts-that-are-fixed-in-es6-c7c45d44fd81#.jtdaohm3n\n\n\nhttps://gold.xitu.io/post/5842ea76128fe10058a3b4f0\n\n\n\n\nhttps://github.com/gwuhaolin/blog/issues/2\n","source":"_posts/2016-08-17-webpack.markdown","raw":"---\nlayout:     post\ntitle:      \"webpack\"\nsubtitle:   \"Github\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"webpack-bg.png\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - WebPack\n---\n\n### Webpack\nTwo core philosophies of Webpack are:\n* Everything is a moduleâ€Šâ€”â€ŠJust like JS files can be â€œmodulesâ€, everything else (CSS, Images, HTML) can also be modules. That is, you can require(â€œmyJSfile.jsâ€) or require(â€œmyCSSfile.cssâ€). This mean we can split any artifact into smaller manageable pieces, reuse them and so on.\n* Load only â€œwhatâ€ you need and â€œwhenâ€ you needâ€Šâ€”â€ŠTypically module bundlers take all the modules and generate a large single output â€œbundle.jsâ€ file. But in many real-world apps, this â€œbundle.jsâ€ could be 10MB-15MB and could take forever to load! So Webpack has various features to split your code and generate multiple â€œbundleâ€ files, and also load parts of the app asynchronously so that you just load what you need and when you need it.\n\n### Install\n```javascript\n// golbal install\nnpm install -g webpack\n\n// install in your local workspace\nnpm install --save-dev webpack\n\n// install webpack dev server\nnpm install webpack-dev-server --save\n```\n\n### Devtool\n> source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­äº§ç”Ÿä¸€ä¸ªå®Œæ•´ä¸”åŠŸèƒ½å®Œå…¨çš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…·æœ‰æœ€å¥½çš„source mapï¼Œä½†æ˜¯å®ƒä¼šå‡æ…¢æ‰“åŒ…æ–‡ä»¶çš„æ„å»ºé€Ÿåº¦\n\n> cheap-module-source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ç”Ÿæˆä¸€ä¸ªä¸å¸¦åˆ—æ˜ å°„çš„mapï¼Œä¸å¸¦åˆ—æ˜ å°„æé«˜é¡¹ç›®æ„å»ºé€Ÿåº¦ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—æµè§ˆå™¨å¼€å‘è€…å·¥å…·åªèƒ½å¯¹åº”åˆ°å…·ä½“çš„è¡Œï¼Œä¸èƒ½å¯¹åº”åˆ°å…·ä½“çš„åˆ—ï¼ˆç¬¦å·ï¼‰ï¼Œä¼šå¯¹è°ƒè¯•é€ æˆä¸ä¾¿\n\n> eval-source-map: ä½¿ç”¨evalæ‰“åŒ…æºæ–‡ä»¶æ¨¡å—ï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆå¹²å‡€çš„å®Œæ•´çš„source mapã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥åœ¨ä¸å½±å“æ„å»ºé€Ÿåº¦çš„å‰æä¸‹ç”Ÿæˆå®Œæ•´çš„sourcemapï¼Œä½†æ˜¯å¯¹æ‰“åŒ…åè¾“å‡ºçš„JSæ–‡ä»¶çš„æ‰§è¡Œå…·æœ‰æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚ä¸è¿‡åœ¨å¼€å‘é˜¶æ®µè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰é¡¹ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§é˜¶æ®µä¸€å®šä¸è¦ç”¨è¿™ä¸ªé€‰é¡¹\n\n> cheap-module-eval-source-map: è¿™æ˜¯åœ¨æ‰“åŒ…æ–‡ä»¶æ—¶æœ€å¿«çš„ç”Ÿæˆsource mapçš„æ–¹æ³•ï¼Œç”Ÿæˆçš„Source Map ä¼šå’Œæ‰“åŒ…åçš„JavaScriptæ–‡ä»¶åŒè¡Œæ˜¾ç¤ºï¼Œæ²¡æœ‰åˆ—æ˜ å°„ï¼Œå’Œeval-source-mapé€‰é¡¹å…·æœ‰ç›¸ä¼¼çš„ç¼ºç‚¹\n\n### Config\n\n```javascript\nvar webapck = require('webpack')\nvar HtmlWebpackPlugin = require('html-webpack-plugin')\n\nmodule.exports = {\n    entry: './src/index.js',\n\n    output: {\n        path: __dirname + '/public',\n        publicPath: '/',\n        filename: 'bundle.js'\n    },\n\n    module: {\n        loaders: [\n            { test: /\\.json$/, loader: 'json' },\n            { test: /\\.jsx?$/, include: '/public/src', loader: 'babel' },\n            { test: /\\.css$/, loader: 'style!css?redules!postcss' }, // æ„Ÿå¹å·çš„ä½œç”¨åœ¨äºä½¿åŒä¸€æ–‡ä»¶èƒ½å¤Ÿä½¿ç”¨ä¸åŒç±»å‹çš„loader\n            { test: /\\.png$/, loader: 'url-loader?limit=1024' },\n            { test: /\\.png$/, loader: 'url-loader', query: { limit: 1024 } },\n            {\n                test: /\\.jsx?$/,\n                exclude: /(node_modules|bower_components)/,\n                loader: 'babel',\n                query: {\n                    presets: ['react', 'es2015']\n                }\n            }\n        ]\n    },\n\n    //.bablerc\n    // {\n    //  \"presets\": [\"react\", \"es2015\"]\n    // },\n\n    resolve: {\n        extensions: ['', '.js', '.jsx']\n    },\n\n    postcss: {\n        require('autoprefixer')\n    },\n\n    plugins: [\n        new HtmlWebpackPlugin{\n            template: './public/index.template.html',\n            inject: true\n        },\n        new webpack.HotModuleReplacementPlugin(),\n    ],\n\n    devtool: 'source-map',\n    devServer: {\n        colors: true,\n        historyApoFailback: true,\n        inLine: true,\n        hot: true,\n        contentBase: './public'\n    }\n\n\n}\n```\n###### Loader\n> test: åŒ¹é…loadersæ‰€å¤„ç†æ–‡ä»¶çš„æ‹“å±•åçš„æ­£åˆ™è¡¨è¾¾å¼\n> loader: loaderå\n> include/exclude: æ‰‹åŠ¨æ·»åŠ å¿…é¡»å¤„ç†æˆ–è€…å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶\n> query: ä¸ºloadersæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹\n\n###### DevServer\n> contentBase: é»˜è®¤webpack-dev-serverä¼šä¸ºæ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¦‚æœæƒ³ä¸ºå¦å¤–ä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œåº”è¯¥åœ¨è¿™é‡Œè®¾ç½®å…¶æ‰€åœ¨ç›®å½•ï¼ˆæœ¬ä¾‹è®¾ç½®åˆ°â€œpublic\"ç›®å½•ï¼‰\n> port: è®¾ç½®é»˜è®¤ç›‘å¬ç«¯å£ï¼Œå¦‚æœçœç•¥ï¼Œé»˜è®¤ä¸ºâ€8080â€œ\n> inline: è®¾ç½®ä¸ºtrueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢\n> colors: è®¾ç½®ä¸ºtrueï¼Œä½¿ç»ˆç«¯è¾“å‡ºçš„æ–‡ä»¶ä¸ºå½©è‰²çš„\n> historyApiFallback: åœ¨å¼€å‘å•é¡µåº”ç”¨æ—¶éå¸¸æœ‰ç”¨ï¼Œå®ƒä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html\n\n\n### Plugin\n###### PostCSS + autoprefixer\n\n ```javascript\n    module: {\n        loaders: [{ test: /\\.css$/, loader: 'style!css?modules!postcss' }]\n    },\n    postcss: [\n        require('autoprefixer')//è°ƒç”¨autoprefixeræ’ä»¶\n    ],\n ```\n\n###### webpack.BannerPlugin\n> ç‰ˆæƒå£°æ˜æ’ä»¶\n\n```javascript\n    new webpack.BannerPlugin(\"Copyright Flying Unicorns inc.\")//åœ¨è¿™ä¸ªæ•°ç»„ä¸­newä¸€ä¸ªå°±å¯ä»¥äº†\n```\n\n###### HtmlWebpackPlugin\n```javascript\n    new HtmlWebpackPlugin({\n        template: __dirname + \"/app/index.tmpl.html\"//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°\n    })\n```\n\n###### Hot Module Replacement\n```javascript\n    new webpack.HotModuleReplacementPlugin()//çƒ­åŠ è½½æ’ä»¶\n    devServer: {\n        colors: true,\n        historyApiFallback: true,\n        inline: true,\n        hot: true\n    }\n```\n\n###### OccurenceOrderPlugin\n> ä¸ºç»„ä»¶åˆ†é…IDï¼Œé€šè¿‡è¿™ä¸ªæ’ä»¶webpackå¯ä»¥åˆ†æå’Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æœ€å¤šçš„æ¨¡å—ï¼Œå¹¶ä¸ºå®ƒä»¬åˆ†é…æœ€å°çš„ID\n\n```javascript\n    new webpack.optimize.OccurenceOrderPlugin()\n```\n\n###### UglifyJsPlugin\n> å‹ç¼©JSä»£ç \n\n ```javascript\n    new webpack.optimize.UglifyJsPlugin()\n ```\n\n###### ExtractTextPlugin\n> åˆ†ç¦»CSSå’ŒJSæ–‡ä»¶\n\n```javascript\n    new ExtractTextPlugin(\"style.css\")\n```\n\n### Caching\n> ç¼“å­˜æ— å¤„ä¸åœ¨ï¼Œä½¿ç”¨ç¼“å­˜çš„æœ€å¥½æ–¹æ³•æ˜¯ä¿è¯ä½ çš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹æ˜¯åŒ¹é…çš„ï¼ˆå†…å®¹æ”¹å˜ï¼Œåç§°ç›¸åº”æ”¹å˜ï¼‰\n\n```javascript\n    output: {\n       path: __dirname + \"/build\",\n       filename: \"[name]-[hash].js\"\n    },\n    plugins: [\n        new ExtractTextPlugin(\"[name]-[hash].css\")\n    ]\n```\n\n### Code Splitting\n> Itâ€™s an opt-in feature. You can define split points in your code base. Webpack takes care of the dependencies, output files and runtime stuff.\n\n###### CommonJS: require.ensure\n> The require.ensure method ensures that every dependency in dependencies can be synchronously required when calling the callback. callback has no parameter.\n```javascript\n    // require.ensure only loads the modules, it doesnâ€™t evaluate them\n    require.ensure([\"module-a\", \"module-b\"], function() {\n      var a = require(\"module-a\");\n      // ...\n    });\n```\n\n###### AMD: require\n> The AMD spec defines an asynchronous require method with this definition\n```javascript\n    require([\"module-a\", \"module-b\"], function(a, b) {\n      // ...\n    });\n    // Note: AMD require loads and evaluate the modules. In webpack modules are evaluated left to right.\n    // Note: Itâ€™s allowed to omit the callback.\n```\n\n###### ES6 Modules\n> Webpack doesnâ€™t support ES6 modules; use require.ensure or require directly depending on which module format your transpiler creates.\n> Luckily, there is a JavaScript API â€œloaderâ€ specification being written to handle the dynamic use case: System.load (or System.import). This API will be the native equivalent to the above require variations. However, most transpilers do not support converting System.load calls to require.ensure so you have to do that directly if you want to make use of dynamic code splitting.\n\n```javascript\n    //static imports\n    import _ from 'lodash'\n\n    // dynamic imports\n    require.ensure([], function() {\n        let contacts = require('./contacts')\n    })\n```\n\n###### Chunk content\n> All dependencies at a split point go into a new chunk. Dependencies are also recursively added.\n> If you pass a function expression (or bound function expression) as callback to the split point, webpack automatically puts all dependencies required in this function expression into the chunk too.\n\n###### Chunk optimization\n> If two chunks contain the same modules, they are merged into one. This can cause chunks to have multiple parents.\n> If a module is available in all parents of a chunk, itâ€™s removed from that chunk.\n> If a chunk contains all modules of another chunk, this is stored. It fulfills multiple chunks.\n\n###### Chunk loading\n> Depending on the configuration option target a runtime logic for chunk loading is added to the bundle. I. e. for the web target chunks are loaded via jsonp. A chunk is only loaded once and parallel requests are merged into one. The runtime checks for loaded chunks whether they fulfill multiple chunks.\n\n\n###### Chunk types\n######### Entry chunk\n> An entry chunk contains the runtime plus a bunch of modules. If the chunk contains the module 0 the runtime executes it. If not, it waits for chunks that contains the module 0 and executes it (every time when there is a chunk with a module 0)\n\n######### Normal chunk\n> A normal chunk contains no runtime. It only contains a bunch of modules. The structure depends on the chunk loading algorithm. I. e. for jsonp the modules are wrapped in a jsonp callback function. The chunk also contains a list of chunk id that it fulfills.\n\n######### Initial chunk (non-entry)\n> An initial chunk is a normal chunk. The only difference is that optimization treats it as more important because it counts toward the initial loading time (like entry chunks). That chunk type can occur in combination with the CommonsChunkPlugin.\n\n```javascript\nvar webpack = require(\"webpack\");\n\nmodule.exports = {\n  entry: {\n    app: \"./app.js\",\n    vendor: [\"jquery\", \"underscore\", ...],\n  },\n  output: {\n    filename: \"bundle.js\"\n  },\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin(/* chunkName= */\"vendor\", /* filename= */\"vendor.bundle.js\")\n  ]\n};\n// This will remove all modules in the vendor chunk from the app chunk. The bundle.js will now contain just your app code, without any of its dependencies. These are in vendor.bundle.js.\n// In your HTML page load vendor.bundle.js before bundle.js.\n<script src=\"vendor.bundle.js\"></script>\n<script src=\"bundle.js\"></script>\n\n\nvar webpack = require(\"webpack\");\nmodule.exports = {\n  entry: { a: \"./a\", b: \"./b\" },\n  output: { filename: \"[name].js\" },\n  plugins: [ new webpack.optimize.CommonsChunkPlugin(\"init.js\") ]\n}\n\n<script src=\"init.js\"></script>\n<script src=\"a.js\"></script>\n<script src=\"b.js\"></script>\n```\n###### Optimization\n    * LimitChunkCountPlugin\n    * MinChunkSizePlugin\n    * AggressiveMergingPlugin\n    [Config Plugin List](https://webpack.github.io/docs/list-of-plugins.html){:target=\"_blank\"}\n\n\nhttp://www.pro-react.com/materials/appendixA/\nhttps://github.com/eyasliu/blog/issues/8\nhttp://www.alloyteam.com/2016/02/code-split-by-routes/\nhttp://www.jianshu.com/p/42e11515c10f\n\nhttps://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9#.m1an35go2\nhttps://medium.com/@rajaraodv/why-redux-needs-reducers-to-be-pure-functions-d438c58ae468#.xcb5p2yux\nhttps://medium.com/@rajaraodv/webpacks-hmr-react-hot-loader-the-missing-manual-232336dc0d96#.mxeblxujo\nhttps://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07#.bsm92y6nd\nhttps://medium.freecodecamp.com/5-javascript-bad-parts-that-are-fixed-in-es6-c7c45d44fd81#.jtdaohm3n\n\n\nhttps://gold.xitu.io/post/5842ea76128fe10058a3b4f0\n\n\n\n\nhttps://github.com/gwuhaolin/blog/issues/2\n","slug":"2016-08-17-webpack","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhwt000nmmt7slq5wzth","content":"<h3 id=\"Webpack\"><a href=\"#Webpack\" class=\"headerlink\" title=\"Webpack\"></a>Webpack</h3><p>Two core philosophies of Webpack are:</p>\n<ul>\n<li>Everything is a moduleâ€Šâ€”â€ŠJust like JS files can be â€œmodulesâ€, everything else (CSS, Images, HTML) can also be modules. That is, you can require(â€œmyJSfile.jsâ€) or require(â€œmyCSSfile.cssâ€). This mean we can split any artifact into smaller manageable pieces, reuse them and so on.</li>\n<li>Load only â€œwhatâ€ you need and â€œwhenâ€ you needâ€Šâ€”â€ŠTypically module bundlers take all the modules and generate a large single output â€œbundle.jsâ€ file. But in many real-world apps, this â€œbundle.jsâ€ could be 10MB-15MB and could take forever to load! So Webpack has various features to split your code and generate multiple â€œbundleâ€ files, and also load parts of the app asynchronously so that you just load what you need and when you need it.</li>\n</ul>\n<h3 id=\"Install\"><a href=\"#Install\" class=\"headerlink\" title=\"Install\"></a>Install</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// golbal install</span></div><div class=\"line\">npm install -g webpack</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// install in your local workspace</span></div><div class=\"line\">npm install --save-dev webpack</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// install webpack dev server</span></div><div class=\"line\">npm install webpack-dev-server --save</div></pre></td></tr></table></figure>\n<h3 id=\"Devtool\"><a href=\"#Devtool\" class=\"headerlink\" title=\"Devtool\"></a>Devtool</h3><blockquote>\n<p>source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­äº§ç”Ÿä¸€ä¸ªå®Œæ•´ä¸”åŠŸèƒ½å®Œå…¨çš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…·æœ‰æœ€å¥½çš„source mapï¼Œä½†æ˜¯å®ƒä¼šå‡æ…¢æ‰“åŒ…æ–‡ä»¶çš„æ„å»ºé€Ÿåº¦</p>\n<p>cheap-module-source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ç”Ÿæˆä¸€ä¸ªä¸å¸¦åˆ—æ˜ å°„çš„mapï¼Œä¸å¸¦åˆ—æ˜ å°„æé«˜é¡¹ç›®æ„å»ºé€Ÿåº¦ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—æµè§ˆå™¨å¼€å‘è€…å·¥å…·åªèƒ½å¯¹åº”åˆ°å…·ä½“çš„è¡Œï¼Œä¸èƒ½å¯¹åº”åˆ°å…·ä½“çš„åˆ—ï¼ˆç¬¦å·ï¼‰ï¼Œä¼šå¯¹è°ƒè¯•é€ æˆä¸ä¾¿</p>\n<p>eval-source-map: ä½¿ç”¨evalæ‰“åŒ…æºæ–‡ä»¶æ¨¡å—ï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆå¹²å‡€çš„å®Œæ•´çš„source mapã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥åœ¨ä¸å½±å“æ„å»ºé€Ÿåº¦çš„å‰æä¸‹ç”Ÿæˆå®Œæ•´çš„sourcemapï¼Œä½†æ˜¯å¯¹æ‰“åŒ…åè¾“å‡ºçš„JSæ–‡ä»¶çš„æ‰§è¡Œå…·æœ‰æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚ä¸è¿‡åœ¨å¼€å‘é˜¶æ®µè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰é¡¹ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§é˜¶æ®µä¸€å®šä¸è¦ç”¨è¿™ä¸ªé€‰é¡¹</p>\n<p>cheap-module-eval-source-map: è¿™æ˜¯åœ¨æ‰“åŒ…æ–‡ä»¶æ—¶æœ€å¿«çš„ç”Ÿæˆsource mapçš„æ–¹æ³•ï¼Œç”Ÿæˆçš„Source Map ä¼šå’Œæ‰“åŒ…åçš„JavaScriptæ–‡ä»¶åŒè¡Œæ˜¾ç¤ºï¼Œæ²¡æœ‰åˆ—æ˜ å°„ï¼Œå’Œeval-source-mapé€‰é¡¹å…·æœ‰ç›¸ä¼¼çš„ç¼ºç‚¹</p>\n</blockquote>\n<h3 id=\"Config\"><a href=\"#Config\" class=\"headerlink\" title=\"Config\"></a>Config</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> webapck = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</div><div class=\"line\"><span class=\"keyword\">var</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">'./src/index.js'</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">output</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">path</span>: __dirname + <span class=\"string\">'/public'</span>,</div><div class=\"line\">        <span class=\"attr\">publicPath</span>: <span class=\"string\">'/'</span>,</div><div class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">'bundle.js'</span></div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">module</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">loaders</span>: [</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.json$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'json'</span> &#125;,</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.jsx?$/</span>, <span class=\"attr\">include</span>: <span class=\"string\">'/public/src'</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'babel'</span> &#125;,</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'style!css?redules!postcss'</span> &#125;, <span class=\"comment\">// æ„Ÿå¹å·çš„ä½œç”¨åœ¨äºä½¿åŒä¸€æ–‡ä»¶èƒ½å¤Ÿä½¿ç”¨ä¸åŒç±»å‹çš„loader</span></div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.png$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'url-loader?limit=1024'</span> &#125;,</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.png$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'url-loader'</span>, <span class=\"attr\">query</span>: &#123; <span class=\"attr\">limit</span>: <span class=\"number\">1024</span> &#125; &#125;,</div><div class=\"line\">            &#123;</div><div class=\"line\">                <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.jsx?$/</span>,</div><div class=\"line\">                <span class=\"attr\">exclude</span>: <span class=\"regexp\">/(node_modules|bower_components)/</span>,</div><div class=\"line\">                <span class=\"attr\">loader</span>: <span class=\"string\">'babel'</span>,</div><div class=\"line\">                <span class=\"attr\">query</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">presets</span>: [<span class=\"string\">'react'</span>, <span class=\"string\">'es2015'</span>]</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        ]</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//.bablerc</span></div><div class=\"line\">    <span class=\"comment\">// &#123;</span></div><div class=\"line\">    <span class=\"comment\">//  \"presets\": [\"react\", \"es2015\"]</span></div><div class=\"line\">    <span class=\"comment\">// &#125;,</span></div><div class=\"line\"></div><div class=\"line\">    resolve: &#123;</div><div class=\"line\">        <span class=\"attr\">extensions</span>: [<span class=\"string\">''</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.jsx'</span>]</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">postcss</span>: &#123;</div><div class=\"line\">        <span class=\"built_in\">require</span>(<span class=\"string\">'autoprefixer'</span>)</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">plugins</span>: [</div><div class=\"line\">        <span class=\"keyword\">new</span> HtmlWebpackPlugin&#123;</div><div class=\"line\">            <span class=\"attr\">template</span>: <span class=\"string\">'./public/index.template.html'</span>,</div><div class=\"line\">            <span class=\"attr\">inject</span>: <span class=\"literal\">true</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin(),</div><div class=\"line\">    ],</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">'source-map'</span>,</div><div class=\"line\">    <span class=\"attr\">devServer</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">colors</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">historyApoFailback</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">inLine</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">hot</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">contentBase</span>: <span class=\"string\">'./public'</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h6 id=\"Loader\"><a href=\"#Loader\" class=\"headerlink\" title=\"Loader\"></a>Loader</h6><blockquote>\n<p>test: åŒ¹é…loadersæ‰€å¤„ç†æ–‡ä»¶çš„æ‹“å±•åçš„æ­£åˆ™è¡¨è¾¾å¼<br>loader: loaderå<br>include/exclude: æ‰‹åŠ¨æ·»åŠ å¿…é¡»å¤„ç†æˆ–è€…å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶<br>query: ä¸ºloadersæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹</p>\n</blockquote>\n<h6 id=\"DevServer\"><a href=\"#DevServer\" class=\"headerlink\" title=\"DevServer\"></a>DevServer</h6><blockquote>\n<p>contentBase: é»˜è®¤webpack-dev-serverä¼šä¸ºæ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¦‚æœæƒ³ä¸ºå¦å¤–ä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œåº”è¯¥åœ¨è¿™é‡Œè®¾ç½®å…¶æ‰€åœ¨ç›®å½•ï¼ˆæœ¬ä¾‹è®¾ç½®åˆ°â€œpublicâ€ç›®å½•ï¼‰<br>port: è®¾ç½®é»˜è®¤ç›‘å¬ç«¯å£ï¼Œå¦‚æœçœç•¥ï¼Œé»˜è®¤ä¸ºâ€8080â€œ<br>inline: è®¾ç½®ä¸ºtrueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢<br>colors: è®¾ç½®ä¸ºtrueï¼Œä½¿ç»ˆç«¯è¾“å‡ºçš„æ–‡ä»¶ä¸ºå½©è‰²çš„<br>historyApiFallback: åœ¨å¼€å‘å•é¡µåº”ç”¨æ—¶éå¸¸æœ‰ç”¨ï¼Œå®ƒä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html</p>\n</blockquote>\n<h3 id=\"Plugin\"><a href=\"#Plugin\" class=\"headerlink\" title=\"Plugin\"></a>Plugin</h3><h6 id=\"PostCSS-autoprefixer\"><a href=\"#PostCSS-autoprefixer\" class=\"headerlink\" title=\"PostCSS + autoprefixer\"></a>PostCSS + autoprefixer</h6> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">loaders</span>: [&#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'style!css?modules!postcss'</span> &#125;]</div><div class=\"line\">&#125;,</div><div class=\"line\"><span class=\"attr\">postcss</span>: [</div><div class=\"line\">    <span class=\"built_in\">require</span>(<span class=\"string\">'autoprefixer'</span>)<span class=\"comment\">//è°ƒç”¨autoprefixeræ’ä»¶</span></div><div class=\"line\">],</div></pre></td></tr></table></figure>\n<h6 id=\"webpack-BannerPlugin\"><a href=\"#webpack-BannerPlugin\" class=\"headerlink\" title=\"webpack.BannerPlugin\"></a>webpack.BannerPlugin</h6><blockquote>\n<p>ç‰ˆæƒå£°æ˜æ’ä»¶</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.BannerPlugin(<span class=\"string\">\"Copyright Flying Unicorns inc.\"</span>)<span class=\"comment\">//åœ¨è¿™ä¸ªæ•°ç»„ä¸­newä¸€ä¸ªå°±å¯ä»¥äº†</span></div></pre></td></tr></table></figure>\n<h6 id=\"HtmlWebpackPlugin\"><a href=\"#HtmlWebpackPlugin\" class=\"headerlink\" title=\"HtmlWebpackPlugin\"></a>HtmlWebpackPlugin</h6><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">    <span class=\"attr\">template</span>: __dirname + <span class=\"string\">\"/app/index.tmpl.html\"</span><span class=\"comment\">//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h6 id=\"Hot-Module-Replacement\"><a href=\"#Hot-Module-Replacement\" class=\"headerlink\" title=\"Hot Module Replacement\"></a>Hot Module Replacement</h6><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin()<span class=\"comment\">//çƒ­åŠ è½½æ’ä»¶</span></div><div class=\"line\">devServer: &#123;</div><div class=\"line\">    <span class=\"attr\">colors</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">historyApiFallback</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">inline</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">hot</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h6 id=\"OccurenceOrderPlugin\"><a href=\"#OccurenceOrderPlugin\" class=\"headerlink\" title=\"OccurenceOrderPlugin\"></a>OccurenceOrderPlugin</h6><blockquote>\n<p>ä¸ºç»„ä»¶åˆ†é…IDï¼Œé€šè¿‡è¿™ä¸ªæ’ä»¶webpackå¯ä»¥åˆ†æå’Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æœ€å¤šçš„æ¨¡å—ï¼Œå¹¶ä¸ºå®ƒä»¬åˆ†é…æœ€å°çš„ID</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.optimize.OccurenceOrderPlugin()</div></pre></td></tr></table></figure>\n<h6 id=\"UglifyJsPlugin\"><a href=\"#UglifyJsPlugin\" class=\"headerlink\" title=\"UglifyJsPlugin\"></a>UglifyJsPlugin</h6><blockquote>\n<p>å‹ç¼©JSä»£ç </p>\n</blockquote>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin()</div></pre></td></tr></table></figure>\n<h6 id=\"ExtractTextPlugin\"><a href=\"#ExtractTextPlugin\" class=\"headerlink\" title=\"ExtractTextPlugin\"></a>ExtractTextPlugin</h6><blockquote>\n<p>åˆ†ç¦»CSSå’ŒJSæ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">\"style.css\"</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"Caching\"><a href=\"#Caching\" class=\"headerlink\" title=\"Caching\"></a>Caching</h3><blockquote>\n<p>ç¼“å­˜æ— å¤„ä¸åœ¨ï¼Œä½¿ç”¨ç¼“å­˜çš„æœ€å¥½æ–¹æ³•æ˜¯ä¿è¯ä½ çš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹æ˜¯åŒ¹é…çš„ï¼ˆå†…å®¹æ”¹å˜ï¼Œåç§°ç›¸åº”æ”¹å˜ï¼‰</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">output: &#123;</div><div class=\"line\">   <span class=\"attr\">path</span>: __dirname + <span class=\"string\">\"/build\"</span>,</div><div class=\"line\">   <span class=\"attr\">filename</span>: <span class=\"string\">\"[name]-[hash].js\"</span></div><div class=\"line\">&#125;,</div><div class=\"line\"><span class=\"attr\">plugins</span>: [</div><div class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">\"[name]-[hash].css\"</span>)</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<h3 id=\"Code-Splitting\"><a href=\"#Code-Splitting\" class=\"headerlink\" title=\"Code Splitting\"></a>Code Splitting</h3><blockquote>\n<p>Itâ€™s an opt-in feature. You can define split points in your code base. Webpack takes care of the dependencies, output files and runtime stuff.</p>\n</blockquote>\n<h6 id=\"CommonJS-require-ensure\"><a href=\"#CommonJS-require-ensure\" class=\"headerlink\" title=\"CommonJS: require.ensure\"></a>CommonJS: require.ensure</h6><blockquote>\n<p>The require.ensure method ensures that every dependency in dependencies can be synchronously required when calling the callback. callback has no parameter.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// require.ensure only loads the modules, it doesnâ€™t evaluate them</span></div><div class=\"line\"><span class=\"built_in\">require</span>.ensure([<span class=\"string\">\"module-a\"</span>, <span class=\"string\">\"module-b\"</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">\"module-a\"</span>);</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n</blockquote>\n<h6 id=\"AMD-require\"><a href=\"#AMD-require\" class=\"headerlink\" title=\"AMD: require\"></a>AMD: require</h6><blockquote>\n<p>The AMD spec defines an asynchronous require method with this definition<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>([<span class=\"string\">\"module-a\"</span>, <span class=\"string\">\"module-b\"</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// Note: AMD require loads and evaluate the modules. In webpack modules are evaluated left to right.</span></div><div class=\"line\"><span class=\"comment\">// Note: Itâ€™s allowed to omit the callback.</span></div></pre></td></tr></table></figure></p>\n</blockquote>\n<h6 id=\"ES6-Modules\"><a href=\"#ES6-Modules\" class=\"headerlink\" title=\"ES6 Modules\"></a>ES6 Modules</h6><blockquote>\n<p>Webpack doesnâ€™t support ES6 modules; use require.ensure or require directly depending on which module format your transpiler creates.<br>Luckily, there is a JavaScript API â€œloaderâ€ specification being written to handle the dynamic use case: System.load (or System.import). This API will be the native equivalent to the above require variations. However, most transpilers do not support converting System.load calls to require.ensure so you have to do that directly if you want to make use of dynamic code splitting.</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//static imports</span></div><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// dynamic imports</span></div><div class=\"line\"><span class=\"built_in\">require</span>.ensure([], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> contacts = <span class=\"built_in\">require</span>(<span class=\"string\">'./contacts'</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h6 id=\"Chunk-content\"><a href=\"#Chunk-content\" class=\"headerlink\" title=\"Chunk content\"></a>Chunk content</h6><blockquote>\n<p>All dependencies at a split point go into a new chunk. Dependencies are also recursively added.<br>If you pass a function expression (or bound function expression) as callback to the split point, webpack automatically puts all dependencies required in this function expression into the chunk too.</p>\n</blockquote>\n<h6 id=\"Chunk-optimization\"><a href=\"#Chunk-optimization\" class=\"headerlink\" title=\"Chunk optimization\"></a>Chunk optimization</h6><blockquote>\n<p>If two chunks contain the same modules, they are merged into one. This can cause chunks to have multiple parents.<br>If a module is available in all parents of a chunk, itâ€™s removed from that chunk.<br>If a chunk contains all modules of another chunk, this is stored. It fulfills multiple chunks.</p>\n</blockquote>\n<h6 id=\"Chunk-loading\"><a href=\"#Chunk-loading\" class=\"headerlink\" title=\"Chunk loading\"></a>Chunk loading</h6><blockquote>\n<p>Depending on the configuration option target a runtime logic for chunk loading is added to the bundle. I. e. for the web target chunks are loaded via jsonp. A chunk is only loaded once and parallel requests are merged into one. The runtime checks for loaded chunks whether they fulfill multiple chunks.</p>\n</blockquote>\n<h6 id=\"Chunk-types\"><a href=\"#Chunk-types\" class=\"headerlink\" title=\"Chunk types\"></a>Chunk types</h6><p>######### Entry chunk</p>\n<blockquote>\n<p>An entry chunk contains the runtime plus a bunch of modules. If the chunk contains the module 0 the runtime executes it. If not, it waits for chunks that contains the module 0 and executes it (every time when there is a chunk with a module 0)</p>\n</blockquote>\n<p>######### Normal chunk</p>\n<blockquote>\n<p>A normal chunk contains no runtime. It only contains a bunch of modules. The structure depends on the chunk loading algorithm. I. e. for jsonp the modules are wrapped in a jsonp callback function. The chunk also contains a list of chunk id that it fulfills.</p>\n</blockquote>\n<p>######### Initial chunk (non-entry)</p>\n<blockquote>\n<p>An initial chunk is a normal chunk. The only difference is that optimization treats it as more important because it counts toward the initial loading time (like entry chunks). That chunk type can occur in combination with the CommonsChunkPlugin.</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">\"webpack\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  <span class=\"attr\">entry</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">app</span>: <span class=\"string\">\"./app.js\"</span>,</div><div class=\"line\">    <span class=\"attr\">vendor</span>: [<span class=\"string\">\"jquery\"</span>, <span class=\"string\">\"underscore\"</span>, ...],</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">output</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">\"bundle.js\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">plugins</span>: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(<span class=\"comment\">/* chunkName= */</span><span class=\"string\">\"vendor\"</span>, <span class=\"comment\">/* filename= */</span><span class=\"string\">\"vendor.bundle.js\"</span>)</div><div class=\"line\">  ]</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// This will remove all modules in the vendor chunk from the app chunk. The bundle.js will now contain just your app code, without any of its dependencies. These are in vendor.bundle.js.</span></div><div class=\"line\"><span class=\"comment\">// In your HTML page load vendor.bundle.js before bundle.js.</span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"vendor.bundle.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"bundle.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">\"webpack\"</span>);</div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  <span class=\"attr\">entry</span>: &#123; <span class=\"attr\">a</span>: <span class=\"string\">\"./a\"</span>, <span class=\"attr\">b</span>: <span class=\"string\">\"./b\"</span> &#125;,</div><div class=\"line\">  <span class=\"attr\">output</span>: &#123; <span class=\"attr\">filename</span>: <span class=\"string\">\"[name].js\"</span> &#125;,</div><div class=\"line\">  <span class=\"attr\">plugins</span>: [ <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(<span class=\"string\">\"init.js\"</span>) ]</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">&lt;script src=<span class=\"string\">\"init.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"a.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"b.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<h6 id=\"Optimization\"><a href=\"#Optimization\" class=\"headerlink\" title=\"Optimization\"></a>Optimization</h6><pre><code>* LimitChunkCountPlugin\n* MinChunkSizePlugin\n* AggressiveMergingPlugin\n[Config Plugin List](https://webpack.github.io/docs/list-of-plugins.html){:target=&quot;_blank&quot;}\n</code></pre><p><a href=\"http://www.pro-react.com/materials/appendixA/\" target=\"_blank\" rel=\"external\">http://www.pro-react.com/materials/appendixA/</a><br><a href=\"https://github.com/eyasliu/blog/issues/8\" target=\"_blank\" rel=\"external\">https://github.com/eyasliu/blog/issues/8</a><br><a href=\"http://www.alloyteam.com/2016/02/code-split-by-routes/\" target=\"_blank\" rel=\"external\">http://www.alloyteam.com/2016/02/code-split-by-routes/</a><br><a href=\"http://www.jianshu.com/p/42e11515c10f\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/42e11515c10f</a></p>\n<p><a href=\"https://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9#.m1an35go2\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9#.m1an35go2</a><br><a href=\"https://medium.com/@rajaraodv/why-redux-needs-reducers-to-be-pure-functions-d438c58ae468#.xcb5p2yux\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/why-redux-needs-reducers-to-be-pure-functions-d438c58ae468#.xcb5p2yux</a><br><a href=\"https://medium.com/@rajaraodv/webpacks-hmr-react-hot-loader-the-missing-manual-232336dc0d96#.mxeblxujo\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/webpacks-hmr-react-hot-loader-the-missing-manual-232336dc0d96#.mxeblxujo</a><br><a href=\"https://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07#.bsm92y6nd\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07#.bsm92y6nd</a><br><a href=\"https://medium.freecodecamp.com/5-javascript-bad-parts-that-are-fixed-in-es6-c7c45d44fd81#.jtdaohm3n\" target=\"_blank\" rel=\"external\">https://medium.freecodecamp.com/5-javascript-bad-parts-that-are-fixed-in-es6-c7c45d44fd81#.jtdaohm3n</a></p>\n<p><a href=\"https://gold.xitu.io/post/5842ea76128fe10058a3b4f0\" target=\"_blank\" rel=\"external\">https://gold.xitu.io/post/5842ea76128fe10058a3b4f0</a></p>\n<p><a href=\"https://github.com/gwuhaolin/blog/issues/2\" target=\"_blank\" rel=\"external\">https://github.com/gwuhaolin/blog/issues/2</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Webpack\"><a href=\"#Webpack\" class=\"headerlink\" title=\"Webpack\"></a>Webpack</h3><p>Two core philosophies of Webpack are:</p>\n<ul>\n<li>Everything is a moduleâ€Šâ€”â€ŠJust like JS files can be â€œmodulesâ€, everything else (CSS, Images, HTML) can also be modules. That is, you can require(â€œmyJSfile.jsâ€) or require(â€œmyCSSfile.cssâ€). This mean we can split any artifact into smaller manageable pieces, reuse them and so on.</li>\n<li>Load only â€œwhatâ€ you need and â€œwhenâ€ you needâ€Šâ€”â€ŠTypically module bundlers take all the modules and generate a large single output â€œbundle.jsâ€ file. But in many real-world apps, this â€œbundle.jsâ€ could be 10MB-15MB and could take forever to load! So Webpack has various features to split your code and generate multiple â€œbundleâ€ files, and also load parts of the app asynchronously so that you just load what you need and when you need it.</li>\n</ul>\n<h3 id=\"Install\"><a href=\"#Install\" class=\"headerlink\" title=\"Install\"></a>Install</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// golbal install</span></div><div class=\"line\">npm install -g webpack</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// install in your local workspace</span></div><div class=\"line\">npm install --save-dev webpack</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// install webpack dev server</span></div><div class=\"line\">npm install webpack-dev-server --save</div></pre></td></tr></table></figure>\n<h3 id=\"Devtool\"><a href=\"#Devtool\" class=\"headerlink\" title=\"Devtool\"></a>Devtool</h3><blockquote>\n<p>source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­äº§ç”Ÿä¸€ä¸ªå®Œæ•´ä¸”åŠŸèƒ½å®Œå…¨çš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å…·æœ‰æœ€å¥½çš„source mapï¼Œä½†æ˜¯å®ƒä¼šå‡æ…¢æ‰“åŒ…æ–‡ä»¶çš„æ„å»ºé€Ÿåº¦</p>\n<p>cheap-module-source-map: åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ç”Ÿæˆä¸€ä¸ªä¸å¸¦åˆ—æ˜ å°„çš„mapï¼Œä¸å¸¦åˆ—æ˜ å°„æé«˜é¡¹ç›®æ„å»ºé€Ÿåº¦ï¼Œä½†æ˜¯ä¹Ÿä½¿å¾—æµè§ˆå™¨å¼€å‘è€…å·¥å…·åªèƒ½å¯¹åº”åˆ°å…·ä½“çš„è¡Œï¼Œä¸èƒ½å¯¹åº”åˆ°å…·ä½“çš„åˆ—ï¼ˆç¬¦å·ï¼‰ï¼Œä¼šå¯¹è°ƒè¯•é€ æˆä¸ä¾¿</p>\n<p>eval-source-map: ä½¿ç”¨evalæ‰“åŒ…æºæ–‡ä»¶æ¨¡å—ï¼Œåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆå¹²å‡€çš„å®Œæ•´çš„source mapã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥åœ¨ä¸å½±å“æ„å»ºé€Ÿåº¦çš„å‰æä¸‹ç”Ÿæˆå®Œæ•´çš„sourcemapï¼Œä½†æ˜¯å¯¹æ‰“åŒ…åè¾“å‡ºçš„JSæ–‡ä»¶çš„æ‰§è¡Œå…·æœ‰æ€§èƒ½å’Œå®‰å…¨çš„éšæ‚£ã€‚ä¸è¿‡åœ¨å¼€å‘é˜¶æ®µè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰é¡¹ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§é˜¶æ®µä¸€å®šä¸è¦ç”¨è¿™ä¸ªé€‰é¡¹</p>\n<p>cheap-module-eval-source-map: è¿™æ˜¯åœ¨æ‰“åŒ…æ–‡ä»¶æ—¶æœ€å¿«çš„ç”Ÿæˆsource mapçš„æ–¹æ³•ï¼Œç”Ÿæˆçš„Source Map ä¼šå’Œæ‰“åŒ…åçš„JavaScriptæ–‡ä»¶åŒè¡Œæ˜¾ç¤ºï¼Œæ²¡æœ‰åˆ—æ˜ å°„ï¼Œå’Œeval-source-mapé€‰é¡¹å…·æœ‰ç›¸ä¼¼çš„ç¼ºç‚¹</p>\n</blockquote>\n<h3 id=\"Config\"><a href=\"#Config\" class=\"headerlink\" title=\"Config\"></a>Config</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> webapck = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>)</div><div class=\"line\"><span class=\"keyword\">var</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">'./src/index.js'</span>,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">output</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">path</span>: __dirname + <span class=\"string\">'/public'</span>,</div><div class=\"line\">        <span class=\"attr\">publicPath</span>: <span class=\"string\">'/'</span>,</div><div class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">'bundle.js'</span></div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">module</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">loaders</span>: [</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.json$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'json'</span> &#125;,</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.jsx?$/</span>, <span class=\"attr\">include</span>: <span class=\"string\">'/public/src'</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'babel'</span> &#125;,</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'style!css?redules!postcss'</span> &#125;, <span class=\"comment\">// æ„Ÿå¹å·çš„ä½œç”¨åœ¨äºä½¿åŒä¸€æ–‡ä»¶èƒ½å¤Ÿä½¿ç”¨ä¸åŒç±»å‹çš„loader</span></div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.png$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'url-loader?limit=1024'</span> &#125;,</div><div class=\"line\">            &#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.png$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'url-loader'</span>, <span class=\"attr\">query</span>: &#123; <span class=\"attr\">limit</span>: <span class=\"number\">1024</span> &#125; &#125;,</div><div class=\"line\">            &#123;</div><div class=\"line\">                <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.jsx?$/</span>,</div><div class=\"line\">                <span class=\"attr\">exclude</span>: <span class=\"regexp\">/(node_modules|bower_components)/</span>,</div><div class=\"line\">                <span class=\"attr\">loader</span>: <span class=\"string\">'babel'</span>,</div><div class=\"line\">                <span class=\"attr\">query</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">presets</span>: [<span class=\"string\">'react'</span>, <span class=\"string\">'es2015'</span>]</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        ]</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//.bablerc</span></div><div class=\"line\">    <span class=\"comment\">// &#123;</span></div><div class=\"line\">    <span class=\"comment\">//  \"presets\": [\"react\", \"es2015\"]</span></div><div class=\"line\">    <span class=\"comment\">// &#125;,</span></div><div class=\"line\"></div><div class=\"line\">    resolve: &#123;</div><div class=\"line\">        <span class=\"attr\">extensions</span>: [<span class=\"string\">''</span>, <span class=\"string\">'.js'</span>, <span class=\"string\">'.jsx'</span>]</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">postcss</span>: &#123;</div><div class=\"line\">        <span class=\"built_in\">require</span>(<span class=\"string\">'autoprefixer'</span>)</div><div class=\"line\">    &#125;,</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">plugins</span>: [</div><div class=\"line\">        <span class=\"keyword\">new</span> HtmlWebpackPlugin&#123;</div><div class=\"line\">            <span class=\"attr\">template</span>: <span class=\"string\">'./public/index.template.html'</span>,</div><div class=\"line\">            <span class=\"attr\">inject</span>: <span class=\"literal\">true</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin(),</div><div class=\"line\">    ],</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attr\">devtool</span>: <span class=\"string\">'source-map'</span>,</div><div class=\"line\">    <span class=\"attr\">devServer</span>: &#123;</div><div class=\"line\">        <span class=\"attr\">colors</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">historyApoFailback</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">inLine</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">hot</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">        <span class=\"attr\">contentBase</span>: <span class=\"string\">'./public'</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h6 id=\"Loader\"><a href=\"#Loader\" class=\"headerlink\" title=\"Loader\"></a>Loader</h6><blockquote>\n<p>test: åŒ¹é…loadersæ‰€å¤„ç†æ–‡ä»¶çš„æ‹“å±•åçš„æ­£åˆ™è¡¨è¾¾å¼<br>loader: loaderå<br>include/exclude: æ‰‹åŠ¨æ·»åŠ å¿…é¡»å¤„ç†æˆ–è€…å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶<br>query: ä¸ºloadersæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹</p>\n</blockquote>\n<h6 id=\"DevServer\"><a href=\"#DevServer\" class=\"headerlink\" title=\"DevServer\"></a>DevServer</h6><blockquote>\n<p>contentBase: é»˜è®¤webpack-dev-serverä¼šä¸ºæ ¹æ–‡ä»¶å¤¹æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œå¦‚æœæƒ³ä¸ºå¦å¤–ä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æä¾›æœ¬åœ°æœåŠ¡å™¨ï¼Œåº”è¯¥åœ¨è¿™é‡Œè®¾ç½®å…¶æ‰€åœ¨ç›®å½•ï¼ˆæœ¬ä¾‹è®¾ç½®åˆ°â€œpublicâ€ç›®å½•ï¼‰<br>port: è®¾ç½®é»˜è®¤ç›‘å¬ç«¯å£ï¼Œå¦‚æœçœç•¥ï¼Œé»˜è®¤ä¸ºâ€8080â€œ<br>inline: è®¾ç½®ä¸ºtrueï¼Œå½“æºæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢<br>colors: è®¾ç½®ä¸ºtrueï¼Œä½¿ç»ˆç«¯è¾“å‡ºçš„æ–‡ä»¶ä¸ºå½©è‰²çš„<br>historyApiFallback: åœ¨å¼€å‘å•é¡µåº”ç”¨æ—¶éå¸¸æœ‰ç”¨ï¼Œå®ƒä¾èµ–äºHTML5 history APIï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ‰€æœ‰çš„è·³è½¬å°†æŒ‡å‘index.html</p>\n</blockquote>\n<h3 id=\"Plugin\"><a href=\"#Plugin\" class=\"headerlink\" title=\"Plugin\"></a>Plugin</h3><h6 id=\"PostCSS-autoprefixer\"><a href=\"#PostCSS-autoprefixer\" class=\"headerlink\" title=\"PostCSS + autoprefixer\"></a>PostCSS + autoprefixer</h6> <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">module</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">loaders</span>: [&#123; <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>, <span class=\"attr\">loader</span>: <span class=\"string\">'style!css?modules!postcss'</span> &#125;]</div><div class=\"line\">&#125;,</div><div class=\"line\"><span class=\"attr\">postcss</span>: [</div><div class=\"line\">    <span class=\"built_in\">require</span>(<span class=\"string\">'autoprefixer'</span>)<span class=\"comment\">//è°ƒç”¨autoprefixeræ’ä»¶</span></div><div class=\"line\">],</div></pre></td></tr></table></figure>\n<h6 id=\"webpack-BannerPlugin\"><a href=\"#webpack-BannerPlugin\" class=\"headerlink\" title=\"webpack.BannerPlugin\"></a>webpack.BannerPlugin</h6><blockquote>\n<p>ç‰ˆæƒå£°æ˜æ’ä»¶</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.BannerPlugin(<span class=\"string\">\"Copyright Flying Unicorns inc.\"</span>)<span class=\"comment\">//åœ¨è¿™ä¸ªæ•°ç»„ä¸­newä¸€ä¸ªå°±å¯ä»¥äº†</span></div></pre></td></tr></table></figure>\n<h6 id=\"HtmlWebpackPlugin\"><a href=\"#HtmlWebpackPlugin\" class=\"headerlink\" title=\"HtmlWebpackPlugin\"></a>HtmlWebpackPlugin</h6><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</div><div class=\"line\">    <span class=\"attr\">template</span>: __dirname + <span class=\"string\">\"/app/index.tmpl.html\"</span><span class=\"comment\">//new ä¸€ä¸ªè¿™ä¸ªæ’ä»¶çš„å®ä¾‹ï¼Œå¹¶ä¼ å…¥ç›¸å…³çš„å‚æ•°</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h6 id=\"Hot-Module-Replacement\"><a href=\"#Hot-Module-Replacement\" class=\"headerlink\" title=\"Hot Module Replacement\"></a>Hot Module Replacement</h6><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin()<span class=\"comment\">//çƒ­åŠ è½½æ’ä»¶</span></div><div class=\"line\">devServer: &#123;</div><div class=\"line\">    <span class=\"attr\">colors</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">historyApiFallback</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">inline</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">hot</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h6 id=\"OccurenceOrderPlugin\"><a href=\"#OccurenceOrderPlugin\" class=\"headerlink\" title=\"OccurenceOrderPlugin\"></a>OccurenceOrderPlugin</h6><blockquote>\n<p>ä¸ºç»„ä»¶åˆ†é…IDï¼Œé€šè¿‡è¿™ä¸ªæ’ä»¶webpackå¯ä»¥åˆ†æå’Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æœ€å¤šçš„æ¨¡å—ï¼Œå¹¶ä¸ºå®ƒä»¬åˆ†é…æœ€å°çš„ID</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.optimize.OccurenceOrderPlugin()</div></pre></td></tr></table></figure>\n<h6 id=\"UglifyJsPlugin\"><a href=\"#UglifyJsPlugin\" class=\"headerlink\" title=\"UglifyJsPlugin\"></a>UglifyJsPlugin</h6><blockquote>\n<p>å‹ç¼©JSä»£ç </p>\n</blockquote>\n <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> webpack.optimize.UglifyJsPlugin()</div></pre></td></tr></table></figure>\n<h6 id=\"ExtractTextPlugin\"><a href=\"#ExtractTextPlugin\" class=\"headerlink\" title=\"ExtractTextPlugin\"></a>ExtractTextPlugin</h6><blockquote>\n<p>åˆ†ç¦»CSSå’ŒJSæ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">\"style.css\"</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"Caching\"><a href=\"#Caching\" class=\"headerlink\" title=\"Caching\"></a>Caching</h3><blockquote>\n<p>ç¼“å­˜æ— å¤„ä¸åœ¨ï¼Œä½¿ç”¨ç¼“å­˜çš„æœ€å¥½æ–¹æ³•æ˜¯ä¿è¯ä½ çš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹æ˜¯åŒ¹é…çš„ï¼ˆå†…å®¹æ”¹å˜ï¼Œåç§°ç›¸åº”æ”¹å˜ï¼‰</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">output: &#123;</div><div class=\"line\">   <span class=\"attr\">path</span>: __dirname + <span class=\"string\">\"/build\"</span>,</div><div class=\"line\">   <span class=\"attr\">filename</span>: <span class=\"string\">\"[name]-[hash].js\"</span></div><div class=\"line\">&#125;,</div><div class=\"line\"><span class=\"attr\">plugins</span>: [</div><div class=\"line\">    <span class=\"keyword\">new</span> ExtractTextPlugin(<span class=\"string\">\"[name]-[hash].css\"</span>)</div><div class=\"line\">]</div></pre></td></tr></table></figure>\n<h3 id=\"Code-Splitting\"><a href=\"#Code-Splitting\" class=\"headerlink\" title=\"Code Splitting\"></a>Code Splitting</h3><blockquote>\n<p>Itâ€™s an opt-in feature. You can define split points in your code base. Webpack takes care of the dependencies, output files and runtime stuff.</p>\n</blockquote>\n<h6 id=\"CommonJS-require-ensure\"><a href=\"#CommonJS-require-ensure\" class=\"headerlink\" title=\"CommonJS: require.ensure\"></a>CommonJS: require.ensure</h6><blockquote>\n<p>The require.ensure method ensures that every dependency in dependencies can be synchronously required when calling the callback. callback has no parameter.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// require.ensure only loads the modules, it doesnâ€™t evaluate them</span></div><div class=\"line\"><span class=\"built_in\">require</span>.ensure([<span class=\"string\">\"module-a\"</span>, <span class=\"string\">\"module-b\"</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"built_in\">require</span>(<span class=\"string\">\"module-a\"</span>);</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n</blockquote>\n<h6 id=\"AMD-require\"><a href=\"#AMD-require\" class=\"headerlink\" title=\"AMD: require\"></a>AMD: require</h6><blockquote>\n<p>The AMD spec defines an asynchronous require method with this definition<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">require</span>([<span class=\"string\">\"module-a\"</span>, <span class=\"string\">\"module-b\"</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// ...</span></div><div class=\"line\">&#125;);</div><div class=\"line\"><span class=\"comment\">// Note: AMD require loads and evaluate the modules. In webpack modules are evaluated left to right.</span></div><div class=\"line\"><span class=\"comment\">// Note: Itâ€™s allowed to omit the callback.</span></div></pre></td></tr></table></figure></p>\n</blockquote>\n<h6 id=\"ES6-Modules\"><a href=\"#ES6-Modules\" class=\"headerlink\" title=\"ES6 Modules\"></a>ES6 Modules</h6><blockquote>\n<p>Webpack doesnâ€™t support ES6 modules; use require.ensure or require directly depending on which module format your transpiler creates.<br>Luckily, there is a JavaScript API â€œloaderâ€ specification being written to handle the dynamic use case: System.load (or System.import). This API will be the native equivalent to the above require variations. However, most transpilers do not support converting System.load calls to require.ensure so you have to do that directly if you want to make use of dynamic code splitting.</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//static imports</span></div><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// dynamic imports</span></div><div class=\"line\"><span class=\"built_in\">require</span>.ensure([], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> contacts = <span class=\"built_in\">require</span>(<span class=\"string\">'./contacts'</span>)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h6 id=\"Chunk-content\"><a href=\"#Chunk-content\" class=\"headerlink\" title=\"Chunk content\"></a>Chunk content</h6><blockquote>\n<p>All dependencies at a split point go into a new chunk. Dependencies are also recursively added.<br>If you pass a function expression (or bound function expression) as callback to the split point, webpack automatically puts all dependencies required in this function expression into the chunk too.</p>\n</blockquote>\n<h6 id=\"Chunk-optimization\"><a href=\"#Chunk-optimization\" class=\"headerlink\" title=\"Chunk optimization\"></a>Chunk optimization</h6><blockquote>\n<p>If two chunks contain the same modules, they are merged into one. This can cause chunks to have multiple parents.<br>If a module is available in all parents of a chunk, itâ€™s removed from that chunk.<br>If a chunk contains all modules of another chunk, this is stored. It fulfills multiple chunks.</p>\n</blockquote>\n<h6 id=\"Chunk-loading\"><a href=\"#Chunk-loading\" class=\"headerlink\" title=\"Chunk loading\"></a>Chunk loading</h6><blockquote>\n<p>Depending on the configuration option target a runtime logic for chunk loading is added to the bundle. I. e. for the web target chunks are loaded via jsonp. A chunk is only loaded once and parallel requests are merged into one. The runtime checks for loaded chunks whether they fulfill multiple chunks.</p>\n</blockquote>\n<h6 id=\"Chunk-types\"><a href=\"#Chunk-types\" class=\"headerlink\" title=\"Chunk types\"></a>Chunk types</h6><p>######### Entry chunk</p>\n<blockquote>\n<p>An entry chunk contains the runtime plus a bunch of modules. If the chunk contains the module 0 the runtime executes it. If not, it waits for chunks that contains the module 0 and executes it (every time when there is a chunk with a module 0)</p>\n</blockquote>\n<p>######### Normal chunk</p>\n<blockquote>\n<p>A normal chunk contains no runtime. It only contains a bunch of modules. The structure depends on the chunk loading algorithm. I. e. for jsonp the modules are wrapped in a jsonp callback function. The chunk also contains a list of chunk id that it fulfills.</p>\n</blockquote>\n<p>######### Initial chunk (non-entry)</p>\n<blockquote>\n<p>An initial chunk is a normal chunk. The only difference is that optimization treats it as more important because it counts toward the initial loading time (like entry chunks). That chunk type can occur in combination with the CommonsChunkPlugin.</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">\"webpack\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  <span class=\"attr\">entry</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">app</span>: <span class=\"string\">\"./app.js\"</span>,</div><div class=\"line\">    <span class=\"attr\">vendor</span>: [<span class=\"string\">\"jquery\"</span>, <span class=\"string\">\"underscore\"</span>, ...],</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">output</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">\"bundle.js\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">plugins</span>: [</div><div class=\"line\">    <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(<span class=\"comment\">/* chunkName= */</span><span class=\"string\">\"vendor\"</span>, <span class=\"comment\">/* filename= */</span><span class=\"string\">\"vendor.bundle.js\"</span>)</div><div class=\"line\">  ]</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"comment\">// This will remove all modules in the vendor chunk from the app chunk. The bundle.js will now contain just your app code, without any of its dependencies. These are in vendor.bundle.js.</span></div><div class=\"line\"><span class=\"comment\">// In your HTML page load vendor.bundle.js before bundle.js.</span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"vendor.bundle.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"bundle.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">\"webpack\"</span>);</div><div class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</div><div class=\"line\">  <span class=\"attr\">entry</span>: &#123; <span class=\"attr\">a</span>: <span class=\"string\">\"./a\"</span>, <span class=\"attr\">b</span>: <span class=\"string\">\"./b\"</span> &#125;,</div><div class=\"line\">  <span class=\"attr\">output</span>: &#123; <span class=\"attr\">filename</span>: <span class=\"string\">\"[name].js\"</span> &#125;,</div><div class=\"line\">  <span class=\"attr\">plugins</span>: [ <span class=\"keyword\">new</span> webpack.optimize.CommonsChunkPlugin(<span class=\"string\">\"init.js\"</span>) ]</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">&lt;script src=<span class=\"string\">\"init.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"a.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div><div class=\"line\">&lt;script src=<span class=\"string\">\"b.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></div></pre></td></tr></table></figure>\n<h6 id=\"Optimization\"><a href=\"#Optimization\" class=\"headerlink\" title=\"Optimization\"></a>Optimization</h6><pre><code>* LimitChunkCountPlugin\n* MinChunkSizePlugin\n* AggressiveMergingPlugin\n[Config Plugin List](https://webpack.github.io/docs/list-of-plugins.html){:target=&quot;_blank&quot;}\n</code></pre><p><a href=\"http://www.pro-react.com/materials/appendixA/\" target=\"_blank\" rel=\"external\">http://www.pro-react.com/materials/appendixA/</a><br><a href=\"https://github.com/eyasliu/blog/issues/8\" target=\"_blank\" rel=\"external\">https://github.com/eyasliu/blog/issues/8</a><br><a href=\"http://www.alloyteam.com/2016/02/code-split-by-routes/\" target=\"_blank\" rel=\"external\">http://www.alloyteam.com/2016/02/code-split-by-routes/</a><br><a href=\"http://www.jianshu.com/p/42e11515c10f\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/42e11515c10f</a></p>\n<p><a href=\"https://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9#.m1an35go2\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9#.m1an35go2</a><br><a href=\"https://medium.com/@rajaraodv/why-redux-needs-reducers-to-be-pure-functions-d438c58ae468#.xcb5p2yux\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/why-redux-needs-reducers-to-be-pure-functions-d438c58ae468#.xcb5p2yux</a><br><a href=\"https://medium.com/@rajaraodv/webpacks-hmr-react-hot-loader-the-missing-manual-232336dc0d96#.mxeblxujo\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/webpacks-hmr-react-hot-loader-the-missing-manual-232336dc0d96#.mxeblxujo</a><br><a href=\"https://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07#.bsm92y6nd\" target=\"_blank\" rel=\"external\">https://medium.com/@rajaraodv/webpack-hot-module-replacement-hmr-e756a726a07#.bsm92y6nd</a><br><a href=\"https://medium.freecodecamp.com/5-javascript-bad-parts-that-are-fixed-in-es6-c7c45d44fd81#.jtdaohm3n\" target=\"_blank\" rel=\"external\">https://medium.freecodecamp.com/5-javascript-bad-parts-that-are-fixed-in-es6-c7c45d44fd81#.jtdaohm3n</a></p>\n<p><a href=\"https://gold.xitu.io/post/5842ea76128fe10058a3b4f0\" target=\"_blank\" rel=\"external\">https://gold.xitu.io/post/5842ea76128fe10058a3b4f0</a></p>\n<p><a href=\"https://github.com/gwuhaolin/blog/issues/2\" target=\"_blank\" rel=\"external\">https://github.com/gwuhaolin/blog/issues/2</a></p>\n"},{"layout":"post","title":"Jekyll + Github pages + Travis","subtitle":"Magic","date":"2016-12-05T16:00:00.000Z","author":"Asher","header-img":"post-bg-jekyll.jpg","header-mask":0.3,"catalog":true,"_content":"\n### ä¸ºä»€ä¹ˆæ­å»ºBlog\n\n> æœ€åˆçš„åŸå› æ˜¯åœ¨ç½‘ä¸Šæœç´¢è§£å†³æ–¹æ¡ˆçš„æ—¶å€™ç¢°å·§çœ‹åˆ°äº†ä¸€ä¸ªé¦™æ¸¯å¦¹å­è‡ªå·±çš„åšå®¢\n> [å°ç™½å¦¹å¦¹å†™ä»£ç ](http://sabrinaluo.com/tech/ \"æˆ‘è¿™ä¹ˆå¯çˆ±ä¸€å®šæ˜¯ç”·å­©å­\"){:target=\"_blank\"}ã€‚\n> é£è¶£å¹½é»˜çš„è¡¨è¿°è®©æˆ‘ä¹Ÿæœ‰äº†ä¸€ä¸ªæ­å»ºBlogçš„å†²åŠ¨ã€‚\n> æ‰€ä»¥ä¸€åˆ‡å°±æ­¤å¼€å§‹ã€‚ã€‚ã€‚\n\n### Jekyll\n\nJekyllæ˜¯ä¸€ä¸ªç®€å•çš„å…è´¹çš„Blogç”Ÿæˆå·¥å…·ï¼Œç±»ä¼¼WordPressã€‚ä½†æ˜¯å’ŒWordPressåˆæœ‰å¾ˆå¤§çš„ä¸åŒï¼ŒåŸå› æ˜¯jekyllåªæ˜¯ä¸€ä¸ªç”Ÿæˆé™æ€ç½‘é¡µçš„å·¥å…·ï¼Œä¸éœ€è¦æ•°æ®åº“æ”¯æŒã€‚ä½†æ˜¯å¯ä»¥é…åˆç¬¬ä¸‰æ–¹æœåŠ¡,ä¾‹å¦‚Disqusã€‚æœ€å…³é”®çš„æ˜¯jekyllå¯ä»¥å…è´¹éƒ¨ç½²åœ¨Githubä¸Šï¼Œè€Œä¸”å¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸåã€‚\n\nä¸€ä¸ªæ —å­è§£é‡Šå®‰è£…ï¼š\n\n```javascript\ngem install jekyll //ã€€å®‰è£…jekyll\n\njekyll MyBlog //ã€€æ–°å»ºä¸€ä¸ªç©ºçš„Blogæ¨¡æ¿\n\njekyll server // æ ¹æ®æç¤ºè®¿é—®ç«™ç‚¹\n\n// jekyll server --watch\n// jekyll build\n// jekyll build --watch\n// jekyll clean\n```\n\n#### Jekyll themes\n\næ–°å»ºçš„æ¨¡æ¿ä¸æ˜¯å¾ˆå¥½çœ‹ä½†æ˜¯ç®€ä»‹ï¼Œåˆå­¦è¿™å¯ä»¥å…ˆç”¨æ¥ç»ƒæ‰‹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ¨¡æ¿çš„ç½‘ç«™[JekyllThemes](http://jekyllthemes.org \"Jekyll Theme\"){:target=\"_blank\"}ã€‚\n\n> æ‰¾ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„æ¨¡æ¿è¿›è¡Œæ”¹é€ å§ï½ï½ï½\n\n### Github pages\n\n> ä¹‹å‰åœ¨ç½‘ä¸Šæ‰¾äº†å¥½å¤šèµ„æ–™ã€‚ã€‚ã€‚å…¶å®è®¤çœŸçœ‹çœ‹æ–‡æ¡£ï¼Œä½ å°±ä¼šå‘ç°è¿™ä¸ªå…¶å®éå¸¸ç®€å•ã€‚\n> Githubä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åˆ†æ”¯ `gh-pages`ã€€è¿™ä¸ªåˆ†æ”¯ä¸­çš„ä»£ç githubè‡ªåŠ¨ç”¨æ¥ç”Ÿæˆ Github Pages ç«™ç‚¹ã€‚\n> æ‰€ä»¥ä½ è¦åšçš„å°±æ˜¯å»ºç«‹ä¸€ä¸ªRepository, æ–°å»ºä¸€ä¸ªåˆ†æ”¯ç„¶åpostä»£ç jekyllä¸‹çš„ `_site/` åˆ°è¿™ä¸ªåˆ†æ”¯ã€‚\n> è®¿é—®username.github.io/repositoryå³å¯çœ‹åˆ°ä½ çš„ç½‘ç«™ã€‚\n\n### Travis-ci\n\n> é¦–å…ˆæˆ‘æ‰¿è®¤è‡ªå·±æ˜¯ä¸€ä¸ªæ‡’äººï¼Œæˆ‘ä¸æƒ³æ¯æ¬¡åœ¨å‘å¸ƒåšæ–‡çš„æ—¶å€™è¿˜è¦è¿›è¡Œä¸€æ¬¡`jekyll build`\n> ç„¶åå°†ä»£ç å†`push`åˆ°`gh-pages`ä¸Š. è™½ç„¶è¿‡ç¨‹æ¯”è¾ƒç®€å•, ä½†æ˜¯æ¯æ¬¡éƒ½è¿™æ ·ä¹ŸæŒºçƒ¦äººçš„, æ‰€ä»¥æˆ‘å°±æƒ³è¦ä¸€ä¸ªäº‘ç«¯çš„æŒç»­æ„å»ºå·¥å…·æ¥å¸®æˆ‘å®Œæˆè¿™ä¸ªå·¥ä½œã€‚\n\n[Travic-ci](https://travis-ci.org/){:target=\"_blank\"} çš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ã€‚ç›‘å¬`master`åˆ†æ”¯, å½“æœ‰æ–°`commit`æäº¤çš„æ—¶å€™å°±åœ¨äº‘ç«¯è·‘è„šæœ¬ã€‚å½“ç„¶è¿™é‡Œæ‰€è°“çš„è·‘è„šæœ¬å°±æ˜¯å®Œæˆæˆ‘ä»¬å®‰æ’å¥½çš„æµç¨‹ã€‚\n\nå†æ¥ä¸€ä¸ªæ —å­ï¼š\n\n```javascript\n// é¦–å…ˆä½ è¦æ–°å»ºä¸€ä¸ªGemfileæ–‡ä»¶æ¥å‘Šè¯‰travisåœ¨æ‰§è¡Œè„šæœ¬é’±éœ€è¦å®‰è£…å“ªäº›æ–‡ä»¶ã€‚\n// æˆ‘çš„Gemfileæ–‡ä»¶ï¼š\nsource \"https://rubygems.org\"\n\ngem \"jekyll\"\ngem \"jekyll-paginate\"\n```\n\n----------------------------------------------------------\n\n```javascript\n//ã€€ç„¶åä½ éœ€è¦æœ‰ä¸€ä¸ª.travis.ymlæ–‡ä»¶æ¥å‘Šè¯‰travis-ciä½ éœ€è¦è®©å®ƒå¸®ä½ å®Œæˆä»€ä¹ˆã€‚\n//ã€€æˆ‘çš„Travis-ciæ–‡ä»¶\n\nlanguage: ruby\nrvm:\n- 2.2\nscript:\n- jekyll build --future\nafter_success:\n- rm -rf `ls -a |egrep -v .git| egrep -v _site`\n- mv _site//* .\n- rm -rf _site\n- ls -al\n- git config user.name \"Travis CI\"\n- git config user.email ${EMAIL}\n- git add -A\n- git status\n- git commit -m \"Generated Jekyll site by Travis CI - ${TRAVIS_BUILD_NUMBER}\"\n- git push --force \"https://${DEPLOY_KEY}@${GITHUB_REPO}\" HEAD: ${REPO_TARGET_BRANCH}\nenv:\n  global:\n  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true\n  - GITHUB_REPO: github.com/AsherJia/AsherBlog.git\n  - REPO_TARGET_BRANCH: gh-pages\n\n```\n\nEMAILä»¥åŠDEPLOY_KEYæ˜¯éœ€è¦ç”¨travisæ¥ç”Ÿæˆçš„ï¼Œå¯ä»¥èµ·åˆ°ä¿æŠ¤çš„ä½œç”¨ã€‚\nè¿™ä¸ªè„šæœ¬æ‰€å®Œæˆçš„å°±æ˜¯å½“æœ‰æ–°çš„commitæäº¤ä¸Šæ¥ä»¥åï¼Œæ‰§è¡Œjekyll buildã€‚\nå°†ç”Ÿæˆçš„_site/ä¸‹çš„æ–‡ä»¶pushåˆ°gh-pagesåˆ†æ”¯ä¸Šã€‚\n\n\n```javascript\ngem install travis\n\n$ travis encrypt EMAIL=medomain.com --add\n\n$ travis encrypt DEPLOY_KEY=token --add //è¿™ä¸ªtokenéœ€è¦åˆ°githubä¸Šç”Ÿæˆã€‚\n```\n\n----------------------------------------------------------\n\næ¨èä¸€ç¯‡åšæ–‡[Jekyll + Github pages + Travis CI, sitting in a tree](http://nick-dunn.co.uk/blog/jekyll-github-travis-ci-sitting-in-a-tree/){:target=\"_blank\"}ï¼Œã€€æˆ‘åœ¨åˆšå¼€å§‹çš„æ—¶å€™å°±æ˜¯æ ¹æ®è¿™ç¯‡æ–‡ç« æ¥å­¦ä¹ çš„ã€‚\n\nç»“æŸäº†ï¼Œï¼Œï¼Œèƒ½çœ‹åˆ°è¿™ç¯‡æ–‡ç« æˆ‘ç›¸ä¿¡ä½ å·²ç»çŸ¥é“æˆ‘çš„åšå®¢äº†ã€‚\n\n> ä¸€ä¸ªç®€å•çš„åŸå› ï¼Œç”šè‡³ä»é€»è¾‘ä¸Šè¯´ä¸é€šï¼Œä½†æ˜¯æˆ‘çš„åšå®¢å› æ­¤è¯ç”Ÿã€‚\n> Later equals never.\n","source":"_posts/2016-12-06-jekyll-github-page-travis-ci.markdown","raw":"---\nlayout:     post\ntitle:      \"Jekyll + Github pages + Travis\"\nsubtitle:   \"Magic\"\ndate:       2016-12-06\nauthor:     \"Asher\"\nheader-img: \"post-bg-jekyll.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Jekyll\n---\n\n### ä¸ºä»€ä¹ˆæ­å»ºBlog\n\n> æœ€åˆçš„åŸå› æ˜¯åœ¨ç½‘ä¸Šæœç´¢è§£å†³æ–¹æ¡ˆçš„æ—¶å€™ç¢°å·§çœ‹åˆ°äº†ä¸€ä¸ªé¦™æ¸¯å¦¹å­è‡ªå·±çš„åšå®¢\n> [å°ç™½å¦¹å¦¹å†™ä»£ç ](http://sabrinaluo.com/tech/ \"æˆ‘è¿™ä¹ˆå¯çˆ±ä¸€å®šæ˜¯ç”·å­©å­\"){:target=\"_blank\"}ã€‚\n> é£è¶£å¹½é»˜çš„è¡¨è¿°è®©æˆ‘ä¹Ÿæœ‰äº†ä¸€ä¸ªæ­å»ºBlogçš„å†²åŠ¨ã€‚\n> æ‰€ä»¥ä¸€åˆ‡å°±æ­¤å¼€å§‹ã€‚ã€‚ã€‚\n\n### Jekyll\n\nJekyllæ˜¯ä¸€ä¸ªç®€å•çš„å…è´¹çš„Blogç”Ÿæˆå·¥å…·ï¼Œç±»ä¼¼WordPressã€‚ä½†æ˜¯å’ŒWordPressåˆæœ‰å¾ˆå¤§çš„ä¸åŒï¼ŒåŸå› æ˜¯jekyllåªæ˜¯ä¸€ä¸ªç”Ÿæˆé™æ€ç½‘é¡µçš„å·¥å…·ï¼Œä¸éœ€è¦æ•°æ®åº“æ”¯æŒã€‚ä½†æ˜¯å¯ä»¥é…åˆç¬¬ä¸‰æ–¹æœåŠ¡,ä¾‹å¦‚Disqusã€‚æœ€å…³é”®çš„æ˜¯jekyllå¯ä»¥å…è´¹éƒ¨ç½²åœ¨Githubä¸Šï¼Œè€Œä¸”å¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸåã€‚\n\nä¸€ä¸ªæ —å­è§£é‡Šå®‰è£…ï¼š\n\n```javascript\ngem install jekyll //ã€€å®‰è£…jekyll\n\njekyll MyBlog //ã€€æ–°å»ºä¸€ä¸ªç©ºçš„Blogæ¨¡æ¿\n\njekyll server // æ ¹æ®æç¤ºè®¿é—®ç«™ç‚¹\n\n// jekyll server --watch\n// jekyll build\n// jekyll build --watch\n// jekyll clean\n```\n\n#### Jekyll themes\n\næ–°å»ºçš„æ¨¡æ¿ä¸æ˜¯å¾ˆå¥½çœ‹ä½†æ˜¯ç®€ä»‹ï¼Œåˆå­¦è¿™å¯ä»¥å…ˆç”¨æ¥ç»ƒæ‰‹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ¨¡æ¿çš„ç½‘ç«™[JekyllThemes](http://jekyllthemes.org \"Jekyll Theme\"){:target=\"_blank\"}ã€‚\n\n> æ‰¾ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„æ¨¡æ¿è¿›è¡Œæ”¹é€ å§ï½ï½ï½\n\n### Github pages\n\n> ä¹‹å‰åœ¨ç½‘ä¸Šæ‰¾äº†å¥½å¤šèµ„æ–™ã€‚ã€‚ã€‚å…¶å®è®¤çœŸçœ‹çœ‹æ–‡æ¡£ï¼Œä½ å°±ä¼šå‘ç°è¿™ä¸ªå…¶å®éå¸¸ç®€å•ã€‚\n> Githubä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åˆ†æ”¯ `gh-pages`ã€€è¿™ä¸ªåˆ†æ”¯ä¸­çš„ä»£ç githubè‡ªåŠ¨ç”¨æ¥ç”Ÿæˆ Github Pages ç«™ç‚¹ã€‚\n> æ‰€ä»¥ä½ è¦åšçš„å°±æ˜¯å»ºç«‹ä¸€ä¸ªRepository, æ–°å»ºä¸€ä¸ªåˆ†æ”¯ç„¶åpostä»£ç jekyllä¸‹çš„ `_site/` åˆ°è¿™ä¸ªåˆ†æ”¯ã€‚\n> è®¿é—®username.github.io/repositoryå³å¯çœ‹åˆ°ä½ çš„ç½‘ç«™ã€‚\n\n### Travis-ci\n\n> é¦–å…ˆæˆ‘æ‰¿è®¤è‡ªå·±æ˜¯ä¸€ä¸ªæ‡’äººï¼Œæˆ‘ä¸æƒ³æ¯æ¬¡åœ¨å‘å¸ƒåšæ–‡çš„æ—¶å€™è¿˜è¦è¿›è¡Œä¸€æ¬¡`jekyll build`\n> ç„¶åå°†ä»£ç å†`push`åˆ°`gh-pages`ä¸Š. è™½ç„¶è¿‡ç¨‹æ¯”è¾ƒç®€å•, ä½†æ˜¯æ¯æ¬¡éƒ½è¿™æ ·ä¹ŸæŒºçƒ¦äººçš„, æ‰€ä»¥æˆ‘å°±æƒ³è¦ä¸€ä¸ªäº‘ç«¯çš„æŒç»­æ„å»ºå·¥å…·æ¥å¸®æˆ‘å®Œæˆè¿™ä¸ªå·¥ä½œã€‚\n\n[Travic-ci](https://travis-ci.org/){:target=\"_blank\"} çš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ã€‚ç›‘å¬`master`åˆ†æ”¯, å½“æœ‰æ–°`commit`æäº¤çš„æ—¶å€™å°±åœ¨äº‘ç«¯è·‘è„šæœ¬ã€‚å½“ç„¶è¿™é‡Œæ‰€è°“çš„è·‘è„šæœ¬å°±æ˜¯å®Œæˆæˆ‘ä»¬å®‰æ’å¥½çš„æµç¨‹ã€‚\n\nå†æ¥ä¸€ä¸ªæ —å­ï¼š\n\n```javascript\n// é¦–å…ˆä½ è¦æ–°å»ºä¸€ä¸ªGemfileæ–‡ä»¶æ¥å‘Šè¯‰travisåœ¨æ‰§è¡Œè„šæœ¬é’±éœ€è¦å®‰è£…å“ªäº›æ–‡ä»¶ã€‚\n// æˆ‘çš„Gemfileæ–‡ä»¶ï¼š\nsource \"https://rubygems.org\"\n\ngem \"jekyll\"\ngem \"jekyll-paginate\"\n```\n\n----------------------------------------------------------\n\n```javascript\n//ã€€ç„¶åä½ éœ€è¦æœ‰ä¸€ä¸ª.travis.ymlæ–‡ä»¶æ¥å‘Šè¯‰travis-ciä½ éœ€è¦è®©å®ƒå¸®ä½ å®Œæˆä»€ä¹ˆã€‚\n//ã€€æˆ‘çš„Travis-ciæ–‡ä»¶\n\nlanguage: ruby\nrvm:\n- 2.2\nscript:\n- jekyll build --future\nafter_success:\n- rm -rf `ls -a |egrep -v .git| egrep -v _site`\n- mv _site//* .\n- rm -rf _site\n- ls -al\n- git config user.name \"Travis CI\"\n- git config user.email ${EMAIL}\n- git add -A\n- git status\n- git commit -m \"Generated Jekyll site by Travis CI - ${TRAVIS_BUILD_NUMBER}\"\n- git push --force \"https://${DEPLOY_KEY}@${GITHUB_REPO}\" HEAD: ${REPO_TARGET_BRANCH}\nenv:\n  global:\n  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true\n  - GITHUB_REPO: github.com/AsherJia/AsherBlog.git\n  - REPO_TARGET_BRANCH: gh-pages\n\n```\n\nEMAILä»¥åŠDEPLOY_KEYæ˜¯éœ€è¦ç”¨travisæ¥ç”Ÿæˆçš„ï¼Œå¯ä»¥èµ·åˆ°ä¿æŠ¤çš„ä½œç”¨ã€‚\nè¿™ä¸ªè„šæœ¬æ‰€å®Œæˆçš„å°±æ˜¯å½“æœ‰æ–°çš„commitæäº¤ä¸Šæ¥ä»¥åï¼Œæ‰§è¡Œjekyll buildã€‚\nå°†ç”Ÿæˆçš„_site/ä¸‹çš„æ–‡ä»¶pushåˆ°gh-pagesåˆ†æ”¯ä¸Šã€‚\n\n\n```javascript\ngem install travis\n\n$ travis encrypt EMAIL=medomain.com --add\n\n$ travis encrypt DEPLOY_KEY=token --add //è¿™ä¸ªtokenéœ€è¦åˆ°githubä¸Šç”Ÿæˆã€‚\n```\n\n----------------------------------------------------------\n\næ¨èä¸€ç¯‡åšæ–‡[Jekyll + Github pages + Travis CI, sitting in a tree](http://nick-dunn.co.uk/blog/jekyll-github-travis-ci-sitting-in-a-tree/){:target=\"_blank\"}ï¼Œã€€æˆ‘åœ¨åˆšå¼€å§‹çš„æ—¶å€™å°±æ˜¯æ ¹æ®è¿™ç¯‡æ–‡ç« æ¥å­¦ä¹ çš„ã€‚\n\nç»“æŸäº†ï¼Œï¼Œï¼Œèƒ½çœ‹åˆ°è¿™ç¯‡æ–‡ç« æˆ‘ç›¸ä¿¡ä½ å·²ç»çŸ¥é“æˆ‘çš„åšå®¢äº†ã€‚\n\n> ä¸€ä¸ªç®€å•çš„åŸå› ï¼Œç”šè‡³ä»é€»è¾‘ä¸Šè¯´ä¸é€šï¼Œä½†æ˜¯æˆ‘çš„åšå®¢å› æ­¤è¯ç”Ÿã€‚\n> Later equals never.\n","slug":"2016-12-06-jekyll-github-page-travis-ci","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhx4000pmmt7e7kpqwkg","content":"<h3 id=\"ä¸ºä»€ä¹ˆæ­å»ºBlog\"><a href=\"#ä¸ºä»€ä¹ˆæ­å»ºBlog\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆæ­å»ºBlog\"></a>ä¸ºä»€ä¹ˆæ­å»ºBlog</h3><blockquote>\n<p>æœ€åˆçš„åŸå› æ˜¯åœ¨ç½‘ä¸Šæœç´¢è§£å†³æ–¹æ¡ˆçš„æ—¶å€™ç¢°å·§çœ‹åˆ°äº†ä¸€ä¸ªé¦™æ¸¯å¦¹å­è‡ªå·±çš„åšå®¢<br><a href=\"http://sabrinaluo.com/tech/\" title=\"æˆ‘è¿™ä¹ˆå¯çˆ±ä¸€å®šæ˜¯ç”·å­©å­\" target=\"_blank\" rel=\"external\">å°ç™½å¦¹å¦¹å†™ä»£ç </a>{:target=â€_blankâ€}ã€‚<br>é£è¶£å¹½é»˜çš„è¡¨è¿°è®©æˆ‘ä¹Ÿæœ‰äº†ä¸€ä¸ªæ­å»ºBlogçš„å†²åŠ¨ã€‚<br>æ‰€ä»¥ä¸€åˆ‡å°±æ­¤å¼€å§‹ã€‚ã€‚ã€‚</p>\n</blockquote>\n<h3 id=\"Jekyll\"><a href=\"#Jekyll\" class=\"headerlink\" title=\"Jekyll\"></a>Jekyll</h3><p>Jekyllæ˜¯ä¸€ä¸ªç®€å•çš„å…è´¹çš„Blogç”Ÿæˆå·¥å…·ï¼Œç±»ä¼¼WordPressã€‚ä½†æ˜¯å’ŒWordPressåˆæœ‰å¾ˆå¤§çš„ä¸åŒï¼ŒåŸå› æ˜¯jekyllåªæ˜¯ä¸€ä¸ªç”Ÿæˆé™æ€ç½‘é¡µçš„å·¥å…·ï¼Œä¸éœ€è¦æ•°æ®åº“æ”¯æŒã€‚ä½†æ˜¯å¯ä»¥é…åˆç¬¬ä¸‰æ–¹æœåŠ¡,ä¾‹å¦‚Disqusã€‚æœ€å…³é”®çš„æ˜¯jekyllå¯ä»¥å…è´¹éƒ¨ç½²åœ¨Githubä¸Šï¼Œè€Œä¸”å¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸåã€‚</p>\n<p>ä¸€ä¸ªæ —å­è§£é‡Šå®‰è£…ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem install jekyll <span class=\"comment\">//ã€€å®‰è£…jekyll</span></div><div class=\"line\"></div><div class=\"line\">jekyll MyBlog <span class=\"comment\">//ã€€æ–°å»ºä¸€ä¸ªç©ºçš„Blogæ¨¡æ¿</span></div><div class=\"line\"></div><div class=\"line\">jekyll server <span class=\"comment\">// æ ¹æ®æç¤ºè®¿é—®ç«™ç‚¹</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// jekyll server --watch</span></div><div class=\"line\"><span class=\"comment\">// jekyll build</span></div><div class=\"line\"><span class=\"comment\">// jekyll build --watch</span></div><div class=\"line\"><span class=\"comment\">// jekyll clean</span></div></pre></td></tr></table></figure>\n<h4 id=\"Jekyll-themes\"><a href=\"#Jekyll-themes\" class=\"headerlink\" title=\"Jekyll themes\"></a>Jekyll themes</h4><p>æ–°å»ºçš„æ¨¡æ¿ä¸æ˜¯å¾ˆå¥½çœ‹ä½†æ˜¯ç®€ä»‹ï¼Œåˆå­¦è¿™å¯ä»¥å…ˆç”¨æ¥ç»ƒæ‰‹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ¨¡æ¿çš„ç½‘ç«™<a href=\"http://jekyllthemes.org\" title=\"Jekyll Theme\" target=\"_blank\" rel=\"external\">JekyllThemes</a>{:target=â€_blankâ€}ã€‚</p>\n<blockquote>\n<p>æ‰¾ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„æ¨¡æ¿è¿›è¡Œæ”¹é€ å§ï½ï½ï½</p>\n</blockquote>\n<h3 id=\"Github-pages\"><a href=\"#Github-pages\" class=\"headerlink\" title=\"Github pages\"></a>Github pages</h3><blockquote>\n<p>ä¹‹å‰åœ¨ç½‘ä¸Šæ‰¾äº†å¥½å¤šèµ„æ–™ã€‚ã€‚ã€‚å…¶å®è®¤çœŸçœ‹çœ‹æ–‡æ¡£ï¼Œä½ å°±ä¼šå‘ç°è¿™ä¸ªå…¶å®éå¸¸ç®€å•ã€‚<br>Githubä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åˆ†æ”¯ <code>gh-pages</code>ã€€è¿™ä¸ªåˆ†æ”¯ä¸­çš„ä»£ç githubè‡ªåŠ¨ç”¨æ¥ç”Ÿæˆ Github Pages ç«™ç‚¹ã€‚<br>æ‰€ä»¥ä½ è¦åšçš„å°±æ˜¯å»ºç«‹ä¸€ä¸ªRepository, æ–°å»ºä¸€ä¸ªåˆ†æ”¯ç„¶åpostä»£ç jekyllä¸‹çš„ <code>_site/</code> åˆ°è¿™ä¸ªåˆ†æ”¯ã€‚<br>è®¿é—®username.github.io/repositoryå³å¯çœ‹åˆ°ä½ çš„ç½‘ç«™ã€‚</p>\n</blockquote>\n<h3 id=\"Travis-ci\"><a href=\"#Travis-ci\" class=\"headerlink\" title=\"Travis-ci\"></a>Travis-ci</h3><blockquote>\n<p>é¦–å…ˆæˆ‘æ‰¿è®¤è‡ªå·±æ˜¯ä¸€ä¸ªæ‡’äººï¼Œæˆ‘ä¸æƒ³æ¯æ¬¡åœ¨å‘å¸ƒåšæ–‡çš„æ—¶å€™è¿˜è¦è¿›è¡Œä¸€æ¬¡<code>jekyll build</code><br>ç„¶åå°†ä»£ç å†<code>push</code>åˆ°<code>gh-pages</code>ä¸Š. è™½ç„¶è¿‡ç¨‹æ¯”è¾ƒç®€å•, ä½†æ˜¯æ¯æ¬¡éƒ½è¿™æ ·ä¹ŸæŒºçƒ¦äººçš„, æ‰€ä»¥æˆ‘å°±æƒ³è¦ä¸€ä¸ªäº‘ç«¯çš„æŒç»­æ„å»ºå·¥å…·æ¥å¸®æˆ‘å®Œæˆè¿™ä¸ªå·¥ä½œã€‚</p>\n</blockquote>\n<p><a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"external\">Travic-ci</a>{:target=â€_blankâ€} çš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ã€‚ç›‘å¬<code>master</code>åˆ†æ”¯, å½“æœ‰æ–°<code>commit</code>æäº¤çš„æ—¶å€™å°±åœ¨äº‘ç«¯è·‘è„šæœ¬ã€‚å½“ç„¶è¿™é‡Œæ‰€è°“çš„è·‘è„šæœ¬å°±æ˜¯å®Œæˆæˆ‘ä»¬å®‰æ’å¥½çš„æµç¨‹ã€‚</p>\n<p>å†æ¥ä¸€ä¸ªæ —å­ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// é¦–å…ˆä½ è¦æ–°å»ºä¸€ä¸ªGemfileæ–‡ä»¶æ¥å‘Šè¯‰travisåœ¨æ‰§è¡Œè„šæœ¬é’±éœ€è¦å®‰è£…å“ªäº›æ–‡ä»¶ã€‚</span></div><div class=\"line\"><span class=\"comment\">// æˆ‘çš„Gemfileæ–‡ä»¶ï¼š</span></div><div class=\"line\">source <span class=\"string\">\"https://rubygems.org\"</span></div><div class=\"line\"></div><div class=\"line\">gem <span class=\"string\">\"jekyll\"</span></div><div class=\"line\">gem <span class=\"string\">\"jekyll-paginate\"</span></div></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//ã€€ç„¶åä½ éœ€è¦æœ‰ä¸€ä¸ª.travis.ymlæ–‡ä»¶æ¥å‘Šè¯‰travis-ciä½ éœ€è¦è®©å®ƒå¸®ä½ å®Œæˆä»€ä¹ˆã€‚</span></div><div class=\"line\"><span class=\"comment\">//ã€€æˆ‘çš„Travis-ciæ–‡ä»¶</span></div><div class=\"line\"></div><div class=\"line\">language: ruby</div><div class=\"line\">rvm:</div><div class=\"line\">- <span class=\"number\">2.2</span></div><div class=\"line\">script:</div><div class=\"line\">- jekyll build --future</div><div class=\"line\">after_success:</div><div class=\"line\">- rm -rf <span class=\"string\">`ls -a |egrep -v .git| egrep -v _site`</span></div><div class=\"line\">- mv _site<span class=\"comment\">//* .</span></div><div class=\"line\">- rm -rf _site</div><div class=\"line\">- ls -al</div><div class=\"line\">- git config user.name <span class=\"string\">\"Travis CI\"</span></div><div class=\"line\">- git config user.email $&#123;EMAIL&#125;</div><div class=\"line\">- git add -A</div><div class=\"line\">- git status</div><div class=\"line\">- git commit -m <span class=\"string\">\"Generated Jekyll site by Travis CI - $&#123;TRAVIS_BUILD_NUMBER&#125;\"</span></div><div class=\"line\">- git push --force <span class=\"string\">\"https://$&#123;DEPLOY_KEY&#125;@$&#123;GITHUB_REPO&#125;\"</span> HEAD: $&#123;REPO_TARGET_BRANCH&#125;</div><div class=\"line\">env:</div><div class=\"line\">  global:</div><div class=\"line\">  - NOKOGIRI_USE_SYSTEM_LIBRARIES=<span class=\"literal\">true</span></div><div class=\"line\">  - GITHUB_REPO: github.com/AsherJia/AsherBlog.git</div><div class=\"line\">  - REPO_TARGET_BRANCH: gh-pages</div></pre></td></tr></table></figure>\n<p>EMAILä»¥åŠDEPLOY_KEYæ˜¯éœ€è¦ç”¨travisæ¥ç”Ÿæˆçš„ï¼Œå¯ä»¥èµ·åˆ°ä¿æŠ¤çš„ä½œç”¨ã€‚<br>è¿™ä¸ªè„šæœ¬æ‰€å®Œæˆçš„å°±æ˜¯å½“æœ‰æ–°çš„commitæäº¤ä¸Šæ¥ä»¥åï¼Œæ‰§è¡Œjekyll buildã€‚<br>å°†ç”Ÿæˆçš„_site/ä¸‹çš„æ–‡ä»¶pushåˆ°gh-pagesåˆ†æ”¯ä¸Šã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem install travis</div><div class=\"line\"></div><div class=\"line\">$ travis encrypt EMAIL=medomain.com --add</div><div class=\"line\"></div><div class=\"line\">$ travis encrypt DEPLOY_KEY=token --add <span class=\"comment\">//è¿™ä¸ªtokenéœ€è¦åˆ°githubä¸Šç”Ÿæˆã€‚</span></div></pre></td></tr></table></figure>\n<hr>\n<p>æ¨èä¸€ç¯‡åšæ–‡<a href=\"http://nick-dunn.co.uk/blog/jekyll-github-travis-ci-sitting-in-a-tree/\" target=\"_blank\" rel=\"external\">Jekyll + Github pages + Travis CI, sitting in a tree</a>{:target=â€_blankâ€}ï¼Œã€€æˆ‘åœ¨åˆšå¼€å§‹çš„æ—¶å€™å°±æ˜¯æ ¹æ®è¿™ç¯‡æ–‡ç« æ¥å­¦ä¹ çš„ã€‚</p>\n<p>ç»“æŸäº†ï¼Œï¼Œï¼Œèƒ½çœ‹åˆ°è¿™ç¯‡æ–‡ç« æˆ‘ç›¸ä¿¡ä½ å·²ç»çŸ¥é“æˆ‘çš„åšå®¢äº†ã€‚</p>\n<blockquote>\n<p>ä¸€ä¸ªç®€å•çš„åŸå› ï¼Œç”šè‡³ä»é€»è¾‘ä¸Šè¯´ä¸é€šï¼Œä½†æ˜¯æˆ‘çš„åšå®¢å› æ­¤è¯ç”Ÿã€‚<br>Later equals never.</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"ä¸ºä»€ä¹ˆæ­å»ºBlog\"><a href=\"#ä¸ºä»€ä¹ˆæ­å»ºBlog\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆæ­å»ºBlog\"></a>ä¸ºä»€ä¹ˆæ­å»ºBlog</h3><blockquote>\n<p>æœ€åˆçš„åŸå› æ˜¯åœ¨ç½‘ä¸Šæœç´¢è§£å†³æ–¹æ¡ˆçš„æ—¶å€™ç¢°å·§çœ‹åˆ°äº†ä¸€ä¸ªé¦™æ¸¯å¦¹å­è‡ªå·±çš„åšå®¢<br><a href=\"http://sabrinaluo.com/tech/\" title=\"æˆ‘è¿™ä¹ˆå¯çˆ±ä¸€å®šæ˜¯ç”·å­©å­\" target=\"_blank\" rel=\"external\">å°ç™½å¦¹å¦¹å†™ä»£ç </a>{:target=â€_blankâ€}ã€‚<br>é£è¶£å¹½é»˜çš„è¡¨è¿°è®©æˆ‘ä¹Ÿæœ‰äº†ä¸€ä¸ªæ­å»ºBlogçš„å†²åŠ¨ã€‚<br>æ‰€ä»¥ä¸€åˆ‡å°±æ­¤å¼€å§‹ã€‚ã€‚ã€‚</p>\n</blockquote>\n<h3 id=\"Jekyll\"><a href=\"#Jekyll\" class=\"headerlink\" title=\"Jekyll\"></a>Jekyll</h3><p>Jekyllæ˜¯ä¸€ä¸ªç®€å•çš„å…è´¹çš„Blogç”Ÿæˆå·¥å…·ï¼Œç±»ä¼¼WordPressã€‚ä½†æ˜¯å’ŒWordPressåˆæœ‰å¾ˆå¤§çš„ä¸åŒï¼ŒåŸå› æ˜¯jekyllåªæ˜¯ä¸€ä¸ªç”Ÿæˆé™æ€ç½‘é¡µçš„å·¥å…·ï¼Œä¸éœ€è¦æ•°æ®åº“æ”¯æŒã€‚ä½†æ˜¯å¯ä»¥é…åˆç¬¬ä¸‰æ–¹æœåŠ¡,ä¾‹å¦‚Disqusã€‚æœ€å…³é”®çš„æ˜¯jekyllå¯ä»¥å…è´¹éƒ¨ç½²åœ¨Githubä¸Šï¼Œè€Œä¸”å¯ä»¥ç»‘å®šè‡ªå·±çš„åŸŸåã€‚</p>\n<p>ä¸€ä¸ªæ —å­è§£é‡Šå®‰è£…ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem install jekyll <span class=\"comment\">//ã€€å®‰è£…jekyll</span></div><div class=\"line\"></div><div class=\"line\">jekyll MyBlog <span class=\"comment\">//ã€€æ–°å»ºä¸€ä¸ªç©ºçš„Blogæ¨¡æ¿</span></div><div class=\"line\"></div><div class=\"line\">jekyll server <span class=\"comment\">// æ ¹æ®æç¤ºè®¿é—®ç«™ç‚¹</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// jekyll server --watch</span></div><div class=\"line\"><span class=\"comment\">// jekyll build</span></div><div class=\"line\"><span class=\"comment\">// jekyll build --watch</span></div><div class=\"line\"><span class=\"comment\">// jekyll clean</span></div></pre></td></tr></table></figure>\n<h4 id=\"Jekyll-themes\"><a href=\"#Jekyll-themes\" class=\"headerlink\" title=\"Jekyll themes\"></a>Jekyll themes</h4><p>æ–°å»ºçš„æ¨¡æ¿ä¸æ˜¯å¾ˆå¥½çœ‹ä½†æ˜¯ç®€ä»‹ï¼Œåˆå­¦è¿™å¯ä»¥å…ˆç”¨æ¥ç»ƒæ‰‹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªæ¨¡æ¿çš„ç½‘ç«™<a href=\"http://jekyllthemes.org\" title=\"Jekyll Theme\" target=\"_blank\" rel=\"external\">JekyllThemes</a>{:target=â€_blankâ€}ã€‚</p>\n<blockquote>\n<p>æ‰¾ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„æ¨¡æ¿è¿›è¡Œæ”¹é€ å§ï½ï½ï½</p>\n</blockquote>\n<h3 id=\"Github-pages\"><a href=\"#Github-pages\" class=\"headerlink\" title=\"Github pages\"></a>Github pages</h3><blockquote>\n<p>ä¹‹å‰åœ¨ç½‘ä¸Šæ‰¾äº†å¥½å¤šèµ„æ–™ã€‚ã€‚ã€‚å…¶å®è®¤çœŸçœ‹çœ‹æ–‡æ¡£ï¼Œä½ å°±ä¼šå‘ç°è¿™ä¸ªå…¶å®éå¸¸ç®€å•ã€‚<br>Githubä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åˆ†æ”¯ <code>gh-pages</code>ã€€è¿™ä¸ªåˆ†æ”¯ä¸­çš„ä»£ç githubè‡ªåŠ¨ç”¨æ¥ç”Ÿæˆ Github Pages ç«™ç‚¹ã€‚<br>æ‰€ä»¥ä½ è¦åšçš„å°±æ˜¯å»ºç«‹ä¸€ä¸ªRepository, æ–°å»ºä¸€ä¸ªåˆ†æ”¯ç„¶åpostä»£ç jekyllä¸‹çš„ <code>_site/</code> åˆ°è¿™ä¸ªåˆ†æ”¯ã€‚<br>è®¿é—®username.github.io/repositoryå³å¯çœ‹åˆ°ä½ çš„ç½‘ç«™ã€‚</p>\n</blockquote>\n<h3 id=\"Travis-ci\"><a href=\"#Travis-ci\" class=\"headerlink\" title=\"Travis-ci\"></a>Travis-ci</h3><blockquote>\n<p>é¦–å…ˆæˆ‘æ‰¿è®¤è‡ªå·±æ˜¯ä¸€ä¸ªæ‡’äººï¼Œæˆ‘ä¸æƒ³æ¯æ¬¡åœ¨å‘å¸ƒåšæ–‡çš„æ—¶å€™è¿˜è¦è¿›è¡Œä¸€æ¬¡<code>jekyll build</code><br>ç„¶åå°†ä»£ç å†<code>push</code>åˆ°<code>gh-pages</code>ä¸Š. è™½ç„¶è¿‡ç¨‹æ¯”è¾ƒç®€å•, ä½†æ˜¯æ¯æ¬¡éƒ½è¿™æ ·ä¹ŸæŒºçƒ¦äººçš„, æ‰€ä»¥æˆ‘å°±æƒ³è¦ä¸€ä¸ªäº‘ç«¯çš„æŒç»­æ„å»ºå·¥å…·æ¥å¸®æˆ‘å®Œæˆè¿™ä¸ªå·¥ä½œã€‚</p>\n</blockquote>\n<p><a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"external\">Travic-ci</a>{:target=â€_blankâ€} çš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ã€‚ç›‘å¬<code>master</code>åˆ†æ”¯, å½“æœ‰æ–°<code>commit</code>æäº¤çš„æ—¶å€™å°±åœ¨äº‘ç«¯è·‘è„šæœ¬ã€‚å½“ç„¶è¿™é‡Œæ‰€è°“çš„è·‘è„šæœ¬å°±æ˜¯å®Œæˆæˆ‘ä»¬å®‰æ’å¥½çš„æµç¨‹ã€‚</p>\n<p>å†æ¥ä¸€ä¸ªæ —å­ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// é¦–å…ˆä½ è¦æ–°å»ºä¸€ä¸ªGemfileæ–‡ä»¶æ¥å‘Šè¯‰travisåœ¨æ‰§è¡Œè„šæœ¬é’±éœ€è¦å®‰è£…å“ªäº›æ–‡ä»¶ã€‚</span></div><div class=\"line\"><span class=\"comment\">// æˆ‘çš„Gemfileæ–‡ä»¶ï¼š</span></div><div class=\"line\">source <span class=\"string\">\"https://rubygems.org\"</span></div><div class=\"line\"></div><div class=\"line\">gem <span class=\"string\">\"jekyll\"</span></div><div class=\"line\">gem <span class=\"string\">\"jekyll-paginate\"</span></div></pre></td></tr></table></figure>\n<hr>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//ã€€ç„¶åä½ éœ€è¦æœ‰ä¸€ä¸ª.travis.ymlæ–‡ä»¶æ¥å‘Šè¯‰travis-ciä½ éœ€è¦è®©å®ƒå¸®ä½ å®Œæˆä»€ä¹ˆã€‚</span></div><div class=\"line\"><span class=\"comment\">//ã€€æˆ‘çš„Travis-ciæ–‡ä»¶</span></div><div class=\"line\"></div><div class=\"line\">language: ruby</div><div class=\"line\">rvm:</div><div class=\"line\">- <span class=\"number\">2.2</span></div><div class=\"line\">script:</div><div class=\"line\">- jekyll build --future</div><div class=\"line\">after_success:</div><div class=\"line\">- rm -rf <span class=\"string\">`ls -a |egrep -v .git| egrep -v _site`</span></div><div class=\"line\">- mv _site<span class=\"comment\">//* .</span></div><div class=\"line\">- rm -rf _site</div><div class=\"line\">- ls -al</div><div class=\"line\">- git config user.name <span class=\"string\">\"Travis CI\"</span></div><div class=\"line\">- git config user.email $&#123;EMAIL&#125;</div><div class=\"line\">- git add -A</div><div class=\"line\">- git status</div><div class=\"line\">- git commit -m <span class=\"string\">\"Generated Jekyll site by Travis CI - $&#123;TRAVIS_BUILD_NUMBER&#125;\"</span></div><div class=\"line\">- git push --force <span class=\"string\">\"https://$&#123;DEPLOY_KEY&#125;@$&#123;GITHUB_REPO&#125;\"</span> HEAD: $&#123;REPO_TARGET_BRANCH&#125;</div><div class=\"line\">env:</div><div class=\"line\">  global:</div><div class=\"line\">  - NOKOGIRI_USE_SYSTEM_LIBRARIES=<span class=\"literal\">true</span></div><div class=\"line\">  - GITHUB_REPO: github.com/AsherJia/AsherBlog.git</div><div class=\"line\">  - REPO_TARGET_BRANCH: gh-pages</div></pre></td></tr></table></figure>\n<p>EMAILä»¥åŠDEPLOY_KEYæ˜¯éœ€è¦ç”¨travisæ¥ç”Ÿæˆçš„ï¼Œå¯ä»¥èµ·åˆ°ä¿æŠ¤çš„ä½œç”¨ã€‚<br>è¿™ä¸ªè„šæœ¬æ‰€å®Œæˆçš„å°±æ˜¯å½“æœ‰æ–°çš„commitæäº¤ä¸Šæ¥ä»¥åï¼Œæ‰§è¡Œjekyll buildã€‚<br>å°†ç”Ÿæˆçš„_site/ä¸‹çš„æ–‡ä»¶pushåˆ°gh-pagesåˆ†æ”¯ä¸Šã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">gem install travis</div><div class=\"line\"></div><div class=\"line\">$ travis encrypt EMAIL=medomain.com --add</div><div class=\"line\"></div><div class=\"line\">$ travis encrypt DEPLOY_KEY=token --add <span class=\"comment\">//è¿™ä¸ªtokenéœ€è¦åˆ°githubä¸Šç”Ÿæˆã€‚</span></div></pre></td></tr></table></figure>\n<hr>\n<p>æ¨èä¸€ç¯‡åšæ–‡<a href=\"http://nick-dunn.co.uk/blog/jekyll-github-travis-ci-sitting-in-a-tree/\" target=\"_blank\" rel=\"external\">Jekyll + Github pages + Travis CI, sitting in a tree</a>{:target=â€_blankâ€}ï¼Œã€€æˆ‘åœ¨åˆšå¼€å§‹çš„æ—¶å€™å°±æ˜¯æ ¹æ®è¿™ç¯‡æ–‡ç« æ¥å­¦ä¹ çš„ã€‚</p>\n<p>ç»“æŸäº†ï¼Œï¼Œï¼Œèƒ½çœ‹åˆ°è¿™ç¯‡æ–‡ç« æˆ‘ç›¸ä¿¡ä½ å·²ç»çŸ¥é“æˆ‘çš„åšå®¢äº†ã€‚</p>\n<blockquote>\n<p>ä¸€ä¸ªç®€å•çš„åŸå› ï¼Œç”šè‡³ä»é€»è¾‘ä¸Šè¯´ä¸é€šï¼Œä½†æ˜¯æˆ‘çš„åšå®¢å› æ­¤è¯ç”Ÿã€‚<br>Later equals never.</p>\n</blockquote>\n"},{"layout":"post","title":"Vue","subtitle":"Github","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n[Vue Demo](https://github.com/lichenbuliren/vuex-notes-app \"Vue Demo\"){:target=\"_blank\"}\n\n###æ¦‚è¿°\n\n> Vue.jsï¼ˆè¯»éŸ³ /vjuË/, ç±»ä¼¼äº viewï¼‰æ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢çš„åº“ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®ç°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚\n\n> Vue.js è‡ªèº«ä¸æ˜¯ä¸€ä¸ªå…¨èƒ½æ¡†æ¶â€”â€”å®ƒåªèšç„¦äºè§†å›¾å±‚ã€‚å› æ­¤å®ƒéå¸¸å®¹æ˜“å­¦ä¹ ï¼Œéå¸¸å®¹æ˜“ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ä¸ç›¸å…³å·¥å…·å’Œæ”¯æŒåº“ä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒVue.js ä¹Ÿèƒ½å®Œç¾åœ°é©±åŠ¨å¤æ‚çš„å•é¡µåº”ç”¨ã€‚\n\n###æ•°æ®ç»‘å®šè¯­æ³•\n","source":"_posts/2016-08-29-vue-demo.markdown","raw":"---\nlayout:     post\ntitle:      \"Vue\"\nsubtitle:   \"Github\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Vue\n---\n\n[Vue Demo](https://github.com/lichenbuliren/vuex-notes-app \"Vue Demo\"){:target=\"_blank\"}\n\n###æ¦‚è¿°\n\n> Vue.jsï¼ˆè¯»éŸ³ /vjuË/, ç±»ä¼¼äº viewï¼‰æ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢çš„åº“ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®ç°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚\n\n> Vue.js è‡ªèº«ä¸æ˜¯ä¸€ä¸ªå…¨èƒ½æ¡†æ¶â€”â€”å®ƒåªèšç„¦äºè§†å›¾å±‚ã€‚å› æ­¤å®ƒéå¸¸å®¹æ˜“å­¦ä¹ ï¼Œéå¸¸å®¹æ˜“ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ä¸ç›¸å…³å·¥å…·å’Œæ”¯æŒåº“ä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒVue.js ä¹Ÿèƒ½å®Œç¾åœ°é©±åŠ¨å¤æ‚çš„å•é¡µåº”ç”¨ã€‚\n\n###æ•°æ®ç»‘å®šè¯­æ³•\n","slug":"2016-08-29-vue-demo","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxe000rmmt7ugk5m2dr","content":"<p><a href=\"https://github.com/lichenbuliren/vuex-notes-app\" title=\"Vue Demo\" target=\"_blank\" rel=\"external\">Vue Demo</a>{:target=â€_blankâ€}</p>\n<p>###æ¦‚è¿°</p>\n<blockquote>\n<p>Vue.jsï¼ˆè¯»éŸ³ /vjuË/, ç±»ä¼¼äº viewï¼‰æ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢çš„åº“ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®ç°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚</p>\n<p>Vue.js è‡ªèº«ä¸æ˜¯ä¸€ä¸ªå…¨èƒ½æ¡†æ¶â€”â€”å®ƒåªèšç„¦äºè§†å›¾å±‚ã€‚å› æ­¤å®ƒéå¸¸å®¹æ˜“å­¦ä¹ ï¼Œéå¸¸å®¹æ˜“ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ä¸ç›¸å…³å·¥å…·å’Œæ”¯æŒåº“ä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒVue.js ä¹Ÿèƒ½å®Œç¾åœ°é©±åŠ¨å¤æ‚çš„å•é¡µåº”ç”¨ã€‚</p>\n</blockquote>\n<p>###æ•°æ®ç»‘å®šè¯­æ³•</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/lichenbuliren/vuex-notes-app\" title=\"Vue Demo\" target=\"_blank\" rel=\"external\">Vue Demo</a>{:target=â€_blankâ€}</p>\n<p>###æ¦‚è¿°</p>\n<blockquote>\n<p>Vue.jsï¼ˆè¯»éŸ³ /vjuË/, ç±»ä¼¼äº viewï¼‰æ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢çš„åº“ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®ç°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚</p>\n<p>Vue.js è‡ªèº«ä¸æ˜¯ä¸€ä¸ªå…¨èƒ½æ¡†æ¶â€”â€”å®ƒåªèšç„¦äºè§†å›¾å±‚ã€‚å› æ­¤å®ƒéå¸¸å®¹æ˜“å­¦ä¹ ï¼Œéå¸¸å®¹æ˜“ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ä¸ç›¸å…³å·¥å…·å’Œæ”¯æŒåº“ä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒVue.js ä¹Ÿèƒ½å®Œç¾åœ°é©±åŠ¨å¤æ‚çš„å•é¡µåº”ç”¨ã€‚</p>\n</blockquote>\n<p>###æ•°æ®ç»‘å®šè¯­æ³•</p>\n"},{"layout":"post","title":"underscore","subtitle":"Github","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"http://www.css88.com/doc/underscore1.8.2/docs/underscore.html\n\n### Underscore source code\n\n```javascript\n//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty; //è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ ï¼Œè¡¨ç¤ºæŸä¸ªå¯¹è±¡æ˜¯å¦å«æœ‰æŒ‡å®šçš„å±æ€§ï¼Œè€Œä¸”æ­¤å±æ€§éåŸå‹é“¾ç»§æ‰¿çš„ã€‚\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys, //è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªæœ‰å¯éå†å±æ€§çš„åç§°ã€‚\n    nativeBind         = FuncProto.bind,\n    // bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°,ç§°ä¸ºç»‘å®šå‡½æ•°.å½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶,ç»‘å®šå‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º this,\n    // ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°.\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result â€” either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisherâ€“Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n```\n","source":"_posts/2016-08-18-underscore.markdown","raw":"---\nlayout:     post\ntitle:      \"underscore\"\nsubtitle:   \"Github\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - å‰ç«¯å·¥å…·\n---\nhttp://www.css88.com/doc/underscore1.8.2/docs/underscore.html\n\n### Underscore source code\n\n```javascript\n//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty; //è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ ï¼Œè¡¨ç¤ºæŸä¸ªå¯¹è±¡æ˜¯å¦å«æœ‰æŒ‡å®šçš„å±æ€§ï¼Œè€Œä¸”æ­¤å±æ€§éåŸå‹é“¾ç»§æ‰¿çš„ã€‚\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys, //è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªæœ‰å¯éå†å±æ€§çš„åç§°ã€‚\n    nativeBind         = FuncProto.bind,\n    // bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°,ç§°ä¸ºç»‘å®šå‡½æ•°.å½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶,ç»‘å®šå‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º this,\n    // ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°.\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result â€” either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisherâ€“Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n```\n","slug":"2016-08-18-underscore","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxf000tmmt74nn1221q","content":"<p><a href=\"http://www.css88.com/doc/underscore1.8.2/docs/underscore.html\" target=\"_blank\" rel=\"external\">http://www.css88.com/doc/underscore1.8.2/docs/underscore.html</a></p>\n<h3 id=\"Underscore-source-code\"><a href=\"#Underscore-source-code\" class=\"headerlink\" title=\"Underscore source code\"></a>Underscore source code</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div><div class=\"line\">282</div><div class=\"line\">283</div><div class=\"line\">284</div><div class=\"line\">285</div><div class=\"line\">286</div><div class=\"line\">287</div><div class=\"line\">288</div><div class=\"line\">289</div><div class=\"line\">290</div><div class=\"line\">291</div><div class=\"line\">292</div><div class=\"line\">293</div><div class=\"line\">294</div><div class=\"line\">295</div><div class=\"line\">296</div><div class=\"line\">297</div><div class=\"line\">298</div><div class=\"line\">299</div><div class=\"line\">300</div><div class=\"line\">301</div><div class=\"line\">302</div><div class=\"line\">303</div><div class=\"line\">304</div><div class=\"line\">305</div><div class=\"line\">306</div><div class=\"line\">307</div><div class=\"line\">308</div><div class=\"line\">309</div><div class=\"line\">310</div><div class=\"line\">311</div><div class=\"line\">312</div><div class=\"line\">313</div><div class=\"line\">314</div><div class=\"line\">315</div><div class=\"line\">316</div><div class=\"line\">317</div><div class=\"line\">318</div><div class=\"line\">319</div><div class=\"line\">320</div><div class=\"line\">321</div><div class=\"line\">322</div><div class=\"line\">323</div><div class=\"line\">324</div><div class=\"line\">325</div><div class=\"line\">326</div><div class=\"line\">327</div><div class=\"line\">328</div><div class=\"line\">329</div><div class=\"line\">330</div><div class=\"line\">331</div><div class=\"line\">332</div><div class=\"line\">333</div><div class=\"line\">334</div><div class=\"line\">335</div><div class=\"line\">336</div><div class=\"line\">337</div><div class=\"line\">338</div><div class=\"line\">339</div><div class=\"line\">340</div><div class=\"line\">341</div><div class=\"line\">342</div><div class=\"line\">343</div><div class=\"line\">344</div><div class=\"line\">345</div><div class=\"line\">346</div><div class=\"line\">347</div><div class=\"line\">348</div><div class=\"line\">349</div><div class=\"line\">350</div><div class=\"line\">351</div><div class=\"line\">352</div><div class=\"line\">353</div><div class=\"line\">354</div><div class=\"line\">355</div><div class=\"line\">356</div><div class=\"line\">357</div><div class=\"line\">358</div><div class=\"line\">359</div><div class=\"line\">360</div><div class=\"line\">361</div><div class=\"line\">362</div><div class=\"line\">363</div><div class=\"line\">364</div><div class=\"line\">365</div><div class=\"line\">366</div><div class=\"line\">367</div><div class=\"line\">368</div><div class=\"line\">369</div><div class=\"line\">370</div><div class=\"line\">371</div><div class=\"line\">372</div><div class=\"line\">373</div><div class=\"line\">374</div><div class=\"line\">375</div><div class=\"line\">376</div><div class=\"line\">377</div><div class=\"line\">378</div><div class=\"line\">379</div><div class=\"line\">380</div><div class=\"line\">381</div><div class=\"line\">382</div><div class=\"line\">383</div><div class=\"line\">384</div><div class=\"line\">385</div><div class=\"line\">386</div><div class=\"line\">387</div><div class=\"line\">388</div><div class=\"line\">389</div><div class=\"line\">390</div><div class=\"line\">391</div><div class=\"line\">392</div><div class=\"line\">393</div><div class=\"line\">394</div><div class=\"line\">395</div><div class=\"line\">396</div><div class=\"line\">397</div><div class=\"line\">398</div><div class=\"line\">399</div><div class=\"line\">400</div><div class=\"line\">401</div><div class=\"line\">402</div><div class=\"line\">403</div><div class=\"line\">404</div><div class=\"line\">405</div><div class=\"line\">406</div><div class=\"line\">407</div><div class=\"line\">408</div><div class=\"line\">409</div><div class=\"line\">410</div><div class=\"line\">411</div><div class=\"line\">412</div><div class=\"line\">413</div><div class=\"line\">414</div><div class=\"line\">415</div><div class=\"line\">416</div><div class=\"line\">417</div><div class=\"line\">418</div><div class=\"line\">419</div><div class=\"line\">420</div><div class=\"line\">421</div><div class=\"line\">422</div><div class=\"line\">423</div><div class=\"line\">424</div><div class=\"line\">425</div><div class=\"line\">426</div><div class=\"line\">427</div><div class=\"line\">428</div><div class=\"line\">429</div><div class=\"line\">430</div><div class=\"line\">431</div><div class=\"line\">432</div><div class=\"line\">433</div><div class=\"line\">434</div><div class=\"line\">435</div><div class=\"line\">436</div><div class=\"line\">437</div><div class=\"line\">438</div><div class=\"line\">439</div><div class=\"line\">440</div><div class=\"line\">441</div><div class=\"line\">442</div><div class=\"line\">443</div><div class=\"line\">444</div><div class=\"line\">445</div><div class=\"line\">446</div><div class=\"line\">447</div><div class=\"line\">448</div><div class=\"line\">449</div><div class=\"line\">450</div><div class=\"line\">451</div><div class=\"line\">452</div><div class=\"line\">453</div><div class=\"line\">454</div><div class=\"line\">455</div><div class=\"line\">456</div><div class=\"line\">457</div><div class=\"line\">458</div><div class=\"line\">459</div><div class=\"line\">460</div><div class=\"line\">461</div><div class=\"line\">462</div><div class=\"line\">463</div><div class=\"line\">464</div><div class=\"line\">465</div><div class=\"line\">466</div><div class=\"line\">467</div><div class=\"line\">468</div><div class=\"line\">469</div><div class=\"line\">470</div><div class=\"line\">471</div><div class=\"line\">472</div><div class=\"line\">473</div><div class=\"line\">474</div><div class=\"line\">475</div><div class=\"line\">476</div><div class=\"line\">477</div><div class=\"line\">478</div><div class=\"line\">479</div><div class=\"line\">480</div><div class=\"line\">481</div><div class=\"line\">482</div><div class=\"line\">483</div><div class=\"line\">484</div><div class=\"line\">485</div><div class=\"line\">486</div><div class=\"line\">487</div><div class=\"line\">488</div><div class=\"line\">489</div><div class=\"line\">490</div><div class=\"line\">491</div><div class=\"line\">492</div><div class=\"line\">493</div><div class=\"line\">494</div><div class=\"line\">495</div><div class=\"line\">496</div><div class=\"line\">497</div><div class=\"line\">498</div><div class=\"line\">499</div><div class=\"line\">500</div><div class=\"line\">501</div><div class=\"line\">502</div><div class=\"line\">503</div><div class=\"line\">504</div><div class=\"line\">505</div><div class=\"line\">506</div><div class=\"line\">507</div><div class=\"line\">508</div><div class=\"line\">509</div><div class=\"line\">510</div><div class=\"line\">511</div><div class=\"line\">512</div><div class=\"line\">513</div><div class=\"line\">514</div><div class=\"line\">515</div><div class=\"line\">516</div><div class=\"line\">517</div><div class=\"line\">518</div><div class=\"line\">519</div><div class=\"line\">520</div><div class=\"line\">521</div><div class=\"line\">522</div><div class=\"line\">523</div><div class=\"line\">524</div><div class=\"line\">525</div><div class=\"line\">526</div><div class=\"line\">527</div><div class=\"line\">528</div><div class=\"line\">529</div><div class=\"line\">530</div><div class=\"line\">531</div><div class=\"line\">532</div><div class=\"line\">533</div><div class=\"line\">534</div><div class=\"line\">535</div><div class=\"line\">536</div><div class=\"line\">537</div><div class=\"line\">538</div><div class=\"line\">539</div><div class=\"line\">540</div><div class=\"line\">541</div><div class=\"line\">542</div><div class=\"line\">543</div><div class=\"line\">544</div><div class=\"line\">545</div><div class=\"line\">546</div><div class=\"line\">547</div><div class=\"line\">548</div><div class=\"line\">549</div><div class=\"line\">550</div><div class=\"line\">551</div><div class=\"line\">552</div><div class=\"line\">553</div><div class=\"line\">554</div><div class=\"line\">555</div><div class=\"line\">556</div><div class=\"line\">557</div><div class=\"line\">558</div><div class=\"line\">559</div><div class=\"line\">560</div><div class=\"line\">561</div><div class=\"line\">562</div><div class=\"line\">563</div><div class=\"line\">564</div><div class=\"line\">565</div><div class=\"line\">566</div><div class=\"line\">567</div><div class=\"line\">568</div><div class=\"line\">569</div><div class=\"line\">570</div><div class=\"line\">571</div><div class=\"line\">572</div><div class=\"line\">573</div><div class=\"line\">574</div><div class=\"line\">575</div><div class=\"line\">576</div><div class=\"line\">577</div><div class=\"line\">578</div><div class=\"line\">579</div><div class=\"line\">580</div><div class=\"line\">581</div><div class=\"line\">582</div><div class=\"line\">583</div><div class=\"line\">584</div><div class=\"line\">585</div><div class=\"line\">586</div><div class=\"line\">587</div><div class=\"line\">588</div><div class=\"line\">589</div><div class=\"line\">590</div><div class=\"line\">591</div><div class=\"line\">592</div><div class=\"line\">593</div><div class=\"line\">594</div><div class=\"line\">595</div><div class=\"line\">596</div><div class=\"line\">597</div><div class=\"line\">598</div><div class=\"line\">599</div><div class=\"line\">600</div><div class=\"line\">601</div><div class=\"line\">602</div><div class=\"line\">603</div><div class=\"line\">604</div><div class=\"line\">605</div><div class=\"line\">606</div><div class=\"line\">607</div><div class=\"line\">608</div><div class=\"line\">609</div><div class=\"line\">610</div><div class=\"line\">611</div><div class=\"line\">612</div><div class=\"line\">613</div><div class=\"line\">614</div><div class=\"line\">615</div><div class=\"line\">616</div><div class=\"line\">617</div><div class=\"line\">618</div><div class=\"line\">619</div><div class=\"line\">620</div><div class=\"line\">621</div><div class=\"line\">622</div><div class=\"line\">623</div><div class=\"line\">624</div><div class=\"line\">625</div><div class=\"line\">626</div><div class=\"line\">627</div><div class=\"line\">628</div><div class=\"line\">629</div><div class=\"line\">630</div><div class=\"line\">631</div><div class=\"line\">632</div><div class=\"line\">633</div><div class=\"line\">634</div><div class=\"line\">635</div><div class=\"line\">636</div><div class=\"line\">637</div><div class=\"line\">638</div><div class=\"line\">639</div><div class=\"line\">640</div><div class=\"line\">641</div><div class=\"line\">642</div><div class=\"line\">643</div><div class=\"line\">644</div><div class=\"line\">645</div><div class=\"line\">646</div><div class=\"line\">647</div><div class=\"line\">648</div><div class=\"line\">649</div><div class=\"line\">650</div><div class=\"line\">651</div><div class=\"line\">652</div><div class=\"line\">653</div><div class=\"line\">654</div><div class=\"line\">655</div><div class=\"line\">656</div><div class=\"line\">657</div><div class=\"line\">658</div><div class=\"line\">659</div><div class=\"line\">660</div><div class=\"line\">661</div><div class=\"line\">662</div><div class=\"line\">663</div><div class=\"line\">664</div><div class=\"line\">665</div><div class=\"line\">666</div><div class=\"line\">667</div><div class=\"line\">668</div><div class=\"line\">669</div><div class=\"line\">670</div><div class=\"line\">671</div><div class=\"line\">672</div><div class=\"line\">673</div><div class=\"line\">674</div><div class=\"line\">675</div><div class=\"line\">676</div><div class=\"line\">677</div><div class=\"line\">678</div><div class=\"line\">679</div><div class=\"line\">680</div><div class=\"line\">681</div><div class=\"line\">682</div><div class=\"line\">683</div><div class=\"line\">684</div><div class=\"line\">685</div><div class=\"line\">686</div><div class=\"line\">687</div><div class=\"line\">688</div><div class=\"line\">689</div><div class=\"line\">690</div><div class=\"line\">691</div><div class=\"line\">692</div><div class=\"line\">693</div><div class=\"line\">694</div><div class=\"line\">695</div><div class=\"line\">696</div><div class=\"line\">697</div><div class=\"line\">698</div><div class=\"line\">699</div><div class=\"line\">700</div><div class=\"line\">701</div><div class=\"line\">702</div><div class=\"line\">703</div><div class=\"line\">704</div><div class=\"line\">705</div><div class=\"line\">706</div><div class=\"line\">707</div><div class=\"line\">708</div><div class=\"line\">709</div><div class=\"line\">710</div><div class=\"line\">711</div><div class=\"line\">712</div><div class=\"line\">713</div><div class=\"line\">714</div><div class=\"line\">715</div><div class=\"line\">716</div><div class=\"line\">717</div><div class=\"line\">718</div><div class=\"line\">719</div><div class=\"line\">720</div><div class=\"line\">721</div><div class=\"line\">722</div><div class=\"line\">723</div><div class=\"line\">724</div><div class=\"line\">725</div><div class=\"line\">726</div><div class=\"line\">727</div><div class=\"line\">728</div><div class=\"line\">729</div><div class=\"line\">730</div><div class=\"line\">731</div><div class=\"line\">732</div><div class=\"line\">733</div><div class=\"line\">734</div><div class=\"line\">735</div><div class=\"line\">736</div><div class=\"line\">737</div><div class=\"line\">738</div><div class=\"line\">739</div><div class=\"line\">740</div><div class=\"line\">741</div><div class=\"line\">742</div><div class=\"line\">743</div><div class=\"line\">744</div><div class=\"line\">745</div><div class=\"line\">746</div><div class=\"line\">747</div><div class=\"line\">748</div><div class=\"line\">749</div><div class=\"line\">750</div><div class=\"line\">751</div><div class=\"line\">752</div><div class=\"line\">753</div><div class=\"line\">754</div><div class=\"line\">755</div><div class=\"line\">756</div><div class=\"line\">757</div><div class=\"line\">758</div><div class=\"line\">759</div><div class=\"line\">760</div><div class=\"line\">761</div><div class=\"line\">762</div><div class=\"line\">763</div><div class=\"line\">764</div><div class=\"line\">765</div><div class=\"line\">766</div><div class=\"line\">767</div><div class=\"line\">768</div><div class=\"line\">769</div><div class=\"line\">770</div><div class=\"line\">771</div><div class=\"line\">772</div><div class=\"line\">773</div><div class=\"line\">774</div><div class=\"line\">775</div><div class=\"line\">776</div><div class=\"line\">777</div><div class=\"line\">778</div><div class=\"line\">779</div><div class=\"line\">780</div><div class=\"line\">781</div><div class=\"line\">782</div><div class=\"line\">783</div><div class=\"line\">784</div><div class=\"line\">785</div><div class=\"line\">786</div><div class=\"line\">787</div><div class=\"line\">788</div><div class=\"line\">789</div><div class=\"line\">790</div><div class=\"line\">791</div><div class=\"line\">792</div><div class=\"line\">793</div><div class=\"line\">794</div><div class=\"line\">795</div><div class=\"line\">796</div><div class=\"line\">797</div><div class=\"line\">798</div><div class=\"line\">799</div><div class=\"line\">800</div><div class=\"line\">801</div><div class=\"line\">802</div><div class=\"line\">803</div><div class=\"line\">804</div><div class=\"line\">805</div><div class=\"line\">806</div><div class=\"line\">807</div><div class=\"line\">808</div><div class=\"line\">809</div><div class=\"line\">810</div><div class=\"line\">811</div><div class=\"line\">812</div><div class=\"line\">813</div><div class=\"line\">814</div><div class=\"line\">815</div><div class=\"line\">816</div><div class=\"line\">817</div><div class=\"line\">818</div><div class=\"line\">819</div><div class=\"line\">820</div><div class=\"line\">821</div><div class=\"line\">822</div><div class=\"line\">823</div><div class=\"line\">824</div><div class=\"line\">825</div><div class=\"line\">826</div><div class=\"line\">827</div><div class=\"line\">828</div><div class=\"line\">829</div><div class=\"line\">830</div><div class=\"line\">831</div><div class=\"line\">832</div><div class=\"line\">833</div><div class=\"line\">834</div><div class=\"line\">835</div><div class=\"line\">836</div><div class=\"line\">837</div><div class=\"line\">838</div><div class=\"line\">839</div><div class=\"line\">840</div><div class=\"line\">841</div><div class=\"line\">842</div><div class=\"line\">843</div><div class=\"line\">844</div><div class=\"line\">845</div><div class=\"line\">846</div><div class=\"line\">847</div><div class=\"line\">848</div><div class=\"line\">849</div><div class=\"line\">850</div><div class=\"line\">851</div><div class=\"line\">852</div><div class=\"line\">853</div><div class=\"line\">854</div><div class=\"line\">855</div><div class=\"line\">856</div><div class=\"line\">857</div><div class=\"line\">858</div><div class=\"line\">859</div><div class=\"line\">860</div><div class=\"line\">861</div><div class=\"line\">862</div><div class=\"line\">863</div><div class=\"line\">864</div><div class=\"line\">865</div><div class=\"line\">866</div><div class=\"line\">867</div><div class=\"line\">868</div><div class=\"line\">869</div><div class=\"line\">870</div><div class=\"line\">871</div><div class=\"line\">872</div><div class=\"line\">873</div><div class=\"line\">874</div><div class=\"line\">875</div><div class=\"line\">876</div><div class=\"line\">877</div><div class=\"line\">878</div><div class=\"line\">879</div><div class=\"line\">880</div><div class=\"line\">881</div><div class=\"line\">882</div><div class=\"line\">883</div><div class=\"line\">884</div><div class=\"line\">885</div><div class=\"line\">886</div><div class=\"line\">887</div><div class=\"line\">888</div><div class=\"line\">889</div><div class=\"line\">890</div><div class=\"line\">891</div><div class=\"line\">892</div><div class=\"line\">893</div><div class=\"line\">894</div><div class=\"line\">895</div><div class=\"line\">896</div><div class=\"line\">897</div><div class=\"line\">898</div><div class=\"line\">899</div><div class=\"line\">900</div><div class=\"line\">901</div><div class=\"line\">902</div><div class=\"line\">903</div><div class=\"line\">904</div><div class=\"line\">905</div><div class=\"line\">906</div><div class=\"line\">907</div><div class=\"line\">908</div><div class=\"line\">909</div><div class=\"line\">910</div><div class=\"line\">911</div><div class=\"line\">912</div><div class=\"line\">913</div><div class=\"line\">914</div><div class=\"line\">915</div><div class=\"line\">916</div><div class=\"line\">917</div><div class=\"line\">918</div><div class=\"line\">919</div><div class=\"line\">920</div><div class=\"line\">921</div><div class=\"line\">922</div><div class=\"line\">923</div><div class=\"line\">924</div><div class=\"line\">925</div><div class=\"line\">926</div><div class=\"line\">927</div><div class=\"line\">928</div><div class=\"line\">929</div><div class=\"line\">930</div><div class=\"line\">931</div><div class=\"line\">932</div><div class=\"line\">933</div><div class=\"line\">934</div><div class=\"line\">935</div><div class=\"line\">936</div><div class=\"line\">937</div><div class=\"line\">938</div><div class=\"line\">939</div><div class=\"line\">940</div><div class=\"line\">941</div><div class=\"line\">942</div><div class=\"line\">943</div><div class=\"line\">944</div><div class=\"line\">945</div><div class=\"line\">946</div><div class=\"line\">947</div><div class=\"line\">948</div><div class=\"line\">949</div><div class=\"line\">950</div><div class=\"line\">951</div><div class=\"line\">952</div><div class=\"line\">953</div><div class=\"line\">954</div><div class=\"line\">955</div><div class=\"line\">956</div><div class=\"line\">957</div><div class=\"line\">958</div><div class=\"line\">959</div><div class=\"line\">960</div><div class=\"line\">961</div><div class=\"line\">962</div><div class=\"line\">963</div><div class=\"line\">964</div><div class=\"line\">965</div><div class=\"line\">966</div><div class=\"line\">967</div><div class=\"line\">968</div><div class=\"line\">969</div><div class=\"line\">970</div><div class=\"line\">971</div><div class=\"line\">972</div><div class=\"line\">973</div><div class=\"line\">974</div><div class=\"line\">975</div><div class=\"line\">976</div><div class=\"line\">977</div><div class=\"line\">978</div><div class=\"line\">979</div><div class=\"line\">980</div><div class=\"line\">981</div><div class=\"line\">982</div><div class=\"line\">983</div><div class=\"line\">984</div><div class=\"line\">985</div><div class=\"line\">986</div><div class=\"line\">987</div><div class=\"line\">988</div><div class=\"line\">989</div><div class=\"line\">990</div><div class=\"line\">991</div><div class=\"line\">992</div><div class=\"line\">993</div><div class=\"line\">994</div><div class=\"line\">995</div><div class=\"line\">996</div><div class=\"line\">997</div><div class=\"line\">998</div><div class=\"line\">999</div><div class=\"line\">1000</div><div class=\"line\">1001</div><div class=\"line\">1002</div><div class=\"line\">1003</div><div class=\"line\">1004</div><div class=\"line\">1005</div><div class=\"line\">1006</div><div class=\"line\">1007</div><div class=\"line\">1008</div><div class=\"line\">1009</div><div class=\"line\">1010</div><div class=\"line\">1011</div><div class=\"line\">1012</div><div class=\"line\">1013</div><div class=\"line\">1014</div><div class=\"line\">1015</div><div class=\"line\">1016</div><div class=\"line\">1017</div><div class=\"line\">1018</div><div class=\"line\">1019</div><div class=\"line\">1020</div><div class=\"line\">1021</div><div class=\"line\">1022</div><div class=\"line\">1023</div><div class=\"line\">1024</div><div class=\"line\">1025</div><div class=\"line\">1026</div><div class=\"line\">1027</div><div class=\"line\">1028</div><div class=\"line\">1029</div><div class=\"line\">1030</div><div class=\"line\">1031</div><div class=\"line\">1032</div><div class=\"line\">1033</div><div class=\"line\">1034</div><div class=\"line\">1035</div><div class=\"line\">1036</div><div class=\"line\">1037</div><div class=\"line\">1038</div><div class=\"line\">1039</div><div class=\"line\">1040</div><div class=\"line\">1041</div><div class=\"line\">1042</div><div class=\"line\">1043</div><div class=\"line\">1044</div><div class=\"line\">1045</div><div class=\"line\">1046</div><div class=\"line\">1047</div><div class=\"line\">1048</div><div class=\"line\">1049</div><div class=\"line\">1050</div><div class=\"line\">1051</div><div class=\"line\">1052</div><div class=\"line\">1053</div><div class=\"line\">1054</div><div class=\"line\">1055</div><div class=\"line\">1056</div><div class=\"line\">1057</div><div class=\"line\">1058</div><div class=\"line\">1059</div><div class=\"line\">1060</div><div class=\"line\">1061</div><div class=\"line\">1062</div><div class=\"line\">1063</div><div class=\"line\">1064</div><div class=\"line\">1065</div><div class=\"line\">1066</div><div class=\"line\">1067</div><div class=\"line\">1068</div><div class=\"line\">1069</div><div class=\"line\">1070</div><div class=\"line\">1071</div><div class=\"line\">1072</div><div class=\"line\">1073</div><div class=\"line\">1074</div><div class=\"line\">1075</div><div class=\"line\">1076</div><div class=\"line\">1077</div><div class=\"line\">1078</div><div class=\"line\">1079</div><div class=\"line\">1080</div><div class=\"line\">1081</div><div class=\"line\">1082</div><div class=\"line\">1083</div><div class=\"line\">1084</div><div class=\"line\">1085</div><div class=\"line\">1086</div><div class=\"line\">1087</div><div class=\"line\">1088</div><div class=\"line\">1089</div><div class=\"line\">1090</div><div class=\"line\">1091</div><div class=\"line\">1092</div><div class=\"line\">1093</div><div class=\"line\">1094</div><div class=\"line\">1095</div><div class=\"line\">1096</div><div class=\"line\">1097</div><div class=\"line\">1098</div><div class=\"line\">1099</div><div class=\"line\">1100</div><div class=\"line\">1101</div><div class=\"line\">1102</div><div class=\"line\">1103</div><div class=\"line\">1104</div><div class=\"line\">1105</div><div class=\"line\">1106</div><div class=\"line\">1107</div><div class=\"line\">1108</div><div class=\"line\">1109</div><div class=\"line\">1110</div><div class=\"line\">1111</div><div class=\"line\">1112</div><div class=\"line\">1113</div><div class=\"line\">1114</div><div class=\"line\">1115</div><div class=\"line\">1116</div><div class=\"line\">1117</div><div class=\"line\">1118</div><div class=\"line\">1119</div><div class=\"line\">1120</div><div class=\"line\">1121</div><div class=\"line\">1122</div><div class=\"line\">1123</div><div class=\"line\">1124</div><div class=\"line\">1125</div><div class=\"line\">1126</div><div class=\"line\">1127</div><div class=\"line\">1128</div><div class=\"line\">1129</div><div class=\"line\">1130</div><div class=\"line\">1131</div><div class=\"line\">1132</div><div class=\"line\">1133</div><div class=\"line\">1134</div><div class=\"line\">1135</div><div class=\"line\">1136</div><div class=\"line\">1137</div><div class=\"line\">1138</div><div class=\"line\">1139</div><div class=\"line\">1140</div><div class=\"line\">1141</div><div class=\"line\">1142</div><div class=\"line\">1143</div><div class=\"line\">1144</div><div class=\"line\">1145</div><div class=\"line\">1146</div><div class=\"line\">1147</div><div class=\"line\">1148</div><div class=\"line\">1149</div><div class=\"line\">1150</div><div class=\"line\">1151</div><div class=\"line\">1152</div><div class=\"line\">1153</div><div class=\"line\">1154</div><div class=\"line\">1155</div><div class=\"line\">1156</div><div class=\"line\">1157</div><div class=\"line\">1158</div><div class=\"line\">1159</div><div class=\"line\">1160</div><div class=\"line\">1161</div><div class=\"line\">1162</div><div class=\"line\">1163</div><div class=\"line\">1164</div><div class=\"line\">1165</div><div class=\"line\">1166</div><div class=\"line\">1167</div><div class=\"line\">1168</div><div class=\"line\">1169</div><div class=\"line\">1170</div><div class=\"line\">1171</div><div class=\"line\">1172</div><div class=\"line\">1173</div><div class=\"line\">1174</div><div class=\"line\">1175</div><div class=\"line\">1176</div><div class=\"line\">1177</div><div class=\"line\">1178</div><div class=\"line\">1179</div><div class=\"line\">1180</div><div class=\"line\">1181</div><div class=\"line\">1182</div><div class=\"line\">1183</div><div class=\"line\">1184</div><div class=\"line\">1185</div><div class=\"line\">1186</div><div class=\"line\">1187</div><div class=\"line\">1188</div><div class=\"line\">1189</div><div class=\"line\">1190</div><div class=\"line\">1191</div><div class=\"line\">1192</div><div class=\"line\">1193</div><div class=\"line\">1194</div><div class=\"line\">1195</div><div class=\"line\">1196</div><div class=\"line\">1197</div><div class=\"line\">1198</div><div class=\"line\">1199</div><div class=\"line\">1200</div><div class=\"line\">1201</div><div class=\"line\">1202</div><div class=\"line\">1203</div><div class=\"line\">1204</div><div class=\"line\">1205</div><div class=\"line\">1206</div><div class=\"line\">1207</div><div class=\"line\">1208</div><div class=\"line\">1209</div><div class=\"line\">1210</div><div class=\"line\">1211</div><div class=\"line\">1212</div><div class=\"line\">1213</div><div class=\"line\">1214</div><div class=\"line\">1215</div><div class=\"line\">1216</div><div class=\"line\">1217</div><div class=\"line\">1218</div><div class=\"line\">1219</div><div class=\"line\">1220</div><div class=\"line\">1221</div><div class=\"line\">1222</div><div class=\"line\">1223</div><div class=\"line\">1224</div><div class=\"line\">1225</div><div class=\"line\">1226</div><div class=\"line\">1227</div><div class=\"line\">1228</div><div class=\"line\">1229</div><div class=\"line\">1230</div><div class=\"line\">1231</div><div class=\"line\">1232</div><div class=\"line\">1233</div><div class=\"line\">1234</div><div class=\"line\">1235</div><div class=\"line\">1236</div><div class=\"line\">1237</div><div class=\"line\">1238</div><div class=\"line\">1239</div><div class=\"line\">1240</div><div class=\"line\">1241</div><div class=\"line\">1242</div><div class=\"line\">1243</div><div class=\"line\">1244</div><div class=\"line\">1245</div><div class=\"line\">1246</div><div class=\"line\">1247</div><div class=\"line\">1248</div><div class=\"line\">1249</div><div class=\"line\">1250</div><div class=\"line\">1251</div><div class=\"line\">1252</div><div class=\"line\">1253</div><div class=\"line\">1254</div><div class=\"line\">1255</div><div class=\"line\">1256</div><div class=\"line\">1257</div><div class=\"line\">1258</div><div class=\"line\">1259</div><div class=\"line\">1260</div><div class=\"line\">1261</div><div class=\"line\">1262</div><div class=\"line\">1263</div><div class=\"line\">1264</div><div class=\"line\">1265</div><div class=\"line\">1266</div><div class=\"line\">1267</div><div class=\"line\">1268</div><div class=\"line\">1269</div><div class=\"line\">1270</div><div class=\"line\">1271</div><div class=\"line\">1272</div><div class=\"line\">1273</div><div class=\"line\">1274</div><div class=\"line\">1275</div><div class=\"line\">1276</div><div class=\"line\">1277</div><div class=\"line\">1278</div><div class=\"line\">1279</div><div class=\"line\">1280</div><div class=\"line\">1281</div><div class=\"line\">1282</div><div class=\"line\">1283</div><div class=\"line\">1284</div><div class=\"line\">1285</div><div class=\"line\">1286</div><div class=\"line\">1287</div><div class=\"line\">1288</div><div class=\"line\">1289</div><div class=\"line\">1290</div><div class=\"line\">1291</div><div class=\"line\">1292</div><div class=\"line\">1293</div><div class=\"line\">1294</div><div class=\"line\">1295</div><div class=\"line\">1296</div><div class=\"line\">1297</div><div class=\"line\">1298</div><div class=\"line\">1299</div><div class=\"line\">1300</div><div class=\"line\">1301</div><div class=\"line\">1302</div><div class=\"line\">1303</div><div class=\"line\">1304</div><div class=\"line\">1305</div><div class=\"line\">1306</div><div class=\"line\">1307</div><div class=\"line\">1308</div><div class=\"line\">1309</div><div class=\"line\">1310</div><div class=\"line\">1311</div><div class=\"line\">1312</div><div class=\"line\">1313</div><div class=\"line\">1314</div><div class=\"line\">1315</div><div class=\"line\">1316</div><div class=\"line\">1317</div><div class=\"line\">1318</div><div class=\"line\">1319</div><div class=\"line\">1320</div><div class=\"line\">1321</div><div class=\"line\">1322</div><div class=\"line\">1323</div><div class=\"line\">1324</div><div class=\"line\">1325</div><div class=\"line\">1326</div><div class=\"line\">1327</div><div class=\"line\">1328</div><div class=\"line\">1329</div><div class=\"line\">1330</div><div class=\"line\">1331</div><div class=\"line\">1332</div><div class=\"line\">1333</div><div class=\"line\">1334</div><div class=\"line\">1335</div><div class=\"line\">1336</div><div class=\"line\">1337</div><div class=\"line\">1338</div><div class=\"line\">1339</div><div class=\"line\">1340</div><div class=\"line\">1341</div><div class=\"line\">1342</div><div class=\"line\">1343</div><div class=\"line\">1344</div><div class=\"line\">1345</div><div class=\"line\">1346</div><div class=\"line\">1347</div><div class=\"line\">1348</div><div class=\"line\">1349</div><div class=\"line\">1350</div><div class=\"line\">1351</div><div class=\"line\">1352</div><div class=\"line\">1353</div><div class=\"line\">1354</div><div class=\"line\">1355</div><div class=\"line\">1356</div><div class=\"line\">1357</div><div class=\"line\">1358</div><div class=\"line\">1359</div><div class=\"line\">1360</div><div class=\"line\">1361</div><div class=\"line\">1362</div><div class=\"line\">1363</div><div class=\"line\">1364</div><div class=\"line\">1365</div><div class=\"line\">1366</div><div class=\"line\">1367</div><div class=\"line\">1368</div><div class=\"line\">1369</div><div class=\"line\">1370</div><div class=\"line\">1371</div><div class=\"line\">1372</div><div class=\"line\">1373</div><div class=\"line\">1374</div><div class=\"line\">1375</div><div class=\"line\">1376</div><div class=\"line\">1377</div><div class=\"line\">1378</div><div class=\"line\">1379</div><div class=\"line\">1380</div><div class=\"line\">1381</div><div class=\"line\">1382</div><div class=\"line\">1383</div><div class=\"line\">1384</div><div class=\"line\">1385</div><div class=\"line\">1386</div><div class=\"line\">1387</div><div class=\"line\">1388</div><div class=\"line\">1389</div><div class=\"line\">1390</div><div class=\"line\">1391</div><div class=\"line\">1392</div><div class=\"line\">1393</div><div class=\"line\">1394</div><div class=\"line\">1395</div><div class=\"line\">1396</div><div class=\"line\">1397</div><div class=\"line\">1398</div><div class=\"line\">1399</div><div class=\"line\">1400</div><div class=\"line\">1401</div><div class=\"line\">1402</div><div class=\"line\">1403</div><div class=\"line\">1404</div><div class=\"line\">1405</div><div class=\"line\">1406</div><div class=\"line\">1407</div><div class=\"line\">1408</div><div class=\"line\">1409</div><div class=\"line\">1410</div><div class=\"line\">1411</div><div class=\"line\">1412</div><div class=\"line\">1413</div><div class=\"line\">1414</div><div class=\"line\">1415</div><div class=\"line\">1416</div><div class=\"line\">1417</div><div class=\"line\">1418</div><div class=\"line\">1419</div><div class=\"line\">1420</div><div class=\"line\">1421</div><div class=\"line\">1422</div><div class=\"line\">1423</div><div class=\"line\">1424</div><div class=\"line\">1425</div><div class=\"line\">1426</div><div class=\"line\">1427</div><div class=\"line\">1428</div><div class=\"line\">1429</div><div class=\"line\">1430</div><div class=\"line\">1431</div><div class=\"line\">1432</div><div class=\"line\">1433</div><div class=\"line\">1434</div><div class=\"line\">1435</div><div class=\"line\">1436</div><div class=\"line\">1437</div><div class=\"line\">1438</div><div class=\"line\">1439</div><div class=\"line\">1440</div><div class=\"line\">1441</div><div class=\"line\">1442</div><div class=\"line\">1443</div><div class=\"line\">1444</div><div class=\"line\">1445</div><div class=\"line\">1446</div><div class=\"line\">1447</div><div class=\"line\">1448</div><div class=\"line\">1449</div><div class=\"line\">1450</div><div class=\"line\">1451</div><div class=\"line\">1452</div><div class=\"line\">1453</div><div class=\"line\">1454</div><div class=\"line\">1455</div><div class=\"line\">1456</div><div class=\"line\">1457</div><div class=\"line\">1458</div><div class=\"line\">1459</div><div class=\"line\">1460</div><div class=\"line\">1461</div><div class=\"line\">1462</div><div class=\"line\">1463</div><div class=\"line\">1464</div><div class=\"line\">1465</div><div class=\"line\">1466</div><div class=\"line\">1467</div><div class=\"line\">1468</div><div class=\"line\">1469</div><div class=\"line\">1470</div><div class=\"line\">1471</div><div class=\"line\">1472</div><div class=\"line\">1473</div><div class=\"line\">1474</div><div class=\"line\">1475</div><div class=\"line\">1476</div><div class=\"line\">1477</div><div class=\"line\">1478</div><div class=\"line\">1479</div><div class=\"line\">1480</div><div class=\"line\">1481</div><div class=\"line\">1482</div><div class=\"line\">1483</div><div class=\"line\">1484</div><div class=\"line\">1485</div><div class=\"line\">1486</div><div class=\"line\">1487</div><div class=\"line\">1488</div><div class=\"line\">1489</div><div class=\"line\">1490</div><div class=\"line\">1491</div><div class=\"line\">1492</div><div class=\"line\">1493</div><div class=\"line\">1494</div><div class=\"line\">1495</div><div class=\"line\">1496</div><div class=\"line\">1497</div><div class=\"line\">1498</div><div class=\"line\">1499</div><div class=\"line\">1500</div><div class=\"line\">1501</div><div class=\"line\">1502</div><div class=\"line\">1503</div><div class=\"line\">1504</div><div class=\"line\">1505</div><div class=\"line\">1506</div><div class=\"line\">1507</div><div class=\"line\">1508</div><div class=\"line\">1509</div><div class=\"line\">1510</div><div class=\"line\">1511</div><div class=\"line\">1512</div><div class=\"line\">1513</div><div class=\"line\">1514</div><div class=\"line\">1515</div><div class=\"line\">1516</div><div class=\"line\">1517</div><div class=\"line\">1518</div><div class=\"line\">1519</div><div class=\"line\">1520</div><div class=\"line\">1521</div><div class=\"line\">1522</div><div class=\"line\">1523</div><div class=\"line\">1524</div><div class=\"line\">1525</div><div class=\"line\">1526</div><div class=\"line\">1527</div><div class=\"line\">1528</div><div class=\"line\">1529</div><div class=\"line\">1530</div><div class=\"line\">1531</div><div class=\"line\">1532</div><div class=\"line\">1533</div><div class=\"line\">1534</div><div class=\"line\">1535</div><div class=\"line\">1536</div><div class=\"line\">1537</div><div class=\"line\">1538</div><div class=\"line\">1539</div><div class=\"line\">1540</div><div class=\"line\">1541</div><div class=\"line\">1542</div><div class=\"line\">1543</div><div class=\"line\">1544</div><div class=\"line\">1545</div><div class=\"line\">1546</div><div class=\"line\">1547</div><div class=\"line\">1548</div><div class=\"line\">1549</div><div class=\"line\">1550</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//     Underscore.js 1.8.3</span></div><div class=\"line\"><span class=\"comment\">//     http://underscorejs.org</span></div><div class=\"line\"><span class=\"comment\">//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors</span></div><div class=\"line\"><span class=\"comment\">//     Underscore may be freely distributed under the MIT license.</span></div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Baseline setup</span></div><div class=\"line\">  <span class=\"comment\">// --------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Establish the root object, `window` in the browser, or `exports` on the server.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> root = <span class=\"keyword\">this</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Save the previous value of the `_` variable.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> previousUnderscore = root._;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Save bytes in the minified (but not gzipped) version:</span></div><div class=\"line\">  <span class=\"keyword\">var</span> ArrayProto = <span class=\"built_in\">Array</span>.prototype, ObjProto = <span class=\"built_in\">Object</span>.prototype, FuncProto = <span class=\"built_in\">Function</span>.prototype;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create quick reference variables for speed access to core prototypes.</span></div><div class=\"line\">  <span class=\"keyword\">var</span></div><div class=\"line\">    push             = ArrayProto.push,</div><div class=\"line\">    slice            = ArrayProto.slice,</div><div class=\"line\">    toString         = ObjProto.toString,</div><div class=\"line\">    hasOwnProperty   = ObjProto.hasOwnProperty; <span class=\"comment\">//è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ ï¼Œè¡¨ç¤ºæŸä¸ªå¯¹è±¡æ˜¯å¦å«æœ‰æŒ‡å®šçš„å±æ€§ï¼Œè€Œä¸”æ­¤å±æ€§éåŸå‹é“¾ç»§æ‰¿çš„ã€‚</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// All **ECMAScript 5** native function implementations that we hope to use</span></div><div class=\"line\">  <span class=\"comment\">// are declared here.</span></div><div class=\"line\">  <span class=\"keyword\">var</span></div><div class=\"line\">    nativeIsArray      = <span class=\"built_in\">Array</span>.isArray,</div><div class=\"line\">    nativeKeys         = <span class=\"built_in\">Object</span>.keys, <span class=\"comment\">//è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªæœ‰å¯éå†å±æ€§çš„åç§°ã€‚</span></div><div class=\"line\">    nativeBind         = FuncProto.bind,</div><div class=\"line\">    <span class=\"comment\">// bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°,ç§°ä¸ºç»‘å®šå‡½æ•°.å½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶,ç»‘å®šå‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º this,</span></div><div class=\"line\">    <span class=\"comment\">// ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°.</span></div><div class=\"line\">    nativeCreate       = <span class=\"built_in\">Object</span>.create;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Naked function reference for surrogate-prototype-swapping.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> Ctor = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a safe reference to the Underscore object for use below.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> _ = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj <span class=\"keyword\">instanceof</span> _) <span class=\"keyword\">return</span> obj;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(<span class=\"keyword\">this</span> <span class=\"keyword\">instanceof</span> _)) <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _(obj);</div><div class=\"line\">    <span class=\"keyword\">this</span>._wrapped = obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Export the Underscore object for **Node.js**, with</span></div><div class=\"line\">  <span class=\"comment\">// backwards-compatibility for the old `require()` API. If we're in</span></div><div class=\"line\">  <span class=\"comment\">// the browser, add `_` as a global object.</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports !== <span class=\"string\">'undefined'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">module</span>.exports) &#123;</div><div class=\"line\">      exports = <span class=\"built_in\">module</span>.exports = _;</div><div class=\"line\">    &#125;</div><div class=\"line\">    exports._ = _;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    root._ = _;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Current version.</span></div><div class=\"line\">  _.VERSION = <span class=\"string\">'1.8.3'</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Internal function that returns an efficient (for current engines) version</span></div><div class=\"line\">  <span class=\"comment\">// of the passed-in callback, to be repeatedly applied in other Underscore</span></div><div class=\"line\">  <span class=\"comment\">// functions.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> optimizeCb = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, context, argCount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (context === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) <span class=\"keyword\">return</span> func;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (argCount == <span class=\"literal\">null</span> ? <span class=\"number\">3</span> : argCount) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">1</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, value);</div><div class=\"line\">      &#125;;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">2</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, other</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, value, other);</div><div class=\"line\">      &#125;;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">3</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, collection</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, value, index, collection);</div><div class=\"line\">      &#125;;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">4</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, value, index, collection</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, accumulator, value, index, collection);</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> func.apply(context, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// A mostly-internal function to generate callbacks that can be applied</span></div><div class=\"line\">  <span class=\"comment\">// to each element in a collection, returning the desired result â€” either</span></div><div class=\"line\">  <span class=\"comment\">// identity, an arbitrary callback, a property matcher, or a property accessor.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> cb = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, context, argCount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (value == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> _.identity;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isFunction(value)) <span class=\"keyword\">return</span> optimizeCb(value, context, argCount);</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isObject(value)) <span class=\"keyword\">return</span> _.matcher(value);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.property(value);</div><div class=\"line\">  &#125;;</div><div class=\"line\">  _.iteratee = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> cb(value, context, <span class=\"literal\">Infinity</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// An internal function for creating assigner functions.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> createAssigner = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">keysFunc, undefinedOnly</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> length = <span class=\"built_in\">arguments</span>.length;</div><div class=\"line\">      <span class=\"keyword\">if</span> (length &lt; <span class=\"number\">2</span> || obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> obj;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">1</span>; index &lt; length; index++) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> source = <span class=\"built_in\">arguments</span>[index],</div><div class=\"line\">            keys = keysFunc(source),</div><div class=\"line\">            l = keys.length;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; l; i++) &#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> key = keys[i];</div><div class=\"line\">          <span class=\"keyword\">if</span> (!undefinedOnly || obj[key] === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) obj[key] = source[key];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> obj;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// An internal function for creating a new object that inherits from another.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> baseCreate = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">prototype</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(prototype)) <span class=\"keyword\">return</span> &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">if</span> (nativeCreate) <span class=\"keyword\">return</span> nativeCreate(prototype);</div><div class=\"line\">    Ctor.prototype = prototype;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"keyword\">new</span> Ctor;</div><div class=\"line\">    Ctor.prototype = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> property = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> obj == <span class=\"literal\">null</span> ? <span class=\"keyword\">void</span> <span class=\"number\">0</span> : obj[key];</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Helper for collection methods to determine whether a collection</span></div><div class=\"line\">  <span class=\"comment\">// should be iterated as an array or as an object</span></div><div class=\"line\">  <span class=\"comment\">// Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength</span></div><div class=\"line\">  <span class=\"comment\">// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094</span></div><div class=\"line\">  <span class=\"keyword\">var</span> MAX_ARRAY_INDEX = <span class=\"built_in\">Math</span>.pow(<span class=\"number\">2</span>, <span class=\"number\">53</span>) - <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> getLength = property(<span class=\"string\">'length'</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> isArrayLike = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> length = getLength(collection);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> length == <span class=\"string\">'number'</span> &amp;&amp; length &gt;= <span class=\"number\">0</span> &amp;&amp; length &lt;= MAX_ARRAY_INDEX;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Collection Functions</span></div><div class=\"line\">  <span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// The cornerstone, an `each` implementation, aka `forEach`.</span></div><div class=\"line\">  <span class=\"comment\">// Handles raw objects in addition to array-likes. Treats all</span></div><div class=\"line\">  <span class=\"comment\">// sparse array-likes as if they were dense.</span></div><div class=\"line\">  _.each = _.forEach = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = optimizeCb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> i, length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj)) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>, length = obj.length; i &lt; length; i++) &#123;</div><div class=\"line\">        iteratee(obj[i], i, obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">      <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">        iteratee(obj[keys[i]], keys[i], obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the results of applying the iteratee to each element.</span></div><div class=\"line\">  _.map = _.collect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">        length = (keys || obj).length,</div><div class=\"line\">        results = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">      results[index] = iteratee(obj[currentKey], currentKey, obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> results;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a reducing function iterating left or right.</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createReduce</span>(<span class=\"params\">dir</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Optimized iterator function as using arguments.length</span></div><div class=\"line\">    <span class=\"comment\">// in the main function will deoptimize the, see #1991.</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">iterator</span>(<span class=\"params\">obj, iteratee, memo, keys, index, length</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (; index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt; length; index += dir) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">        memo = iteratee(memo, obj[currentKey], currentKey, obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> memo;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, memo, context</span>) </span>&#123;</div><div class=\"line\">      iteratee = optimizeCb(iteratee, context, <span class=\"number\">4</span>);</div><div class=\"line\">      <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">          length = (keys || obj).length,</div><div class=\"line\">          index = dir &gt; <span class=\"number\">0</span> ? <span class=\"number\">0</span> : length - <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"comment\">// Determine the initial value if none is provided.</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">arguments</span>.length &lt; <span class=\"number\">3</span>) &#123;</div><div class=\"line\">        memo = obj[keys ? keys[index] : index];</div><div class=\"line\">        index += dir;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> iterator(obj, iteratee, memo, keys, index, length);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// **Reduce** builds up a single result from a list of values, aka `inject`,</span></div><div class=\"line\">  <span class=\"comment\">// or `foldl`.</span></div><div class=\"line\">  _.reduce = _.foldl = _.inject = createReduce(<span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// The right-associative version of reduce, also known as `foldr`.</span></div><div class=\"line\">  _.reduceRight = _.foldr = createReduce(<span class=\"number\">-1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the first value which passes a truth test. Aliased as `detect`.</span></div><div class=\"line\">  _.find = _.detect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> key;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj)) &#123;</div><div class=\"line\">      key = _.findIndex(obj, predicate, context);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      key = _.findKey(obj, predicate, context);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (key !== <span class=\"keyword\">void</span> <span class=\"number\">0</span> &amp;&amp; key !== <span class=\"number\">-1</span>) <span class=\"keyword\">return</span> obj[key];</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return all the elements that pass a truth test.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `select`.</span></div><div class=\"line\">  _.filter = _.select = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> results = [];</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (predicate(value, index, list)) results.push(value);</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> results;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return all the elements for which a truth test fails.</span></div><div class=\"line\">  _.reject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(obj, _.negate(cb(predicate)), context);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determine whether all of the elements match a truth test.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `all`.</span></div><div class=\"line\">  _.every = _.all = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">        length = (keys || obj).length;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!predicate(obj[currentKey], currentKey, obj)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determine if at least one element in the object matches a truth test.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `any`.</span></div><div class=\"line\">  _.some = _.any = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">        length = (keys || obj).length;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">      <span class=\"keyword\">if</span> (predicate(obj[currentKey], currentKey, obj)) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determine if the array or object contains a given item (using `===`).</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `includes` and `include`.</span></div><div class=\"line\">  _.contains = _.includes = _.include = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, item, fromIndex, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!isArrayLike(obj)) obj = _.values(obj);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> fromIndex != <span class=\"string\">'number'</span> || guard) fromIndex = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.indexOf(obj, item, fromIndex) &gt;= <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Invoke a method (with arguments) on every item in a collection.</span></div><div class=\"line\">  _.invoke = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, method</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> isFunc = _.isFunction(method);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.map(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> func = isFunc ? method : value[method];</div><div class=\"line\">      <span class=\"keyword\">return</span> func == <span class=\"literal\">null</span> ? func : func.apply(value, args);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convenience version of a common use case of `map`: fetching a property.</span></div><div class=\"line\">  _.pluck = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.map(obj, _.property(key));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convenience version of a common use case of `filter`: selecting only objects</span></div><div class=\"line\">  <span class=\"comment\">// containing specific `key:value` pairs.</span></div><div class=\"line\">  _.where = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, attrs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(obj, _.matcher(attrs));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convenience version of a common use case of `find`: getting the first object</span></div><div class=\"line\">  <span class=\"comment\">// containing specific `key:value` pairs.</span></div><div class=\"line\">  _.findWhere = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, attrs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.find(obj, _.matcher(attrs));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the maximum element (or element-based computation).</span></div><div class=\"line\">  _.max = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = -<span class=\"literal\">Infinity</span>, lastComputed = -<span class=\"literal\">Infinity</span>,</div><div class=\"line\">        value, computed;</div><div class=\"line\">    <span class=\"keyword\">if</span> (iteratee == <span class=\"literal\">null</span> &amp;&amp; obj != <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      obj = isArrayLike(obj) ? obj : _.values(obj);</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = obj.length; i &lt; length; i++) &#123;</div><div class=\"line\">        value = obj[i];</div><div class=\"line\">        <span class=\"keyword\">if</span> (value &gt; result) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      iteratee = cb(iteratee, context);</div><div class=\"line\">      _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">        computed = iteratee(value, index, list);</div><div class=\"line\">        <span class=\"keyword\">if</span> (computed &gt; lastComputed || computed === -<span class=\"literal\">Infinity</span> &amp;&amp; result === -<span class=\"literal\">Infinity</span>) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">          lastComputed = computed;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the minimum element (or element-based computation).</span></div><div class=\"line\">  _.min = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"literal\">Infinity</span>, lastComputed = <span class=\"literal\">Infinity</span>,</div><div class=\"line\">        value, computed;</div><div class=\"line\">    <span class=\"keyword\">if</span> (iteratee == <span class=\"literal\">null</span> &amp;&amp; obj != <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      obj = isArrayLike(obj) ? obj : _.values(obj);</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = obj.length; i &lt; length; i++) &#123;</div><div class=\"line\">        value = obj[i];</div><div class=\"line\">        <span class=\"keyword\">if</span> (value &lt; result) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      iteratee = cb(iteratee, context);</div><div class=\"line\">      _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">        computed = iteratee(value, index, list);</div><div class=\"line\">        <span class=\"keyword\">if</span> (computed &lt; lastComputed || computed === <span class=\"literal\">Infinity</span> &amp;&amp; result === <span class=\"literal\">Infinity</span>) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">          lastComputed = computed;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Shuffle a collection, using the modern version of the</span></div><div class=\"line\">  <span class=\"comment\">// [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisherâ€“Yates_shuffle).</span></div><div class=\"line\">  _.shuffle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> set = isArrayLike(obj) ? obj : _.values(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> length = set.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> shuffled = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>, rand; index &lt; length; index++) &#123;</div><div class=\"line\">      rand = _.random(<span class=\"number\">0</span>, index);</div><div class=\"line\">      <span class=\"keyword\">if</span> (rand !== index) shuffled[index] = shuffled[rand];</div><div class=\"line\">      shuffled[rand] = set[index];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> shuffled;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Sample **n** random values from a collection.</span></div><div class=\"line\">  <span class=\"comment\">// If **n** is not specified, returns a single random element.</span></div><div class=\"line\">  <span class=\"comment\">// The internal `guard` argument allows it to work with `map`.</span></div><div class=\"line\">  _.sample = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"literal\">null</span> || guard) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!isArrayLike(obj)) obj = _.values(obj);</div><div class=\"line\">      <span class=\"keyword\">return</span> obj[_.random(obj.length - <span class=\"number\">1</span>)];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.shuffle(obj).slice(<span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, n));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Sort the object's values by a criterion produced by an iteratee.</span></div><div class=\"line\">  _.sortBy = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.pluck(_.map(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">value</span>: value,</div><div class=\"line\">        <span class=\"attr\">index</span>: index,</div><div class=\"line\">        <span class=\"attr\">criteria</span>: iteratee(value, index, list)</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;).sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">left, right</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> a = left.criteria;</div><div class=\"line\">      <span class=\"keyword\">var</span> b = right.criteria;</div><div class=\"line\">      <span class=\"keyword\">if</span> (a !== b) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (a &gt; b || a === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (a &lt; b || b === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> left.index - right.index;</div><div class=\"line\">    &#125;), <span class=\"string\">'value'</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// An internal function used for aggregate \"group by\" operations.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> group = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">behavior</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> result = &#123;&#125;;</div><div class=\"line\">      iteratee = cb(iteratee, context);</div><div class=\"line\">      _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> key = iteratee(value, index, obj);</div><div class=\"line\">        behavior(result, value, key);</div><div class=\"line\">      &#125;);</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Groups the object's values by a criterion. Pass either a string attribute</span></div><div class=\"line\">  <span class=\"comment\">// to group by, or a function that returns the criterion.</span></div><div class=\"line\">  _.groupBy = group(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result, value, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.has(result, key)) result[key].push(value); <span class=\"keyword\">else</span> result[key] = [value];</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Indexes the object's values by a criterion, similar to `groupBy`, but for</span></div><div class=\"line\">  <span class=\"comment\">// when you know that your index values will be unique.</span></div><div class=\"line\">  _.indexBy = group(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result, value, key</span>) </span>&#123;</div><div class=\"line\">    result[key] = value;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Counts instances of an object that group by a certain criterion. Pass</span></div><div class=\"line\">  <span class=\"comment\">// either a string attribute to count by, or a function that returns the</span></div><div class=\"line\">  <span class=\"comment\">// criterion.</span></div><div class=\"line\">  _.countBy = group(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result, value, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.has(result, key)) result[key]++; <span class=\"keyword\">else</span> result[key] = <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Safely create a real, live array from anything iterable.</span></div><div class=\"line\">  _.toArray = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!obj) <span class=\"keyword\">return</span> [];</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isArray(obj)) <span class=\"keyword\">return</span> slice.call(obj);</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj)) <span class=\"keyword\">return</span> _.map(obj, _.identity);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.values(obj);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the number of elements in an object.</span></div><div class=\"line\">  _.size = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> isArrayLike(obj) ? obj.length : _.keys(obj).length;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Split a collection into two arrays: one whose elements all satisfy the given</span></div><div class=\"line\">  <span class=\"comment\">// predicate, and one whose elements all do not satisfy the predicate.</span></div><div class=\"line\">  _.partition = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> pass = [], fail = [];</div><div class=\"line\">    _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, obj</span>) </span>&#123;</div><div class=\"line\">      (predicate(value, key, obj) ? pass : fail).push(value);</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> [pass, fail];</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Array Functions</span></div><div class=\"line\">  <span class=\"comment\">// ---------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Get the first element of an array. Passing **n** will return the first N</span></div><div class=\"line\">  <span class=\"comment\">// values in the array. Aliased as `head` and `take`. The **guard** check</span></div><div class=\"line\">  <span class=\"comment\">// allows it to work with `_.map`.</span></div><div class=\"line\">  _.first = _.head = _.take = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (array == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">void</span> <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"literal\">null</span> || guard) <span class=\"keyword\">return</span> array[<span class=\"number\">0</span>];</div><div class=\"line\">    <span class=\"keyword\">return</span> _.initial(array, array.length - n);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns everything but the last entry of the array. Especially useful on</span></div><div class=\"line\">  <span class=\"comment\">// the arguments object. Passing **n** will return all the values in</span></div><div class=\"line\">  <span class=\"comment\">// the array, excluding the last N.</span></div><div class=\"line\">  _.initial = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> slice.call(array, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, array.length - (n == <span class=\"literal\">null</span> || guard ? <span class=\"number\">1</span> : n)));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Get the last element of an array. Passing **n** will return the last N</span></div><div class=\"line\">  <span class=\"comment\">// values in the array.</span></div><div class=\"line\">  _.last = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (array == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">void</span> <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"literal\">null</span> || guard) <span class=\"keyword\">return</span> array[array.length - <span class=\"number\">1</span>];</div><div class=\"line\">    <span class=\"keyword\">return</span> _.rest(array, <span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, array.length - n));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns everything but the first entry of the array. Aliased as `tail` and `drop`.</span></div><div class=\"line\">  <span class=\"comment\">// Especially useful on the arguments object. Passing an **n** will return</span></div><div class=\"line\">  <span class=\"comment\">// the rest N values in the array.</span></div><div class=\"line\">  _.rest = _.tail = _.drop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> slice.call(array, n == <span class=\"literal\">null</span> || guard ? <span class=\"number\">1</span> : n);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Trim out all falsy values from an array.</span></div><div class=\"line\">  _.compact = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(array, _.identity);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Internal implementation of a recursive `flatten` function.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> flatten = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">input, shallow, strict, startIndex</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> output = [], idx = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = startIndex || <span class=\"number\">0</span>, length = getLength(input); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> value = input[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (isArrayLike(value) &amp;&amp; (_.isArray(value) || _.isArguments(value))) &#123;</div><div class=\"line\">        <span class=\"comment\">//flatten current level of array or arguments object</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (!shallow) value = flatten(value, shallow, strict);</div><div class=\"line\">        <span class=\"keyword\">var</span> j = <span class=\"number\">0</span>, len = value.length;</div><div class=\"line\">        output.length += len;</div><div class=\"line\">        <span class=\"keyword\">while</span> (j &lt; len) &#123;</div><div class=\"line\">          output[idx++] = value[j++];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!strict) &#123;</div><div class=\"line\">        output[idx++] = value;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> output;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Flatten out an array, either recursively (by default), or just one level.</span></div><div class=\"line\">  _.flatten = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, shallow</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> flatten(array, shallow, <span class=\"literal\">false</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a version of the array that does not contain the specified value(s).</span></div><div class=\"line\">  _.without = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.difference(array, slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Produce a duplicate-free version of the array. If the array has already</span></div><div class=\"line\">  <span class=\"comment\">// been sorted, you have the option of using a faster algorithm.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `unique`.</span></div><div class=\"line\">  _.uniq = _.unique = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, isSorted, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isBoolean(isSorted)) &#123;</div><div class=\"line\">      context = iteratee;</div><div class=\"line\">      iteratee = isSorted;</div><div class=\"line\">      isSorted = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (iteratee != <span class=\"literal\">null</span>) iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> result = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> seen = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(array); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> value = array[i],</div><div class=\"line\">          computed = iteratee ? iteratee(value, i, array) : value;</div><div class=\"line\">      <span class=\"keyword\">if</span> (isSorted) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!i || seen !== computed) result.push(value);</div><div class=\"line\">        seen = computed;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (iteratee) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!_.contains(seen, computed)) &#123;</div><div class=\"line\">          seen.push(computed);</div><div class=\"line\">          result.push(value);</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!_.contains(result, value)) &#123;</div><div class=\"line\">        result.push(value);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Produce an array that contains the union: each distinct element from all of</span></div><div class=\"line\">  <span class=\"comment\">// the passed-in arrays.</span></div><div class=\"line\">  _.union = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.uniq(flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Produce an array that contains every item shared between all the</span></div><div class=\"line\">  <span class=\"comment\">// passed-in arrays.</span></div><div class=\"line\">  _.intersection = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> argsLength = <span class=\"built_in\">arguments</span>.length;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(array); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> item = array[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (_.contains(result, item)) <span class=\"keyword\">continue</span>;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">1</span>; j &lt; argsLength; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!_.contains(<span class=\"built_in\">arguments</span>[j], item)) <span class=\"keyword\">break</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (j === argsLength) result.push(item);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Take the difference between one array and a number of other arrays.</span></div><div class=\"line\">  <span class=\"comment\">// Only the elements present in just the first array will remain.</span></div><div class=\"line\">  _.difference = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> rest = flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(array, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> !_.contains(rest, value);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Zip together multiple lists into a single array -- elements that share</span></div><div class=\"line\">  <span class=\"comment\">// an index go together.</span></div><div class=\"line\">  _.zip = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.unzip(<span class=\"built_in\">arguments</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Complement of _.zip. Unzip accepts an array of arrays and groups</span></div><div class=\"line\">  <span class=\"comment\">// each array's elements on shared indices</span></div><div class=\"line\">  _.unzip = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> length = array &amp;&amp; _.max(array, getLength).length || <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      result[index] = _.pluck(array, index);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Converts lists into objects. Pass either a single array of `[key, value]`</span></div><div class=\"line\">  <span class=\"comment\">// pairs, or two parallel arrays of the same length -- one of keys, and one of</span></div><div class=\"line\">  <span class=\"comment\">// the corresponding values.</span></div><div class=\"line\">  _.object = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">list, values</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(list); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (values) &#123;</div><div class=\"line\">        result[list[i]] = values[i];</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        result[list[i][<span class=\"number\">0</span>]] = list[i][<span class=\"number\">1</span>];</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generator function to create the findIndex and findLastIndex functions</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createPredicateIndexFinder</span>(<span class=\"params\">dir</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, predicate, context</span>) </span>&#123;</div><div class=\"line\">      predicate = cb(predicate, context);</div><div class=\"line\">      <span class=\"keyword\">var</span> length = getLength(array);</div><div class=\"line\">      <span class=\"keyword\">var</span> index = dir &gt; <span class=\"number\">0</span> ? <span class=\"number\">0</span> : length - <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">for</span> (; index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt; length; index += dir) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (predicate(array[index], index, array)) <span class=\"keyword\">return</span> index;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the first index on an array-like that passes a predicate test</span></div><div class=\"line\">  _.findIndex = createPredicateIndexFinder(<span class=\"number\">1</span>);</div><div class=\"line\">  _.findLastIndex = createPredicateIndexFinder(<span class=\"number\">-1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Use a comparator function to figure out the smallest index at which</span></div><div class=\"line\">  <span class=\"comment\">// an object should be inserted so as to maintain order. Uses binary search.</span></div><div class=\"line\">  _.sortedIndex = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> value = iteratee(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> low = <span class=\"number\">0</span>, high = getLength(array);</div><div class=\"line\">    <span class=\"keyword\">while</span> (low &lt; high) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> mid = <span class=\"built_in\">Math</span>.floor((low + high) / <span class=\"number\">2</span>);</div><div class=\"line\">      <span class=\"keyword\">if</span> (iteratee(array[mid]) &lt; value) low = mid + <span class=\"number\">1</span>; <span class=\"keyword\">else</span> high = mid;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> low;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generator function to create the indexOf and lastIndexOf functions</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createIndexFinder</span>(<span class=\"params\">dir, predicateFind, sortedIndex</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, item, idx</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(array);</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> idx == <span class=\"string\">'number'</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (dir &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            i = idx &gt;= <span class=\"number\">0</span> ? idx : <span class=\"built_in\">Math</span>.max(idx + length, i);</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            length = idx &gt;= <span class=\"number\">0</span> ? <span class=\"built_in\">Math</span>.min(idx + <span class=\"number\">1</span>, length) : idx + length + <span class=\"number\">1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (sortedIndex &amp;&amp; idx &amp;&amp; length) &#123;</div><div class=\"line\">        idx = sortedIndex(array, item);</div><div class=\"line\">        <span class=\"keyword\">return</span> array[idx] === item ? idx : <span class=\"number\">-1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (item !== item) &#123;</div><div class=\"line\">        idx = predicateFind(slice.call(array, i, length), _.isNaN);</div><div class=\"line\">        <span class=\"keyword\">return</span> idx &gt;= <span class=\"number\">0</span> ? idx + i : <span class=\"number\">-1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">for</span> (idx = dir &gt; <span class=\"number\">0</span> ? i : length - <span class=\"number\">1</span>; idx &gt;= <span class=\"number\">0</span> &amp;&amp; idx &lt; length; idx += dir) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (array[idx] === item) <span class=\"keyword\">return</span> idx;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the position of the first occurrence of an item in an array,</span></div><div class=\"line\">  <span class=\"comment\">// or -1 if the item is not included in the array.</span></div><div class=\"line\">  <span class=\"comment\">// If the array is large and already in sort order, pass `true`</span></div><div class=\"line\">  <span class=\"comment\">// for **isSorted** to use binary search.</span></div><div class=\"line\">  _.indexOf = createIndexFinder(<span class=\"number\">1</span>, _.findIndex, _.sortedIndex);</div><div class=\"line\">  _.lastIndexOf = createIndexFinder(<span class=\"number\">-1</span>, _.findLastIndex);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generate an integer Array containing an arithmetic progression. A port of</span></div><div class=\"line\">  <span class=\"comment\">// the native Python `range()` function. See</span></div><div class=\"line\">  <span class=\"comment\">// [the Python documentation](http://docs.python.org/library/functions.html#range).</span></div><div class=\"line\">  _.range = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">start, stop, step</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (stop == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      stop = start || <span class=\"number\">0</span>;</div><div class=\"line\">      start = <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    step = step || <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> length = <span class=\"built_in\">Math</span>.max(<span class=\"built_in\">Math</span>.ceil((stop - start) / step), <span class=\"number\">0</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> range = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> idx = <span class=\"number\">0</span>; idx &lt; length; idx++, start += step) &#123;</div><div class=\"line\">      range[idx] = start;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> range;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Function (ahem) Functions</span></div><div class=\"line\">  <span class=\"comment\">// ------------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determines whether to execute a function as a constructor</span></div><div class=\"line\">  <span class=\"comment\">// or a normal function with the provided arguments</span></div><div class=\"line\">  <span class=\"keyword\">var</span> executeBound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sourceFunc, boundFunc, context, callingContext, args</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(callingContext <span class=\"keyword\">instanceof</span> boundFunc)) <span class=\"keyword\">return</span> sourceFunc.apply(context, args);</div><div class=\"line\">    <span class=\"keyword\">var</span> self = baseCreate(sourceFunc.prototype);</div><div class=\"line\">    <span class=\"keyword\">var</span> result = sourceFunc.apply(self, args);</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isObject(result)) <span class=\"keyword\">return</span> result;</div><div class=\"line\">    <span class=\"keyword\">return</span> self;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a function bound to a given object (assigning `this`, and arguments,</span></div><div class=\"line\">  <span class=\"comment\">// optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if</span></div><div class=\"line\">  <span class=\"comment\">// available.</span></div><div class=\"line\">  _.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (nativeBind &amp;&amp; func.bind === nativeBind) <span class=\"keyword\">return</span> nativeBind.apply(func, slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>));</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isFunction(func)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Bind must be called on a function'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> args = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> bound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> executeBound(func, bound, context, <span class=\"keyword\">this</span>, args.concat(slice.call(<span class=\"built_in\">arguments</span>)));</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> bound;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Partially apply a function by creating a version that has had some of its</span></div><div class=\"line\">  <span class=\"comment\">// arguments pre-filled, without changing its dynamic `this` context. _ acts</span></div><div class=\"line\">  <span class=\"comment\">// as a placeholder, allowing any combination of arguments to be pre-filled.</span></div><div class=\"line\">  _.partial = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> boundArgs = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> bound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> position = <span class=\"number\">0</span>, length = boundArgs.length;</div><div class=\"line\">      <span class=\"keyword\">var</span> args = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">        args[i] = boundArgs[i] === _ ? <span class=\"built_in\">arguments</span>[position++] : boundArgs[i];</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">while</span> (position &lt; <span class=\"built_in\">arguments</span>.length) args.push(<span class=\"built_in\">arguments</span>[position++]);</div><div class=\"line\">      <span class=\"keyword\">return</span> executeBound(func, bound, <span class=\"keyword\">this</span>, <span class=\"keyword\">this</span>, args);</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> bound;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Bind a number of an object's methods to that object. Remaining arguments</span></div><div class=\"line\">  <span class=\"comment\">// are the method names to be bound. Useful for ensuring that all callbacks</span></div><div class=\"line\">  <span class=\"comment\">// defined on an object belong to it.</span></div><div class=\"line\">  _.bindAll = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> i, length = <span class=\"built_in\">arguments</span>.length, key;</div><div class=\"line\">    <span class=\"keyword\">if</span> (length &lt;= <span class=\"number\">1</span>) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'bindAll must be passed function names'</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (i = <span class=\"number\">1</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      key = <span class=\"built_in\">arguments</span>[i];</div><div class=\"line\">      obj[key] = _.bind(obj[key], obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Memoize an expensive function by storing its results.</span></div><div class=\"line\">  _.memoize = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, hasher</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> memoize = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> cache = memoize.cache;</div><div class=\"line\">      <span class=\"keyword\">var</span> address = <span class=\"string\">''</span> + (hasher ? hasher.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>) : key);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!_.has(cache, address)) cache[address] = func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> cache[address];</div><div class=\"line\">    &#125;;</div><div class=\"line\">    memoize.cache = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> memoize;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Delays a function for the given number of milliseconds, and then calls</span></div><div class=\"line\">  <span class=\"comment\">// it with the arguments supplied.</span></div><div class=\"line\">  _.delay = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> func.apply(<span class=\"literal\">null</span>, args);</div><div class=\"line\">    &#125;, wait);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Defers a function, scheduling it to run after the current call stack has</span></div><div class=\"line\">  <span class=\"comment\">// cleared.</span></div><div class=\"line\">  _.defer = _.partial(_.delay, _, <span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function, that, when invoked, will only be triggered at most once</span></div><div class=\"line\">  <span class=\"comment\">// during a given window of time. Normally, the throttled function will run</span></div><div class=\"line\">  <span class=\"comment\">// as much as it can, without ever going more than once per `wait` duration;</span></div><div class=\"line\">  <span class=\"comment\">// but if you'd like to disable the execution on the leading edge, pass</span></div><div class=\"line\">  <span class=\"comment\">// `&#123;leading: false&#125;`. To disable execution on the trailing edge, ditto.</span></div><div class=\"line\">  _.throttle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, options</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> context, args, result;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> previous = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!options) options = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      previous = options.leading === <span class=\"literal\">false</span> ? <span class=\"number\">0</span> : _.now();</div><div class=\"line\">      timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">      result = func.apply(context, args);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> now = _.now();</div><div class=\"line\">      <span class=\"keyword\">if</span> (!previous &amp;&amp; options.leading === <span class=\"literal\">false</span>) previous = now;</div><div class=\"line\">      <span class=\"keyword\">var</span> remaining = wait - (now - previous);</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (timeout) &#123;</div><div class=\"line\">          clearTimeout(timeout);</div><div class=\"line\">          timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        previous = now;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!timeout &amp;&amp; options.trailing !== <span class=\"literal\">false</span>) &#123;</div><div class=\"line\">        timeout = setTimeout(later, remaining);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function, that, as long as it continues to be invoked, will not</span></div><div class=\"line\">  <span class=\"comment\">// be triggered. The function will be called after it stops being called for</span></div><div class=\"line\">  <span class=\"comment\">// N milliseconds. If `immediate` is passed, trigger the function on the</span></div><div class=\"line\">  <span class=\"comment\">// leading edge, instead of the trailing.</span></div><div class=\"line\">  _.debounce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout, args, context, timestamp, result;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> last = _.now() - timestamp;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (last &lt; wait &amp;&amp; last &gt;= <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        timeout = setTimeout(later, wait - last);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!immediate) &#123;</div><div class=\"line\">          result = func.apply(context, args);</div><div class=\"line\">          <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      timestamp = _.now();</div><div class=\"line\">      <span class=\"keyword\">var</span> callNow = immediate &amp;&amp; !timeout;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) timeout = setTimeout(later, wait);</div><div class=\"line\">      <span class=\"keyword\">if</span> (callNow) &#123;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the first function passed as an argument to the second,</span></div><div class=\"line\">  <span class=\"comment\">// allowing you to adjust arguments, run code before and after, and</span></div><div class=\"line\">  <span class=\"comment\">// conditionally execute the original function.</span></div><div class=\"line\">  _.wrap = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wrapper</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.partial(wrapper, func);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a negated version of the passed-in predicate.</span></div><div class=\"line\">  _.negate = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">predicate</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> !predicate.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that is the composition of a list of functions, each</span></div><div class=\"line\">  <span class=\"comment\">// consuming the return value of the function that follows.</span></div><div class=\"line\">  _.compose = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> start = args.length - <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> i = start;</div><div class=\"line\">      <span class=\"keyword\">var</span> result = args[start].apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">while</span> (i--) result = args[i].call(<span class=\"keyword\">this</span>, result);</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that will only be executed on and after the Nth call.</span></div><div class=\"line\">  _.after = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">times, func</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (--times &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that will only be executed up to (but not including) the Nth call.</span></div><div class=\"line\">  _.before = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">times, func</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> memo;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (--times &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        memo = func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (times &lt;= <span class=\"number\">1</span>) func = <span class=\"literal\">null</span>;</div><div class=\"line\">      <span class=\"keyword\">return</span> memo;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that will be executed at most one time, no matter how</span></div><div class=\"line\">  <span class=\"comment\">// often you call it. Useful for lazy initialization.</span></div><div class=\"line\">  _.once = _.partial(_.before, <span class=\"number\">2</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Object Functions</span></div><div class=\"line\">  <span class=\"comment\">// ----------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keys in IE &lt; 9 that won't be iterated by `for key in ...` and thus missed.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> hasEnumBug = !&#123;<span class=\"attr\">toString</span>: <span class=\"literal\">null</span>&#125;.propertyIsEnumerable(<span class=\"string\">'toString'</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> nonEnumerableProps = [<span class=\"string\">'valueOf'</span>, <span class=\"string\">'isPrototypeOf'</span>, <span class=\"string\">'toString'</span>,</div><div class=\"line\">                      <span class=\"string\">'propertyIsEnumerable'</span>, <span class=\"string\">'hasOwnProperty'</span>, <span class=\"string\">'toLocaleString'</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">collectNonEnumProps</span>(<span class=\"params\">obj, keys</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> nonEnumIdx = nonEnumerableProps.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> <span class=\"keyword\">constructor</span> = obj.<span class=\"keyword\">constructor</span>;</div><div class=\"line\">    var proto = (_.isFunction(<span class=\"keyword\">constructor</span>) &amp;&amp; <span class=\"keyword\">constructor</span>.prototype) || ObjProto;</div><div class=\"line\"></div><div class=\"line\">    // Constructor is a special case.</div><div class=\"line\">    var prop = '<span class=\"keyword\">constructor</span>';</div><div class=\"line\">    if (_.has(obj, prop) &amp;&amp; !_.contains(keys, prop)) keys.push(prop);</div><div class=\"line\"></div><div class=\"line\">    while (nonEnumIdx--) &#123;</div><div class=\"line\">      prop = nonEnumerableProps[nonEnumIdx];</div><div class=\"line\">      <span class=\"keyword\">if</span> (prop <span class=\"keyword\">in</span> obj &amp;&amp; obj[prop] !== proto[prop] &amp;&amp; !_.contains(keys, prop)) &#123;</div><div class=\"line\">        keys.push(prop);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Retrieve the names of an object's own properties.</span></div><div class=\"line\">  <span class=\"comment\">// Delegates to **ECMAScript 5**'s native `Object.keys`</span></div><div class=\"line\">  _.keys = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(obj)) <span class=\"keyword\">return</span> [];</div><div class=\"line\">    <span class=\"keyword\">if</span> (nativeKeys) <span class=\"keyword\">return</span> nativeKeys(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) <span class=\"keyword\">if</span> (_.has(obj, key)) keys.push(key);</div><div class=\"line\">    <span class=\"comment\">// Ahem, IE &lt; 9.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (hasEnumBug) collectNonEnumProps(obj, keys);</div><div class=\"line\">    <span class=\"keyword\">return</span> keys;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Retrieve all the property names of an object.</span></div><div class=\"line\">  _.allKeys = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(obj)) <span class=\"keyword\">return</span> [];</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) keys.push(key);</div><div class=\"line\">    <span class=\"comment\">// Ahem, IE &lt; 9.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (hasEnumBug) collectNonEnumProps(obj, keys);</div><div class=\"line\">    <span class=\"keyword\">return</span> keys;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Retrieve the values of an object's properties.</span></div><div class=\"line\">  _.values = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> length = keys.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> values = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      values[i] = obj[keys[i]];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> values;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the results of applying the iteratee to each element of the object</span></div><div class=\"line\">  <span class=\"comment\">// In contrast to _.map it returns an object</span></div><div class=\"line\">  _.mapObject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys =  _.keys(obj),</div><div class=\"line\">          length = keys.length,</div><div class=\"line\">          results = &#123;&#125;,</div><div class=\"line\">          currentKey;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">        currentKey = keys[index];</div><div class=\"line\">        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> results;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convert an object into a list of `[key, value]` pairs.</span></div><div class=\"line\">  _.pairs = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> length = keys.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> pairs = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      pairs[i] = [keys[i], obj[keys[i]]];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> pairs;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Invert the keys and values of an object. The values must be serializable.</span></div><div class=\"line\">  _.invert = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">      result[obj[keys[i]]] = keys[i];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a sorted list of the function names available on the object.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `methods`</span></div><div class=\"line\">  _.functions = _.methods = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> names = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (_.isFunction(obj[key])) names.push(key);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> names.sort();</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Extend a given object with all the properties in passed-in object(s).</span></div><div class=\"line\">  _.extend = createAssigner(_.allKeys);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Assigns a given object with all the own properties in the passed-in object(s)</span></div><div class=\"line\">  <span class=\"comment\">// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)</span></div><div class=\"line\">  _.extendOwn = _.assign = createAssigner(_.keys);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the first key on an object that passes a predicate test</span></div><div class=\"line\">  _.findKey = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj), key;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">      key = keys[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (predicate(obj[key], key, obj)) <span class=\"keyword\">return</span> key;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a copy of the object only containing the whitelisted properties.</span></div><div class=\"line\">  _.pick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, oiteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = &#123;&#125;, obj = object, iteratee, keys;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> result;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isFunction(oiteratee)) &#123;</div><div class=\"line\">      keys = _.allKeys(obj);</div><div class=\"line\">      iteratee = optimizeCb(oiteratee, context);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      keys = flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, <span class=\"number\">1</span>);</div><div class=\"line\">      iteratee = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, obj</span>) </span>&#123; <span class=\"keyword\">return</span> key <span class=\"keyword\">in</span> obj; &#125;;</div><div class=\"line\">      obj = <span class=\"built_in\">Object</span>(obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> key = keys[i];</div><div class=\"line\">      <span class=\"keyword\">var</span> value = obj[key];</div><div class=\"line\">      <span class=\"keyword\">if</span> (iteratee(value, key, obj)) result[key] = value;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\">// Return a copy of the object without the blacklisted properties.</span></div><div class=\"line\">  _.omit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isFunction(iteratee)) &#123;</div><div class=\"line\">      iteratee = _.negate(iteratee);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> keys = _.map(flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, <span class=\"number\">1</span>), <span class=\"built_in\">String</span>);</div><div class=\"line\">      iteratee = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> !_.contains(keys, key);</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.pick(obj, iteratee, context);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Fill in a given object with default properties.</span></div><div class=\"line\">  _.defaults = createAssigner(_.allKeys, <span class=\"literal\">true</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Creates an object that inherits from the given prototype object.</span></div><div class=\"line\">  <span class=\"comment\">// If additional properties are provided then they will be added to the</span></div><div class=\"line\">  <span class=\"comment\">// created object.</span></div><div class=\"line\">  _.create = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">prototype, props</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = baseCreate(prototype);</div><div class=\"line\">    <span class=\"keyword\">if</span> (props) _.extendOwn(result, props);</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a (shallow-cloned) duplicate of an object.</span></div><div class=\"line\">  _.clone = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(obj)) <span class=\"keyword\">return</span> obj;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.isArray(obj) ? obj.slice() : _.extend(&#123;&#125;, obj);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Invokes interceptor with the obj, and then returns obj.</span></div><div class=\"line\">  <span class=\"comment\">// The primary purpose of this method is to \"tap into\" a method chain, in</span></div><div class=\"line\">  <span class=\"comment\">// order to perform operations on intermediate results within the chain.</span></div><div class=\"line\">  _.tap = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, interceptor</span>) </span>&#123;</div><div class=\"line\">    interceptor(obj);</div><div class=\"line\">    <span class=\"keyword\">return</span> obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns whether an object has a given set of `key:value` pairs.</span></div><div class=\"line\">  _.isMatch = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, attrs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(attrs), length = keys.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (object == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> !length;</div><div class=\"line\">    <span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>(object);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> key = keys[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (attrs[key] !== obj[key] || !(key <span class=\"keyword\">in</span> obj)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Internal recursive comparison function for `isEqual`.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> eq = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b, aStack, bStack</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Identical objects are equal. `0 === -0`, but they aren't identical.</span></div><div class=\"line\">    <span class=\"comment\">// See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (a === b) <span class=\"keyword\">return</span> a !== <span class=\"number\">0</span> || <span class=\"number\">1</span> / a === <span class=\"number\">1</span> / b;</div><div class=\"line\">    <span class=\"comment\">// A strict comparison is necessary because `null == undefined`.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (a == <span class=\"literal\">null</span> || b == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> a === b;</div><div class=\"line\">    <span class=\"comment\">// Unwrap any wrapped objects.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (a <span class=\"keyword\">instanceof</span> _) a = a._wrapped;</div><div class=\"line\">    <span class=\"keyword\">if</span> (b <span class=\"keyword\">instanceof</span> _) b = b._wrapped;</div><div class=\"line\">    <span class=\"comment\">// Compare `[[Class]]` names.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> className = toString.call(a);</div><div class=\"line\">    <span class=\"keyword\">if</span> (className !== toString.call(b)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (className) &#123;</div><div class=\"line\">      <span class=\"comment\">// Strings, numbers, regular expressions, dates, and booleans are compared by value.</span></div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object RegExp]'</span>:</div><div class=\"line\">      <span class=\"comment\">// RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')</span></div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object String]'</span>:</div><div class=\"line\">        <span class=\"comment\">// Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is</span></div><div class=\"line\">        <span class=\"comment\">// equivalent to `new String(\"5\")`.</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">''</span> + a === <span class=\"string\">''</span> + b;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object Number]'</span>:</div><div class=\"line\">        <span class=\"comment\">// `NaN`s are equivalent, but non-reflexive.</span></div><div class=\"line\">        <span class=\"comment\">// Object(NaN) is equivalent to NaN</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (+a !== +a) <span class=\"keyword\">return</span> +b !== +b;</div><div class=\"line\">        <span class=\"comment\">// An `egal` comparison is performed for other numeric values.</span></div><div class=\"line\">        <span class=\"keyword\">return</span> +a === <span class=\"number\">0</span> ? <span class=\"number\">1</span> / +a === <span class=\"number\">1</span> / b : +a === +b;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object Date]'</span>:</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object Boolean]'</span>:</div><div class=\"line\">        <span class=\"comment\">// Coerce dates and booleans to numeric primitive values. Dates are compared by their</span></div><div class=\"line\">        <span class=\"comment\">// millisecond representations. Note that invalid dates with millisecond representations</span></div><div class=\"line\">        <span class=\"comment\">// of `NaN` are not equivalent.</span></div><div class=\"line\">        <span class=\"keyword\">return</span> +a === +b;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> areArrays = className === <span class=\"string\">'[object Array]'</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!areArrays) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> a != <span class=\"string\">'object'</span> || <span class=\"keyword\">typeof</span> b != <span class=\"string\">'object'</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// Objects with different constructors are not equivalent, but `Object`s or `Array`s</span></div><div class=\"line\">      <span class=\"comment\">// from different frames are.</span></div><div class=\"line\">      <span class=\"keyword\">var</span> aCtor = a.constructor, bCtor = b.constructor;</div><div class=\"line\">      <span class=\"keyword\">if</span> (aCtor !== bCtor &amp;&amp; !(_.isFunction(aCtor) &amp;&amp; aCtor <span class=\"keyword\">instanceof</span> aCtor &amp;&amp;</div><div class=\"line\">                               _.isFunction(bCtor) &amp;&amp; bCtor <span class=\"keyword\">instanceof</span> bCtor)</div><div class=\"line\">                          &amp;&amp; (<span class=\"string\">'constructor'</span> <span class=\"keyword\">in</span> a &amp;&amp; <span class=\"string\">'constructor'</span> <span class=\"keyword\">in</span> b)) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// Assume equality for cyclic structures. The algorithm for detecting cyclic</span></div><div class=\"line\">    <span class=\"comment\">// structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Initializing stack of traversed objects.</span></div><div class=\"line\">    <span class=\"comment\">// It's done here since we only need them for objects and arrays comparison.</span></div><div class=\"line\">    aStack = aStack || [];</div><div class=\"line\">    bStack = bStack || [];</div><div class=\"line\">    <span class=\"keyword\">var</span> length = aStack.length;</div><div class=\"line\">    <span class=\"keyword\">while</span> (length--) &#123;</div><div class=\"line\">      <span class=\"comment\">// Linear search. Performance is inversely proportional to the number of</span></div><div class=\"line\">      <span class=\"comment\">// unique nested structures.</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (aStack[length] === a) <span class=\"keyword\">return</span> bStack[length] === b;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Add the first object to the stack of traversed objects.</span></div><div class=\"line\">    aStack.push(a);</div><div class=\"line\">    bStack.push(b);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Recursively compare objects and arrays.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (areArrays) &#123;</div><div class=\"line\">      <span class=\"comment\">// Compare array lengths to determine if a deep comparison is necessary.</span></div><div class=\"line\">      length = a.length;</div><div class=\"line\">      <span class=\"keyword\">if</span> (length !== b.length) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      <span class=\"comment\">// Deep compare the contents, ignoring non-numeric properties.</span></div><div class=\"line\">      <span class=\"keyword\">while</span> (length--) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!eq(a[length], b[length], aStack, bStack)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"comment\">// Deep compare objects.</span></div><div class=\"line\">      <span class=\"keyword\">var</span> keys = _.keys(a), key;</div><div class=\"line\">      length = keys.length;</div><div class=\"line\">      <span class=\"comment\">// Ensure that both objects contain the same number of properties before comparing deep equality.</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (_.keys(b).length !== length) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      <span class=\"keyword\">while</span> (length--) &#123;</div><div class=\"line\">        <span class=\"comment\">// Deep compare each member</span></div><div class=\"line\">        key = keys[length];</div><div class=\"line\">        <span class=\"keyword\">if</span> (!(_.has(b, key) &amp;&amp; eq(a[key], b[key], aStack, bStack))) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// Remove the first object from the stack of traversed objects.</span></div><div class=\"line\">    aStack.pop();</div><div class=\"line\">    bStack.pop();</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Perform a deep comparison to check if two objects are equal.</span></div><div class=\"line\">  _.isEqual = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> eq(a, b);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given array, string, or object empty?</span></div><div class=\"line\">  <span class=\"comment\">// An \"empty\" object has no enumerable own-properties.</span></div><div class=\"line\">  _.isEmpty = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj) &amp;&amp; (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) <span class=\"keyword\">return</span> obj.length === <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.keys(obj).length === <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value a DOM element?</span></div><div class=\"line\">  _.isElement = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> !!(obj &amp;&amp; obj.nodeType === <span class=\"number\">1</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value an array?</span></div><div class=\"line\">  <span class=\"comment\">// Delegates to ECMA5's native Array.isArray</span></div><div class=\"line\">  _.isArray = nativeIsArray || <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> toString.call(obj) === <span class=\"string\">'[object Array]'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given variable an object?</span></div><div class=\"line\">  _.isObject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> type = <span class=\"keyword\">typeof</span> obj;</div><div class=\"line\">    <span class=\"keyword\">return</span> type === <span class=\"string\">'function'</span> || type === <span class=\"string\">'object'</span> &amp;&amp; !!obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.</span></div><div class=\"line\">  _.each([<span class=\"string\">'Arguments'</span>, <span class=\"string\">'Function'</span>, <span class=\"string\">'String'</span>, <span class=\"string\">'Number'</span>, <span class=\"string\">'Date'</span>, <span class=\"string\">'RegExp'</span>, <span class=\"string\">'Error'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">    _[<span class=\"string\">'is'</span> + name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> toString.call(obj) === <span class=\"string\">'[object '</span> + name + <span class=\"string\">']'</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Define a fallback version of the method in browsers (ahem, IE &lt; 9), where</span></div><div class=\"line\">  <span class=\"comment\">// there isn't any inspectable \"Arguments\" type.</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (!_.isArguments(<span class=\"built_in\">arguments</span>)) &#123;</div><div class=\"line\">    _.isArguments = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _.has(obj, <span class=\"string\">'callee'</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,</span></div><div class=\"line\">  <span class=\"comment\">// IE 11 (#1621), and in Safari 8 (#1929).</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> /./ != <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">Int8Array</span> != <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">    _.isFunction = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> obj == <span class=\"string\">'function'</span> || <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given object a finite number?</span></div><div class=\"line\">  _.isFinite = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">isFinite</span>(obj) &amp;&amp; !<span class=\"built_in\">isNaN</span>(<span class=\"built_in\">parseFloat</span>(obj));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is the given value `NaN`? (NaN is the only number which does not equal itself).</span></div><div class=\"line\">  _.isNaN = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.isNumber(obj) &amp;&amp; obj !== +obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value a boolean?</span></div><div class=\"line\">  _.isBoolean = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj === <span class=\"literal\">true</span> || obj === <span class=\"literal\">false</span> || toString.call(obj) === <span class=\"string\">'[object Boolean]'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value equal to null?</span></div><div class=\"line\">  _.isNull = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj === <span class=\"literal\">null</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given variable undefined?</span></div><div class=\"line\">  _.isUndefined = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj === <span class=\"keyword\">void</span> <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Shortcut function for checking if an object has a given property directly</span></div><div class=\"line\">  <span class=\"comment\">// on itself (in other words, not on a prototype).</span></div><div class=\"line\">  _.has = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj != <span class=\"literal\">null</span> &amp;&amp; hasOwnProperty.call(obj, key);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Utility Functions</span></div><div class=\"line\">  <span class=\"comment\">// -----------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Run Underscore.js in *noConflict* mode, returning the `_` variable to its</span></div><div class=\"line\">  <span class=\"comment\">// previous owner. Returns a reference to the Underscore object.</span></div><div class=\"line\">  _.noConflict = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    root._ = previousUnderscore;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep the identity function around for default iteratees.</span></div><div class=\"line\">  _.identity = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> value;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Predicate-generating functions. Often useful outside of Underscore.</span></div><div class=\"line\">  _.constant = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> value;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  _.noop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">  _.property = property;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generates a function for a given object that returns a given property.</span></div><div class=\"line\">  _.propertyOf = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj == <span class=\"literal\">null</span> ? <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125; : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> obj[key];</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a predicate for checking whether an object has a given set of</span></div><div class=\"line\">  <span class=\"comment\">// `key:value` pairs.</span></div><div class=\"line\">  _.matcher = _.matches = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">attrs</span>) </span>&#123;</div><div class=\"line\">    attrs = _.extendOwn(&#123;&#125;, attrs);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _.isMatch(obj, attrs);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Run a function **n** times.</span></div><div class=\"line\">  _.times = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> accum = <span class=\"built_in\">Array</span>(<span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, n));</div><div class=\"line\">    iteratee = optimizeCb(iteratee, context, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; n; i++) accum[i] = iteratee(i);</div><div class=\"line\">    <span class=\"keyword\">return</span> accum;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a random integer between min and max (inclusive).</span></div><div class=\"line\">  _.random = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">min, max</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (max == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      max = min;</div><div class=\"line\">      min = <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> min + <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (max - min + <span class=\"number\">1</span>));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// A (possibly faster) way to get the current timestamp as an integer.</span></div><div class=\"line\">  _.now = <span class=\"built_in\">Date</span>.now || <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\">// List of HTML entities for escaping.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> escapeMap = &#123;</div><div class=\"line\">    <span class=\"string\">'&amp;'</span>: <span class=\"string\">'&amp;amp;'</span>,</div><div class=\"line\">    <span class=\"string\">'&lt;'</span>: <span class=\"string\">'&amp;lt;'</span>,</div><div class=\"line\">    <span class=\"string\">'&gt;'</span>: <span class=\"string\">'&amp;gt;'</span>,</div><div class=\"line\">    <span class=\"string\">'\"'</span>: <span class=\"string\">'&amp;quot;'</span>,</div><div class=\"line\">    <span class=\"string\">\"'\"</span>: <span class=\"string\">'&amp;#x27;'</span>,</div><div class=\"line\">    <span class=\"string\">'`'</span>: <span class=\"string\">'&amp;#x60;'</span></div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">var</span> unescapeMap = _.invert(escapeMap);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Functions for escaping and unescaping strings to/from HTML interpolation.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> createEscaper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">map</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> escaper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">match</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> map[match];</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"comment\">// Regexes for identifying a key that needs to be escaped</span></div><div class=\"line\">    <span class=\"keyword\">var</span> source = <span class=\"string\">'(?:'</span> + _.keys(map).join(<span class=\"string\">'|'</span>) + <span class=\"string\">')'</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> testRegexp = <span class=\"built_in\">RegExp</span>(source);</div><div class=\"line\">    <span class=\"keyword\">var</span> replaceRegexp = <span class=\"built_in\">RegExp</span>(source, <span class=\"string\">'g'</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">string</span>) </span>&#123;</div><div class=\"line\">      string = string == <span class=\"literal\">null</span> ? <span class=\"string\">''</span> : <span class=\"string\">''</span> + string;</div><div class=\"line\">      <span class=\"keyword\">return</span> testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\">  _.escape = createEscaper(escapeMap);</div><div class=\"line\">  _.unescape = createEscaper(unescapeMap);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// If the value of the named `property` is a function then invoke it with the</span></div><div class=\"line\">  <span class=\"comment\">// `object` as context; otherwise, return it.</span></div><div class=\"line\">  _.result = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, property, fallback</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> value = object == <span class=\"literal\">null</span> ? <span class=\"keyword\">void</span> <span class=\"number\">0</span> : object[property];</div><div class=\"line\">    <span class=\"keyword\">if</span> (value === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      value = fallback;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.isFunction(value) ? value.call(object) : value;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generate a unique integer id (unique within the entire client session).</span></div><div class=\"line\">  <span class=\"comment\">// Useful for temporary DOM ids.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> idCounter = <span class=\"number\">0</span>;</div><div class=\"line\">  _.uniqueId = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">prefix</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> id = ++idCounter + <span class=\"string\">''</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> prefix ? prefix + id : id;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// By default, Underscore uses ERB-style template delimiters, change the</span></div><div class=\"line\">  <span class=\"comment\">// following template settings to use alternative delimiters.</span></div><div class=\"line\">  _.templateSettings = &#123;</div><div class=\"line\">    <span class=\"attr\">evaluate</span>    : <span class=\"regexp\">/&lt;%([\\s\\S]+?)%&gt;/g</span>,</div><div class=\"line\">    <span class=\"attr\">interpolate</span> : <span class=\"regexp\">/&lt;%=([\\s\\S]+?)%&gt;/g</span>,</div><div class=\"line\">    <span class=\"attr\">escape</span>      : <span class=\"regexp\">/&lt;%-([\\s\\S]+?)%&gt;/g</span></div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// When customizing `templateSettings`, if you don't want to define an</span></div><div class=\"line\">  <span class=\"comment\">// interpolation, evaluation or escaping regex, we need one that is</span></div><div class=\"line\">  <span class=\"comment\">// guaranteed not to match.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> noMatch = <span class=\"regexp\">/(.)^/</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Certain characters need to be escaped so that they can be put into a</span></div><div class=\"line\">  <span class=\"comment\">// string literal.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> escapes = &#123;</div><div class=\"line\">    <span class=\"string\">\"'\"</span>:      <span class=\"string\">\"'\"</span>,</div><div class=\"line\">    <span class=\"string\">'\\\\'</span>:     <span class=\"string\">'\\\\'</span>,</div><div class=\"line\">    <span class=\"string\">'\\r'</span>:     <span class=\"string\">'r'</span>,</div><div class=\"line\">    <span class=\"string\">'\\n'</span>:     <span class=\"string\">'n'</span>,</div><div class=\"line\">    <span class=\"string\">'\\u2028'</span>: <span class=\"string\">'u2028'</span>,</div><div class=\"line\">    <span class=\"string\">'\\u2029'</span>: <span class=\"string\">'u2029'</span></div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> escaper = <span class=\"regexp\">/\\\\|'|\\r|\\n|\\u2028|\\u2029/g</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> escapeChar = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">match</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'\\\\'</span> + escapes[match];</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// JavaScript micro-templating, similar to John Resig's implementation.</span></div><div class=\"line\">  <span class=\"comment\">// Underscore templating handles arbitrary delimiters, preserves whitespace,</span></div><div class=\"line\">  <span class=\"comment\">// and correctly escapes quotes within interpolated code.</span></div><div class=\"line\">  <span class=\"comment\">// NB: `oldSettings` only exists for backwards compatibility.</span></div><div class=\"line\">  _.template = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">text, settings, oldSettings</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!settings &amp;&amp; oldSettings) settings = oldSettings;</div><div class=\"line\">    settings = _.defaults(&#123;&#125;, settings, _.templateSettings);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Combine delimiters into one regular expression via alternation.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> matcher = <span class=\"built_in\">RegExp</span>([</div><div class=\"line\">      (settings.escape || noMatch).source,</div><div class=\"line\">      (settings.interpolate || noMatch).source,</div><div class=\"line\">      (settings.evaluate || noMatch).source</div><div class=\"line\">    ].join(<span class=\"string\">'|'</span>) + <span class=\"string\">'|$'</span>, <span class=\"string\">'g'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Compile the template source, escaping string literals appropriately.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> index = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> source = <span class=\"string\">\"__p+='\"</span>;</div><div class=\"line\">    text.replace(matcher, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">match, escape, interpolate, evaluate, offset</span>) </span>&#123;</div><div class=\"line\">      source += text.slice(index, offset).replace(escaper, escapeChar);</div><div class=\"line\">      index = offset + match.length;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">escape</span>) &#123;</div><div class=\"line\">        source += <span class=\"string\">\"'+\\n((__t=(\"</span> + <span class=\"built_in\">escape</span> + <span class=\"string\">\"))==null?'':_.escape(__t))+\\n'\"</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (interpolate) &#123;</div><div class=\"line\">        source += <span class=\"string\">\"'+\\n((__t=(\"</span> + interpolate + <span class=\"string\">\"))==null?'':__t)+\\n'\"</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (evaluate) &#123;</div><div class=\"line\">        source += <span class=\"string\">\"';\\n\"</span> + evaluate + <span class=\"string\">\"\\n__p+='\"</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// Adobe VMs need the match returned to produce the correct offest.</span></div><div class=\"line\">      <span class=\"keyword\">return</span> match;</div><div class=\"line\">    &#125;);</div><div class=\"line\">    source += <span class=\"string\">\"';\\n\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// If a variable is not specified, place data values in local scope.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (!settings.variable) source = <span class=\"string\">'with(obj||&#123;&#125;)&#123;\\n'</span> + source + <span class=\"string\">'&#125;\\n'</span>;</div><div class=\"line\"></div><div class=\"line\">    source = <span class=\"string\">\"var __t,__p='',__j=Array.prototype.join,\"</span> +</div><div class=\"line\">      <span class=\"string\">\"print=function()&#123;__p+=__j.call(arguments,'');&#125;;\\n\"</span> +</div><div class=\"line\">      source + <span class=\"string\">'return __p;\\n'</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> render = <span class=\"keyword\">new</span> <span class=\"built_in\">Function</span>(settings.variable || <span class=\"string\">'obj'</span>, <span class=\"string\">'_'</span>, source);</div><div class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</div><div class=\"line\">      e.source = source;</div><div class=\"line\">      <span class=\"keyword\">throw</span> e;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> template = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> render.call(<span class=\"keyword\">this</span>, data, _);</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Provide the compiled source as a convenience for precompilation.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> argument = settings.variable || <span class=\"string\">'obj'</span>;</div><div class=\"line\">    template.source = <span class=\"string\">'function('</span> + argument + <span class=\"string\">')&#123;\\n'</span> + source + <span class=\"string\">'&#125;'</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> template;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add a \"chain\" function. Start chaining a wrapped Underscore object.</span></div><div class=\"line\">  _.chain = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> instance = _(obj);</div><div class=\"line\">    instance._chain = <span class=\"literal\">true</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> instance;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// OOP</span></div><div class=\"line\">  <span class=\"comment\">// ---------------</span></div><div class=\"line\">  <span class=\"comment\">// If Underscore is called as a function, it returns a wrapped object that</span></div><div class=\"line\">  <span class=\"comment\">// can be used OO-style. This wrapper holds altered versions of all the</span></div><div class=\"line\">  <span class=\"comment\">// underscore functions. Wrapped objects may be chained.</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Helper function to continue chaining intermediate results.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> result = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">instance, obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> instance._chain ? _(obj).chain() : obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add your own custom functions to the Underscore object.</span></div><div class=\"line\">  _.mixin = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    _.each(_.functions(obj), <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> func = _[name] = obj[name];</div><div class=\"line\">      _.prototype[name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> args = [<span class=\"keyword\">this</span>._wrapped];</div><div class=\"line\">        push.apply(args, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> result(<span class=\"keyword\">this</span>, func.apply(_, args));</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add all of the Underscore functions to the wrapper object.</span></div><div class=\"line\">  _.mixin(_);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add all mutator Array functions to the wrapper.</span></div><div class=\"line\">  _.each([<span class=\"string\">'pop'</span>, <span class=\"string\">'push'</span>, <span class=\"string\">'reverse'</span>, <span class=\"string\">'shift'</span>, <span class=\"string\">'sort'</span>, <span class=\"string\">'splice'</span>, <span class=\"string\">'unshift'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> method = ArrayProto[name];</div><div class=\"line\">    _.prototype[name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> obj = <span class=\"keyword\">this</span>._wrapped;</div><div class=\"line\">      method.apply(obj, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">if</span> ((name === <span class=\"string\">'shift'</span> || name === <span class=\"string\">'splice'</span>) &amp;&amp; obj.length === <span class=\"number\">0</span>) <span class=\"keyword\">delete</span> obj[<span class=\"number\">0</span>];</div><div class=\"line\">      <span class=\"keyword\">return</span> result(<span class=\"keyword\">this</span>, obj);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add all accessor Array functions to the wrapper.</span></div><div class=\"line\">  _.each([<span class=\"string\">'concat'</span>, <span class=\"string\">'join'</span>, <span class=\"string\">'slice'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> method = ArrayProto[name];</div><div class=\"line\">    _.prototype[name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> result(<span class=\"keyword\">this</span>, method.apply(<span class=\"keyword\">this</span>._wrapped, <span class=\"built_in\">arguments</span>));</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Extracts the result from a wrapped and chained object.</span></div><div class=\"line\">  _.prototype.value = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._wrapped;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Provide unwrapping proxy for some methods used in engine operations</span></div><div class=\"line\">  <span class=\"comment\">// such as arithmetic and JSON stringification.</span></div><div class=\"line\">  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;</div><div class=\"line\"></div><div class=\"line\">  _.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">''</span> + <span class=\"keyword\">this</span>._wrapped;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// AMD registration happens at the end for compatibility with AMD loaders</span></div><div class=\"line\">  <span class=\"comment\">// that may not enforce next-turn semantics on modules. Even though general</span></div><div class=\"line\">  <span class=\"comment\">// practice for AMD registration is to be anonymous, underscore registers</span></div><div class=\"line\">  <span class=\"comment\">// as a named module because, like jQuery, it is a base library that is</span></div><div class=\"line\">  <span class=\"comment\">// popular enough to be bundled in a third party lib, but not be part of</span></div><div class=\"line\">  <span class=\"comment\">// an AMD load request. Those cases could generate an error when an</span></div><div class=\"line\">  <span class=\"comment\">// anonymous define() is called outside of a loader request.</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">    define(<span class=\"string\">'underscore'</span>, [], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;.call(<span class=\"keyword\">this</span>));</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://www.css88.com/doc/underscore1.8.2/docs/underscore.html\" target=\"_blank\" rel=\"external\">http://www.css88.com/doc/underscore1.8.2/docs/underscore.html</a></p>\n<h3 id=\"Underscore-source-code\"><a href=\"#Underscore-source-code\" class=\"headerlink\" title=\"Underscore source code\"></a>Underscore source code</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div><div class=\"line\">246</div><div class=\"line\">247</div><div class=\"line\">248</div><div class=\"line\">249</div><div class=\"line\">250</div><div class=\"line\">251</div><div class=\"line\">252</div><div class=\"line\">253</div><div class=\"line\">254</div><div class=\"line\">255</div><div class=\"line\">256</div><div class=\"line\">257</div><div class=\"line\">258</div><div class=\"line\">259</div><div class=\"line\">260</div><div class=\"line\">261</div><div class=\"line\">262</div><div class=\"line\">263</div><div class=\"line\">264</div><div class=\"line\">265</div><div class=\"line\">266</div><div class=\"line\">267</div><div class=\"line\">268</div><div class=\"line\">269</div><div class=\"line\">270</div><div class=\"line\">271</div><div class=\"line\">272</div><div class=\"line\">273</div><div class=\"line\">274</div><div class=\"line\">275</div><div class=\"line\">276</div><div class=\"line\">277</div><div class=\"line\">278</div><div class=\"line\">279</div><div class=\"line\">280</div><div class=\"line\">281</div><div class=\"line\">282</div><div class=\"line\">283</div><div class=\"line\">284</div><div class=\"line\">285</div><div class=\"line\">286</div><div class=\"line\">287</div><div class=\"line\">288</div><div class=\"line\">289</div><div class=\"line\">290</div><div class=\"line\">291</div><div class=\"line\">292</div><div class=\"line\">293</div><div class=\"line\">294</div><div class=\"line\">295</div><div class=\"line\">296</div><div class=\"line\">297</div><div class=\"line\">298</div><div class=\"line\">299</div><div class=\"line\">300</div><div class=\"line\">301</div><div class=\"line\">302</div><div class=\"line\">303</div><div class=\"line\">304</div><div class=\"line\">305</div><div class=\"line\">306</div><div class=\"line\">307</div><div class=\"line\">308</div><div class=\"line\">309</div><div class=\"line\">310</div><div class=\"line\">311</div><div class=\"line\">312</div><div class=\"line\">313</div><div class=\"line\">314</div><div class=\"line\">315</div><div class=\"line\">316</div><div class=\"line\">317</div><div class=\"line\">318</div><div class=\"line\">319</div><div class=\"line\">320</div><div class=\"line\">321</div><div class=\"line\">322</div><div class=\"line\">323</div><div class=\"line\">324</div><div class=\"line\">325</div><div class=\"line\">326</div><div class=\"line\">327</div><div class=\"line\">328</div><div class=\"line\">329</div><div class=\"line\">330</div><div class=\"line\">331</div><div class=\"line\">332</div><div class=\"line\">333</div><div class=\"line\">334</div><div class=\"line\">335</div><div class=\"line\">336</div><div class=\"line\">337</div><div class=\"line\">338</div><div class=\"line\">339</div><div class=\"line\">340</div><div class=\"line\">341</div><div class=\"line\">342</div><div class=\"line\">343</div><div class=\"line\">344</div><div class=\"line\">345</div><div class=\"line\">346</div><div class=\"line\">347</div><div class=\"line\">348</div><div class=\"line\">349</div><div class=\"line\">350</div><div class=\"line\">351</div><div class=\"line\">352</div><div class=\"line\">353</div><div class=\"line\">354</div><div class=\"line\">355</div><div class=\"line\">356</div><div class=\"line\">357</div><div class=\"line\">358</div><div class=\"line\">359</div><div class=\"line\">360</div><div class=\"line\">361</div><div class=\"line\">362</div><div class=\"line\">363</div><div class=\"line\">364</div><div class=\"line\">365</div><div class=\"line\">366</div><div class=\"line\">367</div><div class=\"line\">368</div><div class=\"line\">369</div><div class=\"line\">370</div><div class=\"line\">371</div><div class=\"line\">372</div><div class=\"line\">373</div><div class=\"line\">374</div><div class=\"line\">375</div><div class=\"line\">376</div><div class=\"line\">377</div><div class=\"line\">378</div><div class=\"line\">379</div><div class=\"line\">380</div><div class=\"line\">381</div><div class=\"line\">382</div><div class=\"line\">383</div><div class=\"line\">384</div><div class=\"line\">385</div><div class=\"line\">386</div><div class=\"line\">387</div><div class=\"line\">388</div><div class=\"line\">389</div><div class=\"line\">390</div><div class=\"line\">391</div><div class=\"line\">392</div><div class=\"line\">393</div><div class=\"line\">394</div><div class=\"line\">395</div><div class=\"line\">396</div><div class=\"line\">397</div><div class=\"line\">398</div><div class=\"line\">399</div><div class=\"line\">400</div><div class=\"line\">401</div><div class=\"line\">402</div><div class=\"line\">403</div><div class=\"line\">404</div><div class=\"line\">405</div><div class=\"line\">406</div><div class=\"line\">407</div><div class=\"line\">408</div><div class=\"line\">409</div><div class=\"line\">410</div><div class=\"line\">411</div><div class=\"line\">412</div><div class=\"line\">413</div><div class=\"line\">414</div><div class=\"line\">415</div><div class=\"line\">416</div><div class=\"line\">417</div><div class=\"line\">418</div><div class=\"line\">419</div><div class=\"line\">420</div><div class=\"line\">421</div><div class=\"line\">422</div><div class=\"line\">423</div><div class=\"line\">424</div><div class=\"line\">425</div><div class=\"line\">426</div><div class=\"line\">427</div><div class=\"line\">428</div><div class=\"line\">429</div><div class=\"line\">430</div><div class=\"line\">431</div><div class=\"line\">432</div><div class=\"line\">433</div><div class=\"line\">434</div><div class=\"line\">435</div><div class=\"line\">436</div><div class=\"line\">437</div><div class=\"line\">438</div><div class=\"line\">439</div><div class=\"line\">440</div><div class=\"line\">441</div><div class=\"line\">442</div><div class=\"line\">443</div><div class=\"line\">444</div><div class=\"line\">445</div><div class=\"line\">446</div><div class=\"line\">447</div><div class=\"line\">448</div><div class=\"line\">449</div><div class=\"line\">450</div><div class=\"line\">451</div><div class=\"line\">452</div><div class=\"line\">453</div><div class=\"line\">454</div><div class=\"line\">455</div><div class=\"line\">456</div><div class=\"line\">457</div><div class=\"line\">458</div><div class=\"line\">459</div><div class=\"line\">460</div><div class=\"line\">461</div><div class=\"line\">462</div><div class=\"line\">463</div><div class=\"line\">464</div><div class=\"line\">465</div><div class=\"line\">466</div><div class=\"line\">467</div><div class=\"line\">468</div><div class=\"line\">469</div><div class=\"line\">470</div><div class=\"line\">471</div><div class=\"line\">472</div><div class=\"line\">473</div><div class=\"line\">474</div><div class=\"line\">475</div><div class=\"line\">476</div><div class=\"line\">477</div><div class=\"line\">478</div><div class=\"line\">479</div><div class=\"line\">480</div><div class=\"line\">481</div><div class=\"line\">482</div><div class=\"line\">483</div><div class=\"line\">484</div><div class=\"line\">485</div><div class=\"line\">486</div><div class=\"line\">487</div><div class=\"line\">488</div><div class=\"line\">489</div><div class=\"line\">490</div><div class=\"line\">491</div><div class=\"line\">492</div><div class=\"line\">493</div><div class=\"line\">494</div><div class=\"line\">495</div><div class=\"line\">496</div><div class=\"line\">497</div><div class=\"line\">498</div><div class=\"line\">499</div><div class=\"line\">500</div><div class=\"line\">501</div><div class=\"line\">502</div><div class=\"line\">503</div><div class=\"line\">504</div><div class=\"line\">505</div><div class=\"line\">506</div><div class=\"line\">507</div><div class=\"line\">508</div><div class=\"line\">509</div><div class=\"line\">510</div><div class=\"line\">511</div><div class=\"line\">512</div><div class=\"line\">513</div><div class=\"line\">514</div><div class=\"line\">515</div><div class=\"line\">516</div><div class=\"line\">517</div><div class=\"line\">518</div><div class=\"line\">519</div><div class=\"line\">520</div><div class=\"line\">521</div><div class=\"line\">522</div><div class=\"line\">523</div><div class=\"line\">524</div><div class=\"line\">525</div><div class=\"line\">526</div><div class=\"line\">527</div><div class=\"line\">528</div><div class=\"line\">529</div><div class=\"line\">530</div><div class=\"line\">531</div><div class=\"line\">532</div><div class=\"line\">533</div><div class=\"line\">534</div><div class=\"line\">535</div><div class=\"line\">536</div><div class=\"line\">537</div><div class=\"line\">538</div><div class=\"line\">539</div><div class=\"line\">540</div><div class=\"line\">541</div><div class=\"line\">542</div><div class=\"line\">543</div><div class=\"line\">544</div><div class=\"line\">545</div><div class=\"line\">546</div><div class=\"line\">547</div><div class=\"line\">548</div><div class=\"line\">549</div><div class=\"line\">550</div><div class=\"line\">551</div><div class=\"line\">552</div><div class=\"line\">553</div><div class=\"line\">554</div><div class=\"line\">555</div><div class=\"line\">556</div><div class=\"line\">557</div><div class=\"line\">558</div><div class=\"line\">559</div><div class=\"line\">560</div><div class=\"line\">561</div><div class=\"line\">562</div><div class=\"line\">563</div><div class=\"line\">564</div><div class=\"line\">565</div><div class=\"line\">566</div><div class=\"line\">567</div><div class=\"line\">568</div><div class=\"line\">569</div><div class=\"line\">570</div><div class=\"line\">571</div><div class=\"line\">572</div><div class=\"line\">573</div><div class=\"line\">574</div><div class=\"line\">575</div><div class=\"line\">576</div><div class=\"line\">577</div><div class=\"line\">578</div><div class=\"line\">579</div><div class=\"line\">580</div><div class=\"line\">581</div><div class=\"line\">582</div><div class=\"line\">583</div><div class=\"line\">584</div><div class=\"line\">585</div><div class=\"line\">586</div><div class=\"line\">587</div><div class=\"line\">588</div><div class=\"line\">589</div><div class=\"line\">590</div><div class=\"line\">591</div><div class=\"line\">592</div><div class=\"line\">593</div><div class=\"line\">594</div><div class=\"line\">595</div><div class=\"line\">596</div><div class=\"line\">597</div><div class=\"line\">598</div><div class=\"line\">599</div><div class=\"line\">600</div><div class=\"line\">601</div><div class=\"line\">602</div><div class=\"line\">603</div><div class=\"line\">604</div><div class=\"line\">605</div><div class=\"line\">606</div><div class=\"line\">607</div><div class=\"line\">608</div><div class=\"line\">609</div><div class=\"line\">610</div><div class=\"line\">611</div><div class=\"line\">612</div><div class=\"line\">613</div><div class=\"line\">614</div><div class=\"line\">615</div><div class=\"line\">616</div><div class=\"line\">617</div><div class=\"line\">618</div><div class=\"line\">619</div><div class=\"line\">620</div><div class=\"line\">621</div><div class=\"line\">622</div><div class=\"line\">623</div><div class=\"line\">624</div><div class=\"line\">625</div><div class=\"line\">626</div><div class=\"line\">627</div><div class=\"line\">628</div><div class=\"line\">629</div><div class=\"line\">630</div><div class=\"line\">631</div><div class=\"line\">632</div><div class=\"line\">633</div><div class=\"line\">634</div><div class=\"line\">635</div><div class=\"line\">636</div><div class=\"line\">637</div><div class=\"line\">638</div><div class=\"line\">639</div><div class=\"line\">640</div><div class=\"line\">641</div><div class=\"line\">642</div><div class=\"line\">643</div><div class=\"line\">644</div><div class=\"line\">645</div><div class=\"line\">646</div><div class=\"line\">647</div><div class=\"line\">648</div><div class=\"line\">649</div><div class=\"line\">650</div><div class=\"line\">651</div><div class=\"line\">652</div><div class=\"line\">653</div><div class=\"line\">654</div><div class=\"line\">655</div><div class=\"line\">656</div><div class=\"line\">657</div><div class=\"line\">658</div><div class=\"line\">659</div><div class=\"line\">660</div><div class=\"line\">661</div><div class=\"line\">662</div><div class=\"line\">663</div><div class=\"line\">664</div><div class=\"line\">665</div><div class=\"line\">666</div><div class=\"line\">667</div><div class=\"line\">668</div><div class=\"line\">669</div><div class=\"line\">670</div><div class=\"line\">671</div><div class=\"line\">672</div><div class=\"line\">673</div><div class=\"line\">674</div><div class=\"line\">675</div><div class=\"line\">676</div><div class=\"line\">677</div><div class=\"line\">678</div><div class=\"line\">679</div><div class=\"line\">680</div><div class=\"line\">681</div><div class=\"line\">682</div><div class=\"line\">683</div><div class=\"line\">684</div><div class=\"line\">685</div><div class=\"line\">686</div><div class=\"line\">687</div><div class=\"line\">688</div><div class=\"line\">689</div><div class=\"line\">690</div><div class=\"line\">691</div><div class=\"line\">692</div><div class=\"line\">693</div><div class=\"line\">694</div><div class=\"line\">695</div><div class=\"line\">696</div><div class=\"line\">697</div><div class=\"line\">698</div><div class=\"line\">699</div><div class=\"line\">700</div><div class=\"line\">701</div><div class=\"line\">702</div><div class=\"line\">703</div><div class=\"line\">704</div><div class=\"line\">705</div><div class=\"line\">706</div><div class=\"line\">707</div><div class=\"line\">708</div><div class=\"line\">709</div><div class=\"line\">710</div><div class=\"line\">711</div><div class=\"line\">712</div><div class=\"line\">713</div><div class=\"line\">714</div><div class=\"line\">715</div><div class=\"line\">716</div><div class=\"line\">717</div><div class=\"line\">718</div><div class=\"line\">719</div><div class=\"line\">720</div><div class=\"line\">721</div><div class=\"line\">722</div><div class=\"line\">723</div><div class=\"line\">724</div><div class=\"line\">725</div><div class=\"line\">726</div><div class=\"line\">727</div><div class=\"line\">728</div><div class=\"line\">729</div><div class=\"line\">730</div><div class=\"line\">731</div><div class=\"line\">732</div><div class=\"line\">733</div><div class=\"line\">734</div><div class=\"line\">735</div><div class=\"line\">736</div><div class=\"line\">737</div><div class=\"line\">738</div><div class=\"line\">739</div><div class=\"line\">740</div><div class=\"line\">741</div><div class=\"line\">742</div><div class=\"line\">743</div><div class=\"line\">744</div><div class=\"line\">745</div><div class=\"line\">746</div><div class=\"line\">747</div><div class=\"line\">748</div><div class=\"line\">749</div><div class=\"line\">750</div><div class=\"line\">751</div><div class=\"line\">752</div><div class=\"line\">753</div><div class=\"line\">754</div><div class=\"line\">755</div><div class=\"line\">756</div><div class=\"line\">757</div><div class=\"line\">758</div><div class=\"line\">759</div><div class=\"line\">760</div><div class=\"line\">761</div><div class=\"line\">762</div><div class=\"line\">763</div><div class=\"line\">764</div><div class=\"line\">765</div><div class=\"line\">766</div><div class=\"line\">767</div><div class=\"line\">768</div><div class=\"line\">769</div><div class=\"line\">770</div><div class=\"line\">771</div><div class=\"line\">772</div><div class=\"line\">773</div><div class=\"line\">774</div><div class=\"line\">775</div><div class=\"line\">776</div><div class=\"line\">777</div><div class=\"line\">778</div><div class=\"line\">779</div><div class=\"line\">780</div><div class=\"line\">781</div><div class=\"line\">782</div><div class=\"line\">783</div><div class=\"line\">784</div><div class=\"line\">785</div><div class=\"line\">786</div><div class=\"line\">787</div><div class=\"line\">788</div><div class=\"line\">789</div><div class=\"line\">790</div><div class=\"line\">791</div><div class=\"line\">792</div><div class=\"line\">793</div><div class=\"line\">794</div><div class=\"line\">795</div><div class=\"line\">796</div><div class=\"line\">797</div><div class=\"line\">798</div><div class=\"line\">799</div><div class=\"line\">800</div><div class=\"line\">801</div><div class=\"line\">802</div><div class=\"line\">803</div><div class=\"line\">804</div><div class=\"line\">805</div><div class=\"line\">806</div><div class=\"line\">807</div><div class=\"line\">808</div><div class=\"line\">809</div><div class=\"line\">810</div><div class=\"line\">811</div><div class=\"line\">812</div><div class=\"line\">813</div><div class=\"line\">814</div><div class=\"line\">815</div><div class=\"line\">816</div><div class=\"line\">817</div><div class=\"line\">818</div><div class=\"line\">819</div><div class=\"line\">820</div><div class=\"line\">821</div><div class=\"line\">822</div><div class=\"line\">823</div><div class=\"line\">824</div><div class=\"line\">825</div><div class=\"line\">826</div><div class=\"line\">827</div><div class=\"line\">828</div><div class=\"line\">829</div><div class=\"line\">830</div><div class=\"line\">831</div><div class=\"line\">832</div><div class=\"line\">833</div><div class=\"line\">834</div><div class=\"line\">835</div><div class=\"line\">836</div><div class=\"line\">837</div><div class=\"line\">838</div><div class=\"line\">839</div><div class=\"line\">840</div><div class=\"line\">841</div><div class=\"line\">842</div><div class=\"line\">843</div><div class=\"line\">844</div><div class=\"line\">845</div><div class=\"line\">846</div><div class=\"line\">847</div><div class=\"line\">848</div><div class=\"line\">849</div><div class=\"line\">850</div><div class=\"line\">851</div><div class=\"line\">852</div><div class=\"line\">853</div><div class=\"line\">854</div><div class=\"line\">855</div><div class=\"line\">856</div><div class=\"line\">857</div><div class=\"line\">858</div><div class=\"line\">859</div><div class=\"line\">860</div><div class=\"line\">861</div><div class=\"line\">862</div><div class=\"line\">863</div><div class=\"line\">864</div><div class=\"line\">865</div><div class=\"line\">866</div><div class=\"line\">867</div><div class=\"line\">868</div><div class=\"line\">869</div><div class=\"line\">870</div><div class=\"line\">871</div><div class=\"line\">872</div><div class=\"line\">873</div><div class=\"line\">874</div><div class=\"line\">875</div><div class=\"line\">876</div><div class=\"line\">877</div><div class=\"line\">878</div><div class=\"line\">879</div><div class=\"line\">880</div><div class=\"line\">881</div><div class=\"line\">882</div><div class=\"line\">883</div><div class=\"line\">884</div><div class=\"line\">885</div><div class=\"line\">886</div><div class=\"line\">887</div><div class=\"line\">888</div><div class=\"line\">889</div><div class=\"line\">890</div><div class=\"line\">891</div><div class=\"line\">892</div><div class=\"line\">893</div><div class=\"line\">894</div><div class=\"line\">895</div><div class=\"line\">896</div><div class=\"line\">897</div><div class=\"line\">898</div><div class=\"line\">899</div><div class=\"line\">900</div><div class=\"line\">901</div><div class=\"line\">902</div><div class=\"line\">903</div><div class=\"line\">904</div><div class=\"line\">905</div><div class=\"line\">906</div><div class=\"line\">907</div><div class=\"line\">908</div><div class=\"line\">909</div><div class=\"line\">910</div><div class=\"line\">911</div><div class=\"line\">912</div><div class=\"line\">913</div><div class=\"line\">914</div><div class=\"line\">915</div><div class=\"line\">916</div><div class=\"line\">917</div><div class=\"line\">918</div><div class=\"line\">919</div><div class=\"line\">920</div><div class=\"line\">921</div><div class=\"line\">922</div><div class=\"line\">923</div><div class=\"line\">924</div><div class=\"line\">925</div><div class=\"line\">926</div><div class=\"line\">927</div><div class=\"line\">928</div><div class=\"line\">929</div><div class=\"line\">930</div><div class=\"line\">931</div><div class=\"line\">932</div><div class=\"line\">933</div><div class=\"line\">934</div><div class=\"line\">935</div><div class=\"line\">936</div><div class=\"line\">937</div><div class=\"line\">938</div><div class=\"line\">939</div><div class=\"line\">940</div><div class=\"line\">941</div><div class=\"line\">942</div><div class=\"line\">943</div><div class=\"line\">944</div><div class=\"line\">945</div><div class=\"line\">946</div><div class=\"line\">947</div><div class=\"line\">948</div><div class=\"line\">949</div><div class=\"line\">950</div><div class=\"line\">951</div><div class=\"line\">952</div><div class=\"line\">953</div><div class=\"line\">954</div><div class=\"line\">955</div><div class=\"line\">956</div><div class=\"line\">957</div><div class=\"line\">958</div><div class=\"line\">959</div><div class=\"line\">960</div><div class=\"line\">961</div><div class=\"line\">962</div><div class=\"line\">963</div><div class=\"line\">964</div><div class=\"line\">965</div><div class=\"line\">966</div><div class=\"line\">967</div><div class=\"line\">968</div><div class=\"line\">969</div><div class=\"line\">970</div><div class=\"line\">971</div><div class=\"line\">972</div><div class=\"line\">973</div><div class=\"line\">974</div><div class=\"line\">975</div><div class=\"line\">976</div><div class=\"line\">977</div><div class=\"line\">978</div><div class=\"line\">979</div><div class=\"line\">980</div><div class=\"line\">981</div><div class=\"line\">982</div><div class=\"line\">983</div><div class=\"line\">984</div><div class=\"line\">985</div><div class=\"line\">986</div><div class=\"line\">987</div><div class=\"line\">988</div><div class=\"line\">989</div><div class=\"line\">990</div><div class=\"line\">991</div><div class=\"line\">992</div><div class=\"line\">993</div><div class=\"line\">994</div><div class=\"line\">995</div><div class=\"line\">996</div><div class=\"line\">997</div><div class=\"line\">998</div><div class=\"line\">999</div><div class=\"line\">1000</div><div class=\"line\">1001</div><div class=\"line\">1002</div><div class=\"line\">1003</div><div class=\"line\">1004</div><div class=\"line\">1005</div><div class=\"line\">1006</div><div class=\"line\">1007</div><div class=\"line\">1008</div><div class=\"line\">1009</div><div class=\"line\">1010</div><div class=\"line\">1011</div><div class=\"line\">1012</div><div class=\"line\">1013</div><div class=\"line\">1014</div><div class=\"line\">1015</div><div class=\"line\">1016</div><div class=\"line\">1017</div><div class=\"line\">1018</div><div class=\"line\">1019</div><div class=\"line\">1020</div><div class=\"line\">1021</div><div class=\"line\">1022</div><div class=\"line\">1023</div><div class=\"line\">1024</div><div class=\"line\">1025</div><div class=\"line\">1026</div><div class=\"line\">1027</div><div class=\"line\">1028</div><div class=\"line\">1029</div><div class=\"line\">1030</div><div class=\"line\">1031</div><div class=\"line\">1032</div><div class=\"line\">1033</div><div class=\"line\">1034</div><div class=\"line\">1035</div><div class=\"line\">1036</div><div class=\"line\">1037</div><div class=\"line\">1038</div><div class=\"line\">1039</div><div class=\"line\">1040</div><div class=\"line\">1041</div><div class=\"line\">1042</div><div class=\"line\">1043</div><div class=\"line\">1044</div><div class=\"line\">1045</div><div class=\"line\">1046</div><div class=\"line\">1047</div><div class=\"line\">1048</div><div class=\"line\">1049</div><div class=\"line\">1050</div><div class=\"line\">1051</div><div class=\"line\">1052</div><div class=\"line\">1053</div><div class=\"line\">1054</div><div class=\"line\">1055</div><div class=\"line\">1056</div><div class=\"line\">1057</div><div class=\"line\">1058</div><div class=\"line\">1059</div><div class=\"line\">1060</div><div class=\"line\">1061</div><div class=\"line\">1062</div><div class=\"line\">1063</div><div class=\"line\">1064</div><div class=\"line\">1065</div><div class=\"line\">1066</div><div class=\"line\">1067</div><div class=\"line\">1068</div><div class=\"line\">1069</div><div class=\"line\">1070</div><div class=\"line\">1071</div><div class=\"line\">1072</div><div class=\"line\">1073</div><div class=\"line\">1074</div><div class=\"line\">1075</div><div class=\"line\">1076</div><div class=\"line\">1077</div><div class=\"line\">1078</div><div class=\"line\">1079</div><div class=\"line\">1080</div><div class=\"line\">1081</div><div class=\"line\">1082</div><div class=\"line\">1083</div><div class=\"line\">1084</div><div class=\"line\">1085</div><div class=\"line\">1086</div><div class=\"line\">1087</div><div class=\"line\">1088</div><div class=\"line\">1089</div><div class=\"line\">1090</div><div class=\"line\">1091</div><div class=\"line\">1092</div><div class=\"line\">1093</div><div class=\"line\">1094</div><div class=\"line\">1095</div><div class=\"line\">1096</div><div class=\"line\">1097</div><div class=\"line\">1098</div><div class=\"line\">1099</div><div class=\"line\">1100</div><div class=\"line\">1101</div><div class=\"line\">1102</div><div class=\"line\">1103</div><div class=\"line\">1104</div><div class=\"line\">1105</div><div class=\"line\">1106</div><div class=\"line\">1107</div><div class=\"line\">1108</div><div class=\"line\">1109</div><div class=\"line\">1110</div><div class=\"line\">1111</div><div class=\"line\">1112</div><div class=\"line\">1113</div><div class=\"line\">1114</div><div class=\"line\">1115</div><div class=\"line\">1116</div><div class=\"line\">1117</div><div class=\"line\">1118</div><div class=\"line\">1119</div><div class=\"line\">1120</div><div class=\"line\">1121</div><div class=\"line\">1122</div><div class=\"line\">1123</div><div class=\"line\">1124</div><div class=\"line\">1125</div><div class=\"line\">1126</div><div class=\"line\">1127</div><div class=\"line\">1128</div><div class=\"line\">1129</div><div class=\"line\">1130</div><div class=\"line\">1131</div><div class=\"line\">1132</div><div class=\"line\">1133</div><div class=\"line\">1134</div><div class=\"line\">1135</div><div class=\"line\">1136</div><div class=\"line\">1137</div><div class=\"line\">1138</div><div class=\"line\">1139</div><div class=\"line\">1140</div><div class=\"line\">1141</div><div class=\"line\">1142</div><div class=\"line\">1143</div><div class=\"line\">1144</div><div class=\"line\">1145</div><div class=\"line\">1146</div><div class=\"line\">1147</div><div class=\"line\">1148</div><div class=\"line\">1149</div><div class=\"line\">1150</div><div class=\"line\">1151</div><div class=\"line\">1152</div><div class=\"line\">1153</div><div class=\"line\">1154</div><div class=\"line\">1155</div><div class=\"line\">1156</div><div class=\"line\">1157</div><div class=\"line\">1158</div><div class=\"line\">1159</div><div class=\"line\">1160</div><div class=\"line\">1161</div><div class=\"line\">1162</div><div class=\"line\">1163</div><div class=\"line\">1164</div><div class=\"line\">1165</div><div class=\"line\">1166</div><div class=\"line\">1167</div><div class=\"line\">1168</div><div class=\"line\">1169</div><div class=\"line\">1170</div><div class=\"line\">1171</div><div class=\"line\">1172</div><div class=\"line\">1173</div><div class=\"line\">1174</div><div class=\"line\">1175</div><div class=\"line\">1176</div><div class=\"line\">1177</div><div class=\"line\">1178</div><div class=\"line\">1179</div><div class=\"line\">1180</div><div class=\"line\">1181</div><div class=\"line\">1182</div><div class=\"line\">1183</div><div class=\"line\">1184</div><div class=\"line\">1185</div><div class=\"line\">1186</div><div class=\"line\">1187</div><div class=\"line\">1188</div><div class=\"line\">1189</div><div class=\"line\">1190</div><div class=\"line\">1191</div><div class=\"line\">1192</div><div class=\"line\">1193</div><div class=\"line\">1194</div><div class=\"line\">1195</div><div class=\"line\">1196</div><div class=\"line\">1197</div><div class=\"line\">1198</div><div class=\"line\">1199</div><div class=\"line\">1200</div><div class=\"line\">1201</div><div class=\"line\">1202</div><div class=\"line\">1203</div><div class=\"line\">1204</div><div class=\"line\">1205</div><div class=\"line\">1206</div><div class=\"line\">1207</div><div class=\"line\">1208</div><div class=\"line\">1209</div><div class=\"line\">1210</div><div class=\"line\">1211</div><div class=\"line\">1212</div><div class=\"line\">1213</div><div class=\"line\">1214</div><div class=\"line\">1215</div><div class=\"line\">1216</div><div class=\"line\">1217</div><div class=\"line\">1218</div><div class=\"line\">1219</div><div class=\"line\">1220</div><div class=\"line\">1221</div><div class=\"line\">1222</div><div class=\"line\">1223</div><div class=\"line\">1224</div><div class=\"line\">1225</div><div class=\"line\">1226</div><div class=\"line\">1227</div><div class=\"line\">1228</div><div class=\"line\">1229</div><div class=\"line\">1230</div><div class=\"line\">1231</div><div class=\"line\">1232</div><div class=\"line\">1233</div><div class=\"line\">1234</div><div class=\"line\">1235</div><div class=\"line\">1236</div><div class=\"line\">1237</div><div class=\"line\">1238</div><div class=\"line\">1239</div><div class=\"line\">1240</div><div class=\"line\">1241</div><div class=\"line\">1242</div><div class=\"line\">1243</div><div class=\"line\">1244</div><div class=\"line\">1245</div><div class=\"line\">1246</div><div class=\"line\">1247</div><div class=\"line\">1248</div><div class=\"line\">1249</div><div class=\"line\">1250</div><div class=\"line\">1251</div><div class=\"line\">1252</div><div class=\"line\">1253</div><div class=\"line\">1254</div><div class=\"line\">1255</div><div class=\"line\">1256</div><div class=\"line\">1257</div><div class=\"line\">1258</div><div class=\"line\">1259</div><div class=\"line\">1260</div><div class=\"line\">1261</div><div class=\"line\">1262</div><div class=\"line\">1263</div><div class=\"line\">1264</div><div class=\"line\">1265</div><div class=\"line\">1266</div><div class=\"line\">1267</div><div class=\"line\">1268</div><div class=\"line\">1269</div><div class=\"line\">1270</div><div class=\"line\">1271</div><div class=\"line\">1272</div><div class=\"line\">1273</div><div class=\"line\">1274</div><div class=\"line\">1275</div><div class=\"line\">1276</div><div class=\"line\">1277</div><div class=\"line\">1278</div><div class=\"line\">1279</div><div class=\"line\">1280</div><div class=\"line\">1281</div><div class=\"line\">1282</div><div class=\"line\">1283</div><div class=\"line\">1284</div><div class=\"line\">1285</div><div class=\"line\">1286</div><div class=\"line\">1287</div><div class=\"line\">1288</div><div class=\"line\">1289</div><div class=\"line\">1290</div><div class=\"line\">1291</div><div class=\"line\">1292</div><div class=\"line\">1293</div><div class=\"line\">1294</div><div class=\"line\">1295</div><div class=\"line\">1296</div><div class=\"line\">1297</div><div class=\"line\">1298</div><div class=\"line\">1299</div><div class=\"line\">1300</div><div class=\"line\">1301</div><div class=\"line\">1302</div><div class=\"line\">1303</div><div class=\"line\">1304</div><div class=\"line\">1305</div><div class=\"line\">1306</div><div class=\"line\">1307</div><div class=\"line\">1308</div><div class=\"line\">1309</div><div class=\"line\">1310</div><div class=\"line\">1311</div><div class=\"line\">1312</div><div class=\"line\">1313</div><div class=\"line\">1314</div><div class=\"line\">1315</div><div class=\"line\">1316</div><div class=\"line\">1317</div><div class=\"line\">1318</div><div class=\"line\">1319</div><div class=\"line\">1320</div><div class=\"line\">1321</div><div class=\"line\">1322</div><div class=\"line\">1323</div><div class=\"line\">1324</div><div class=\"line\">1325</div><div class=\"line\">1326</div><div class=\"line\">1327</div><div class=\"line\">1328</div><div class=\"line\">1329</div><div class=\"line\">1330</div><div class=\"line\">1331</div><div class=\"line\">1332</div><div class=\"line\">1333</div><div class=\"line\">1334</div><div class=\"line\">1335</div><div class=\"line\">1336</div><div class=\"line\">1337</div><div class=\"line\">1338</div><div class=\"line\">1339</div><div class=\"line\">1340</div><div class=\"line\">1341</div><div class=\"line\">1342</div><div class=\"line\">1343</div><div class=\"line\">1344</div><div class=\"line\">1345</div><div class=\"line\">1346</div><div class=\"line\">1347</div><div class=\"line\">1348</div><div class=\"line\">1349</div><div class=\"line\">1350</div><div class=\"line\">1351</div><div class=\"line\">1352</div><div class=\"line\">1353</div><div class=\"line\">1354</div><div class=\"line\">1355</div><div class=\"line\">1356</div><div class=\"line\">1357</div><div class=\"line\">1358</div><div class=\"line\">1359</div><div class=\"line\">1360</div><div class=\"line\">1361</div><div class=\"line\">1362</div><div class=\"line\">1363</div><div class=\"line\">1364</div><div class=\"line\">1365</div><div class=\"line\">1366</div><div class=\"line\">1367</div><div class=\"line\">1368</div><div class=\"line\">1369</div><div class=\"line\">1370</div><div class=\"line\">1371</div><div class=\"line\">1372</div><div class=\"line\">1373</div><div class=\"line\">1374</div><div class=\"line\">1375</div><div class=\"line\">1376</div><div class=\"line\">1377</div><div class=\"line\">1378</div><div class=\"line\">1379</div><div class=\"line\">1380</div><div class=\"line\">1381</div><div class=\"line\">1382</div><div class=\"line\">1383</div><div class=\"line\">1384</div><div class=\"line\">1385</div><div class=\"line\">1386</div><div class=\"line\">1387</div><div class=\"line\">1388</div><div class=\"line\">1389</div><div class=\"line\">1390</div><div class=\"line\">1391</div><div class=\"line\">1392</div><div class=\"line\">1393</div><div class=\"line\">1394</div><div class=\"line\">1395</div><div class=\"line\">1396</div><div class=\"line\">1397</div><div class=\"line\">1398</div><div class=\"line\">1399</div><div class=\"line\">1400</div><div class=\"line\">1401</div><div class=\"line\">1402</div><div class=\"line\">1403</div><div class=\"line\">1404</div><div class=\"line\">1405</div><div class=\"line\">1406</div><div class=\"line\">1407</div><div class=\"line\">1408</div><div class=\"line\">1409</div><div class=\"line\">1410</div><div class=\"line\">1411</div><div class=\"line\">1412</div><div class=\"line\">1413</div><div class=\"line\">1414</div><div class=\"line\">1415</div><div class=\"line\">1416</div><div class=\"line\">1417</div><div class=\"line\">1418</div><div class=\"line\">1419</div><div class=\"line\">1420</div><div class=\"line\">1421</div><div class=\"line\">1422</div><div class=\"line\">1423</div><div class=\"line\">1424</div><div class=\"line\">1425</div><div class=\"line\">1426</div><div class=\"line\">1427</div><div class=\"line\">1428</div><div class=\"line\">1429</div><div class=\"line\">1430</div><div class=\"line\">1431</div><div class=\"line\">1432</div><div class=\"line\">1433</div><div class=\"line\">1434</div><div class=\"line\">1435</div><div class=\"line\">1436</div><div class=\"line\">1437</div><div class=\"line\">1438</div><div class=\"line\">1439</div><div class=\"line\">1440</div><div class=\"line\">1441</div><div class=\"line\">1442</div><div class=\"line\">1443</div><div class=\"line\">1444</div><div class=\"line\">1445</div><div class=\"line\">1446</div><div class=\"line\">1447</div><div class=\"line\">1448</div><div class=\"line\">1449</div><div class=\"line\">1450</div><div class=\"line\">1451</div><div class=\"line\">1452</div><div class=\"line\">1453</div><div class=\"line\">1454</div><div class=\"line\">1455</div><div class=\"line\">1456</div><div class=\"line\">1457</div><div class=\"line\">1458</div><div class=\"line\">1459</div><div class=\"line\">1460</div><div class=\"line\">1461</div><div class=\"line\">1462</div><div class=\"line\">1463</div><div class=\"line\">1464</div><div class=\"line\">1465</div><div class=\"line\">1466</div><div class=\"line\">1467</div><div class=\"line\">1468</div><div class=\"line\">1469</div><div class=\"line\">1470</div><div class=\"line\">1471</div><div class=\"line\">1472</div><div class=\"line\">1473</div><div class=\"line\">1474</div><div class=\"line\">1475</div><div class=\"line\">1476</div><div class=\"line\">1477</div><div class=\"line\">1478</div><div class=\"line\">1479</div><div class=\"line\">1480</div><div class=\"line\">1481</div><div class=\"line\">1482</div><div class=\"line\">1483</div><div class=\"line\">1484</div><div class=\"line\">1485</div><div class=\"line\">1486</div><div class=\"line\">1487</div><div class=\"line\">1488</div><div class=\"line\">1489</div><div class=\"line\">1490</div><div class=\"line\">1491</div><div class=\"line\">1492</div><div class=\"line\">1493</div><div class=\"line\">1494</div><div class=\"line\">1495</div><div class=\"line\">1496</div><div class=\"line\">1497</div><div class=\"line\">1498</div><div class=\"line\">1499</div><div class=\"line\">1500</div><div class=\"line\">1501</div><div class=\"line\">1502</div><div class=\"line\">1503</div><div class=\"line\">1504</div><div class=\"line\">1505</div><div class=\"line\">1506</div><div class=\"line\">1507</div><div class=\"line\">1508</div><div class=\"line\">1509</div><div class=\"line\">1510</div><div class=\"line\">1511</div><div class=\"line\">1512</div><div class=\"line\">1513</div><div class=\"line\">1514</div><div class=\"line\">1515</div><div class=\"line\">1516</div><div class=\"line\">1517</div><div class=\"line\">1518</div><div class=\"line\">1519</div><div class=\"line\">1520</div><div class=\"line\">1521</div><div class=\"line\">1522</div><div class=\"line\">1523</div><div class=\"line\">1524</div><div class=\"line\">1525</div><div class=\"line\">1526</div><div class=\"line\">1527</div><div class=\"line\">1528</div><div class=\"line\">1529</div><div class=\"line\">1530</div><div class=\"line\">1531</div><div class=\"line\">1532</div><div class=\"line\">1533</div><div class=\"line\">1534</div><div class=\"line\">1535</div><div class=\"line\">1536</div><div class=\"line\">1537</div><div class=\"line\">1538</div><div class=\"line\">1539</div><div class=\"line\">1540</div><div class=\"line\">1541</div><div class=\"line\">1542</div><div class=\"line\">1543</div><div class=\"line\">1544</div><div class=\"line\">1545</div><div class=\"line\">1546</div><div class=\"line\">1547</div><div class=\"line\">1548</div><div class=\"line\">1549</div><div class=\"line\">1550</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//     Underscore.js 1.8.3</span></div><div class=\"line\"><span class=\"comment\">//     http://underscorejs.org</span></div><div class=\"line\"><span class=\"comment\">//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors</span></div><div class=\"line\"><span class=\"comment\">//     Underscore may be freely distributed under the MIT license.</span></div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Baseline setup</span></div><div class=\"line\">  <span class=\"comment\">// --------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Establish the root object, `window` in the browser, or `exports` on the server.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> root = <span class=\"keyword\">this</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Save the previous value of the `_` variable.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> previousUnderscore = root._;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Save bytes in the minified (but not gzipped) version:</span></div><div class=\"line\">  <span class=\"keyword\">var</span> ArrayProto = <span class=\"built_in\">Array</span>.prototype, ObjProto = <span class=\"built_in\">Object</span>.prototype, FuncProto = <span class=\"built_in\">Function</span>.prototype;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create quick reference variables for speed access to core prototypes.</span></div><div class=\"line\">  <span class=\"keyword\">var</span></div><div class=\"line\">    push             = ArrayProto.push,</div><div class=\"line\">    slice            = ArrayProto.slice,</div><div class=\"line\">    toString         = ObjProto.toString,</div><div class=\"line\">    hasOwnProperty   = ObjProto.hasOwnProperty; <span class=\"comment\">//è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ ï¼Œè¡¨ç¤ºæŸä¸ªå¯¹è±¡æ˜¯å¦å«æœ‰æŒ‡å®šçš„å±æ€§ï¼Œè€Œä¸”æ­¤å±æ€§éåŸå‹é“¾ç»§æ‰¿çš„ã€‚</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// All **ECMAScript 5** native function implementations that we hope to use</span></div><div class=\"line\">  <span class=\"comment\">// are declared here.</span></div><div class=\"line\">  <span class=\"keyword\">var</span></div><div class=\"line\">    nativeIsArray      = <span class=\"built_in\">Array</span>.isArray,</div><div class=\"line\">    nativeKeys         = <span class=\"built_in\">Object</span>.keys, <span class=\"comment\">//è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªæœ‰å¯éå†å±æ€§çš„åç§°ã€‚</span></div><div class=\"line\">    nativeBind         = FuncProto.bind,</div><div class=\"line\">    <span class=\"comment\">// bind()æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°,ç§°ä¸ºç»‘å®šå‡½æ•°.å½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶,ç»‘å®šå‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º this,</span></div><div class=\"line\">    <span class=\"comment\">// ä¼ å…¥ bind()æ–¹æ³•çš„ç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°åŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°æŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°.</span></div><div class=\"line\">    nativeCreate       = <span class=\"built_in\">Object</span>.create;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Naked function reference for surrogate-prototype-swapping.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> Ctor = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a safe reference to the Underscore object for use below.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> _ = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj <span class=\"keyword\">instanceof</span> _) <span class=\"keyword\">return</span> obj;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(<span class=\"keyword\">this</span> <span class=\"keyword\">instanceof</span> _)) <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _(obj);</div><div class=\"line\">    <span class=\"keyword\">this</span>._wrapped = obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Export the Underscore object for **Node.js**, with</span></div><div class=\"line\">  <span class=\"comment\">// backwards-compatibility for the old `require()` API. If we're in</span></div><div class=\"line\">  <span class=\"comment\">// the browser, add `_` as a global object.</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> exports !== <span class=\"string\">'undefined'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span> !== <span class=\"string\">'undefined'</span> &amp;&amp; <span class=\"built_in\">module</span>.exports) &#123;</div><div class=\"line\">      exports = <span class=\"built_in\">module</span>.exports = _;</div><div class=\"line\">    &#125;</div><div class=\"line\">    exports._ = _;</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    root._ = _;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Current version.</span></div><div class=\"line\">  _.VERSION = <span class=\"string\">'1.8.3'</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Internal function that returns an efficient (for current engines) version</span></div><div class=\"line\">  <span class=\"comment\">// of the passed-in callback, to be repeatedly applied in other Underscore</span></div><div class=\"line\">  <span class=\"comment\">// functions.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> optimizeCb = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, context, argCount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (context === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) <span class=\"keyword\">return</span> func;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (argCount == <span class=\"literal\">null</span> ? <span class=\"number\">3</span> : argCount) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">1</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, value);</div><div class=\"line\">      &#125;;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">2</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, other</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, value, other);</div><div class=\"line\">      &#125;;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">3</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, collection</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, value, index, collection);</div><div class=\"line\">      &#125;;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"number\">4</span>: <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">accumulator, value, index, collection</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.call(context, accumulator, value, index, collection);</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> func.apply(context, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// A mostly-internal function to generate callbacks that can be applied</span></div><div class=\"line\">  <span class=\"comment\">// to each element in a collection, returning the desired result â€” either</span></div><div class=\"line\">  <span class=\"comment\">// identity, an arbitrary callback, a property matcher, or a property accessor.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> cb = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, context, argCount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (value == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> _.identity;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isFunction(value)) <span class=\"keyword\">return</span> optimizeCb(value, context, argCount);</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isObject(value)) <span class=\"keyword\">return</span> _.matcher(value);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.property(value);</div><div class=\"line\">  &#125;;</div><div class=\"line\">  _.iteratee = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> cb(value, context, <span class=\"literal\">Infinity</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// An internal function for creating assigner functions.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> createAssigner = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">keysFunc, undefinedOnly</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> length = <span class=\"built_in\">arguments</span>.length;</div><div class=\"line\">      <span class=\"keyword\">if</span> (length &lt; <span class=\"number\">2</span> || obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> obj;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">1</span>; index &lt; length; index++) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> source = <span class=\"built_in\">arguments</span>[index],</div><div class=\"line\">            keys = keysFunc(source),</div><div class=\"line\">            l = keys.length;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; l; i++) &#123;</div><div class=\"line\">          <span class=\"keyword\">var</span> key = keys[i];</div><div class=\"line\">          <span class=\"keyword\">if</span> (!undefinedOnly || obj[key] === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) obj[key] = source[key];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> obj;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// An internal function for creating a new object that inherits from another.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> baseCreate = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">prototype</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(prototype)) <span class=\"keyword\">return</span> &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">if</span> (nativeCreate) <span class=\"keyword\">return</span> nativeCreate(prototype);</div><div class=\"line\">    Ctor.prototype = prototype;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"keyword\">new</span> Ctor;</div><div class=\"line\">    Ctor.prototype = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> property = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> obj == <span class=\"literal\">null</span> ? <span class=\"keyword\">void</span> <span class=\"number\">0</span> : obj[key];</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Helper for collection methods to determine whether a collection</span></div><div class=\"line\">  <span class=\"comment\">// should be iterated as an array or as an object</span></div><div class=\"line\">  <span class=\"comment\">// Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength</span></div><div class=\"line\">  <span class=\"comment\">// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094</span></div><div class=\"line\">  <span class=\"keyword\">var</span> MAX_ARRAY_INDEX = <span class=\"built_in\">Math</span>.pow(<span class=\"number\">2</span>, <span class=\"number\">53</span>) - <span class=\"number\">1</span>;</div><div class=\"line\">  <span class=\"keyword\">var</span> getLength = property(<span class=\"string\">'length'</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> isArrayLike = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">collection</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> length = getLength(collection);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> length == <span class=\"string\">'number'</span> &amp;&amp; length &gt;= <span class=\"number\">0</span> &amp;&amp; length &lt;= MAX_ARRAY_INDEX;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Collection Functions</span></div><div class=\"line\">  <span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// The cornerstone, an `each` implementation, aka `forEach`.</span></div><div class=\"line\">  <span class=\"comment\">// Handles raw objects in addition to array-likes. Treats all</span></div><div class=\"line\">  <span class=\"comment\">// sparse array-likes as if they were dense.</span></div><div class=\"line\">  _.each = _.forEach = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = optimizeCb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> i, length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj)) &#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>, length = obj.length; i &lt; length; i++) &#123;</div><div class=\"line\">        iteratee(obj[i], i, obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">      <span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">        iteratee(obj[keys[i]], keys[i], obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the results of applying the iteratee to each element.</span></div><div class=\"line\">  _.map = _.collect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">        length = (keys || obj).length,</div><div class=\"line\">        results = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">      results[index] = iteratee(obj[currentKey], currentKey, obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> results;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a reducing function iterating left or right.</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createReduce</span>(<span class=\"params\">dir</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Optimized iterator function as using arguments.length</span></div><div class=\"line\">    <span class=\"comment\">// in the main function will deoptimize the, see #1991.</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">iterator</span>(<span class=\"params\">obj, iteratee, memo, keys, index, length</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">for</span> (; index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt; length; index += dir) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">        memo = iteratee(memo, obj[currentKey], currentKey, obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> memo;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, memo, context</span>) </span>&#123;</div><div class=\"line\">      iteratee = optimizeCb(iteratee, context, <span class=\"number\">4</span>);</div><div class=\"line\">      <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">          length = (keys || obj).length,</div><div class=\"line\">          index = dir &gt; <span class=\"number\">0</span> ? <span class=\"number\">0</span> : length - <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"comment\">// Determine the initial value if none is provided.</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">arguments</span>.length &lt; <span class=\"number\">3</span>) &#123;</div><div class=\"line\">        memo = obj[keys ? keys[index] : index];</div><div class=\"line\">        index += dir;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> iterator(obj, iteratee, memo, keys, index, length);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// **Reduce** builds up a single result from a list of values, aka `inject`,</span></div><div class=\"line\">  <span class=\"comment\">// or `foldl`.</span></div><div class=\"line\">  _.reduce = _.foldl = _.inject = createReduce(<span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// The right-associative version of reduce, also known as `foldr`.</span></div><div class=\"line\">  _.reduceRight = _.foldr = createReduce(<span class=\"number\">-1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the first value which passes a truth test. Aliased as `detect`.</span></div><div class=\"line\">  _.find = _.detect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> key;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj)) &#123;</div><div class=\"line\">      key = _.findIndex(obj, predicate, context);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      key = _.findKey(obj, predicate, context);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (key !== <span class=\"keyword\">void</span> <span class=\"number\">0</span> &amp;&amp; key !== <span class=\"number\">-1</span>) <span class=\"keyword\">return</span> obj[key];</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return all the elements that pass a truth test.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `select`.</span></div><div class=\"line\">  _.filter = _.select = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> results = [];</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (predicate(value, index, list)) results.push(value);</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> results;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return all the elements for which a truth test fails.</span></div><div class=\"line\">  _.reject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(obj, _.negate(cb(predicate)), context);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determine whether all of the elements match a truth test.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `all`.</span></div><div class=\"line\">  _.every = _.all = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">        length = (keys || obj).length;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!predicate(obj[currentKey], currentKey, obj)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determine if at least one element in the object matches a truth test.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `any`.</span></div><div class=\"line\">  _.some = _.any = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = !isArrayLike(obj) &amp;&amp; _.keys(obj),</div><div class=\"line\">        length = (keys || obj).length;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> currentKey = keys ? keys[index] : index;</div><div class=\"line\">      <span class=\"keyword\">if</span> (predicate(obj[currentKey], currentKey, obj)) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determine if the array or object contains a given item (using `===`).</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `includes` and `include`.</span></div><div class=\"line\">  _.contains = _.includes = _.include = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, item, fromIndex, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!isArrayLike(obj)) obj = _.values(obj);</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> fromIndex != <span class=\"string\">'number'</span> || guard) fromIndex = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.indexOf(obj, item, fromIndex) &gt;= <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Invoke a method (with arguments) on every item in a collection.</span></div><div class=\"line\">  _.invoke = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, method</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> isFunc = _.isFunction(method);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.map(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> func = isFunc ? method : value[method];</div><div class=\"line\">      <span class=\"keyword\">return</span> func == <span class=\"literal\">null</span> ? func : func.apply(value, args);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convenience version of a common use case of `map`: fetching a property.</span></div><div class=\"line\">  _.pluck = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.map(obj, _.property(key));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convenience version of a common use case of `filter`: selecting only objects</span></div><div class=\"line\">  <span class=\"comment\">// containing specific `key:value` pairs.</span></div><div class=\"line\">  _.where = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, attrs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(obj, _.matcher(attrs));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convenience version of a common use case of `find`: getting the first object</span></div><div class=\"line\">  <span class=\"comment\">// containing specific `key:value` pairs.</span></div><div class=\"line\">  _.findWhere = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, attrs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.find(obj, _.matcher(attrs));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the maximum element (or element-based computation).</span></div><div class=\"line\">  _.max = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = -<span class=\"literal\">Infinity</span>, lastComputed = -<span class=\"literal\">Infinity</span>,</div><div class=\"line\">        value, computed;</div><div class=\"line\">    <span class=\"keyword\">if</span> (iteratee == <span class=\"literal\">null</span> &amp;&amp; obj != <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      obj = isArrayLike(obj) ? obj : _.values(obj);</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = obj.length; i &lt; length; i++) &#123;</div><div class=\"line\">        value = obj[i];</div><div class=\"line\">        <span class=\"keyword\">if</span> (value &gt; result) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      iteratee = cb(iteratee, context);</div><div class=\"line\">      _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">        computed = iteratee(value, index, list);</div><div class=\"line\">        <span class=\"keyword\">if</span> (computed &gt; lastComputed || computed === -<span class=\"literal\">Infinity</span> &amp;&amp; result === -<span class=\"literal\">Infinity</span>) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">          lastComputed = computed;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the minimum element (or element-based computation).</span></div><div class=\"line\">  _.min = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"literal\">Infinity</span>, lastComputed = <span class=\"literal\">Infinity</span>,</div><div class=\"line\">        value, computed;</div><div class=\"line\">    <span class=\"keyword\">if</span> (iteratee == <span class=\"literal\">null</span> &amp;&amp; obj != <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      obj = isArrayLike(obj) ? obj : _.values(obj);</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = obj.length; i &lt; length; i++) &#123;</div><div class=\"line\">        value = obj[i];</div><div class=\"line\">        <span class=\"keyword\">if</span> (value &lt; result) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      iteratee = cb(iteratee, context);</div><div class=\"line\">      _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">        computed = iteratee(value, index, list);</div><div class=\"line\">        <span class=\"keyword\">if</span> (computed &lt; lastComputed || computed === <span class=\"literal\">Infinity</span> &amp;&amp; result === <span class=\"literal\">Infinity</span>) &#123;</div><div class=\"line\">          result = value;</div><div class=\"line\">          lastComputed = computed;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Shuffle a collection, using the modern version of the</span></div><div class=\"line\">  <span class=\"comment\">// [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisherâ€“Yates_shuffle).</span></div><div class=\"line\">  _.shuffle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> set = isArrayLike(obj) ? obj : _.values(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> length = set.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> shuffled = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>, rand; index &lt; length; index++) &#123;</div><div class=\"line\">      rand = _.random(<span class=\"number\">0</span>, index);</div><div class=\"line\">      <span class=\"keyword\">if</span> (rand !== index) shuffled[index] = shuffled[rand];</div><div class=\"line\">      shuffled[rand] = set[index];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> shuffled;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Sample **n** random values from a collection.</span></div><div class=\"line\">  <span class=\"comment\">// If **n** is not specified, returns a single random element.</span></div><div class=\"line\">  <span class=\"comment\">// The internal `guard` argument allows it to work with `map`.</span></div><div class=\"line\">  _.sample = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"literal\">null</span> || guard) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!isArrayLike(obj)) obj = _.values(obj);</div><div class=\"line\">      <span class=\"keyword\">return</span> obj[_.random(obj.length - <span class=\"number\">1</span>)];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.shuffle(obj).slice(<span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, n));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Sort the object's values by a criterion produced by an iteratee.</span></div><div class=\"line\">  _.sortBy = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.pluck(_.map(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index, list</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">value</span>: value,</div><div class=\"line\">        <span class=\"attr\">index</span>: index,</div><div class=\"line\">        <span class=\"attr\">criteria</span>: iteratee(value, index, list)</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;).sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">left, right</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> a = left.criteria;</div><div class=\"line\">      <span class=\"keyword\">var</span> b = right.criteria;</div><div class=\"line\">      <span class=\"keyword\">if</span> (a !== b) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (a &gt; b || a === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (a &lt; b || b === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> left.index - right.index;</div><div class=\"line\">    &#125;), <span class=\"string\">'value'</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// An internal function used for aggregate \"group by\" operations.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> group = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">behavior</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> result = &#123;&#125;;</div><div class=\"line\">      iteratee = cb(iteratee, context);</div><div class=\"line\">      _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, index</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> key = iteratee(value, index, obj);</div><div class=\"line\">        behavior(result, value, key);</div><div class=\"line\">      &#125;);</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Groups the object's values by a criterion. Pass either a string attribute</span></div><div class=\"line\">  <span class=\"comment\">// to group by, or a function that returns the criterion.</span></div><div class=\"line\">  _.groupBy = group(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result, value, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.has(result, key)) result[key].push(value); <span class=\"keyword\">else</span> result[key] = [value];</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Indexes the object's values by a criterion, similar to `groupBy`, but for</span></div><div class=\"line\">  <span class=\"comment\">// when you know that your index values will be unique.</span></div><div class=\"line\">  _.indexBy = group(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result, value, key</span>) </span>&#123;</div><div class=\"line\">    result[key] = value;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Counts instances of an object that group by a certain criterion. Pass</span></div><div class=\"line\">  <span class=\"comment\">// either a string attribute to count by, or a function that returns the</span></div><div class=\"line\">  <span class=\"comment\">// criterion.</span></div><div class=\"line\">  _.countBy = group(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">result, value, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.has(result, key)) result[key]++; <span class=\"keyword\">else</span> result[key] = <span class=\"number\">1</span>;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Safely create a real, live array from anything iterable.</span></div><div class=\"line\">  _.toArray = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!obj) <span class=\"keyword\">return</span> [];</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isArray(obj)) <span class=\"keyword\">return</span> slice.call(obj);</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj)) <span class=\"keyword\">return</span> _.map(obj, _.identity);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.values(obj);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the number of elements in an object.</span></div><div class=\"line\">  _.size = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> isArrayLike(obj) ? obj.length : _.keys(obj).length;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Split a collection into two arrays: one whose elements all satisfy the given</span></div><div class=\"line\">  <span class=\"comment\">// predicate, and one whose elements all do not satisfy the predicate.</span></div><div class=\"line\">  _.partition = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> pass = [], fail = [];</div><div class=\"line\">    _.each(obj, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, obj</span>) </span>&#123;</div><div class=\"line\">      (predicate(value, key, obj) ? pass : fail).push(value);</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span> [pass, fail];</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Array Functions</span></div><div class=\"line\">  <span class=\"comment\">// ---------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Get the first element of an array. Passing **n** will return the first N</span></div><div class=\"line\">  <span class=\"comment\">// values in the array. Aliased as `head` and `take`. The **guard** check</span></div><div class=\"line\">  <span class=\"comment\">// allows it to work with `_.map`.</span></div><div class=\"line\">  _.first = _.head = _.take = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (array == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">void</span> <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"literal\">null</span> || guard) <span class=\"keyword\">return</span> array[<span class=\"number\">0</span>];</div><div class=\"line\">    <span class=\"keyword\">return</span> _.initial(array, array.length - n);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns everything but the last entry of the array. Especially useful on</span></div><div class=\"line\">  <span class=\"comment\">// the arguments object. Passing **n** will return all the values in</span></div><div class=\"line\">  <span class=\"comment\">// the array, excluding the last N.</span></div><div class=\"line\">  _.initial = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> slice.call(array, <span class=\"number\">0</span>, <span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, array.length - (n == <span class=\"literal\">null</span> || guard ? <span class=\"number\">1</span> : n)));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Get the last element of an array. Passing **n** will return the last N</span></div><div class=\"line\">  <span class=\"comment\">// values in the array.</span></div><div class=\"line\">  _.last = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (array == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"keyword\">void</span> <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (n == <span class=\"literal\">null</span> || guard) <span class=\"keyword\">return</span> array[array.length - <span class=\"number\">1</span>];</div><div class=\"line\">    <span class=\"keyword\">return</span> _.rest(array, <span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, array.length - n));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns everything but the first entry of the array. Aliased as `tail` and `drop`.</span></div><div class=\"line\">  <span class=\"comment\">// Especially useful on the arguments object. Passing an **n** will return</span></div><div class=\"line\">  <span class=\"comment\">// the rest N values in the array.</span></div><div class=\"line\">  _.rest = _.tail = _.drop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, n, guard</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> slice.call(array, n == <span class=\"literal\">null</span> || guard ? <span class=\"number\">1</span> : n);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Trim out all falsy values from an array.</span></div><div class=\"line\">  _.compact = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(array, _.identity);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Internal implementation of a recursive `flatten` function.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> flatten = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">input, shallow, strict, startIndex</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> output = [], idx = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = startIndex || <span class=\"number\">0</span>, length = getLength(input); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> value = input[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (isArrayLike(value) &amp;&amp; (_.isArray(value) || _.isArguments(value))) &#123;</div><div class=\"line\">        <span class=\"comment\">//flatten current level of array or arguments object</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (!shallow) value = flatten(value, shallow, strict);</div><div class=\"line\">        <span class=\"keyword\">var</span> j = <span class=\"number\">0</span>, len = value.length;</div><div class=\"line\">        output.length += len;</div><div class=\"line\">        <span class=\"keyword\">while</span> (j &lt; len) &#123;</div><div class=\"line\">          output[idx++] = value[j++];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!strict) &#123;</div><div class=\"line\">        output[idx++] = value;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> output;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Flatten out an array, either recursively (by default), or just one level.</span></div><div class=\"line\">  _.flatten = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, shallow</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> flatten(array, shallow, <span class=\"literal\">false</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a version of the array that does not contain the specified value(s).</span></div><div class=\"line\">  _.without = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.difference(array, slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Produce a duplicate-free version of the array. If the array has already</span></div><div class=\"line\">  <span class=\"comment\">// been sorted, you have the option of using a faster algorithm.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `unique`.</span></div><div class=\"line\">  _.uniq = _.unique = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, isSorted, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isBoolean(isSorted)) &#123;</div><div class=\"line\">      context = iteratee;</div><div class=\"line\">      iteratee = isSorted;</div><div class=\"line\">      isSorted = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (iteratee != <span class=\"literal\">null</span>) iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> result = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> seen = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(array); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> value = array[i],</div><div class=\"line\">          computed = iteratee ? iteratee(value, i, array) : value;</div><div class=\"line\">      <span class=\"keyword\">if</span> (isSorted) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!i || seen !== computed) result.push(value);</div><div class=\"line\">        seen = computed;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (iteratee) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!_.contains(seen, computed)) &#123;</div><div class=\"line\">          seen.push(computed);</div><div class=\"line\">          result.push(value);</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!_.contains(result, value)) &#123;</div><div class=\"line\">        result.push(value);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Produce an array that contains the union: each distinct element from all of</span></div><div class=\"line\">  <span class=\"comment\">// the passed-in arrays.</span></div><div class=\"line\">  _.union = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.uniq(flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Produce an array that contains every item shared between all the</span></div><div class=\"line\">  <span class=\"comment\">// passed-in arrays.</span></div><div class=\"line\">  _.intersection = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> argsLength = <span class=\"built_in\">arguments</span>.length;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(array); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> item = array[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (_.contains(result, item)) <span class=\"keyword\">continue</span>;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">1</span>; j &lt; argsLength; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!_.contains(<span class=\"built_in\">arguments</span>[j], item)) <span class=\"keyword\">break</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (j === argsLength) result.push(item);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Take the difference between one array and a number of other arrays.</span></div><div class=\"line\">  <span class=\"comment\">// Only the elements present in just the first array will remain.</span></div><div class=\"line\">  _.difference = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> rest = flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">true</span>, <span class=\"literal\">true</span>, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> _.filter(array, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> !_.contains(rest, value);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Zip together multiple lists into a single array -- elements that share</span></div><div class=\"line\">  <span class=\"comment\">// an index go together.</span></div><div class=\"line\">  _.zip = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.unzip(<span class=\"built_in\">arguments</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Complement of _.zip. Unzip accepts an array of arrays and groups</span></div><div class=\"line\">  <span class=\"comment\">// each array's elements on shared indices</span></div><div class=\"line\">  _.unzip = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> length = array &amp;&amp; _.max(array, getLength).length || <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">      result[index] = _.pluck(array, index);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Converts lists into objects. Pass either a single array of `[key, value]`</span></div><div class=\"line\">  <span class=\"comment\">// pairs, or two parallel arrays of the same length -- one of keys, and one of</span></div><div class=\"line\">  <span class=\"comment\">// the corresponding values.</span></div><div class=\"line\">  _.object = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">list, values</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(list); i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (values) &#123;</div><div class=\"line\">        result[list[i]] = values[i];</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        result[list[i][<span class=\"number\">0</span>]] = list[i][<span class=\"number\">1</span>];</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generator function to create the findIndex and findLastIndex functions</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createPredicateIndexFinder</span>(<span class=\"params\">dir</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, predicate, context</span>) </span>&#123;</div><div class=\"line\">      predicate = cb(predicate, context);</div><div class=\"line\">      <span class=\"keyword\">var</span> length = getLength(array);</div><div class=\"line\">      <span class=\"keyword\">var</span> index = dir &gt; <span class=\"number\">0</span> ? <span class=\"number\">0</span> : length - <span class=\"number\">1</span>;</div><div class=\"line\">      <span class=\"keyword\">for</span> (; index &gt;= <span class=\"number\">0</span> &amp;&amp; index &lt; length; index += dir) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (predicate(array[index], index, array)) <span class=\"keyword\">return</span> index;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the first index on an array-like that passes a predicate test</span></div><div class=\"line\">  _.findIndex = createPredicateIndexFinder(<span class=\"number\">1</span>);</div><div class=\"line\">  _.findLastIndex = createPredicateIndexFinder(<span class=\"number\">-1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Use a comparator function to figure out the smallest index at which</span></div><div class=\"line\">  <span class=\"comment\">// an object should be inserted so as to maintain order. Uses binary search.</span></div><div class=\"line\">  _.sortedIndex = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> value = iteratee(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> low = <span class=\"number\">0</span>, high = getLength(array);</div><div class=\"line\">    <span class=\"keyword\">while</span> (low &lt; high) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> mid = <span class=\"built_in\">Math</span>.floor((low + high) / <span class=\"number\">2</span>);</div><div class=\"line\">      <span class=\"keyword\">if</span> (iteratee(array[mid]) &lt; value) low = mid + <span class=\"number\">1</span>; <span class=\"keyword\">else</span> high = mid;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> low;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generator function to create the indexOf and lastIndexOf functions</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createIndexFinder</span>(<span class=\"params\">dir, predicateFind, sortedIndex</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">array, item, idx</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = getLength(array);</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> idx == <span class=\"string\">'number'</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (dir &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            i = idx &gt;= <span class=\"number\">0</span> ? idx : <span class=\"built_in\">Math</span>.max(idx + length, i);</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            length = idx &gt;= <span class=\"number\">0</span> ? <span class=\"built_in\">Math</span>.min(idx + <span class=\"number\">1</span>, length) : idx + length + <span class=\"number\">1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (sortedIndex &amp;&amp; idx &amp;&amp; length) &#123;</div><div class=\"line\">        idx = sortedIndex(array, item);</div><div class=\"line\">        <span class=\"keyword\">return</span> array[idx] === item ? idx : <span class=\"number\">-1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (item !== item) &#123;</div><div class=\"line\">        idx = predicateFind(slice.call(array, i, length), _.isNaN);</div><div class=\"line\">        <span class=\"keyword\">return</span> idx &gt;= <span class=\"number\">0</span> ? idx + i : <span class=\"number\">-1</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">for</span> (idx = dir &gt; <span class=\"number\">0</span> ? i : length - <span class=\"number\">1</span>; idx &gt;= <span class=\"number\">0</span> &amp;&amp; idx &lt; length; idx += dir) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (array[idx] === item) <span class=\"keyword\">return</span> idx;</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return the position of the first occurrence of an item in an array,</span></div><div class=\"line\">  <span class=\"comment\">// or -1 if the item is not included in the array.</span></div><div class=\"line\">  <span class=\"comment\">// If the array is large and already in sort order, pass `true`</span></div><div class=\"line\">  <span class=\"comment\">// for **isSorted** to use binary search.</span></div><div class=\"line\">  _.indexOf = createIndexFinder(<span class=\"number\">1</span>, _.findIndex, _.sortedIndex);</div><div class=\"line\">  _.lastIndexOf = createIndexFinder(<span class=\"number\">-1</span>, _.findLastIndex);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generate an integer Array containing an arithmetic progression. A port of</span></div><div class=\"line\">  <span class=\"comment\">// the native Python `range()` function. See</span></div><div class=\"line\">  <span class=\"comment\">// [the Python documentation](http://docs.python.org/library/functions.html#range).</span></div><div class=\"line\">  _.range = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">start, stop, step</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (stop == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      stop = start || <span class=\"number\">0</span>;</div><div class=\"line\">      start = <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    step = step || <span class=\"number\">1</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> length = <span class=\"built_in\">Math</span>.max(<span class=\"built_in\">Math</span>.ceil((stop - start) / step), <span class=\"number\">0</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> range = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> idx = <span class=\"number\">0</span>; idx &lt; length; idx++, start += step) &#123;</div><div class=\"line\">      range[idx] = start;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> range;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Function (ahem) Functions</span></div><div class=\"line\">  <span class=\"comment\">// ------------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Determines whether to execute a function as a constructor</span></div><div class=\"line\">  <span class=\"comment\">// or a normal function with the provided arguments</span></div><div class=\"line\">  <span class=\"keyword\">var</span> executeBound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sourceFunc, boundFunc, context, callingContext, args</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!(callingContext <span class=\"keyword\">instanceof</span> boundFunc)) <span class=\"keyword\">return</span> sourceFunc.apply(context, args);</div><div class=\"line\">    <span class=\"keyword\">var</span> self = baseCreate(sourceFunc.prototype);</div><div class=\"line\">    <span class=\"keyword\">var</span> result = sourceFunc.apply(self, args);</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isObject(result)) <span class=\"keyword\">return</span> result;</div><div class=\"line\">    <span class=\"keyword\">return</span> self;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a function bound to a given object (assigning `this`, and arguments,</span></div><div class=\"line\">  <span class=\"comment\">// optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if</span></div><div class=\"line\">  <span class=\"comment\">// available.</span></div><div class=\"line\">  _.bind = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (nativeBind &amp;&amp; func.bind === nativeBind) <span class=\"keyword\">return</span> nativeBind.apply(func, slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>));</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isFunction(func)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">'Bind must be called on a function'</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> args = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> bound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> executeBound(func, bound, context, <span class=\"keyword\">this</span>, args.concat(slice.call(<span class=\"built_in\">arguments</span>)));</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> bound;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Partially apply a function by creating a version that has had some of its</span></div><div class=\"line\">  <span class=\"comment\">// arguments pre-filled, without changing its dynamic `this` context. _ acts</span></div><div class=\"line\">  <span class=\"comment\">// as a placeholder, allowing any combination of arguments to be pre-filled.</span></div><div class=\"line\">  _.partial = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> boundArgs = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">var</span> bound = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> position = <span class=\"number\">0</span>, length = boundArgs.length;</div><div class=\"line\">      <span class=\"keyword\">var</span> args = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">        args[i] = boundArgs[i] === _ ? <span class=\"built_in\">arguments</span>[position++] : boundArgs[i];</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">while</span> (position &lt; <span class=\"built_in\">arguments</span>.length) args.push(<span class=\"built_in\">arguments</span>[position++]);</div><div class=\"line\">      <span class=\"keyword\">return</span> executeBound(func, bound, <span class=\"keyword\">this</span>, <span class=\"keyword\">this</span>, args);</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> bound;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Bind a number of an object's methods to that object. Remaining arguments</span></div><div class=\"line\">  <span class=\"comment\">// are the method names to be bound. Useful for ensuring that all callbacks</span></div><div class=\"line\">  <span class=\"comment\">// defined on an object belong to it.</span></div><div class=\"line\">  _.bindAll = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> i, length = <span class=\"built_in\">arguments</span>.length, key;</div><div class=\"line\">    <span class=\"keyword\">if</span> (length &lt;= <span class=\"number\">1</span>) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'bindAll must be passed function names'</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (i = <span class=\"number\">1</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      key = <span class=\"built_in\">arguments</span>[i];</div><div class=\"line\">      obj[key] = _.bind(obj[key], obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Memoize an expensive function by storing its results.</span></div><div class=\"line\">  _.memoize = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, hasher</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> memoize = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> cache = memoize.cache;</div><div class=\"line\">      <span class=\"keyword\">var</span> address = <span class=\"string\">''</span> + (hasher ? hasher.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>) : key);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!_.has(cache, address)) cache[address] = func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">return</span> cache[address];</div><div class=\"line\">    &#125;;</div><div class=\"line\">    memoize.cache = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> memoize;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Delays a function for the given number of milliseconds, and then calls</span></div><div class=\"line\">  <span class=\"comment\">// it with the arguments supplied.</span></div><div class=\"line\">  _.delay = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = slice.call(<span class=\"built_in\">arguments</span>, <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> func.apply(<span class=\"literal\">null</span>, args);</div><div class=\"line\">    &#125;, wait);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Defers a function, scheduling it to run after the current call stack has</span></div><div class=\"line\">  <span class=\"comment\">// cleared.</span></div><div class=\"line\">  _.defer = _.partial(_.delay, _, <span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function, that, when invoked, will only be triggered at most once</span></div><div class=\"line\">  <span class=\"comment\">// during a given window of time. Normally, the throttled function will run</span></div><div class=\"line\">  <span class=\"comment\">// as much as it can, without ever going more than once per `wait` duration;</span></div><div class=\"line\">  <span class=\"comment\">// but if you'd like to disable the execution on the leading edge, pass</span></div><div class=\"line\">  <span class=\"comment\">// `&#123;leading: false&#125;`. To disable execution on the trailing edge, ditto.</span></div><div class=\"line\">  _.throttle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, options</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> context, args, result;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> previous = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!options) options = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      previous = options.leading === <span class=\"literal\">false</span> ? <span class=\"number\">0</span> : _.now();</div><div class=\"line\">      timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">      result = func.apply(context, args);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> now = _.now();</div><div class=\"line\">      <span class=\"keyword\">if</span> (!previous &amp;&amp; options.leading === <span class=\"literal\">false</span>) previous = now;</div><div class=\"line\">      <span class=\"keyword\">var</span> remaining = wait - (now - previous);</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (timeout) &#123;</div><div class=\"line\">          clearTimeout(timeout);</div><div class=\"line\">          timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        previous = now;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!timeout &amp;&amp; options.trailing !== <span class=\"literal\">false</span>) &#123;</div><div class=\"line\">        timeout = setTimeout(later, remaining);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function, that, as long as it continues to be invoked, will not</span></div><div class=\"line\">  <span class=\"comment\">// be triggered. The function will be called after it stops being called for</span></div><div class=\"line\">  <span class=\"comment\">// N milliseconds. If `immediate` is passed, trigger the function on the</span></div><div class=\"line\">  <span class=\"comment\">// leading edge, instead of the trailing.</span></div><div class=\"line\">  _.debounce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout, args, context, timestamp, result;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> last = _.now() - timestamp;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (last &lt; wait &amp;&amp; last &gt;= <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        timeout = setTimeout(later, wait - last);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!immediate) &#123;</div><div class=\"line\">          result = func.apply(context, args);</div><div class=\"line\">          <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      timestamp = _.now();</div><div class=\"line\">      <span class=\"keyword\">var</span> callNow = immediate &amp;&amp; !timeout;</div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) timeout = setTimeout(later, wait);</div><div class=\"line\">      <span class=\"keyword\">if</span> (callNow) &#123;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the first function passed as an argument to the second,</span></div><div class=\"line\">  <span class=\"comment\">// allowing you to adjust arguments, run code before and after, and</span></div><div class=\"line\">  <span class=\"comment\">// conditionally execute the original function.</span></div><div class=\"line\">  _.wrap = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wrapper</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.partial(wrapper, func);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a negated version of the passed-in predicate.</span></div><div class=\"line\">  _.negate = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">predicate</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> !predicate.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that is the composition of a list of functions, each</span></div><div class=\"line\">  <span class=\"comment\">// consuming the return value of the function that follows.</span></div><div class=\"line\">  _.compose = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> start = args.length - <span class=\"number\">1</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> i = start;</div><div class=\"line\">      <span class=\"keyword\">var</span> result = args[start].apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">while</span> (i--) result = args[i].call(<span class=\"keyword\">this</span>, result);</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that will only be executed on and after the Nth call.</span></div><div class=\"line\">  _.after = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">times, func</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (--times &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that will only be executed up to (but not including) the Nth call.</span></div><div class=\"line\">  _.before = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">times, func</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> memo;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (--times &gt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        memo = func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">if</span> (times &lt;= <span class=\"number\">1</span>) func = <span class=\"literal\">null</span>;</div><div class=\"line\">      <span class=\"keyword\">return</span> memo;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a function that will be executed at most one time, no matter how</span></div><div class=\"line\">  <span class=\"comment\">// often you call it. Useful for lazy initialization.</span></div><div class=\"line\">  _.once = _.partial(_.before, <span class=\"number\">2</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Object Functions</span></div><div class=\"line\">  <span class=\"comment\">// ----------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keys in IE &lt; 9 that won't be iterated by `for key in ...` and thus missed.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> hasEnumBug = !&#123;<span class=\"attr\">toString</span>: <span class=\"literal\">null</span>&#125;.propertyIsEnumerable(<span class=\"string\">'toString'</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> nonEnumerableProps = [<span class=\"string\">'valueOf'</span>, <span class=\"string\">'isPrototypeOf'</span>, <span class=\"string\">'toString'</span>,</div><div class=\"line\">                      <span class=\"string\">'propertyIsEnumerable'</span>, <span class=\"string\">'hasOwnProperty'</span>, <span class=\"string\">'toLocaleString'</span>];</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">collectNonEnumProps</span>(<span class=\"params\">obj, keys</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> nonEnumIdx = nonEnumerableProps.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> <span class=\"keyword\">constructor</span> = obj.<span class=\"keyword\">constructor</span>;</div><div class=\"line\">    var proto = (_.isFunction(<span class=\"keyword\">constructor</span>) &amp;&amp; <span class=\"keyword\">constructor</span>.prototype) || ObjProto;</div><div class=\"line\"></div><div class=\"line\">    // Constructor is a special case.</div><div class=\"line\">    var prop = '<span class=\"keyword\">constructor</span>';</div><div class=\"line\">    if (_.has(obj, prop) &amp;&amp; !_.contains(keys, prop)) keys.push(prop);</div><div class=\"line\"></div><div class=\"line\">    while (nonEnumIdx--) &#123;</div><div class=\"line\">      prop = nonEnumerableProps[nonEnumIdx];</div><div class=\"line\">      <span class=\"keyword\">if</span> (prop <span class=\"keyword\">in</span> obj &amp;&amp; obj[prop] !== proto[prop] &amp;&amp; !_.contains(keys, prop)) &#123;</div><div class=\"line\">        keys.push(prop);</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Retrieve the names of an object's own properties.</span></div><div class=\"line\">  <span class=\"comment\">// Delegates to **ECMAScript 5**'s native `Object.keys`</span></div><div class=\"line\">  _.keys = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(obj)) <span class=\"keyword\">return</span> [];</div><div class=\"line\">    <span class=\"keyword\">if</span> (nativeKeys) <span class=\"keyword\">return</span> nativeKeys(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) <span class=\"keyword\">if</span> (_.has(obj, key)) keys.push(key);</div><div class=\"line\">    <span class=\"comment\">// Ahem, IE &lt; 9.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (hasEnumBug) collectNonEnumProps(obj, keys);</div><div class=\"line\">    <span class=\"keyword\">return</span> keys;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Retrieve all the property names of an object.</span></div><div class=\"line\">  _.allKeys = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(obj)) <span class=\"keyword\">return</span> [];</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) keys.push(key);</div><div class=\"line\">    <span class=\"comment\">// Ahem, IE &lt; 9.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (hasEnumBug) collectNonEnumProps(obj, keys);</div><div class=\"line\">    <span class=\"keyword\">return</span> keys;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Retrieve the values of an object's properties.</span></div><div class=\"line\">  _.values = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> length = keys.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> values = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      values[i] = obj[keys[i]];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> values;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the results of applying the iteratee to each element of the object</span></div><div class=\"line\">  <span class=\"comment\">// In contrast to _.map it returns an object</span></div><div class=\"line\">  _.mapObject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    iteratee = cb(iteratee, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys =  _.keys(obj),</div><div class=\"line\">          length = keys.length,</div><div class=\"line\">          results = &#123;&#125;,</div><div class=\"line\">          currentKey;</div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> index = <span class=\"number\">0</span>; index &lt; length; index++) &#123;</div><div class=\"line\">        currentKey = keys[index];</div><div class=\"line\">        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> results;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Convert an object into a list of `[key, value]` pairs.</span></div><div class=\"line\">  _.pairs = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">    <span class=\"keyword\">var</span> length = keys.length;</div><div class=\"line\">    <span class=\"keyword\">var</span> pairs = <span class=\"built_in\">Array</span>(length);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      pairs[i] = [keys[i], obj[keys[i]]];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> pairs;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Invert the keys and values of an object. The values must be serializable.</span></div><div class=\"line\">  _.invert = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">      result[obj[keys[i]]] = keys[i];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a sorted list of the function names available on the object.</span></div><div class=\"line\">  <span class=\"comment\">// Aliased as `methods`</span></div><div class=\"line\">  _.functions = _.methods = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> names = [];</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> key <span class=\"keyword\">in</span> obj) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (_.isFunction(obj[key])) names.push(key);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> names.sort();</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Extend a given object with all the properties in passed-in object(s).</span></div><div class=\"line\">  _.extend = createAssigner(_.allKeys);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Assigns a given object with all the own properties in the passed-in object(s)</span></div><div class=\"line\">  <span class=\"comment\">// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)</span></div><div class=\"line\">  _.extendOwn = _.assign = createAssigner(_.keys);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns the first key on an object that passes a predicate test</span></div><div class=\"line\">  _.findKey = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, predicate, context</span>) </span>&#123;</div><div class=\"line\">    predicate = cb(predicate, context);</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(obj), key;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">      key = keys[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (predicate(obj[key], key, obj)) <span class=\"keyword\">return</span> key;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a copy of the object only containing the whitelisted properties.</span></div><div class=\"line\">  _.pick = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, oiteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = &#123;&#125;, obj = object, iteratee, keys;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> result;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isFunction(oiteratee)) &#123;</div><div class=\"line\">      keys = _.allKeys(obj);</div><div class=\"line\">      iteratee = optimizeCb(oiteratee, context);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      keys = flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, <span class=\"number\">1</span>);</div><div class=\"line\">      iteratee = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key, obj</span>) </span>&#123; <span class=\"keyword\">return</span> key <span class=\"keyword\">in</span> obj; &#125;;</div><div class=\"line\">      obj = <span class=\"built_in\">Object</span>(obj);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>, length = keys.length; i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> key = keys[i];</div><div class=\"line\">      <span class=\"keyword\">var</span> value = obj[key];</div><div class=\"line\">      <span class=\"keyword\">if</span> (iteratee(value, key, obj)) result[key] = value;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\">// Return a copy of the object without the blacklisted properties.</span></div><div class=\"line\">  _.omit = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (_.isFunction(iteratee)) &#123;</div><div class=\"line\">      iteratee = _.negate(iteratee);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> keys = _.map(flatten(<span class=\"built_in\">arguments</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, <span class=\"number\">1</span>), <span class=\"built_in\">String</span>);</div><div class=\"line\">      iteratee = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value, key</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> !_.contains(keys, key);</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.pick(obj, iteratee, context);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Fill in a given object with default properties.</span></div><div class=\"line\">  _.defaults = createAssigner(_.allKeys, <span class=\"literal\">true</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Creates an object that inherits from the given prototype object.</span></div><div class=\"line\">  <span class=\"comment\">// If additional properties are provided then they will be added to the</span></div><div class=\"line\">  <span class=\"comment\">// created object.</span></div><div class=\"line\">  _.create = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">prototype, props</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = baseCreate(prototype);</div><div class=\"line\">    <span class=\"keyword\">if</span> (props) _.extendOwn(result, props);</div><div class=\"line\">    <span class=\"keyword\">return</span> result;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Create a (shallow-cloned) duplicate of an object.</span></div><div class=\"line\">  _.clone = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!_.isObject(obj)) <span class=\"keyword\">return</span> obj;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.isArray(obj) ? obj.slice() : _.extend(&#123;&#125;, obj);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Invokes interceptor with the obj, and then returns obj.</span></div><div class=\"line\">  <span class=\"comment\">// The primary purpose of this method is to \"tap into\" a method chain, in</span></div><div class=\"line\">  <span class=\"comment\">// order to perform operations on intermediate results within the chain.</span></div><div class=\"line\">  _.tap = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, interceptor</span>) </span>&#123;</div><div class=\"line\">    interceptor(obj);</div><div class=\"line\">    <span class=\"keyword\">return</span> obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns whether an object has a given set of `key:value` pairs.</span></div><div class=\"line\">  _.isMatch = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, attrs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> keys = _.keys(attrs), length = keys.length;</div><div class=\"line\">    <span class=\"keyword\">if</span> (object == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> !length;</div><div class=\"line\">    <span class=\"keyword\">var</span> obj = <span class=\"built_in\">Object</span>(object);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; length; i++) &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> key = keys[i];</div><div class=\"line\">      <span class=\"keyword\">if</span> (attrs[key] !== obj[key] || !(key <span class=\"keyword\">in</span> obj)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Internal recursive comparison function for `isEqual`.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> eq = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b, aStack, bStack</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Identical objects are equal. `0 === -0`, but they aren't identical.</span></div><div class=\"line\">    <span class=\"comment\">// See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (a === b) <span class=\"keyword\">return</span> a !== <span class=\"number\">0</span> || <span class=\"number\">1</span> / a === <span class=\"number\">1</span> / b;</div><div class=\"line\">    <span class=\"comment\">// A strict comparison is necessary because `null == undefined`.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (a == <span class=\"literal\">null</span> || b == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> a === b;</div><div class=\"line\">    <span class=\"comment\">// Unwrap any wrapped objects.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (a <span class=\"keyword\">instanceof</span> _) a = a._wrapped;</div><div class=\"line\">    <span class=\"keyword\">if</span> (b <span class=\"keyword\">instanceof</span> _) b = b._wrapped;</div><div class=\"line\">    <span class=\"comment\">// Compare `[[Class]]` names.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> className = toString.call(a);</div><div class=\"line\">    <span class=\"keyword\">if</span> (className !== toString.call(b)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (className) &#123;</div><div class=\"line\">      <span class=\"comment\">// Strings, numbers, regular expressions, dates, and booleans are compared by value.</span></div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object RegExp]'</span>:</div><div class=\"line\">      <span class=\"comment\">// RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')</span></div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object String]'</span>:</div><div class=\"line\">        <span class=\"comment\">// Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is</span></div><div class=\"line\">        <span class=\"comment\">// equivalent to `new String(\"5\")`.</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">''</span> + a === <span class=\"string\">''</span> + b;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object Number]'</span>:</div><div class=\"line\">        <span class=\"comment\">// `NaN`s are equivalent, but non-reflexive.</span></div><div class=\"line\">        <span class=\"comment\">// Object(NaN) is equivalent to NaN</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (+a !== +a) <span class=\"keyword\">return</span> +b !== +b;</div><div class=\"line\">        <span class=\"comment\">// An `egal` comparison is performed for other numeric values.</span></div><div class=\"line\">        <span class=\"keyword\">return</span> +a === <span class=\"number\">0</span> ? <span class=\"number\">1</span> / +a === <span class=\"number\">1</span> / b : +a === +b;</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object Date]'</span>:</div><div class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'[object Boolean]'</span>:</div><div class=\"line\">        <span class=\"comment\">// Coerce dates and booleans to numeric primitive values. Dates are compared by their</span></div><div class=\"line\">        <span class=\"comment\">// millisecond representations. Note that invalid dates with millisecond representations</span></div><div class=\"line\">        <span class=\"comment\">// of `NaN` are not equivalent.</span></div><div class=\"line\">        <span class=\"keyword\">return</span> +a === +b;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> areArrays = className === <span class=\"string\">'[object Array]'</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!areArrays) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> a != <span class=\"string\">'object'</span> || <span class=\"keyword\">typeof</span> b != <span class=\"string\">'object'</span>) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// Objects with different constructors are not equivalent, but `Object`s or `Array`s</span></div><div class=\"line\">      <span class=\"comment\">// from different frames are.</span></div><div class=\"line\">      <span class=\"keyword\">var</span> aCtor = a.constructor, bCtor = b.constructor;</div><div class=\"line\">      <span class=\"keyword\">if</span> (aCtor !== bCtor &amp;&amp; !(_.isFunction(aCtor) &amp;&amp; aCtor <span class=\"keyword\">instanceof</span> aCtor &amp;&amp;</div><div class=\"line\">                               _.isFunction(bCtor) &amp;&amp; bCtor <span class=\"keyword\">instanceof</span> bCtor)</div><div class=\"line\">                          &amp;&amp; (<span class=\"string\">'constructor'</span> <span class=\"keyword\">in</span> a &amp;&amp; <span class=\"string\">'constructor'</span> <span class=\"keyword\">in</span> b)) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// Assume equality for cyclic structures. The algorithm for detecting cyclic</span></div><div class=\"line\">    <span class=\"comment\">// structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Initializing stack of traversed objects.</span></div><div class=\"line\">    <span class=\"comment\">// It's done here since we only need them for objects and arrays comparison.</span></div><div class=\"line\">    aStack = aStack || [];</div><div class=\"line\">    bStack = bStack || [];</div><div class=\"line\">    <span class=\"keyword\">var</span> length = aStack.length;</div><div class=\"line\">    <span class=\"keyword\">while</span> (length--) &#123;</div><div class=\"line\">      <span class=\"comment\">// Linear search. Performance is inversely proportional to the number of</span></div><div class=\"line\">      <span class=\"comment\">// unique nested structures.</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (aStack[length] === a) <span class=\"keyword\">return</span> bStack[length] === b;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Add the first object to the stack of traversed objects.</span></div><div class=\"line\">    aStack.push(a);</div><div class=\"line\">    bStack.push(b);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Recursively compare objects and arrays.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (areArrays) &#123;</div><div class=\"line\">      <span class=\"comment\">// Compare array lengths to determine if a deep comparison is necessary.</span></div><div class=\"line\">      length = a.length;</div><div class=\"line\">      <span class=\"keyword\">if</span> (length !== b.length) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      <span class=\"comment\">// Deep compare the contents, ignoring non-numeric properties.</span></div><div class=\"line\">      <span class=\"keyword\">while</span> (length--) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!eq(a[length], b[length], aStack, bStack)) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      <span class=\"comment\">// Deep compare objects.</span></div><div class=\"line\">      <span class=\"keyword\">var</span> keys = _.keys(a), key;</div><div class=\"line\">      length = keys.length;</div><div class=\"line\">      <span class=\"comment\">// Ensure that both objects contain the same number of properties before comparing deep equality.</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (_.keys(b).length !== length) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      <span class=\"keyword\">while</span> (length--) &#123;</div><div class=\"line\">        <span class=\"comment\">// Deep compare each member</span></div><div class=\"line\">        key = keys[length];</div><div class=\"line\">        <span class=\"keyword\">if</span> (!(_.has(b, key) &amp;&amp; eq(a[key], b[key], aStack, bStack))) <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"comment\">// Remove the first object from the stack of traversed objects.</span></div><div class=\"line\">    aStack.pop();</div><div class=\"line\">    bStack.pop();</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Perform a deep comparison to check if two objects are equal.</span></div><div class=\"line\">  _.isEqual = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> eq(a, b);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given array, string, or object empty?</span></div><div class=\"line\">  <span class=\"comment\">// An \"empty\" object has no enumerable own-properties.</span></div><div class=\"line\">  _.isEmpty = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (obj == <span class=\"literal\">null</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (isArrayLike(obj) &amp;&amp; (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) <span class=\"keyword\">return</span> obj.length === <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.keys(obj).length === <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value a DOM element?</span></div><div class=\"line\">  _.isElement = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> !!(obj &amp;&amp; obj.nodeType === <span class=\"number\">1</span>);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value an array?</span></div><div class=\"line\">  <span class=\"comment\">// Delegates to ECMA5's native Array.isArray</span></div><div class=\"line\">  _.isArray = nativeIsArray || <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> toString.call(obj) === <span class=\"string\">'[object Array]'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given variable an object?</span></div><div class=\"line\">  _.isObject = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> type = <span class=\"keyword\">typeof</span> obj;</div><div class=\"line\">    <span class=\"keyword\">return</span> type === <span class=\"string\">'function'</span> || type === <span class=\"string\">'object'</span> &amp;&amp; !!obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.</span></div><div class=\"line\">  _.each([<span class=\"string\">'Arguments'</span>, <span class=\"string\">'Function'</span>, <span class=\"string\">'String'</span>, <span class=\"string\">'Number'</span>, <span class=\"string\">'Date'</span>, <span class=\"string\">'RegExp'</span>, <span class=\"string\">'Error'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">    _[<span class=\"string\">'is'</span> + name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> toString.call(obj) === <span class=\"string\">'[object '</span> + name + <span class=\"string\">']'</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Define a fallback version of the method in browsers (ahem, IE &lt; 9), where</span></div><div class=\"line\">  <span class=\"comment\">// there isn't any inspectable \"Arguments\" type.</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (!_.isArguments(<span class=\"built_in\">arguments</span>)) &#123;</div><div class=\"line\">    _.isArguments = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _.has(obj, <span class=\"string\">'callee'</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,</span></div><div class=\"line\">  <span class=\"comment\">// IE 11 (#1621), and in Safari 8 (#1929).</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> /./ != <span class=\"string\">'function'</span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">Int8Array</span> != <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">    _.isFunction = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> obj == <span class=\"string\">'function'</span> || <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given object a finite number?</span></div><div class=\"line\">  _.isFinite = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">isFinite</span>(obj) &amp;&amp; !<span class=\"built_in\">isNaN</span>(<span class=\"built_in\">parseFloat</span>(obj));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is the given value `NaN`? (NaN is the only number which does not equal itself).</span></div><div class=\"line\">  _.isNaN = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.isNumber(obj) &amp;&amp; obj !== +obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value a boolean?</span></div><div class=\"line\">  _.isBoolean = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj === <span class=\"literal\">true</span> || obj === <span class=\"literal\">false</span> || toString.call(obj) === <span class=\"string\">'[object Boolean]'</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given value equal to null?</span></div><div class=\"line\">  _.isNull = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj === <span class=\"literal\">null</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Is a given variable undefined?</span></div><div class=\"line\">  _.isUndefined = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj === <span class=\"keyword\">void</span> <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Shortcut function for checking if an object has a given property directly</span></div><div class=\"line\">  <span class=\"comment\">// on itself (in other words, not on a prototype).</span></div><div class=\"line\">  _.has = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj, key</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj != <span class=\"literal\">null</span> &amp;&amp; hasOwnProperty.call(obj, key);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Utility Functions</span></div><div class=\"line\">  <span class=\"comment\">// -----------------</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Run Underscore.js in *noConflict* mode, returning the `_` variable to its</span></div><div class=\"line\">  <span class=\"comment\">// previous owner. Returns a reference to the Underscore object.</span></div><div class=\"line\">  _.noConflict = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    root._ = previousUnderscore;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Keep the identity function around for default iteratees.</span></div><div class=\"line\">  _.identity = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> value;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Predicate-generating functions. Often useful outside of Underscore.</span></div><div class=\"line\">  _.constant = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> value;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  _.noop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125;;</div><div class=\"line\"></div><div class=\"line\">  _.property = property;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generates a function for a given object that returns a given property.</span></div><div class=\"line\">  _.propertyOf = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> obj == <span class=\"literal\">null</span> ? <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;&#125; : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> obj[key];</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Returns a predicate for checking whether an object has a given set of</span></div><div class=\"line\">  <span class=\"comment\">// `key:value` pairs.</span></div><div class=\"line\">  _.matcher = _.matches = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">attrs</span>) </span>&#123;</div><div class=\"line\">    attrs = _.extendOwn(&#123;&#125;, attrs);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _.isMatch(obj, attrs);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Run a function **n** times.</span></div><div class=\"line\">  _.times = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n, iteratee, context</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> accum = <span class=\"built_in\">Array</span>(<span class=\"built_in\">Math</span>.max(<span class=\"number\">0</span>, n));</div><div class=\"line\">    iteratee = optimizeCb(iteratee, context, <span class=\"number\">1</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; n; i++) accum[i] = iteratee(i);</div><div class=\"line\">    <span class=\"keyword\">return</span> accum;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Return a random integer between min and max (inclusive).</span></div><div class=\"line\">  _.random = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">min, max</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (max == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">      max = min;</div><div class=\"line\">      min = <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> min + <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * (max - min + <span class=\"number\">1</span>));</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// A (possibly faster) way to get the current timestamp as an integer.</span></div><div class=\"line\">  _.now = <span class=\"built_in\">Date</span>.now || <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\">// List of HTML entities for escaping.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> escapeMap = &#123;</div><div class=\"line\">    <span class=\"string\">'&amp;'</span>: <span class=\"string\">'&amp;amp;'</span>,</div><div class=\"line\">    <span class=\"string\">'&lt;'</span>: <span class=\"string\">'&amp;lt;'</span>,</div><div class=\"line\">    <span class=\"string\">'&gt;'</span>: <span class=\"string\">'&amp;gt;'</span>,</div><div class=\"line\">    <span class=\"string\">'\"'</span>: <span class=\"string\">'&amp;quot;'</span>,</div><div class=\"line\">    <span class=\"string\">\"'\"</span>: <span class=\"string\">'&amp;#x27;'</span>,</div><div class=\"line\">    <span class=\"string\">'`'</span>: <span class=\"string\">'&amp;#x60;'</span></div><div class=\"line\">  &#125;;</div><div class=\"line\">  <span class=\"keyword\">var</span> unescapeMap = _.invert(escapeMap);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Functions for escaping and unescaping strings to/from HTML interpolation.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> createEscaper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">map</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> escaper = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">match</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> map[match];</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"comment\">// Regexes for identifying a key that needs to be escaped</span></div><div class=\"line\">    <span class=\"keyword\">var</span> source = <span class=\"string\">'(?:'</span> + _.keys(map).join(<span class=\"string\">'|'</span>) + <span class=\"string\">')'</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> testRegexp = <span class=\"built_in\">RegExp</span>(source);</div><div class=\"line\">    <span class=\"keyword\">var</span> replaceRegexp = <span class=\"built_in\">RegExp</span>(source, <span class=\"string\">'g'</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">string</span>) </span>&#123;</div><div class=\"line\">      string = string == <span class=\"literal\">null</span> ? <span class=\"string\">''</span> : <span class=\"string\">''</span> + string;</div><div class=\"line\">      <span class=\"keyword\">return</span> testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div><div class=\"line\">  _.escape = createEscaper(escapeMap);</div><div class=\"line\">  _.unescape = createEscaper(unescapeMap);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// If the value of the named `property` is a function then invoke it with the</span></div><div class=\"line\">  <span class=\"comment\">// `object` as context; otherwise, return it.</span></div><div class=\"line\">  _.result = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">object, property, fallback</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> value = object == <span class=\"literal\">null</span> ? <span class=\"keyword\">void</span> <span class=\"number\">0</span> : object[property];</div><div class=\"line\">    <span class=\"keyword\">if</span> (value === <span class=\"keyword\">void</span> <span class=\"number\">0</span>) &#123;</div><div class=\"line\">      value = fallback;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> _.isFunction(value) ? value.call(object) : value;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Generate a unique integer id (unique within the entire client session).</span></div><div class=\"line\">  <span class=\"comment\">// Useful for temporary DOM ids.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> idCounter = <span class=\"number\">0</span>;</div><div class=\"line\">  _.uniqueId = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">prefix</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> id = ++idCounter + <span class=\"string\">''</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> prefix ? prefix + id : id;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// By default, Underscore uses ERB-style template delimiters, change the</span></div><div class=\"line\">  <span class=\"comment\">// following template settings to use alternative delimiters.</span></div><div class=\"line\">  _.templateSettings = &#123;</div><div class=\"line\">    <span class=\"attr\">evaluate</span>    : <span class=\"regexp\">/&lt;%([\\s\\S]+?)%&gt;/g</span>,</div><div class=\"line\">    <span class=\"attr\">interpolate</span> : <span class=\"regexp\">/&lt;%=([\\s\\S]+?)%&gt;/g</span>,</div><div class=\"line\">    <span class=\"attr\">escape</span>      : <span class=\"regexp\">/&lt;%-([\\s\\S]+?)%&gt;/g</span></div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// When customizing `templateSettings`, if you don't want to define an</span></div><div class=\"line\">  <span class=\"comment\">// interpolation, evaluation or escaping regex, we need one that is</span></div><div class=\"line\">  <span class=\"comment\">// guaranteed not to match.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> noMatch = <span class=\"regexp\">/(.)^/</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Certain characters need to be escaped so that they can be put into a</span></div><div class=\"line\">  <span class=\"comment\">// string literal.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> escapes = &#123;</div><div class=\"line\">    <span class=\"string\">\"'\"</span>:      <span class=\"string\">\"'\"</span>,</div><div class=\"line\">    <span class=\"string\">'\\\\'</span>:     <span class=\"string\">'\\\\'</span>,</div><div class=\"line\">    <span class=\"string\">'\\r'</span>:     <span class=\"string\">'r'</span>,</div><div class=\"line\">    <span class=\"string\">'\\n'</span>:     <span class=\"string\">'n'</span>,</div><div class=\"line\">    <span class=\"string\">'\\u2028'</span>: <span class=\"string\">'u2028'</span>,</div><div class=\"line\">    <span class=\"string\">'\\u2029'</span>: <span class=\"string\">'u2029'</span></div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> escaper = <span class=\"regexp\">/\\\\|'|\\r|\\n|\\u2028|\\u2029/g</span>;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> escapeChar = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">match</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'\\\\'</span> + escapes[match];</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// JavaScript micro-templating, similar to John Resig's implementation.</span></div><div class=\"line\">  <span class=\"comment\">// Underscore templating handles arbitrary delimiters, preserves whitespace,</span></div><div class=\"line\">  <span class=\"comment\">// and correctly escapes quotes within interpolated code.</span></div><div class=\"line\">  <span class=\"comment\">// NB: `oldSettings` only exists for backwards compatibility.</span></div><div class=\"line\">  _.template = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">text, settings, oldSettings</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!settings &amp;&amp; oldSettings) settings = oldSettings;</div><div class=\"line\">    settings = _.defaults(&#123;&#125;, settings, _.templateSettings);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Combine delimiters into one regular expression via alternation.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> matcher = <span class=\"built_in\">RegExp</span>([</div><div class=\"line\">      (settings.escape || noMatch).source,</div><div class=\"line\">      (settings.interpolate || noMatch).source,</div><div class=\"line\">      (settings.evaluate || noMatch).source</div><div class=\"line\">    ].join(<span class=\"string\">'|'</span>) + <span class=\"string\">'|$'</span>, <span class=\"string\">'g'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Compile the template source, escaping string literals appropriately.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> index = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> source = <span class=\"string\">\"__p+='\"</span>;</div><div class=\"line\">    text.replace(matcher, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">match, escape, interpolate, evaluate, offset</span>) </span>&#123;</div><div class=\"line\">      source += text.slice(index, offset).replace(escaper, escapeChar);</div><div class=\"line\">      index = offset + match.length;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">escape</span>) &#123;</div><div class=\"line\">        source += <span class=\"string\">\"'+\\n((__t=(\"</span> + <span class=\"built_in\">escape</span> + <span class=\"string\">\"))==null?'':_.escape(__t))+\\n'\"</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (interpolate) &#123;</div><div class=\"line\">        source += <span class=\"string\">\"'+\\n((__t=(\"</span> + interpolate + <span class=\"string\">\"))==null?'':__t)+\\n'\"</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (evaluate) &#123;</div><div class=\"line\">        source += <span class=\"string\">\"';\\n\"</span> + evaluate + <span class=\"string\">\"\\n__p+='\"</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"comment\">// Adobe VMs need the match returned to produce the correct offest.</span></div><div class=\"line\">      <span class=\"keyword\">return</span> match;</div><div class=\"line\">    &#125;);</div><div class=\"line\">    source += <span class=\"string\">\"';\\n\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// If a variable is not specified, place data values in local scope.</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (!settings.variable) source = <span class=\"string\">'with(obj||&#123;&#125;)&#123;\\n'</span> + source + <span class=\"string\">'&#125;\\n'</span>;</div><div class=\"line\"></div><div class=\"line\">    source = <span class=\"string\">\"var __t,__p='',__j=Array.prototype.join,\"</span> +</div><div class=\"line\">      <span class=\"string\">\"print=function()&#123;__p+=__j.call(arguments,'');&#125;;\\n\"</span> +</div><div class=\"line\">      source + <span class=\"string\">'return __p;\\n'</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> render = <span class=\"keyword\">new</span> <span class=\"built_in\">Function</span>(settings.variable || <span class=\"string\">'obj'</span>, <span class=\"string\">'_'</span>, source);</div><div class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;</div><div class=\"line\">      e.source = source;</div><div class=\"line\">      <span class=\"keyword\">throw</span> e;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> template = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> render.call(<span class=\"keyword\">this</span>, data, _);</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// Provide the compiled source as a convenience for precompilation.</span></div><div class=\"line\">    <span class=\"keyword\">var</span> argument = settings.variable || <span class=\"string\">'obj'</span>;</div><div class=\"line\">    template.source = <span class=\"string\">'function('</span> + argument + <span class=\"string\">')&#123;\\n'</span> + source + <span class=\"string\">'&#125;'</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> template;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add a \"chain\" function. Start chaining a wrapped Underscore object.</span></div><div class=\"line\">  _.chain = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> instance = _(obj);</div><div class=\"line\">    instance._chain = <span class=\"literal\">true</span>;</div><div class=\"line\">    <span class=\"keyword\">return</span> instance;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// OOP</span></div><div class=\"line\">  <span class=\"comment\">// ---------------</span></div><div class=\"line\">  <span class=\"comment\">// If Underscore is called as a function, it returns a wrapped object that</span></div><div class=\"line\">  <span class=\"comment\">// can be used OO-style. This wrapper holds altered versions of all the</span></div><div class=\"line\">  <span class=\"comment\">// underscore functions. Wrapped objects may be chained.</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Helper function to continue chaining intermediate results.</span></div><div class=\"line\">  <span class=\"keyword\">var</span> result = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">instance, obj</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> instance._chain ? _(obj).chain() : obj;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add your own custom functions to the Underscore object.</span></div><div class=\"line\">  _.mixin = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">obj</span>) </span>&#123;</div><div class=\"line\">    _.each(_.functions(obj), <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> func = _[name] = obj[name];</div><div class=\"line\">      _.prototype[name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> args = [<span class=\"keyword\">this</span>._wrapped];</div><div class=\"line\">        push.apply(args, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> result(<span class=\"keyword\">this</span>, func.apply(_, args));</div><div class=\"line\">      &#125;;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add all of the Underscore functions to the wrapper object.</span></div><div class=\"line\">  _.mixin(_);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add all mutator Array functions to the wrapper.</span></div><div class=\"line\">  _.each([<span class=\"string\">'pop'</span>, <span class=\"string\">'push'</span>, <span class=\"string\">'reverse'</span>, <span class=\"string\">'shift'</span>, <span class=\"string\">'sort'</span>, <span class=\"string\">'splice'</span>, <span class=\"string\">'unshift'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> method = ArrayProto[name];</div><div class=\"line\">    _.prototype[name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> obj = <span class=\"keyword\">this</span>._wrapped;</div><div class=\"line\">      method.apply(obj, <span class=\"built_in\">arguments</span>);</div><div class=\"line\">      <span class=\"keyword\">if</span> ((name === <span class=\"string\">'shift'</span> || name === <span class=\"string\">'splice'</span>) &amp;&amp; obj.length === <span class=\"number\">0</span>) <span class=\"keyword\">delete</span> obj[<span class=\"number\">0</span>];</div><div class=\"line\">      <span class=\"keyword\">return</span> result(<span class=\"keyword\">this</span>, obj);</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Add all accessor Array functions to the wrapper.</span></div><div class=\"line\">  _.each([<span class=\"string\">'concat'</span>, <span class=\"string\">'join'</span>, <span class=\"string\">'slice'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> method = ArrayProto[name];</div><div class=\"line\">    _.prototype[name] = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> result(<span class=\"keyword\">this</span>, method.apply(<span class=\"keyword\">this</span>._wrapped, <span class=\"built_in\">arguments</span>));</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Extracts the result from a wrapped and chained object.</span></div><div class=\"line\">  _.prototype.value = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._wrapped;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Provide unwrapping proxy for some methods used in engine operations</span></div><div class=\"line\">  <span class=\"comment\">// such as arithmetic and JSON stringification.</span></div><div class=\"line\">  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;</div><div class=\"line\"></div><div class=\"line\">  _.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">''</span> + <span class=\"keyword\">this</span>._wrapped;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// AMD registration happens at the end for compatibility with AMD loaders</span></div><div class=\"line\">  <span class=\"comment\">// that may not enforce next-turn semantics on modules. Even though general</span></div><div class=\"line\">  <span class=\"comment\">// practice for AMD registration is to be anonymous, underscore registers</span></div><div class=\"line\">  <span class=\"comment\">// as a named module because, like jQuery, it is a base library that is</span></div><div class=\"line\">  <span class=\"comment\">// popular enough to be bundled in a third party lib, but not be part of</span></div><div class=\"line\">  <span class=\"comment\">// an AMD load request. Those cases could generate an error when an</span></div><div class=\"line\">  <span class=\"comment\">// anonymous define() is called outside of a loader request.</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">'function'</span> &amp;&amp; define.amd) &#123;</div><div class=\"line\">    define(<span class=\"string\">'underscore'</span>, [], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> _;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;.call(<span class=\"keyword\">this</span>));</div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Understore","subtitle":"understore æºç åˆ†æ","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"post-bg-e2e-ux.jpg","header-mask":0.3,"catalog":true,"_content":"","source":"_posts/2016-12-28-understore-analysis.markdown","raw":"---\nlayout:     post\ntitle:      \"Understore\"\nsubtitle:   \"understore æºç åˆ†æ\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"post-bg-e2e-ux.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - understore\n---\n","slug":"2016-12-28-understore-analysis","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxh000wmmt7y0hz1zwc","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"post","title":"NodeJS","subtitle":"Github","date":"2017-01-06T03:11:00.000Z","author":"Asher","header-img":"nodejs.jpg","header-mask":0.3,"catalog":true,"_content":"\n[T1](http://www.zcfy.cc/article/node-js-best-practices-how-to-become-a-better-developer-in-2017-risingstack-2174.html)\n\n[1KE</>](http://1ke.co/course/787)\n","source":"_posts/2017-01-06-nodejs.markdown","raw":"---\nlayout:     post\ntitle:      \"NodeJS\"\nsubtitle:   \"Github\"\ndate:       2017-01-06 11:11\nauthor:     \"Asher\"\nheader-img: \"nodejs.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - NodeJS\n---\n\n[T1](http://www.zcfy.cc/article/node-js-best-practices-how-to-become-a-better-developer-in-2017-risingstack-2174.html)\n\n[1KE</>](http://1ke.co/course/787)\n","slug":"2017-01-06-nodejs","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxj000xmmt7vdb3w5sg","content":"<p><a href=\"http://www.zcfy.cc/article/node-js-best-practices-how-to-become-a-better-developer-in-2017-risingstack-2174.html\" target=\"_blank\" rel=\"external\">T1</a></p>\n<p><a href=\"http://1ke.co/course/787\" target=\"_blank\" rel=\"external\">1KE&lt;/&gt;</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"http://www.zcfy.cc/article/node-js-best-practices-how-to-become-a-better-developer-in-2017-risingstack-2174.html\" target=\"_blank\" rel=\"external\">T1</a></p>\n<p><a href=\"http://1ke.co/course/787\" target=\"_blank\" rel=\"external\">1KE&lt;/&gt;</a></p>\n"},{"layout":"post","title":"Freshman Guide","subtitle":"Guide","date":"2017-01-06T03:11:00.000Z","author":"Asher","header-img":"nodejs.jpg","header-mask":0.3,"catalog":true,"_content":"\n# å‰è¨€\n\næœ¬æ–‡æ˜¯[å‰è€å¤§](https://github.com/inetfuture)å¯¹å·¥ä½œçš„ä¸€äº›æŒ‡å¯¼å’Œè¦æ±‚, æˆ‘åœ¨è¿™é‡Œåšäº†ä¸€äº›æ•´ç†å’Œè¡¥å……ã€‚\nä½œä¸ºä¸€åå¼€å‘è€…é¦–å…ˆè¦åšåˆ°çš„æ˜¯æœ‰`è´£ä»»å¿ƒ`, å…¶æ¬¡æ˜¯`Be Professional!`ã€‚\n\n# å¿…è¯»æ•°æ®\n\n- [Pro Git](https://git-scm.com/book/zh/v2)\n- [Git merge-vs-rebase](http://mislav.net/2013/02/merge-vs-rebase/)\n- [how-to-name-things](http://slides.com/inetfuture/how-to-name-things)\n- [RESTful API](restful_api.md)\n\n- ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹\n- ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹\n- ã€Šæ•æ·è½¯ä»¶å¼€å‘ : åŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹\n- ã€ŠTCP/IP è¯¦è§£ å·1ã€‹\n- [Git](git.md)\n- [the-art-of-command-line](https://github.com/jlevy/the-art-of-command-line/blob/master/README-zh.md)\n\n- [Oh My Zsh](https://github.com/robbyrussell/oh-my-zsh)\n- [Trello](https://trello.com)\n- [DevDocs](http://devdocs.io/)\n\n[æ‰©å±•é˜…è¯»](https://github.com/CraryPrimitiveMan)\n\n# å¿…å¤‡å·¥å…·\n\n## VPN\n\n- [GreenVPN](http://gjsq.me/23186204)\n\n## Sublime Text\n\n### Package Control\n\n* Sublime Text 2\n\n```python\nimport urllib2,os,hashlib; h = 'df21e130d211cfc94d9b0905775a7c0f' + '1e3d39e33b79698005270310898eea76'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), 'wb' ).write(by) if dh == h else None; print('Error validating download (got %s instead of %s), please try manual install' % (dh, h) if dh != h else 'Please restart Sublime Text to finish installation')\n```\n\n* Sublime Text 3\n\n```python\nimport urllib.request,os,hashlib; h = 'df21e130d211cfc94d9b0905775a7c0f' + '1e3d39e33b79698005270310898eea76'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by)\n```\n\nå¿…å¤‡æ’ä»¶ï¼šGitï¼ŒGitGutterï¼Œknockdownï¼ŒSublimeLinterï¼ŒDocBlockrï¼ŒEditorConfigï¼ŒEmmetï¼ŒFileDiffsï¼ŒSublimeCodeIntel, SidebarEnhancements, PackageSync\n\n# åšäº‹åŸåˆ™ã€æ–¹æ³•\n\n- ä¸»åŠ¨æ²Ÿé€šè€Œä¸æ˜¯è¢«åŠ¨åº”ä»˜\n    - å·¥ä½œä¸Šå­˜åœ¨ä»»ä½•è®©ä½ ä¸çˆ½çš„äº‹æ—¶ï¼Œå°½é‡æå‡ºæ¥ï¼Œæ‰€æœ‰çš„é—®é¢˜éƒ½å¯ä»¥è®¨è®ºã€åè°ƒã€ç¼“è§£ï¼Œç”šè‡³å®Œå…¨é¿å…ï¼Œé•¿æœŸå‹æŠ‘ç€ä¼šå½±å“è‡ªå·±çš„å·¥ä½œæ•ˆç‡å’Œç§¯ææ€§ï¼Œå¯¹ä¸ªäººå’Œå›¢é˜Ÿéƒ½ä¸åˆ©ã€‚\n    - å¯¹éœ€æ±‚ã€å¼€å‘è§„èŒƒã€ä»£ç ç»„ç»‡ç­‰ç­‰å„æ–¹é¢å­˜åœ¨ä»»ä½•ç–‘é—®æ—¶ï¼Œä¸»åŠ¨è¯¢é—®å’Œè®¨è®ºï¼Œä¸è¦é»˜ä¸ä½œå£°ã€è‡ªä½œä¸»å¼ å¯¼è‡´è¿”å·¥å’Œå»¶è¯¯ã€‚\n    - è‡ªå·±çš„ä»£ç è¢«åˆ«äºº Review æ—¶ï¼Œå¦‚æœè§‰å¾—æŸæ®µä»£ç å¯èƒ½æœ‰é—®é¢˜æˆ–è€…ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼Œä¸»åŠ¨æå‡ºæ¥è®¨è®ºï¼Œè€Œä¸æ˜¯ç­‰å¾…å®¡æŸ¥è€…è¯¢é—®ã€‚å‰è€…å¯ä»¥ä½¿ Review æ›´é«˜æ•ˆï¼Œæ›´åˆ©äºåŸ¹å…»åŒäº‹é—´çš„ç›¸äº’ä¿¡ä»»ï¼Œåè€…ä¸€æ˜¯æ•ˆç‡ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§ä¸è´Ÿè´£ä»»çš„è¡¨ç°ã€‚\n    - è¿›åº¦å­˜åœ¨é£é™©æ—¶ä¸»åŠ¨çŸ¥ä¼šå…¶ä»–äººï¼Œè€Œä¸æ˜¯é»˜é»˜æ‹–åˆ°æœ€åä¸€åˆ»è¿ç´¯å¤§å®¶åŠ ç­ã€‚\n    - åšå˜æ›´æ—¶åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜ï¼Œå¦åˆ™å¯èƒ½ä¼šæµªè´¹é˜Ÿå‹çš„æ—¶é—´å»æ’æŸ¥é—®é¢˜ã€‚ä»£ç çº§åˆ«çš„é—®é¢˜å¯ä»¥é€šè¿‡åœ¨ GitLab ç­‰ä»£ç ç®¡ç†å·¥å…·ä¸Š at å¯¹æ–¹ã€‚\n\n- è®¤çœŸè´Ÿè´£ï¼Œå…³æ³¨ç»†èŠ‚ï¼Œè¿½æ±‚å“è¶Š\n    - æ¯ä¸€ä»½éœ€æ±‚éƒ½è¦ç†è§£ä¹‹åå†åŠ¨æ‰‹ï¼Œæ„Ÿè§‰éœ€æ±‚ä¸åˆç†æˆ–ä¸æ˜ç¡®çš„è¦æå‡ºæ¥è®¨è®ºï¼Œå¯¹äº§å“è¦æœ‰è´£ä»»å¿ƒï¼Œä¸ä»…ä»…æ˜¯â€œæŒ‰éƒ¨å°±ç­â€å¾—åšäº‹æƒ…ã€‚\n    - æäº¤å‰ä»”ç»†æµ‹è¯•è‡ªå·±å®ç°çš„åŠŸèƒ½ï¼Œæ£€æŸ¥ä»£ç ç»†èŠ‚ï¼Œæœ‰äº¤ä»˜é«˜è´¨é‡ä»£ç çš„è´£ä»»å¿ƒï¼Œè€Œä¸æ˜¯ä¾èµ–å…¶ä»–æˆå‘˜å¸®ä½  Reivew æˆ–è€… QA å¸®ä½ å‘ç° bug ã€‚\n    - ä»£ç ä»…ä»…å¯ä»¥å·¥ä½œæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜è¦å¯è¯»ã€æ˜“æ‰©å±•ã€å¯ç»´æŠ¤ã€å®‰å…¨ã€é«˜æ•ˆï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œè¦ç”¨é«˜æ ‡å‡†è¦æ±‚è‡ªå·±ï¼Œå†™ä»£ç è¦â€œä¸Šå¿ƒâ€ï¼Œä¸è¦æ•·è¡ã€éšæ„ã€‚\n    - ç»†èŠ‚ä¸ä¸€å®šå†³å®šæˆè´¥ä½†å´å¯ä»¥å……åˆ†ä½“ç°ä¸€ä¸ªäººçš„å·¥ä½œæ€åº¦ï¼Œè¯·è®¤çœŸå¯¹å¾…å„ç§æµç¨‹ã€è§„èŒƒï¼Œæ¯”å¦‚å†™è‹±æ–‡é‚®ä»¶æ—¶ï¼Œä»è¯­æ³•ã€æ ¼å¼åˆ°æ¯ä¸€ä¸ªæ‹¼å†™ã€æ ‡ç‚¹ï¼Œå†æ¯”å¦‚ Commit Message çš„æ ¼å¼ã€Coding Style ç­‰ç­‰ã€‚\n\n- è‡ªæˆ‘é©±åŠ¨\n    - è‡ªè§‰æ·±å…¥å­¦ä¹ ç›¸å…³æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ç”¨å¤šå°‘å­¦å¤šå°‘ï¼Œä¸´æ—¶æŠ±ä½›è„šã€‚å‡è®¾ä½ åœ¨åš IOS å¼€å‘ï¼Œå³ä¾¿ç›®å‰æ‰€æœ‰é¡¹ç›®ä»åœ¨ç”¨ Objective-C ï¼Œä½ ä¹Ÿåº”è¯¥åˆ©ç”¨ä¸šä½™æ—¶é—´è‡ªè§‰å»å­¦ä¹  Swift ï¼Œæ—¶åˆ»å‡†å¤‡ç€ã€‚\n    - ä¸»åŠ¨æ€è€ƒäº§å“çš„èµ°å‘ï¼Œè‡ªè§‰è¿›è¡ŒçŸ¥è¯†å‚¨å¤‡ã€è°ƒç ”ã€‚\n    - è‡ªè§‰é‡æ„ä½è´¨é‡ä»£ç ï¼Œæ”¹å–„é¡¹ç›®æµç¨‹ï¼Œç­‰ç­‰ï¼Œä¿è¯é¡¹ç›®çš„å¥åº·å‘å±•ã€‚\n\n- æ¢ä½æ€è€ƒ\n    - ä½¿ç”¨é‚®ä»¶ã€å¾®ä¿¡ç­‰å·¥å…·äº¤æµæ—¶ä¸€æ¬¡æ€§æä¾›å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼Œé¿å…ä½æ•ˆç‡çš„æ²Ÿé€šï¼Œæƒ³ä¸€ä¸‹ï¼Œæˆ‘è¿™æ ·æè¿°å¯¹æ–¹æ˜¯å¦å¯ä»¥ç†è§£å¹¶ç›´æ¥å›å¤ã€‚\n    - æ— è®ºæ˜¯åš Code Review è¿˜æ˜¯æäº¤åŠŸèƒ½ç»™ QA æµ‹è¯•ï¼Œå°½è‡ªå·±æœ€å¤§åŠªåŠ›ä¿è¯è´¨é‡ï¼Œåšå¥½è‡ªå·±åˆ†å†…çš„äº‹ï¼Œå‡è½»é˜Ÿå‹çš„è´Ÿæ‹…ã€‚\n    - ä½œä¸ºå¼€å‘ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¸º leader åˆ†æ‹…å‹åŠ›ï¼Ÿä½œä¸º leader ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¿ƒè¿›ä¸‹å±å·¥ä½œèƒ½åŠ›çš„ç¨³æ­¥æˆé•¿ï¼Ÿ\n\n- ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜\n    - æ€è€ƒé—®é¢˜çš„åŸå› ï¼Œä¸è¦åœç•™äºè¡¨é¢é—®é¢˜çš„ä¿®ä¿®è¡¥è¡¥ã€‚\n\n- ç”¨æ­£ç¡®çš„æ–¹å¼è§£å†³é—®é¢˜\n    - å¾ˆå¤šé—®é¢˜éƒ½æœ‰ä¸æ­¢ä¸€ç§çš„è§£å†³åŠæ³•ï¼Œä¸è¦æ»¡è¶³äºä½ æœ€åˆæƒ³åˆ°çš„é‚£ç§ï¼Œä¹Ÿè®¸æœ‰æ›´å¥½çš„å‘¢ï¼Ÿä¸»åŠ¨å»æ€è€ƒç›®å‰çš„æ–¹æ¡ˆå¯ç»´æŠ¤å—ï¼Ÿæ–¹ä¾¿å—ï¼Ÿæ•ˆç‡é«˜å—ï¼Ÿæ™®é€‚å—ï¼Ÿ\n    - å¤šçœ‹ä¸€äº›æœ€ä½³å®è·µï¼ˆBest Practiceï¼‰çš„èµ„æ–™ï¼Œå¤šçœ‹ä¸€äº›ä¼˜ç§€å¼€æºé¡¹ç›®çš„æºä»£ç ï¼Œå¤šäº†è§£åˆ«äººæ€ä¹ˆåšçš„ä½ æ‰èƒ½åŠæ—¶å‘ç°è‡ªå·±çš„ä¸è¶³ã€‚\n    - ä¸è¦é‡å¤é€ è½®å­ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¹Ÿè®¸äººå®¶å·²ç»æä¾›äº†ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œåªæ˜¯å› ä¸ºä½ æ²¡æœ‰ä»”ç»†çœ‹æ–‡æ¡£ï¼Œæ‰€ä»¥ä¸çŸ¥é“ã€‚\n\n- ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥\n    - å­¦ä¹ æ–°çŸ¥è¯†è¦å°½å¯èƒ½çš„ç³»ç»Ÿã€å…¨é¢ï¼Œä¸è¦åªæ˜¯ä¸ºäº†åº”ä»˜å½“å‰å·¥ä½œç‰‡é¢äº†è§£ã€‚\n    - ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€æ¡†æ¶æ—¶åº”å°½é‡é€šè¯»å…¶æ–‡æ¡£ï¼Œè‡³å°‘è¦çŸ¥é“å®ƒå¯ä»¥åšä»€ä¹ˆï¼Œæœ‰å“ªäº›é™åˆ¶ï¼Œé‡åˆ°å…·ä½“é—®é¢˜åå¯ä»¥è¿…é€Ÿåˆ°æ–‡æ¡£ä¸­æŸ¥çœ‹ç»†èŠ‚ã€‚\n    - å¸¸ç”¨çš„æŠ€æœ¯ç‚¹è¦èˆå¾—èŠ±æ—¶é—´ææ¸…æ¥šå…¶è¿è¡ŒåŸç†ã€å†…éƒ¨æœºåˆ¶ï¼Œå…çš„æ¯æ¬¡å‡ºé—®é¢˜éƒ½åƒæ— å¤´è‹è‡ï¼Œåªèƒ½ççŒœã€‚æ¯”å¦‚ Angular.js çš„ directive ç¼–è¯‘æµç¨‹æ˜¯æ€æ ·çš„ï¼ŸNode.js çš„å¼‚æ­¥ IO æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ\n    - å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚å¹³æ—¶è¦æ³¨æ„æ•ˆç‡å·¥å…·çš„ç§¯ç´¯ï¼ŒåŒ…æ‹¬å¥½çš„ä»£ç ç¼–è¾‘å™¨ã€å‘½ä»¤è¡Œå·¥å…·ã€ä»»åŠ¡ç®¡ç†å·¥å…·ã€å„ç§å®ç”¨å°å·¥å…·ç­‰ç­‰ã€‚å¯¹äºä½ å¸¸ç”¨çš„ç¼–è¾‘å™¨æˆ– IDE åº”è¯¥èŠ±ä¸€äº›æ—¶é—´å»ç†Ÿç»ƒå®ƒçš„å¿«æ·é”®ï¼Œå¯»æ‰¾ä¸€äº›å¥½ç”¨çš„æ’ä»¶ï¼Œæ¯•ç«Ÿå·¥ä½œæ¯å¤©éƒ½è¦ç”¨ï¼ŒæŠ•å…¥çš„ç²¾åŠ›ç»å¯¹ç‰©è¶…æ‰€å€¼ã€‚\n\n# ç¼–å†™æ•´æ´ä»£ç \n\n> Writing clean code requires the disciplined use of a myriad little techniques applied through a painstakingly acquired sense of \"cleanliness\". This \"code-sense\" is the key. Some of us are born with it. Some of us have to fight to acquire it. Not only does it let us see whether code is good or bad, but it also shows us the strategy for applying our discipline to transform bad code into clean code.\n\n## åŸºæœ¬è¦æ±‚\n\n- Coding Styleï¼Œå¦‚æœæœ‰è¦æ±‚ï¼Œåº”è¯¥ä¸¥æ ¼éµå¾ªï¼Œä»»ä½•ä¾‹å¤–çš„æƒ…å†µéœ€è¦è®¨è®ºå†³å®šã€‚\n- å¯è¯»æ€§ï¼Œè¦å®¹æ˜“ç†è§£ï¼Œå‘½åè¦å…·æœ‰è¶³å¤Ÿæè¿°æ€§ï¼Œä¸èƒ½æœ‰æ­§ä¹‰ï¼Œä»£ç è·¯å¾„ã€ç»“æ„è¦æ¸…æ™°ã€ç®€æ´ã€‚\n- ä¸€è‡´æ€§ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ ‡è¯†ç¬¦å‘½åã€é”™è¯¯å¤„ç†ã€æ—¥å¿—æ ¼å¼ã€æ–‡ä»¶ç»„ç»‡æ–¹å¼ã€HTTP API æ¥å£è®¾è®¡ã€UI äº¤äº’ç­‰å„ä¸ªæ–¹é¢ï¼Œè¶Šæ˜¯ä¸€è‡´çš„ç³»ç»Ÿè¶Šå®¹æ˜“ä¸Šæ‰‹ï¼Œè¶Šå®¹æ˜“ç»´æŠ¤ï¼Œåä¹‹åˆ™ç»´æŠ¤æˆæœ¬è¶Šé«˜ã€‚\n- å¥å£®æ€§ï¼Œè¿›è¡Œå¿…è¦çš„è¾“å…¥éªŒè¯ï¼Œå……åˆ†å¾—è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œå¼‚å¸¸å¤„ç†è¦å‘¨å…¨ï¼Œé˜²æ­¢å†…å­˜æ³„éœ²ï¼Œé˜²æ­¢ç«æ€æ¡ä»¶ï¼Œå¤šçº¿ç¨‹å®‰å…¨ï¼Œç­‰ç­‰ã€‚\n- æ€§èƒ½ï¼Œè€ƒè™‘æ•°æ®é‡å¤§æˆ–è€…è®¿é—®é¢‘ç¹æ—¶çš„æƒ…å†µï¼Œå¯¹å†…å­˜ã€æ•°æ®åº“çš„ä½¿ç”¨è¦é«˜æ•ˆï¼Œç®—æ³•è¦å°½é‡æœ€ä¼˜ã€‚\n    - ä»»ä½•æ¶‰åŠæ•°é‡çš„åœ°æ–¹ï¼Œåœ¨ä¸šåŠ¡åœºæ™¯åˆç†çš„å‰æä¸‹è€ƒè™‘æŠŠæ•°é‡æ”¾å¤§åˆ°æœ€å¤§ï¼Œä¸ºæœ€åçš„æƒ…å†µåšæ‰“ç®—ã€‚\n    - æ•°æ®åº“ï¼š\n        - æ“ä½œåº”å°½é‡æ‰¹é‡è¿›è¡Œï¼ŒåªæŸ¥è¯¢å¿…éœ€çš„å­—æ®µï¼Œå‡å°‘ IO æ¶ˆè€—ã€‚\n        - ç‰¹åˆ«å¤§çš„æŸ¥è¯¢åº”åœ¨æ•°æ®åº“ä¸­åˆ†é¡µï¼Œç”±ç¨‹åºæ§åˆ¶åˆ†æ‰¹æ¬¡å¤„ç†ï¼Œå…¨é‡å–å‡ºåœ¨å†…å­˜ä¸­è®¡ç®—æˆ–è€…æ ¹æœ¬ä¸è€ƒè™‘æ•°æ®é‡å¤§å°æ˜¯å¸¸è§çš„ä½çº§é”™è¯¯ã€‚\n        - åˆç†ä½¿ç”¨ç´¢å¼•ã€‚\n    - åŸºæœ¬ä¼˜åŒ–æ€è·¯ï¼š\n        - é¢„å…ˆç­›é€‰æ•°æ®ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚\n        - ç¼“å­˜è®¡ç®—ç»“æœï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚\n        - ä½¿ç”¨é«˜æ•ˆæ•°æ®ç»“æ„ï¼Œç©ºé—´æ¢æ—¶é—´ã€‚\n- å®‰å…¨æ€§ï¼Œè¿›è¡Œå¿…è¦çš„æƒé™æ£€æŸ¥ï¼Œä¸èƒ½è¿‡åº¦ä¿¡ä»»å®¢æˆ·ç«¯è¾“å…¥ã€‚\n- DRYï¼ˆDon't Repeat Yourselfï¼‰åŸåˆ™ï¼Œå¤åˆ¶ã€ç²˜è´´çš„è¡Œä¸ºæ˜¯è¦åšå†³ç¦æ­¢çš„ï¼Œä¸çŸ¥é“å¦‚ä½•å¤ç”¨ä»£ç çš„è¦ä¸»åŠ¨ä¸å…¶ä»–æˆå‘˜è®¨è®ºã€‚\n- å•ä¸€èŒè´£åŸåˆ™ï¼Œä¸€ä¸ªç±»ã€æ–‡ä»¶æˆ–è€…æ¨¡å—ä¸èƒ½åšçš„å¤ªå¤šï¼Œä¸èƒ½åšä¸è¯¥å®ƒåšçš„äº‹ï¼Œå¥½çš„è®¾è®¡æ˜¯åªæŠŠä¸€ä»¶äº‹åšå¥½ã€‚\n- å¼€æ”¾ã€å°é—­åŸåˆ™ï¼Œè¦æ–¹ä¾¿æ‰©å±•ï¼Œè¦è€ƒè™‘åˆ°ä»¥åçš„éœ€æ±‚ã€‚\n- ä»£ç æ”¹åŠ¨æ–¹å¼è¦åˆé€‚ï¼Œä¸èƒ½ä¸€å‘³å¾—å †ç Œä»£ç ï¼Œéœ€è¦é€‚æ—¶åœä¸‹æ¥è¿›è¡Œé‡æ„ã€‚\n- ä¿æŒå¹²å‡€ï¼Œä¸èƒ½å­˜åœ¨ä»»ä½•æ— ç”¨çš„æ–‡ä»¶ã€ä»£ç ï¼Œæ‰€æœ‰æ–‡æ¡£ã€æ³¨é‡Šéœ€è¦åŒæ­¥æ›´æ–°ï¼Œä¸èƒ½åŒ…å«æ³¨é‡Šæ‰çš„ä»£ç ï¼Œä¸èƒ½åŒ…å«ä¸´æ—¶è°ƒè¯•ä»£ç ï¼Œä¾‹å¤–æƒ…å†µåº”è¯¥æ·»åŠ æ³¨é‡Šè¯´æ˜ã€‚\n- æ‰€æœ‰ Warning éƒ½åº”è¯¥è¢«ç«‹å³ä¿®å¤ï¼Œè§‰å¾—ä¸éœ€è¦ä¿®çš„ï¼Œè®¨è®ºå†³å®šåé€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ç¦ç”¨æ‰ã€‚\n\n## è¿›é˜¶è¦æ±‚\n\n- ä½¿ç”¨å¤šæ€å‡å°‘æˆ–è½¬ç§» `if` åˆ¤æ–­ï¼Œ(Video)[https://www.youtube.com/watch?v=4F72VULWFvc&index=1&list=PL693EFD059797C21E]\n\n## æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\n\n- å±€éƒ¨å˜é‡å°½é‡å°±è¿‘å£°æ˜ã€‚\n- return early (V1)[https://www.airpair.com/php/posts/best-practices-for-modern-php-development#4-2-try-not-to-use-else-] (V2)[http://www.codeproject.com/Articles/626403/How-and-Why-to-Avoid-Excessive-Nesting]\n- ç›¸å…³çš„ä»£ç å°½é‡æŒ‰ä½¿ç”¨é¡ºåºç»„ç»‡åœ¨ä¸€èµ·ï¼Œå°¤å…¶æ˜¯æ·»åŠ æ–°ä»£ç æ—¶ï¼Œä¸è¦ä¸€å‘³å¾—æ·»åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ã€‚\n- å¸ƒå°”å˜é‡å‘½ååº”å°½é‡é‡‡ç”¨è‚¯å®šå½¢åŠ¿ã€‚\n- é¿å…ç¡¬ç¼–ç æ•°å­—ã€å­—ç¬¦ä¸²ï¼Œåº”ä½¿ç”¨å¸¸é‡å¹¶ç»™å®ƒä»¬æœ‰æ„ä¹‰çš„åå­—ã€‚\n- ä¼ é€’ç®€å•æ•°æ®ç±»å‹æ—¶ï¼Œé€‚å½“æ·»åŠ ä¸´æ—¶å˜é‡æé«˜å¯è¯»æ€§ã€‚\n\n## å¦‚ä½•å†™æ³¨é‡Š\n\n- ä»£ç çš„æ„å›¾åº”è¯¥ç”±ä»£ç è‡ªèº«æ¥è¡¨è¾¾ï¼Œå³æ‰€è°“çš„å¯è¯»æ€§ï¼Œä¸åº”è¯¥ä¾èµ–äºæ³¨é‡Šè¯´æ˜ï¼Œæ‰€ä»¥ä¼˜å…ˆè€ƒè™‘å†™æ›´å¯è¯»çš„ä»£ç ã€‚\n- ä»£ç æ„å›¾æ˜æ˜¾çš„æƒ…å†µä¸‹ï¼Œä¸è¦åŠ æ³¨é‡Šé‡å¤è¯´æ˜ã€‚\n- ä»¥ä¸‹æ³¨é‡Šæ˜¯åˆç†çš„æˆ–è€…è¯´ä»¥ä¸‹æƒ…å†µéœ€è¦å†™æ³¨é‡Šï¼š\n    - çº²è¦æ€§çš„æ³¨é‡Šï¼Œç®€è¦çš„æè¿°æŸä¸€ä¸ªæ–‡ä»¶ã€æŸä¸€ä¸ªç±»æˆ–æŸä¸€ä¸ªæµç¨‹ã€‚\n    - ç¡®å®æ— æ³•ä»ä»£ç æœ¬èº«æé«˜å¯è¯»æ€§çš„æƒ…å†µï¼Œæ¯”å¦‚å¤æ‚ä¸šåŠ¡é€»è¾‘ã€ç®—æ³•ã€‚\n    - ä»£ç çš„ä½œç”¨å¹¶ä¸ç›´è§‚æ—¶ï¼Œè§£é‡Šè¿™æ ·åšçš„åŸå› ã€‚\n    - å­˜åœ¨å¤šç§å¯é€‰æ–¹æ¡ˆæ—¶ï¼Œè§£é‡Šä¸ºä»€ä¹ˆé€‰æ‹©ç°åœ¨è¿™ç§ã€‚\n    - å› ä¸ºæŸäº›é™åˆ¶è€Œä½¿ä»£ç ä¸ä¸€è‡´ã€ä¸ä¼˜é›…æˆ–å­˜åœ¨å‰¯ä½œç”¨æ—¶ï¼Œåº”æ³¨æ˜åŸå› åŠåæœã€‚\n    - å‚è€ƒäº†å¤–éƒ¨ä¸€äº›èµ„æ–™æ—¶ï¼Œåº”æ³¨æ˜é“¾æ¥ï¼Œæ–¹ä¾¿å…¶ä»–äººæŸ¥çœ‹ã€‚\n    - ä¸´æ—¶æ ‡è®°æ³¨é‡Šï¼šTODOã€FIXMEã€HACKã€OPTIMIZEã€REVIEWã€‚\n- æ³¨é‡Šåº”éšä»£ç æ›´æ–°ã€‚\n\n# Coding Style\n\n## å‰ç«¯\n\n* [Front End Style Guide](https://github.com/Aaaaaashu/Front-End-Style-Guide)\n* [Style Guide Articles](https://github.com/maban/styleguides)\n* [PrimerCSS](http://primercss.io/guidelines/)\n\n### è¯­è¨€\n\n* [Coffeescript](https://github.com/polarmobile/coffeescript-style-guide)\n* [ES6](https://github.com/airbnb/javascript)\n* [ES6ä¸­æ–‡ç‰ˆ](https://github.com/yuche/javascript)\n* [ES6ä¸­æ–‡è°ƒæ•´ç‰ˆ](https://github.com/adamlu/javascript-style-guide)\n* [ES5](https://github.com/airbnb/javascript/tree/master/es5)\n* [ES5ä¸­æ–‡ç‰ˆ](https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md)\n* [CSS/SASS/LESS](https://github.com/airbnb/css)\n* [Project CSS](https://github.com/dropbox/css-style-guide)\n\n### æ¡†æ¶\n\n* [AngularJS](https://github.com/johnpapa/angular-styleguide)\n* [AngularJS Best Practice](https://github.com/mgechev/angularjs-style-guide)\n* [Project AngularJS](https://github.com/gocardless/angularjs-style-guide)\n\n## åç«¯\n\n### è¯­è¨€\n\n* [PHP PSR1](http://www.php-fig.org/psr/psr-1/)\n* [PHP PSR2](http://www.php-fig.org/psr/psr-2/)\n* [Effective Go Lite](https://bingohuang.gitbooks.io/effective-go-lite-edition/content/)\n* [Effective Go](https://golang.org/doc/effective_go.html)\n* [Effective Goä¸­æ–‡ç‰ˆ](http://www.chingli.com/coding/effective-go/)\n* [Best Practice for Go Developer](https://medium.com/@IndianGuru/best-practices-for-a-new-go-developer-8660384302fc)\n\n# Code Review\n\n## ç›®çš„\n\n- æé«˜ä»£ç è´¨é‡ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚\n- ç›¸äº’å­¦ä¹ ã€‚\n- ä¿ƒè¿›é¡¹ç›®å†…çŸ¥è¯†æµåŠ¨ï¼Œé˜²æ­¢å¯¹æŸä¸ªä¸ªäººè¿‡åˆ†ä¾èµ–ã€‚\n\n## Commit Message è§„èŒƒ\n\nè§„å®šæ ¼å¼å¦‚ä¸‹ï¼š\n\n```javascript\n$(scope): $(subject)\n\n$(description)\n```\n\n- `$(scope)`ï¼šå¿…éœ€ï¼Œå–å†³äºå…·ä½“é¡¹ç›®ï¼Œä¸€èˆ¬ä¸ºé¡¹ç›®åŠŸèƒ½æ¨¡å—ã€ç»„ä»¶çš„åå­—ï¼Œç”¨æ¥æè¿°æœ¬æ¬¡ commit **å½±å“çš„èŒƒå›´**ï¼Œæ¯”å¦‚ https://github.com/nodejs/node/commits/master ã€‚å½±å“å¤šä¸ªæ¨¡å—ã€ç»„ä»¶å¯ä»¥ç”¨ `,` éš”å¼€ã€‚ååŠ å…¥é¡¹ç›®çš„æ–°æˆå‘˜åº”éµå¾ªå·²æœ‰çš„ scope çº¦å®šï¼ˆé€šè¿‡ `git log` å¯ä»¥æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„æäº¤å†å²ï¼‰ï¼Œä¸è¦è‡ªå·±ç¼–é€ ã€‚ä½¿ç”¨é¦–å­—æ¯å°å†™çš„é©¼å³°å‘½åã€‚`bug` ã€ `hotfix` ã€ `task` ã€ `change` ã€`refactor` ç­‰ç­‰æè¿°çš„éƒ½ä¸æ˜¯å½±å“çš„å…·ä½“èŒƒå›´ï¼Œè€Œæ˜¯æ”¹åŠ¨ç±»å‹ï¼Œä¸èƒ½ç”¨ä½œ scope ã€‚é™¤å…·ä½“çš„æ¨¡å—ã€ç»„ä»¶åä¹‹å¤–ï¼Œå¯ä»¥ä½¿ç”¨ `base` è¡¨ç¤ºåŸºç¡€ç»“æ„ã€æ¡†æ¶ç›¸å…³çš„æ”¹åŠ¨ã€‚\n- `$(subject)`ï¼šå¿…éœ€ï¼Œ50 ä¸ªå­—ç¬¦å·¦å³çš„ç®€è¦è¯´æ˜ï¼Œé¦–å­—æ¯å°å†™ï¼Œé€šå¸¸æ˜¯åŠ¨å®¾ç»“æ„ï¼Œæè¿°åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒåŠ¨è¯ç”¨ä¸€èˆ¬ç°åœ¨æ—¶ï¼Œç¦æ­¢å‡ºç° *update code* ï¼Œ *fix bug* ç­‰æ— å®é™…æ„ä¹‰çš„æè¿°ï¼Œå¥½çš„ä¾‹å­ï¼š *select connector by sorting free memory* ï¼ˆä¸éœ€è¦å½¢å¦‚ *update about how to select connector ...* çš„å•°å—¦å†™æ³•ï¼‰, *fix sucess tip can not show on IE8* ï¼ˆä¸éœ€è¦å½¢å¦‚ *fix bug of ...* çš„å•°å—¦å†™æ³•ï¼‰ã€‚\n- `$(description)`ï¼šå¯é€‰ï¼Œè¯¦ç»†è¯´æ˜ï¼Œå»ºè®®ä½¿ç”¨åˆ—è¡¨ç½—åˆ—è¦ç‚¹ã€‚\n\n## æµç¨‹\n\n1. æäº¤è€…å‘èµ· topic åˆ†æ”¯åˆ°ç›®æ ‡åˆ†æ”¯çš„ Merge Request ã€‚\n    - ä»£ç å˜åŠ¨è¦å°½é‡å°ä¸”ä¸“æ³¨äºä¸€ä¸ªä»»åŠ¡ï¼Œä¸è¦æ”’çš„å¾ˆå¤§ï¼Œæˆ–è€…åšå¤šä¸ªä»»åŠ¡ï¼Œè¦ä¿è¯å®¡æŸ¥è€…å¯ä»¥è¾ƒå¿«ã€è¾ƒå®¹æ˜“çš„ Review ã€‚\n    - å¦‚æœä¸ç›®æ ‡åˆ†æ”¯æœ‰å†²çªï¼Œæäº¤è€…åº”è¯¥è‡ªå·±ä½¿ç”¨ `git rebase` æˆ– `git merge`ï¼ˆå…±äº«åˆ†æ”¯çš„æƒ…å†µï¼‰è§£å†³ã€‚\n    - äº¤ç»™åˆ«äººä¹‹å‰ä¸€å®šè¦è‡ªå·±å…ˆ Review ä¸€éï¼Œåˆ«äººåªæ˜¯å¸®ä½ æŸ¥æ¼è¡¥ç¼ºï¼Œå¯¹è‡ªå·±çš„ä»£ç è´Ÿè´£ï¼Œä¸è¦æµªè´¹åˆ«äººçš„æ—¶é—´ã€‚\n    - å‘èµ·åï¼Œè¦åœ¨ GitLab æˆ–è€…å…¶å®ƒ Review å·¥å…·ä¸Š double check å˜æ›´é›†ã€‚\n2. å®¡æŸ¥è€… Review ä»£ç ã€‚\n    - å¯¹ [ç¼–å†™æ•´æ´çš„ä»£ç ](#ç¼–å†™æ•´æ´ä»£ç ) ä¸­å„é¡¹è¦æ±‚è¿›è¡Œæ£€æŸ¥\n    - åœ¨ä»»ä½•æœ‰ç–‘é—®æˆ–å»ºè®®çš„åœ°æ–¹ç•™ commentã€‚\n    - ä»ä¸­å­¦ä¹ ä¸€äº›å¥½çš„ä¸œè¥¿ã€‚\n    - å®Œæˆåï¼Œå¦‚æœæœ‰é—®é¢˜éœ€è¦ä¿®å¤ï¼Œç•™ comment â€œWFFâ€ï¼Œè¡¨ç¤ºâ€œwaiting for fixâ€ï¼Œå¦åˆ™è¿›è¡Œç¬¬ 4 æ­¥ã€‚\n3. æäº¤è€…å“åº” comments ã€‚\n    - ç¡®å®æœ‰é—®é¢˜çš„ï¼Œä¿®å¤ä¹‹ã€‚å¦‚æœè¯¥åˆ†æ”¯æœªè¢«å…¶ä»–äººä½¿ç”¨ï¼Œåº”ä½¿ç”¨ `git commit --amend` æäº¤ä»¥å‡å°‘ä¸å¿…è¦çš„ commit å†å²ã€‚\n    - ä¸åŒæ„çš„ï¼Œè®¨è®ºã€‚\n    - å®Œæˆåï¼Œç•™ comment â€œFixedâ€ï¼Œå®¡æŸ¥è€…å†æ¬¡æ£€æŸ¥ï¼Œå›åˆ°ç¬¬äºŒæ­¥ã€‚\n4. å®¡æŸ¥è€…ç¡®è®¤æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œå°† Merge Request è½¬å‘ç»™ç›®æ ‡åˆ†æ”¯çš„ç»´æŠ¤è€…è¿›è¡Œåˆå¹¶ã€‚\n\n# è°ƒè¯•æŠ€å·§\n\n- æŸ¥çœ‹æ—¥å¿—ï¼Œæ¯”å¦‚åš PHP Web å¼€å‘è¦çŸ¥é“ Nginxï¼ŒPHP-FPMï¼ŒPHP çš„æ—¥å¿—æ–‡ä»¶çš„ä½ç½®ï¼Œå¿…è¦çš„æ—¶å€™ä»ä¸­å¯»æ‰¾çº¿ç´¢ã€‚ä½¿ç”¨ `tail -F file1 file2` å‘½ä»¤å¯ä»¥æŒç»­ç›‘æ§å¤šä¸ªæ–‡ä»¶ã€‚\n- é€šè¿‡æ·»åŠ ä¸´æ—¶ log è¯­å¥æˆ–æ–­ç‚¹çš„å½¢å¼æ£€æŸ¥ä»£ç è·¯å¾„ï¼Œå¾ˆå¤šæ—¶å€™è°ƒè¯•æ˜¯ä¸ªä½“åŠ›æ´»ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œä¸è¦è½»æ˜“æ”¾å¼ƒæˆ–å¯»æ±‚ä»–äººå¸®åŠ©ã€‚æ£€æŸ¥ä»£ç æ˜¯å¦æŒ‰é¢„æœŸè·¯å¾„æ‰§è¡Œäº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿè¾“å…¥æ•°æ®çš„åŸå› å—ï¼Ÿæˆ–è€…ä¸­é—´ä¸€æ­¥æ•°æ®å¤„ç†æ˜¯é”™çš„ï¼Ÿä»æ•°æ®è¿›å…¥ç³»ç»Ÿå¼€å§‹ä¸€æ­¥æ­¥ä»å‰å¾€ååˆ†æï¼Œç”¨æ’é™¤æ³•é€æ­¥ç¼©å°èŒƒå›´ï¼Œbug å¿…å°†æ— æ‰€éå½¢ã€‚å¦å¤–ï¼Œæœ‰æ—¶å€™ä»£ç è·¯å¾„å¯èƒ½ç‰µæ‰¯åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™ä¸ªæ—¶å€™ä¸è¦ç•æƒ§ï¼Œä»£ç éƒ½æ˜¯äººå†™çš„ï¼Œå°¤å…¶å¼€æºé¡¹ç›®é€šå¸¸è´¨é‡è¾ƒé«˜ï¼Œè¿›å»çœ‹ä¸€ä¸‹ï¼Œé€šå¸¸æ²¡ä½ æƒ³è±¡çš„é‚£ä¹ˆéš¾ã€‚\n- ç¡®ä¿è¯»æ‡‚æ—¥å¿—æ¶ˆæ¯ã€å¼‚å¸¸ä¿¡æ¯ã€é”™è¯¯è¾“å‡ºç­‰ï¼Œç‰¹åˆ«æ˜¯è‹±æ–‡å†…å®¹ï¼Œä¸è¦å› ä¸ºæ˜¯è‹±æ–‡ä¸æƒ³è¯»ï¼Œç»“æœéå¸¸æ˜æ˜¾çš„çº¿ç´¢æ‘†åœ¨ä½ é¢å‰ä½ å´è§†è€Œä¸è§ã€‚æ¯”å¦‚å¸¸è§çš„ git é”™è¯¯ï¼Œéƒ½ä¼šæœ‰ç›¸åº”çš„æè¿°ç”šè‡³å»ºè®®çš„è§£å†³åŠæ³•ã€‚å†æ¯”å¦‚åš Web å¼€å‘ï¼Œä¸€ä¸ªé¡µé¢æ‰“ä¸å¼€ï¼Œæœ€èµ·ç ä½ è¦å…ˆçœ‹ä¸€ä¸‹ HTTP Response æ˜¯ä»€ä¹ˆï¼ŒçŠ¶æ€ç ï¼Œbody ç­‰ã€‚å¦‚æœå®åœ¨çœ‹ä¸æ‡‚ï¼Œgoogle ä¹‹ã€‚\n- æœ‰æ„è¯†çš„ç»„ç»‡æ•´ç†å¸¸è§é”™è¯¯ï¼Œä¾æ®è¿‡å¾€ç»éªŒå¿«é€Ÿå®šä½é—®é¢˜ã€‚ä¾‹å¦‚ PHP å¼€å‘æ—¶ç¢°åˆ° HTTP 404ï¼ŒåŸºæœ¬å¯ä»¥æ’é™¤ä»£ç é€»è¾‘é—®é¢˜ï¼Œåº”è¯¥æ£€æŸ¥æ‹¼å†™é”™è¯¯ã€Nginx é…ç½®ã€MVC æ¡†æ¶è·¯ç”±é…ç½®ã€æ–‡ä»¶è·¯å¾„ç­‰ã€‚\n- ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œé‡åˆ°é—®é¢˜è¦çŸ¥é“å»æŸ¥çœ‹å®ƒçš„ issue åˆ—è¡¨ï¼Œä¹Ÿè®¸åˆ«äººä¹Ÿé‡åˆ°äº†åŒæ ·çš„é—®é¢˜å¹¶ä¸”å·²ç»æŠ¥äº† Bug ï¼Œå°¤å…¶æ˜¯ GitHub ä¸Šçš„å¼€æºé¡¹ç›®ã€‚\n\n# Research æŠ€å·§\n\nå·¥ä½œä¸­éš¾å…éœ€è¦å­¦ä¹ æ–°æŠ€æœ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸€äº›æŠ€å·§å¯ä»¥å®è·µã€‚\n\n- ä½¿ç”¨ Google æœç´¢ï¼Œé™¤éæ˜¯ç‰¹å®šäºå›½å†…çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¾®ä¿¡å¼€å‘ç›¸å…³ï¼Œä¸è¦ä½¿ç”¨ç™¾åº¦ã€‚\n\n    ç™¾åº¦æœç´¢è´¨é‡åä½æ˜¯äº‹å®ï¼Œä¸€æ–¹é¢æ˜¯å—é™äºç™¾åº¦è‡ªèº«çš„æŠ€æœ¯ï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºä¸­æ–‡æœç´¢æœ‰å¾ˆå¤šåƒåœ¾ç«™ï¼Œä»¥åŠä½è´¨é‡çš„è½¬è½½åšå®¢ã€‚ç»å¸¸å‡ºç°å‰å‡ é¡µéƒ½æ˜¯å„ç§åƒåœ¾ç«™åœ¨é‡å¤åŒä¸€ç¯‡æ–‡ç« ï¼Œè€Œä¸”å¹¿å‘Šæ»¡å¤©é£ï¼Œæ’ç‰ˆç¨€çƒ‚ã€‚è¿˜æœ‰æ–°æµªã€ç½‘æ˜“çš„åšå®¢ï¼Œå¾ˆå¤šéƒ½æ˜¯å¤åˆ¶ç²˜è´´çš„è½¬è½½ï¼Œæ ¼å¼ä¸€å›¢ç³Ÿï¼ŒåŸæ–‡å´ä¸çŸ¥æ‰€è¸ªã€‚æ›´ä¸è¦æå¾ˆå¤šæŠ€æœ¯ä¸­æ–‡èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼Œæ›´æ–°ä¸åŠæ—¶ï¼Œç¿»è¯‘è´¨é‡ä¸é«˜ç­‰ç­‰é—®é¢˜ã€‚\n\n    å…»æˆä½¿ç”¨åœ¨ Google ä¸Šä½¿ç”¨è‹±æ–‡å…³é”®è¯æœç´¢çš„å¥½ä¹ æƒ¯ç»å¯¹å¯ä»¥èŠ‚çœä½ çš„å¤§é‡æ—¶é—´å’Œç²¾åŠ›ã€‚\n\n- æœç´¢æ—¶è¦æ³¨æ„æ—¶æ•ˆæ€§\n\n    å–å†³äºå…·ä½“çš„æŠ€æœ¯ï¼Œæœç´¢å‡ºæ¥çš„ä¸œè¥¿å¾ˆå¤šå¯èƒ½å·²ç»è¿‡æ—¶äº†ï¼Œè¦æ³¨æ„åŒºåˆ†ï¼Œä¸è¦è¢«è¿‡æ—¶çš„ä¸œè¥¿è¯¯å¯¼ã€‚å¿«é€Ÿæµè§ˆæœç´¢ç»“æœæ—¶æå¸¦çœ‹ä¸€ä¸‹æ—¶é—´ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œæœ‰å¤šæ¡ç›¸ä¼¼ç»“æœæ—¶å½“ç„¶æ˜¯æœ€æ–°çš„ä¼šé è°±ä¸€ç‚¹ã€‚\n\n- æŒæ¡ä½¿ç”¨æœç´¢å¼•æ“çš„ä¸€äº›å°æŠ€å·§ï¼Œhttp://www.lifehack.org/articles/technology/20-tips-use-google-search-efficiently.html\n- æ³¨æ„æœé›†ã€æ•´ç†ä¸€äº›é«˜è´¨é‡çš„ç½‘ç«™ã€åšå®¢\n\n    å½“ä½ ç ”ç©¶ä¸€ä¸ªæ–°ä¸œè¥¿çš„æ—¶å€™è‚¯å®šä¼šè¿›è¡Œå¾ˆå¤šæœç´¢ï¼Œå…¶ä¸­æœ‰äº›ç»“æœå¯èƒ½è´¨é‡å¾ˆé«˜ï¼Œè¿™æ—¶å¯ä»¥å¿«é€Ÿæµè§ˆä¸€ä¸‹è¿™ä¸ªç½‘ç«™æˆ–è€…åšå®¢çš„é¦–é¡µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ”¶è—ä»·å€¼ï¼Œæˆ–è€…æœ‰æ²¡æœ‰å…¶å®ƒç›¸å…³æ–‡ç« å€¼å¾—çœ‹ä¸€ä¸‹ã€‚\n\n- é˜…è¯»æƒå¨ã€ç³»ç»Ÿçš„ä¹¦ç±\n\n    é€šè¿‡ä½¿ç”¨æœç´¢å¼•æ“æˆ–è€…é˜…è¯»åšå®¢ç­‰é€šå¸¸å¯ä»¥å¯¹æŸç§æŠ€æœ¯æœ‰ä¸ªå¤§æ¦‚äº†è§£ï¼Œæˆ–è€…å¯ä»¥è§£å†³æŸä¸ªå…·ä½“é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºè¾ƒå¤æ‚çš„æŠ€æœ¯ï¼Œç³»ç»Ÿå­¦ä¹ æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œçœ‹ä¹¦å¾€å¾€æ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚å¯ä»¥åˆ°è±†ç“£é˜…è¯»æˆ–è€…å„å¤§ç”µå•†ç½‘ç«™ä¸Šé€šè¿‡è¯„åˆ†æ’åæ¥ç­›é€‰å¥½çš„ä¹¦ç±ã€‚å¦‚æœæ˜¯å›½å¤–ä¹¦ç±ï¼Œå°½é‡é€‰æ‹©è‹±æ–‡åŸç‰ˆï¼Œä¸€å¼€å§‹ä¼šæ¯”è¾ƒåƒåŠ›ï¼Œç†Ÿæ‚‰äº†å°±å¥½äº†ã€‚\n\n    è·Ÿç­›é€‰æœç´¢ç»“æœä¸€æ ·ï¼Œå°½é‡é€‰æ‹©è¾ƒæ–°çš„ä¹¦ç±ã€‚\n\n- æŒç»­å…³æ³¨\n\n    æ¯ä¸ªäººç†è§£æ–°äº‹ç‰©éƒ½æœ‰ä¸€ä¸ªä»æµ…å…¥æ·±çš„è¿‡ç¨‹ï¼Œæ–°å­¦çš„æŠ€æœ¯æœ€å¥½å¯ä»¥ä¸æ–­å¤¯å®ï¼Œåå¤å’€åš¼ï¼Œä¸è¦åœç•™åœ¨è¡¨é¢ã€‚å¯ä»¥é€šè¿‡è®¢é˜…ä¸€äº›é‚®ä»¶åˆ—è¡¨ã€çŸ¥ååšå®¢æ¥ä¸æ–­è¡¥å……çŸ¥è¯†ç›²ç‚¹ï¼Œå­¦ä¹ æœ€ä½³å®è·µï¼Œåæ€è‡ªå·±çš„ä¸è¶³ï¼Œä»¥åŠäº†è§£æŠ€æœ¯çš„æœ€æ–°åŠ¨æ€ã€‚\n\n# æ²Ÿé€šæŠ€å·§\n\n- å°½é‡æä¾›å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œå‰å› åæœäº¤ä»£æ¸…æ¥šï¼Œå°¤å…¶æ˜¯å¯¹è¯åˆšå¼€æ—¶çš„æ—¶å€™ï¼Œä¸è¦æ€¥äºåˆ‡å…¥é‡ç‚¹ï¼Œå…ˆç¡®ä¿å¯¹æ–¹äº†è§£è¶³å¤Ÿçš„èƒŒæ™¯ï¼Œé¿å…ä¸å¿…è¦çš„èƒŒæ™¯äº¤ä»£ç›¸å…³çš„å¾€å¤æé—®å’Œå›ç­”ã€‚\n- é—®é—®é¢˜æ—¶ï¼Œé™¤äº†é—®å®é™…çš„é—®é¢˜å¤–ï¼Œæœ€å¥½ä¹Ÿè§£é‡Šä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„æ¥ç”±ï¼Œè¿™ä¸ªé—®é¢˜å“ªå„¿æ¥çš„ï¼Œä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªé—®é¢˜æˆ–ç–‘é—®ã€‚è¿™æ ·é€šå¸¸å¯ä»¥å¸®åŠ©å›ç­”è€…æ›´èƒ½æŠ“ä½é—®é¢˜çš„é‡ç‚¹ï¼Œæ›´å‡†ç¡®çš„å›ç­”ã€‚\n- å›ç­”é—®é¢˜æ—¶ï¼Œå¯¹äºæ˜¯æˆ–å¦çš„ç–‘é—®å¥ï¼Œå°½é‡å…ˆç›´æ¥äº†å½“çš„å›ç­”ï¼Œç„¶åæœ‰å¿…è¦çš„è¯å†è¡¥å……æˆ–è§£é‡Šã€‚\n- å›ç­”è¿›åº¦ä¼°è®¡ç­‰ç›¸å…³é—®é¢˜æ—¶ï¼Œä¸è¦ä½¿ç”¨â€œå·®ä¸å¤šâ€ã€â€œå¿«äº†â€ç­‰æ¨¡ç³Šè¯æ±‡ï¼Œåº”è¯¥å…·ä½“ä¸€ç‚¹ï¼Œæ¯”å¦‚â€œ90% éƒ½åšå®Œäº†ï¼Œè¿˜å‰©xxxï¼Œä¸‹åˆå¯ä»¥å®Œæˆâ€ã€‚\n","source":"_posts/2017-01-06-freshman-guide.markdown","raw":"---\nlayout:     post\ntitle:      \"Freshman Guide\"\nsubtitle:   \"Guide\"\ndate:       2017-01-06 11:11\nauthor:     \"Asher\"\nheader-img: \"nodejs.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Guide\n---\n\n# å‰è¨€\n\næœ¬æ–‡æ˜¯[å‰è€å¤§](https://github.com/inetfuture)å¯¹å·¥ä½œçš„ä¸€äº›æŒ‡å¯¼å’Œè¦æ±‚, æˆ‘åœ¨è¿™é‡Œåšäº†ä¸€äº›æ•´ç†å’Œè¡¥å……ã€‚\nä½œä¸ºä¸€åå¼€å‘è€…é¦–å…ˆè¦åšåˆ°çš„æ˜¯æœ‰`è´£ä»»å¿ƒ`, å…¶æ¬¡æ˜¯`Be Professional!`ã€‚\n\n# å¿…è¯»æ•°æ®\n\n- [Pro Git](https://git-scm.com/book/zh/v2)\n- [Git merge-vs-rebase](http://mislav.net/2013/02/merge-vs-rebase/)\n- [how-to-name-things](http://slides.com/inetfuture/how-to-name-things)\n- [RESTful API](restful_api.md)\n\n- ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹\n- ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹\n- ã€Šæ•æ·è½¯ä»¶å¼€å‘ : åŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹\n- ã€ŠTCP/IP è¯¦è§£ å·1ã€‹\n- [Git](git.md)\n- [the-art-of-command-line](https://github.com/jlevy/the-art-of-command-line/blob/master/README-zh.md)\n\n- [Oh My Zsh](https://github.com/robbyrussell/oh-my-zsh)\n- [Trello](https://trello.com)\n- [DevDocs](http://devdocs.io/)\n\n[æ‰©å±•é˜…è¯»](https://github.com/CraryPrimitiveMan)\n\n# å¿…å¤‡å·¥å…·\n\n## VPN\n\n- [GreenVPN](http://gjsq.me/23186204)\n\n## Sublime Text\n\n### Package Control\n\n* Sublime Text 2\n\n```python\nimport urllib2,os,hashlib; h = 'df21e130d211cfc94d9b0905775a7c0f' + '1e3d39e33b79698005270310898eea76'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), 'wb' ).write(by) if dh == h else None; print('Error validating download (got %s instead of %s), please try manual install' % (dh, h) if dh != h else 'Please restart Sublime Text to finish installation')\n```\n\n* Sublime Text 3\n\n```python\nimport urllib.request,os,hashlib; h = 'df21e130d211cfc94d9b0905775a7c0f' + '1e3d39e33b79698005270310898eea76'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://packagecontrol.io/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by)\n```\n\nå¿…å¤‡æ’ä»¶ï¼šGitï¼ŒGitGutterï¼Œknockdownï¼ŒSublimeLinterï¼ŒDocBlockrï¼ŒEditorConfigï¼ŒEmmetï¼ŒFileDiffsï¼ŒSublimeCodeIntel, SidebarEnhancements, PackageSync\n\n# åšäº‹åŸåˆ™ã€æ–¹æ³•\n\n- ä¸»åŠ¨æ²Ÿé€šè€Œä¸æ˜¯è¢«åŠ¨åº”ä»˜\n    - å·¥ä½œä¸Šå­˜åœ¨ä»»ä½•è®©ä½ ä¸çˆ½çš„äº‹æ—¶ï¼Œå°½é‡æå‡ºæ¥ï¼Œæ‰€æœ‰çš„é—®é¢˜éƒ½å¯ä»¥è®¨è®ºã€åè°ƒã€ç¼“è§£ï¼Œç”šè‡³å®Œå…¨é¿å…ï¼Œé•¿æœŸå‹æŠ‘ç€ä¼šå½±å“è‡ªå·±çš„å·¥ä½œæ•ˆç‡å’Œç§¯ææ€§ï¼Œå¯¹ä¸ªäººå’Œå›¢é˜Ÿéƒ½ä¸åˆ©ã€‚\n    - å¯¹éœ€æ±‚ã€å¼€å‘è§„èŒƒã€ä»£ç ç»„ç»‡ç­‰ç­‰å„æ–¹é¢å­˜åœ¨ä»»ä½•ç–‘é—®æ—¶ï¼Œä¸»åŠ¨è¯¢é—®å’Œè®¨è®ºï¼Œä¸è¦é»˜ä¸ä½œå£°ã€è‡ªä½œä¸»å¼ å¯¼è‡´è¿”å·¥å’Œå»¶è¯¯ã€‚\n    - è‡ªå·±çš„ä»£ç è¢«åˆ«äºº Review æ—¶ï¼Œå¦‚æœè§‰å¾—æŸæ®µä»£ç å¯èƒ½æœ‰é—®é¢˜æˆ–è€…ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼Œä¸»åŠ¨æå‡ºæ¥è®¨è®ºï¼Œè€Œä¸æ˜¯ç­‰å¾…å®¡æŸ¥è€…è¯¢é—®ã€‚å‰è€…å¯ä»¥ä½¿ Review æ›´é«˜æ•ˆï¼Œæ›´åˆ©äºåŸ¹å…»åŒäº‹é—´çš„ç›¸äº’ä¿¡ä»»ï¼Œåè€…ä¸€æ˜¯æ•ˆç‡ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§ä¸è´Ÿè´£ä»»çš„è¡¨ç°ã€‚\n    - è¿›åº¦å­˜åœ¨é£é™©æ—¶ä¸»åŠ¨çŸ¥ä¼šå…¶ä»–äººï¼Œè€Œä¸æ˜¯é»˜é»˜æ‹–åˆ°æœ€åä¸€åˆ»è¿ç´¯å¤§å®¶åŠ ç­ã€‚\n    - åšå˜æ›´æ—¶åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜ï¼Œå¦åˆ™å¯èƒ½ä¼šæµªè´¹é˜Ÿå‹çš„æ—¶é—´å»æ’æŸ¥é—®é¢˜ã€‚ä»£ç çº§åˆ«çš„é—®é¢˜å¯ä»¥é€šè¿‡åœ¨ GitLab ç­‰ä»£ç ç®¡ç†å·¥å…·ä¸Š at å¯¹æ–¹ã€‚\n\n- è®¤çœŸè´Ÿè´£ï¼Œå…³æ³¨ç»†èŠ‚ï¼Œè¿½æ±‚å“è¶Š\n    - æ¯ä¸€ä»½éœ€æ±‚éƒ½è¦ç†è§£ä¹‹åå†åŠ¨æ‰‹ï¼Œæ„Ÿè§‰éœ€æ±‚ä¸åˆç†æˆ–ä¸æ˜ç¡®çš„è¦æå‡ºæ¥è®¨è®ºï¼Œå¯¹äº§å“è¦æœ‰è´£ä»»å¿ƒï¼Œä¸ä»…ä»…æ˜¯â€œæŒ‰éƒ¨å°±ç­â€å¾—åšäº‹æƒ…ã€‚\n    - æäº¤å‰ä»”ç»†æµ‹è¯•è‡ªå·±å®ç°çš„åŠŸèƒ½ï¼Œæ£€æŸ¥ä»£ç ç»†èŠ‚ï¼Œæœ‰äº¤ä»˜é«˜è´¨é‡ä»£ç çš„è´£ä»»å¿ƒï¼Œè€Œä¸æ˜¯ä¾èµ–å…¶ä»–æˆå‘˜å¸®ä½  Reivew æˆ–è€… QA å¸®ä½ å‘ç° bug ã€‚\n    - ä»£ç ä»…ä»…å¯ä»¥å·¥ä½œæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜è¦å¯è¯»ã€æ˜“æ‰©å±•ã€å¯ç»´æŠ¤ã€å®‰å…¨ã€é«˜æ•ˆï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œè¦ç”¨é«˜æ ‡å‡†è¦æ±‚è‡ªå·±ï¼Œå†™ä»£ç è¦â€œä¸Šå¿ƒâ€ï¼Œä¸è¦æ•·è¡ã€éšæ„ã€‚\n    - ç»†èŠ‚ä¸ä¸€å®šå†³å®šæˆè´¥ä½†å´å¯ä»¥å……åˆ†ä½“ç°ä¸€ä¸ªäººçš„å·¥ä½œæ€åº¦ï¼Œè¯·è®¤çœŸå¯¹å¾…å„ç§æµç¨‹ã€è§„èŒƒï¼Œæ¯”å¦‚å†™è‹±æ–‡é‚®ä»¶æ—¶ï¼Œä»è¯­æ³•ã€æ ¼å¼åˆ°æ¯ä¸€ä¸ªæ‹¼å†™ã€æ ‡ç‚¹ï¼Œå†æ¯”å¦‚ Commit Message çš„æ ¼å¼ã€Coding Style ç­‰ç­‰ã€‚\n\n- è‡ªæˆ‘é©±åŠ¨\n    - è‡ªè§‰æ·±å…¥å­¦ä¹ ç›¸å…³æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ç”¨å¤šå°‘å­¦å¤šå°‘ï¼Œä¸´æ—¶æŠ±ä½›è„šã€‚å‡è®¾ä½ åœ¨åš IOS å¼€å‘ï¼Œå³ä¾¿ç›®å‰æ‰€æœ‰é¡¹ç›®ä»åœ¨ç”¨ Objective-C ï¼Œä½ ä¹Ÿåº”è¯¥åˆ©ç”¨ä¸šä½™æ—¶é—´è‡ªè§‰å»å­¦ä¹  Swift ï¼Œæ—¶åˆ»å‡†å¤‡ç€ã€‚\n    - ä¸»åŠ¨æ€è€ƒäº§å“çš„èµ°å‘ï¼Œè‡ªè§‰è¿›è¡ŒçŸ¥è¯†å‚¨å¤‡ã€è°ƒç ”ã€‚\n    - è‡ªè§‰é‡æ„ä½è´¨é‡ä»£ç ï¼Œæ”¹å–„é¡¹ç›®æµç¨‹ï¼Œç­‰ç­‰ï¼Œä¿è¯é¡¹ç›®çš„å¥åº·å‘å±•ã€‚\n\n- æ¢ä½æ€è€ƒ\n    - ä½¿ç”¨é‚®ä»¶ã€å¾®ä¿¡ç­‰å·¥å…·äº¤æµæ—¶ä¸€æ¬¡æ€§æä¾›å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼Œé¿å…ä½æ•ˆç‡çš„æ²Ÿé€šï¼Œæƒ³ä¸€ä¸‹ï¼Œæˆ‘è¿™æ ·æè¿°å¯¹æ–¹æ˜¯å¦å¯ä»¥ç†è§£å¹¶ç›´æ¥å›å¤ã€‚\n    - æ— è®ºæ˜¯åš Code Review è¿˜æ˜¯æäº¤åŠŸèƒ½ç»™ QA æµ‹è¯•ï¼Œå°½è‡ªå·±æœ€å¤§åŠªåŠ›ä¿è¯è´¨é‡ï¼Œåšå¥½è‡ªå·±åˆ†å†…çš„äº‹ï¼Œå‡è½»é˜Ÿå‹çš„è´Ÿæ‹…ã€‚\n    - ä½œä¸ºå¼€å‘ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¸º leader åˆ†æ‹…å‹åŠ›ï¼Ÿä½œä¸º leader ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¿ƒè¿›ä¸‹å±å·¥ä½œèƒ½åŠ›çš„ç¨³æ­¥æˆé•¿ï¼Ÿ\n\n- ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜\n    - æ€è€ƒé—®é¢˜çš„åŸå› ï¼Œä¸è¦åœç•™äºè¡¨é¢é—®é¢˜çš„ä¿®ä¿®è¡¥è¡¥ã€‚\n\n- ç”¨æ­£ç¡®çš„æ–¹å¼è§£å†³é—®é¢˜\n    - å¾ˆå¤šé—®é¢˜éƒ½æœ‰ä¸æ­¢ä¸€ç§çš„è§£å†³åŠæ³•ï¼Œä¸è¦æ»¡è¶³äºä½ æœ€åˆæƒ³åˆ°çš„é‚£ç§ï¼Œä¹Ÿè®¸æœ‰æ›´å¥½çš„å‘¢ï¼Ÿä¸»åŠ¨å»æ€è€ƒç›®å‰çš„æ–¹æ¡ˆå¯ç»´æŠ¤å—ï¼Ÿæ–¹ä¾¿å—ï¼Ÿæ•ˆç‡é«˜å—ï¼Ÿæ™®é€‚å—ï¼Ÿ\n    - å¤šçœ‹ä¸€äº›æœ€ä½³å®è·µï¼ˆBest Practiceï¼‰çš„èµ„æ–™ï¼Œå¤šçœ‹ä¸€äº›ä¼˜ç§€å¼€æºé¡¹ç›®çš„æºä»£ç ï¼Œå¤šäº†è§£åˆ«äººæ€ä¹ˆåšçš„ä½ æ‰èƒ½åŠæ—¶å‘ç°è‡ªå·±çš„ä¸è¶³ã€‚\n    - ä¸è¦é‡å¤é€ è½®å­ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¹Ÿè®¸äººå®¶å·²ç»æä¾›äº†ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œåªæ˜¯å› ä¸ºä½ æ²¡æœ‰ä»”ç»†çœ‹æ–‡æ¡£ï¼Œæ‰€ä»¥ä¸çŸ¥é“ã€‚\n\n- ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥\n    - å­¦ä¹ æ–°çŸ¥è¯†è¦å°½å¯èƒ½çš„ç³»ç»Ÿã€å…¨é¢ï¼Œä¸è¦åªæ˜¯ä¸ºäº†åº”ä»˜å½“å‰å·¥ä½œç‰‡é¢äº†è§£ã€‚\n    - ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€æ¡†æ¶æ—¶åº”å°½é‡é€šè¯»å…¶æ–‡æ¡£ï¼Œè‡³å°‘è¦çŸ¥é“å®ƒå¯ä»¥åšä»€ä¹ˆï¼Œæœ‰å“ªäº›é™åˆ¶ï¼Œé‡åˆ°å…·ä½“é—®é¢˜åå¯ä»¥è¿…é€Ÿåˆ°æ–‡æ¡£ä¸­æŸ¥çœ‹ç»†èŠ‚ã€‚\n    - å¸¸ç”¨çš„æŠ€æœ¯ç‚¹è¦èˆå¾—èŠ±æ—¶é—´ææ¸…æ¥šå…¶è¿è¡ŒåŸç†ã€å†…éƒ¨æœºåˆ¶ï¼Œå…çš„æ¯æ¬¡å‡ºé—®é¢˜éƒ½åƒæ— å¤´è‹è‡ï¼Œåªèƒ½ççŒœã€‚æ¯”å¦‚ Angular.js çš„ directive ç¼–è¯‘æµç¨‹æ˜¯æ€æ ·çš„ï¼ŸNode.js çš„å¼‚æ­¥ IO æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ\n    - å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚å¹³æ—¶è¦æ³¨æ„æ•ˆç‡å·¥å…·çš„ç§¯ç´¯ï¼ŒåŒ…æ‹¬å¥½çš„ä»£ç ç¼–è¾‘å™¨ã€å‘½ä»¤è¡Œå·¥å…·ã€ä»»åŠ¡ç®¡ç†å·¥å…·ã€å„ç§å®ç”¨å°å·¥å…·ç­‰ç­‰ã€‚å¯¹äºä½ å¸¸ç”¨çš„ç¼–è¾‘å™¨æˆ– IDE åº”è¯¥èŠ±ä¸€äº›æ—¶é—´å»ç†Ÿç»ƒå®ƒçš„å¿«æ·é”®ï¼Œå¯»æ‰¾ä¸€äº›å¥½ç”¨çš„æ’ä»¶ï¼Œæ¯•ç«Ÿå·¥ä½œæ¯å¤©éƒ½è¦ç”¨ï¼ŒæŠ•å…¥çš„ç²¾åŠ›ç»å¯¹ç‰©è¶…æ‰€å€¼ã€‚\n\n# ç¼–å†™æ•´æ´ä»£ç \n\n> Writing clean code requires the disciplined use of a myriad little techniques applied through a painstakingly acquired sense of \"cleanliness\". This \"code-sense\" is the key. Some of us are born with it. Some of us have to fight to acquire it. Not only does it let us see whether code is good or bad, but it also shows us the strategy for applying our discipline to transform bad code into clean code.\n\n## åŸºæœ¬è¦æ±‚\n\n- Coding Styleï¼Œå¦‚æœæœ‰è¦æ±‚ï¼Œåº”è¯¥ä¸¥æ ¼éµå¾ªï¼Œä»»ä½•ä¾‹å¤–çš„æƒ…å†µéœ€è¦è®¨è®ºå†³å®šã€‚\n- å¯è¯»æ€§ï¼Œè¦å®¹æ˜“ç†è§£ï¼Œå‘½åè¦å…·æœ‰è¶³å¤Ÿæè¿°æ€§ï¼Œä¸èƒ½æœ‰æ­§ä¹‰ï¼Œä»£ç è·¯å¾„ã€ç»“æ„è¦æ¸…æ™°ã€ç®€æ´ã€‚\n- ä¸€è‡´æ€§ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ ‡è¯†ç¬¦å‘½åã€é”™è¯¯å¤„ç†ã€æ—¥å¿—æ ¼å¼ã€æ–‡ä»¶ç»„ç»‡æ–¹å¼ã€HTTP API æ¥å£è®¾è®¡ã€UI äº¤äº’ç­‰å„ä¸ªæ–¹é¢ï¼Œè¶Šæ˜¯ä¸€è‡´çš„ç³»ç»Ÿè¶Šå®¹æ˜“ä¸Šæ‰‹ï¼Œè¶Šå®¹æ˜“ç»´æŠ¤ï¼Œåä¹‹åˆ™ç»´æŠ¤æˆæœ¬è¶Šé«˜ã€‚\n- å¥å£®æ€§ï¼Œè¿›è¡Œå¿…è¦çš„è¾“å…¥éªŒè¯ï¼Œå……åˆ†å¾—è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œå¼‚å¸¸å¤„ç†è¦å‘¨å…¨ï¼Œé˜²æ­¢å†…å­˜æ³„éœ²ï¼Œé˜²æ­¢ç«æ€æ¡ä»¶ï¼Œå¤šçº¿ç¨‹å®‰å…¨ï¼Œç­‰ç­‰ã€‚\n- æ€§èƒ½ï¼Œè€ƒè™‘æ•°æ®é‡å¤§æˆ–è€…è®¿é—®é¢‘ç¹æ—¶çš„æƒ…å†µï¼Œå¯¹å†…å­˜ã€æ•°æ®åº“çš„ä½¿ç”¨è¦é«˜æ•ˆï¼Œç®—æ³•è¦å°½é‡æœ€ä¼˜ã€‚\n    - ä»»ä½•æ¶‰åŠæ•°é‡çš„åœ°æ–¹ï¼Œåœ¨ä¸šåŠ¡åœºæ™¯åˆç†çš„å‰æä¸‹è€ƒè™‘æŠŠæ•°é‡æ”¾å¤§åˆ°æœ€å¤§ï¼Œä¸ºæœ€åçš„æƒ…å†µåšæ‰“ç®—ã€‚\n    - æ•°æ®åº“ï¼š\n        - æ“ä½œåº”å°½é‡æ‰¹é‡è¿›è¡Œï¼ŒåªæŸ¥è¯¢å¿…éœ€çš„å­—æ®µï¼Œå‡å°‘ IO æ¶ˆè€—ã€‚\n        - ç‰¹åˆ«å¤§çš„æŸ¥è¯¢åº”åœ¨æ•°æ®åº“ä¸­åˆ†é¡µï¼Œç”±ç¨‹åºæ§åˆ¶åˆ†æ‰¹æ¬¡å¤„ç†ï¼Œå…¨é‡å–å‡ºåœ¨å†…å­˜ä¸­è®¡ç®—æˆ–è€…æ ¹æœ¬ä¸è€ƒè™‘æ•°æ®é‡å¤§å°æ˜¯å¸¸è§çš„ä½çº§é”™è¯¯ã€‚\n        - åˆç†ä½¿ç”¨ç´¢å¼•ã€‚\n    - åŸºæœ¬ä¼˜åŒ–æ€è·¯ï¼š\n        - é¢„å…ˆç­›é€‰æ•°æ®ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚\n        - ç¼“å­˜è®¡ç®—ç»“æœï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚\n        - ä½¿ç”¨é«˜æ•ˆæ•°æ®ç»“æ„ï¼Œç©ºé—´æ¢æ—¶é—´ã€‚\n- å®‰å…¨æ€§ï¼Œè¿›è¡Œå¿…è¦çš„æƒé™æ£€æŸ¥ï¼Œä¸èƒ½è¿‡åº¦ä¿¡ä»»å®¢æˆ·ç«¯è¾“å…¥ã€‚\n- DRYï¼ˆDon't Repeat Yourselfï¼‰åŸåˆ™ï¼Œå¤åˆ¶ã€ç²˜è´´çš„è¡Œä¸ºæ˜¯è¦åšå†³ç¦æ­¢çš„ï¼Œä¸çŸ¥é“å¦‚ä½•å¤ç”¨ä»£ç çš„è¦ä¸»åŠ¨ä¸å…¶ä»–æˆå‘˜è®¨è®ºã€‚\n- å•ä¸€èŒè´£åŸåˆ™ï¼Œä¸€ä¸ªç±»ã€æ–‡ä»¶æˆ–è€…æ¨¡å—ä¸èƒ½åšçš„å¤ªå¤šï¼Œä¸èƒ½åšä¸è¯¥å®ƒåšçš„äº‹ï¼Œå¥½çš„è®¾è®¡æ˜¯åªæŠŠä¸€ä»¶äº‹åšå¥½ã€‚\n- å¼€æ”¾ã€å°é—­åŸåˆ™ï¼Œè¦æ–¹ä¾¿æ‰©å±•ï¼Œè¦è€ƒè™‘åˆ°ä»¥åçš„éœ€æ±‚ã€‚\n- ä»£ç æ”¹åŠ¨æ–¹å¼è¦åˆé€‚ï¼Œä¸èƒ½ä¸€å‘³å¾—å †ç Œä»£ç ï¼Œéœ€è¦é€‚æ—¶åœä¸‹æ¥è¿›è¡Œé‡æ„ã€‚\n- ä¿æŒå¹²å‡€ï¼Œä¸èƒ½å­˜åœ¨ä»»ä½•æ— ç”¨çš„æ–‡ä»¶ã€ä»£ç ï¼Œæ‰€æœ‰æ–‡æ¡£ã€æ³¨é‡Šéœ€è¦åŒæ­¥æ›´æ–°ï¼Œä¸èƒ½åŒ…å«æ³¨é‡Šæ‰çš„ä»£ç ï¼Œä¸èƒ½åŒ…å«ä¸´æ—¶è°ƒè¯•ä»£ç ï¼Œä¾‹å¤–æƒ…å†µåº”è¯¥æ·»åŠ æ³¨é‡Šè¯´æ˜ã€‚\n- æ‰€æœ‰ Warning éƒ½åº”è¯¥è¢«ç«‹å³ä¿®å¤ï¼Œè§‰å¾—ä¸éœ€è¦ä¿®çš„ï¼Œè®¨è®ºå†³å®šåé€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ç¦ç”¨æ‰ã€‚\n\n## è¿›é˜¶è¦æ±‚\n\n- ä½¿ç”¨å¤šæ€å‡å°‘æˆ–è½¬ç§» `if` åˆ¤æ–­ï¼Œ(Video)[https://www.youtube.com/watch?v=4F72VULWFvc&index=1&list=PL693EFD059797C21E]\n\n## æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\n\n- å±€éƒ¨å˜é‡å°½é‡å°±è¿‘å£°æ˜ã€‚\n- return early (V1)[https://www.airpair.com/php/posts/best-practices-for-modern-php-development#4-2-try-not-to-use-else-] (V2)[http://www.codeproject.com/Articles/626403/How-and-Why-to-Avoid-Excessive-Nesting]\n- ç›¸å…³çš„ä»£ç å°½é‡æŒ‰ä½¿ç”¨é¡ºåºç»„ç»‡åœ¨ä¸€èµ·ï¼Œå°¤å…¶æ˜¯æ·»åŠ æ–°ä»£ç æ—¶ï¼Œä¸è¦ä¸€å‘³å¾—æ·»åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ã€‚\n- å¸ƒå°”å˜é‡å‘½ååº”å°½é‡é‡‡ç”¨è‚¯å®šå½¢åŠ¿ã€‚\n- é¿å…ç¡¬ç¼–ç æ•°å­—ã€å­—ç¬¦ä¸²ï¼Œåº”ä½¿ç”¨å¸¸é‡å¹¶ç»™å®ƒä»¬æœ‰æ„ä¹‰çš„åå­—ã€‚\n- ä¼ é€’ç®€å•æ•°æ®ç±»å‹æ—¶ï¼Œé€‚å½“æ·»åŠ ä¸´æ—¶å˜é‡æé«˜å¯è¯»æ€§ã€‚\n\n## å¦‚ä½•å†™æ³¨é‡Š\n\n- ä»£ç çš„æ„å›¾åº”è¯¥ç”±ä»£ç è‡ªèº«æ¥è¡¨è¾¾ï¼Œå³æ‰€è°“çš„å¯è¯»æ€§ï¼Œä¸åº”è¯¥ä¾èµ–äºæ³¨é‡Šè¯´æ˜ï¼Œæ‰€ä»¥ä¼˜å…ˆè€ƒè™‘å†™æ›´å¯è¯»çš„ä»£ç ã€‚\n- ä»£ç æ„å›¾æ˜æ˜¾çš„æƒ…å†µä¸‹ï¼Œä¸è¦åŠ æ³¨é‡Šé‡å¤è¯´æ˜ã€‚\n- ä»¥ä¸‹æ³¨é‡Šæ˜¯åˆç†çš„æˆ–è€…è¯´ä»¥ä¸‹æƒ…å†µéœ€è¦å†™æ³¨é‡Šï¼š\n    - çº²è¦æ€§çš„æ³¨é‡Šï¼Œç®€è¦çš„æè¿°æŸä¸€ä¸ªæ–‡ä»¶ã€æŸä¸€ä¸ªç±»æˆ–æŸä¸€ä¸ªæµç¨‹ã€‚\n    - ç¡®å®æ— æ³•ä»ä»£ç æœ¬èº«æé«˜å¯è¯»æ€§çš„æƒ…å†µï¼Œæ¯”å¦‚å¤æ‚ä¸šåŠ¡é€»è¾‘ã€ç®—æ³•ã€‚\n    - ä»£ç çš„ä½œç”¨å¹¶ä¸ç›´è§‚æ—¶ï¼Œè§£é‡Šè¿™æ ·åšçš„åŸå› ã€‚\n    - å­˜åœ¨å¤šç§å¯é€‰æ–¹æ¡ˆæ—¶ï¼Œè§£é‡Šä¸ºä»€ä¹ˆé€‰æ‹©ç°åœ¨è¿™ç§ã€‚\n    - å› ä¸ºæŸäº›é™åˆ¶è€Œä½¿ä»£ç ä¸ä¸€è‡´ã€ä¸ä¼˜é›…æˆ–å­˜åœ¨å‰¯ä½œç”¨æ—¶ï¼Œåº”æ³¨æ˜åŸå› åŠåæœã€‚\n    - å‚è€ƒäº†å¤–éƒ¨ä¸€äº›èµ„æ–™æ—¶ï¼Œåº”æ³¨æ˜é“¾æ¥ï¼Œæ–¹ä¾¿å…¶ä»–äººæŸ¥çœ‹ã€‚\n    - ä¸´æ—¶æ ‡è®°æ³¨é‡Šï¼šTODOã€FIXMEã€HACKã€OPTIMIZEã€REVIEWã€‚\n- æ³¨é‡Šåº”éšä»£ç æ›´æ–°ã€‚\n\n# Coding Style\n\n## å‰ç«¯\n\n* [Front End Style Guide](https://github.com/Aaaaaashu/Front-End-Style-Guide)\n* [Style Guide Articles](https://github.com/maban/styleguides)\n* [PrimerCSS](http://primercss.io/guidelines/)\n\n### è¯­è¨€\n\n* [Coffeescript](https://github.com/polarmobile/coffeescript-style-guide)\n* [ES6](https://github.com/airbnb/javascript)\n* [ES6ä¸­æ–‡ç‰ˆ](https://github.com/yuche/javascript)\n* [ES6ä¸­æ–‡è°ƒæ•´ç‰ˆ](https://github.com/adamlu/javascript-style-guide)\n* [ES5](https://github.com/airbnb/javascript/tree/master/es5)\n* [ES5ä¸­æ–‡ç‰ˆ](https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md)\n* [CSS/SASS/LESS](https://github.com/airbnb/css)\n* [Project CSS](https://github.com/dropbox/css-style-guide)\n\n### æ¡†æ¶\n\n* [AngularJS](https://github.com/johnpapa/angular-styleguide)\n* [AngularJS Best Practice](https://github.com/mgechev/angularjs-style-guide)\n* [Project AngularJS](https://github.com/gocardless/angularjs-style-guide)\n\n## åç«¯\n\n### è¯­è¨€\n\n* [PHP PSR1](http://www.php-fig.org/psr/psr-1/)\n* [PHP PSR2](http://www.php-fig.org/psr/psr-2/)\n* [Effective Go Lite](https://bingohuang.gitbooks.io/effective-go-lite-edition/content/)\n* [Effective Go](https://golang.org/doc/effective_go.html)\n* [Effective Goä¸­æ–‡ç‰ˆ](http://www.chingli.com/coding/effective-go/)\n* [Best Practice for Go Developer](https://medium.com/@IndianGuru/best-practices-for-a-new-go-developer-8660384302fc)\n\n# Code Review\n\n## ç›®çš„\n\n- æé«˜ä»£ç è´¨é‡ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚\n- ç›¸äº’å­¦ä¹ ã€‚\n- ä¿ƒè¿›é¡¹ç›®å†…çŸ¥è¯†æµåŠ¨ï¼Œé˜²æ­¢å¯¹æŸä¸ªä¸ªäººè¿‡åˆ†ä¾èµ–ã€‚\n\n## Commit Message è§„èŒƒ\n\nè§„å®šæ ¼å¼å¦‚ä¸‹ï¼š\n\n```javascript\n$(scope): $(subject)\n\n$(description)\n```\n\n- `$(scope)`ï¼šå¿…éœ€ï¼Œå–å†³äºå…·ä½“é¡¹ç›®ï¼Œä¸€èˆ¬ä¸ºé¡¹ç›®åŠŸèƒ½æ¨¡å—ã€ç»„ä»¶çš„åå­—ï¼Œç”¨æ¥æè¿°æœ¬æ¬¡ commit **å½±å“çš„èŒƒå›´**ï¼Œæ¯”å¦‚ https://github.com/nodejs/node/commits/master ã€‚å½±å“å¤šä¸ªæ¨¡å—ã€ç»„ä»¶å¯ä»¥ç”¨ `,` éš”å¼€ã€‚ååŠ å…¥é¡¹ç›®çš„æ–°æˆå‘˜åº”éµå¾ªå·²æœ‰çš„ scope çº¦å®šï¼ˆé€šè¿‡ `git log` å¯ä»¥æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„æäº¤å†å²ï¼‰ï¼Œä¸è¦è‡ªå·±ç¼–é€ ã€‚ä½¿ç”¨é¦–å­—æ¯å°å†™çš„é©¼å³°å‘½åã€‚`bug` ã€ `hotfix` ã€ `task` ã€ `change` ã€`refactor` ç­‰ç­‰æè¿°çš„éƒ½ä¸æ˜¯å½±å“çš„å…·ä½“èŒƒå›´ï¼Œè€Œæ˜¯æ”¹åŠ¨ç±»å‹ï¼Œä¸èƒ½ç”¨ä½œ scope ã€‚é™¤å…·ä½“çš„æ¨¡å—ã€ç»„ä»¶åä¹‹å¤–ï¼Œå¯ä»¥ä½¿ç”¨ `base` è¡¨ç¤ºåŸºç¡€ç»“æ„ã€æ¡†æ¶ç›¸å…³çš„æ”¹åŠ¨ã€‚\n- `$(subject)`ï¼šå¿…éœ€ï¼Œ50 ä¸ªå­—ç¬¦å·¦å³çš„ç®€è¦è¯´æ˜ï¼Œé¦–å­—æ¯å°å†™ï¼Œé€šå¸¸æ˜¯åŠ¨å®¾ç»“æ„ï¼Œæè¿°åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒåŠ¨è¯ç”¨ä¸€èˆ¬ç°åœ¨æ—¶ï¼Œç¦æ­¢å‡ºç° *update code* ï¼Œ *fix bug* ç­‰æ— å®é™…æ„ä¹‰çš„æè¿°ï¼Œå¥½çš„ä¾‹å­ï¼š *select connector by sorting free memory* ï¼ˆä¸éœ€è¦å½¢å¦‚ *update about how to select connector ...* çš„å•°å—¦å†™æ³•ï¼‰, *fix sucess tip can not show on IE8* ï¼ˆä¸éœ€è¦å½¢å¦‚ *fix bug of ...* çš„å•°å—¦å†™æ³•ï¼‰ã€‚\n- `$(description)`ï¼šå¯é€‰ï¼Œè¯¦ç»†è¯´æ˜ï¼Œå»ºè®®ä½¿ç”¨åˆ—è¡¨ç½—åˆ—è¦ç‚¹ã€‚\n\n## æµç¨‹\n\n1. æäº¤è€…å‘èµ· topic åˆ†æ”¯åˆ°ç›®æ ‡åˆ†æ”¯çš„ Merge Request ã€‚\n    - ä»£ç å˜åŠ¨è¦å°½é‡å°ä¸”ä¸“æ³¨äºä¸€ä¸ªä»»åŠ¡ï¼Œä¸è¦æ”’çš„å¾ˆå¤§ï¼Œæˆ–è€…åšå¤šä¸ªä»»åŠ¡ï¼Œè¦ä¿è¯å®¡æŸ¥è€…å¯ä»¥è¾ƒå¿«ã€è¾ƒå®¹æ˜“çš„ Review ã€‚\n    - å¦‚æœä¸ç›®æ ‡åˆ†æ”¯æœ‰å†²çªï¼Œæäº¤è€…åº”è¯¥è‡ªå·±ä½¿ç”¨ `git rebase` æˆ– `git merge`ï¼ˆå…±äº«åˆ†æ”¯çš„æƒ…å†µï¼‰è§£å†³ã€‚\n    - äº¤ç»™åˆ«äººä¹‹å‰ä¸€å®šè¦è‡ªå·±å…ˆ Review ä¸€éï¼Œåˆ«äººåªæ˜¯å¸®ä½ æŸ¥æ¼è¡¥ç¼ºï¼Œå¯¹è‡ªå·±çš„ä»£ç è´Ÿè´£ï¼Œä¸è¦æµªè´¹åˆ«äººçš„æ—¶é—´ã€‚\n    - å‘èµ·åï¼Œè¦åœ¨ GitLab æˆ–è€…å…¶å®ƒ Review å·¥å…·ä¸Š double check å˜æ›´é›†ã€‚\n2. å®¡æŸ¥è€… Review ä»£ç ã€‚\n    - å¯¹ [ç¼–å†™æ•´æ´çš„ä»£ç ](#ç¼–å†™æ•´æ´ä»£ç ) ä¸­å„é¡¹è¦æ±‚è¿›è¡Œæ£€æŸ¥\n    - åœ¨ä»»ä½•æœ‰ç–‘é—®æˆ–å»ºè®®çš„åœ°æ–¹ç•™ commentã€‚\n    - ä»ä¸­å­¦ä¹ ä¸€äº›å¥½çš„ä¸œè¥¿ã€‚\n    - å®Œæˆåï¼Œå¦‚æœæœ‰é—®é¢˜éœ€è¦ä¿®å¤ï¼Œç•™ comment â€œWFFâ€ï¼Œè¡¨ç¤ºâ€œwaiting for fixâ€ï¼Œå¦åˆ™è¿›è¡Œç¬¬ 4 æ­¥ã€‚\n3. æäº¤è€…å“åº” comments ã€‚\n    - ç¡®å®æœ‰é—®é¢˜çš„ï¼Œä¿®å¤ä¹‹ã€‚å¦‚æœè¯¥åˆ†æ”¯æœªè¢«å…¶ä»–äººä½¿ç”¨ï¼Œåº”ä½¿ç”¨ `git commit --amend` æäº¤ä»¥å‡å°‘ä¸å¿…è¦çš„ commit å†å²ã€‚\n    - ä¸åŒæ„çš„ï¼Œè®¨è®ºã€‚\n    - å®Œæˆåï¼Œç•™ comment â€œFixedâ€ï¼Œå®¡æŸ¥è€…å†æ¬¡æ£€æŸ¥ï¼Œå›åˆ°ç¬¬äºŒæ­¥ã€‚\n4. å®¡æŸ¥è€…ç¡®è®¤æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œå°† Merge Request è½¬å‘ç»™ç›®æ ‡åˆ†æ”¯çš„ç»´æŠ¤è€…è¿›è¡Œåˆå¹¶ã€‚\n\n# è°ƒè¯•æŠ€å·§\n\n- æŸ¥çœ‹æ—¥å¿—ï¼Œæ¯”å¦‚åš PHP Web å¼€å‘è¦çŸ¥é“ Nginxï¼ŒPHP-FPMï¼ŒPHP çš„æ—¥å¿—æ–‡ä»¶çš„ä½ç½®ï¼Œå¿…è¦çš„æ—¶å€™ä»ä¸­å¯»æ‰¾çº¿ç´¢ã€‚ä½¿ç”¨ `tail -F file1 file2` å‘½ä»¤å¯ä»¥æŒç»­ç›‘æ§å¤šä¸ªæ–‡ä»¶ã€‚\n- é€šè¿‡æ·»åŠ ä¸´æ—¶ log è¯­å¥æˆ–æ–­ç‚¹çš„å½¢å¼æ£€æŸ¥ä»£ç è·¯å¾„ï¼Œå¾ˆå¤šæ—¶å€™è°ƒè¯•æ˜¯ä¸ªä½“åŠ›æ´»ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œä¸è¦è½»æ˜“æ”¾å¼ƒæˆ–å¯»æ±‚ä»–äººå¸®åŠ©ã€‚æ£€æŸ¥ä»£ç æ˜¯å¦æŒ‰é¢„æœŸè·¯å¾„æ‰§è¡Œäº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿè¾“å…¥æ•°æ®çš„åŸå› å—ï¼Ÿæˆ–è€…ä¸­é—´ä¸€æ­¥æ•°æ®å¤„ç†æ˜¯é”™çš„ï¼Ÿä»æ•°æ®è¿›å…¥ç³»ç»Ÿå¼€å§‹ä¸€æ­¥æ­¥ä»å‰å¾€ååˆ†æï¼Œç”¨æ’é™¤æ³•é€æ­¥ç¼©å°èŒƒå›´ï¼Œbug å¿…å°†æ— æ‰€éå½¢ã€‚å¦å¤–ï¼Œæœ‰æ—¶å€™ä»£ç è·¯å¾„å¯èƒ½ç‰µæ‰¯åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™ä¸ªæ—¶å€™ä¸è¦ç•æƒ§ï¼Œä»£ç éƒ½æ˜¯äººå†™çš„ï¼Œå°¤å…¶å¼€æºé¡¹ç›®é€šå¸¸è´¨é‡è¾ƒé«˜ï¼Œè¿›å»çœ‹ä¸€ä¸‹ï¼Œé€šå¸¸æ²¡ä½ æƒ³è±¡çš„é‚£ä¹ˆéš¾ã€‚\n- ç¡®ä¿è¯»æ‡‚æ—¥å¿—æ¶ˆæ¯ã€å¼‚å¸¸ä¿¡æ¯ã€é”™è¯¯è¾“å‡ºç­‰ï¼Œç‰¹åˆ«æ˜¯è‹±æ–‡å†…å®¹ï¼Œä¸è¦å› ä¸ºæ˜¯è‹±æ–‡ä¸æƒ³è¯»ï¼Œç»“æœéå¸¸æ˜æ˜¾çš„çº¿ç´¢æ‘†åœ¨ä½ é¢å‰ä½ å´è§†è€Œä¸è§ã€‚æ¯”å¦‚å¸¸è§çš„ git é”™è¯¯ï¼Œéƒ½ä¼šæœ‰ç›¸åº”çš„æè¿°ç”šè‡³å»ºè®®çš„è§£å†³åŠæ³•ã€‚å†æ¯”å¦‚åš Web å¼€å‘ï¼Œä¸€ä¸ªé¡µé¢æ‰“ä¸å¼€ï¼Œæœ€èµ·ç ä½ è¦å…ˆçœ‹ä¸€ä¸‹ HTTP Response æ˜¯ä»€ä¹ˆï¼ŒçŠ¶æ€ç ï¼Œbody ç­‰ã€‚å¦‚æœå®åœ¨çœ‹ä¸æ‡‚ï¼Œgoogle ä¹‹ã€‚\n- æœ‰æ„è¯†çš„ç»„ç»‡æ•´ç†å¸¸è§é”™è¯¯ï¼Œä¾æ®è¿‡å¾€ç»éªŒå¿«é€Ÿå®šä½é—®é¢˜ã€‚ä¾‹å¦‚ PHP å¼€å‘æ—¶ç¢°åˆ° HTTP 404ï¼ŒåŸºæœ¬å¯ä»¥æ’é™¤ä»£ç é€»è¾‘é—®é¢˜ï¼Œåº”è¯¥æ£€æŸ¥æ‹¼å†™é”™è¯¯ã€Nginx é…ç½®ã€MVC æ¡†æ¶è·¯ç”±é…ç½®ã€æ–‡ä»¶è·¯å¾„ç­‰ã€‚\n- ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œé‡åˆ°é—®é¢˜è¦çŸ¥é“å»æŸ¥çœ‹å®ƒçš„ issue åˆ—è¡¨ï¼Œä¹Ÿè®¸åˆ«äººä¹Ÿé‡åˆ°äº†åŒæ ·çš„é—®é¢˜å¹¶ä¸”å·²ç»æŠ¥äº† Bug ï¼Œå°¤å…¶æ˜¯ GitHub ä¸Šçš„å¼€æºé¡¹ç›®ã€‚\n\n# Research æŠ€å·§\n\nå·¥ä½œä¸­éš¾å…éœ€è¦å­¦ä¹ æ–°æŠ€æœ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸€äº›æŠ€å·§å¯ä»¥å®è·µã€‚\n\n- ä½¿ç”¨ Google æœç´¢ï¼Œé™¤éæ˜¯ç‰¹å®šäºå›½å†…çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¾®ä¿¡å¼€å‘ç›¸å…³ï¼Œä¸è¦ä½¿ç”¨ç™¾åº¦ã€‚\n\n    ç™¾åº¦æœç´¢è´¨é‡åä½æ˜¯äº‹å®ï¼Œä¸€æ–¹é¢æ˜¯å—é™äºç™¾åº¦è‡ªèº«çš„æŠ€æœ¯ï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºä¸­æ–‡æœç´¢æœ‰å¾ˆå¤šåƒåœ¾ç«™ï¼Œä»¥åŠä½è´¨é‡çš„è½¬è½½åšå®¢ã€‚ç»å¸¸å‡ºç°å‰å‡ é¡µéƒ½æ˜¯å„ç§åƒåœ¾ç«™åœ¨é‡å¤åŒä¸€ç¯‡æ–‡ç« ï¼Œè€Œä¸”å¹¿å‘Šæ»¡å¤©é£ï¼Œæ’ç‰ˆç¨€çƒ‚ã€‚è¿˜æœ‰æ–°æµªã€ç½‘æ˜“çš„åšå®¢ï¼Œå¾ˆå¤šéƒ½æ˜¯å¤åˆ¶ç²˜è´´çš„è½¬è½½ï¼Œæ ¼å¼ä¸€å›¢ç³Ÿï¼ŒåŸæ–‡å´ä¸çŸ¥æ‰€è¸ªã€‚æ›´ä¸è¦æå¾ˆå¤šæŠ€æœ¯ä¸­æ–‡èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼Œæ›´æ–°ä¸åŠæ—¶ï¼Œç¿»è¯‘è´¨é‡ä¸é«˜ç­‰ç­‰é—®é¢˜ã€‚\n\n    å…»æˆä½¿ç”¨åœ¨ Google ä¸Šä½¿ç”¨è‹±æ–‡å…³é”®è¯æœç´¢çš„å¥½ä¹ æƒ¯ç»å¯¹å¯ä»¥èŠ‚çœä½ çš„å¤§é‡æ—¶é—´å’Œç²¾åŠ›ã€‚\n\n- æœç´¢æ—¶è¦æ³¨æ„æ—¶æ•ˆæ€§\n\n    å–å†³äºå…·ä½“çš„æŠ€æœ¯ï¼Œæœç´¢å‡ºæ¥çš„ä¸œè¥¿å¾ˆå¤šå¯èƒ½å·²ç»è¿‡æ—¶äº†ï¼Œè¦æ³¨æ„åŒºåˆ†ï¼Œä¸è¦è¢«è¿‡æ—¶çš„ä¸œè¥¿è¯¯å¯¼ã€‚å¿«é€Ÿæµè§ˆæœç´¢ç»“æœæ—¶æå¸¦çœ‹ä¸€ä¸‹æ—¶é—´ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œæœ‰å¤šæ¡ç›¸ä¼¼ç»“æœæ—¶å½“ç„¶æ˜¯æœ€æ–°çš„ä¼šé è°±ä¸€ç‚¹ã€‚\n\n- æŒæ¡ä½¿ç”¨æœç´¢å¼•æ“çš„ä¸€äº›å°æŠ€å·§ï¼Œhttp://www.lifehack.org/articles/technology/20-tips-use-google-search-efficiently.html\n- æ³¨æ„æœé›†ã€æ•´ç†ä¸€äº›é«˜è´¨é‡çš„ç½‘ç«™ã€åšå®¢\n\n    å½“ä½ ç ”ç©¶ä¸€ä¸ªæ–°ä¸œè¥¿çš„æ—¶å€™è‚¯å®šä¼šè¿›è¡Œå¾ˆå¤šæœç´¢ï¼Œå…¶ä¸­æœ‰äº›ç»“æœå¯èƒ½è´¨é‡å¾ˆé«˜ï¼Œè¿™æ—¶å¯ä»¥å¿«é€Ÿæµè§ˆä¸€ä¸‹è¿™ä¸ªç½‘ç«™æˆ–è€…åšå®¢çš„é¦–é¡µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ”¶è—ä»·å€¼ï¼Œæˆ–è€…æœ‰æ²¡æœ‰å…¶å®ƒç›¸å…³æ–‡ç« å€¼å¾—çœ‹ä¸€ä¸‹ã€‚\n\n- é˜…è¯»æƒå¨ã€ç³»ç»Ÿçš„ä¹¦ç±\n\n    é€šè¿‡ä½¿ç”¨æœç´¢å¼•æ“æˆ–è€…é˜…è¯»åšå®¢ç­‰é€šå¸¸å¯ä»¥å¯¹æŸç§æŠ€æœ¯æœ‰ä¸ªå¤§æ¦‚äº†è§£ï¼Œæˆ–è€…å¯ä»¥è§£å†³æŸä¸ªå…·ä½“é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºè¾ƒå¤æ‚çš„æŠ€æœ¯ï¼Œç³»ç»Ÿå­¦ä¹ æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œçœ‹ä¹¦å¾€å¾€æ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚å¯ä»¥åˆ°è±†ç“£é˜…è¯»æˆ–è€…å„å¤§ç”µå•†ç½‘ç«™ä¸Šé€šè¿‡è¯„åˆ†æ’åæ¥ç­›é€‰å¥½çš„ä¹¦ç±ã€‚å¦‚æœæ˜¯å›½å¤–ä¹¦ç±ï¼Œå°½é‡é€‰æ‹©è‹±æ–‡åŸç‰ˆï¼Œä¸€å¼€å§‹ä¼šæ¯”è¾ƒåƒåŠ›ï¼Œç†Ÿæ‚‰äº†å°±å¥½äº†ã€‚\n\n    è·Ÿç­›é€‰æœç´¢ç»“æœä¸€æ ·ï¼Œå°½é‡é€‰æ‹©è¾ƒæ–°çš„ä¹¦ç±ã€‚\n\n- æŒç»­å…³æ³¨\n\n    æ¯ä¸ªäººç†è§£æ–°äº‹ç‰©éƒ½æœ‰ä¸€ä¸ªä»æµ…å…¥æ·±çš„è¿‡ç¨‹ï¼Œæ–°å­¦çš„æŠ€æœ¯æœ€å¥½å¯ä»¥ä¸æ–­å¤¯å®ï¼Œåå¤å’€åš¼ï¼Œä¸è¦åœç•™åœ¨è¡¨é¢ã€‚å¯ä»¥é€šè¿‡è®¢é˜…ä¸€äº›é‚®ä»¶åˆ—è¡¨ã€çŸ¥ååšå®¢æ¥ä¸æ–­è¡¥å……çŸ¥è¯†ç›²ç‚¹ï¼Œå­¦ä¹ æœ€ä½³å®è·µï¼Œåæ€è‡ªå·±çš„ä¸è¶³ï¼Œä»¥åŠäº†è§£æŠ€æœ¯çš„æœ€æ–°åŠ¨æ€ã€‚\n\n# æ²Ÿé€šæŠ€å·§\n\n- å°½é‡æä¾›å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œå‰å› åæœäº¤ä»£æ¸…æ¥šï¼Œå°¤å…¶æ˜¯å¯¹è¯åˆšå¼€æ—¶çš„æ—¶å€™ï¼Œä¸è¦æ€¥äºåˆ‡å…¥é‡ç‚¹ï¼Œå…ˆç¡®ä¿å¯¹æ–¹äº†è§£è¶³å¤Ÿçš„èƒŒæ™¯ï¼Œé¿å…ä¸å¿…è¦çš„èƒŒæ™¯äº¤ä»£ç›¸å…³çš„å¾€å¤æé—®å’Œå›ç­”ã€‚\n- é—®é—®é¢˜æ—¶ï¼Œé™¤äº†é—®å®é™…çš„é—®é¢˜å¤–ï¼Œæœ€å¥½ä¹Ÿè§£é‡Šä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„æ¥ç”±ï¼Œè¿™ä¸ªé—®é¢˜å“ªå„¿æ¥çš„ï¼Œä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªé—®é¢˜æˆ–ç–‘é—®ã€‚è¿™æ ·é€šå¸¸å¯ä»¥å¸®åŠ©å›ç­”è€…æ›´èƒ½æŠ“ä½é—®é¢˜çš„é‡ç‚¹ï¼Œæ›´å‡†ç¡®çš„å›ç­”ã€‚\n- å›ç­”é—®é¢˜æ—¶ï¼Œå¯¹äºæ˜¯æˆ–å¦çš„ç–‘é—®å¥ï¼Œå°½é‡å…ˆç›´æ¥äº†å½“çš„å›ç­”ï¼Œç„¶åæœ‰å¿…è¦çš„è¯å†è¡¥å……æˆ–è§£é‡Šã€‚\n- å›ç­”è¿›åº¦ä¼°è®¡ç­‰ç›¸å…³é—®é¢˜æ—¶ï¼Œä¸è¦ä½¿ç”¨â€œå·®ä¸å¤šâ€ã€â€œå¿«äº†â€ç­‰æ¨¡ç³Šè¯æ±‡ï¼Œåº”è¯¥å…·ä½“ä¸€ç‚¹ï¼Œæ¯”å¦‚â€œ90% éƒ½åšå®Œäº†ï¼Œè¿˜å‰©xxxï¼Œä¸‹åˆå¯ä»¥å®Œæˆâ€ã€‚\n","slug":"2017-01-06-freshman-guide","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxl000zmmt7c7qjqiw8","content":"<h1 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯<a href=\"https://github.com/inetfuture\" target=\"_blank\" rel=\"external\">å‰è€å¤§</a>å¯¹å·¥ä½œçš„ä¸€äº›æŒ‡å¯¼å’Œè¦æ±‚, æˆ‘åœ¨è¿™é‡Œåšäº†ä¸€äº›æ•´ç†å’Œè¡¥å……ã€‚<br>ä½œä¸ºä¸€åå¼€å‘è€…é¦–å…ˆè¦åšåˆ°çš„æ˜¯æœ‰<code>è´£ä»»å¿ƒ</code>, å…¶æ¬¡æ˜¯<code>Be Professional!</code>ã€‚</p>\n<h1 id=\"å¿…è¯»æ•°æ®\"><a href=\"#å¿…è¯»æ•°æ®\" class=\"headerlink\" title=\"å¿…è¯»æ•°æ®\"></a>å¿…è¯»æ•°æ®</h1><ul>\n<li><a href=\"https://git-scm.com/book/zh/v2\" target=\"_blank\" rel=\"external\">Pro Git</a></li>\n<li><a href=\"http://mislav.net/2013/02/merge-vs-rebase/\" target=\"_blank\" rel=\"external\">Git merge-vs-rebase</a></li>\n<li><a href=\"http://slides.com/inetfuture/how-to-name-things\" target=\"_blank\" rel=\"external\">how-to-name-things</a></li>\n<li><p><a href=\"restful_api.md\">RESTful API</a></p>\n</li>\n<li><p>ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹</p>\n</li>\n<li>ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹</li>\n<li>ã€Šæ•æ·è½¯ä»¶å¼€å‘ : åŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹</li>\n<li>ã€ŠTCP/IP è¯¦è§£ å·1ã€‹</li>\n<li><a href=\"git.md\">Git</a></li>\n<li><p><a href=\"https://github.com/jlevy/the-art-of-command-line/blob/master/README-zh.md\" target=\"_blank\" rel=\"external\">the-art-of-command-line</a></p>\n</li>\n<li><p><a href=\"https://github.com/robbyrussell/oh-my-zsh\" target=\"_blank\" rel=\"external\">Oh My Zsh</a></p>\n</li>\n<li><a href=\"https://trello.com\" target=\"_blank\" rel=\"external\">Trello</a></li>\n<li><a href=\"http://devdocs.io/\" target=\"_blank\" rel=\"external\">DevDocs</a></li>\n</ul>\n<p><a href=\"https://github.com/CraryPrimitiveMan\" target=\"_blank\" rel=\"external\">æ‰©å±•é˜…è¯»</a></p>\n<h1 id=\"å¿…å¤‡å·¥å…·\"><a href=\"#å¿…å¤‡å·¥å…·\" class=\"headerlink\" title=\"å¿…å¤‡å·¥å…·\"></a>å¿…å¤‡å·¥å…·</h1><h2 id=\"VPN\"><a href=\"#VPN\" class=\"headerlink\" title=\"VPN\"></a>VPN</h2><ul>\n<li><a href=\"http://gjsq.me/23186204\" target=\"_blank\" rel=\"external\">GreenVPN</a></li>\n</ul>\n<h2 id=\"Sublime-Text\"><a href=\"#Sublime-Text\" class=\"headerlink\" title=\"Sublime Text\"></a>Sublime Text</h2><h3 id=\"Package-Control\"><a href=\"#Package-Control\" class=\"headerlink\" title=\"Package Control\"></a>Package Control</h3><ul>\n<li>Sublime Text 2</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib2,os,hashlib; h = <span class=\"string\">'df21e130d211cfc94d9b0905775a7c0f'</span> + <span class=\"string\">'1e3d39e33b79698005270310898eea76'</span>; pf = <span class=\"string\">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> os.path.exists(ipp) <span class=\"keyword\">else</span> <span class=\"keyword\">None</span>; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( <span class=\"string\">'http://packagecontrol.io/'</span> + pf.replace(<span class=\"string\">' '</span>, <span class=\"string\">'%20'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), <span class=\"string\">'wb'</span> ).write(by) <span class=\"keyword\">if</span> dh == h <span class=\"keyword\">else</span> <span class=\"keyword\">None</span>; print(<span class=\"string\">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h) <span class=\"keyword\">if</span> dh != h <span class=\"keyword\">else</span> <span class=\"string\">'Please restart Sublime Text to finish installation'</span>)</div></pre></td></tr></table></figure>\n<ul>\n<li>Sublime Text 3</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib.request,os,hashlib; h = <span class=\"string\">'df21e130d211cfc94d9b0905775a7c0f'</span> + <span class=\"string\">'1e3d39e33b79698005270310898eea76'</span>; pf = <span class=\"string\">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( <span class=\"string\">'http://packagecontrol.io/'</span> + pf.replace(<span class=\"string\">' '</span>, <span class=\"string\">'%20'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); print(<span class=\"string\">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h)) <span class=\"keyword\">if</span> dh != h <span class=\"keyword\">else</span> open(os.path.join( ipp, pf), <span class=\"string\">'wb'</span> ).write(by)</div></pre></td></tr></table></figure>\n<p>å¿…å¤‡æ’ä»¶ï¼šGitï¼ŒGitGutterï¼Œknockdownï¼ŒSublimeLinterï¼ŒDocBlockrï¼ŒEditorConfigï¼ŒEmmetï¼ŒFileDiffsï¼ŒSublimeCodeIntel, SidebarEnhancements, PackageSync</p>\n<h1 id=\"åšäº‹åŸåˆ™ã€æ–¹æ³•\"><a href=\"#åšäº‹åŸåˆ™ã€æ–¹æ³•\" class=\"headerlink\" title=\"åšäº‹åŸåˆ™ã€æ–¹æ³•\"></a>åšäº‹åŸåˆ™ã€æ–¹æ³•</h1><ul>\n<li><p>ä¸»åŠ¨æ²Ÿé€šè€Œä¸æ˜¯è¢«åŠ¨åº”ä»˜</p>\n<ul>\n<li>å·¥ä½œä¸Šå­˜åœ¨ä»»ä½•è®©ä½ ä¸çˆ½çš„äº‹æ—¶ï¼Œå°½é‡æå‡ºæ¥ï¼Œæ‰€æœ‰çš„é—®é¢˜éƒ½å¯ä»¥è®¨è®ºã€åè°ƒã€ç¼“è§£ï¼Œç”šè‡³å®Œå…¨é¿å…ï¼Œé•¿æœŸå‹æŠ‘ç€ä¼šå½±å“è‡ªå·±çš„å·¥ä½œæ•ˆç‡å’Œç§¯ææ€§ï¼Œå¯¹ä¸ªäººå’Œå›¢é˜Ÿéƒ½ä¸åˆ©ã€‚</li>\n<li>å¯¹éœ€æ±‚ã€å¼€å‘è§„èŒƒã€ä»£ç ç»„ç»‡ç­‰ç­‰å„æ–¹é¢å­˜åœ¨ä»»ä½•ç–‘é—®æ—¶ï¼Œä¸»åŠ¨è¯¢é—®å’Œè®¨è®ºï¼Œä¸è¦é»˜ä¸ä½œå£°ã€è‡ªä½œä¸»å¼ å¯¼è‡´è¿”å·¥å’Œå»¶è¯¯ã€‚</li>\n<li>è‡ªå·±çš„ä»£ç è¢«åˆ«äºº Review æ—¶ï¼Œå¦‚æœè§‰å¾—æŸæ®µä»£ç å¯èƒ½æœ‰é—®é¢˜æˆ–è€…ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼Œä¸»åŠ¨æå‡ºæ¥è®¨è®ºï¼Œè€Œä¸æ˜¯ç­‰å¾…å®¡æŸ¥è€…è¯¢é—®ã€‚å‰è€…å¯ä»¥ä½¿ Review æ›´é«˜æ•ˆï¼Œæ›´åˆ©äºåŸ¹å…»åŒäº‹é—´çš„ç›¸äº’ä¿¡ä»»ï¼Œåè€…ä¸€æ˜¯æ•ˆç‡ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§ä¸è´Ÿè´£ä»»çš„è¡¨ç°ã€‚</li>\n<li>è¿›åº¦å­˜åœ¨é£é™©æ—¶ä¸»åŠ¨çŸ¥ä¼šå…¶ä»–äººï¼Œè€Œä¸æ˜¯é»˜é»˜æ‹–åˆ°æœ€åä¸€åˆ»è¿ç´¯å¤§å®¶åŠ ç­ã€‚</li>\n<li>åšå˜æ›´æ—¶åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜ï¼Œå¦åˆ™å¯èƒ½ä¼šæµªè´¹é˜Ÿå‹çš„æ—¶é—´å»æ’æŸ¥é—®é¢˜ã€‚ä»£ç çº§åˆ«çš„é—®é¢˜å¯ä»¥é€šè¿‡åœ¨ GitLab ç­‰ä»£ç ç®¡ç†å·¥å…·ä¸Š at å¯¹æ–¹ã€‚</li>\n</ul>\n</li>\n<li><p>è®¤çœŸè´Ÿè´£ï¼Œå…³æ³¨ç»†èŠ‚ï¼Œè¿½æ±‚å“è¶Š</p>\n<ul>\n<li>æ¯ä¸€ä»½éœ€æ±‚éƒ½è¦ç†è§£ä¹‹åå†åŠ¨æ‰‹ï¼Œæ„Ÿè§‰éœ€æ±‚ä¸åˆç†æˆ–ä¸æ˜ç¡®çš„è¦æå‡ºæ¥è®¨è®ºï¼Œå¯¹äº§å“è¦æœ‰è´£ä»»å¿ƒï¼Œä¸ä»…ä»…æ˜¯â€œæŒ‰éƒ¨å°±ç­â€å¾—åšäº‹æƒ…ã€‚</li>\n<li>æäº¤å‰ä»”ç»†æµ‹è¯•è‡ªå·±å®ç°çš„åŠŸèƒ½ï¼Œæ£€æŸ¥ä»£ç ç»†èŠ‚ï¼Œæœ‰äº¤ä»˜é«˜è´¨é‡ä»£ç çš„è´£ä»»å¿ƒï¼Œè€Œä¸æ˜¯ä¾èµ–å…¶ä»–æˆå‘˜å¸®ä½  Reivew æˆ–è€… QA å¸®ä½ å‘ç° bug ã€‚</li>\n<li>ä»£ç ä»…ä»…å¯ä»¥å·¥ä½œæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜è¦å¯è¯»ã€æ˜“æ‰©å±•ã€å¯ç»´æŠ¤ã€å®‰å…¨ã€é«˜æ•ˆï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œè¦ç”¨é«˜æ ‡å‡†è¦æ±‚è‡ªå·±ï¼Œå†™ä»£ç è¦â€œä¸Šå¿ƒâ€ï¼Œä¸è¦æ•·è¡ã€éšæ„ã€‚</li>\n<li>ç»†èŠ‚ä¸ä¸€å®šå†³å®šæˆè´¥ä½†å´å¯ä»¥å……åˆ†ä½“ç°ä¸€ä¸ªäººçš„å·¥ä½œæ€åº¦ï¼Œè¯·è®¤çœŸå¯¹å¾…å„ç§æµç¨‹ã€è§„èŒƒï¼Œæ¯”å¦‚å†™è‹±æ–‡é‚®ä»¶æ—¶ï¼Œä»è¯­æ³•ã€æ ¼å¼åˆ°æ¯ä¸€ä¸ªæ‹¼å†™ã€æ ‡ç‚¹ï¼Œå†æ¯”å¦‚ Commit Message çš„æ ¼å¼ã€Coding Style ç­‰ç­‰ã€‚</li>\n</ul>\n</li>\n<li><p>è‡ªæˆ‘é©±åŠ¨</p>\n<ul>\n<li>è‡ªè§‰æ·±å…¥å­¦ä¹ ç›¸å…³æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ç”¨å¤šå°‘å­¦å¤šå°‘ï¼Œä¸´æ—¶æŠ±ä½›è„šã€‚å‡è®¾ä½ åœ¨åš IOS å¼€å‘ï¼Œå³ä¾¿ç›®å‰æ‰€æœ‰é¡¹ç›®ä»åœ¨ç”¨ Objective-C ï¼Œä½ ä¹Ÿåº”è¯¥åˆ©ç”¨ä¸šä½™æ—¶é—´è‡ªè§‰å»å­¦ä¹  Swift ï¼Œæ—¶åˆ»å‡†å¤‡ç€ã€‚</li>\n<li>ä¸»åŠ¨æ€è€ƒäº§å“çš„èµ°å‘ï¼Œè‡ªè§‰è¿›è¡ŒçŸ¥è¯†å‚¨å¤‡ã€è°ƒç ”ã€‚</li>\n<li>è‡ªè§‰é‡æ„ä½è´¨é‡ä»£ç ï¼Œæ”¹å–„é¡¹ç›®æµç¨‹ï¼Œç­‰ç­‰ï¼Œä¿è¯é¡¹ç›®çš„å¥åº·å‘å±•ã€‚</li>\n</ul>\n</li>\n<li><p>æ¢ä½æ€è€ƒ</p>\n<ul>\n<li>ä½¿ç”¨é‚®ä»¶ã€å¾®ä¿¡ç­‰å·¥å…·äº¤æµæ—¶ä¸€æ¬¡æ€§æä¾›å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼Œé¿å…ä½æ•ˆç‡çš„æ²Ÿé€šï¼Œæƒ³ä¸€ä¸‹ï¼Œæˆ‘è¿™æ ·æè¿°å¯¹æ–¹æ˜¯å¦å¯ä»¥ç†è§£å¹¶ç›´æ¥å›å¤ã€‚</li>\n<li>æ— è®ºæ˜¯åš Code Review è¿˜æ˜¯æäº¤åŠŸèƒ½ç»™ QA æµ‹è¯•ï¼Œå°½è‡ªå·±æœ€å¤§åŠªåŠ›ä¿è¯è´¨é‡ï¼Œåšå¥½è‡ªå·±åˆ†å†…çš„äº‹ï¼Œå‡è½»é˜Ÿå‹çš„è´Ÿæ‹…ã€‚</li>\n<li>ä½œä¸ºå¼€å‘ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¸º leader åˆ†æ‹…å‹åŠ›ï¼Ÿä½œä¸º leader ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¿ƒè¿›ä¸‹å±å·¥ä½œèƒ½åŠ›çš„ç¨³æ­¥æˆé•¿ï¼Ÿ</li>\n</ul>\n</li>\n<li><p>ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜</p>\n<ul>\n<li>æ€è€ƒé—®é¢˜çš„åŸå› ï¼Œä¸è¦åœç•™äºè¡¨é¢é—®é¢˜çš„ä¿®ä¿®è¡¥è¡¥ã€‚</li>\n</ul>\n</li>\n<li><p>ç”¨æ­£ç¡®çš„æ–¹å¼è§£å†³é—®é¢˜</p>\n<ul>\n<li>å¾ˆå¤šé—®é¢˜éƒ½æœ‰ä¸æ­¢ä¸€ç§çš„è§£å†³åŠæ³•ï¼Œä¸è¦æ»¡è¶³äºä½ æœ€åˆæƒ³åˆ°çš„é‚£ç§ï¼Œä¹Ÿè®¸æœ‰æ›´å¥½çš„å‘¢ï¼Ÿä¸»åŠ¨å»æ€è€ƒç›®å‰çš„æ–¹æ¡ˆå¯ç»´æŠ¤å—ï¼Ÿæ–¹ä¾¿å—ï¼Ÿæ•ˆç‡é«˜å—ï¼Ÿæ™®é€‚å—ï¼Ÿ</li>\n<li>å¤šçœ‹ä¸€äº›æœ€ä½³å®è·µï¼ˆBest Practiceï¼‰çš„èµ„æ–™ï¼Œå¤šçœ‹ä¸€äº›ä¼˜ç§€å¼€æºé¡¹ç›®çš„æºä»£ç ï¼Œå¤šäº†è§£åˆ«äººæ€ä¹ˆåšçš„ä½ æ‰èƒ½åŠæ—¶å‘ç°è‡ªå·±çš„ä¸è¶³ã€‚</li>\n<li>ä¸è¦é‡å¤é€ è½®å­ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¹Ÿè®¸äººå®¶å·²ç»æä¾›äº†ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œåªæ˜¯å› ä¸ºä½ æ²¡æœ‰ä»”ç»†çœ‹æ–‡æ¡£ï¼Œæ‰€ä»¥ä¸çŸ¥é“ã€‚</li>\n</ul>\n</li>\n<li><p>ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥</p>\n<ul>\n<li>å­¦ä¹ æ–°çŸ¥è¯†è¦å°½å¯èƒ½çš„ç³»ç»Ÿã€å…¨é¢ï¼Œä¸è¦åªæ˜¯ä¸ºäº†åº”ä»˜å½“å‰å·¥ä½œç‰‡é¢äº†è§£ã€‚</li>\n<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€æ¡†æ¶æ—¶åº”å°½é‡é€šè¯»å…¶æ–‡æ¡£ï¼Œè‡³å°‘è¦çŸ¥é“å®ƒå¯ä»¥åšä»€ä¹ˆï¼Œæœ‰å“ªäº›é™åˆ¶ï¼Œé‡åˆ°å…·ä½“é—®é¢˜åå¯ä»¥è¿…é€Ÿåˆ°æ–‡æ¡£ä¸­æŸ¥çœ‹ç»†èŠ‚ã€‚</li>\n<li>å¸¸ç”¨çš„æŠ€æœ¯ç‚¹è¦èˆå¾—èŠ±æ—¶é—´ææ¸…æ¥šå…¶è¿è¡ŒåŸç†ã€å†…éƒ¨æœºåˆ¶ï¼Œå…çš„æ¯æ¬¡å‡ºé—®é¢˜éƒ½åƒæ— å¤´è‹è‡ï¼Œåªèƒ½ççŒœã€‚æ¯”å¦‚ Angular.js çš„ directive ç¼–è¯‘æµç¨‹æ˜¯æ€æ ·çš„ï¼ŸNode.js çš„å¼‚æ­¥ IO æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ</li>\n<li>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚å¹³æ—¶è¦æ³¨æ„æ•ˆç‡å·¥å…·çš„ç§¯ç´¯ï¼ŒåŒ…æ‹¬å¥½çš„ä»£ç ç¼–è¾‘å™¨ã€å‘½ä»¤è¡Œå·¥å…·ã€ä»»åŠ¡ç®¡ç†å·¥å…·ã€å„ç§å®ç”¨å°å·¥å…·ç­‰ç­‰ã€‚å¯¹äºä½ å¸¸ç”¨çš„ç¼–è¾‘å™¨æˆ– IDE åº”è¯¥èŠ±ä¸€äº›æ—¶é—´å»ç†Ÿç»ƒå®ƒçš„å¿«æ·é”®ï¼Œå¯»æ‰¾ä¸€äº›å¥½ç”¨çš„æ’ä»¶ï¼Œæ¯•ç«Ÿå·¥ä½œæ¯å¤©éƒ½è¦ç”¨ï¼ŒæŠ•å…¥çš„ç²¾åŠ›ç»å¯¹ç‰©è¶…æ‰€å€¼ã€‚</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"ç¼–å†™æ•´æ´ä»£ç \"><a href=\"#ç¼–å†™æ•´æ´ä»£ç \" class=\"headerlink\" title=\"ç¼–å†™æ•´æ´ä»£ç \"></a>ç¼–å†™æ•´æ´ä»£ç </h1><blockquote>\n<p>Writing clean code requires the disciplined use of a myriad little techniques applied through a painstakingly acquired sense of â€œcleanlinessâ€. This â€œcode-senseâ€ is the key. Some of us are born with it. Some of us have to fight to acquire it. Not only does it let us see whether code is good or bad, but it also shows us the strategy for applying our discipline to transform bad code into clean code.</p>\n</blockquote>\n<h2 id=\"åŸºæœ¬è¦æ±‚\"><a href=\"#åŸºæœ¬è¦æ±‚\" class=\"headerlink\" title=\"åŸºæœ¬è¦æ±‚\"></a>åŸºæœ¬è¦æ±‚</h2><ul>\n<li>Coding Styleï¼Œå¦‚æœæœ‰è¦æ±‚ï¼Œåº”è¯¥ä¸¥æ ¼éµå¾ªï¼Œä»»ä½•ä¾‹å¤–çš„æƒ…å†µéœ€è¦è®¨è®ºå†³å®šã€‚</li>\n<li>å¯è¯»æ€§ï¼Œè¦å®¹æ˜“ç†è§£ï¼Œå‘½åè¦å…·æœ‰è¶³å¤Ÿæè¿°æ€§ï¼Œä¸èƒ½æœ‰æ­§ä¹‰ï¼Œä»£ç è·¯å¾„ã€ç»“æ„è¦æ¸…æ™°ã€ç®€æ´ã€‚</li>\n<li>ä¸€è‡´æ€§ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ ‡è¯†ç¬¦å‘½åã€é”™è¯¯å¤„ç†ã€æ—¥å¿—æ ¼å¼ã€æ–‡ä»¶ç»„ç»‡æ–¹å¼ã€HTTP API æ¥å£è®¾è®¡ã€UI äº¤äº’ç­‰å„ä¸ªæ–¹é¢ï¼Œè¶Šæ˜¯ä¸€è‡´çš„ç³»ç»Ÿè¶Šå®¹æ˜“ä¸Šæ‰‹ï¼Œè¶Šå®¹æ˜“ç»´æŠ¤ï¼Œåä¹‹åˆ™ç»´æŠ¤æˆæœ¬è¶Šé«˜ã€‚</li>\n<li>å¥å£®æ€§ï¼Œè¿›è¡Œå¿…è¦çš„è¾“å…¥éªŒè¯ï¼Œå……åˆ†å¾—è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œå¼‚å¸¸å¤„ç†è¦å‘¨å…¨ï¼Œé˜²æ­¢å†…å­˜æ³„éœ²ï¼Œé˜²æ­¢ç«æ€æ¡ä»¶ï¼Œå¤šçº¿ç¨‹å®‰å…¨ï¼Œç­‰ç­‰ã€‚</li>\n<li>æ€§èƒ½ï¼Œè€ƒè™‘æ•°æ®é‡å¤§æˆ–è€…è®¿é—®é¢‘ç¹æ—¶çš„æƒ…å†µï¼Œå¯¹å†…å­˜ã€æ•°æ®åº“çš„ä½¿ç”¨è¦é«˜æ•ˆï¼Œç®—æ³•è¦å°½é‡æœ€ä¼˜ã€‚<ul>\n<li>ä»»ä½•æ¶‰åŠæ•°é‡çš„åœ°æ–¹ï¼Œåœ¨ä¸šåŠ¡åœºæ™¯åˆç†çš„å‰æä¸‹è€ƒè™‘æŠŠæ•°é‡æ”¾å¤§åˆ°æœ€å¤§ï¼Œä¸ºæœ€åçš„æƒ…å†µåšæ‰“ç®—ã€‚</li>\n<li>æ•°æ®åº“ï¼š<ul>\n<li>æ“ä½œåº”å°½é‡æ‰¹é‡è¿›è¡Œï¼ŒåªæŸ¥è¯¢å¿…éœ€çš„å­—æ®µï¼Œå‡å°‘ IO æ¶ˆè€—ã€‚</li>\n<li>ç‰¹åˆ«å¤§çš„æŸ¥è¯¢åº”åœ¨æ•°æ®åº“ä¸­åˆ†é¡µï¼Œç”±ç¨‹åºæ§åˆ¶åˆ†æ‰¹æ¬¡å¤„ç†ï¼Œå…¨é‡å–å‡ºåœ¨å†…å­˜ä¸­è®¡ç®—æˆ–è€…æ ¹æœ¬ä¸è€ƒè™‘æ•°æ®é‡å¤§å°æ˜¯å¸¸è§çš„ä½çº§é”™è¯¯ã€‚</li>\n<li>åˆç†ä½¿ç”¨ç´¢å¼•ã€‚</li>\n</ul>\n</li>\n<li>åŸºæœ¬ä¼˜åŒ–æ€è·¯ï¼š<ul>\n<li>é¢„å…ˆç­›é€‰æ•°æ®ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚</li>\n<li>ç¼“å­˜è®¡ç®—ç»“æœï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚</li>\n<li>ä½¿ç”¨é«˜æ•ˆæ•°æ®ç»“æ„ï¼Œç©ºé—´æ¢æ—¶é—´ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å®‰å…¨æ€§ï¼Œè¿›è¡Œå¿…è¦çš„æƒé™æ£€æŸ¥ï¼Œä¸èƒ½è¿‡åº¦ä¿¡ä»»å®¢æˆ·ç«¯è¾“å…¥ã€‚</li>\n<li>DRYï¼ˆDonâ€™t Repeat Yourselfï¼‰åŸåˆ™ï¼Œå¤åˆ¶ã€ç²˜è´´çš„è¡Œä¸ºæ˜¯è¦åšå†³ç¦æ­¢çš„ï¼Œä¸çŸ¥é“å¦‚ä½•å¤ç”¨ä»£ç çš„è¦ä¸»åŠ¨ä¸å…¶ä»–æˆå‘˜è®¨è®ºã€‚</li>\n<li>å•ä¸€èŒè´£åŸåˆ™ï¼Œä¸€ä¸ªç±»ã€æ–‡ä»¶æˆ–è€…æ¨¡å—ä¸èƒ½åšçš„å¤ªå¤šï¼Œä¸èƒ½åšä¸è¯¥å®ƒåšçš„äº‹ï¼Œå¥½çš„è®¾è®¡æ˜¯åªæŠŠä¸€ä»¶äº‹åšå¥½ã€‚</li>\n<li>å¼€æ”¾ã€å°é—­åŸåˆ™ï¼Œè¦æ–¹ä¾¿æ‰©å±•ï¼Œè¦è€ƒè™‘åˆ°ä»¥åçš„éœ€æ±‚ã€‚</li>\n<li>ä»£ç æ”¹åŠ¨æ–¹å¼è¦åˆé€‚ï¼Œä¸èƒ½ä¸€å‘³å¾—å †ç Œä»£ç ï¼Œéœ€è¦é€‚æ—¶åœä¸‹æ¥è¿›è¡Œé‡æ„ã€‚</li>\n<li>ä¿æŒå¹²å‡€ï¼Œä¸èƒ½å­˜åœ¨ä»»ä½•æ— ç”¨çš„æ–‡ä»¶ã€ä»£ç ï¼Œæ‰€æœ‰æ–‡æ¡£ã€æ³¨é‡Šéœ€è¦åŒæ­¥æ›´æ–°ï¼Œä¸èƒ½åŒ…å«æ³¨é‡Šæ‰çš„ä»£ç ï¼Œä¸èƒ½åŒ…å«ä¸´æ—¶è°ƒè¯•ä»£ç ï¼Œä¾‹å¤–æƒ…å†µåº”è¯¥æ·»åŠ æ³¨é‡Šè¯´æ˜ã€‚</li>\n<li>æ‰€æœ‰ Warning éƒ½åº”è¯¥è¢«ç«‹å³ä¿®å¤ï¼Œè§‰å¾—ä¸éœ€è¦ä¿®çš„ï¼Œè®¨è®ºå†³å®šåé€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ç¦ç”¨æ‰ã€‚</li>\n</ul>\n<h2 id=\"è¿›é˜¶è¦æ±‚\"><a href=\"#è¿›é˜¶è¦æ±‚\" class=\"headerlink\" title=\"è¿›é˜¶è¦æ±‚\"></a>è¿›é˜¶è¦æ±‚</h2><ul>\n<li>ä½¿ç”¨å¤šæ€å‡å°‘æˆ–è½¬ç§» <code>if</code> åˆ¤æ–­ï¼Œ(Video)[<a href=\"https://www.youtube.com/watch?v=4F72VULWFvc&amp;index=1&amp;list=PL693EFD059797C21E\" target=\"_blank\" rel=\"external\">https://www.youtube.com/watch?v=4F72VULWFvc&amp;index=1&amp;list=PL693EFD059797C21E</a>]</li>\n</ul>\n<h2 id=\"æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\"><a href=\"#æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\" class=\"headerlink\" title=\"æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\"></a>æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§</h2><ul>\n<li>å±€éƒ¨å˜é‡å°½é‡å°±è¿‘å£°æ˜ã€‚</li>\n<li>return early (V1)[<a href=\"https://www.airpair.com/php/posts/best-practices-for-modern-php-development#4-2-try-not-to-use-else-\" target=\"_blank\" rel=\"external\">https://www.airpair.com/php/posts/best-practices-for-modern-php-development#4-2-try-not-to-use-else-</a>] (V2)[<a href=\"http://www.codeproject.com/Articles/626403/How-and-Why-to-Avoid-Excessive-Nesting\" target=\"_blank\" rel=\"external\">http://www.codeproject.com/Articles/626403/How-and-Why-to-Avoid-Excessive-Nesting</a>]</li>\n<li>ç›¸å…³çš„ä»£ç å°½é‡æŒ‰ä½¿ç”¨é¡ºåºç»„ç»‡åœ¨ä¸€èµ·ï¼Œå°¤å…¶æ˜¯æ·»åŠ æ–°ä»£ç æ—¶ï¼Œä¸è¦ä¸€å‘³å¾—æ·»åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ã€‚</li>\n<li>å¸ƒå°”å˜é‡å‘½ååº”å°½é‡é‡‡ç”¨è‚¯å®šå½¢åŠ¿ã€‚</li>\n<li>é¿å…ç¡¬ç¼–ç æ•°å­—ã€å­—ç¬¦ä¸²ï¼Œåº”ä½¿ç”¨å¸¸é‡å¹¶ç»™å®ƒä»¬æœ‰æ„ä¹‰çš„åå­—ã€‚</li>\n<li>ä¼ é€’ç®€å•æ•°æ®ç±»å‹æ—¶ï¼Œé€‚å½“æ·»åŠ ä¸´æ—¶å˜é‡æé«˜å¯è¯»æ€§ã€‚</li>\n</ul>\n<h2 id=\"å¦‚ä½•å†™æ³¨é‡Š\"><a href=\"#å¦‚ä½•å†™æ³¨é‡Š\" class=\"headerlink\" title=\"å¦‚ä½•å†™æ³¨é‡Š\"></a>å¦‚ä½•å†™æ³¨é‡Š</h2><ul>\n<li>ä»£ç çš„æ„å›¾åº”è¯¥ç”±ä»£ç è‡ªèº«æ¥è¡¨è¾¾ï¼Œå³æ‰€è°“çš„å¯è¯»æ€§ï¼Œä¸åº”è¯¥ä¾èµ–äºæ³¨é‡Šè¯´æ˜ï¼Œæ‰€ä»¥ä¼˜å…ˆè€ƒè™‘å†™æ›´å¯è¯»çš„ä»£ç ã€‚</li>\n<li>ä»£ç æ„å›¾æ˜æ˜¾çš„æƒ…å†µä¸‹ï¼Œä¸è¦åŠ æ³¨é‡Šé‡å¤è¯´æ˜ã€‚</li>\n<li>ä»¥ä¸‹æ³¨é‡Šæ˜¯åˆç†çš„æˆ–è€…è¯´ä»¥ä¸‹æƒ…å†µéœ€è¦å†™æ³¨é‡Šï¼š<ul>\n<li>çº²è¦æ€§çš„æ³¨é‡Šï¼Œç®€è¦çš„æè¿°æŸä¸€ä¸ªæ–‡ä»¶ã€æŸä¸€ä¸ªç±»æˆ–æŸä¸€ä¸ªæµç¨‹ã€‚</li>\n<li>ç¡®å®æ— æ³•ä»ä»£ç æœ¬èº«æé«˜å¯è¯»æ€§çš„æƒ…å†µï¼Œæ¯”å¦‚å¤æ‚ä¸šåŠ¡é€»è¾‘ã€ç®—æ³•ã€‚</li>\n<li>ä»£ç çš„ä½œç”¨å¹¶ä¸ç›´è§‚æ—¶ï¼Œè§£é‡Šè¿™æ ·åšçš„åŸå› ã€‚</li>\n<li>å­˜åœ¨å¤šç§å¯é€‰æ–¹æ¡ˆæ—¶ï¼Œè§£é‡Šä¸ºä»€ä¹ˆé€‰æ‹©ç°åœ¨è¿™ç§ã€‚</li>\n<li>å› ä¸ºæŸäº›é™åˆ¶è€Œä½¿ä»£ç ä¸ä¸€è‡´ã€ä¸ä¼˜é›…æˆ–å­˜åœ¨å‰¯ä½œç”¨æ—¶ï¼Œåº”æ³¨æ˜åŸå› åŠåæœã€‚</li>\n<li>å‚è€ƒäº†å¤–éƒ¨ä¸€äº›èµ„æ–™æ—¶ï¼Œåº”æ³¨æ˜é“¾æ¥ï¼Œæ–¹ä¾¿å…¶ä»–äººæŸ¥çœ‹ã€‚</li>\n<li>ä¸´æ—¶æ ‡è®°æ³¨é‡Šï¼šTODOã€FIXMEã€HACKã€OPTIMIZEã€REVIEWã€‚</li>\n</ul>\n</li>\n<li>æ³¨é‡Šåº”éšä»£ç æ›´æ–°ã€‚</li>\n</ul>\n<h1 id=\"Coding-Style\"><a href=\"#Coding-Style\" class=\"headerlink\" title=\"Coding Style\"></a>Coding Style</h1><h2 id=\"å‰ç«¯\"><a href=\"#å‰ç«¯\" class=\"headerlink\" title=\"å‰ç«¯\"></a>å‰ç«¯</h2><ul>\n<li><a href=\"https://github.com/Aaaaaashu/Front-End-Style-Guide\" target=\"_blank\" rel=\"external\">Front End Style Guide</a></li>\n<li><a href=\"https://github.com/maban/styleguides\" target=\"_blank\" rel=\"external\">Style Guide Articles</a></li>\n<li><a href=\"http://primercss.io/guidelines/\" target=\"_blank\" rel=\"external\">PrimerCSS</a></li>\n</ul>\n<h3 id=\"è¯­è¨€\"><a href=\"#è¯­è¨€\" class=\"headerlink\" title=\"è¯­è¨€\"></a>è¯­è¨€</h3><ul>\n<li><a href=\"https://github.com/polarmobile/coffeescript-style-guide\" target=\"_blank\" rel=\"external\">Coffeescript</a></li>\n<li><a href=\"https://github.com/airbnb/javascript\" target=\"_blank\" rel=\"external\">ES6</a></li>\n<li><a href=\"https://github.com/yuche/javascript\" target=\"_blank\" rel=\"external\">ES6ä¸­æ–‡ç‰ˆ</a></li>\n<li><a href=\"https://github.com/adamlu/javascript-style-guide\" target=\"_blank\" rel=\"external\">ES6ä¸­æ–‡è°ƒæ•´ç‰ˆ</a></li>\n<li><a href=\"https://github.com/airbnb/javascript/tree/master/es5\" target=\"_blank\" rel=\"external\">ES5</a></li>\n<li><a href=\"https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md\" target=\"_blank\" rel=\"external\">ES5ä¸­æ–‡ç‰ˆ</a></li>\n<li><a href=\"https://github.com/airbnb/css\" target=\"_blank\" rel=\"external\">CSS/SASS/LESS</a></li>\n<li><a href=\"https://github.com/dropbox/css-style-guide\" target=\"_blank\" rel=\"external\">Project CSS</a></li>\n</ul>\n<h3 id=\"æ¡†æ¶\"><a href=\"#æ¡†æ¶\" class=\"headerlink\" title=\"æ¡†æ¶\"></a>æ¡†æ¶</h3><ul>\n<li><a href=\"https://github.com/johnpapa/angular-styleguide\" target=\"_blank\" rel=\"external\">AngularJS</a></li>\n<li><a href=\"https://github.com/mgechev/angularjs-style-guide\" target=\"_blank\" rel=\"external\">AngularJS Best Practice</a></li>\n<li><a href=\"https://github.com/gocardless/angularjs-style-guide\" target=\"_blank\" rel=\"external\">Project AngularJS</a></li>\n</ul>\n<h2 id=\"åç«¯\"><a href=\"#åç«¯\" class=\"headerlink\" title=\"åç«¯\"></a>åç«¯</h2><h3 id=\"è¯­è¨€-1\"><a href=\"#è¯­è¨€-1\" class=\"headerlink\" title=\"è¯­è¨€\"></a>è¯­è¨€</h3><ul>\n<li><a href=\"http://www.php-fig.org/psr/psr-1/\" target=\"_blank\" rel=\"external\">PHP PSR1</a></li>\n<li><a href=\"http://www.php-fig.org/psr/psr-2/\" target=\"_blank\" rel=\"external\">PHP PSR2</a></li>\n<li><a href=\"https://bingohuang.gitbooks.io/effective-go-lite-edition/content/\" target=\"_blank\" rel=\"external\">Effective Go Lite</a></li>\n<li><a href=\"https://golang.org/doc/effective_go.html\" target=\"_blank\" rel=\"external\">Effective Go</a></li>\n<li><a href=\"http://www.chingli.com/coding/effective-go/\" target=\"_blank\" rel=\"external\">Effective Goä¸­æ–‡ç‰ˆ</a></li>\n<li><a href=\"https://medium.com/@IndianGuru/best-practices-for-a-new-go-developer-8660384302fc\" target=\"_blank\" rel=\"external\">Best Practice for Go Developer</a></li>\n</ul>\n<h1 id=\"Code-Review\"><a href=\"#Code-Review\" class=\"headerlink\" title=\"Code Review\"></a>Code Review</h1><h2 id=\"ç›®çš„\"><a href=\"#ç›®çš„\" class=\"headerlink\" title=\"ç›®çš„\"></a>ç›®çš„</h2><ul>\n<li>æé«˜ä»£ç è´¨é‡ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚</li>\n<li>ç›¸äº’å­¦ä¹ ã€‚</li>\n<li>ä¿ƒè¿›é¡¹ç›®å†…çŸ¥è¯†æµåŠ¨ï¼Œé˜²æ­¢å¯¹æŸä¸ªä¸ªäººè¿‡åˆ†ä¾èµ–ã€‚</li>\n</ul>\n<h2 id=\"Commit-Message-è§„èŒƒ\"><a href=\"#Commit-Message-è§„èŒƒ\" class=\"headerlink\" title=\"Commit Message è§„èŒƒ\"></a>Commit Message è§„èŒƒ</h2><p>è§„å®šæ ¼å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(scope): $(subject)</div><div class=\"line\"></div><div class=\"line\">$(description)</div></pre></td></tr></table></figure>\n<ul>\n<li><code>$(scope)</code>ï¼šå¿…éœ€ï¼Œå–å†³äºå…·ä½“é¡¹ç›®ï¼Œä¸€èˆ¬ä¸ºé¡¹ç›®åŠŸèƒ½æ¨¡å—ã€ç»„ä»¶çš„åå­—ï¼Œç”¨æ¥æè¿°æœ¬æ¬¡ commit <strong>å½±å“çš„èŒƒå›´</strong>ï¼Œæ¯”å¦‚ <a href=\"https://github.com/nodejs/node/commits/master\" target=\"_blank\" rel=\"external\">https://github.com/nodejs/node/commits/master</a> ã€‚å½±å“å¤šä¸ªæ¨¡å—ã€ç»„ä»¶å¯ä»¥ç”¨ <code>,</code> éš”å¼€ã€‚ååŠ å…¥é¡¹ç›®çš„æ–°æˆå‘˜åº”éµå¾ªå·²æœ‰çš„ scope çº¦å®šï¼ˆé€šè¿‡ <code>git log</code> å¯ä»¥æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„æäº¤å†å²ï¼‰ï¼Œä¸è¦è‡ªå·±ç¼–é€ ã€‚ä½¿ç”¨é¦–å­—æ¯å°å†™çš„é©¼å³°å‘½åã€‚<code>bug</code> ã€ <code>hotfix</code> ã€ <code>task</code> ã€ <code>change</code> ã€<code>refactor</code> ç­‰ç­‰æè¿°çš„éƒ½ä¸æ˜¯å½±å“çš„å…·ä½“èŒƒå›´ï¼Œè€Œæ˜¯æ”¹åŠ¨ç±»å‹ï¼Œä¸èƒ½ç”¨ä½œ scope ã€‚é™¤å…·ä½“çš„æ¨¡å—ã€ç»„ä»¶åä¹‹å¤–ï¼Œå¯ä»¥ä½¿ç”¨ <code>base</code> è¡¨ç¤ºåŸºç¡€ç»“æ„ã€æ¡†æ¶ç›¸å…³çš„æ”¹åŠ¨ã€‚</li>\n<li><code>$(subject)</code>ï¼šå¿…éœ€ï¼Œ50 ä¸ªå­—ç¬¦å·¦å³çš„ç®€è¦è¯´æ˜ï¼Œé¦–å­—æ¯å°å†™ï¼Œé€šå¸¸æ˜¯åŠ¨å®¾ç»“æ„ï¼Œæè¿°åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒåŠ¨è¯ç”¨ä¸€èˆ¬ç°åœ¨æ—¶ï¼Œç¦æ­¢å‡ºç° <em>update code</em> ï¼Œ <em>fix bug</em> ç­‰æ— å®é™…æ„ä¹‰çš„æè¿°ï¼Œå¥½çš„ä¾‹å­ï¼š <em>select connector by sorting free memory</em> ï¼ˆä¸éœ€è¦å½¢å¦‚ <em>update about how to select connector â€¦</em> çš„å•°å—¦å†™æ³•ï¼‰, <em>fix sucess tip can not show on IE8</em> ï¼ˆä¸éœ€è¦å½¢å¦‚ <em>fix bug of â€¦</em> çš„å•°å—¦å†™æ³•ï¼‰ã€‚</li>\n<li><code>$(description)</code>ï¼šå¯é€‰ï¼Œè¯¦ç»†è¯´æ˜ï¼Œå»ºè®®ä½¿ç”¨åˆ—è¡¨ç½—åˆ—è¦ç‚¹ã€‚</li>\n</ul>\n<h2 id=\"æµç¨‹\"><a href=\"#æµç¨‹\" class=\"headerlink\" title=\"æµç¨‹\"></a>æµç¨‹</h2><ol>\n<li>æäº¤è€…å‘èµ· topic åˆ†æ”¯åˆ°ç›®æ ‡åˆ†æ”¯çš„ Merge Request ã€‚<ul>\n<li>ä»£ç å˜åŠ¨è¦å°½é‡å°ä¸”ä¸“æ³¨äºä¸€ä¸ªä»»åŠ¡ï¼Œä¸è¦æ”’çš„å¾ˆå¤§ï¼Œæˆ–è€…åšå¤šä¸ªä»»åŠ¡ï¼Œè¦ä¿è¯å®¡æŸ¥è€…å¯ä»¥è¾ƒå¿«ã€è¾ƒå®¹æ˜“çš„ Review ã€‚</li>\n<li>å¦‚æœä¸ç›®æ ‡åˆ†æ”¯æœ‰å†²çªï¼Œæäº¤è€…åº”è¯¥è‡ªå·±ä½¿ç”¨ <code>git rebase</code> æˆ– <code>git merge</code>ï¼ˆå…±äº«åˆ†æ”¯çš„æƒ…å†µï¼‰è§£å†³ã€‚</li>\n<li>äº¤ç»™åˆ«äººä¹‹å‰ä¸€å®šè¦è‡ªå·±å…ˆ Review ä¸€éï¼Œåˆ«äººåªæ˜¯å¸®ä½ æŸ¥æ¼è¡¥ç¼ºï¼Œå¯¹è‡ªå·±çš„ä»£ç è´Ÿè´£ï¼Œä¸è¦æµªè´¹åˆ«äººçš„æ—¶é—´ã€‚</li>\n<li>å‘èµ·åï¼Œè¦åœ¨ GitLab æˆ–è€…å…¶å®ƒ Review å·¥å…·ä¸Š double check å˜æ›´é›†ã€‚</li>\n</ul>\n</li>\n<li>å®¡æŸ¥è€… Review ä»£ç ã€‚<ul>\n<li>å¯¹ <a href=\"#ç¼–å†™æ•´æ´ä»£ç \">ç¼–å†™æ•´æ´çš„ä»£ç </a> ä¸­å„é¡¹è¦æ±‚è¿›è¡Œæ£€æŸ¥</li>\n<li>åœ¨ä»»ä½•æœ‰ç–‘é—®æˆ–å»ºè®®çš„åœ°æ–¹ç•™ commentã€‚</li>\n<li>ä»ä¸­å­¦ä¹ ä¸€äº›å¥½çš„ä¸œè¥¿ã€‚</li>\n<li>å®Œæˆåï¼Œå¦‚æœæœ‰é—®é¢˜éœ€è¦ä¿®å¤ï¼Œç•™ comment â€œWFFâ€ï¼Œè¡¨ç¤ºâ€œwaiting for fixâ€ï¼Œå¦åˆ™è¿›è¡Œç¬¬ 4 æ­¥ã€‚</li>\n</ul>\n</li>\n<li>æäº¤è€…å“åº” comments ã€‚<ul>\n<li>ç¡®å®æœ‰é—®é¢˜çš„ï¼Œä¿®å¤ä¹‹ã€‚å¦‚æœè¯¥åˆ†æ”¯æœªè¢«å…¶ä»–äººä½¿ç”¨ï¼Œåº”ä½¿ç”¨ <code>git commit --amend</code> æäº¤ä»¥å‡å°‘ä¸å¿…è¦çš„ commit å†å²ã€‚</li>\n<li>ä¸åŒæ„çš„ï¼Œè®¨è®ºã€‚</li>\n<li>å®Œæˆåï¼Œç•™ comment â€œFixedâ€ï¼Œå®¡æŸ¥è€…å†æ¬¡æ£€æŸ¥ï¼Œå›åˆ°ç¬¬äºŒæ­¥ã€‚</li>\n</ul>\n</li>\n<li>å®¡æŸ¥è€…ç¡®è®¤æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œå°† Merge Request è½¬å‘ç»™ç›®æ ‡åˆ†æ”¯çš„ç»´æŠ¤è€…è¿›è¡Œåˆå¹¶ã€‚</li>\n</ol>\n<h1 id=\"è°ƒè¯•æŠ€å·§\"><a href=\"#è°ƒè¯•æŠ€å·§\" class=\"headerlink\" title=\"è°ƒè¯•æŠ€å·§\"></a>è°ƒè¯•æŠ€å·§</h1><ul>\n<li>æŸ¥çœ‹æ—¥å¿—ï¼Œæ¯”å¦‚åš PHP Web å¼€å‘è¦çŸ¥é“ Nginxï¼ŒPHP-FPMï¼ŒPHP çš„æ—¥å¿—æ–‡ä»¶çš„ä½ç½®ï¼Œå¿…è¦çš„æ—¶å€™ä»ä¸­å¯»æ‰¾çº¿ç´¢ã€‚ä½¿ç”¨ <code>tail -F file1 file2</code> å‘½ä»¤å¯ä»¥æŒç»­ç›‘æ§å¤šä¸ªæ–‡ä»¶ã€‚</li>\n<li>é€šè¿‡æ·»åŠ ä¸´æ—¶ log è¯­å¥æˆ–æ–­ç‚¹çš„å½¢å¼æ£€æŸ¥ä»£ç è·¯å¾„ï¼Œå¾ˆå¤šæ—¶å€™è°ƒè¯•æ˜¯ä¸ªä½“åŠ›æ´»ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œä¸è¦è½»æ˜“æ”¾å¼ƒæˆ–å¯»æ±‚ä»–äººå¸®åŠ©ã€‚æ£€æŸ¥ä»£ç æ˜¯å¦æŒ‰é¢„æœŸè·¯å¾„æ‰§è¡Œäº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿè¾“å…¥æ•°æ®çš„åŸå› å—ï¼Ÿæˆ–è€…ä¸­é—´ä¸€æ­¥æ•°æ®å¤„ç†æ˜¯é”™çš„ï¼Ÿä»æ•°æ®è¿›å…¥ç³»ç»Ÿå¼€å§‹ä¸€æ­¥æ­¥ä»å‰å¾€ååˆ†æï¼Œç”¨æ’é™¤æ³•é€æ­¥ç¼©å°èŒƒå›´ï¼Œbug å¿…å°†æ— æ‰€éå½¢ã€‚å¦å¤–ï¼Œæœ‰æ—¶å€™ä»£ç è·¯å¾„å¯èƒ½ç‰µæ‰¯åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™ä¸ªæ—¶å€™ä¸è¦ç•æƒ§ï¼Œä»£ç éƒ½æ˜¯äººå†™çš„ï¼Œå°¤å…¶å¼€æºé¡¹ç›®é€šå¸¸è´¨é‡è¾ƒé«˜ï¼Œè¿›å»çœ‹ä¸€ä¸‹ï¼Œé€šå¸¸æ²¡ä½ æƒ³è±¡çš„é‚£ä¹ˆéš¾ã€‚</li>\n<li>ç¡®ä¿è¯»æ‡‚æ—¥å¿—æ¶ˆæ¯ã€å¼‚å¸¸ä¿¡æ¯ã€é”™è¯¯è¾“å‡ºç­‰ï¼Œç‰¹åˆ«æ˜¯è‹±æ–‡å†…å®¹ï¼Œä¸è¦å› ä¸ºæ˜¯è‹±æ–‡ä¸æƒ³è¯»ï¼Œç»“æœéå¸¸æ˜æ˜¾çš„çº¿ç´¢æ‘†åœ¨ä½ é¢å‰ä½ å´è§†è€Œä¸è§ã€‚æ¯”å¦‚å¸¸è§çš„ git é”™è¯¯ï¼Œéƒ½ä¼šæœ‰ç›¸åº”çš„æè¿°ç”šè‡³å»ºè®®çš„è§£å†³åŠæ³•ã€‚å†æ¯”å¦‚åš Web å¼€å‘ï¼Œä¸€ä¸ªé¡µé¢æ‰“ä¸å¼€ï¼Œæœ€èµ·ç ä½ è¦å…ˆçœ‹ä¸€ä¸‹ HTTP Response æ˜¯ä»€ä¹ˆï¼ŒçŠ¶æ€ç ï¼Œbody ç­‰ã€‚å¦‚æœå®åœ¨çœ‹ä¸æ‡‚ï¼Œgoogle ä¹‹ã€‚</li>\n<li>æœ‰æ„è¯†çš„ç»„ç»‡æ•´ç†å¸¸è§é”™è¯¯ï¼Œä¾æ®è¿‡å¾€ç»éªŒå¿«é€Ÿå®šä½é—®é¢˜ã€‚ä¾‹å¦‚ PHP å¼€å‘æ—¶ç¢°åˆ° HTTP 404ï¼ŒåŸºæœ¬å¯ä»¥æ’é™¤ä»£ç é€»è¾‘é—®é¢˜ï¼Œåº”è¯¥æ£€æŸ¥æ‹¼å†™é”™è¯¯ã€Nginx é…ç½®ã€MVC æ¡†æ¶è·¯ç”±é…ç½®ã€æ–‡ä»¶è·¯å¾„ç­‰ã€‚</li>\n<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œé‡åˆ°é—®é¢˜è¦çŸ¥é“å»æŸ¥çœ‹å®ƒçš„ issue åˆ—è¡¨ï¼Œä¹Ÿè®¸åˆ«äººä¹Ÿé‡åˆ°äº†åŒæ ·çš„é—®é¢˜å¹¶ä¸”å·²ç»æŠ¥äº† Bug ï¼Œå°¤å…¶æ˜¯ GitHub ä¸Šçš„å¼€æºé¡¹ç›®ã€‚</li>\n</ul>\n<h1 id=\"Research-æŠ€å·§\"><a href=\"#Research-æŠ€å·§\" class=\"headerlink\" title=\"Research æŠ€å·§\"></a>Research æŠ€å·§</h1><p>å·¥ä½œä¸­éš¾å…éœ€è¦å­¦ä¹ æ–°æŠ€æœ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸€äº›æŠ€å·§å¯ä»¥å®è·µã€‚</p>\n<ul>\n<li><p>ä½¿ç”¨ Google æœç´¢ï¼Œé™¤éæ˜¯ç‰¹å®šäºå›½å†…çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¾®ä¿¡å¼€å‘ç›¸å…³ï¼Œä¸è¦ä½¿ç”¨ç™¾åº¦ã€‚</p>\n<p>  ç™¾åº¦æœç´¢è´¨é‡åä½æ˜¯äº‹å®ï¼Œä¸€æ–¹é¢æ˜¯å—é™äºç™¾åº¦è‡ªèº«çš„æŠ€æœ¯ï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºä¸­æ–‡æœç´¢æœ‰å¾ˆå¤šåƒåœ¾ç«™ï¼Œä»¥åŠä½è´¨é‡çš„è½¬è½½åšå®¢ã€‚ç»å¸¸å‡ºç°å‰å‡ é¡µéƒ½æ˜¯å„ç§åƒåœ¾ç«™åœ¨é‡å¤åŒä¸€ç¯‡æ–‡ç« ï¼Œè€Œä¸”å¹¿å‘Šæ»¡å¤©é£ï¼Œæ’ç‰ˆç¨€çƒ‚ã€‚è¿˜æœ‰æ–°æµªã€ç½‘æ˜“çš„åšå®¢ï¼Œå¾ˆå¤šéƒ½æ˜¯å¤åˆ¶ç²˜è´´çš„è½¬è½½ï¼Œæ ¼å¼ä¸€å›¢ç³Ÿï¼ŒåŸæ–‡å´ä¸çŸ¥æ‰€è¸ªã€‚æ›´ä¸è¦æå¾ˆå¤šæŠ€æœ¯ä¸­æ–‡èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼Œæ›´æ–°ä¸åŠæ—¶ï¼Œç¿»è¯‘è´¨é‡ä¸é«˜ç­‰ç­‰é—®é¢˜ã€‚</p>\n<p>  å…»æˆä½¿ç”¨åœ¨ Google ä¸Šä½¿ç”¨è‹±æ–‡å…³é”®è¯æœç´¢çš„å¥½ä¹ æƒ¯ç»å¯¹å¯ä»¥èŠ‚çœä½ çš„å¤§é‡æ—¶é—´å’Œç²¾åŠ›ã€‚</p>\n</li>\n<li><p>æœç´¢æ—¶è¦æ³¨æ„æ—¶æ•ˆæ€§</p>\n<p>  å–å†³äºå…·ä½“çš„æŠ€æœ¯ï¼Œæœç´¢å‡ºæ¥çš„ä¸œè¥¿å¾ˆå¤šå¯èƒ½å·²ç»è¿‡æ—¶äº†ï¼Œè¦æ³¨æ„åŒºåˆ†ï¼Œä¸è¦è¢«è¿‡æ—¶çš„ä¸œè¥¿è¯¯å¯¼ã€‚å¿«é€Ÿæµè§ˆæœç´¢ç»“æœæ—¶æå¸¦çœ‹ä¸€ä¸‹æ—¶é—´ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œæœ‰å¤šæ¡ç›¸ä¼¼ç»“æœæ—¶å½“ç„¶æ˜¯æœ€æ–°çš„ä¼šé è°±ä¸€ç‚¹ã€‚</p>\n</li>\n<li><p>æŒæ¡ä½¿ç”¨æœç´¢å¼•æ“çš„ä¸€äº›å°æŠ€å·§ï¼Œ<a href=\"http://www.lifehack.org/articles/technology/20-tips-use-google-search-efficiently.html\" target=\"_blank\" rel=\"external\">http://www.lifehack.org/articles/technology/20-tips-use-google-search-efficiently.html</a></p>\n</li>\n<li><p>æ³¨æ„æœé›†ã€æ•´ç†ä¸€äº›é«˜è´¨é‡çš„ç½‘ç«™ã€åšå®¢</p>\n<p>  å½“ä½ ç ”ç©¶ä¸€ä¸ªæ–°ä¸œè¥¿çš„æ—¶å€™è‚¯å®šä¼šè¿›è¡Œå¾ˆå¤šæœç´¢ï¼Œå…¶ä¸­æœ‰äº›ç»“æœå¯èƒ½è´¨é‡å¾ˆé«˜ï¼Œè¿™æ—¶å¯ä»¥å¿«é€Ÿæµè§ˆä¸€ä¸‹è¿™ä¸ªç½‘ç«™æˆ–è€…åšå®¢çš„é¦–é¡µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ”¶è—ä»·å€¼ï¼Œæˆ–è€…æœ‰æ²¡æœ‰å…¶å®ƒç›¸å…³æ–‡ç« å€¼å¾—çœ‹ä¸€ä¸‹ã€‚</p>\n</li>\n<li><p>é˜…è¯»æƒå¨ã€ç³»ç»Ÿçš„ä¹¦ç±</p>\n<p>  é€šè¿‡ä½¿ç”¨æœç´¢å¼•æ“æˆ–è€…é˜…è¯»åšå®¢ç­‰é€šå¸¸å¯ä»¥å¯¹æŸç§æŠ€æœ¯æœ‰ä¸ªå¤§æ¦‚äº†è§£ï¼Œæˆ–è€…å¯ä»¥è§£å†³æŸä¸ªå…·ä½“é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºè¾ƒå¤æ‚çš„æŠ€æœ¯ï¼Œç³»ç»Ÿå­¦ä¹ æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œçœ‹ä¹¦å¾€å¾€æ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚å¯ä»¥åˆ°è±†ç“£é˜…è¯»æˆ–è€…å„å¤§ç”µå•†ç½‘ç«™ä¸Šé€šè¿‡è¯„åˆ†æ’åæ¥ç­›é€‰å¥½çš„ä¹¦ç±ã€‚å¦‚æœæ˜¯å›½å¤–ä¹¦ç±ï¼Œå°½é‡é€‰æ‹©è‹±æ–‡åŸç‰ˆï¼Œä¸€å¼€å§‹ä¼šæ¯”è¾ƒåƒåŠ›ï¼Œç†Ÿæ‚‰äº†å°±å¥½äº†ã€‚</p>\n<p>  è·Ÿç­›é€‰æœç´¢ç»“æœä¸€æ ·ï¼Œå°½é‡é€‰æ‹©è¾ƒæ–°çš„ä¹¦ç±ã€‚</p>\n</li>\n<li><p>æŒç»­å…³æ³¨</p>\n<p>  æ¯ä¸ªäººç†è§£æ–°äº‹ç‰©éƒ½æœ‰ä¸€ä¸ªä»æµ…å…¥æ·±çš„è¿‡ç¨‹ï¼Œæ–°å­¦çš„æŠ€æœ¯æœ€å¥½å¯ä»¥ä¸æ–­å¤¯å®ï¼Œåå¤å’€åš¼ï¼Œä¸è¦åœç•™åœ¨è¡¨é¢ã€‚å¯ä»¥é€šè¿‡è®¢é˜…ä¸€äº›é‚®ä»¶åˆ—è¡¨ã€çŸ¥ååšå®¢æ¥ä¸æ–­è¡¥å……çŸ¥è¯†ç›²ç‚¹ï¼Œå­¦ä¹ æœ€ä½³å®è·µï¼Œåæ€è‡ªå·±çš„ä¸è¶³ï¼Œä»¥åŠäº†è§£æŠ€æœ¯çš„æœ€æ–°åŠ¨æ€ã€‚</p>\n</li>\n</ul>\n<h1 id=\"æ²Ÿé€šæŠ€å·§\"><a href=\"#æ²Ÿé€šæŠ€å·§\" class=\"headerlink\" title=\"æ²Ÿé€šæŠ€å·§\"></a>æ²Ÿé€šæŠ€å·§</h1><ul>\n<li>å°½é‡æä¾›å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œå‰å› åæœäº¤ä»£æ¸…æ¥šï¼Œå°¤å…¶æ˜¯å¯¹è¯åˆšå¼€æ—¶çš„æ—¶å€™ï¼Œä¸è¦æ€¥äºåˆ‡å…¥é‡ç‚¹ï¼Œå…ˆç¡®ä¿å¯¹æ–¹äº†è§£è¶³å¤Ÿçš„èƒŒæ™¯ï¼Œé¿å…ä¸å¿…è¦çš„èƒŒæ™¯äº¤ä»£ç›¸å…³çš„å¾€å¤æé—®å’Œå›ç­”ã€‚</li>\n<li>é—®é—®é¢˜æ—¶ï¼Œé™¤äº†é—®å®é™…çš„é—®é¢˜å¤–ï¼Œæœ€å¥½ä¹Ÿè§£é‡Šä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„æ¥ç”±ï¼Œè¿™ä¸ªé—®é¢˜å“ªå„¿æ¥çš„ï¼Œä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªé—®é¢˜æˆ–ç–‘é—®ã€‚è¿™æ ·é€šå¸¸å¯ä»¥å¸®åŠ©å›ç­”è€…æ›´èƒ½æŠ“ä½é—®é¢˜çš„é‡ç‚¹ï¼Œæ›´å‡†ç¡®çš„å›ç­”ã€‚</li>\n<li>å›ç­”é—®é¢˜æ—¶ï¼Œå¯¹äºæ˜¯æˆ–å¦çš„ç–‘é—®å¥ï¼Œå°½é‡å…ˆç›´æ¥äº†å½“çš„å›ç­”ï¼Œç„¶åæœ‰å¿…è¦çš„è¯å†è¡¥å……æˆ–è§£é‡Šã€‚</li>\n<li>å›ç­”è¿›åº¦ä¼°è®¡ç­‰ç›¸å…³é—®é¢˜æ—¶ï¼Œä¸è¦ä½¿ç”¨â€œå·®ä¸å¤šâ€ã€â€œå¿«äº†â€ç­‰æ¨¡ç³Šè¯æ±‡ï¼Œåº”è¯¥å…·ä½“ä¸€ç‚¹ï¼Œæ¯”å¦‚â€œ90% éƒ½åšå®Œäº†ï¼Œè¿˜å‰©xxxï¼Œä¸‹åˆå¯ä»¥å®Œæˆâ€ã€‚</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯<a href=\"https://github.com/inetfuture\" target=\"_blank\" rel=\"external\">å‰è€å¤§</a>å¯¹å·¥ä½œçš„ä¸€äº›æŒ‡å¯¼å’Œè¦æ±‚, æˆ‘åœ¨è¿™é‡Œåšäº†ä¸€äº›æ•´ç†å’Œè¡¥å……ã€‚<br>ä½œä¸ºä¸€åå¼€å‘è€…é¦–å…ˆè¦åšåˆ°çš„æ˜¯æœ‰<code>è´£ä»»å¿ƒ</code>, å…¶æ¬¡æ˜¯<code>Be Professional!</code>ã€‚</p>\n<h1 id=\"å¿…è¯»æ•°æ®\"><a href=\"#å¿…è¯»æ•°æ®\" class=\"headerlink\" title=\"å¿…è¯»æ•°æ®\"></a>å¿…è¯»æ•°æ®</h1><ul>\n<li><a href=\"https://git-scm.com/book/zh/v2\" target=\"_blank\" rel=\"external\">Pro Git</a></li>\n<li><a href=\"http://mislav.net/2013/02/merge-vs-rebase/\" target=\"_blank\" rel=\"external\">Git merge-vs-rebase</a></li>\n<li><a href=\"http://slides.com/inetfuture/how-to-name-things\" target=\"_blank\" rel=\"external\">how-to-name-things</a></li>\n<li><p><a href=\"restful_api.md\">RESTful API</a></p>\n</li>\n<li><p>ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹</p>\n</li>\n<li>ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹</li>\n<li>ã€Šæ•æ·è½¯ä»¶å¼€å‘ : åŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹</li>\n<li>ã€ŠTCP/IP è¯¦è§£ å·1ã€‹</li>\n<li><a href=\"git.md\">Git</a></li>\n<li><p><a href=\"https://github.com/jlevy/the-art-of-command-line/blob/master/README-zh.md\" target=\"_blank\" rel=\"external\">the-art-of-command-line</a></p>\n</li>\n<li><p><a href=\"https://github.com/robbyrussell/oh-my-zsh\" target=\"_blank\" rel=\"external\">Oh My Zsh</a></p>\n</li>\n<li><a href=\"https://trello.com\" target=\"_blank\" rel=\"external\">Trello</a></li>\n<li><a href=\"http://devdocs.io/\" target=\"_blank\" rel=\"external\">DevDocs</a></li>\n</ul>\n<p><a href=\"https://github.com/CraryPrimitiveMan\" target=\"_blank\" rel=\"external\">æ‰©å±•é˜…è¯»</a></p>\n<h1 id=\"å¿…å¤‡å·¥å…·\"><a href=\"#å¿…å¤‡å·¥å…·\" class=\"headerlink\" title=\"å¿…å¤‡å·¥å…·\"></a>å¿…å¤‡å·¥å…·</h1><h2 id=\"VPN\"><a href=\"#VPN\" class=\"headerlink\" title=\"VPN\"></a>VPN</h2><ul>\n<li><a href=\"http://gjsq.me/23186204\" target=\"_blank\" rel=\"external\">GreenVPN</a></li>\n</ul>\n<h2 id=\"Sublime-Text\"><a href=\"#Sublime-Text\" class=\"headerlink\" title=\"Sublime Text\"></a>Sublime Text</h2><h3 id=\"Package-Control\"><a href=\"#Package-Control\" class=\"headerlink\" title=\"Package Control\"></a>Package Control</h3><ul>\n<li>Sublime Text 2</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib2,os,hashlib; h = <span class=\"string\">'df21e130d211cfc94d9b0905775a7c0f'</span> + <span class=\"string\">'1e3d39e33b79698005270310898eea76'</span>; pf = <span class=\"string\">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> os.path.exists(ipp) <span class=\"keyword\">else</span> <span class=\"keyword\">None</span>; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( <span class=\"string\">'http://packagecontrol.io/'</span> + pf.replace(<span class=\"string\">' '</span>, <span class=\"string\">'%20'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), <span class=\"string\">'wb'</span> ).write(by) <span class=\"keyword\">if</span> dh == h <span class=\"keyword\">else</span> <span class=\"keyword\">None</span>; print(<span class=\"string\">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h) <span class=\"keyword\">if</span> dh != h <span class=\"keyword\">else</span> <span class=\"string\">'Please restart Sublime Text to finish installation'</span>)</div></pre></td></tr></table></figure>\n<ul>\n<li>Sublime Text 3</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> urllib.request,os,hashlib; h = <span class=\"string\">'df21e130d211cfc94d9b0905775a7c0f'</span> + <span class=\"string\">'1e3d39e33b79698005270310898eea76'</span>; pf = <span class=\"string\">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( <span class=\"string\">'http://packagecontrol.io/'</span> + pf.replace(<span class=\"string\">' '</span>, <span class=\"string\">'%20'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); print(<span class=\"string\">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h)) <span class=\"keyword\">if</span> dh != h <span class=\"keyword\">else</span> open(os.path.join( ipp, pf), <span class=\"string\">'wb'</span> ).write(by)</div></pre></td></tr></table></figure>\n<p>å¿…å¤‡æ’ä»¶ï¼šGitï¼ŒGitGutterï¼Œknockdownï¼ŒSublimeLinterï¼ŒDocBlockrï¼ŒEditorConfigï¼ŒEmmetï¼ŒFileDiffsï¼ŒSublimeCodeIntel, SidebarEnhancements, PackageSync</p>\n<h1 id=\"åšäº‹åŸåˆ™ã€æ–¹æ³•\"><a href=\"#åšäº‹åŸåˆ™ã€æ–¹æ³•\" class=\"headerlink\" title=\"åšäº‹åŸåˆ™ã€æ–¹æ³•\"></a>åšäº‹åŸåˆ™ã€æ–¹æ³•</h1><ul>\n<li><p>ä¸»åŠ¨æ²Ÿé€šè€Œä¸æ˜¯è¢«åŠ¨åº”ä»˜</p>\n<ul>\n<li>å·¥ä½œä¸Šå­˜åœ¨ä»»ä½•è®©ä½ ä¸çˆ½çš„äº‹æ—¶ï¼Œå°½é‡æå‡ºæ¥ï¼Œæ‰€æœ‰çš„é—®é¢˜éƒ½å¯ä»¥è®¨è®ºã€åè°ƒã€ç¼“è§£ï¼Œç”šè‡³å®Œå…¨é¿å…ï¼Œé•¿æœŸå‹æŠ‘ç€ä¼šå½±å“è‡ªå·±çš„å·¥ä½œæ•ˆç‡å’Œç§¯ææ€§ï¼Œå¯¹ä¸ªäººå’Œå›¢é˜Ÿéƒ½ä¸åˆ©ã€‚</li>\n<li>å¯¹éœ€æ±‚ã€å¼€å‘è§„èŒƒã€ä»£ç ç»„ç»‡ç­‰ç­‰å„æ–¹é¢å­˜åœ¨ä»»ä½•ç–‘é—®æ—¶ï¼Œä¸»åŠ¨è¯¢é—®å’Œè®¨è®ºï¼Œä¸è¦é»˜ä¸ä½œå£°ã€è‡ªä½œä¸»å¼ å¯¼è‡´è¿”å·¥å’Œå»¶è¯¯ã€‚</li>\n<li>è‡ªå·±çš„ä»£ç è¢«åˆ«äºº Review æ—¶ï¼Œå¦‚æœè§‰å¾—æŸæ®µä»£ç å¯èƒ½æœ‰é—®é¢˜æˆ–è€…ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼Œä¸»åŠ¨æå‡ºæ¥è®¨è®ºï¼Œè€Œä¸æ˜¯ç­‰å¾…å®¡æŸ¥è€…è¯¢é—®ã€‚å‰è€…å¯ä»¥ä½¿ Review æ›´é«˜æ•ˆï¼Œæ›´åˆ©äºåŸ¹å…»åŒäº‹é—´çš„ç›¸äº’ä¿¡ä»»ï¼Œåè€…ä¸€æ˜¯æ•ˆç‡ä½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§ä¸è´Ÿè´£ä»»çš„è¡¨ç°ã€‚</li>\n<li>è¿›åº¦å­˜åœ¨é£é™©æ—¶ä¸»åŠ¨çŸ¥ä¼šå…¶ä»–äººï¼Œè€Œä¸æ˜¯é»˜é»˜æ‹–åˆ°æœ€åä¸€åˆ»è¿ç´¯å¤§å®¶åŠ ç­ã€‚</li>\n<li>åšå˜æ›´æ—¶åŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜ï¼Œå¦åˆ™å¯èƒ½ä¼šæµªè´¹é˜Ÿå‹çš„æ—¶é—´å»æ’æŸ¥é—®é¢˜ã€‚ä»£ç çº§åˆ«çš„é—®é¢˜å¯ä»¥é€šè¿‡åœ¨ GitLab ç­‰ä»£ç ç®¡ç†å·¥å…·ä¸Š at å¯¹æ–¹ã€‚</li>\n</ul>\n</li>\n<li><p>è®¤çœŸè´Ÿè´£ï¼Œå…³æ³¨ç»†èŠ‚ï¼Œè¿½æ±‚å“è¶Š</p>\n<ul>\n<li>æ¯ä¸€ä»½éœ€æ±‚éƒ½è¦ç†è§£ä¹‹åå†åŠ¨æ‰‹ï¼Œæ„Ÿè§‰éœ€æ±‚ä¸åˆç†æˆ–ä¸æ˜ç¡®çš„è¦æå‡ºæ¥è®¨è®ºï¼Œå¯¹äº§å“è¦æœ‰è´£ä»»å¿ƒï¼Œä¸ä»…ä»…æ˜¯â€œæŒ‰éƒ¨å°±ç­â€å¾—åšäº‹æƒ…ã€‚</li>\n<li>æäº¤å‰ä»”ç»†æµ‹è¯•è‡ªå·±å®ç°çš„åŠŸèƒ½ï¼Œæ£€æŸ¥ä»£ç ç»†èŠ‚ï¼Œæœ‰äº¤ä»˜é«˜è´¨é‡ä»£ç çš„è´£ä»»å¿ƒï¼Œè€Œä¸æ˜¯ä¾èµ–å…¶ä»–æˆå‘˜å¸®ä½  Reivew æˆ–è€… QA å¸®ä½ å‘ç° bug ã€‚</li>\n<li>ä»£ç ä»…ä»…å¯ä»¥å·¥ä½œæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜è¦å¯è¯»ã€æ˜“æ‰©å±•ã€å¯ç»´æŠ¤ã€å®‰å…¨ã€é«˜æ•ˆï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œè¦ç”¨é«˜æ ‡å‡†è¦æ±‚è‡ªå·±ï¼Œå†™ä»£ç è¦â€œä¸Šå¿ƒâ€ï¼Œä¸è¦æ•·è¡ã€éšæ„ã€‚</li>\n<li>ç»†èŠ‚ä¸ä¸€å®šå†³å®šæˆè´¥ä½†å´å¯ä»¥å……åˆ†ä½“ç°ä¸€ä¸ªäººçš„å·¥ä½œæ€åº¦ï¼Œè¯·è®¤çœŸå¯¹å¾…å„ç§æµç¨‹ã€è§„èŒƒï¼Œæ¯”å¦‚å†™è‹±æ–‡é‚®ä»¶æ—¶ï¼Œä»è¯­æ³•ã€æ ¼å¼åˆ°æ¯ä¸€ä¸ªæ‹¼å†™ã€æ ‡ç‚¹ï¼Œå†æ¯”å¦‚ Commit Message çš„æ ¼å¼ã€Coding Style ç­‰ç­‰ã€‚</li>\n</ul>\n</li>\n<li><p>è‡ªæˆ‘é©±åŠ¨</p>\n<ul>\n<li>è‡ªè§‰æ·±å…¥å­¦ä¹ ç›¸å…³æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ç”¨å¤šå°‘å­¦å¤šå°‘ï¼Œä¸´æ—¶æŠ±ä½›è„šã€‚å‡è®¾ä½ åœ¨åš IOS å¼€å‘ï¼Œå³ä¾¿ç›®å‰æ‰€æœ‰é¡¹ç›®ä»åœ¨ç”¨ Objective-C ï¼Œä½ ä¹Ÿåº”è¯¥åˆ©ç”¨ä¸šä½™æ—¶é—´è‡ªè§‰å»å­¦ä¹  Swift ï¼Œæ—¶åˆ»å‡†å¤‡ç€ã€‚</li>\n<li>ä¸»åŠ¨æ€è€ƒäº§å“çš„èµ°å‘ï¼Œè‡ªè§‰è¿›è¡ŒçŸ¥è¯†å‚¨å¤‡ã€è°ƒç ”ã€‚</li>\n<li>è‡ªè§‰é‡æ„ä½è´¨é‡ä»£ç ï¼Œæ”¹å–„é¡¹ç›®æµç¨‹ï¼Œç­‰ç­‰ï¼Œä¿è¯é¡¹ç›®çš„å¥åº·å‘å±•ã€‚</li>\n</ul>\n</li>\n<li><p>æ¢ä½æ€è€ƒ</p>\n<ul>\n<li>ä½¿ç”¨é‚®ä»¶ã€å¾®ä¿¡ç­‰å·¥å…·äº¤æµæ—¶ä¸€æ¬¡æ€§æä¾›å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼Œé¿å…ä½æ•ˆç‡çš„æ²Ÿé€šï¼Œæƒ³ä¸€ä¸‹ï¼Œæˆ‘è¿™æ ·æè¿°å¯¹æ–¹æ˜¯å¦å¯ä»¥ç†è§£å¹¶ç›´æ¥å›å¤ã€‚</li>\n<li>æ— è®ºæ˜¯åš Code Review è¿˜æ˜¯æäº¤åŠŸèƒ½ç»™ QA æµ‹è¯•ï¼Œå°½è‡ªå·±æœ€å¤§åŠªåŠ›ä¿è¯è´¨é‡ï¼Œåšå¥½è‡ªå·±åˆ†å†…çš„äº‹ï¼Œå‡è½»é˜Ÿå‹çš„è´Ÿæ‹…ã€‚</li>\n<li>ä½œä¸ºå¼€å‘ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¸º leader åˆ†æ‹…å‹åŠ›ï¼Ÿä½œä¸º leader ï¼Œæƒ³ä¸€ä¸‹æˆ‘è¯¥æ€æ ·ä¿ƒè¿›ä¸‹å±å·¥ä½œèƒ½åŠ›çš„ç¨³æ­¥æˆé•¿ï¼Ÿ</li>\n</ul>\n</li>\n<li><p>ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜</p>\n<ul>\n<li>æ€è€ƒé—®é¢˜çš„åŸå› ï¼Œä¸è¦åœç•™äºè¡¨é¢é—®é¢˜çš„ä¿®ä¿®è¡¥è¡¥ã€‚</li>\n</ul>\n</li>\n<li><p>ç”¨æ­£ç¡®çš„æ–¹å¼è§£å†³é—®é¢˜</p>\n<ul>\n<li>å¾ˆå¤šé—®é¢˜éƒ½æœ‰ä¸æ­¢ä¸€ç§çš„è§£å†³åŠæ³•ï¼Œä¸è¦æ»¡è¶³äºä½ æœ€åˆæƒ³åˆ°çš„é‚£ç§ï¼Œä¹Ÿè®¸æœ‰æ›´å¥½çš„å‘¢ï¼Ÿä¸»åŠ¨å»æ€è€ƒç›®å‰çš„æ–¹æ¡ˆå¯ç»´æŠ¤å—ï¼Ÿæ–¹ä¾¿å—ï¼Ÿæ•ˆç‡é«˜å—ï¼Ÿæ™®é€‚å—ï¼Ÿ</li>\n<li>å¤šçœ‹ä¸€äº›æœ€ä½³å®è·µï¼ˆBest Practiceï¼‰çš„èµ„æ–™ï¼Œå¤šçœ‹ä¸€äº›ä¼˜ç§€å¼€æºé¡¹ç›®çš„æºä»£ç ï¼Œå¤šäº†è§£åˆ«äººæ€ä¹ˆåšçš„ä½ æ‰èƒ½åŠæ—¶å‘ç°è‡ªå·±çš„ä¸è¶³ã€‚</li>\n<li>ä¸è¦é‡å¤é€ è½®å­ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¹Ÿè®¸äººå®¶å·²ç»æä¾›äº†ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œåªæ˜¯å› ä¸ºä½ æ²¡æœ‰ä»”ç»†çœ‹æ–‡æ¡£ï¼Œæ‰€ä»¥ä¸çŸ¥é“ã€‚</li>\n</ul>\n</li>\n<li><p>ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥</p>\n<ul>\n<li>å­¦ä¹ æ–°çŸ¥è¯†è¦å°½å¯èƒ½çš„ç³»ç»Ÿã€å…¨é¢ï¼Œä¸è¦åªæ˜¯ä¸ºäº†åº”ä»˜å½“å‰å·¥ä½œç‰‡é¢äº†è§£ã€‚</li>\n<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€æ¡†æ¶æ—¶åº”å°½é‡é€šè¯»å…¶æ–‡æ¡£ï¼Œè‡³å°‘è¦çŸ¥é“å®ƒå¯ä»¥åšä»€ä¹ˆï¼Œæœ‰å“ªäº›é™åˆ¶ï¼Œé‡åˆ°å…·ä½“é—®é¢˜åå¯ä»¥è¿…é€Ÿåˆ°æ–‡æ¡£ä¸­æŸ¥çœ‹ç»†èŠ‚ã€‚</li>\n<li>å¸¸ç”¨çš„æŠ€æœ¯ç‚¹è¦èˆå¾—èŠ±æ—¶é—´ææ¸…æ¥šå…¶è¿è¡ŒåŸç†ã€å†…éƒ¨æœºåˆ¶ï¼Œå…çš„æ¯æ¬¡å‡ºé—®é¢˜éƒ½åƒæ— å¤´è‹è‡ï¼Œåªèƒ½ççŒœã€‚æ¯”å¦‚ Angular.js çš„ directive ç¼–è¯‘æµç¨‹æ˜¯æ€æ ·çš„ï¼ŸNode.js çš„å¼‚æ­¥ IO æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ</li>\n<li>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚å¹³æ—¶è¦æ³¨æ„æ•ˆç‡å·¥å…·çš„ç§¯ç´¯ï¼ŒåŒ…æ‹¬å¥½çš„ä»£ç ç¼–è¾‘å™¨ã€å‘½ä»¤è¡Œå·¥å…·ã€ä»»åŠ¡ç®¡ç†å·¥å…·ã€å„ç§å®ç”¨å°å·¥å…·ç­‰ç­‰ã€‚å¯¹äºä½ å¸¸ç”¨çš„ç¼–è¾‘å™¨æˆ– IDE åº”è¯¥èŠ±ä¸€äº›æ—¶é—´å»ç†Ÿç»ƒå®ƒçš„å¿«æ·é”®ï¼Œå¯»æ‰¾ä¸€äº›å¥½ç”¨çš„æ’ä»¶ï¼Œæ¯•ç«Ÿå·¥ä½œæ¯å¤©éƒ½è¦ç”¨ï¼ŒæŠ•å…¥çš„ç²¾åŠ›ç»å¯¹ç‰©è¶…æ‰€å€¼ã€‚</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"ç¼–å†™æ•´æ´ä»£ç \"><a href=\"#ç¼–å†™æ•´æ´ä»£ç \" class=\"headerlink\" title=\"ç¼–å†™æ•´æ´ä»£ç \"></a>ç¼–å†™æ•´æ´ä»£ç </h1><blockquote>\n<p>Writing clean code requires the disciplined use of a myriad little techniques applied through a painstakingly acquired sense of â€œcleanlinessâ€. This â€œcode-senseâ€ is the key. Some of us are born with it. Some of us have to fight to acquire it. Not only does it let us see whether code is good or bad, but it also shows us the strategy for applying our discipline to transform bad code into clean code.</p>\n</blockquote>\n<h2 id=\"åŸºæœ¬è¦æ±‚\"><a href=\"#åŸºæœ¬è¦æ±‚\" class=\"headerlink\" title=\"åŸºæœ¬è¦æ±‚\"></a>åŸºæœ¬è¦æ±‚</h2><ul>\n<li>Coding Styleï¼Œå¦‚æœæœ‰è¦æ±‚ï¼Œåº”è¯¥ä¸¥æ ¼éµå¾ªï¼Œä»»ä½•ä¾‹å¤–çš„æƒ…å†µéœ€è¦è®¨è®ºå†³å®šã€‚</li>\n<li>å¯è¯»æ€§ï¼Œè¦å®¹æ˜“ç†è§£ï¼Œå‘½åè¦å…·æœ‰è¶³å¤Ÿæè¿°æ€§ï¼Œä¸èƒ½æœ‰æ­§ä¹‰ï¼Œä»£ç è·¯å¾„ã€ç»“æ„è¦æ¸…æ™°ã€ç®€æ´ã€‚</li>\n<li>ä¸€è‡´æ€§ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ ‡è¯†ç¬¦å‘½åã€é”™è¯¯å¤„ç†ã€æ—¥å¿—æ ¼å¼ã€æ–‡ä»¶ç»„ç»‡æ–¹å¼ã€HTTP API æ¥å£è®¾è®¡ã€UI äº¤äº’ç­‰å„ä¸ªæ–¹é¢ï¼Œè¶Šæ˜¯ä¸€è‡´çš„ç³»ç»Ÿè¶Šå®¹æ˜“ä¸Šæ‰‹ï¼Œè¶Šå®¹æ˜“ç»´æŠ¤ï¼Œåä¹‹åˆ™ç»´æŠ¤æˆæœ¬è¶Šé«˜ã€‚</li>\n<li>å¥å£®æ€§ï¼Œè¿›è¡Œå¿…è¦çš„è¾“å…¥éªŒè¯ï¼Œå……åˆ†å¾—è€ƒè™‘è¾¹ç•Œæƒ…å†µï¼Œå¼‚å¸¸å¤„ç†è¦å‘¨å…¨ï¼Œé˜²æ­¢å†…å­˜æ³„éœ²ï¼Œé˜²æ­¢ç«æ€æ¡ä»¶ï¼Œå¤šçº¿ç¨‹å®‰å…¨ï¼Œç­‰ç­‰ã€‚</li>\n<li>æ€§èƒ½ï¼Œè€ƒè™‘æ•°æ®é‡å¤§æˆ–è€…è®¿é—®é¢‘ç¹æ—¶çš„æƒ…å†µï¼Œå¯¹å†…å­˜ã€æ•°æ®åº“çš„ä½¿ç”¨è¦é«˜æ•ˆï¼Œç®—æ³•è¦å°½é‡æœ€ä¼˜ã€‚<ul>\n<li>ä»»ä½•æ¶‰åŠæ•°é‡çš„åœ°æ–¹ï¼Œåœ¨ä¸šåŠ¡åœºæ™¯åˆç†çš„å‰æä¸‹è€ƒè™‘æŠŠæ•°é‡æ”¾å¤§åˆ°æœ€å¤§ï¼Œä¸ºæœ€åçš„æƒ…å†µåšæ‰“ç®—ã€‚</li>\n<li>æ•°æ®åº“ï¼š<ul>\n<li>æ“ä½œåº”å°½é‡æ‰¹é‡è¿›è¡Œï¼ŒåªæŸ¥è¯¢å¿…éœ€çš„å­—æ®µï¼Œå‡å°‘ IO æ¶ˆè€—ã€‚</li>\n<li>ç‰¹åˆ«å¤§çš„æŸ¥è¯¢åº”åœ¨æ•°æ®åº“ä¸­åˆ†é¡µï¼Œç”±ç¨‹åºæ§åˆ¶åˆ†æ‰¹æ¬¡å¤„ç†ï¼Œå…¨é‡å–å‡ºåœ¨å†…å­˜ä¸­è®¡ç®—æˆ–è€…æ ¹æœ¬ä¸è€ƒè™‘æ•°æ®é‡å¤§å°æ˜¯å¸¸è§çš„ä½çº§é”™è¯¯ã€‚</li>\n<li>åˆç†ä½¿ç”¨ç´¢å¼•ã€‚</li>\n</ul>\n</li>\n<li>åŸºæœ¬ä¼˜åŒ–æ€è·¯ï¼š<ul>\n<li>é¢„å…ˆç­›é€‰æ•°æ®ï¼Œå‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚</li>\n<li>ç¼“å­˜è®¡ç®—ç»“æœï¼Œå‡å°‘é‡å¤è®¡ç®—ã€‚</li>\n<li>ä½¿ç”¨é«˜æ•ˆæ•°æ®ç»“æ„ï¼Œç©ºé—´æ¢æ—¶é—´ã€‚</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>å®‰å…¨æ€§ï¼Œè¿›è¡Œå¿…è¦çš„æƒé™æ£€æŸ¥ï¼Œä¸èƒ½è¿‡åº¦ä¿¡ä»»å®¢æˆ·ç«¯è¾“å…¥ã€‚</li>\n<li>DRYï¼ˆDonâ€™t Repeat Yourselfï¼‰åŸåˆ™ï¼Œå¤åˆ¶ã€ç²˜è´´çš„è¡Œä¸ºæ˜¯è¦åšå†³ç¦æ­¢çš„ï¼Œä¸çŸ¥é“å¦‚ä½•å¤ç”¨ä»£ç çš„è¦ä¸»åŠ¨ä¸å…¶ä»–æˆå‘˜è®¨è®ºã€‚</li>\n<li>å•ä¸€èŒè´£åŸåˆ™ï¼Œä¸€ä¸ªç±»ã€æ–‡ä»¶æˆ–è€…æ¨¡å—ä¸èƒ½åšçš„å¤ªå¤šï¼Œä¸èƒ½åšä¸è¯¥å®ƒåšçš„äº‹ï¼Œå¥½çš„è®¾è®¡æ˜¯åªæŠŠä¸€ä»¶äº‹åšå¥½ã€‚</li>\n<li>å¼€æ”¾ã€å°é—­åŸåˆ™ï¼Œè¦æ–¹ä¾¿æ‰©å±•ï¼Œè¦è€ƒè™‘åˆ°ä»¥åçš„éœ€æ±‚ã€‚</li>\n<li>ä»£ç æ”¹åŠ¨æ–¹å¼è¦åˆé€‚ï¼Œä¸èƒ½ä¸€å‘³å¾—å †ç Œä»£ç ï¼Œéœ€è¦é€‚æ—¶åœä¸‹æ¥è¿›è¡Œé‡æ„ã€‚</li>\n<li>ä¿æŒå¹²å‡€ï¼Œä¸èƒ½å­˜åœ¨ä»»ä½•æ— ç”¨çš„æ–‡ä»¶ã€ä»£ç ï¼Œæ‰€æœ‰æ–‡æ¡£ã€æ³¨é‡Šéœ€è¦åŒæ­¥æ›´æ–°ï¼Œä¸èƒ½åŒ…å«æ³¨é‡Šæ‰çš„ä»£ç ï¼Œä¸èƒ½åŒ…å«ä¸´æ—¶è°ƒè¯•ä»£ç ï¼Œä¾‹å¤–æƒ…å†µåº”è¯¥æ·»åŠ æ³¨é‡Šè¯´æ˜ã€‚</li>\n<li>æ‰€æœ‰ Warning éƒ½åº”è¯¥è¢«ç«‹å³ä¿®å¤ï¼Œè§‰å¾—ä¸éœ€è¦ä¿®çš„ï¼Œè®¨è®ºå†³å®šåé€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ç¦ç”¨æ‰ã€‚</li>\n</ul>\n<h2 id=\"è¿›é˜¶è¦æ±‚\"><a href=\"#è¿›é˜¶è¦æ±‚\" class=\"headerlink\" title=\"è¿›é˜¶è¦æ±‚\"></a>è¿›é˜¶è¦æ±‚</h2><ul>\n<li>ä½¿ç”¨å¤šæ€å‡å°‘æˆ–è½¬ç§» <code>if</code> åˆ¤æ–­ï¼Œ(Video)[<a href=\"https://www.youtube.com/watch?v=4F72VULWFvc&amp;index=1&amp;list=PL693EFD059797C21E\" target=\"_blank\" rel=\"external\">https://www.youtube.com/watch?v=4F72VULWFvc&amp;index=1&amp;list=PL693EFD059797C21E</a>]</li>\n</ul>\n<h2 id=\"æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\"><a href=\"#æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\" class=\"headerlink\" title=\"æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§\"></a>æé«˜ä»£ç å¯è¯»æ€§çš„æŠ€å·§</h2><ul>\n<li>å±€éƒ¨å˜é‡å°½é‡å°±è¿‘å£°æ˜ã€‚</li>\n<li>return early (V1)[<a href=\"https://www.airpair.com/php/posts/best-practices-for-modern-php-development#4-2-try-not-to-use-else-\" target=\"_blank\" rel=\"external\">https://www.airpair.com/php/posts/best-practices-for-modern-php-development#4-2-try-not-to-use-else-</a>] (V2)[<a href=\"http://www.codeproject.com/Articles/626403/How-and-Why-to-Avoid-Excessive-Nesting\" target=\"_blank\" rel=\"external\">http://www.codeproject.com/Articles/626403/How-and-Why-to-Avoid-Excessive-Nesting</a>]</li>\n<li>ç›¸å…³çš„ä»£ç å°½é‡æŒ‰ä½¿ç”¨é¡ºåºç»„ç»‡åœ¨ä¸€èµ·ï¼Œå°¤å…¶æ˜¯æ·»åŠ æ–°ä»£ç æ—¶ï¼Œä¸è¦ä¸€å‘³å¾—æ·»åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ã€‚</li>\n<li>å¸ƒå°”å˜é‡å‘½ååº”å°½é‡é‡‡ç”¨è‚¯å®šå½¢åŠ¿ã€‚</li>\n<li>é¿å…ç¡¬ç¼–ç æ•°å­—ã€å­—ç¬¦ä¸²ï¼Œåº”ä½¿ç”¨å¸¸é‡å¹¶ç»™å®ƒä»¬æœ‰æ„ä¹‰çš„åå­—ã€‚</li>\n<li>ä¼ é€’ç®€å•æ•°æ®ç±»å‹æ—¶ï¼Œé€‚å½“æ·»åŠ ä¸´æ—¶å˜é‡æé«˜å¯è¯»æ€§ã€‚</li>\n</ul>\n<h2 id=\"å¦‚ä½•å†™æ³¨é‡Š\"><a href=\"#å¦‚ä½•å†™æ³¨é‡Š\" class=\"headerlink\" title=\"å¦‚ä½•å†™æ³¨é‡Š\"></a>å¦‚ä½•å†™æ³¨é‡Š</h2><ul>\n<li>ä»£ç çš„æ„å›¾åº”è¯¥ç”±ä»£ç è‡ªèº«æ¥è¡¨è¾¾ï¼Œå³æ‰€è°“çš„å¯è¯»æ€§ï¼Œä¸åº”è¯¥ä¾èµ–äºæ³¨é‡Šè¯´æ˜ï¼Œæ‰€ä»¥ä¼˜å…ˆè€ƒè™‘å†™æ›´å¯è¯»çš„ä»£ç ã€‚</li>\n<li>ä»£ç æ„å›¾æ˜æ˜¾çš„æƒ…å†µä¸‹ï¼Œä¸è¦åŠ æ³¨é‡Šé‡å¤è¯´æ˜ã€‚</li>\n<li>ä»¥ä¸‹æ³¨é‡Šæ˜¯åˆç†çš„æˆ–è€…è¯´ä»¥ä¸‹æƒ…å†µéœ€è¦å†™æ³¨é‡Šï¼š<ul>\n<li>çº²è¦æ€§çš„æ³¨é‡Šï¼Œç®€è¦çš„æè¿°æŸä¸€ä¸ªæ–‡ä»¶ã€æŸä¸€ä¸ªç±»æˆ–æŸä¸€ä¸ªæµç¨‹ã€‚</li>\n<li>ç¡®å®æ— æ³•ä»ä»£ç æœ¬èº«æé«˜å¯è¯»æ€§çš„æƒ…å†µï¼Œæ¯”å¦‚å¤æ‚ä¸šåŠ¡é€»è¾‘ã€ç®—æ³•ã€‚</li>\n<li>ä»£ç çš„ä½œç”¨å¹¶ä¸ç›´è§‚æ—¶ï¼Œè§£é‡Šè¿™æ ·åšçš„åŸå› ã€‚</li>\n<li>å­˜åœ¨å¤šç§å¯é€‰æ–¹æ¡ˆæ—¶ï¼Œè§£é‡Šä¸ºä»€ä¹ˆé€‰æ‹©ç°åœ¨è¿™ç§ã€‚</li>\n<li>å› ä¸ºæŸäº›é™åˆ¶è€Œä½¿ä»£ç ä¸ä¸€è‡´ã€ä¸ä¼˜é›…æˆ–å­˜åœ¨å‰¯ä½œç”¨æ—¶ï¼Œåº”æ³¨æ˜åŸå› åŠåæœã€‚</li>\n<li>å‚è€ƒäº†å¤–éƒ¨ä¸€äº›èµ„æ–™æ—¶ï¼Œåº”æ³¨æ˜é“¾æ¥ï¼Œæ–¹ä¾¿å…¶ä»–äººæŸ¥çœ‹ã€‚</li>\n<li>ä¸´æ—¶æ ‡è®°æ³¨é‡Šï¼šTODOã€FIXMEã€HACKã€OPTIMIZEã€REVIEWã€‚</li>\n</ul>\n</li>\n<li>æ³¨é‡Šåº”éšä»£ç æ›´æ–°ã€‚</li>\n</ul>\n<h1 id=\"Coding-Style\"><a href=\"#Coding-Style\" class=\"headerlink\" title=\"Coding Style\"></a>Coding Style</h1><h2 id=\"å‰ç«¯\"><a href=\"#å‰ç«¯\" class=\"headerlink\" title=\"å‰ç«¯\"></a>å‰ç«¯</h2><ul>\n<li><a href=\"https://github.com/Aaaaaashu/Front-End-Style-Guide\" target=\"_blank\" rel=\"external\">Front End Style Guide</a></li>\n<li><a href=\"https://github.com/maban/styleguides\" target=\"_blank\" rel=\"external\">Style Guide Articles</a></li>\n<li><a href=\"http://primercss.io/guidelines/\" target=\"_blank\" rel=\"external\">PrimerCSS</a></li>\n</ul>\n<h3 id=\"è¯­è¨€\"><a href=\"#è¯­è¨€\" class=\"headerlink\" title=\"è¯­è¨€\"></a>è¯­è¨€</h3><ul>\n<li><a href=\"https://github.com/polarmobile/coffeescript-style-guide\" target=\"_blank\" rel=\"external\">Coffeescript</a></li>\n<li><a href=\"https://github.com/airbnb/javascript\" target=\"_blank\" rel=\"external\">ES6</a></li>\n<li><a href=\"https://github.com/yuche/javascript\" target=\"_blank\" rel=\"external\">ES6ä¸­æ–‡ç‰ˆ</a></li>\n<li><a href=\"https://github.com/adamlu/javascript-style-guide\" target=\"_blank\" rel=\"external\">ES6ä¸­æ–‡è°ƒæ•´ç‰ˆ</a></li>\n<li><a href=\"https://github.com/airbnb/javascript/tree/master/es5\" target=\"_blank\" rel=\"external\">ES5</a></li>\n<li><a href=\"https://github.com/sivan/javascript-style-guide/blob/master/es5/README.md\" target=\"_blank\" rel=\"external\">ES5ä¸­æ–‡ç‰ˆ</a></li>\n<li><a href=\"https://github.com/airbnb/css\" target=\"_blank\" rel=\"external\">CSS/SASS/LESS</a></li>\n<li><a href=\"https://github.com/dropbox/css-style-guide\" target=\"_blank\" rel=\"external\">Project CSS</a></li>\n</ul>\n<h3 id=\"æ¡†æ¶\"><a href=\"#æ¡†æ¶\" class=\"headerlink\" title=\"æ¡†æ¶\"></a>æ¡†æ¶</h3><ul>\n<li><a href=\"https://github.com/johnpapa/angular-styleguide\" target=\"_blank\" rel=\"external\">AngularJS</a></li>\n<li><a href=\"https://github.com/mgechev/angularjs-style-guide\" target=\"_blank\" rel=\"external\">AngularJS Best Practice</a></li>\n<li><a href=\"https://github.com/gocardless/angularjs-style-guide\" target=\"_blank\" rel=\"external\">Project AngularJS</a></li>\n</ul>\n<h2 id=\"åç«¯\"><a href=\"#åç«¯\" class=\"headerlink\" title=\"åç«¯\"></a>åç«¯</h2><h3 id=\"è¯­è¨€-1\"><a href=\"#è¯­è¨€-1\" class=\"headerlink\" title=\"è¯­è¨€\"></a>è¯­è¨€</h3><ul>\n<li><a href=\"http://www.php-fig.org/psr/psr-1/\" target=\"_blank\" rel=\"external\">PHP PSR1</a></li>\n<li><a href=\"http://www.php-fig.org/psr/psr-2/\" target=\"_blank\" rel=\"external\">PHP PSR2</a></li>\n<li><a href=\"https://bingohuang.gitbooks.io/effective-go-lite-edition/content/\" target=\"_blank\" rel=\"external\">Effective Go Lite</a></li>\n<li><a href=\"https://golang.org/doc/effective_go.html\" target=\"_blank\" rel=\"external\">Effective Go</a></li>\n<li><a href=\"http://www.chingli.com/coding/effective-go/\" target=\"_blank\" rel=\"external\">Effective Goä¸­æ–‡ç‰ˆ</a></li>\n<li><a href=\"https://medium.com/@IndianGuru/best-practices-for-a-new-go-developer-8660384302fc\" target=\"_blank\" rel=\"external\">Best Practice for Go Developer</a></li>\n</ul>\n<h1 id=\"Code-Review\"><a href=\"#Code-Review\" class=\"headerlink\" title=\"Code Review\"></a>Code Review</h1><h2 id=\"ç›®çš„\"><a href=\"#ç›®çš„\" class=\"headerlink\" title=\"ç›®çš„\"></a>ç›®çš„</h2><ul>\n<li>æé«˜ä»£ç è´¨é‡ï¼ŒæŸ¥æ¼è¡¥ç¼ºã€‚</li>\n<li>ç›¸äº’å­¦ä¹ ã€‚</li>\n<li>ä¿ƒè¿›é¡¹ç›®å†…çŸ¥è¯†æµåŠ¨ï¼Œé˜²æ­¢å¯¹æŸä¸ªä¸ªäººè¿‡åˆ†ä¾èµ–ã€‚</li>\n</ul>\n<h2 id=\"Commit-Message-è§„èŒƒ\"><a href=\"#Commit-Message-è§„èŒƒ\" class=\"headerlink\" title=\"Commit Message è§„èŒƒ\"></a>Commit Message è§„èŒƒ</h2><p>è§„å®šæ ¼å¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(scope): $(subject)</div><div class=\"line\"></div><div class=\"line\">$(description)</div></pre></td></tr></table></figure>\n<ul>\n<li><code>$(scope)</code>ï¼šå¿…éœ€ï¼Œå–å†³äºå…·ä½“é¡¹ç›®ï¼Œä¸€èˆ¬ä¸ºé¡¹ç›®åŠŸèƒ½æ¨¡å—ã€ç»„ä»¶çš„åå­—ï¼Œç”¨æ¥æè¿°æœ¬æ¬¡ commit <strong>å½±å“çš„èŒƒå›´</strong>ï¼Œæ¯”å¦‚ <a href=\"https://github.com/nodejs/node/commits/master\" target=\"_blank\" rel=\"external\">https://github.com/nodejs/node/commits/master</a> ã€‚å½±å“å¤šä¸ªæ¨¡å—ã€ç»„ä»¶å¯ä»¥ç”¨ <code>,</code> éš”å¼€ã€‚ååŠ å…¥é¡¹ç›®çš„æ–°æˆå‘˜åº”éµå¾ªå·²æœ‰çš„ scope çº¦å®šï¼ˆé€šè¿‡ <code>git log</code> å¯ä»¥æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„æäº¤å†å²ï¼‰ï¼Œä¸è¦è‡ªå·±ç¼–é€ ã€‚ä½¿ç”¨é¦–å­—æ¯å°å†™çš„é©¼å³°å‘½åã€‚<code>bug</code> ã€ <code>hotfix</code> ã€ <code>task</code> ã€ <code>change</code> ã€<code>refactor</code> ç­‰ç­‰æè¿°çš„éƒ½ä¸æ˜¯å½±å“çš„å…·ä½“èŒƒå›´ï¼Œè€Œæ˜¯æ”¹åŠ¨ç±»å‹ï¼Œä¸èƒ½ç”¨ä½œ scope ã€‚é™¤å…·ä½“çš„æ¨¡å—ã€ç»„ä»¶åä¹‹å¤–ï¼Œå¯ä»¥ä½¿ç”¨ <code>base</code> è¡¨ç¤ºåŸºç¡€ç»“æ„ã€æ¡†æ¶ç›¸å…³çš„æ”¹åŠ¨ã€‚</li>\n<li><code>$(subject)</code>ï¼šå¿…éœ€ï¼Œ50 ä¸ªå­—ç¬¦å·¦å³çš„ç®€è¦è¯´æ˜ï¼Œé¦–å­—æ¯å°å†™ï¼Œé€šå¸¸æ˜¯åŠ¨å®¾ç»“æ„ï¼Œæè¿°åšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒåŠ¨è¯ç”¨ä¸€èˆ¬ç°åœ¨æ—¶ï¼Œç¦æ­¢å‡ºç° <em>update code</em> ï¼Œ <em>fix bug</em> ç­‰æ— å®é™…æ„ä¹‰çš„æè¿°ï¼Œå¥½çš„ä¾‹å­ï¼š <em>select connector by sorting free memory</em> ï¼ˆä¸éœ€è¦å½¢å¦‚ <em>update about how to select connector â€¦</em> çš„å•°å—¦å†™æ³•ï¼‰, <em>fix sucess tip can not show on IE8</em> ï¼ˆä¸éœ€è¦å½¢å¦‚ <em>fix bug of â€¦</em> çš„å•°å—¦å†™æ³•ï¼‰ã€‚</li>\n<li><code>$(description)</code>ï¼šå¯é€‰ï¼Œè¯¦ç»†è¯´æ˜ï¼Œå»ºè®®ä½¿ç”¨åˆ—è¡¨ç½—åˆ—è¦ç‚¹ã€‚</li>\n</ul>\n<h2 id=\"æµç¨‹\"><a href=\"#æµç¨‹\" class=\"headerlink\" title=\"æµç¨‹\"></a>æµç¨‹</h2><ol>\n<li>æäº¤è€…å‘èµ· topic åˆ†æ”¯åˆ°ç›®æ ‡åˆ†æ”¯çš„ Merge Request ã€‚<ul>\n<li>ä»£ç å˜åŠ¨è¦å°½é‡å°ä¸”ä¸“æ³¨äºä¸€ä¸ªä»»åŠ¡ï¼Œä¸è¦æ”’çš„å¾ˆå¤§ï¼Œæˆ–è€…åšå¤šä¸ªä»»åŠ¡ï¼Œè¦ä¿è¯å®¡æŸ¥è€…å¯ä»¥è¾ƒå¿«ã€è¾ƒå®¹æ˜“çš„ Review ã€‚</li>\n<li>å¦‚æœä¸ç›®æ ‡åˆ†æ”¯æœ‰å†²çªï¼Œæäº¤è€…åº”è¯¥è‡ªå·±ä½¿ç”¨ <code>git rebase</code> æˆ– <code>git merge</code>ï¼ˆå…±äº«åˆ†æ”¯çš„æƒ…å†µï¼‰è§£å†³ã€‚</li>\n<li>äº¤ç»™åˆ«äººä¹‹å‰ä¸€å®šè¦è‡ªå·±å…ˆ Review ä¸€éï¼Œåˆ«äººåªæ˜¯å¸®ä½ æŸ¥æ¼è¡¥ç¼ºï¼Œå¯¹è‡ªå·±çš„ä»£ç è´Ÿè´£ï¼Œä¸è¦æµªè´¹åˆ«äººçš„æ—¶é—´ã€‚</li>\n<li>å‘èµ·åï¼Œè¦åœ¨ GitLab æˆ–è€…å…¶å®ƒ Review å·¥å…·ä¸Š double check å˜æ›´é›†ã€‚</li>\n</ul>\n</li>\n<li>å®¡æŸ¥è€… Review ä»£ç ã€‚<ul>\n<li>å¯¹ <a href=\"#ç¼–å†™æ•´æ´ä»£ç \">ç¼–å†™æ•´æ´çš„ä»£ç </a> ä¸­å„é¡¹è¦æ±‚è¿›è¡Œæ£€æŸ¥</li>\n<li>åœ¨ä»»ä½•æœ‰ç–‘é—®æˆ–å»ºè®®çš„åœ°æ–¹ç•™ commentã€‚</li>\n<li>ä»ä¸­å­¦ä¹ ä¸€äº›å¥½çš„ä¸œè¥¿ã€‚</li>\n<li>å®Œæˆåï¼Œå¦‚æœæœ‰é—®é¢˜éœ€è¦ä¿®å¤ï¼Œç•™ comment â€œWFFâ€ï¼Œè¡¨ç¤ºâ€œwaiting for fixâ€ï¼Œå¦åˆ™è¿›è¡Œç¬¬ 4 æ­¥ã€‚</li>\n</ul>\n</li>\n<li>æäº¤è€…å“åº” comments ã€‚<ul>\n<li>ç¡®å®æœ‰é—®é¢˜çš„ï¼Œä¿®å¤ä¹‹ã€‚å¦‚æœè¯¥åˆ†æ”¯æœªè¢«å…¶ä»–äººä½¿ç”¨ï¼Œåº”ä½¿ç”¨ <code>git commit --amend</code> æäº¤ä»¥å‡å°‘ä¸å¿…è¦çš„ commit å†å²ã€‚</li>\n<li>ä¸åŒæ„çš„ï¼Œè®¨è®ºã€‚</li>\n<li>å®Œæˆåï¼Œç•™ comment â€œFixedâ€ï¼Œå®¡æŸ¥è€…å†æ¬¡æ£€æŸ¥ï¼Œå›åˆ°ç¬¬äºŒæ­¥ã€‚</li>\n</ul>\n</li>\n<li>å®¡æŸ¥è€…ç¡®è®¤æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œå°† Merge Request è½¬å‘ç»™ç›®æ ‡åˆ†æ”¯çš„ç»´æŠ¤è€…è¿›è¡Œåˆå¹¶ã€‚</li>\n</ol>\n<h1 id=\"è°ƒè¯•æŠ€å·§\"><a href=\"#è°ƒè¯•æŠ€å·§\" class=\"headerlink\" title=\"è°ƒè¯•æŠ€å·§\"></a>è°ƒè¯•æŠ€å·§</h1><ul>\n<li>æŸ¥çœ‹æ—¥å¿—ï¼Œæ¯”å¦‚åš PHP Web å¼€å‘è¦çŸ¥é“ Nginxï¼ŒPHP-FPMï¼ŒPHP çš„æ—¥å¿—æ–‡ä»¶çš„ä½ç½®ï¼Œå¿…è¦çš„æ—¶å€™ä»ä¸­å¯»æ‰¾çº¿ç´¢ã€‚ä½¿ç”¨ <code>tail -F file1 file2</code> å‘½ä»¤å¯ä»¥æŒç»­ç›‘æ§å¤šä¸ªæ–‡ä»¶ã€‚</li>\n<li>é€šè¿‡æ·»åŠ ä¸´æ—¶ log è¯­å¥æˆ–æ–­ç‚¹çš„å½¢å¼æ£€æŸ¥ä»£ç è·¯å¾„ï¼Œå¾ˆå¤šæ—¶å€™è°ƒè¯•æ˜¯ä¸ªä½“åŠ›æ´»ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œä¸è¦è½»æ˜“æ”¾å¼ƒæˆ–å¯»æ±‚ä»–äººå¸®åŠ©ã€‚æ£€æŸ¥ä»£ç æ˜¯å¦æŒ‰é¢„æœŸè·¯å¾„æ‰§è¡Œäº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿè¾“å…¥æ•°æ®çš„åŸå› å—ï¼Ÿæˆ–è€…ä¸­é—´ä¸€æ­¥æ•°æ®å¤„ç†æ˜¯é”™çš„ï¼Ÿä»æ•°æ®è¿›å…¥ç³»ç»Ÿå¼€å§‹ä¸€æ­¥æ­¥ä»å‰å¾€ååˆ†æï¼Œç”¨æ’é™¤æ³•é€æ­¥ç¼©å°èŒƒå›´ï¼Œbug å¿…å°†æ— æ‰€éå½¢ã€‚å¦å¤–ï¼Œæœ‰æ—¶å€™ä»£ç è·¯å¾„å¯èƒ½ç‰µæ‰¯åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™ä¸ªæ—¶å€™ä¸è¦ç•æƒ§ï¼Œä»£ç éƒ½æ˜¯äººå†™çš„ï¼Œå°¤å…¶å¼€æºé¡¹ç›®é€šå¸¸è´¨é‡è¾ƒé«˜ï¼Œè¿›å»çœ‹ä¸€ä¸‹ï¼Œé€šå¸¸æ²¡ä½ æƒ³è±¡çš„é‚£ä¹ˆéš¾ã€‚</li>\n<li>ç¡®ä¿è¯»æ‡‚æ—¥å¿—æ¶ˆæ¯ã€å¼‚å¸¸ä¿¡æ¯ã€é”™è¯¯è¾“å‡ºç­‰ï¼Œç‰¹åˆ«æ˜¯è‹±æ–‡å†…å®¹ï¼Œä¸è¦å› ä¸ºæ˜¯è‹±æ–‡ä¸æƒ³è¯»ï¼Œç»“æœéå¸¸æ˜æ˜¾çš„çº¿ç´¢æ‘†åœ¨ä½ é¢å‰ä½ å´è§†è€Œä¸è§ã€‚æ¯”å¦‚å¸¸è§çš„ git é”™è¯¯ï¼Œéƒ½ä¼šæœ‰ç›¸åº”çš„æè¿°ç”šè‡³å»ºè®®çš„è§£å†³åŠæ³•ã€‚å†æ¯”å¦‚åš Web å¼€å‘ï¼Œä¸€ä¸ªé¡µé¢æ‰“ä¸å¼€ï¼Œæœ€èµ·ç ä½ è¦å…ˆçœ‹ä¸€ä¸‹ HTTP Response æ˜¯ä»€ä¹ˆï¼ŒçŠ¶æ€ç ï¼Œbody ç­‰ã€‚å¦‚æœå®åœ¨çœ‹ä¸æ‡‚ï¼Œgoogle ä¹‹ã€‚</li>\n<li>æœ‰æ„è¯†çš„ç»„ç»‡æ•´ç†å¸¸è§é”™è¯¯ï¼Œä¾æ®è¿‡å¾€ç»éªŒå¿«é€Ÿå®šä½é—®é¢˜ã€‚ä¾‹å¦‚ PHP å¼€å‘æ—¶ç¢°åˆ° HTTP 404ï¼ŒåŸºæœ¬å¯ä»¥æ’é™¤ä»£ç é€»è¾‘é—®é¢˜ï¼Œåº”è¯¥æ£€æŸ¥æ‹¼å†™é”™è¯¯ã€Nginx é…ç½®ã€MVC æ¡†æ¶è·¯ç”±é…ç½®ã€æ–‡ä»¶è·¯å¾„ç­‰ã€‚</li>\n<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶æ—¶ï¼Œé‡åˆ°é—®é¢˜è¦çŸ¥é“å»æŸ¥çœ‹å®ƒçš„ issue åˆ—è¡¨ï¼Œä¹Ÿè®¸åˆ«äººä¹Ÿé‡åˆ°äº†åŒæ ·çš„é—®é¢˜å¹¶ä¸”å·²ç»æŠ¥äº† Bug ï¼Œå°¤å…¶æ˜¯ GitHub ä¸Šçš„å¼€æºé¡¹ç›®ã€‚</li>\n</ul>\n<h1 id=\"Research-æŠ€å·§\"><a href=\"#Research-æŠ€å·§\" class=\"headerlink\" title=\"Research æŠ€å·§\"></a>Research æŠ€å·§</h1><p>å·¥ä½œä¸­éš¾å…éœ€è¦å­¦ä¹ æ–°æŠ€æœ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸€äº›æŠ€å·§å¯ä»¥å®è·µã€‚</p>\n<ul>\n<li><p>ä½¿ç”¨ Google æœç´¢ï¼Œé™¤éæ˜¯ç‰¹å®šäºå›½å†…çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¾®ä¿¡å¼€å‘ç›¸å…³ï¼Œä¸è¦ä½¿ç”¨ç™¾åº¦ã€‚</p>\n<p>  ç™¾åº¦æœç´¢è´¨é‡åä½æ˜¯äº‹å®ï¼Œä¸€æ–¹é¢æ˜¯å—é™äºç™¾åº¦è‡ªèº«çš„æŠ€æœ¯ï¼Œå¦ä¸€æ–¹é¢æ˜¯å› ä¸ºä¸­æ–‡æœç´¢æœ‰å¾ˆå¤šåƒåœ¾ç«™ï¼Œä»¥åŠä½è´¨é‡çš„è½¬è½½åšå®¢ã€‚ç»å¸¸å‡ºç°å‰å‡ é¡µéƒ½æ˜¯å„ç§åƒåœ¾ç«™åœ¨é‡å¤åŒä¸€ç¯‡æ–‡ç« ï¼Œè€Œä¸”å¹¿å‘Šæ»¡å¤©é£ï¼Œæ’ç‰ˆç¨€çƒ‚ã€‚è¿˜æœ‰æ–°æµªã€ç½‘æ˜“çš„åšå®¢ï¼Œå¾ˆå¤šéƒ½æ˜¯å¤åˆ¶ç²˜è´´çš„è½¬è½½ï¼Œæ ¼å¼ä¸€å›¢ç³Ÿï¼ŒåŸæ–‡å´ä¸çŸ¥æ‰€è¸ªã€‚æ›´ä¸è¦æå¾ˆå¤šæŠ€æœ¯ä¸­æ–‡èµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼Œæ›´æ–°ä¸åŠæ—¶ï¼Œç¿»è¯‘è´¨é‡ä¸é«˜ç­‰ç­‰é—®é¢˜ã€‚</p>\n<p>  å…»æˆä½¿ç”¨åœ¨ Google ä¸Šä½¿ç”¨è‹±æ–‡å…³é”®è¯æœç´¢çš„å¥½ä¹ æƒ¯ç»å¯¹å¯ä»¥èŠ‚çœä½ çš„å¤§é‡æ—¶é—´å’Œç²¾åŠ›ã€‚</p>\n</li>\n<li><p>æœç´¢æ—¶è¦æ³¨æ„æ—¶æ•ˆæ€§</p>\n<p>  å–å†³äºå…·ä½“çš„æŠ€æœ¯ï¼Œæœç´¢å‡ºæ¥çš„ä¸œè¥¿å¾ˆå¤šå¯èƒ½å·²ç»è¿‡æ—¶äº†ï¼Œè¦æ³¨æ„åŒºåˆ†ï¼Œä¸è¦è¢«è¿‡æ—¶çš„ä¸œè¥¿è¯¯å¯¼ã€‚å¿«é€Ÿæµè§ˆæœç´¢ç»“æœæ—¶æå¸¦çœ‹ä¸€ä¸‹æ—¶é—´ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œæœ‰å¤šæ¡ç›¸ä¼¼ç»“æœæ—¶å½“ç„¶æ˜¯æœ€æ–°çš„ä¼šé è°±ä¸€ç‚¹ã€‚</p>\n</li>\n<li><p>æŒæ¡ä½¿ç”¨æœç´¢å¼•æ“çš„ä¸€äº›å°æŠ€å·§ï¼Œ<a href=\"http://www.lifehack.org/articles/technology/20-tips-use-google-search-efficiently.html\" target=\"_blank\" rel=\"external\">http://www.lifehack.org/articles/technology/20-tips-use-google-search-efficiently.html</a></p>\n</li>\n<li><p>æ³¨æ„æœé›†ã€æ•´ç†ä¸€äº›é«˜è´¨é‡çš„ç½‘ç«™ã€åšå®¢</p>\n<p>  å½“ä½ ç ”ç©¶ä¸€ä¸ªæ–°ä¸œè¥¿çš„æ—¶å€™è‚¯å®šä¼šè¿›è¡Œå¾ˆå¤šæœç´¢ï¼Œå…¶ä¸­æœ‰äº›ç»“æœå¯èƒ½è´¨é‡å¾ˆé«˜ï¼Œè¿™æ—¶å¯ä»¥å¿«é€Ÿæµè§ˆä¸€ä¸‹è¿™ä¸ªç½‘ç«™æˆ–è€…åšå®¢çš„é¦–é¡µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ”¶è—ä»·å€¼ï¼Œæˆ–è€…æœ‰æ²¡æœ‰å…¶å®ƒç›¸å…³æ–‡ç« å€¼å¾—çœ‹ä¸€ä¸‹ã€‚</p>\n</li>\n<li><p>é˜…è¯»æƒå¨ã€ç³»ç»Ÿçš„ä¹¦ç±</p>\n<p>  é€šè¿‡ä½¿ç”¨æœç´¢å¼•æ“æˆ–è€…é˜…è¯»åšå®¢ç­‰é€šå¸¸å¯ä»¥å¯¹æŸç§æŠ€æœ¯æœ‰ä¸ªå¤§æ¦‚äº†è§£ï¼Œæˆ–è€…å¯ä»¥è§£å†³æŸä¸ªå…·ä½“é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºè¾ƒå¤æ‚çš„æŠ€æœ¯ï¼Œç³»ç»Ÿå­¦ä¹ æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œçœ‹ä¹¦å¾€å¾€æ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚å¯ä»¥åˆ°è±†ç“£é˜…è¯»æˆ–è€…å„å¤§ç”µå•†ç½‘ç«™ä¸Šé€šè¿‡è¯„åˆ†æ’åæ¥ç­›é€‰å¥½çš„ä¹¦ç±ã€‚å¦‚æœæ˜¯å›½å¤–ä¹¦ç±ï¼Œå°½é‡é€‰æ‹©è‹±æ–‡åŸç‰ˆï¼Œä¸€å¼€å§‹ä¼šæ¯”è¾ƒåƒåŠ›ï¼Œç†Ÿæ‚‰äº†å°±å¥½äº†ã€‚</p>\n<p>  è·Ÿç­›é€‰æœç´¢ç»“æœä¸€æ ·ï¼Œå°½é‡é€‰æ‹©è¾ƒæ–°çš„ä¹¦ç±ã€‚</p>\n</li>\n<li><p>æŒç»­å…³æ³¨</p>\n<p>  æ¯ä¸ªäººç†è§£æ–°äº‹ç‰©éƒ½æœ‰ä¸€ä¸ªä»æµ…å…¥æ·±çš„è¿‡ç¨‹ï¼Œæ–°å­¦çš„æŠ€æœ¯æœ€å¥½å¯ä»¥ä¸æ–­å¤¯å®ï¼Œåå¤å’€åš¼ï¼Œä¸è¦åœç•™åœ¨è¡¨é¢ã€‚å¯ä»¥é€šè¿‡è®¢é˜…ä¸€äº›é‚®ä»¶åˆ—è¡¨ã€çŸ¥ååšå®¢æ¥ä¸æ–­è¡¥å……çŸ¥è¯†ç›²ç‚¹ï¼Œå­¦ä¹ æœ€ä½³å®è·µï¼Œåæ€è‡ªå·±çš„ä¸è¶³ï¼Œä»¥åŠäº†è§£æŠ€æœ¯çš„æœ€æ–°åŠ¨æ€ã€‚</p>\n</li>\n</ul>\n<h1 id=\"æ²Ÿé€šæŠ€å·§\"><a href=\"#æ²Ÿé€šæŠ€å·§\" class=\"headerlink\" title=\"æ²Ÿé€šæŠ€å·§\"></a>æ²Ÿé€šæŠ€å·§</h1><ul>\n<li>å°½é‡æä¾›å®Œæ•´çš„ä¸Šä¸‹æ–‡ï¼Œå‰å› åæœäº¤ä»£æ¸…æ¥šï¼Œå°¤å…¶æ˜¯å¯¹è¯åˆšå¼€æ—¶çš„æ—¶å€™ï¼Œä¸è¦æ€¥äºåˆ‡å…¥é‡ç‚¹ï¼Œå…ˆç¡®ä¿å¯¹æ–¹äº†è§£è¶³å¤Ÿçš„èƒŒæ™¯ï¼Œé¿å…ä¸å¿…è¦çš„èƒŒæ™¯äº¤ä»£ç›¸å…³çš„å¾€å¤æé—®å’Œå›ç­”ã€‚</li>\n<li>é—®é—®é¢˜æ—¶ï¼Œé™¤äº†é—®å®é™…çš„é—®é¢˜å¤–ï¼Œæœ€å¥½ä¹Ÿè§£é‡Šä¸€ä¸‹è¿™ä¸ªé—®é¢˜çš„æ¥ç”±ï¼Œè¿™ä¸ªé—®é¢˜å“ªå„¿æ¥çš„ï¼Œä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªé—®é¢˜æˆ–ç–‘é—®ã€‚è¿™æ ·é€šå¸¸å¯ä»¥å¸®åŠ©å›ç­”è€…æ›´èƒ½æŠ“ä½é—®é¢˜çš„é‡ç‚¹ï¼Œæ›´å‡†ç¡®çš„å›ç­”ã€‚</li>\n<li>å›ç­”é—®é¢˜æ—¶ï¼Œå¯¹äºæ˜¯æˆ–å¦çš„ç–‘é—®å¥ï¼Œå°½é‡å…ˆç›´æ¥äº†å½“çš„å›ç­”ï¼Œç„¶åæœ‰å¿…è¦çš„è¯å†è¡¥å……æˆ–è§£é‡Šã€‚</li>\n<li>å›ç­”è¿›åº¦ä¼°è®¡ç­‰ç›¸å…³é—®é¢˜æ—¶ï¼Œä¸è¦ä½¿ç”¨â€œå·®ä¸å¤šâ€ã€â€œå¿«äº†â€ç­‰æ¨¡ç³Šè¯æ±‡ï¼Œåº”è¯¥å…·ä½“ä¸€ç‚¹ï¼Œæ¯”å¦‚â€œ90% éƒ½åšå®Œäº†ï¼Œè¿˜å‰©xxxï¼Œä¸‹åˆå¯ä»¥å®Œæˆâ€ã€‚</li>\n</ul>\n"},{"layout":"post","title":"Frontend Summary","subtitle":"Frontend","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n# LazyMan\n\n```javascript\nfunction _LazyMan(name){\n    this.task = [];\n    var self = this;\n    var fn = (function(n){\n        var name = n;\n        return function(){\n            console.log('Hi This is ' + name + '!');\n            self.next();\n        }\n    })(name)\n\n    this.task.push(fn);\n    setTimeout(function(){\n        self.next();\n    }, 0)\n}\n\n_LazyMan.prototype.next = function(){\n    var fn = this.task.shift();\n    fn && fn();\n}\n\n_LazyMan.prototype.eat = function(name){\n    var self = this;\n    var fn = (function(name){\n        return function(){\n            console.log('Eat ' + name + '~');\n            self.next();\n        }\n    })(name)\n    this.task.push(fn);\n    return this;\n}\n\n_LazyMan.prototype.sleep = function(time){\n    var self = this;\n    var fn = (function(time){\n        return function(){\n            setTimeout(function(){\n                console.log('Wake up after ' + time + 's!');\n                self.next();\n            }, time*1000)\n        }\n    })(time);\n    this.task.push(fn);\n    return this;\n}\n\n\nfunction LazyMan(name){\n    return new _LazyMan(name);\n}\n\nLazyMan('Hank').sleep(1).eat('sss')\n\n```\n\n\n\n# å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\n\n> åº”ç”¨ä¼˜åŒ–æ¶‰åŠå„ä¸ªæ–¹é¢ï¼Œå‰ç«¯ä¼˜åŒ–åªæ˜¯å†°å±±ä¸€è§’ã€‚æœ‰äººè¯´ï¼šâ€œç¦»å¼€ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆçš„å‰ç«¯ä¼˜åŒ–éƒ½æ˜¯æ‰¯è›‹â€ï¼Œæˆ‘è§‰å¾—ï¼Œæˆ‘ä»¬å„å¸å…¶èŒï¼Œåšå¥½å‰ç«¯æœ¬èŒå·¥ä½œå°±å¥½ï¼Œä¸è¦å¥½é«˜éª›è¿œã€‚\n\n- ä¼˜åŒ–ç›®çš„\n        1. ç”¨æˆ·è§’åº¦ï¼šé¡µé¢åŠ è½½æ›´å¿«ã€æ“ä½œå“åº”æ›´å¿«ã€ä½“éªŒæ›´å¥½\n        1. æœåŠ¡ç«¯è§’åº¦ï¼šå‡å°‘è¯·æ±‚æ•°ã€å‡å°è¯·æ±‚å¸¦å®½\n    - ä¼˜åŒ–æ–¹æ³•\n        1. é¡µé¢ä¼˜åŒ–\n            - HTTPè¯·æ±‚æ•°\n                1. ä»è®¾è®¡å®ç°å±‚é¢ç®€åŒ–é¡µé¢\n                1. åˆç†è®¾ç½®`HTTP`ç¼“å­˜\n                1. èµ„æºåˆå¹¶ä¸å‹ç¼©(exampleï¼š`CSS Sprites`)\n                1. Inline Imagesï¼ˆå°†å›¾ç‰‡åµŒå…¥åˆ°é¡µé¢æˆ–styleæ–‡ä»¶ï¼‰\n                1. Lazy Load Images\n                1. é¿å…é‡å¤çš„èµ„æºè¯·æ±‚\n            - èµ„æºçš„æ— é˜»å¡åŠ è½½\n                1. CSSæ”¾åœ¨HEADä¸­\n                1. JavaScriptç½®åº•\n                1. Lazy Load Javascriptï¼ˆexampleï¼š`AMD`ï¼‰\n        1. ä»£ç ä¼˜åŒ–\n            - DOMæ“ä½œä¼˜åŒ–\n                1. å‡å°‘DOMæ“ä½œï¼Œå‡å°‘`Reflowå’ŒRepaint`\n                1. HTML Collectionï¼ˆç±»æ•°ç»„é›†åˆã€‚å¹¶ä¸æ˜¯ä¸€ä¸ªé™æ€çš„ç»“æœï¼Œè¡¨ç¤ºçš„ä»…æ˜¯ç‰¹å®šçš„æŸ¥è¯¢ï¼Œæ¯æ¬¡è®¿é—®æ—¶ä¼šé‡æ–°æ‰§è¡ŒæŸ¥è¯¢ã€‚éœ€è¦éå† HTML Collectionæ—¶ï¼Œå°†å®ƒè½¬ä¸ºæ•°ç»„å†è®¿é—®ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ï¼‰\n            - JavaScript\n                1. å‡å°‘ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼ˆexampleï¼šç¼“å­˜å…¨å±€å˜é‡ï¼‰\n                1. æ…ç”¨ `withã€evalã€Function`\n                1. å‡å°‘é—­åŒ…çš„ä½¿ç”¨ï¼ˆæ˜“å†…å­˜æµªè´¹ï¼Œä¸ä»…ä»…æ˜¯å¸¸é©»å†…å­˜ï¼Œé‡è¦çš„æ˜¯ï¼Œä½¿ç”¨ä¸å½“ä¼šé€ æˆæ— æ•ˆå†…å­˜çš„äº§ç”Ÿï¼‰\n                1. ç›´æ¥é‡ã€å±€éƒ¨å˜é‡çš„ä½¿ç”¨ï¼ˆå¯¹è±¡å±æ€§ä»¥åŠæ•°ç»„çš„è®¿é—®éœ€è¦æ›´å¤§çš„å¼€é”€ï¼‰\n                1. å‡å°‘å­—ç¬¦ä¸²æ‹¼æ¥`+`ä½¿ç”¨\n            - CSSé€‰æ‹©ç¬¦ä¼˜åŒ–\n                1. å‡å°‘å±‚çº§ï¼Œå¤šç”¨classï¼ˆæµè§ˆå™¨è§£æCSSæ˜¯ä»å³å¾€å·¦ï¼‰\n            - èµ„æºä¼˜åŒ–\n                1. å›¾ç‰‡æ ¼å¼çš„é€‰æ‹©ï¼ˆéé€æ˜å¤§å›¾å°½é‡ä¸ç”¨pngã€PSä¿å­˜å›¾ç‰‡ä¸º`webæ ¼å¼`ä¸”å‹¾é€‰`è¿ç»­`é€‰é¡¹ï¼‰\n            -  HTMLç»“æ„ä¼˜åŒ–\n                1. ä½¿ç”¨HTML5 DOCTYPE\n                1. æ ‡ç­¾é—­åˆã€ç»“æ„åˆ†ç¦»\n                1. Boolean å±æ€§ä¸éœ€è¦èµ‹å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸ºTrueï¼ˆexampleï¼š`checkedã€selected`ï¼‰\n                1. è¯­ä¹‰åŒ–ã€æ ‡ç­¾ç»Ÿä¸€æ•´æ´\n                1. å‡å°‘æ–‡æœ¬å’Œå…ƒç´ æ··åˆï¼Œå¹¶ä½œä¸ºå¦ä¸€å…ƒç´ çš„å­å…ƒç´ \n                1. é¿å…ä½¿ç”¨`<br />ã€<hr />`\n\n# è¿ç®—ç¬¦ä¼˜å…ˆçº§\n\n> ä¼˜å…ˆçº§\tè¿ç®—ç±»å‹\tå…³è”æ€§\tè¿ç®—ç¬¦\n> 20\tåœ†æ‹¬å·\tn/a\t( â€¦ )\n> 19\tæˆå‘˜è®¿é—®\tä»å·¦åˆ°å³\tâ€¦ . â€¦\n>       éœ€è®¡ç®—çš„æˆå‘˜è®¿é—®\tä»å·¦åˆ°å³\tâ€¦ [ â€¦ ]\n>       new (å¸¦å‚æ•°åˆ—è¡¨)\tn/a\tnew â€¦ ( â€¦ )\n> 18\tå‡½æ•°è°ƒç”¨\tä»å·¦åˆ°å³\tâ€¦ ( â€¦ )\n>       new (æ— å‚æ•°åˆ—è¡¨)\tä»å³åˆ°å·¦\tnew â€¦\n\n```javascript\n    function Foo() {\n        getName = function () { alert (1); };\n        return this;\n    }\n    Foo.getName = function () { alert (2);};\n    Foo.prototype.getName = function () { alert (3);};\n    var getName = function () { alert (4);};\n    function getName() { alert (5);}\n\n    //è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š\n\n    //è°ƒç”¨Fooå¯¹è±¡çš„ä¸€ä¸ªé™æ€æ–¹æ³•\n    Foo.getName();//2\n\n    // è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ\n    getName();//4\n\n    // å› ä¸ºwindowå¯¹è±¡ä¸ŠæŒ‚ç€fooå‡½æ•°ï¼Œfooå‡½æ•°ä½“å†…thisåŒæ ·ä¹Ÿç€å‘ç€windowå¯¹è±¡ï¼Œè€Œfooå‡½æ•°æ‰§è¡ŒåæŠŠwindowå¯¹è±¡è¿”å›ç»™äº†fooçš„æ‰§è¡Œç»“æœä½œä¸ºè¿”å›å€¼\n    // Foo()è¿”å›window Foo()å†…éƒ¨å‡½æ•°è¡¨è¾¾å¼è¦†ç›–getName\n    Foo().getName();//1\n\n    // ç”±äºä¸Šä¸€æ­¥å·²ç»æ”¹å˜äº†getName\n    getName();//1\n\n    // ç”±äºæˆå‘˜è®¿é—®é«˜äºnew(ä¸å¸¦å‚æ•°)ï¼Œ()å‡½æ•°è°ƒç”¨é«˜äºnew(ä¸å¸¦å‚æ•°) => new (Foo.getName()) => new (alert(2)) => 2\n    new Foo.getName();//2\n\n    // new(å¸¦å‚æ•°)é«˜äºå‡½æ•°è°ƒç”¨ï¼Œ=> (new Foo()).getName() => new Foo()è¿”å›newå‡ºæ¥çš„å®ä¾‹ã€‚ä¸Šé¢æ²¡æœ‰getName,æ‰€ä»¥ä¼šå»åŸå‹é“¾ä¸ŠæŸ¥æ‰¾getName\n    new Foo().getName(); //3\n\n    // x => new (new Foo()).getName() => new ((new Foo()).getName()) => 3\n    new new Foo().getName();\n```\n\n```javascript\n    // è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ\n    getName();         // alert( 5 );\n    var getName = function () { alert (4);};\n    function getName() { alert (5);}\n    getName();       //alert(4);\n```\n\n# é—­åŒ…\n\n```javascript\nã€€ã€€var name = \"The Window\";\nã€€ã€€var object = {\nã€€ã€€ã€€ã€€name : \"My Object\",\nã€€ã€€ã€€ã€€getNameFunc : function(){\nã€€ã€€ã€€ã€€ã€€ã€€return function(){\n            // this => window\nã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€return this.name;\nã€€ã€€ã€€ã€€ã€€ã€€};\nã€€ã€€ã€€ã€€}\nã€€ã€€};\nã€€ã€€alert(object.getNameFunc()());//The Window\n\nã€€  var name = \"The Window\";\nã€€ã€€var object = {\nã€€ã€€ã€€ã€€name : \"My Object\",\nã€€ã€€ã€€ã€€getNameFunc : function(){\nã€€ã€€ã€€ã€€ã€€ã€€var that = this;\nã€€ã€€ã€€ã€€ã€€ã€€return function(){\nã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€return that.name;\nã€€ã€€ã€€ã€€ã€€ã€€};\nã€€ã€€ã€€ã€€}\nã€€ã€€};\n    alert(object.getNameFunc()());//My Object\n\n    function fun(n,o) {\n        console.log(o)\n        return {\n            fun:function(m){\n                return fun(m,n);\n            }\n        };\n    }\n\n    var a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);//undefined,?,?,?\n    //undefined,0,0,0 fun(0, unfined) => fun(m){ return fun(m, 0) }\n\n    var b = fun(0).fun(1).fun(2).fun(3);//undefined,?,?,?\n    //fun(0) => undefined => fun(m){ return fun(m, 0) }\n    //fun(1) => 0 => fun(m){ return fun(m, 1) }\n    //fun(2) => 1 => fun(m){ return fun(m, 2) }\n    //fun(3) => 2 => fun(m){ return fun(m, 2) }\n\n    var c = fun(0).fun(1);  c.fun(2);  c.fun(3);//undefined,?,?,?\n    //fun(0) => undefined => fun(m){ return fun(m, 0) }\n    //fun(1) => 0 => fun(m){ return fun(m, 1) }\n    //fun(2) => 1 => fun(m){ return fun(m, 2) }\n    //fun(3) => 1 => fun(m){ return fun(m, 2) }\n```\n\n# Array\n\n> é¦–å…ˆ, mapæ¥å—ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªå›è°ƒå‡½æ•° callback, ä¸€ä¸ªå›è°ƒå‡½æ•°çš„thiså€¼\n> å…¶ä¸­å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•° currentValue, index, arrary;è€Œé¢˜ç›®ä¸­, mapåªä¼ å…¥äº†å›è°ƒå‡½æ•°--parseInt.å…¶æ¬¡, parseInt åªæ¥å—ä¸¤ä¸ªä¸¤ä¸ªå‚æ•° string,\n> radix(åŸºæ•°). radixçš„åˆæ³•åŒºé—´æ˜¯2-36. 0æˆ–æ˜¯é»˜è®¤æ˜¯10.\n```javascript\n    [\"1\", \"2\", \"3\"].map(parseInt)//[1, NaN, NaN]\n```\n\n# double\n\n```javascript\n0.1 + 0.2 = 0.30000000000000004\nMath.round( (.1+.2)*100)/100;\n```\n\n```javascript\nvar name = 'World!';\n(function () {\n    // var name = undefined\n    if (typeof name === 'undefined') {\n        var name = 'Jack';\n        console.log('Goodbye ' + name);\n    } else {\n        console.log('Hello ' + name);\n    }\n})();\n\n```\n","source":"_posts/2017-01-19-frontend-summary.markdown","raw":"---\nlayout:     post\ntitle:      \"Frontend Summary\"\nsubtitle:   \"Frontend\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Frontend\n---\n\n# LazyMan\n\n```javascript\nfunction _LazyMan(name){\n    this.task = [];\n    var self = this;\n    var fn = (function(n){\n        var name = n;\n        return function(){\n            console.log('Hi This is ' + name + '!');\n            self.next();\n        }\n    })(name)\n\n    this.task.push(fn);\n    setTimeout(function(){\n        self.next();\n    }, 0)\n}\n\n_LazyMan.prototype.next = function(){\n    var fn = this.task.shift();\n    fn && fn();\n}\n\n_LazyMan.prototype.eat = function(name){\n    var self = this;\n    var fn = (function(name){\n        return function(){\n            console.log('Eat ' + name + '~');\n            self.next();\n        }\n    })(name)\n    this.task.push(fn);\n    return this;\n}\n\n_LazyMan.prototype.sleep = function(time){\n    var self = this;\n    var fn = (function(time){\n        return function(){\n            setTimeout(function(){\n                console.log('Wake up after ' + time + 's!');\n                self.next();\n            }, time*1000)\n        }\n    })(time);\n    this.task.push(fn);\n    return this;\n}\n\n\nfunction LazyMan(name){\n    return new _LazyMan(name);\n}\n\nLazyMan('Hank').sleep(1).eat('sss')\n\n```\n\n\n\n# å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\n\n> åº”ç”¨ä¼˜åŒ–æ¶‰åŠå„ä¸ªæ–¹é¢ï¼Œå‰ç«¯ä¼˜åŒ–åªæ˜¯å†°å±±ä¸€è§’ã€‚æœ‰äººè¯´ï¼šâ€œç¦»å¼€ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆçš„å‰ç«¯ä¼˜åŒ–éƒ½æ˜¯æ‰¯è›‹â€ï¼Œæˆ‘è§‰å¾—ï¼Œæˆ‘ä»¬å„å¸å…¶èŒï¼Œåšå¥½å‰ç«¯æœ¬èŒå·¥ä½œå°±å¥½ï¼Œä¸è¦å¥½é«˜éª›è¿œã€‚\n\n- ä¼˜åŒ–ç›®çš„\n        1. ç”¨æˆ·è§’åº¦ï¼šé¡µé¢åŠ è½½æ›´å¿«ã€æ“ä½œå“åº”æ›´å¿«ã€ä½“éªŒæ›´å¥½\n        1. æœåŠ¡ç«¯è§’åº¦ï¼šå‡å°‘è¯·æ±‚æ•°ã€å‡å°è¯·æ±‚å¸¦å®½\n    - ä¼˜åŒ–æ–¹æ³•\n        1. é¡µé¢ä¼˜åŒ–\n            - HTTPè¯·æ±‚æ•°\n                1. ä»è®¾è®¡å®ç°å±‚é¢ç®€åŒ–é¡µé¢\n                1. åˆç†è®¾ç½®`HTTP`ç¼“å­˜\n                1. èµ„æºåˆå¹¶ä¸å‹ç¼©(exampleï¼š`CSS Sprites`)\n                1. Inline Imagesï¼ˆå°†å›¾ç‰‡åµŒå…¥åˆ°é¡µé¢æˆ–styleæ–‡ä»¶ï¼‰\n                1. Lazy Load Images\n                1. é¿å…é‡å¤çš„èµ„æºè¯·æ±‚\n            - èµ„æºçš„æ— é˜»å¡åŠ è½½\n                1. CSSæ”¾åœ¨HEADä¸­\n                1. JavaScriptç½®åº•\n                1. Lazy Load Javascriptï¼ˆexampleï¼š`AMD`ï¼‰\n        1. ä»£ç ä¼˜åŒ–\n            - DOMæ“ä½œä¼˜åŒ–\n                1. å‡å°‘DOMæ“ä½œï¼Œå‡å°‘`Reflowå’ŒRepaint`\n                1. HTML Collectionï¼ˆç±»æ•°ç»„é›†åˆã€‚å¹¶ä¸æ˜¯ä¸€ä¸ªé™æ€çš„ç»“æœï¼Œè¡¨ç¤ºçš„ä»…æ˜¯ç‰¹å®šçš„æŸ¥è¯¢ï¼Œæ¯æ¬¡è®¿é—®æ—¶ä¼šé‡æ–°æ‰§è¡ŒæŸ¥è¯¢ã€‚éœ€è¦éå† HTML Collectionæ—¶ï¼Œå°†å®ƒè½¬ä¸ºæ•°ç»„å†è®¿é—®ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ï¼‰\n            - JavaScript\n                1. å‡å°‘ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼ˆexampleï¼šç¼“å­˜å…¨å±€å˜é‡ï¼‰\n                1. æ…ç”¨ `withã€evalã€Function`\n                1. å‡å°‘é—­åŒ…çš„ä½¿ç”¨ï¼ˆæ˜“å†…å­˜æµªè´¹ï¼Œä¸ä»…ä»…æ˜¯å¸¸é©»å†…å­˜ï¼Œé‡è¦çš„æ˜¯ï¼Œä½¿ç”¨ä¸å½“ä¼šé€ æˆæ— æ•ˆå†…å­˜çš„äº§ç”Ÿï¼‰\n                1. ç›´æ¥é‡ã€å±€éƒ¨å˜é‡çš„ä½¿ç”¨ï¼ˆå¯¹è±¡å±æ€§ä»¥åŠæ•°ç»„çš„è®¿é—®éœ€è¦æ›´å¤§çš„å¼€é”€ï¼‰\n                1. å‡å°‘å­—ç¬¦ä¸²æ‹¼æ¥`+`ä½¿ç”¨\n            - CSSé€‰æ‹©ç¬¦ä¼˜åŒ–\n                1. å‡å°‘å±‚çº§ï¼Œå¤šç”¨classï¼ˆæµè§ˆå™¨è§£æCSSæ˜¯ä»å³å¾€å·¦ï¼‰\n            - èµ„æºä¼˜åŒ–\n                1. å›¾ç‰‡æ ¼å¼çš„é€‰æ‹©ï¼ˆéé€æ˜å¤§å›¾å°½é‡ä¸ç”¨pngã€PSä¿å­˜å›¾ç‰‡ä¸º`webæ ¼å¼`ä¸”å‹¾é€‰`è¿ç»­`é€‰é¡¹ï¼‰\n            -  HTMLç»“æ„ä¼˜åŒ–\n                1. ä½¿ç”¨HTML5 DOCTYPE\n                1. æ ‡ç­¾é—­åˆã€ç»“æ„åˆ†ç¦»\n                1. Boolean å±æ€§ä¸éœ€è¦èµ‹å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸ºTrueï¼ˆexampleï¼š`checkedã€selected`ï¼‰\n                1. è¯­ä¹‰åŒ–ã€æ ‡ç­¾ç»Ÿä¸€æ•´æ´\n                1. å‡å°‘æ–‡æœ¬å’Œå…ƒç´ æ··åˆï¼Œå¹¶ä½œä¸ºå¦ä¸€å…ƒç´ çš„å­å…ƒç´ \n                1. é¿å…ä½¿ç”¨`<br />ã€<hr />`\n\n# è¿ç®—ç¬¦ä¼˜å…ˆçº§\n\n> ä¼˜å…ˆçº§\tè¿ç®—ç±»å‹\tå…³è”æ€§\tè¿ç®—ç¬¦\n> 20\tåœ†æ‹¬å·\tn/a\t( â€¦ )\n> 19\tæˆå‘˜è®¿é—®\tä»å·¦åˆ°å³\tâ€¦ . â€¦\n>       éœ€è®¡ç®—çš„æˆå‘˜è®¿é—®\tä»å·¦åˆ°å³\tâ€¦ [ â€¦ ]\n>       new (å¸¦å‚æ•°åˆ—è¡¨)\tn/a\tnew â€¦ ( â€¦ )\n> 18\tå‡½æ•°è°ƒç”¨\tä»å·¦åˆ°å³\tâ€¦ ( â€¦ )\n>       new (æ— å‚æ•°åˆ—è¡¨)\tä»å³åˆ°å·¦\tnew â€¦\n\n```javascript\n    function Foo() {\n        getName = function () { alert (1); };\n        return this;\n    }\n    Foo.getName = function () { alert (2);};\n    Foo.prototype.getName = function () { alert (3);};\n    var getName = function () { alert (4);};\n    function getName() { alert (5);}\n\n    //è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š\n\n    //è°ƒç”¨Fooå¯¹è±¡çš„ä¸€ä¸ªé™æ€æ–¹æ³•\n    Foo.getName();//2\n\n    // è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ\n    getName();//4\n\n    // å› ä¸ºwindowå¯¹è±¡ä¸ŠæŒ‚ç€fooå‡½æ•°ï¼Œfooå‡½æ•°ä½“å†…thisåŒæ ·ä¹Ÿç€å‘ç€windowå¯¹è±¡ï¼Œè€Œfooå‡½æ•°æ‰§è¡ŒåæŠŠwindowå¯¹è±¡è¿”å›ç»™äº†fooçš„æ‰§è¡Œç»“æœä½œä¸ºè¿”å›å€¼\n    // Foo()è¿”å›window Foo()å†…éƒ¨å‡½æ•°è¡¨è¾¾å¼è¦†ç›–getName\n    Foo().getName();//1\n\n    // ç”±äºä¸Šä¸€æ­¥å·²ç»æ”¹å˜äº†getName\n    getName();//1\n\n    // ç”±äºæˆå‘˜è®¿é—®é«˜äºnew(ä¸å¸¦å‚æ•°)ï¼Œ()å‡½æ•°è°ƒç”¨é«˜äºnew(ä¸å¸¦å‚æ•°) => new (Foo.getName()) => new (alert(2)) => 2\n    new Foo.getName();//2\n\n    // new(å¸¦å‚æ•°)é«˜äºå‡½æ•°è°ƒç”¨ï¼Œ=> (new Foo()).getName() => new Foo()è¿”å›newå‡ºæ¥çš„å®ä¾‹ã€‚ä¸Šé¢æ²¡æœ‰getName,æ‰€ä»¥ä¼šå»åŸå‹é“¾ä¸ŠæŸ¥æ‰¾getName\n    new Foo().getName(); //3\n\n    // x => new (new Foo()).getName() => new ((new Foo()).getName()) => 3\n    new new Foo().getName();\n```\n\n```javascript\n    // è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ\n    getName();         // alert( 5 );\n    var getName = function () { alert (4);};\n    function getName() { alert (5);}\n    getName();       //alert(4);\n```\n\n# é—­åŒ…\n\n```javascript\nã€€ã€€var name = \"The Window\";\nã€€ã€€var object = {\nã€€ã€€ã€€ã€€name : \"My Object\",\nã€€ã€€ã€€ã€€getNameFunc : function(){\nã€€ã€€ã€€ã€€ã€€ã€€return function(){\n            // this => window\nã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€return this.name;\nã€€ã€€ã€€ã€€ã€€ã€€};\nã€€ã€€ã€€ã€€}\nã€€ã€€};\nã€€ã€€alert(object.getNameFunc()());//The Window\n\nã€€  var name = \"The Window\";\nã€€ã€€var object = {\nã€€ã€€ã€€ã€€name : \"My Object\",\nã€€ã€€ã€€ã€€getNameFunc : function(){\nã€€ã€€ã€€ã€€ã€€ã€€var that = this;\nã€€ã€€ã€€ã€€ã€€ã€€return function(){\nã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€return that.name;\nã€€ã€€ã€€ã€€ã€€ã€€};\nã€€ã€€ã€€ã€€}\nã€€ã€€};\n    alert(object.getNameFunc()());//My Object\n\n    function fun(n,o) {\n        console.log(o)\n        return {\n            fun:function(m){\n                return fun(m,n);\n            }\n        };\n    }\n\n    var a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);//undefined,?,?,?\n    //undefined,0,0,0 fun(0, unfined) => fun(m){ return fun(m, 0) }\n\n    var b = fun(0).fun(1).fun(2).fun(3);//undefined,?,?,?\n    //fun(0) => undefined => fun(m){ return fun(m, 0) }\n    //fun(1) => 0 => fun(m){ return fun(m, 1) }\n    //fun(2) => 1 => fun(m){ return fun(m, 2) }\n    //fun(3) => 2 => fun(m){ return fun(m, 2) }\n\n    var c = fun(0).fun(1);  c.fun(2);  c.fun(3);//undefined,?,?,?\n    //fun(0) => undefined => fun(m){ return fun(m, 0) }\n    //fun(1) => 0 => fun(m){ return fun(m, 1) }\n    //fun(2) => 1 => fun(m){ return fun(m, 2) }\n    //fun(3) => 1 => fun(m){ return fun(m, 2) }\n```\n\n# Array\n\n> é¦–å…ˆ, mapæ¥å—ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªå›è°ƒå‡½æ•° callback, ä¸€ä¸ªå›è°ƒå‡½æ•°çš„thiså€¼\n> å…¶ä¸­å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•° currentValue, index, arrary;è€Œé¢˜ç›®ä¸­, mapåªä¼ å…¥äº†å›è°ƒå‡½æ•°--parseInt.å…¶æ¬¡, parseInt åªæ¥å—ä¸¤ä¸ªä¸¤ä¸ªå‚æ•° string,\n> radix(åŸºæ•°). radixçš„åˆæ³•åŒºé—´æ˜¯2-36. 0æˆ–æ˜¯é»˜è®¤æ˜¯10.\n```javascript\n    [\"1\", \"2\", \"3\"].map(parseInt)//[1, NaN, NaN]\n```\n\n# double\n\n```javascript\n0.1 + 0.2 = 0.30000000000000004\nMath.round( (.1+.2)*100)/100;\n```\n\n```javascript\nvar name = 'World!';\n(function () {\n    // var name = undefined\n    if (typeof name === 'undefined') {\n        var name = 'Jack';\n        console.log('Goodbye ' + name);\n    } else {\n        console.log('Hello ' + name);\n    }\n})();\n\n```\n","slug":"2017-01-19-frontend-summary","published":1,"updated":"2017-05-27T06:42:03.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxm0011mmt79q7csbut","content":"<h1 id=\"LazyMan\"><a href=\"#LazyMan\" class=\"headerlink\" title=\"LazyMan\"></a>LazyMan</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.task = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> name = n;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hi This is '</span> + name + <span class=\"string\">'!'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        self.next();</div><div class=\"line\">    &#125;, <span class=\"number\">0</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.next = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = <span class=\"keyword\">this</span>.task.shift();</div><div class=\"line\">    fn &amp;&amp; fn();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Eat '</span> + name + <span class=\"string\">'~'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.sleep = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'Wake up after '</span> + time + <span class=\"string\">'s!'</span>);</div><div class=\"line\">                self.next();</div><div class=\"line\">            &#125;, time*<span class=\"number\">1000</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(time);</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _LazyMan(name);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LazyMan(<span class=\"string\">'Hank'</span>).sleep(<span class=\"number\">1</span>).eat(<span class=\"string\">'sss'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\"><a href=\"#å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\" class=\"headerlink\" title=\"å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\"></a>å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•</h1><blockquote>\n<p>åº”ç”¨ä¼˜åŒ–æ¶‰åŠå„ä¸ªæ–¹é¢ï¼Œå‰ç«¯ä¼˜åŒ–åªæ˜¯å†°å±±ä¸€è§’ã€‚æœ‰äººè¯´ï¼šâ€œç¦»å¼€ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆçš„å‰ç«¯ä¼˜åŒ–éƒ½æ˜¯æ‰¯è›‹â€ï¼Œæˆ‘è§‰å¾—ï¼Œæˆ‘ä»¬å„å¸å…¶èŒï¼Œåšå¥½å‰ç«¯æœ¬èŒå·¥ä½œå°±å¥½ï¼Œä¸è¦å¥½é«˜éª›è¿œã€‚</p>\n</blockquote>\n<ul>\n<li>ä¼˜åŒ–ç›®çš„<pre><code>1. ç”¨æˆ·è§’åº¦ï¼šé¡µé¢åŠ è½½æ›´å¿«ã€æ“ä½œå“åº”æ›´å¿«ã€ä½“éªŒæ›´å¥½\n1. æœåŠ¡ç«¯è§’åº¦ï¼šå‡å°‘è¯·æ±‚æ•°ã€å‡å°è¯·æ±‚å¸¦å®½\n</code></pre><ul>\n<li>ä¼˜åŒ–æ–¹æ³•<ol>\n<li>é¡µé¢ä¼˜åŒ–<ul>\n<li>HTTPè¯·æ±‚æ•°<ol>\n<li>ä»è®¾è®¡å®ç°å±‚é¢ç®€åŒ–é¡µé¢</li>\n<li>åˆç†è®¾ç½®<code>HTTP</code>ç¼“å­˜</li>\n<li>èµ„æºåˆå¹¶ä¸å‹ç¼©(exampleï¼š<code>CSS Sprites</code>)</li>\n<li>Inline Imagesï¼ˆå°†å›¾ç‰‡åµŒå…¥åˆ°é¡µé¢æˆ–styleæ–‡ä»¶ï¼‰</li>\n<li>Lazy Load Images</li>\n<li>é¿å…é‡å¤çš„èµ„æºè¯·æ±‚</li>\n</ol>\n</li>\n<li>èµ„æºçš„æ— é˜»å¡åŠ è½½<ol>\n<li>CSSæ”¾åœ¨HEADä¸­</li>\n<li>JavaScriptç½®åº•</li>\n<li>Lazy Load Javascriptï¼ˆexampleï¼š<code>AMD</code>ï¼‰</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>ä»£ç ä¼˜åŒ–<ul>\n<li>DOMæ“ä½œä¼˜åŒ–<ol>\n<li>å‡å°‘DOMæ“ä½œï¼Œå‡å°‘<code>Reflowå’ŒRepaint</code></li>\n<li>HTML Collectionï¼ˆç±»æ•°ç»„é›†åˆã€‚å¹¶ä¸æ˜¯ä¸€ä¸ªé™æ€çš„ç»“æœï¼Œè¡¨ç¤ºçš„ä»…æ˜¯ç‰¹å®šçš„æŸ¥è¯¢ï¼Œæ¯æ¬¡è®¿é—®æ—¶ä¼šé‡æ–°æ‰§è¡ŒæŸ¥è¯¢ã€‚éœ€è¦éå† HTML Collectionæ—¶ï¼Œå°†å®ƒè½¬ä¸ºæ•°ç»„å†è®¿é—®ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ï¼‰</li>\n</ol>\n</li>\n<li>JavaScript<ol>\n<li>å‡å°‘ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼ˆexampleï¼šç¼“å­˜å…¨å±€å˜é‡ï¼‰</li>\n<li>æ…ç”¨ <code>withã€evalã€Function</code></li>\n<li>å‡å°‘é—­åŒ…çš„ä½¿ç”¨ï¼ˆæ˜“å†…å­˜æµªè´¹ï¼Œä¸ä»…ä»…æ˜¯å¸¸é©»å†…å­˜ï¼Œé‡è¦çš„æ˜¯ï¼Œä½¿ç”¨ä¸å½“ä¼šé€ æˆæ— æ•ˆå†…å­˜çš„äº§ç”Ÿï¼‰</li>\n<li>ç›´æ¥é‡ã€å±€éƒ¨å˜é‡çš„ä½¿ç”¨ï¼ˆå¯¹è±¡å±æ€§ä»¥åŠæ•°ç»„çš„è®¿é—®éœ€è¦æ›´å¤§çš„å¼€é”€ï¼‰</li>\n<li>å‡å°‘å­—ç¬¦ä¸²æ‹¼æ¥<code>+</code>ä½¿ç”¨</li>\n</ol>\n</li>\n<li>CSSé€‰æ‹©ç¬¦ä¼˜åŒ–<ol>\n<li>å‡å°‘å±‚çº§ï¼Œå¤šç”¨classï¼ˆæµè§ˆå™¨è§£æCSSæ˜¯ä»å³å¾€å·¦ï¼‰</li>\n</ol>\n</li>\n<li>èµ„æºä¼˜åŒ–<ol>\n<li>å›¾ç‰‡æ ¼å¼çš„é€‰æ‹©ï¼ˆéé€æ˜å¤§å›¾å°½é‡ä¸ç”¨pngã€PSä¿å­˜å›¾ç‰‡ä¸º<code>webæ ¼å¼</code>ä¸”å‹¾é€‰<code>è¿ç»­</code>é€‰é¡¹ï¼‰</li>\n</ol>\n</li>\n<li>HTMLç»“æ„ä¼˜åŒ–<ol>\n<li>ä½¿ç”¨HTML5 DOCTYPE</li>\n<li>æ ‡ç­¾é—­åˆã€ç»“æ„åˆ†ç¦»</li>\n<li>Boolean å±æ€§ä¸éœ€è¦èµ‹å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸ºTrueï¼ˆexampleï¼š<code>checkedã€selected</code>ï¼‰</li>\n<li>è¯­ä¹‰åŒ–ã€æ ‡ç­¾ç»Ÿä¸€æ•´æ´</li>\n<li>å‡å°‘æ–‡æœ¬å’Œå…ƒç´ æ··åˆï¼Œå¹¶ä½œä¸ºå¦ä¸€å…ƒç´ çš„å­å…ƒç´ </li>\n<li>é¿å…ä½¿ç”¨<code>&lt;br /&gt;ã€&lt;hr /&gt;</code></li>\n</ol>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"><a href=\"#è¿ç®—ç¬¦ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h1><blockquote>\n<p>ä¼˜å…ˆçº§    è¿ç®—ç±»å‹    å…³è”æ€§    è¿ç®—ç¬¦<br>20    åœ†æ‹¬å·    n/a    ( â€¦ )<br>19    æˆå‘˜è®¿é—®    ä»å·¦åˆ°å³    â€¦ . â€¦<br>      éœ€è®¡ç®—çš„æˆå‘˜è®¿é—®    ä»å·¦åˆ°å³    â€¦ [ â€¦ ]<br>      new (å¸¦å‚æ•°åˆ—è¡¨)    n/a    new â€¦ ( â€¦ )<br>18    å‡½æ•°è°ƒç”¨    ä»å·¦åˆ°å³    â€¦ ( â€¦ )<br>      new (æ— å‚æ•°åˆ—è¡¨)    ä»å³åˆ°å·¦    new â€¦</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">1</span>); &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">2</span>);&#125;;</div><div class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">3</span>);&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">4</span>);&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">5</span>);&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//è°ƒç”¨Fooå¯¹è±¡çš„ä¸€ä¸ªé™æ€æ–¹æ³•</span></div><div class=\"line\">Foo.getName();<span class=\"comment\">//2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ</span></div><div class=\"line\">getName();<span class=\"comment\">//4</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å› ä¸ºwindowå¯¹è±¡ä¸ŠæŒ‚ç€fooå‡½æ•°ï¼Œfooå‡½æ•°ä½“å†…thisåŒæ ·ä¹Ÿç€å‘ç€windowå¯¹è±¡ï¼Œè€Œfooå‡½æ•°æ‰§è¡ŒåæŠŠwindowå¯¹è±¡è¿”å›ç»™äº†fooçš„æ‰§è¡Œç»“æœä½œä¸ºè¿”å›å€¼</span></div><div class=\"line\"><span class=\"comment\">// Foo()è¿”å›window Foo()å†…éƒ¨å‡½æ•°è¡¨è¾¾å¼è¦†ç›–getName</span></div><div class=\"line\">Foo().getName();<span class=\"comment\">//1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç”±äºä¸Šä¸€æ­¥å·²ç»æ”¹å˜äº†getName</span></div><div class=\"line\">getName();<span class=\"comment\">//1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç”±äºæˆå‘˜è®¿é—®é«˜äºnew(ä¸å¸¦å‚æ•°)ï¼Œ()å‡½æ•°è°ƒç”¨é«˜äºnew(ä¸å¸¦å‚æ•°) =&gt; new (Foo.getName()) =&gt; new (alert(2)) =&gt; 2</span></div><div class=\"line\"><span class=\"keyword\">new</span> Foo.getName();<span class=\"comment\">//2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// new(å¸¦å‚æ•°)é«˜äºå‡½æ•°è°ƒç”¨ï¼Œ=&gt; (new Foo()).getName() =&gt; new Foo()è¿”å›newå‡ºæ¥çš„å®ä¾‹ã€‚ä¸Šé¢æ²¡æœ‰getName,æ‰€ä»¥ä¼šå»åŸå‹é“¾ä¸ŠæŸ¥æ‰¾getName</span></div><div class=\"line\"><span class=\"keyword\">new</span> Foo().getName(); <span class=\"comment\">//3</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// x =&gt; new (new Foo()).getName() =&gt; new ((new Foo()).getName()) =&gt; 3</span></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> Foo().getName();</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ</span></div><div class=\"line\">getName();         <span class=\"comment\">// alert( 5 );</span></div><div class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">4</span>);&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">5</span>);&#125;</div><div class=\"line\">getName();       <span class=\"comment\">//alert(4);</span></div></pre></td></tr></table></figure>\n<h1 id=\"é—­åŒ…\"><a href=\"#é—­åŒ…\" class=\"headerlink\" title=\"é—­åŒ…\"></a>é—­åŒ…</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">ã€€ã€€<span class=\"keyword\">var</span> name = <span class=\"string\">\"The Window\"</span>;</div><div class=\"line\">ã€€ã€€<span class=\"keyword\">var</span> object = &#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">name</span> : <span class=\"string\">\"My Object\"</span>,</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">getNameFunc</span> : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        <span class=\"comment\">// this =&gt; window</span></div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€&#125;;</div><div class=\"line\">ã€€ã€€ã€€ã€€&#125;</div><div class=\"line\">ã€€ã€€&#125;;</div><div class=\"line\">ã€€ã€€alert(object.getNameFunc()());<span class=\"comment\">//The Window</span></div><div class=\"line\"></div><div class=\"line\">ã€€  <span class=\"keyword\">var</span> name = <span class=\"string\">\"The Window\"</span>;</div><div class=\"line\">ã€€ã€€<span class=\"keyword\">var</span> object = &#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">name</span> : <span class=\"string\">\"My Object\"</span>,</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">getNameFunc</span> : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> that.name;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€&#125;;</div><div class=\"line\">ã€€ã€€ã€€ã€€&#125;</div><div class=\"line\">ã€€ã€€&#125;;</div><div class=\"line\">alert(object.getNameFunc()());<span class=\"comment\">//My Object</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">n,o</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(o)</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">fun</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">m</span>)</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> fun(m,n);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> a = fun(<span class=\"number\">0</span>);  a.fun(<span class=\"number\">1</span>);  a.fun(<span class=\"number\">2</span>);  a.fun(<span class=\"number\">3</span>);<span class=\"comment\">//undefined,?,?,?</span></div><div class=\"line\"><span class=\"comment\">//undefined,0,0,0 fun(0, unfined) =&gt; fun(m)&#123; return fun(m, 0) &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> b = fun(<span class=\"number\">0</span>).fun(<span class=\"number\">1</span>).fun(<span class=\"number\">2</span>).fun(<span class=\"number\">3</span>);<span class=\"comment\">//undefined,?,?,?</span></div><div class=\"line\"><span class=\"comment\">//fun(0) =&gt; undefined =&gt; fun(m)&#123; return fun(m, 0) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(1) =&gt; 0 =&gt; fun(m)&#123; return fun(m, 1) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(2) =&gt; 1 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(3) =&gt; 2 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> c = fun(<span class=\"number\">0</span>).fun(<span class=\"number\">1</span>);  c.fun(<span class=\"number\">2</span>);  c.fun(<span class=\"number\">3</span>);<span class=\"comment\">//undefined,?,?,?</span></div><div class=\"line\"><span class=\"comment\">//fun(0) =&gt; undefined =&gt; fun(m)&#123; return fun(m, 0) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(1) =&gt; 0 =&gt; fun(m)&#123; return fun(m, 1) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(2) =&gt; 1 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(3) =&gt; 1 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div></pre></td></tr></table></figure>\n<h1 id=\"Array\"><a href=\"#Array\" class=\"headerlink\" title=\"Array\"></a>Array</h1><blockquote>\n<p>é¦–å…ˆ, mapæ¥å—ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªå›è°ƒå‡½æ•° callback, ä¸€ä¸ªå›è°ƒå‡½æ•°çš„thiså€¼<br>å…¶ä¸­å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•° currentValue, index, arrary;è€Œé¢˜ç›®ä¸­, mapåªä¼ å…¥äº†å›è°ƒå‡½æ•°â€“parseInt.å…¶æ¬¡, parseInt åªæ¥å—ä¸¤ä¸ªä¸¤ä¸ªå‚æ•° string,<br>radix(åŸºæ•°). radixçš„åˆæ³•åŒºé—´æ˜¯2-36. 0æˆ–æ˜¯é»˜è®¤æ˜¯10.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">[<span class=\"string\">\"1\"</span>, <span class=\"string\">\"2\"</span>, <span class=\"string\">\"3\"</span>].map(<span class=\"built_in\">parseInt</span>)<span class=\"comment\">//[1, NaN, NaN]</span></div></pre></td></tr></table></figure></p>\n</blockquote>\n<h1 id=\"double\"><a href=\"#double\" class=\"headerlink\" title=\"double\"></a>double</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">0.1</span> + <span class=\"number\">0.2</span> = <span class=\"number\">0.30000000000000004</span></div><div class=\"line\"><span class=\"built_in\">Math</span>.round( (<span class=\"number\">.1</span>+<span class=\"number\">.2</span>)*<span class=\"number\">100</span>)/<span class=\"number\">100</span>;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'World!'</span>;</div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// var name = undefined</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> name === <span class=\"string\">'undefined'</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> name = <span class=\"string\">'Jack'</span>;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Goodbye '</span> + name);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello '</span> + name);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"LazyMan\"><a href=\"#LazyMan\" class=\"headerlink\" title=\"LazyMan\"></a>LazyMan</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.task = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> name = n;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hi This is '</span> + name + <span class=\"string\">'!'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        self.next();</div><div class=\"line\">    &#125;, <span class=\"number\">0</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.next = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = <span class=\"keyword\">this</span>.task.shift();</div><div class=\"line\">    fn &amp;&amp; fn();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Eat '</span> + name + <span class=\"string\">'~'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.sleep = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'Wake up after '</span> + time + <span class=\"string\">'s!'</span>);</div><div class=\"line\">                self.next();</div><div class=\"line\">            &#125;, time*<span class=\"number\">1000</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(time);</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _LazyMan(name);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LazyMan(<span class=\"string\">'Hank'</span>).sleep(<span class=\"number\">1</span>).eat(<span class=\"string\">'sss'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\"><a href=\"#å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\" class=\"headerlink\" title=\"å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•\"></a>å‰ç«¯ä¼˜åŒ–çš„æ–¹æ³•</h1><blockquote>\n<p>åº”ç”¨ä¼˜åŒ–æ¶‰åŠå„ä¸ªæ–¹é¢ï¼Œå‰ç«¯ä¼˜åŒ–åªæ˜¯å†°å±±ä¸€è§’ã€‚æœ‰äººè¯´ï¼šâ€œç¦»å¼€ç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆçš„å‰ç«¯ä¼˜åŒ–éƒ½æ˜¯æ‰¯è›‹â€ï¼Œæˆ‘è§‰å¾—ï¼Œæˆ‘ä»¬å„å¸å…¶èŒï¼Œåšå¥½å‰ç«¯æœ¬èŒå·¥ä½œå°±å¥½ï¼Œä¸è¦å¥½é«˜éª›è¿œã€‚</p>\n</blockquote>\n<ul>\n<li>ä¼˜åŒ–ç›®çš„<pre><code>1. ç”¨æˆ·è§’åº¦ï¼šé¡µé¢åŠ è½½æ›´å¿«ã€æ“ä½œå“åº”æ›´å¿«ã€ä½“éªŒæ›´å¥½\n1. æœåŠ¡ç«¯è§’åº¦ï¼šå‡å°‘è¯·æ±‚æ•°ã€å‡å°è¯·æ±‚å¸¦å®½\n</code></pre><ul>\n<li>ä¼˜åŒ–æ–¹æ³•<ol>\n<li>é¡µé¢ä¼˜åŒ–<ul>\n<li>HTTPè¯·æ±‚æ•°<ol>\n<li>ä»è®¾è®¡å®ç°å±‚é¢ç®€åŒ–é¡µé¢</li>\n<li>åˆç†è®¾ç½®<code>HTTP</code>ç¼“å­˜</li>\n<li>èµ„æºåˆå¹¶ä¸å‹ç¼©(exampleï¼š<code>CSS Sprites</code>)</li>\n<li>Inline Imagesï¼ˆå°†å›¾ç‰‡åµŒå…¥åˆ°é¡µé¢æˆ–styleæ–‡ä»¶ï¼‰</li>\n<li>Lazy Load Images</li>\n<li>é¿å…é‡å¤çš„èµ„æºè¯·æ±‚</li>\n</ol>\n</li>\n<li>èµ„æºçš„æ— é˜»å¡åŠ è½½<ol>\n<li>CSSæ”¾åœ¨HEADä¸­</li>\n<li>JavaScriptç½®åº•</li>\n<li>Lazy Load Javascriptï¼ˆexampleï¼š<code>AMD</code>ï¼‰</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>ä»£ç ä¼˜åŒ–<ul>\n<li>DOMæ“ä½œä¼˜åŒ–<ol>\n<li>å‡å°‘DOMæ“ä½œï¼Œå‡å°‘<code>Reflowå’ŒRepaint</code></li>\n<li>HTML Collectionï¼ˆç±»æ•°ç»„é›†åˆã€‚å¹¶ä¸æ˜¯ä¸€ä¸ªé™æ€çš„ç»“æœï¼Œè¡¨ç¤ºçš„ä»…æ˜¯ç‰¹å®šçš„æŸ¥è¯¢ï¼Œæ¯æ¬¡è®¿é—®æ—¶ä¼šé‡æ–°æ‰§è¡ŒæŸ¥è¯¢ã€‚éœ€è¦éå† HTML Collectionæ—¶ï¼Œå°†å®ƒè½¬ä¸ºæ•°ç»„å†è®¿é—®ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ï¼‰</li>\n</ol>\n</li>\n<li>JavaScript<ol>\n<li>å‡å°‘ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼ˆexampleï¼šç¼“å­˜å…¨å±€å˜é‡ï¼‰</li>\n<li>æ…ç”¨ <code>withã€evalã€Function</code></li>\n<li>å‡å°‘é—­åŒ…çš„ä½¿ç”¨ï¼ˆæ˜“å†…å­˜æµªè´¹ï¼Œä¸ä»…ä»…æ˜¯å¸¸é©»å†…å­˜ï¼Œé‡è¦çš„æ˜¯ï¼Œä½¿ç”¨ä¸å½“ä¼šé€ æˆæ— æ•ˆå†…å­˜çš„äº§ç”Ÿï¼‰</li>\n<li>ç›´æ¥é‡ã€å±€éƒ¨å˜é‡çš„ä½¿ç”¨ï¼ˆå¯¹è±¡å±æ€§ä»¥åŠæ•°ç»„çš„è®¿é—®éœ€è¦æ›´å¤§çš„å¼€é”€ï¼‰</li>\n<li>å‡å°‘å­—ç¬¦ä¸²æ‹¼æ¥<code>+</code>ä½¿ç”¨</li>\n</ol>\n</li>\n<li>CSSé€‰æ‹©ç¬¦ä¼˜åŒ–<ol>\n<li>å‡å°‘å±‚çº§ï¼Œå¤šç”¨classï¼ˆæµè§ˆå™¨è§£æCSSæ˜¯ä»å³å¾€å·¦ï¼‰</li>\n</ol>\n</li>\n<li>èµ„æºä¼˜åŒ–<ol>\n<li>å›¾ç‰‡æ ¼å¼çš„é€‰æ‹©ï¼ˆéé€æ˜å¤§å›¾å°½é‡ä¸ç”¨pngã€PSä¿å­˜å›¾ç‰‡ä¸º<code>webæ ¼å¼</code>ä¸”å‹¾é€‰<code>è¿ç»­</code>é€‰é¡¹ï¼‰</li>\n</ol>\n</li>\n<li>HTMLç»“æ„ä¼˜åŒ–<ol>\n<li>ä½¿ç”¨HTML5 DOCTYPE</li>\n<li>æ ‡ç­¾é—­åˆã€ç»“æ„åˆ†ç¦»</li>\n<li>Boolean å±æ€§ä¸éœ€è¦èµ‹å€¼ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸ºTrueï¼ˆexampleï¼š<code>checkedã€selected</code>ï¼‰</li>\n<li>è¯­ä¹‰åŒ–ã€æ ‡ç­¾ç»Ÿä¸€æ•´æ´</li>\n<li>å‡å°‘æ–‡æœ¬å’Œå…ƒç´ æ··åˆï¼Œå¹¶ä½œä¸ºå¦ä¸€å…ƒç´ çš„å­å…ƒç´ </li>\n<li>é¿å…ä½¿ç”¨<code>&lt;br /&gt;ã€&lt;hr /&gt;</code></li>\n</ol>\n</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"><a href=\"#è¿ç®—ç¬¦ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h1><blockquote>\n<p>ä¼˜å…ˆçº§    è¿ç®—ç±»å‹    å…³è”æ€§    è¿ç®—ç¬¦<br>20    åœ†æ‹¬å·    n/a    ( â€¦ )<br>19    æˆå‘˜è®¿é—®    ä»å·¦åˆ°å³    â€¦ . â€¦<br>      éœ€è®¡ç®—çš„æˆå‘˜è®¿é—®    ä»å·¦åˆ°å³    â€¦ [ â€¦ ]<br>      new (å¸¦å‚æ•°åˆ—è¡¨)    n/a    new â€¦ ( â€¦ )<br>18    å‡½æ•°è°ƒç”¨    ä»å·¦åˆ°å³    â€¦ ( â€¦ )<br>      new (æ— å‚æ•°åˆ—è¡¨)    ä»å³åˆ°å·¦    new â€¦</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">1</span>); &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">2</span>);&#125;;</div><div class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">3</span>);&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">4</span>);&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">5</span>);&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//è°ƒç”¨Fooå¯¹è±¡çš„ä¸€ä¸ªé™æ€æ–¹æ³•</span></div><div class=\"line\">Foo.getName();<span class=\"comment\">//2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ</span></div><div class=\"line\">getName();<span class=\"comment\">//4</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å› ä¸ºwindowå¯¹è±¡ä¸ŠæŒ‚ç€fooå‡½æ•°ï¼Œfooå‡½æ•°ä½“å†…thisåŒæ ·ä¹Ÿç€å‘ç€windowå¯¹è±¡ï¼Œè€Œfooå‡½æ•°æ‰§è¡ŒåæŠŠwindowå¯¹è±¡è¿”å›ç»™äº†fooçš„æ‰§è¡Œç»“æœä½œä¸ºè¿”å›å€¼</span></div><div class=\"line\"><span class=\"comment\">// Foo()è¿”å›window Foo()å†…éƒ¨å‡½æ•°è¡¨è¾¾å¼è¦†ç›–getName</span></div><div class=\"line\">Foo().getName();<span class=\"comment\">//1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç”±äºä¸Šä¸€æ­¥å·²ç»æ”¹å˜äº†getName</span></div><div class=\"line\">getName();<span class=\"comment\">//1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç”±äºæˆå‘˜è®¿é—®é«˜äºnew(ä¸å¸¦å‚æ•°)ï¼Œ()å‡½æ•°è°ƒç”¨é«˜äºnew(ä¸å¸¦å‚æ•°) =&gt; new (Foo.getName()) =&gt; new (alert(2)) =&gt; 2</span></div><div class=\"line\"><span class=\"keyword\">new</span> Foo.getName();<span class=\"comment\">//2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// new(å¸¦å‚æ•°)é«˜äºå‡½æ•°è°ƒç”¨ï¼Œ=&gt; (new Foo()).getName() =&gt; new Foo()è¿”å›newå‡ºæ¥çš„å®ä¾‹ã€‚ä¸Šé¢æ²¡æœ‰getName,æ‰€ä»¥ä¼šå»åŸå‹é“¾ä¸ŠæŸ¥æ‰¾getName</span></div><div class=\"line\"><span class=\"keyword\">new</span> Foo().getName(); <span class=\"comment\">//3</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// x =&gt; new (new Foo()).getName() =&gt; new ((new Foo()).getName()) =&gt; 3</span></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> Foo().getName();</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// è§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œè‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°æ‰§è¡Œåˆ°å®ƒæ‰€åœ¨çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£é‡Šæ‰§è¡Œ</span></div><div class=\"line\">getName();         <span class=\"comment\">// alert( 5 );</span></div><div class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">4</span>);&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123; alert (<span class=\"number\">5</span>);&#125;</div><div class=\"line\">getName();       <span class=\"comment\">//alert(4);</span></div></pre></td></tr></table></figure>\n<h1 id=\"é—­åŒ…\"><a href=\"#é—­åŒ…\" class=\"headerlink\" title=\"é—­åŒ…\"></a>é—­åŒ…</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">ã€€ã€€<span class=\"keyword\">var</span> name = <span class=\"string\">\"The Window\"</span>;</div><div class=\"line\">ã€€ã€€<span class=\"keyword\">var</span> object = &#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">name</span> : <span class=\"string\">\"My Object\"</span>,</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">getNameFunc</span> : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        <span class=\"comment\">// this =&gt; window</span></div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.name;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€&#125;;</div><div class=\"line\">ã€€ã€€ã€€ã€€&#125;</div><div class=\"line\">ã€€ã€€&#125;;</div><div class=\"line\">ã€€ã€€alert(object.getNameFunc()());<span class=\"comment\">//The Window</span></div><div class=\"line\"></div><div class=\"line\">ã€€  <span class=\"keyword\">var</span> name = <span class=\"string\">\"The Window\"</span>;</div><div class=\"line\">ã€€ã€€<span class=\"keyword\">var</span> object = &#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">name</span> : <span class=\"string\">\"My Object\"</span>,</div><div class=\"line\">ã€€ã€€ã€€ã€€<span class=\"attr\">getNameFunc</span> : <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class=\"keyword\">return</span> that.name;</div><div class=\"line\">ã€€ã€€ã€€ã€€ã€€ã€€&#125;;</div><div class=\"line\">ã€€ã€€ã€€ã€€&#125;</div><div class=\"line\">ã€€ã€€&#125;;</div><div class=\"line\">alert(object.getNameFunc()());<span class=\"comment\">//My Object</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fun</span>(<span class=\"params\">n,o</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(o)</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">fun</span>:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">m</span>)</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> fun(m,n);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> a = fun(<span class=\"number\">0</span>);  a.fun(<span class=\"number\">1</span>);  a.fun(<span class=\"number\">2</span>);  a.fun(<span class=\"number\">3</span>);<span class=\"comment\">//undefined,?,?,?</span></div><div class=\"line\"><span class=\"comment\">//undefined,0,0,0 fun(0, unfined) =&gt; fun(m)&#123; return fun(m, 0) &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> b = fun(<span class=\"number\">0</span>).fun(<span class=\"number\">1</span>).fun(<span class=\"number\">2</span>).fun(<span class=\"number\">3</span>);<span class=\"comment\">//undefined,?,?,?</span></div><div class=\"line\"><span class=\"comment\">//fun(0) =&gt; undefined =&gt; fun(m)&#123; return fun(m, 0) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(1) =&gt; 0 =&gt; fun(m)&#123; return fun(m, 1) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(2) =&gt; 1 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(3) =&gt; 2 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> c = fun(<span class=\"number\">0</span>).fun(<span class=\"number\">1</span>);  c.fun(<span class=\"number\">2</span>);  c.fun(<span class=\"number\">3</span>);<span class=\"comment\">//undefined,?,?,?</span></div><div class=\"line\"><span class=\"comment\">//fun(0) =&gt; undefined =&gt; fun(m)&#123; return fun(m, 0) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(1) =&gt; 0 =&gt; fun(m)&#123; return fun(m, 1) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(2) =&gt; 1 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div><div class=\"line\"><span class=\"comment\">//fun(3) =&gt; 1 =&gt; fun(m)&#123; return fun(m, 2) &#125;</span></div></pre></td></tr></table></figure>\n<h1 id=\"Array\"><a href=\"#Array\" class=\"headerlink\" title=\"Array\"></a>Array</h1><blockquote>\n<p>é¦–å…ˆ, mapæ¥å—ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªå›è°ƒå‡½æ•° callback, ä¸€ä¸ªå›è°ƒå‡½æ•°çš„thiså€¼<br>å…¶ä¸­å›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•° currentValue, index, arrary;è€Œé¢˜ç›®ä¸­, mapåªä¼ å…¥äº†å›è°ƒå‡½æ•°â€“parseInt.å…¶æ¬¡, parseInt åªæ¥å—ä¸¤ä¸ªä¸¤ä¸ªå‚æ•° string,<br>radix(åŸºæ•°). radixçš„åˆæ³•åŒºé—´æ˜¯2-36. 0æˆ–æ˜¯é»˜è®¤æ˜¯10.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">[<span class=\"string\">\"1\"</span>, <span class=\"string\">\"2\"</span>, <span class=\"string\">\"3\"</span>].map(<span class=\"built_in\">parseInt</span>)<span class=\"comment\">//[1, NaN, NaN]</span></div></pre></td></tr></table></figure></p>\n</blockquote>\n<h1 id=\"double\"><a href=\"#double\" class=\"headerlink\" title=\"double\"></a>double</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">0.1</span> + <span class=\"number\">0.2</span> = <span class=\"number\">0.30000000000000004</span></div><div class=\"line\"><span class=\"built_in\">Math</span>.round( (<span class=\"number\">.1</span>+<span class=\"number\">.2</span>)*<span class=\"number\">100</span>)/<span class=\"number\">100</span>;</div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"string\">'World!'</span>;</div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// var name = undefined</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> name === <span class=\"string\">'undefined'</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> name = <span class=\"string\">'Jack'</span>;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Goodbye '</span> + name);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello '</span> + name);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Javascript","subtitle":"Javascript","date":"2016-05-23T07:08:00.000Z","author":"Asher","header-img":"post-bg-gulp.jpg","header-mask":0.3,"catalog":true,"_content":"\n# æ•°æ®ç±»å‹ï¼š\n\n- 6ç§åŸå§‹å€¼ï¼ˆä¸å¯å˜ã€‚â€œé™¤éé‡ç½®å½“å‰å˜é‡ï¼Œå¦åˆ™ä¸èƒ½æ”¹å˜å…ƒç´ å€¼ã€‚â€ï¼‰\n    1. Null(åªæœ‰ä¸€ä¸ªå€¼ï¼š null)\n    1. Undefined(ä¸€ä¸ªæ²¡æœ‰è¢«èµ‹å€¼çš„å˜é‡ä¼šæœ‰ä¸ªé»˜è®¤å€¼ undefined)\n    1. Number\n    1. Boolean(ä¸¤ä¸ªå€¼ï¼štrue å’Œ false)\n    1. String\n    1. [Symbol](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol)\n- å’ŒObject(å¯¹è±¡æŒ‡å†…å­˜ä¸­çš„å¯ä»¥è¢«æ ‡è¯†ç¬¦å¼•ç”¨çš„ä¸€å—åŒºåŸŸ)\n\n- æ•°æ®ç±»å‹æ£€æµ‹\n    - typeof(å¯¹å˜é‡æˆ–å€¼è°ƒç”¨ typeof è¿ç®—ç¬¦å°†è¿”å›(å­—ç¬¦ä¸²)ä¸‹åˆ—å€¼ä¹‹ä¸€)\n        1. undefined - Undefinedç±»å‹\n        1. number - Numberç±»å‹\n        1. boolean - Booleanç±»å‹\n        1. string - Stringç±»å‹\n        1. symbol - Symbolç±»å‹(ECMAScript6æ–°å¢)\n        1. function - å‡½æ•°å¯¹è±¡([[Call]]åœ¨ECMA-262æ¡æ¬¾ä¸­å®ç°äº†)\n        1. object - å¼•ç”¨ç±»å‹ æˆ– Nullç±»å‹\n    ```javascript\n    typeof(Function) // function (Functionæ˜¯å‡½æ•°å¯¹è±¡)\n    typeof(new Function) // function (new Functionä¹Ÿæ˜¯æ˜¯å‡½æ•°å¯¹è±¡ï¼ŒåŒç­‰ï¼švar func = function(){})\n    typeof(Array) // function (Arrayæ˜¯å‡½æ•°å¯¹è±¡)\n    typeof(new Array) // objectï¼ˆå®ä¾‹åŒ–çš„Arrayå°±æ˜¯objectï¼‰\n    ```\n\n- å˜é‡èµ‹å€¼æ—¶å€™çš„è¿”å›å€¼ï¼š\n    ```javascript\n    var name = 123; // è¿”å›undefined\n    name = 456; // è¿”å›456\n    ```\n    > ç»“è¯­ï¼šå®šä¹‰å˜é‡çš„æ—¶å€™èµ‹å€¼è¿”å›:undefined\n    > ç»™å·²å£°æ˜å˜é‡èµ‹å€¼æ—¶å€™è¿”å›å½“å‰èµ‹å€¼ã€‚\n\n- è·å–å…ƒç´ è·ç¦»é¡µé¢çš„topã€left\n    ```javascript\n    function getRec(ele) {\n        var _t = document.documentElement.clientTop,\n            _l = document.documentElement.clientLeft,\n            rect = ele.getBoundingClientRect();\n        return {\n            top: rect.top - _t,\n            right: rect.right - _l,\n            bottom: rect.bottom - _t,\n            left: rect.left - _l\n        }\n    }\n    ```\n    > æ³¨æ„ï¼šIEã€Firefox3+ã€Opera9.5ã€Chromeã€Safariæ”¯æŒï¼Œåœ¨IEä¸­ï¼Œé»˜è®¤åæ ‡ä»(2,2)å¼€å§‹è®¡ç®—ï¼Œå¯¼è‡´æœ€ç»ˆè·ç¦»æ¯”å…¶ä»–æµè§ˆå™¨å¤šå‡ºä¸¤ä¸ªåƒç´ ï¼Œæˆ‘ä»¬éœ€è¦åšä¸ªå…¼å®¹ã€‚\n\n- æ•°å­—çš„å›ºå®šå°æ•°ä½æ•°\n    ```javascript\n    var a=8.88888,\n        b=8;\n    console.log(a.toFixed(2)); // 8.89 æˆ–è€… 8.88\n    console.log(b.toFixed(2)); // 8.00\n    ```\n\n- jsæ˜¯ç¼–è¯‘è¯­è¨€ï¼Œæ•°ç»„é•¿åº¦æ˜¯éšæ—¶ç¨‹åºå˜åŒ–è€Œå˜åŒ–çš„\n    ```javascript\n    var arr = [0, 1];\n    arr[3] = 3;\n    console.log(arr[2]); // undefined\n    console.log(arr.length); // 4\n    ```\n\n- çŸ©é˜µçš„è½¬ç½®\n    ```javascript\n    var arr = [ // å®šä¹‰ä¸€ä¸ªçŸ©é˜µï¼ˆäºŒç»´æ•°æ®ï¼‰\n        [1, 2, 3, 4],\n        [5, 6, 6, 6],\n        [7, 6, 7, 8],\n        [8, 5, 3, 3]\n    ];\n\n    function changeArr(arr) { // çŸ©é˜µè½¬ç½®å‡½æ•°\n        var c;\n        for (var i = 1; i < arr.length; i++) {\n            for (var j = 0; j < i; j++) {\n                c = arr[i][j];\n                arr[i][j] = arr[j][i];\n                arr[j][i] = c;\n            }\n        }\n    }\n    changeArr(arr);\n    console.table(arr);\n    ```\n\n- å†’æ³¡æ’åºæ–¹æ³•\n    ```javascript\n    // ç¬¬ä¸€è½®æ˜¯å¯¹n-1çš„ä½ç½®å®šä½\n    // ç¬¬äºŒè½®æ˜¯ æ¯ä¸€ä¸ªä½ç½®çš„æ•°çš„ ç¡®å®š\n    var arr = [1, 100, 4, 5, 6, 99, 111, 112, 113, 133],\n        temp = 0,\n        flag = false;\n    for (var i = 0; i < arr.length - 1; i++) {\n        document.writeln('come');\n        for (var j = 0; j < arr.length - 1 - i; j++) {\n            if (arr[j] > arr[j + 1]) {\n                temp = arr[j];\n                arr[j] = arr[j + 1];\n                arr[j + 1] = temp;\n                flag = true;\n            }\n        }\n        if (flag) {\n            flag = false;\n        } else {\n            console.log('brak')\n            break;\n        }\n    }\n    for (var i = 0; i < arr.length; i++) {\n        document.writeln(arr[i]);\n    };\n    ```\n\n- äºŒåˆ†æŸ¥æ‰¾\n    ```javascript\n    var arr = [41, 55, 76, 87, 88, 99, 123, 432, 546, 577, 688, 786];\n\n    function binarySearch(arr, wantVal, leftIndex, rightIndex) {\n        console.log('leftIndex: ' + leftIndex + ' rightIndex: ' + rightIndex)\n        if (leftIndex > rightIndex) {\n            document.writeln('SORRY: æ‰¾ä¸åˆ° ' + wantVal + ' ï¼');\n            return;\n        }\n        var minIndex = Math.floor((leftIndex + rightIndex) / 2);\n        if (arr[minIndex] > wantVal) {\n            binarySearch(arr, wantVal, leftIndex, minIndex - 1);\n        } else if (arr[minIndex] < wantVal) {\n            binarySearch(arr, wantVal, minIndex + 1, rightIndex);\n        } else {\n            document.writeln('æ‰¾åˆ°äº† ' + wantVal + ' ,ä¸‹æ ‡ä¸º' + minIndex);\n        }\n    }\n    binarySearch(arr, 99, 0, arr.length - 1);\n    ```\n\n- js å¯¹è±¡è®¿é—®å±æ€§çš„äºŒç§æ–¹å¼\n    ```javascript\n    function Person () {};\n    var new1 = new Person ();\n    new1.name='å†¯æ°';\n    new1.age=21;\n    window.alert(new1.name);\n    window.alert(new1[\"age\"]);\n    ```\n\n- js delete åªèƒ½ åˆ é™¤å¯¹è±¡çš„å±æ€§\n    ```javascript\n    function Person () {};\n    var me = new Person();\n    me.name='å†¯æ°';\n    console.log(me.name);\n    delete me.name;\n    console.log(me.name);\n    ```\n\n- åœ¨js ä¸­ å¯¹è±¡çš„æ–¹æ³•ä¸æ˜¯é€šç”¨çš„ å¦‚æœç”Ÿæˆnä¸ªå¯¹è±¡ é‚£ä¹ˆå°±æœ‰nä¸ªå†…å­˜å †æ ˆ\n    ```javascript\n    // js ä¸­ ä¸€åˆ‡ç±» ç»§æ‰¿è‡ª Object è€ŒObject æœ‰propotype\n    // ä¸‹é¢æ˜¯è§£å†³åŠæ³• prototype è·å¾—ç±»çš„staticæ€§è´¨\n    function God() {}\n    God.prototype.shout = function() {\n        window.alert('å°ç‹—å«');\n    }\n    var dog1 = new God();\n    var dog2 = new God();\n    dog1.shout();\n    dog2.shout();\n    ```\n\n- å¯¹è±¡\n    ```javascript\n    // jsé‡Œè¦æƒ³åˆ›å»ºå¯¹è±¡ é™¤äº†ä¸€èˆ¬çš„åˆ›å»ºæ–¹å¼ è¿˜æœ‰ é€šè¿‡Object æ–¹å¼åˆ›å»ºç±»\n    // Object ç±»æ˜¯æ‰€æœ‰jsç±»çš„åŸºç±» Object å°±è¡¨ç¤ºå¯¹è±¡ï¼ˆä¸€åˆ‡çš„å¯¹è±¡ï¼‰\n    var p1 = new Object();\n    p1.name = 'fj';\n    window.alert(p1.name);\n    window.alert(p1.constructor);\n\n    // åŸå‹é“¾ä¸Šæ–°å¢é»˜è®¤å¯¹è±¡æ–¹æ³•\n    var num = new Number(1);\n    var num2 = 10;\n    window.alert(num.constructor);\n    window.alert(num2.constructor);\n    // ä¸Šé¢2ä¸ªå¼¹å‡ºæ˜¯ä¸€æ ·çš„\n    Number.prototype.add = function(a) { //prototypeæ˜¯å±äºç±»çš„\n        return this + a;\n    }\n    window.alert(num.add(1).add(2));\n\n    // å°å®éªŒ ä¸ºArray æ·»åŠ  find(val) æ–¹æ³•\n    Array.prototype.find = function(a) {\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] == a) {\n                return i;\n            }\n        }\n        return 'find fail.';\n    }\n    var arr = [0, 1, 2, 77, 4, 5];\n    window.alert(arr.find(77));\n    ```\n\n- å½“éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²çš„æ—¶å€™é»˜è®¤è°ƒç”¨toString\n\n    ```javascript\n    function Dog(name,breed,color,sex) {\n       this.name=name;\n       this.breed=breed;\n       this.color=color;\n       this.sex=sex;\n    }\n    Dog.prototype.toString = function dogToString() {\n      var ret = \"Dog \" + this.name + \" is a \" + this.sex + \" \" + this.color + \" \" + this.breed;\n      return ret;\n    }\n\n    var theDog = new Dog(\"Gabby\",\"Lab\",\"chocolate\",\"female\");\n\n    console.log(theDog+'')\n    ```\n\n- prototype çš„æ–¹æ³•ä¸èƒ½è®¿é—®ç§æœ‰å±æ€§å’Œæ–¹æ³•\n    ```javascript\n    function Person() {\n        var name = 'fj'; //ç§æœ‰\n        this.age = 21;\n    }\n    Person.prototype.showName = function() {\n        window.alert(this.name);\n    }\n    Person.prototype.showAge = function() {\n        window.alert(this.age);\n    }\n    var p1 = new Person();\n    p1.showName();\n    p1.showAge();\n    ```\n\n- ç»§æ‰¿\n    ```javascript\n    // js é‡Œé¢æ˜¯å¯¹è±¡å†’å……æ¥ç»§æ‰¿çš„ ä¸ç®—æ˜¯çœŸæ­£çš„ç»§æ‰¿ é€šè¿‡å¯¹è±¡å†’å…… jså¯ä»¥å®ç°å¤šé‡ç»§æ‰¿å’Œç»§æ‰¿çš„æ•ˆæœ ä½†æ˜¯æ²¡æœ‰Extendså…³é”®å­—\n    function Father(name, age) {\n        this.name = name;\n        this.age = age;\n        this.show = function() {\n            window.alert(this.name + '---' + this.age);\n        }\n    }\n\n    function Son(name, age) {\n        this.Father = Father;\n        this.Father(name, age); //é€šè¿‡å¯¹è±¡å†’å…… å®ç°ç»§æ‰¿ è¿™ä¸€å¥éå¸¸é‡è¦ jsæ˜¯åŠ¨æ€è¯­è¨€ ä¸æ˜¯ç¼–è¯‘è¯­è¨€ è¦æ‰§è¡Œæ‰ä¼šåˆ†é…ç©ºé—´\n    }\n    var me = new Son('fj', 21);\n    window.alert(me.name);\n    me.show();\n    ```\n\n\n- é‡è½½\n    ```javascript\n    // jsä»å¸¸ç†æ¥è¯´æ˜¯ä¸æ”¯æŒé‡è½½çš„ ä½†æ˜¯åˆå¯ä»¥è¯´æ˜¯å¤©ç„¶æ”¯æŒé‡è½½ å› ä¸ºjså¤©ç„¶æ”¯æŒå¯å˜å‚æ•° è€Œä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡arguments[]æ•°ç»„çš„é•¿åº¦åˆ¤æ–­ è€Œåšå‡ºç›¸åº”çš„å¤„ç†\n    ```\n\n- é—­åŒ…\n    ```javascript\n    // é—­åŒ…å®é™…ä¸Šè®¾è®¡ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä½•æ—¶è¢«gcå¤„ç†çš„é—®é¢˜ é—­åŒ…å’Œgcæ˜¯ç›¸å…³è”çš„\n    ```\n\n\n- æ•°ç»„é•¿åº¦\n    ```javascript\n    // æ•°ç»„çš„é•¿åº¦æ˜¯æ ¹æ®ä¸‹æ ‡çš„æœ€å¤§è€Œç¡®å®šçš„\n    var arr = new Array();\n    arr['a'] = 1;\n    arr['b'] = 2;\n    window.alert(arr.length); // æ‰“å‡º0\n    ```\n\n\n* å¦‚æœå‡½æ•°ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å»ºçš„å¯¹è±¡(new), ç§°ä¹‹ä¸ºæ„é€ å‡½æ•°constructor.\n\n* é‡‡ç”¨64ä½æµ®ç‚¹æ ¼å¼è¡¨ç¤ºæ•°å­—ï¼Œã€€æ•´æ•°èŒƒå›´æ˜¯-9007199254570992 ~ 9007199054570992,  -2^53 ~ 2^53\n\nvar s1 = 0010; 8\n\nvar s2 = 0x0010; 16\n\næµ®ç‚¹æ•°\n3.14\n.2222\n6.02e23\n12.3E-32\n\n* javascript éæ•°å­—ã€€not-a-numberã€€NaNã€€è·Ÿä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚\n* x!=x å½“ä¸”ä»…å½“xä¸ºNaNçš„æ—¶å€™è¿”å›true.\n* isNaN å¦‚æœå‚æ•°æ˜¯NaNæˆ–è€…éæ•°å­—çš„æ—¶å€™è¿”å›true.\n* isFinite ç”¨æ¥æ£€æµ‹æ•°å­—æ˜¯ä¸æ˜¯æœ‰é™çš„ã€‚\n\nstring ç”±16ä½å€¼ç»„æˆçš„ä¸å¯å˜çš„æœ‰åºåºåˆ—ã€‚\n\nboolean:\n\n> undefined null 0 -0 NaN \"\"  ä¼šè½¬åŒ–ä¸ºfalse\n\ntype of null  -> object\ntype of '' -> string\ntype of undefined -> undefined\nnull == undefined -> true\nnull === undefined -> false\n\n\nå…¨å±€å±æ€§ï¼šã€€undefined, Infinity, NaN\nå…¨å±€å‡½æ•°ï¼šã€€isNaN(), parseInt(), eval()\næ„é€ å‡½æ•°ï¼šã€€Date(), RegExp(), String(), Object(), Array()\nå…¨å±€å¯¹è±¡ï¼šã€€Math, JSON\n\nMath.floor è¿”å›å°äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ã€‚\nMath.round 1=>1 1.5=>2 1.6=>2 -1.5=>1 -1.6=>2\nMath.ceil è¿”å›è¿”å›å¤§äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ã€‚\n\ninè¿ç®—ç¬¦\nå¸Œæœ›å·¦ä¾§ä¸ºå­—ç¬¦ä¸²æˆ–è€…å¯ä»¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚\nå³ä¾§æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚\nå³ä¾§å¯¹è±¡æ˜¯å¦åŒ…å«ä¸€ä¸ªåä¸ºå·¦æ“ä½œæ•°çš„å±æ€§å€¼ã€‚\n\ninstanceof\nå·¦ä¾§ä¸ºå¯¹è±¡ï¼Œå³ä¾§ä¸ºæ ‡è¯†å¯¹è±¡çš„ç±»\n\n\nåŸå‹\n\n> It is for example fairly trivial to build a classic model on top of it, while the other\n> is more difficult task.\n\nhasOwnProperty åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«è‡ªå®šä¹‰å±æ€§è€Œä¸æ˜¯åŸå‹é“¾ä¸Šçš„å±æ€§ã€‚\n\nhasOwnProperty æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å±æ€§ä½†æ˜¯ä¸æŸ¥æ‰¾åŸå‹é“¾çš„å‡½æ•°ã€‚\n\n\nJavaScript ä¸­åŸå§‹å€¼ï¼ˆundefined, null, å¸ƒå°”å€¼ï¼Œæ•°å­—å’Œå­—ç¬¦ä¸²ï¼‰å’Œå¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„å’Œå‡½æ•°ï¼‰æœ‰ç€æ ¹æœ¬çš„åŒºåˆ«ï¼ŒåŸå§‹å€¼æ˜¯ä¸å¯æ›´æ”¹çš„ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æ–°è¿”å›ä¸€ä¸ªå€¼ã€‚\n\nå¯¹è±¡å’ŒåŸå§‹å€¼ä¸åŒï¼Œé¦–å…ˆï¼Œå®ƒä»–æ˜¯ å¯å˜çš„ â€”â€” å€¼å¯ä»¥ä¿®æ”¹ã€‚\n\nJavaScript ä¸­çš„æŸäº›è¿ç®—ç¬¦ä¼šåšéšå¼çš„ç±»å‹è½¬æ¢ã€‚å¦‚æœã€Œ+ã€è¿ç®—ç¬¦çš„ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå°†ä¼šæŠŠå¦å¤–ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ä¸€å…ƒã€Œ!ã€è¿ç®—ç¬¦å°†å…¶æ“ä½œæ•°è½¬æ¢ä¸ºå¸ƒå°”å€¼å¹¶å–å\n\n```javascript\nx + \"\"      // ç­‰ä»·äº String(x)\n+x          // ç­‰ä»·äº Number(x)\n!!x         // ç­‰ä»·äº Boolean(x)\n```\n\n```javascript\nNumber(\"3\")     // => 3\nString(false)   // => \"false\"\nBoolean([])     // => true\nObject(3)       // => new Number(3)\n\nx + \"\"      // ç­‰ä»·äº String(x)\n+x          // ç­‰ä»·äº Number(x)\n!!x         // ç­‰ä»·äº Boolean(x)\n\nvar n = 17\nbinary_sting = n.toString(2)        // è½¬æ¢ä¸º \"10001\"\noctal_string = \"0\" + n.toString(8)  // è½¬æ¢ä¸º \"021\"\nhex_string = \"0x\" + n.toString(16)  // è½¬æ¢ä¸º \"0x11\"\n\nparseInt(\"3 blind mice\")        // => 3\nparseFloat(\" 3.14 meters\")      // => 3.14\nparseInt(0xFF)                  // => 255\nparseInt(\"0.1\")                 // => 0\nparseInt(\".1\")                  // => NaN\nparseFloat(\"$72.47\")            // => NaN\n```\n\n###å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼\n> æ‰€æœ‰å¯¹è±¡ç»§æ‰¿äº†ä¸¤ä¸ªè½¬æ¢æ–¹æ³• toString(), valueOf()\n> toString() çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªåæ˜ è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²\n> valueOf() è¿™ä¸ªæ–¹æ³•çš„ä½œç­”å¹¶æœªè¯¦ç»†å®šä¹‰ï¼šå¦‚æœå­˜åœ¨ä»»æ„åŸå§‹å€¼ï¼Œå®ƒå°±é»˜è®¤å°†å¯¹è±¡è½¬æ¢ä¸ºè¡¨ç¤ºå®ƒçš„\n> åŸå§‹å€¼ã€‚å¤åˆå€¼é»˜è®¤è¿”å›å¯¹è±¡æœ¬èº«\n\nJavaScript ä¸­å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ç»è¿‡äº†å¦‚ä¸‹è¿™äº›æ­¥éª¤ï¼š\n\nå¦‚æœå¯¹è±¡å…·æœ‰ toString() æ–¹æ³•ï¼Œè°ƒç”¨åï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼ŒJavaScript å°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›\nå¦‚æœæ²¡æœ‰ toString() æ–¹æ³•ï¼Œæˆ–è€…è¿™ä¸ªæ–¹æ³•å¹¶ä¸è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œé‚£ä¹ˆ JavaScript ä¼šè°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™è°ƒç”¨å®ƒã€‚å¦‚æœè¿”å›å€¼æ˜¯åŸå§‹å€¼ï¼Œå°±å°†è¿™ä¸ªå€¼å€¼çš„ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›\nå¦åˆ™ï¼Œæ— æ³•ä» toString() å’Œ valueOf() è·å¾—ä¸€ä¸ªåŸå§‹å€¼ï¼Œè¿™äº›å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸\n\n\n```javascript\nvar now = new Date();\ntypeof (now +1)             // => \"string\" ã€Œ+ã€å°†æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²\ntypeof (now -1)             // => \"number\" ã€Œ-ã€ä½¿ç”¨å¯¹è±¡åˆ°æ•°å­—çš„è½¬æ¢\nnow == now.toString()       // => true\nnow > (now - 1)             // => true\n```\n\n##in è¿ç®—ç¬¦\n\nå¸Œæœ›å·¦æ“ä½œæ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…å¯è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å³æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœå³ä¾§çš„å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåä¸ºå³æ“ä½œæ•°å€¼çš„å±æ€§åï¼Œé‚£ä¹ˆè¡¨è¾¾å¼è¿”å› trueã€‚\n\n##instanceof è¿ç®—ç¬¦\n\ninstanceof è¿ç®—ç¬¦å¸Œæœ›å·¦ä¾§æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³æ“ä½œæ•°æ ‡è¯†å¯¹è±¡çš„ç±»ã€‚å¦‚æœå·¦ä¾§çš„å¯¹è±¡æ˜¯å³ä¾§ç±»çš„å®ä¾‹ï¼Œåˆ™è¡¨è¾¾å¼è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚\n\n##â€˜use strictâ€™\n\nâ€˜use strictâ€™ æ˜¯ ECMAScript 5 å¼•å…¥çš„ä¸€æ¡æŒ‡å®šã€‚éå¸¸ç±»ä¼¼è¯­å¥ä½†ä¸æ˜¯ï¼ŒåŒºåˆ«åœ¨äºï¼š\n- å®ƒ ä¸åŒ…å«ä»»ä½•è¯­è¨€çš„å…³é”®å­—ï¼ŒæŒ‡ä»¤ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ç›´æ¥é‡çš„è¡¨è¾¾å¼ï¼Œå®ƒæ˜¯ä¸€æ¡æ²¡æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼è¯­å¥ï¼Œä»€ä¹ˆä¹Ÿæ²¡åš\n- å®ƒåªèƒ½å‡ºç°åœ¨è„šæœ¬ä»£ç çš„å¼€å§‹æˆ–è€…å‡½æ•°ä½“çš„å¼€å§‹ã€ä»»ä½•å®ä½“è¯­å¥ä¹‹å‰ã€‚ä½†ä¸å¿…ä¸€å®šå‡ºç°åœ¨è„šæœ¬æˆ–è€…å‡½æ•°ä¼‘å†…çš„é¦–è¡Œ\n\nä½¿ç”¨ â€˜use strictâ€™ æŒ‡ä»¤çš„ç›®çš„æ˜¯è¯´æ˜ï¼ˆè„šæœ¬æˆ–å‡½æ•°ä¸­ï¼‰åç»­çš„ä»£ç å°†ä¼šè§£æä¸ºä¸¥æ ¼ä»£ç \n\n- ä¸¥æ ¼ä»£ç ä»¥ ä¸¥æ ¼æ¨¡å¼ æ‰§è¡Œï¼Œä¸¥æ ¼æ¨¡å¼æ‚ äº†è¯­è¨€çš„é‡è¦ç¼ºé™·ï¼Œå¹¶æä¾›å¥å£®çš„æŸ¥æ°åŠŸèƒ½å’Œå¢å¼ºçš„å®‰å…¨æœºåˆ¶ï¼Œå’Œéä¸¥æ ¼æ¨¡å¼çš„åŒºåˆ«å¦‚ä¸‹\n\n- ä¸¥æ ¼æ¨¡å¼ä¸­ ç¦æ­¢ ä½¿ç”¨ width è¯­å¥\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½è¦å…ˆå£°æ˜ï¼Œå¦‚æœç»™ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡ã€å‡½æ•°ã€å‡½æ•°å‚æ•°ã€catch ä»å¥å‚æ•°æˆ–å…¨å±€å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼•ç”¨é”™è¯¯å¼‚å¸¸\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè°ƒç”¨çš„å‡½æ•°ï¼ˆä¸æ˜¯æ–¹æ³•ï¼‰ä¸­çš„ä¸€ä¸ª this å€¼æ˜¯ undefinedï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ this å€¼æ€»æ˜¯å…¨å±€å¯¹è±¡ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥åˆ¤æ–­å½“å‰çš„ JavaScript æ˜¯å¦æ”¯æŒä¸¥æ ¼æ¨¡å¼ var hasStrictMode = (function() { \"use strict\"; return this === undefined }())\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œç»™åªè¯»å±æ€§èµ‹å€¼å’Œç»™ä¸å¯æ‰©å±•çš„å¯¹è±¡åˆ›å»ºæ–°æˆå‘˜éƒ½å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ä¸ä¼šæŠ¥é”™ï¼‰\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¼ å…¥ eval() çš„ä»£ç ä¸èƒ½åœ¨è°ƒç”¨ç¨‹åºæ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä¸­å£°æ˜å˜é‡æˆ–å®šä¹‰å‡½æ•°ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸­å¯ä»¥\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°é‡Œçš„ arguments å¯¹è±¡æ‹¥æœ‰ä¼ å…¥å‡½æ•°å€¼çš„ é™æ€å‰¯æœ¬ã€‚éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œarguments é‡Œçš„æ•°ç»„å…ƒç´ å’Œå‡½æ•°å‚æ•°éƒ½æŒ‡å‘åŒä¸€ä¸ªå€¼çš„å¼•ç”¨\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå½“ delete è¿ç®—ç¬¦åè·Ÿéšéæ³•çš„æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€å½“å‡½æ•°å‚æ•°ï¼‰æ—¶ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªè¯­æ³•é”™è¯¯å¼‚å¸¸\n- ä¸¥æ ¼æ¨¡å¼ä¸­è¯•å›¾åˆ é™¤ä¸€ä¸ª ä¸å¯é…ç½® çš„å±æ€§å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè¿”å› falseï¼‰\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡ç›´æ¥é‡ä¸­å®šä¹‰ä¸¤ä¸ªæˆ–å¤šä¸ª åŒåå±æ€§ å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°å£°æ˜ä¸­å­˜åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªåŒåå‚æ•°å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸å…è®¸ä½¿ç”¨å…«è¿›åˆ¶ æ•´æ•°ç›´æ¥é‡ï¼ˆä»¥ 0 ä¸ºå‰ç¼€ï¼‰\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ ‡è¯†ç¬¦ eval å’Œ arguments å½“åšå…³é”®å­—ï¼Œå®ƒä»¬çš„å€¼æ˜¯ä¸èƒ½æ›´æ”¹çš„ï¼Œä¸èƒ½ç»™å®ƒä»¬èµ‹å€¼ï¼Œä¹Ÿä¸èƒ½æŠŠå®ƒä»¬å£°æ˜ä¸ºå˜é‡ã€å‡½æ•°å\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œé™åˆ¶äº†å¯¹è°ƒç”¨æ ˆçš„æ£€æµ‹èƒ½åŠ›ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼çš„å‡½æ•°ä¸­ï¼Œarguments.caller å’Œ arguments.callee éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸\nhttp://bonsaiden.github.io/JavaScript-Garden/zh/\n","source":"_posts/2017-01-19-javascript-note.markdown","raw":"---\nlayout:     post\ntitle:      \"Javascript\"\nsubtitle:   \"Javascript\"\ndate:       2016-05-23 15:08\nauthor:     \"Asher\"\nheader-img: \"post-bg-gulp.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Javascript\n---\n\n# æ•°æ®ç±»å‹ï¼š\n\n- 6ç§åŸå§‹å€¼ï¼ˆä¸å¯å˜ã€‚â€œé™¤éé‡ç½®å½“å‰å˜é‡ï¼Œå¦åˆ™ä¸èƒ½æ”¹å˜å…ƒç´ å€¼ã€‚â€ï¼‰\n    1. Null(åªæœ‰ä¸€ä¸ªå€¼ï¼š null)\n    1. Undefined(ä¸€ä¸ªæ²¡æœ‰è¢«èµ‹å€¼çš„å˜é‡ä¼šæœ‰ä¸ªé»˜è®¤å€¼ undefined)\n    1. Number\n    1. Boolean(ä¸¤ä¸ªå€¼ï¼štrue å’Œ false)\n    1. String\n    1. [Symbol](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol)\n- å’ŒObject(å¯¹è±¡æŒ‡å†…å­˜ä¸­çš„å¯ä»¥è¢«æ ‡è¯†ç¬¦å¼•ç”¨çš„ä¸€å—åŒºåŸŸ)\n\n- æ•°æ®ç±»å‹æ£€æµ‹\n    - typeof(å¯¹å˜é‡æˆ–å€¼è°ƒç”¨ typeof è¿ç®—ç¬¦å°†è¿”å›(å­—ç¬¦ä¸²)ä¸‹åˆ—å€¼ä¹‹ä¸€)\n        1. undefined - Undefinedç±»å‹\n        1. number - Numberç±»å‹\n        1. boolean - Booleanç±»å‹\n        1. string - Stringç±»å‹\n        1. symbol - Symbolç±»å‹(ECMAScript6æ–°å¢)\n        1. function - å‡½æ•°å¯¹è±¡([[Call]]åœ¨ECMA-262æ¡æ¬¾ä¸­å®ç°äº†)\n        1. object - å¼•ç”¨ç±»å‹ æˆ– Nullç±»å‹\n    ```javascript\n    typeof(Function) // function (Functionæ˜¯å‡½æ•°å¯¹è±¡)\n    typeof(new Function) // function (new Functionä¹Ÿæ˜¯æ˜¯å‡½æ•°å¯¹è±¡ï¼ŒåŒç­‰ï¼švar func = function(){})\n    typeof(Array) // function (Arrayæ˜¯å‡½æ•°å¯¹è±¡)\n    typeof(new Array) // objectï¼ˆå®ä¾‹åŒ–çš„Arrayå°±æ˜¯objectï¼‰\n    ```\n\n- å˜é‡èµ‹å€¼æ—¶å€™çš„è¿”å›å€¼ï¼š\n    ```javascript\n    var name = 123; // è¿”å›undefined\n    name = 456; // è¿”å›456\n    ```\n    > ç»“è¯­ï¼šå®šä¹‰å˜é‡çš„æ—¶å€™èµ‹å€¼è¿”å›:undefined\n    > ç»™å·²å£°æ˜å˜é‡èµ‹å€¼æ—¶å€™è¿”å›å½“å‰èµ‹å€¼ã€‚\n\n- è·å–å…ƒç´ è·ç¦»é¡µé¢çš„topã€left\n    ```javascript\n    function getRec(ele) {\n        var _t = document.documentElement.clientTop,\n            _l = document.documentElement.clientLeft,\n            rect = ele.getBoundingClientRect();\n        return {\n            top: rect.top - _t,\n            right: rect.right - _l,\n            bottom: rect.bottom - _t,\n            left: rect.left - _l\n        }\n    }\n    ```\n    > æ³¨æ„ï¼šIEã€Firefox3+ã€Opera9.5ã€Chromeã€Safariæ”¯æŒï¼Œåœ¨IEä¸­ï¼Œé»˜è®¤åæ ‡ä»(2,2)å¼€å§‹è®¡ç®—ï¼Œå¯¼è‡´æœ€ç»ˆè·ç¦»æ¯”å…¶ä»–æµè§ˆå™¨å¤šå‡ºä¸¤ä¸ªåƒç´ ï¼Œæˆ‘ä»¬éœ€è¦åšä¸ªå…¼å®¹ã€‚\n\n- æ•°å­—çš„å›ºå®šå°æ•°ä½æ•°\n    ```javascript\n    var a=8.88888,\n        b=8;\n    console.log(a.toFixed(2)); // 8.89 æˆ–è€… 8.88\n    console.log(b.toFixed(2)); // 8.00\n    ```\n\n- jsæ˜¯ç¼–è¯‘è¯­è¨€ï¼Œæ•°ç»„é•¿åº¦æ˜¯éšæ—¶ç¨‹åºå˜åŒ–è€Œå˜åŒ–çš„\n    ```javascript\n    var arr = [0, 1];\n    arr[3] = 3;\n    console.log(arr[2]); // undefined\n    console.log(arr.length); // 4\n    ```\n\n- çŸ©é˜µçš„è½¬ç½®\n    ```javascript\n    var arr = [ // å®šä¹‰ä¸€ä¸ªçŸ©é˜µï¼ˆäºŒç»´æ•°æ®ï¼‰\n        [1, 2, 3, 4],\n        [5, 6, 6, 6],\n        [7, 6, 7, 8],\n        [8, 5, 3, 3]\n    ];\n\n    function changeArr(arr) { // çŸ©é˜µè½¬ç½®å‡½æ•°\n        var c;\n        for (var i = 1; i < arr.length; i++) {\n            for (var j = 0; j < i; j++) {\n                c = arr[i][j];\n                arr[i][j] = arr[j][i];\n                arr[j][i] = c;\n            }\n        }\n    }\n    changeArr(arr);\n    console.table(arr);\n    ```\n\n- å†’æ³¡æ’åºæ–¹æ³•\n    ```javascript\n    // ç¬¬ä¸€è½®æ˜¯å¯¹n-1çš„ä½ç½®å®šä½\n    // ç¬¬äºŒè½®æ˜¯ æ¯ä¸€ä¸ªä½ç½®çš„æ•°çš„ ç¡®å®š\n    var arr = [1, 100, 4, 5, 6, 99, 111, 112, 113, 133],\n        temp = 0,\n        flag = false;\n    for (var i = 0; i < arr.length - 1; i++) {\n        document.writeln('come');\n        for (var j = 0; j < arr.length - 1 - i; j++) {\n            if (arr[j] > arr[j + 1]) {\n                temp = arr[j];\n                arr[j] = arr[j + 1];\n                arr[j + 1] = temp;\n                flag = true;\n            }\n        }\n        if (flag) {\n            flag = false;\n        } else {\n            console.log('brak')\n            break;\n        }\n    }\n    for (var i = 0; i < arr.length; i++) {\n        document.writeln(arr[i]);\n    };\n    ```\n\n- äºŒåˆ†æŸ¥æ‰¾\n    ```javascript\n    var arr = [41, 55, 76, 87, 88, 99, 123, 432, 546, 577, 688, 786];\n\n    function binarySearch(arr, wantVal, leftIndex, rightIndex) {\n        console.log('leftIndex: ' + leftIndex + ' rightIndex: ' + rightIndex)\n        if (leftIndex > rightIndex) {\n            document.writeln('SORRY: æ‰¾ä¸åˆ° ' + wantVal + ' ï¼');\n            return;\n        }\n        var minIndex = Math.floor((leftIndex + rightIndex) / 2);\n        if (arr[minIndex] > wantVal) {\n            binarySearch(arr, wantVal, leftIndex, minIndex - 1);\n        } else if (arr[minIndex] < wantVal) {\n            binarySearch(arr, wantVal, minIndex + 1, rightIndex);\n        } else {\n            document.writeln('æ‰¾åˆ°äº† ' + wantVal + ' ,ä¸‹æ ‡ä¸º' + minIndex);\n        }\n    }\n    binarySearch(arr, 99, 0, arr.length - 1);\n    ```\n\n- js å¯¹è±¡è®¿é—®å±æ€§çš„äºŒç§æ–¹å¼\n    ```javascript\n    function Person () {};\n    var new1 = new Person ();\n    new1.name='å†¯æ°';\n    new1.age=21;\n    window.alert(new1.name);\n    window.alert(new1[\"age\"]);\n    ```\n\n- js delete åªèƒ½ åˆ é™¤å¯¹è±¡çš„å±æ€§\n    ```javascript\n    function Person () {};\n    var me = new Person();\n    me.name='å†¯æ°';\n    console.log(me.name);\n    delete me.name;\n    console.log(me.name);\n    ```\n\n- åœ¨js ä¸­ å¯¹è±¡çš„æ–¹æ³•ä¸æ˜¯é€šç”¨çš„ å¦‚æœç”Ÿæˆnä¸ªå¯¹è±¡ é‚£ä¹ˆå°±æœ‰nä¸ªå†…å­˜å †æ ˆ\n    ```javascript\n    // js ä¸­ ä¸€åˆ‡ç±» ç»§æ‰¿è‡ª Object è€ŒObject æœ‰propotype\n    // ä¸‹é¢æ˜¯è§£å†³åŠæ³• prototype è·å¾—ç±»çš„staticæ€§è´¨\n    function God() {}\n    God.prototype.shout = function() {\n        window.alert('å°ç‹—å«');\n    }\n    var dog1 = new God();\n    var dog2 = new God();\n    dog1.shout();\n    dog2.shout();\n    ```\n\n- å¯¹è±¡\n    ```javascript\n    // jsé‡Œè¦æƒ³åˆ›å»ºå¯¹è±¡ é™¤äº†ä¸€èˆ¬çš„åˆ›å»ºæ–¹å¼ è¿˜æœ‰ é€šè¿‡Object æ–¹å¼åˆ›å»ºç±»\n    // Object ç±»æ˜¯æ‰€æœ‰jsç±»çš„åŸºç±» Object å°±è¡¨ç¤ºå¯¹è±¡ï¼ˆä¸€åˆ‡çš„å¯¹è±¡ï¼‰\n    var p1 = new Object();\n    p1.name = 'fj';\n    window.alert(p1.name);\n    window.alert(p1.constructor);\n\n    // åŸå‹é“¾ä¸Šæ–°å¢é»˜è®¤å¯¹è±¡æ–¹æ³•\n    var num = new Number(1);\n    var num2 = 10;\n    window.alert(num.constructor);\n    window.alert(num2.constructor);\n    // ä¸Šé¢2ä¸ªå¼¹å‡ºæ˜¯ä¸€æ ·çš„\n    Number.prototype.add = function(a) { //prototypeæ˜¯å±äºç±»çš„\n        return this + a;\n    }\n    window.alert(num.add(1).add(2));\n\n    // å°å®éªŒ ä¸ºArray æ·»åŠ  find(val) æ–¹æ³•\n    Array.prototype.find = function(a) {\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] == a) {\n                return i;\n            }\n        }\n        return 'find fail.';\n    }\n    var arr = [0, 1, 2, 77, 4, 5];\n    window.alert(arr.find(77));\n    ```\n\n- å½“éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²çš„æ—¶å€™é»˜è®¤è°ƒç”¨toString\n\n    ```javascript\n    function Dog(name,breed,color,sex) {\n       this.name=name;\n       this.breed=breed;\n       this.color=color;\n       this.sex=sex;\n    }\n    Dog.prototype.toString = function dogToString() {\n      var ret = \"Dog \" + this.name + \" is a \" + this.sex + \" \" + this.color + \" \" + this.breed;\n      return ret;\n    }\n\n    var theDog = new Dog(\"Gabby\",\"Lab\",\"chocolate\",\"female\");\n\n    console.log(theDog+'')\n    ```\n\n- prototype çš„æ–¹æ³•ä¸èƒ½è®¿é—®ç§æœ‰å±æ€§å’Œæ–¹æ³•\n    ```javascript\n    function Person() {\n        var name = 'fj'; //ç§æœ‰\n        this.age = 21;\n    }\n    Person.prototype.showName = function() {\n        window.alert(this.name);\n    }\n    Person.prototype.showAge = function() {\n        window.alert(this.age);\n    }\n    var p1 = new Person();\n    p1.showName();\n    p1.showAge();\n    ```\n\n- ç»§æ‰¿\n    ```javascript\n    // js é‡Œé¢æ˜¯å¯¹è±¡å†’å……æ¥ç»§æ‰¿çš„ ä¸ç®—æ˜¯çœŸæ­£çš„ç»§æ‰¿ é€šè¿‡å¯¹è±¡å†’å…… jså¯ä»¥å®ç°å¤šé‡ç»§æ‰¿å’Œç»§æ‰¿çš„æ•ˆæœ ä½†æ˜¯æ²¡æœ‰Extendså…³é”®å­—\n    function Father(name, age) {\n        this.name = name;\n        this.age = age;\n        this.show = function() {\n            window.alert(this.name + '---' + this.age);\n        }\n    }\n\n    function Son(name, age) {\n        this.Father = Father;\n        this.Father(name, age); //é€šè¿‡å¯¹è±¡å†’å…… å®ç°ç»§æ‰¿ è¿™ä¸€å¥éå¸¸é‡è¦ jsæ˜¯åŠ¨æ€è¯­è¨€ ä¸æ˜¯ç¼–è¯‘è¯­è¨€ è¦æ‰§è¡Œæ‰ä¼šåˆ†é…ç©ºé—´\n    }\n    var me = new Son('fj', 21);\n    window.alert(me.name);\n    me.show();\n    ```\n\n\n- é‡è½½\n    ```javascript\n    // jsä»å¸¸ç†æ¥è¯´æ˜¯ä¸æ”¯æŒé‡è½½çš„ ä½†æ˜¯åˆå¯ä»¥è¯´æ˜¯å¤©ç„¶æ”¯æŒé‡è½½ å› ä¸ºjså¤©ç„¶æ”¯æŒå¯å˜å‚æ•° è€Œä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡arguments[]æ•°ç»„çš„é•¿åº¦åˆ¤æ–­ è€Œåšå‡ºç›¸åº”çš„å¤„ç†\n    ```\n\n- é—­åŒ…\n    ```javascript\n    // é—­åŒ…å®é™…ä¸Šè®¾è®¡ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä½•æ—¶è¢«gcå¤„ç†çš„é—®é¢˜ é—­åŒ…å’Œgcæ˜¯ç›¸å…³è”çš„\n    ```\n\n\n- æ•°ç»„é•¿åº¦\n    ```javascript\n    // æ•°ç»„çš„é•¿åº¦æ˜¯æ ¹æ®ä¸‹æ ‡çš„æœ€å¤§è€Œç¡®å®šçš„\n    var arr = new Array();\n    arr['a'] = 1;\n    arr['b'] = 2;\n    window.alert(arr.length); // æ‰“å‡º0\n    ```\n\n\n* å¦‚æœå‡½æ•°ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å»ºçš„å¯¹è±¡(new), ç§°ä¹‹ä¸ºæ„é€ å‡½æ•°constructor.\n\n* é‡‡ç”¨64ä½æµ®ç‚¹æ ¼å¼è¡¨ç¤ºæ•°å­—ï¼Œã€€æ•´æ•°èŒƒå›´æ˜¯-9007199254570992 ~ 9007199054570992,  -2^53 ~ 2^53\n\nvar s1 = 0010; 8\n\nvar s2 = 0x0010; 16\n\næµ®ç‚¹æ•°\n3.14\n.2222\n6.02e23\n12.3E-32\n\n* javascript éæ•°å­—ã€€not-a-numberã€€NaNã€€è·Ÿä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚\n* x!=x å½“ä¸”ä»…å½“xä¸ºNaNçš„æ—¶å€™è¿”å›true.\n* isNaN å¦‚æœå‚æ•°æ˜¯NaNæˆ–è€…éæ•°å­—çš„æ—¶å€™è¿”å›true.\n* isFinite ç”¨æ¥æ£€æµ‹æ•°å­—æ˜¯ä¸æ˜¯æœ‰é™çš„ã€‚\n\nstring ç”±16ä½å€¼ç»„æˆçš„ä¸å¯å˜çš„æœ‰åºåºåˆ—ã€‚\n\nboolean:\n\n> undefined null 0 -0 NaN \"\"  ä¼šè½¬åŒ–ä¸ºfalse\n\ntype of null  -> object\ntype of '' -> string\ntype of undefined -> undefined\nnull == undefined -> true\nnull === undefined -> false\n\n\nå…¨å±€å±æ€§ï¼šã€€undefined, Infinity, NaN\nå…¨å±€å‡½æ•°ï¼šã€€isNaN(), parseInt(), eval()\næ„é€ å‡½æ•°ï¼šã€€Date(), RegExp(), String(), Object(), Array()\nå…¨å±€å¯¹è±¡ï¼šã€€Math, JSON\n\nMath.floor è¿”å›å°äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ã€‚\nMath.round 1=>1 1.5=>2 1.6=>2 -1.5=>1 -1.6=>2\nMath.ceil è¿”å›è¿”å›å¤§äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ã€‚\n\ninè¿ç®—ç¬¦\nå¸Œæœ›å·¦ä¾§ä¸ºå­—ç¬¦ä¸²æˆ–è€…å¯ä»¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚\nå³ä¾§æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚\nå³ä¾§å¯¹è±¡æ˜¯å¦åŒ…å«ä¸€ä¸ªåä¸ºå·¦æ“ä½œæ•°çš„å±æ€§å€¼ã€‚\n\ninstanceof\nå·¦ä¾§ä¸ºå¯¹è±¡ï¼Œå³ä¾§ä¸ºæ ‡è¯†å¯¹è±¡çš„ç±»\n\n\nåŸå‹\n\n> It is for example fairly trivial to build a classic model on top of it, while the other\n> is more difficult task.\n\nhasOwnProperty åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«è‡ªå®šä¹‰å±æ€§è€Œä¸æ˜¯åŸå‹é“¾ä¸Šçš„å±æ€§ã€‚\n\nhasOwnProperty æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å±æ€§ä½†æ˜¯ä¸æŸ¥æ‰¾åŸå‹é“¾çš„å‡½æ•°ã€‚\n\n\nJavaScript ä¸­åŸå§‹å€¼ï¼ˆundefined, null, å¸ƒå°”å€¼ï¼Œæ•°å­—å’Œå­—ç¬¦ä¸²ï¼‰å’Œå¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„å’Œå‡½æ•°ï¼‰æœ‰ç€æ ¹æœ¬çš„åŒºåˆ«ï¼ŒåŸå§‹å€¼æ˜¯ä¸å¯æ›´æ”¹çš„ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æ–°è¿”å›ä¸€ä¸ªå€¼ã€‚\n\nå¯¹è±¡å’ŒåŸå§‹å€¼ä¸åŒï¼Œé¦–å…ˆï¼Œå®ƒä»–æ˜¯ å¯å˜çš„ â€”â€” å€¼å¯ä»¥ä¿®æ”¹ã€‚\n\nJavaScript ä¸­çš„æŸäº›è¿ç®—ç¬¦ä¼šåšéšå¼çš„ç±»å‹è½¬æ¢ã€‚å¦‚æœã€Œ+ã€è¿ç®—ç¬¦çš„ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå°†ä¼šæŠŠå¦å¤–ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ä¸€å…ƒã€Œ!ã€è¿ç®—ç¬¦å°†å…¶æ“ä½œæ•°è½¬æ¢ä¸ºå¸ƒå°”å€¼å¹¶å–å\n\n```javascript\nx + \"\"      // ç­‰ä»·äº String(x)\n+x          // ç­‰ä»·äº Number(x)\n!!x         // ç­‰ä»·äº Boolean(x)\n```\n\n```javascript\nNumber(\"3\")     // => 3\nString(false)   // => \"false\"\nBoolean([])     // => true\nObject(3)       // => new Number(3)\n\nx + \"\"      // ç­‰ä»·äº String(x)\n+x          // ç­‰ä»·äº Number(x)\n!!x         // ç­‰ä»·äº Boolean(x)\n\nvar n = 17\nbinary_sting = n.toString(2)        // è½¬æ¢ä¸º \"10001\"\noctal_string = \"0\" + n.toString(8)  // è½¬æ¢ä¸º \"021\"\nhex_string = \"0x\" + n.toString(16)  // è½¬æ¢ä¸º \"0x11\"\n\nparseInt(\"3 blind mice\")        // => 3\nparseFloat(\" 3.14 meters\")      // => 3.14\nparseInt(0xFF)                  // => 255\nparseInt(\"0.1\")                 // => 0\nparseInt(\".1\")                  // => NaN\nparseFloat(\"$72.47\")            // => NaN\n```\n\n###å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼\n> æ‰€æœ‰å¯¹è±¡ç»§æ‰¿äº†ä¸¤ä¸ªè½¬æ¢æ–¹æ³• toString(), valueOf()\n> toString() çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªåæ˜ è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²\n> valueOf() è¿™ä¸ªæ–¹æ³•çš„ä½œç­”å¹¶æœªè¯¦ç»†å®šä¹‰ï¼šå¦‚æœå­˜åœ¨ä»»æ„åŸå§‹å€¼ï¼Œå®ƒå°±é»˜è®¤å°†å¯¹è±¡è½¬æ¢ä¸ºè¡¨ç¤ºå®ƒçš„\n> åŸå§‹å€¼ã€‚å¤åˆå€¼é»˜è®¤è¿”å›å¯¹è±¡æœ¬èº«\n\nJavaScript ä¸­å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ç»è¿‡äº†å¦‚ä¸‹è¿™äº›æ­¥éª¤ï¼š\n\nå¦‚æœå¯¹è±¡å…·æœ‰ toString() æ–¹æ³•ï¼Œè°ƒç”¨åï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼ŒJavaScript å°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›\nå¦‚æœæ²¡æœ‰ toString() æ–¹æ³•ï¼Œæˆ–è€…è¿™ä¸ªæ–¹æ³•å¹¶ä¸è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œé‚£ä¹ˆ JavaScript ä¼šè°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™è°ƒç”¨å®ƒã€‚å¦‚æœè¿”å›å€¼æ˜¯åŸå§‹å€¼ï¼Œå°±å°†è¿™ä¸ªå€¼å€¼çš„ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›\nå¦åˆ™ï¼Œæ— æ³•ä» toString() å’Œ valueOf() è·å¾—ä¸€ä¸ªåŸå§‹å€¼ï¼Œè¿™äº›å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸\n\n\n```javascript\nvar now = new Date();\ntypeof (now +1)             // => \"string\" ã€Œ+ã€å°†æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²\ntypeof (now -1)             // => \"number\" ã€Œ-ã€ä½¿ç”¨å¯¹è±¡åˆ°æ•°å­—çš„è½¬æ¢\nnow == now.toString()       // => true\nnow > (now - 1)             // => true\n```\n\n##in è¿ç®—ç¬¦\n\nå¸Œæœ›å·¦æ“ä½œæ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…å¯è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å³æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœå³ä¾§çš„å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåä¸ºå³æ“ä½œæ•°å€¼çš„å±æ€§åï¼Œé‚£ä¹ˆè¡¨è¾¾å¼è¿”å› trueã€‚\n\n##instanceof è¿ç®—ç¬¦\n\ninstanceof è¿ç®—ç¬¦å¸Œæœ›å·¦ä¾§æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³æ“ä½œæ•°æ ‡è¯†å¯¹è±¡çš„ç±»ã€‚å¦‚æœå·¦ä¾§çš„å¯¹è±¡æ˜¯å³ä¾§ç±»çš„å®ä¾‹ï¼Œåˆ™è¡¨è¾¾å¼è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚\n\n##â€˜use strictâ€™\n\nâ€˜use strictâ€™ æ˜¯ ECMAScript 5 å¼•å…¥çš„ä¸€æ¡æŒ‡å®šã€‚éå¸¸ç±»ä¼¼è¯­å¥ä½†ä¸æ˜¯ï¼ŒåŒºåˆ«åœ¨äºï¼š\n- å®ƒ ä¸åŒ…å«ä»»ä½•è¯­è¨€çš„å…³é”®å­—ï¼ŒæŒ‡ä»¤ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ç›´æ¥é‡çš„è¡¨è¾¾å¼ï¼Œå®ƒæ˜¯ä¸€æ¡æ²¡æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼è¯­å¥ï¼Œä»€ä¹ˆä¹Ÿæ²¡åš\n- å®ƒåªèƒ½å‡ºç°åœ¨è„šæœ¬ä»£ç çš„å¼€å§‹æˆ–è€…å‡½æ•°ä½“çš„å¼€å§‹ã€ä»»ä½•å®ä½“è¯­å¥ä¹‹å‰ã€‚ä½†ä¸å¿…ä¸€å®šå‡ºç°åœ¨è„šæœ¬æˆ–è€…å‡½æ•°ä¼‘å†…çš„é¦–è¡Œ\n\nä½¿ç”¨ â€˜use strictâ€™ æŒ‡ä»¤çš„ç›®çš„æ˜¯è¯´æ˜ï¼ˆè„šæœ¬æˆ–å‡½æ•°ä¸­ï¼‰åç»­çš„ä»£ç å°†ä¼šè§£æä¸ºä¸¥æ ¼ä»£ç \n\n- ä¸¥æ ¼ä»£ç ä»¥ ä¸¥æ ¼æ¨¡å¼ æ‰§è¡Œï¼Œä¸¥æ ¼æ¨¡å¼æ‚ äº†è¯­è¨€çš„é‡è¦ç¼ºé™·ï¼Œå¹¶æä¾›å¥å£®çš„æŸ¥æ°åŠŸèƒ½å’Œå¢å¼ºçš„å®‰å…¨æœºåˆ¶ï¼Œå’Œéä¸¥æ ¼æ¨¡å¼çš„åŒºåˆ«å¦‚ä¸‹\n\n- ä¸¥æ ¼æ¨¡å¼ä¸­ ç¦æ­¢ ä½¿ç”¨ width è¯­å¥\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½è¦å…ˆå£°æ˜ï¼Œå¦‚æœç»™ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡ã€å‡½æ•°ã€å‡½æ•°å‚æ•°ã€catch ä»å¥å‚æ•°æˆ–å…¨å±€å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼•ç”¨é”™è¯¯å¼‚å¸¸\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè°ƒç”¨çš„å‡½æ•°ï¼ˆä¸æ˜¯æ–¹æ³•ï¼‰ä¸­çš„ä¸€ä¸ª this å€¼æ˜¯ undefinedï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ this å€¼æ€»æ˜¯å…¨å±€å¯¹è±¡ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥åˆ¤æ–­å½“å‰çš„ JavaScript æ˜¯å¦æ”¯æŒä¸¥æ ¼æ¨¡å¼ var hasStrictMode = (function() { \"use strict\"; return this === undefined }())\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œç»™åªè¯»å±æ€§èµ‹å€¼å’Œç»™ä¸å¯æ‰©å±•çš„å¯¹è±¡åˆ›å»ºæ–°æˆå‘˜éƒ½å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ä¸ä¼šæŠ¥é”™ï¼‰\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¼ å…¥ eval() çš„ä»£ç ä¸èƒ½åœ¨è°ƒç”¨ç¨‹åºæ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä¸­å£°æ˜å˜é‡æˆ–å®šä¹‰å‡½æ•°ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸­å¯ä»¥\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°é‡Œçš„ arguments å¯¹è±¡æ‹¥æœ‰ä¼ å…¥å‡½æ•°å€¼çš„ é™æ€å‰¯æœ¬ã€‚éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œarguments é‡Œçš„æ•°ç»„å…ƒç´ å’Œå‡½æ•°å‚æ•°éƒ½æŒ‡å‘åŒä¸€ä¸ªå€¼çš„å¼•ç”¨\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå½“ delete è¿ç®—ç¬¦åè·Ÿéšéæ³•çš„æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€å½“å‡½æ•°å‚æ•°ï¼‰æ—¶ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªè¯­æ³•é”™è¯¯å¼‚å¸¸\n- ä¸¥æ ¼æ¨¡å¼ä¸­è¯•å›¾åˆ é™¤ä¸€ä¸ª ä¸å¯é…ç½® çš„å±æ€§å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè¿”å› falseï¼‰\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡ç›´æ¥é‡ä¸­å®šä¹‰ä¸¤ä¸ªæˆ–å¤šä¸ª åŒåå±æ€§ å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°å£°æ˜ä¸­å­˜åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªåŒåå‚æ•°å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸å…è®¸ä½¿ç”¨å…«è¿›åˆ¶ æ•´æ•°ç›´æ¥é‡ï¼ˆä»¥ 0 ä¸ºå‰ç¼€ï¼‰\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ ‡è¯†ç¬¦ eval å’Œ arguments å½“åšå…³é”®å­—ï¼Œå®ƒä»¬çš„å€¼æ˜¯ä¸èƒ½æ›´æ”¹çš„ï¼Œä¸èƒ½ç»™å®ƒä»¬èµ‹å€¼ï¼Œä¹Ÿä¸èƒ½æŠŠå®ƒä»¬å£°æ˜ä¸ºå˜é‡ã€å‡½æ•°å\n- ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œé™åˆ¶äº†å¯¹è°ƒç”¨æ ˆçš„æ£€æµ‹èƒ½åŠ›ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼çš„å‡½æ•°ä¸­ï¼Œarguments.caller å’Œ arguments.callee éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸\nhttp://bonsaiden.github.io/JavaScript-Garden/zh/\n","slug":"2017-01-19-javascript-note","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxn0013mmt71tof0973","content":"<h1 id=\"æ•°æ®ç±»å‹ï¼š\"><a href=\"#æ•°æ®ç±»å‹ï¼š\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹ï¼š\"></a>æ•°æ®ç±»å‹ï¼š</h1><ul>\n<li>6ç§åŸå§‹å€¼ï¼ˆä¸å¯å˜ã€‚â€œé™¤éé‡ç½®å½“å‰å˜é‡ï¼Œå¦åˆ™ä¸èƒ½æ”¹å˜å…ƒç´ å€¼ã€‚â€ï¼‰<ol>\n<li>Null(åªæœ‰ä¸€ä¸ªå€¼ï¼š null)</li>\n<li>Undefined(ä¸€ä¸ªæ²¡æœ‰è¢«èµ‹å€¼çš„å˜é‡ä¼šæœ‰ä¸ªé»˜è®¤å€¼ undefined)</li>\n<li>Number</li>\n<li>Boolean(ä¸¤ä¸ªå€¼ï¼štrue å’Œ false)</li>\n<li>String</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol\" target=\"_blank\" rel=\"external\">Symbol</a></li>\n</ol>\n</li>\n<li><p>å’ŒObject(å¯¹è±¡æŒ‡å†…å­˜ä¸­çš„å¯ä»¥è¢«æ ‡è¯†ç¬¦å¼•ç”¨çš„ä¸€å—åŒºåŸŸ)</p>\n</li>\n<li><p>æ•°æ®ç±»å‹æ£€æµ‹</p>\n<ul>\n<li>typeof(å¯¹å˜é‡æˆ–å€¼è°ƒç”¨ typeof è¿ç®—ç¬¦å°†è¿”å›(å­—ç¬¦ä¸²)ä¸‹åˆ—å€¼ä¹‹ä¸€)<ol>\n<li>undefined - Undefinedç±»å‹</li>\n<li>number - Numberç±»å‹</li>\n<li>boolean - Booleanç±»å‹</li>\n<li>string - Stringç±»å‹</li>\n<li>symbol - Symbolç±»å‹(ECMAScript6æ–°å¢)</li>\n<li>function - å‡½æ•°å¯¹è±¡([[Call]]åœ¨ECMA-262æ¡æ¬¾ä¸­å®ç°äº†)</li>\n<li>object - å¼•ç”¨ç±»å‹ æˆ– Nullç±»å‹<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"built_in\">Function</span>) <span class=\"comment\">// function (Functionæ˜¯å‡½æ•°å¯¹è±¡)</span></div><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Function</span>) <span class=\"comment\">// function (new Functionä¹Ÿæ˜¯æ˜¯å‡½æ•°å¯¹è±¡ï¼ŒåŒç­‰ï¼švar func = function()&#123;&#125;)</span></div><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"built_in\">Array</span>) <span class=\"comment\">// function (Arrayæ˜¯å‡½æ•°å¯¹è±¡)</span></div><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>) <span class=\"comment\">// objectï¼ˆå®ä¾‹åŒ–çš„Arrayå°±æ˜¯objectï¼‰</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><p>å˜é‡èµ‹å€¼æ—¶å€™çš„è¿”å›å€¼ï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"number\">123</span>; <span class=\"comment\">// è¿”å›undefined</span></div><div class=\"line\">name = <span class=\"number\">456</span>; <span class=\"comment\">// è¿”å›456</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>ç»“è¯­ï¼šå®šä¹‰å˜é‡çš„æ—¶å€™èµ‹å€¼è¿”å›:undefined<br>ç»™å·²å£°æ˜å˜é‡èµ‹å€¼æ—¶å€™è¿”å›å½“å‰èµ‹å€¼ã€‚</p>\n</blockquote>\n</li>\n<li><p>è·å–å…ƒç´ è·ç¦»é¡µé¢çš„topã€left</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRec</span>(<span class=\"params\">ele</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> _t = <span class=\"built_in\">document</span>.documentElement.clientTop,</div><div class=\"line\">        _l = <span class=\"built_in\">document</span>.documentElement.clientLeft,</div><div class=\"line\">        rect = ele.getBoundingClientRect();</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">top</span>: rect.top - _t,</div><div class=\"line\">        <span class=\"attr\">right</span>: rect.right - _l,</div><div class=\"line\">        <span class=\"attr\">bottom</span>: rect.bottom - _t,</div><div class=\"line\">        <span class=\"attr\">left</span>: rect.left - _l</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>æ³¨æ„ï¼šIEã€Firefox3+ã€Opera9.5ã€Chromeã€Safariæ”¯æŒï¼Œåœ¨IEä¸­ï¼Œé»˜è®¤åæ ‡ä»(2,2)å¼€å§‹è®¡ç®—ï¼Œå¯¼è‡´æœ€ç»ˆè·ç¦»æ¯”å…¶ä»–æµè§ˆå™¨å¤šå‡ºä¸¤ä¸ªåƒç´ ï¼Œæˆ‘ä»¬éœ€è¦åšä¸ªå…¼å®¹ã€‚</p>\n</blockquote>\n</li>\n<li><p>æ•°å­—çš„å›ºå®šå°æ•°ä½æ•°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a=<span class=\"number\">8.88888</span>,</div><div class=\"line\">    b=<span class=\"number\">8</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(a.toFixed(<span class=\"number\">2</span>)); <span class=\"comment\">// 8.89 æˆ–è€… 8.88</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b.toFixed(<span class=\"number\">2</span>)); <span class=\"comment\">// 8.00</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>jsæ˜¯ç¼–è¯‘è¯­è¨€ï¼Œæ•°ç»„é•¿åº¦æ˜¯éšæ—¶ç¨‹åºå˜åŒ–è€Œå˜åŒ–çš„</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">0</span>, <span class=\"number\">1</span>];</div><div class=\"line\">arr[<span class=\"number\">3</span>] = <span class=\"number\">3</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr[<span class=\"number\">2</span>]); <span class=\"comment\">// undefined</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr.length); <span class=\"comment\">// 4</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>çŸ©é˜µçš„è½¬ç½®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [ <span class=\"comment\">// å®šä¹‰ä¸€ä¸ªçŸ©é˜µï¼ˆäºŒç»´æ•°æ®ï¼‰</span></div><div class=\"line\">    [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>],</div><div class=\"line\">    [<span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">6</span>, <span class=\"number\">6</span>],</div><div class=\"line\">    [<span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>],</div><div class=\"line\">    [<span class=\"number\">8</span>, <span class=\"number\">5</span>, <span class=\"number\">3</span>, <span class=\"number\">3</span>]</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changeArr</span>(<span class=\"params\">arr</span>) </span>&#123; <span class=\"comment\">// çŸ©é˜µè½¬ç½®å‡½æ•°</span></div><div class=\"line\">    <span class=\"keyword\">var</span> c;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; i; j++) &#123;</div><div class=\"line\">            c = arr[i][j];</div><div class=\"line\">            arr[i][j] = arr[j][i];</div><div class=\"line\">            arr[j][i] = c;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">changeArr(arr);</div><div class=\"line\"><span class=\"built_in\">console</span>.table(arr);</div></pre></td></tr></table></figure>\n</li>\n<li><p>å†’æ³¡æ’åºæ–¹æ³•</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// ç¬¬ä¸€è½®æ˜¯å¯¹n-1çš„ä½ç½®å®šä½</span></div><div class=\"line\"><span class=\"comment\">// ç¬¬äºŒè½®æ˜¯ æ¯ä¸€ä¸ªä½ç½®çš„æ•°çš„ ç¡®å®š</span></div><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">100</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">99</span>, <span class=\"number\">111</span>, <span class=\"number\">112</span>, <span class=\"number\">113</span>, <span class=\"number\">133</span>],</div><div class=\"line\">    temp = <span class=\"number\">0</span>,</div><div class=\"line\">    flag = <span class=\"literal\">false</span>;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length - <span class=\"number\">1</span>; i++) &#123;</div><div class=\"line\">    <span class=\"built_in\">document</span>.writeln(<span class=\"string\">'come'</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; arr.length - <span class=\"number\">1</span> - i; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (arr[j] &gt; arr[j + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">            temp = arr[j];</div><div class=\"line\">            arr[j] = arr[j + <span class=\"number\">1</span>];</div><div class=\"line\">            arr[j + <span class=\"number\">1</span>] = temp;</div><div class=\"line\">            flag = <span class=\"literal\">true</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (flag) &#123;</div><div class=\"line\">        flag = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'brak'</span>)</div><div class=\"line\">        <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">    <span class=\"built_in\">document</span>.writeln(arr[i]);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n</li>\n<li><p>äºŒåˆ†æŸ¥æ‰¾</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">41</span>, <span class=\"number\">55</span>, <span class=\"number\">76</span>, <span class=\"number\">87</span>, <span class=\"number\">88</span>, <span class=\"number\">99</span>, <span class=\"number\">123</span>, <span class=\"number\">432</span>, <span class=\"number\">546</span>, <span class=\"number\">577</span>, <span class=\"number\">688</span>, <span class=\"number\">786</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binarySearch</span>(<span class=\"params\">arr, wantVal, leftIndex, rightIndex</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'leftIndex: '</span> + leftIndex + <span class=\"string\">' rightIndex: '</span> + rightIndex)</div><div class=\"line\">    <span class=\"keyword\">if</span> (leftIndex &gt; rightIndex) &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.writeln(<span class=\"string\">'SORRY: æ‰¾ä¸åˆ° '</span> + wantVal + <span class=\"string\">' ï¼'</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">var</span> minIndex = <span class=\"built_in\">Math</span>.floor((leftIndex + rightIndex) / <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr[minIndex] &gt; wantVal) &#123;</div><div class=\"line\">        binarySearch(arr, wantVal, leftIndex, minIndex - <span class=\"number\">1</span>);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (arr[minIndex] &lt; wantVal) &#123;</div><div class=\"line\">        binarySearch(arr, wantVal, minIndex + <span class=\"number\">1</span>, rightIndex);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.writeln(<span class=\"string\">'æ‰¾åˆ°äº† '</span> + wantVal + <span class=\"string\">' ,ä¸‹æ ‡ä¸º'</span> + minIndex);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">binarySearch(arr, <span class=\"number\">99</span>, <span class=\"number\">0</span>, arr.length - <span class=\"number\">1</span>);</div></pre></td></tr></table></figure>\n</li>\n<li><p>js å¯¹è±¡è®¿é—®å±æ€§çš„äºŒç§æ–¹å¼</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> new1 = <span class=\"keyword\">new</span> Person ();</div><div class=\"line\">new1.name=<span class=\"string\">'å†¯æ°'</span>;</div><div class=\"line\">new1.age=<span class=\"number\">21</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(new1.name);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(new1[<span class=\"string\">\"age\"</span>]);</div></pre></td></tr></table></figure>\n</li>\n<li><p>js delete åªèƒ½ åˆ é™¤å¯¹è±¡çš„å±æ€§</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> me = <span class=\"keyword\">new</span> Person();</div><div class=\"line\">me.name=<span class=\"string\">'å†¯æ°'</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(me.name);</div><div class=\"line\"><span class=\"keyword\">delete</span> me.name;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(me.name);</div></pre></td></tr></table></figure>\n</li>\n<li><p>åœ¨js ä¸­ å¯¹è±¡çš„æ–¹æ³•ä¸æ˜¯é€šç”¨çš„ å¦‚æœç”Ÿæˆnä¸ªå¯¹è±¡ é‚£ä¹ˆå°±æœ‰nä¸ªå†…å­˜å †æ ˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// js ä¸­ ä¸€åˆ‡ç±» ç»§æ‰¿è‡ª Object è€ŒObject æœ‰propotype</span></div><div class=\"line\"><span class=\"comment\">// ä¸‹é¢æ˜¯è§£å†³åŠæ³• prototype è·å¾—ç±»çš„staticæ€§è´¨</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">God</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\">God.prototype.shout = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">window</span>.alert(<span class=\"string\">'å°ç‹—å«'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> dog1 = <span class=\"keyword\">new</span> God();</div><div class=\"line\"><span class=\"keyword\">var</span> dog2 = <span class=\"keyword\">new</span> God();</div><div class=\"line\">dog1.shout();</div><div class=\"line\">dog2.shout();</div></pre></td></tr></table></figure>\n</li>\n<li><p>å¯¹è±¡</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// jsé‡Œè¦æƒ³åˆ›å»ºå¯¹è±¡ é™¤äº†ä¸€èˆ¬çš„åˆ›å»ºæ–¹å¼ è¿˜æœ‰ é€šè¿‡Object æ–¹å¼åˆ›å»ºç±»</span></div><div class=\"line\"><span class=\"comment\">// Object ç±»æ˜¯æ‰€æœ‰jsç±»çš„åŸºç±» Object å°±è¡¨ç¤ºå¯¹è±¡ï¼ˆä¸€åˆ‡çš„å¯¹è±¡ï¼‰</span></div><div class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</div><div class=\"line\">p1.name = <span class=\"string\">'fj'</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(p1.name);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(p1.constructor);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// åŸå‹é“¾ä¸Šæ–°å¢é»˜è®¤å¯¹è±¡æ–¹æ³•</span></div><div class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> num2 = <span class=\"number\">10</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(num.constructor);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(num2.constructor);</div><div class=\"line\"><span class=\"comment\">// ä¸Šé¢2ä¸ªå¼¹å‡ºæ˜¯ä¸€æ ·çš„</span></div><div class=\"line\"><span class=\"built_in\">Number</span>.prototype.add = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a</span>) </span>&#123; <span class=\"comment\">//prototypeæ˜¯å±äºç±»çš„</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span> + a;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(num.add(<span class=\"number\">1</span>).add(<span class=\"number\">2</span>));</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å°å®éªŒ ä¸ºArray æ·»åŠ  find(val) æ–¹æ³•</span></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.find = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>[i] == a) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> i;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'find fail.'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">77</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>];</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(arr.find(<span class=\"number\">77</span>));</div></pre></td></tr></table></figure>\n</li>\n<li><p>å½“éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²çš„æ—¶å€™é»˜è®¤è°ƒç”¨toString</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dog</span>(<span class=\"params\">name,breed,color,sex</span>) </span>&#123;</div><div class=\"line\">   <span class=\"keyword\">this</span>.name=name;</div><div class=\"line\">   <span class=\"keyword\">this</span>.breed=breed;</div><div class=\"line\">   <span class=\"keyword\">this</span>.color=color;</div><div class=\"line\">   <span class=\"keyword\">this</span>.sex=sex;</div><div class=\"line\">&#125;</div><div class=\"line\">Dog.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dogToString</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> ret = <span class=\"string\">\"Dog \"</span> + <span class=\"keyword\">this</span>.name + <span class=\"string\">\" is a \"</span> + <span class=\"keyword\">this</span>.sex + <span class=\"string\">\" \"</span> + <span class=\"keyword\">this</span>.color + <span class=\"string\">\" \"</span> + <span class=\"keyword\">this</span>.breed;</div><div class=\"line\">  <span class=\"keyword\">return</span> ret;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> theDog = <span class=\"keyword\">new</span> Dog(<span class=\"string\">\"Gabby\"</span>,<span class=\"string\">\"Lab\"</span>,<span class=\"string\">\"chocolate\"</span>,<span class=\"string\">\"female\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(theDog+<span class=\"string\">''</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>prototype çš„æ–¹æ³•ä¸èƒ½è®¿é—®ç§æœ‰å±æ€§å’Œæ–¹æ³•</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">'fj'</span>; <span class=\"comment\">//ç§æœ‰</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.age = <span class=\"number\">21</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype.showName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">window</span>.alert(<span class=\"keyword\">this</span>.name);</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype.showAge = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">window</span>.alert(<span class=\"keyword\">this</span>.age);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> Person();</div><div class=\"line\">p1.showName();</div><div class=\"line\">p1.showAge();</div></pre></td></tr></table></figure>\n</li>\n<li><p>ç»§æ‰¿</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// js é‡Œé¢æ˜¯å¯¹è±¡å†’å……æ¥ç»§æ‰¿çš„ ä¸ç®—æ˜¯çœŸæ­£çš„ç»§æ‰¿ é€šè¿‡å¯¹è±¡å†’å…… jså¯ä»¥å®ç°å¤šé‡ç»§æ‰¿å’Œç»§æ‰¿çš„æ•ˆæœ ä½†æ˜¯æ²¡æœ‰Extendså…³é”®å­—</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Father</span>(<span class=\"params\">name, age</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">    <span class=\"keyword\">this</span>.age = age;</div><div class=\"line\">    <span class=\"keyword\">this</span>.show = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">window</span>.alert(<span class=\"keyword\">this</span>.name + <span class=\"string\">'---'</span> + <span class=\"keyword\">this</span>.age);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Son</span>(<span class=\"params\">name, age</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.Father = Father;</div><div class=\"line\">    <span class=\"keyword\">this</span>.Father(name, age); <span class=\"comment\">//é€šè¿‡å¯¹è±¡å†’å…… å®ç°ç»§æ‰¿ è¿™ä¸€å¥éå¸¸é‡è¦ jsæ˜¯åŠ¨æ€è¯­è¨€ ä¸æ˜¯ç¼–è¯‘è¯­è¨€ è¦æ‰§è¡Œæ‰ä¼šåˆ†é…ç©ºé—´</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> me = <span class=\"keyword\">new</span> Son(<span class=\"string\">'fj'</span>, <span class=\"number\">21</span>);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(me.name);</div><div class=\"line\">me.show();</div></pre></td></tr></table></figure>\n</li>\n<li><p>é‡è½½</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// jsä»å¸¸ç†æ¥è¯´æ˜¯ä¸æ”¯æŒé‡è½½çš„ ä½†æ˜¯åˆå¯ä»¥è¯´æ˜¯å¤©ç„¶æ”¯æŒé‡è½½ å› ä¸ºjså¤©ç„¶æ”¯æŒå¯å˜å‚æ•° è€Œä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡arguments[]æ•°ç»„çš„é•¿åº¦åˆ¤æ–­ è€Œåšå‡ºç›¸åº”çš„å¤„ç†</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>é—­åŒ…</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// é—­åŒ…å®é™…ä¸Šè®¾è®¡ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä½•æ—¶è¢«gcå¤„ç†çš„é—®é¢˜ é—­åŒ…å’Œgcæ˜¯ç›¸å…³è”çš„</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>æ•°ç»„é•¿åº¦</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// æ•°ç»„çš„é•¿åº¦æ˜¯æ ¹æ®ä¸‹æ ‡çš„æœ€å¤§è€Œç¡®å®šçš„</span></div><div class=\"line\"><span class=\"keyword\">var</span> arr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</div><div class=\"line\">arr[<span class=\"string\">'a'</span>] = <span class=\"number\">1</span>;</div><div class=\"line\">arr[<span class=\"string\">'b'</span>] = <span class=\"number\">2</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(arr.length); <span class=\"comment\">// æ‰“å‡º0</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li><p>å¦‚æœå‡½æ•°ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å»ºçš„å¯¹è±¡(new), ç§°ä¹‹ä¸ºæ„é€ å‡½æ•°constructor.</p>\n</li>\n<li><p>é‡‡ç”¨64ä½æµ®ç‚¹æ ¼å¼è¡¨ç¤ºæ•°å­—ï¼Œã€€æ•´æ•°èŒƒå›´æ˜¯-9007199254570992 ~ 9007199054570992,  -2^53 ~ 2^53</p>\n</li>\n</ul>\n<p>var s1 = 0010; 8</p>\n<p>var s2 = 0x0010; 16</p>\n<p>æµ®ç‚¹æ•°<br>3.14<br>.2222<br>6.02e23<br>12.3E-32</p>\n<ul>\n<li>javascript éæ•°å­—ã€€not-a-numberã€€NaNã€€è·Ÿä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚</li>\n<li>x!=x å½“ä¸”ä»…å½“xä¸ºNaNçš„æ—¶å€™è¿”å›true.</li>\n<li>isNaN å¦‚æœå‚æ•°æ˜¯NaNæˆ–è€…éæ•°å­—çš„æ—¶å€™è¿”å›true.</li>\n<li>isFinite ç”¨æ¥æ£€æµ‹æ•°å­—æ˜¯ä¸æ˜¯æœ‰é™çš„ã€‚</li>\n</ul>\n<p>string ç”±16ä½å€¼ç»„æˆçš„ä¸å¯å˜çš„æœ‰åºåºåˆ—ã€‚</p>\n<p>boolean:</p>\n<blockquote>\n<p>undefined null 0 -0 NaN â€œâ€  ä¼šè½¬åŒ–ä¸ºfalse</p>\n</blockquote>\n<p>type of null  -&gt; object<br>type of â€˜â€™ -&gt; string<br>type of undefined -&gt; undefined<br>null == undefined -&gt; true<br>null === undefined -&gt; false</p>\n<p>å…¨å±€å±æ€§ï¼šã€€undefined, Infinity, NaN<br>å…¨å±€å‡½æ•°ï¼šã€€isNaN(), parseInt(), eval()<br>æ„é€ å‡½æ•°ï¼šã€€Date(), RegExp(), String(), Object(), Array()<br>å…¨å±€å¯¹è±¡ï¼šã€€Math, JSON</p>\n<p>Math.floor è¿”å›å°äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ã€‚<br>Math.round 1=&gt;1 1.5=&gt;2 1.6=&gt;2 -1.5=&gt;1 -1.6=&gt;2<br>Math.ceil è¿”å›è¿”å›å¤§äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ã€‚</p>\n<p>inè¿ç®—ç¬¦<br>å¸Œæœ›å·¦ä¾§ä¸ºå­—ç¬¦ä¸²æˆ–è€…å¯ä»¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚<br>å³ä¾§æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚<br>å³ä¾§å¯¹è±¡æ˜¯å¦åŒ…å«ä¸€ä¸ªåä¸ºå·¦æ“ä½œæ•°çš„å±æ€§å€¼ã€‚</p>\n<p>instanceof<br>å·¦ä¾§ä¸ºå¯¹è±¡ï¼Œå³ä¾§ä¸ºæ ‡è¯†å¯¹è±¡çš„ç±»</p>\n<p>åŸå‹</p>\n<blockquote>\n<p>It is for example fairly trivial to build a classic model on top of it, while the other<br>is more difficult task.</p>\n</blockquote>\n<p>hasOwnProperty åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«è‡ªå®šä¹‰å±æ€§è€Œä¸æ˜¯åŸå‹é“¾ä¸Šçš„å±æ€§ã€‚</p>\n<p>hasOwnProperty æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å±æ€§ä½†æ˜¯ä¸æŸ¥æ‰¾åŸå‹é“¾çš„å‡½æ•°ã€‚</p>\n<p>JavaScript ä¸­åŸå§‹å€¼ï¼ˆundefined, null, å¸ƒå°”å€¼ï¼Œæ•°å­—å’Œå­—ç¬¦ä¸²ï¼‰å’Œå¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„å’Œå‡½æ•°ï¼‰æœ‰ç€æ ¹æœ¬çš„åŒºåˆ«ï¼ŒåŸå§‹å€¼æ˜¯ä¸å¯æ›´æ”¹çš„ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æ–°è¿”å›ä¸€ä¸ªå€¼ã€‚</p>\n<p>å¯¹è±¡å’ŒåŸå§‹å€¼ä¸åŒï¼Œé¦–å…ˆï¼Œå®ƒä»–æ˜¯ å¯å˜çš„ â€”â€” å€¼å¯ä»¥ä¿®æ”¹ã€‚</p>\n<p>JavaScript ä¸­çš„æŸäº›è¿ç®—ç¬¦ä¼šåšéšå¼çš„ç±»å‹è½¬æ¢ã€‚å¦‚æœã€Œ+ã€è¿ç®—ç¬¦çš„ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå°†ä¼šæŠŠå¦å¤–ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ä¸€å…ƒã€Œ!ã€è¿ç®—ç¬¦å°†å…¶æ“ä½œæ•°è½¬æ¢ä¸ºå¸ƒå°”å€¼å¹¶å–å</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">x + <span class=\"string\">\"\"</span>      <span class=\"comment\">// ç­‰ä»·äº String(x)</span></div><div class=\"line\">+x          <span class=\"comment\">// ç­‰ä»·äº Number(x)</span></div><div class=\"line\">!!x         <span class=\"comment\">// ç­‰ä»·äº Boolean(x)</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Number</span>(<span class=\"string\">\"3\"</span>)     <span class=\"comment\">// =&gt; 3</span></div><div class=\"line\"><span class=\"built_in\">String</span>(<span class=\"literal\">false</span>)   <span class=\"comment\">// =&gt; \"false\"</span></div><div class=\"line\"><span class=\"built_in\">Boolean</span>([])     <span class=\"comment\">// =&gt; true</span></div><div class=\"line\"><span class=\"built_in\">Object</span>(<span class=\"number\">3</span>)       <span class=\"comment\">// =&gt; new Number(3)</span></div><div class=\"line\"></div><div class=\"line\">x + <span class=\"string\">\"\"</span>      <span class=\"comment\">// ç­‰ä»·äº String(x)</span></div><div class=\"line\">+x          <span class=\"comment\">// ç­‰ä»·äº Number(x)</span></div><div class=\"line\">!!x         <span class=\"comment\">// ç­‰ä»·äº Boolean(x)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> n = <span class=\"number\">17</span></div><div class=\"line\">binary_sting = n.toString(<span class=\"number\">2</span>)        <span class=\"comment\">// è½¬æ¢ä¸º \"10001\"</span></div><div class=\"line\">octal_string = <span class=\"string\">\"0\"</span> + n.toString(<span class=\"number\">8</span>)  <span class=\"comment\">// è½¬æ¢ä¸º \"021\"</span></div><div class=\"line\">hex_string = <span class=\"string\">\"0x\"</span> + n.toString(<span class=\"number\">16</span>)  <span class=\"comment\">// è½¬æ¢ä¸º \"0x11\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">\"3 blind mice\"</span>)        <span class=\"comment\">// =&gt; 3</span></div><div class=\"line\"><span class=\"built_in\">parseFloat</span>(<span class=\"string\">\" 3.14 meters\"</span>)      <span class=\"comment\">// =&gt; 3.14</span></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"number\">0xFF</span>)                  <span class=\"comment\">// =&gt; 255</span></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">\"0.1\"</span>)                 <span class=\"comment\">// =&gt; 0</span></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">\".1\"</span>)                  <span class=\"comment\">// =&gt; NaN</span></div><div class=\"line\"><span class=\"built_in\">parseFloat</span>(<span class=\"string\">\"$72.47\"</span>)            <span class=\"comment\">// =&gt; NaN</span></div></pre></td></tr></table></figure>\n<p>###å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼</p>\n<blockquote>\n<p>æ‰€æœ‰å¯¹è±¡ç»§æ‰¿äº†ä¸¤ä¸ªè½¬æ¢æ–¹æ³• toString(), valueOf()<br>toString() çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªåæ˜ è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²<br>valueOf() è¿™ä¸ªæ–¹æ³•çš„ä½œç­”å¹¶æœªè¯¦ç»†å®šä¹‰ï¼šå¦‚æœå­˜åœ¨ä»»æ„åŸå§‹å€¼ï¼Œå®ƒå°±é»˜è®¤å°†å¯¹è±¡è½¬æ¢ä¸ºè¡¨ç¤ºå®ƒçš„<br>åŸå§‹å€¼ã€‚å¤åˆå€¼é»˜è®¤è¿”å›å¯¹è±¡æœ¬èº«</p>\n</blockquote>\n<p>JavaScript ä¸­å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ç»è¿‡äº†å¦‚ä¸‹è¿™äº›æ­¥éª¤ï¼š</p>\n<p>å¦‚æœå¯¹è±¡å…·æœ‰ toString() æ–¹æ³•ï¼Œè°ƒç”¨åï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼ŒJavaScript å°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›<br>å¦‚æœæ²¡æœ‰ toString() æ–¹æ³•ï¼Œæˆ–è€…è¿™ä¸ªæ–¹æ³•å¹¶ä¸è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œé‚£ä¹ˆ JavaScript ä¼šè°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™è°ƒç”¨å®ƒã€‚å¦‚æœè¿”å›å€¼æ˜¯åŸå§‹å€¼ï¼Œå°±å°†è¿™ä¸ªå€¼å€¼çš„ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›<br>å¦åˆ™ï¼Œæ— æ³•ä» toString() å’Œ valueOf() è·å¾—ä¸€ä¸ªåŸå§‹å€¼ï¼Œè¿™äº›å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\"><span class=\"keyword\">typeof</span> (now +<span class=\"number\">1</span>)             <span class=\"comment\">// =&gt; \"string\" ã€Œ+ã€å°†æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></div><div class=\"line\"><span class=\"keyword\">typeof</span> (now <span class=\"number\">-1</span>)             <span class=\"comment\">// =&gt; \"number\" ã€Œ-ã€ä½¿ç”¨å¯¹è±¡åˆ°æ•°å­—çš„è½¬æ¢</span></div><div class=\"line\">now == now.toString()       <span class=\"comment\">// =&gt; true</span></div><div class=\"line\">now &gt; (now - <span class=\"number\">1</span>)             <span class=\"comment\">// =&gt; true</span></div></pre></td></tr></table></figure>\n<p>##in è¿ç®—ç¬¦</p>\n<p>å¸Œæœ›å·¦æ“ä½œæ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…å¯è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å³æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœå³ä¾§çš„å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåä¸ºå³æ“ä½œæ•°å€¼çš„å±æ€§åï¼Œé‚£ä¹ˆè¡¨è¾¾å¼è¿”å› trueã€‚</p>\n<p>##instanceof è¿ç®—ç¬¦</p>\n<p>instanceof è¿ç®—ç¬¦å¸Œæœ›å·¦ä¾§æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³æ“ä½œæ•°æ ‡è¯†å¯¹è±¡çš„ç±»ã€‚å¦‚æœå·¦ä¾§çš„å¯¹è±¡æ˜¯å³ä¾§ç±»çš„å®ä¾‹ï¼Œåˆ™è¡¨è¾¾å¼è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</p>\n<p>##â€˜use strictâ€™</p>\n<p>â€˜use strictâ€™ æ˜¯ ECMAScript 5 å¼•å…¥çš„ä¸€æ¡æŒ‡å®šã€‚éå¸¸ç±»ä¼¼è¯­å¥ä½†ä¸æ˜¯ï¼ŒåŒºåˆ«åœ¨äºï¼š</p>\n<ul>\n<li>å®ƒ ä¸åŒ…å«ä»»ä½•è¯­è¨€çš„å…³é”®å­—ï¼ŒæŒ‡ä»¤ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ç›´æ¥é‡çš„è¡¨è¾¾å¼ï¼Œå®ƒæ˜¯ä¸€æ¡æ²¡æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼è¯­å¥ï¼Œä»€ä¹ˆä¹Ÿæ²¡åš</li>\n<li>å®ƒåªèƒ½å‡ºç°åœ¨è„šæœ¬ä»£ç çš„å¼€å§‹æˆ–è€…å‡½æ•°ä½“çš„å¼€å§‹ã€ä»»ä½•å®ä½“è¯­å¥ä¹‹å‰ã€‚ä½†ä¸å¿…ä¸€å®šå‡ºç°åœ¨è„šæœ¬æˆ–è€…å‡½æ•°ä¼‘å†…çš„é¦–è¡Œ</li>\n</ul>\n<p>ä½¿ç”¨ â€˜use strictâ€™ æŒ‡ä»¤çš„ç›®çš„æ˜¯è¯´æ˜ï¼ˆè„šæœ¬æˆ–å‡½æ•°ä¸­ï¼‰åç»­çš„ä»£ç å°†ä¼šè§£æä¸ºä¸¥æ ¼ä»£ç </p>\n<ul>\n<li><p>ä¸¥æ ¼ä»£ç ä»¥ ä¸¥æ ¼æ¨¡å¼ æ‰§è¡Œï¼Œä¸¥æ ¼æ¨¡å¼æ‚ äº†è¯­è¨€çš„é‡è¦ç¼ºé™·ï¼Œå¹¶æä¾›å¥å£®çš„æŸ¥æ°åŠŸèƒ½å’Œå¢å¼ºçš„å®‰å…¨æœºåˆ¶ï¼Œå’Œéä¸¥æ ¼æ¨¡å¼çš„åŒºåˆ«å¦‚ä¸‹</p>\n</li>\n<li><p>ä¸¥æ ¼æ¨¡å¼ä¸­ ç¦æ­¢ ä½¿ç”¨ width è¯­å¥</p>\n</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½è¦å…ˆå£°æ˜ï¼Œå¦‚æœç»™ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡ã€å‡½æ•°ã€å‡½æ•°å‚æ•°ã€catch ä»å¥å‚æ•°æˆ–å…¨å±€å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼•ç”¨é”™è¯¯å¼‚å¸¸</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè°ƒç”¨çš„å‡½æ•°ï¼ˆä¸æ˜¯æ–¹æ³•ï¼‰ä¸­çš„ä¸€ä¸ª this å€¼æ˜¯ undefinedï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ this å€¼æ€»æ˜¯å…¨å±€å¯¹è±¡ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥åˆ¤æ–­å½“å‰çš„ JavaScript æ˜¯å¦æ”¯æŒä¸¥æ ¼æ¨¡å¼ var hasStrictMode = (function() { â€œuse strictâ€; return this === undefined }())</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œç»™åªè¯»å±æ€§èµ‹å€¼å’Œç»™ä¸å¯æ‰©å±•çš„å¯¹è±¡åˆ›å»ºæ–°æˆå‘˜éƒ½å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ä¸ä¼šæŠ¥é”™ï¼‰</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¼ å…¥ eval() çš„ä»£ç ä¸èƒ½åœ¨è°ƒç”¨ç¨‹åºæ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä¸­å£°æ˜å˜é‡æˆ–å®šä¹‰å‡½æ•°ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸­å¯ä»¥</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°é‡Œçš„ arguments å¯¹è±¡æ‹¥æœ‰ä¼ å…¥å‡½æ•°å€¼çš„ é™æ€å‰¯æœ¬ã€‚éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œarguments é‡Œçš„æ•°ç»„å…ƒç´ å’Œå‡½æ•°å‚æ•°éƒ½æŒ‡å‘åŒä¸€ä¸ªå€¼çš„å¼•ç”¨</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå½“ delete è¿ç®—ç¬¦åè·Ÿéšéæ³•çš„æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€å½“å‡½æ•°å‚æ•°ï¼‰æ—¶ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªè¯­æ³•é”™è¯¯å¼‚å¸¸</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­è¯•å›¾åˆ é™¤ä¸€ä¸ª ä¸å¯é…ç½® çš„å±æ€§å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè¿”å› falseï¼‰</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡ç›´æ¥é‡ä¸­å®šä¹‰ä¸¤ä¸ªæˆ–å¤šä¸ª åŒåå±æ€§ å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°å£°æ˜ä¸­å­˜åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªåŒåå‚æ•°å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸å…è®¸ä½¿ç”¨å…«è¿›åˆ¶ æ•´æ•°ç›´æ¥é‡ï¼ˆä»¥ 0 ä¸ºå‰ç¼€ï¼‰</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ ‡è¯†ç¬¦ eval å’Œ arguments å½“åšå…³é”®å­—ï¼Œå®ƒä»¬çš„å€¼æ˜¯ä¸èƒ½æ›´æ”¹çš„ï¼Œä¸èƒ½ç»™å®ƒä»¬èµ‹å€¼ï¼Œä¹Ÿä¸èƒ½æŠŠå®ƒä»¬å£°æ˜ä¸ºå˜é‡ã€å‡½æ•°å</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œé™åˆ¶äº†å¯¹è°ƒç”¨æ ˆçš„æ£€æµ‹èƒ½åŠ›ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼çš„å‡½æ•°ä¸­ï¼Œarguments.caller å’Œ arguments.callee éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸<br><a href=\"http://bonsaiden.github.io/JavaScript-Garden/zh/\" target=\"_blank\" rel=\"external\">http://bonsaiden.github.io/JavaScript-Garden/zh/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"æ•°æ®ç±»å‹ï¼š\"><a href=\"#æ•°æ®ç±»å‹ï¼š\" class=\"headerlink\" title=\"æ•°æ®ç±»å‹ï¼š\"></a>æ•°æ®ç±»å‹ï¼š</h1><ul>\n<li>6ç§åŸå§‹å€¼ï¼ˆä¸å¯å˜ã€‚â€œé™¤éé‡ç½®å½“å‰å˜é‡ï¼Œå¦åˆ™ä¸èƒ½æ”¹å˜å…ƒç´ å€¼ã€‚â€ï¼‰<ol>\n<li>Null(åªæœ‰ä¸€ä¸ªå€¼ï¼š null)</li>\n<li>Undefined(ä¸€ä¸ªæ²¡æœ‰è¢«èµ‹å€¼çš„å˜é‡ä¼šæœ‰ä¸ªé»˜è®¤å€¼ undefined)</li>\n<li>Number</li>\n<li>Boolean(ä¸¤ä¸ªå€¼ï¼štrue å’Œ false)</li>\n<li>String</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol\" target=\"_blank\" rel=\"external\">Symbol</a></li>\n</ol>\n</li>\n<li><p>å’ŒObject(å¯¹è±¡æŒ‡å†…å­˜ä¸­çš„å¯ä»¥è¢«æ ‡è¯†ç¬¦å¼•ç”¨çš„ä¸€å—åŒºåŸŸ)</p>\n</li>\n<li><p>æ•°æ®ç±»å‹æ£€æµ‹</p>\n<ul>\n<li>typeof(å¯¹å˜é‡æˆ–å€¼è°ƒç”¨ typeof è¿ç®—ç¬¦å°†è¿”å›(å­—ç¬¦ä¸²)ä¸‹åˆ—å€¼ä¹‹ä¸€)<ol>\n<li>undefined - Undefinedç±»å‹</li>\n<li>number - Numberç±»å‹</li>\n<li>boolean - Booleanç±»å‹</li>\n<li>string - Stringç±»å‹</li>\n<li>symbol - Symbolç±»å‹(ECMAScript6æ–°å¢)</li>\n<li>function - å‡½æ•°å¯¹è±¡([[Call]]åœ¨ECMA-262æ¡æ¬¾ä¸­å®ç°äº†)</li>\n<li>object - å¼•ç”¨ç±»å‹ æˆ– Nullç±»å‹<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"built_in\">Function</span>) <span class=\"comment\">// function (Functionæ˜¯å‡½æ•°å¯¹è±¡)</span></div><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Function</span>) <span class=\"comment\">// function (new Functionä¹Ÿæ˜¯æ˜¯å‡½æ•°å¯¹è±¡ï¼ŒåŒç­‰ï¼švar func = function()&#123;&#125;)</span></div><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"built_in\">Array</span>) <span class=\"comment\">// function (Arrayæ˜¯å‡½æ•°å¯¹è±¡)</span></div><div class=\"line\"><span class=\"keyword\">typeof</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>) <span class=\"comment\">// objectï¼ˆå®ä¾‹åŒ–çš„Arrayå°±æ˜¯objectï¼‰</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><p>å˜é‡èµ‹å€¼æ—¶å€™çš„è¿”å›å€¼ï¼š</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> name = <span class=\"number\">123</span>; <span class=\"comment\">// è¿”å›undefined</span></div><div class=\"line\">name = <span class=\"number\">456</span>; <span class=\"comment\">// è¿”å›456</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>ç»“è¯­ï¼šå®šä¹‰å˜é‡çš„æ—¶å€™èµ‹å€¼è¿”å›:undefined<br>ç»™å·²å£°æ˜å˜é‡èµ‹å€¼æ—¶å€™è¿”å›å½“å‰èµ‹å€¼ã€‚</p>\n</blockquote>\n</li>\n<li><p>è·å–å…ƒç´ è·ç¦»é¡µé¢çš„topã€left</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRec</span>(<span class=\"params\">ele</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> _t = <span class=\"built_in\">document</span>.documentElement.clientTop,</div><div class=\"line\">        _l = <span class=\"built_in\">document</span>.documentElement.clientLeft,</div><div class=\"line\">        rect = ele.getBoundingClientRect();</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">top</span>: rect.top - _t,</div><div class=\"line\">        <span class=\"attr\">right</span>: rect.right - _l,</div><div class=\"line\">        <span class=\"attr\">bottom</span>: rect.bottom - _t,</div><div class=\"line\">        <span class=\"attr\">left</span>: rect.left - _l</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>æ³¨æ„ï¼šIEã€Firefox3+ã€Opera9.5ã€Chromeã€Safariæ”¯æŒï¼Œåœ¨IEä¸­ï¼Œé»˜è®¤åæ ‡ä»(2,2)å¼€å§‹è®¡ç®—ï¼Œå¯¼è‡´æœ€ç»ˆè·ç¦»æ¯”å…¶ä»–æµè§ˆå™¨å¤šå‡ºä¸¤ä¸ªåƒç´ ï¼Œæˆ‘ä»¬éœ€è¦åšä¸ªå…¼å®¹ã€‚</p>\n</blockquote>\n</li>\n<li><p>æ•°å­—çš„å›ºå®šå°æ•°ä½æ•°</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> a=<span class=\"number\">8.88888</span>,</div><div class=\"line\">    b=<span class=\"number\">8</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(a.toFixed(<span class=\"number\">2</span>)); <span class=\"comment\">// 8.89 æˆ–è€… 8.88</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b.toFixed(<span class=\"number\">2</span>)); <span class=\"comment\">// 8.00</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>jsæ˜¯ç¼–è¯‘è¯­è¨€ï¼Œæ•°ç»„é•¿åº¦æ˜¯éšæ—¶ç¨‹åºå˜åŒ–è€Œå˜åŒ–çš„</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">0</span>, <span class=\"number\">1</span>];</div><div class=\"line\">arr[<span class=\"number\">3</span>] = <span class=\"number\">3</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr[<span class=\"number\">2</span>]); <span class=\"comment\">// undefined</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr.length); <span class=\"comment\">// 4</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>çŸ©é˜µçš„è½¬ç½®</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [ <span class=\"comment\">// å®šä¹‰ä¸€ä¸ªçŸ©é˜µï¼ˆäºŒç»´æ•°æ®ï¼‰</span></div><div class=\"line\">    [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>],</div><div class=\"line\">    [<span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">6</span>, <span class=\"number\">6</span>],</div><div class=\"line\">    [<span class=\"number\">7</span>, <span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>],</div><div class=\"line\">    [<span class=\"number\">8</span>, <span class=\"number\">5</span>, <span class=\"number\">3</span>, <span class=\"number\">3</span>]</div><div class=\"line\">];</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">changeArr</span>(<span class=\"params\">arr</span>) </span>&#123; <span class=\"comment\">// çŸ©é˜µè½¬ç½®å‡½æ•°</span></div><div class=\"line\">    <span class=\"keyword\">var</span> c;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">1</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; i; j++) &#123;</div><div class=\"line\">            c = arr[i][j];</div><div class=\"line\">            arr[i][j] = arr[j][i];</div><div class=\"line\">            arr[j][i] = c;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">changeArr(arr);</div><div class=\"line\"><span class=\"built_in\">console</span>.table(arr);</div></pre></td></tr></table></figure>\n</li>\n<li><p>å†’æ³¡æ’åºæ–¹æ³•</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// ç¬¬ä¸€è½®æ˜¯å¯¹n-1çš„ä½ç½®å®šä½</span></div><div class=\"line\"><span class=\"comment\">// ç¬¬äºŒè½®æ˜¯ æ¯ä¸€ä¸ªä½ç½®çš„æ•°çš„ ç¡®å®š</span></div><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">100</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">99</span>, <span class=\"number\">111</span>, <span class=\"number\">112</span>, <span class=\"number\">113</span>, <span class=\"number\">133</span>],</div><div class=\"line\">    temp = <span class=\"number\">0</span>,</div><div class=\"line\">    flag = <span class=\"literal\">false</span>;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length - <span class=\"number\">1</span>; i++) &#123;</div><div class=\"line\">    <span class=\"built_in\">document</span>.writeln(<span class=\"string\">'come'</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; arr.length - <span class=\"number\">1</span> - i; j++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (arr[j] &gt; arr[j + <span class=\"number\">1</span>]) &#123;</div><div class=\"line\">            temp = arr[j];</div><div class=\"line\">            arr[j] = arr[j + <span class=\"number\">1</span>];</div><div class=\"line\">            arr[j + <span class=\"number\">1</span>] = temp;</div><div class=\"line\">            flag = <span class=\"literal\">true</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (flag) &#123;</div><div class=\"line\">        flag = <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'brak'</span>)</div><div class=\"line\">        <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</div><div class=\"line\">    <span class=\"built_in\">document</span>.writeln(arr[i]);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n</li>\n<li><p>äºŒåˆ†æŸ¥æ‰¾</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">41</span>, <span class=\"number\">55</span>, <span class=\"number\">76</span>, <span class=\"number\">87</span>, <span class=\"number\">88</span>, <span class=\"number\">99</span>, <span class=\"number\">123</span>, <span class=\"number\">432</span>, <span class=\"number\">546</span>, <span class=\"number\">577</span>, <span class=\"number\">688</span>, <span class=\"number\">786</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">binarySearch</span>(<span class=\"params\">arr, wantVal, leftIndex, rightIndex</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'leftIndex: '</span> + leftIndex + <span class=\"string\">' rightIndex: '</span> + rightIndex)</div><div class=\"line\">    <span class=\"keyword\">if</span> (leftIndex &gt; rightIndex) &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.writeln(<span class=\"string\">'SORRY: æ‰¾ä¸åˆ° '</span> + wantVal + <span class=\"string\">' ï¼'</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">var</span> minIndex = <span class=\"built_in\">Math</span>.floor((leftIndex + rightIndex) / <span class=\"number\">2</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (arr[minIndex] &gt; wantVal) &#123;</div><div class=\"line\">        binarySearch(arr, wantVal, leftIndex, minIndex - <span class=\"number\">1</span>);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (arr[minIndex] &lt; wantVal) &#123;</div><div class=\"line\">        binarySearch(arr, wantVal, minIndex + <span class=\"number\">1</span>, rightIndex);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">document</span>.writeln(<span class=\"string\">'æ‰¾åˆ°äº† '</span> + wantVal + <span class=\"string\">' ,ä¸‹æ ‡ä¸º'</span> + minIndex);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">binarySearch(arr, <span class=\"number\">99</span>, <span class=\"number\">0</span>, arr.length - <span class=\"number\">1</span>);</div></pre></td></tr></table></figure>\n</li>\n<li><p>js å¯¹è±¡è®¿é—®å±æ€§çš„äºŒç§æ–¹å¼</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> new1 = <span class=\"keyword\">new</span> Person ();</div><div class=\"line\">new1.name=<span class=\"string\">'å†¯æ°'</span>;</div><div class=\"line\">new1.age=<span class=\"number\">21</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(new1.name);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(new1[<span class=\"string\">\"age\"</span>]);</div></pre></td></tr></table></figure>\n</li>\n<li><p>js delete åªèƒ½ åˆ é™¤å¯¹è±¡çš„å±æ€§</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> me = <span class=\"keyword\">new</span> Person();</div><div class=\"line\">me.name=<span class=\"string\">'å†¯æ°'</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(me.name);</div><div class=\"line\"><span class=\"keyword\">delete</span> me.name;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(me.name);</div></pre></td></tr></table></figure>\n</li>\n<li><p>åœ¨js ä¸­ å¯¹è±¡çš„æ–¹æ³•ä¸æ˜¯é€šç”¨çš„ å¦‚æœç”Ÿæˆnä¸ªå¯¹è±¡ é‚£ä¹ˆå°±æœ‰nä¸ªå†…å­˜å †æ ˆ</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// js ä¸­ ä¸€åˆ‡ç±» ç»§æ‰¿è‡ª Object è€ŒObject æœ‰propotype</span></div><div class=\"line\"><span class=\"comment\">// ä¸‹é¢æ˜¯è§£å†³åŠæ³• prototype è·å¾—ç±»çš„staticæ€§è´¨</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">God</span>(<span class=\"params\"></span>) </span>&#123;&#125;</div><div class=\"line\">God.prototype.shout = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">window</span>.alert(<span class=\"string\">'å°ç‹—å«'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> dog1 = <span class=\"keyword\">new</span> God();</div><div class=\"line\"><span class=\"keyword\">var</span> dog2 = <span class=\"keyword\">new</span> God();</div><div class=\"line\">dog1.shout();</div><div class=\"line\">dog2.shout();</div></pre></td></tr></table></figure>\n</li>\n<li><p>å¯¹è±¡</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// jsé‡Œè¦æƒ³åˆ›å»ºå¯¹è±¡ é™¤äº†ä¸€èˆ¬çš„åˆ›å»ºæ–¹å¼ è¿˜æœ‰ é€šè¿‡Object æ–¹å¼åˆ›å»ºç±»</span></div><div class=\"line\"><span class=\"comment\">// Object ç±»æ˜¯æ‰€æœ‰jsç±»çš„åŸºç±» Object å°±è¡¨ç¤ºå¯¹è±¡ï¼ˆä¸€åˆ‡çš„å¯¹è±¡ï¼‰</span></div><div class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Object</span>();</div><div class=\"line\">p1.name = <span class=\"string\">'fj'</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(p1.name);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(p1.constructor);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// åŸå‹é“¾ä¸Šæ–°å¢é»˜è®¤å¯¹è±¡æ–¹æ³•</span></div><div class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"keyword\">new</span> <span class=\"built_in\">Number</span>(<span class=\"number\">1</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> num2 = <span class=\"number\">10</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(num.constructor);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(num2.constructor);</div><div class=\"line\"><span class=\"comment\">// ä¸Šé¢2ä¸ªå¼¹å‡ºæ˜¯ä¸€æ ·çš„</span></div><div class=\"line\"><span class=\"built_in\">Number</span>.prototype.add = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a</span>) </span>&#123; <span class=\"comment\">//prototypeæ˜¯å±äºç±»çš„</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span> + a;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(num.add(<span class=\"number\">1</span>).add(<span class=\"number\">2</span>));</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å°å®éªŒ ä¸ºArray æ·»åŠ  find(val) æ–¹æ³•</span></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.find = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>[i] == a) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> i;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'find fail.'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">77</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>];</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(arr.find(<span class=\"number\">77</span>));</div></pre></td></tr></table></figure>\n</li>\n<li><p>å½“éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²çš„æ—¶å€™é»˜è®¤è°ƒç”¨toString</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dog</span>(<span class=\"params\">name,breed,color,sex</span>) </span>&#123;</div><div class=\"line\">   <span class=\"keyword\">this</span>.name=name;</div><div class=\"line\">   <span class=\"keyword\">this</span>.breed=breed;</div><div class=\"line\">   <span class=\"keyword\">this</span>.color=color;</div><div class=\"line\">   <span class=\"keyword\">this</span>.sex=sex;</div><div class=\"line\">&#125;</div><div class=\"line\">Dog.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dogToString</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> ret = <span class=\"string\">\"Dog \"</span> + <span class=\"keyword\">this</span>.name + <span class=\"string\">\" is a \"</span> + <span class=\"keyword\">this</span>.sex + <span class=\"string\">\" \"</span> + <span class=\"keyword\">this</span>.color + <span class=\"string\">\" \"</span> + <span class=\"keyword\">this</span>.breed;</div><div class=\"line\">  <span class=\"keyword\">return</span> ret;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> theDog = <span class=\"keyword\">new</span> Dog(<span class=\"string\">\"Gabby\"</span>,<span class=\"string\">\"Lab\"</span>,<span class=\"string\">\"chocolate\"</span>,<span class=\"string\">\"female\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(theDog+<span class=\"string\">''</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>prototype çš„æ–¹æ³•ä¸èƒ½è®¿é—®ç§æœ‰å±æ€§å’Œæ–¹æ³•</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> name = <span class=\"string\">'fj'</span>; <span class=\"comment\">//ç§æœ‰</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.age = <span class=\"number\">21</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype.showName = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">window</span>.alert(<span class=\"keyword\">this</span>.name);</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype.showAge = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">window</span>.alert(<span class=\"keyword\">this</span>.age);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> Person();</div><div class=\"line\">p1.showName();</div><div class=\"line\">p1.showAge();</div></pre></td></tr></table></figure>\n</li>\n<li><p>ç»§æ‰¿</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// js é‡Œé¢æ˜¯å¯¹è±¡å†’å……æ¥ç»§æ‰¿çš„ ä¸ç®—æ˜¯çœŸæ­£çš„ç»§æ‰¿ é€šè¿‡å¯¹è±¡å†’å…… jså¯ä»¥å®ç°å¤šé‡ç»§æ‰¿å’Œç»§æ‰¿çš„æ•ˆæœ ä½†æ˜¯æ²¡æœ‰Extendså…³é”®å­—</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Father</span>(<span class=\"params\">name, age</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">    <span class=\"keyword\">this</span>.age = age;</div><div class=\"line\">    <span class=\"keyword\">this</span>.show = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">window</span>.alert(<span class=\"keyword\">this</span>.name + <span class=\"string\">'---'</span> + <span class=\"keyword\">this</span>.age);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Son</span>(<span class=\"params\">name, age</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.Father = Father;</div><div class=\"line\">    <span class=\"keyword\">this</span>.Father(name, age); <span class=\"comment\">//é€šè¿‡å¯¹è±¡å†’å…… å®ç°ç»§æ‰¿ è¿™ä¸€å¥éå¸¸é‡è¦ jsæ˜¯åŠ¨æ€è¯­è¨€ ä¸æ˜¯ç¼–è¯‘è¯­è¨€ è¦æ‰§è¡Œæ‰ä¼šåˆ†é…ç©ºé—´</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">var</span> me = <span class=\"keyword\">new</span> Son(<span class=\"string\">'fj'</span>, <span class=\"number\">21</span>);</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(me.name);</div><div class=\"line\">me.show();</div></pre></td></tr></table></figure>\n</li>\n<li><p>é‡è½½</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// jsä»å¸¸ç†æ¥è¯´æ˜¯ä¸æ”¯æŒé‡è½½çš„ ä½†æ˜¯åˆå¯ä»¥è¯´æ˜¯å¤©ç„¶æ”¯æŒé‡è½½ å› ä¸ºjså¤©ç„¶æ”¯æŒå¯å˜å‚æ•° è€Œä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡arguments[]æ•°ç»„çš„é•¿åº¦åˆ¤æ–­ è€Œåšå‡ºç›¸åº”çš„å¤„ç†</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>é—­åŒ…</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// é—­åŒ…å®é™…ä¸Šè®¾è®¡ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä½•æ—¶è¢«gcå¤„ç†çš„é—®é¢˜ é—­åŒ…å’Œgcæ˜¯ç›¸å…³è”çš„</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>æ•°ç»„é•¿åº¦</p>\n  <figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// æ•°ç»„çš„é•¿åº¦æ˜¯æ ¹æ®ä¸‹æ ‡çš„æœ€å¤§è€Œç¡®å®šçš„</span></div><div class=\"line\"><span class=\"keyword\">var</span> arr = <span class=\"keyword\">new</span> <span class=\"built_in\">Array</span>();</div><div class=\"line\">arr[<span class=\"string\">'a'</span>] = <span class=\"number\">1</span>;</div><div class=\"line\">arr[<span class=\"string\">'b'</span>] = <span class=\"number\">2</span>;</div><div class=\"line\"><span class=\"built_in\">window</span>.alert(arr.length); <span class=\"comment\">// æ‰“å‡º0</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li><p>å¦‚æœå‡½æ•°ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å»ºçš„å¯¹è±¡(new), ç§°ä¹‹ä¸ºæ„é€ å‡½æ•°constructor.</p>\n</li>\n<li><p>é‡‡ç”¨64ä½æµ®ç‚¹æ ¼å¼è¡¨ç¤ºæ•°å­—ï¼Œã€€æ•´æ•°èŒƒå›´æ˜¯-9007199254570992 ~ 9007199054570992,  -2^53 ~ 2^53</p>\n</li>\n</ul>\n<p>var s1 = 0010; 8</p>\n<p>var s2 = 0x0010; 16</p>\n<p>æµ®ç‚¹æ•°<br>3.14<br>.2222<br>6.02e23<br>12.3E-32</p>\n<ul>\n<li>javascript éæ•°å­—ã€€not-a-numberã€€NaNã€€è·Ÿä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚</li>\n<li>x!=x å½“ä¸”ä»…å½“xä¸ºNaNçš„æ—¶å€™è¿”å›true.</li>\n<li>isNaN å¦‚æœå‚æ•°æ˜¯NaNæˆ–è€…éæ•°å­—çš„æ—¶å€™è¿”å›true.</li>\n<li>isFinite ç”¨æ¥æ£€æµ‹æ•°å­—æ˜¯ä¸æ˜¯æœ‰é™çš„ã€‚</li>\n</ul>\n<p>string ç”±16ä½å€¼ç»„æˆçš„ä¸å¯å˜çš„æœ‰åºåºåˆ—ã€‚</p>\n<p>boolean:</p>\n<blockquote>\n<p>undefined null 0 -0 NaN â€œâ€  ä¼šè½¬åŒ–ä¸ºfalse</p>\n</blockquote>\n<p>type of null  -&gt; object<br>type of â€˜â€™ -&gt; string<br>type of undefined -&gt; undefined<br>null == undefined -&gt; true<br>null === undefined -&gt; false</p>\n<p>å…¨å±€å±æ€§ï¼šã€€undefined, Infinity, NaN<br>å…¨å±€å‡½æ•°ï¼šã€€isNaN(), parseInt(), eval()<br>æ„é€ å‡½æ•°ï¼šã€€Date(), RegExp(), String(), Object(), Array()<br>å…¨å±€å¯¹è±¡ï¼šã€€Math, JSON</p>\n<p>Math.floor è¿”å›å°äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ã€‚<br>Math.round 1=&gt;1 1.5=&gt;2 1.6=&gt;2 -1.5=&gt;1 -1.6=&gt;2<br>Math.ceil è¿”å›è¿”å›å¤§äºæˆ–ç­‰äºxï¼Œå¹¶ä¸”ä¸ä¹‹æœ€æ¥è¿‘çš„æ•´æ•°ã€‚ å¦‚æœxæ˜¯æ­£æ•°ï¼Œåˆ™æŠŠå°æ•°â€œå…¥â€ï¼›å¦‚æœxæ˜¯è´Ÿæ•°ï¼Œåˆ™æŠŠå°æ•°â€œèˆâ€ã€‚</p>\n<p>inè¿ç®—ç¬¦<br>å¸Œæœ›å·¦ä¾§ä¸ºå­—ç¬¦ä¸²æˆ–è€…å¯ä»¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚<br>å³ä¾§æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚<br>å³ä¾§å¯¹è±¡æ˜¯å¦åŒ…å«ä¸€ä¸ªåä¸ºå·¦æ“ä½œæ•°çš„å±æ€§å€¼ã€‚</p>\n<p>instanceof<br>å·¦ä¾§ä¸ºå¯¹è±¡ï¼Œå³ä¾§ä¸ºæ ‡è¯†å¯¹è±¡çš„ç±»</p>\n<p>åŸå‹</p>\n<blockquote>\n<p>It is for example fairly trivial to build a classic model on top of it, while the other<br>is more difficult task.</p>\n</blockquote>\n<p>hasOwnProperty åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«è‡ªå®šä¹‰å±æ€§è€Œä¸æ˜¯åŸå‹é“¾ä¸Šçš„å±æ€§ã€‚</p>\n<p>hasOwnProperty æ˜¯ JavaScript ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å±æ€§ä½†æ˜¯ä¸æŸ¥æ‰¾åŸå‹é“¾çš„å‡½æ•°ã€‚</p>\n<p>JavaScript ä¸­åŸå§‹å€¼ï¼ˆundefined, null, å¸ƒå°”å€¼ï¼Œæ•°å­—å’Œå­—ç¬¦ä¸²ï¼‰å’Œå¯¹è±¡ï¼ˆåŒ…æ‹¬æ•°ç»„å’Œå‡½æ•°ï¼‰æœ‰ç€æ ¹æœ¬çš„åŒºåˆ«ï¼ŒåŸå§‹å€¼æ˜¯ä¸å¯æ›´æ”¹çš„ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æ–°è¿”å›ä¸€ä¸ªå€¼ã€‚</p>\n<p>å¯¹è±¡å’ŒåŸå§‹å€¼ä¸åŒï¼Œé¦–å…ˆï¼Œå®ƒä»–æ˜¯ å¯å˜çš„ â€”â€” å€¼å¯ä»¥ä¿®æ”¹ã€‚</p>\n<p>JavaScript ä¸­çš„æŸäº›è¿ç®—ç¬¦ä¼šåšéšå¼çš„ç±»å‹è½¬æ¢ã€‚å¦‚æœã€Œ+ã€è¿ç®—ç¬¦çš„ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå°†ä¼šæŠŠå¦å¤–ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ä¸€å…ƒã€Œ!ã€è¿ç®—ç¬¦å°†å…¶æ“ä½œæ•°è½¬æ¢ä¸ºå¸ƒå°”å€¼å¹¶å–å</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">x + <span class=\"string\">\"\"</span>      <span class=\"comment\">// ç­‰ä»·äº String(x)</span></div><div class=\"line\">+x          <span class=\"comment\">// ç­‰ä»·äº Number(x)</span></div><div class=\"line\">!!x         <span class=\"comment\">// ç­‰ä»·äº Boolean(x)</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Number</span>(<span class=\"string\">\"3\"</span>)     <span class=\"comment\">// =&gt; 3</span></div><div class=\"line\"><span class=\"built_in\">String</span>(<span class=\"literal\">false</span>)   <span class=\"comment\">// =&gt; \"false\"</span></div><div class=\"line\"><span class=\"built_in\">Boolean</span>([])     <span class=\"comment\">// =&gt; true</span></div><div class=\"line\"><span class=\"built_in\">Object</span>(<span class=\"number\">3</span>)       <span class=\"comment\">// =&gt; new Number(3)</span></div><div class=\"line\"></div><div class=\"line\">x + <span class=\"string\">\"\"</span>      <span class=\"comment\">// ç­‰ä»·äº String(x)</span></div><div class=\"line\">+x          <span class=\"comment\">// ç­‰ä»·äº Number(x)</span></div><div class=\"line\">!!x         <span class=\"comment\">// ç­‰ä»·äº Boolean(x)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> n = <span class=\"number\">17</span></div><div class=\"line\">binary_sting = n.toString(<span class=\"number\">2</span>)        <span class=\"comment\">// è½¬æ¢ä¸º \"10001\"</span></div><div class=\"line\">octal_string = <span class=\"string\">\"0\"</span> + n.toString(<span class=\"number\">8</span>)  <span class=\"comment\">// è½¬æ¢ä¸º \"021\"</span></div><div class=\"line\">hex_string = <span class=\"string\">\"0x\"</span> + n.toString(<span class=\"number\">16</span>)  <span class=\"comment\">// è½¬æ¢ä¸º \"0x11\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">\"3 blind mice\"</span>)        <span class=\"comment\">// =&gt; 3</span></div><div class=\"line\"><span class=\"built_in\">parseFloat</span>(<span class=\"string\">\" 3.14 meters\"</span>)      <span class=\"comment\">// =&gt; 3.14</span></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"number\">0xFF</span>)                  <span class=\"comment\">// =&gt; 255</span></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">\"0.1\"</span>)                 <span class=\"comment\">// =&gt; 0</span></div><div class=\"line\"><span class=\"built_in\">parseInt</span>(<span class=\"string\">\".1\"</span>)                  <span class=\"comment\">// =&gt; NaN</span></div><div class=\"line\"><span class=\"built_in\">parseFloat</span>(<span class=\"string\">\"$72.47\"</span>)            <span class=\"comment\">// =&gt; NaN</span></div></pre></td></tr></table></figure>\n<p>###å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼</p>\n<blockquote>\n<p>æ‰€æœ‰å¯¹è±¡ç»§æ‰¿äº†ä¸¤ä¸ªè½¬æ¢æ–¹æ³• toString(), valueOf()<br>toString() çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªåæ˜ è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²<br>valueOf() è¿™ä¸ªæ–¹æ³•çš„ä½œç­”å¹¶æœªè¯¦ç»†å®šä¹‰ï¼šå¦‚æœå­˜åœ¨ä»»æ„åŸå§‹å€¼ï¼Œå®ƒå°±é»˜è®¤å°†å¯¹è±¡è½¬æ¢ä¸ºè¡¨ç¤ºå®ƒçš„<br>åŸå§‹å€¼ã€‚å¤åˆå€¼é»˜è®¤è¿”å›å¯¹è±¡æœ¬èº«</p>\n</blockquote>\n<p>JavaScript ä¸­å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ç»è¿‡äº†å¦‚ä¸‹è¿™äº›æ­¥éª¤ï¼š</p>\n<p>å¦‚æœå¯¹è±¡å…·æœ‰ toString() æ–¹æ³•ï¼Œè°ƒç”¨åï¼Œå¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼ŒJavaScript å°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›<br>å¦‚æœæ²¡æœ‰ toString() æ–¹æ³•ï¼Œæˆ–è€…è¿™ä¸ªæ–¹æ³•å¹¶ä¸è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œé‚£ä¹ˆ JavaScript ä¼šè°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™è°ƒç”¨å®ƒã€‚å¦‚æœè¿”å›å€¼æ˜¯åŸå§‹å€¼ï¼Œå°±å°†è¿™ä¸ªå€¼å€¼çš„ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›<br>å¦åˆ™ï¼Œæ— æ³•ä» toString() å’Œ valueOf() è·å¾—ä¸€ä¸ªåŸå§‹å€¼ï¼Œè¿™äº›å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\"><span class=\"keyword\">typeof</span> (now +<span class=\"number\">1</span>)             <span class=\"comment\">// =&gt; \"string\" ã€Œ+ã€å°†æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></div><div class=\"line\"><span class=\"keyword\">typeof</span> (now <span class=\"number\">-1</span>)             <span class=\"comment\">// =&gt; \"number\" ã€Œ-ã€ä½¿ç”¨å¯¹è±¡åˆ°æ•°å­—çš„è½¬æ¢</span></div><div class=\"line\">now == now.toString()       <span class=\"comment\">// =&gt; true</span></div><div class=\"line\">now &gt; (now - <span class=\"number\">1</span>)             <span class=\"comment\">// =&gt; true</span></div></pre></td></tr></table></figure>\n<p>##in è¿ç®—ç¬¦</p>\n<p>å¸Œæœ›å·¦æ“ä½œæ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…å¯è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å³æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœå³ä¾§çš„å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåä¸ºå³æ“ä½œæ•°å€¼çš„å±æ€§åï¼Œé‚£ä¹ˆè¡¨è¾¾å¼è¿”å› trueã€‚</p>\n<p>##instanceof è¿ç®—ç¬¦</p>\n<p>instanceof è¿ç®—ç¬¦å¸Œæœ›å·¦ä¾§æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³æ“ä½œæ•°æ ‡è¯†å¯¹è±¡çš„ç±»ã€‚å¦‚æœå·¦ä¾§çš„å¯¹è±¡æ˜¯å³ä¾§ç±»çš„å®ä¾‹ï¼Œåˆ™è¡¨è¾¾å¼è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</p>\n<p>##â€˜use strictâ€™</p>\n<p>â€˜use strictâ€™ æ˜¯ ECMAScript 5 å¼•å…¥çš„ä¸€æ¡æŒ‡å®šã€‚éå¸¸ç±»ä¼¼è¯­å¥ä½†ä¸æ˜¯ï¼ŒåŒºåˆ«åœ¨äºï¼š</p>\n<ul>\n<li>å®ƒ ä¸åŒ…å«ä»»ä½•è¯­è¨€çš„å…³é”®å­—ï¼ŒæŒ‡ä»¤ä»…ä»…æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ç›´æ¥é‡çš„è¡¨è¾¾å¼ï¼Œå®ƒæ˜¯ä¸€æ¡æ²¡æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼è¯­å¥ï¼Œä»€ä¹ˆä¹Ÿæ²¡åš</li>\n<li>å®ƒåªèƒ½å‡ºç°åœ¨è„šæœ¬ä»£ç çš„å¼€å§‹æˆ–è€…å‡½æ•°ä½“çš„å¼€å§‹ã€ä»»ä½•å®ä½“è¯­å¥ä¹‹å‰ã€‚ä½†ä¸å¿…ä¸€å®šå‡ºç°åœ¨è„šæœ¬æˆ–è€…å‡½æ•°ä¼‘å†…çš„é¦–è¡Œ</li>\n</ul>\n<p>ä½¿ç”¨ â€˜use strictâ€™ æŒ‡ä»¤çš„ç›®çš„æ˜¯è¯´æ˜ï¼ˆè„šæœ¬æˆ–å‡½æ•°ä¸­ï¼‰åç»­çš„ä»£ç å°†ä¼šè§£æä¸ºä¸¥æ ¼ä»£ç </p>\n<ul>\n<li><p>ä¸¥æ ¼ä»£ç ä»¥ ä¸¥æ ¼æ¨¡å¼ æ‰§è¡Œï¼Œä¸¥æ ¼æ¨¡å¼æ‚ äº†è¯­è¨€çš„é‡è¦ç¼ºé™·ï¼Œå¹¶æä¾›å¥å£®çš„æŸ¥æ°åŠŸèƒ½å’Œå¢å¼ºçš„å®‰å…¨æœºåˆ¶ï¼Œå’Œéä¸¥æ ¼æ¨¡å¼çš„åŒºåˆ«å¦‚ä¸‹</p>\n</li>\n<li><p>ä¸¥æ ¼æ¨¡å¼ä¸­ ç¦æ­¢ ä½¿ç”¨ width è¯­å¥</p>\n</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½è¦å…ˆå£°æ˜ï¼Œå¦‚æœç»™ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡ã€å‡½æ•°ã€å‡½æ•°å‚æ•°ã€catch ä»å¥å‚æ•°æˆ–å…¨å±€å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼•ç”¨é”™è¯¯å¼‚å¸¸</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè°ƒç”¨çš„å‡½æ•°ï¼ˆä¸æ˜¯æ–¹æ³•ï¼‰ä¸­çš„ä¸€ä¸ª this å€¼æ˜¯ undefinedï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ this å€¼æ€»æ˜¯å…¨å±€å¯¹è±¡ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥åˆ¤æ–­å½“å‰çš„ JavaScript æ˜¯å¦æ”¯æŒä¸¥æ ¼æ¨¡å¼ var hasStrictMode = (function() { â€œuse strictâ€; return this === undefined }())</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œç»™åªè¯»å±æ€§èµ‹å€¼å’Œç»™ä¸å¯æ‰©å±•çš„å¯¹è±¡åˆ›å»ºæ–°æˆå‘˜éƒ½å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ä¸ä¼šæŠ¥é”™ï¼‰</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¼ å…¥ eval() çš„ä»£ç ä¸èƒ½åœ¨è°ƒç”¨ç¨‹åºæ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä¸­å£°æ˜å˜é‡æˆ–å®šä¹‰å‡½æ•°ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸­å¯ä»¥</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°é‡Œçš„ arguments å¯¹è±¡æ‹¥æœ‰ä¼ å…¥å‡½æ•°å€¼çš„ é™æ€å‰¯æœ¬ã€‚éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œarguments é‡Œçš„æ•°ç»„å…ƒç´ å’Œå‡½æ•°å‚æ•°éƒ½æŒ‡å‘åŒä¸€ä¸ªå€¼çš„å¼•ç”¨</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå½“ delete è¿ç®—ç¬¦åè·Ÿéšéæ³•çš„æ ‡è¯†ç¬¦ï¼ˆå˜é‡ã€å‡½æ•°ã€å½“å‡½æ•°å‚æ•°ï¼‰æ—¶ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªè¯­æ³•é”™è¯¯å¼‚å¸¸</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­è¯•å›¾åˆ é™¤ä¸€ä¸ª ä¸å¯é…ç½® çš„å±æ€§å°†æŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œè¿”å› falseï¼‰</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡ç›´æ¥é‡ä¸­å®šä¹‰ä¸¤ä¸ªæˆ–å¤šä¸ª åŒåå±æ€§ å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œå‡½æ•°å£°æ˜ä¸­å­˜åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªåŒåå‚æ•°å°†äº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œä¸å…è®¸ä½¿ç”¨å…«è¿›åˆ¶ æ•´æ•°ç›´æ¥é‡ï¼ˆä»¥ 0 ä¸ºå‰ç¼€ï¼‰</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œæ ‡è¯†ç¬¦ eval å’Œ arguments å½“åšå…³é”®å­—ï¼Œå®ƒä»¬çš„å€¼æ˜¯ä¸èƒ½æ›´æ”¹çš„ï¼Œä¸èƒ½ç»™å®ƒä»¬èµ‹å€¼ï¼Œä¹Ÿä¸èƒ½æŠŠå®ƒä»¬å£°æ˜ä¸ºå˜é‡ã€å‡½æ•°å</li>\n<li>ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œé™åˆ¶äº†å¯¹è°ƒç”¨æ ˆçš„æ£€æµ‹èƒ½åŠ›ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼çš„å‡½æ•°ä¸­ï¼Œarguments.caller å’Œ arguments.callee éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯å¼‚å¸¸<br><a href=\"http://bonsaiden.github.io/JavaScript-Garden/zh/\" target=\"_blank\" rel=\"external\">http://bonsaiden.github.io/JavaScript-Garden/zh/</a></li>\n</ul>\n"},{"layout":"post","title":"Javascript Summary","subtitle":"Javascript","date":"2016-05-19T01:30:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n# [Object.defineProperty()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)\n\n- æ„ä¹‰ä¸ä½¿ç”¨åœºæ™¯ > Object.definePropertyå¯ä»¥ç›‘å¬æŸä¸ªå¯¹è±¡çš„å±æ€§çš„è®¾ç½®ä¸å–å€¼ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰ç›¸å…³å‡½æ•°ã€‚ > PSï¼šå¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰\n- è¯­æ³• javascript Object.defineProperty(objName, propName, descriptor);\n- å‚æ•°\n    - objNameï¼šéœ€è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚\n    - propNameï¼šéœ€å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åå­—ã€‚\n    - descriptorï¼šå°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ç¬¦ã€‚\n\n```javascript\n{\n    configurable: false, // å½“ä¸”ä»…å½“configurableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼Œä¹Ÿèƒ½å¤Ÿè¢«åˆ é™¤ã€‚é»˜è®¤ä¸º falseã€‚\n    enumerable: false, // å½“ä¸”ä»…å½“enumerableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚é»˜è®¤ä¸º falseã€‚\n    value: null, // å½“å‰propNameå¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„JavaScriptå€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚é»˜è®¤ä¸º undefinedã€‚è¿™å°±æ˜¯è§£é‡Šäº†ä¸ºä»€ä¹ˆï¼šâ€å¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ã€‚â€œ\n    writable: false // å½“ä¸”ä»…å½“writableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚é»˜è®¤ä¸º falseã€‚\n    get: function() { // getteræ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›å€¼è¢«ç”¨ä½œå±æ€§å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚\n        // å…¶ä»–çš„ä»£ç â€¦\n        return 'self define value'; // ä¹Ÿå¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤ä¸º undefined\n    },\n    set: function(_val) { // setteræ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚è¯¥æ–¹æ³•å°†æ¥å—å”¯ä¸€å‚æ•°ï¼Œå¹¶å°†è¯¥å‚æ•°çš„æ–°å€¼åˆ†é…ç»™è¯¥å±æ€§ã€‚\n        // å…¶ä»–çš„ä»£ç â€¦\n    }\n}\n```\n> PS: æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½æ··åˆä½¿ç”¨ã€‚æ¯”å¦‚get å’Œ valueä¸å¯ä»¥å…±å­˜ã€‚\n\n* è¿”å›å€¼ > è¿”å›ä¼ å…¥å‡½æ•°çš„å¯¹è±¡ï¼Œå³ç¬¬ä¸€ä¸ªå‚æ•°obj\n\n# ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\n\n* [Window.getComputedStyle()](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle)\n* [HTMLElement.style](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/style)\n* [Element.currentStyle](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/currentStyle)\n\n\n> widow.getComputedStyle (è·å–cssä¸­è®¾ç½®çš„æ ·å¼ï¼Œ'å‡†æµè§ˆå™¨'ã€‚è¿”å›çš„å¯¹è±¡ä¸­ï¼Œé©¼å³°å‘½åå’Œä¸­åˆ’çº¿å‘½åçš„éƒ½æœ‰ï¼Œå¦‚ï¼šbackground-colorå’ŒbackgroundColoréƒ½æœ‰ã€‚ element.style (è·å–çš„æ˜¯å…ƒç´ è¡Œé—´è®¾ç½®çš„æ ·å¼) element.currentStyle (ieä½ç‰ˆæœ¬)\n\n```javascript\n// è·å–æŒ‡å®šå…ƒç´ çš„æŸä¸ªCSSæ ·å¼ï¼Œå…¼å®¹IE\nvar getStyle = function($el, _attr) {\n    if(window.getComputedStyle) {\n        return window.getComputedStyle($el, null)[_attr]\n    }\n    if($el.currentStyle) {\n        return $el.currentStyle[_attr];\n    }\n    return $el.style[_attr];\n}\n\nvar getBG = function($el) {\n    var color = getStyle($el, 'backgroundColor');\n    if(color === 'rgba(0, 0, 0, 0)' || color === 'transparent') { // åˆ¤æ–­æ˜¯å¦é€æ˜\n        return $el.tagName === 'HTML' ? 'rgb(255, 255, 255)' : arguments.callee($el.parentNode, 'backgroundColor');\n    } else {\n        return color;\n    }\n}\n```\n","source":"_posts/2017-01-19-javascript-summary.markdown","raw":"---\nlayout:     post\ntitle:      \"Javascript Summary\"\nsubtitle:   \"Javascript\"\ndate:       2016-05-19 09:30:00\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Javascript\n---\n\n# [Object.defineProperty()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)\n\n- æ„ä¹‰ä¸ä½¿ç”¨åœºæ™¯ > Object.definePropertyå¯ä»¥ç›‘å¬æŸä¸ªå¯¹è±¡çš„å±æ€§çš„è®¾ç½®ä¸å–å€¼ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰ç›¸å…³å‡½æ•°ã€‚ > PSï¼šå¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰\n- è¯­æ³• javascript Object.defineProperty(objName, propName, descriptor);\n- å‚æ•°\n    - objNameï¼šéœ€è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚\n    - propNameï¼šéœ€å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åå­—ã€‚\n    - descriptorï¼šå°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ç¬¦ã€‚\n\n```javascript\n{\n    configurable: false, // å½“ä¸”ä»…å½“configurableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼Œä¹Ÿèƒ½å¤Ÿè¢«åˆ é™¤ã€‚é»˜è®¤ä¸º falseã€‚\n    enumerable: false, // å½“ä¸”ä»…å½“enumerableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚é»˜è®¤ä¸º falseã€‚\n    value: null, // å½“å‰propNameå¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„JavaScriptå€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚é»˜è®¤ä¸º undefinedã€‚è¿™å°±æ˜¯è§£é‡Šäº†ä¸ºä»€ä¹ˆï¼šâ€å¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ã€‚â€œ\n    writable: false // å½“ä¸”ä»…å½“writableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚é»˜è®¤ä¸º falseã€‚\n    get: function() { // getteræ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›å€¼è¢«ç”¨ä½œå±æ€§å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚\n        // å…¶ä»–çš„ä»£ç â€¦\n        return 'self define value'; // ä¹Ÿå¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤ä¸º undefined\n    },\n    set: function(_val) { // setteræ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚è¯¥æ–¹æ³•å°†æ¥å—å”¯ä¸€å‚æ•°ï¼Œå¹¶å°†è¯¥å‚æ•°çš„æ–°å€¼åˆ†é…ç»™è¯¥å±æ€§ã€‚\n        // å…¶ä»–çš„ä»£ç â€¦\n    }\n}\n```\n> PS: æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½æ··åˆä½¿ç”¨ã€‚æ¯”å¦‚get å’Œ valueä¸å¯ä»¥å…±å­˜ã€‚\n\n* è¿”å›å€¼ > è¿”å›ä¼ å…¥å‡½æ•°çš„å¯¹è±¡ï¼Œå³ç¬¬ä¸€ä¸ªå‚æ•°obj\n\n# ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\n\n* [Window.getComputedStyle()](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle)\n* [HTMLElement.style](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/style)\n* [Element.currentStyle](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/currentStyle)\n\n\n> widow.getComputedStyle (è·å–cssä¸­è®¾ç½®çš„æ ·å¼ï¼Œ'å‡†æµè§ˆå™¨'ã€‚è¿”å›çš„å¯¹è±¡ä¸­ï¼Œé©¼å³°å‘½åå’Œä¸­åˆ’çº¿å‘½åçš„éƒ½æœ‰ï¼Œå¦‚ï¼šbackground-colorå’ŒbackgroundColoréƒ½æœ‰ã€‚ element.style (è·å–çš„æ˜¯å…ƒç´ è¡Œé—´è®¾ç½®çš„æ ·å¼) element.currentStyle (ieä½ç‰ˆæœ¬)\n\n```javascript\n// è·å–æŒ‡å®šå…ƒç´ çš„æŸä¸ªCSSæ ·å¼ï¼Œå…¼å®¹IE\nvar getStyle = function($el, _attr) {\n    if(window.getComputedStyle) {\n        return window.getComputedStyle($el, null)[_attr]\n    }\n    if($el.currentStyle) {\n        return $el.currentStyle[_attr];\n    }\n    return $el.style[_attr];\n}\n\nvar getBG = function($el) {\n    var color = getStyle($el, 'backgroundColor');\n    if(color === 'rgba(0, 0, 0, 0)' || color === 'transparent') { // åˆ¤æ–­æ˜¯å¦é€æ˜\n        return $el.tagName === 'HTML' ? 'rgb(255, 255, 255)' : arguments.callee($el.parentNode, 'backgroundColor');\n    } else {\n        return color;\n    }\n}\n```\n","slug":"2017-01-19-javascript-summary","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxo0015mmt79ykmel8g","content":"<h1 id=\"Object-defineProperty\"><a href=\"#Object-defineProperty\" class=\"headerlink\" title=\"Object.defineProperty()\"></a><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\" target=\"_blank\" rel=\"external\">Object.defineProperty()</a></h1><ul>\n<li>æ„ä¹‰ä¸ä½¿ç”¨åœºæ™¯ &gt; Object.definePropertyå¯ä»¥ç›‘å¬æŸä¸ªå¯¹è±¡çš„å±æ€§çš„è®¾ç½®ä¸å–å€¼ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰ç›¸å…³å‡½æ•°ã€‚ &gt; PSï¼šå¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰</li>\n<li>è¯­æ³• javascript Object.defineProperty(objName, propName, descriptor);</li>\n<li>å‚æ•°<ul>\n<li>objNameï¼šéœ€è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚</li>\n<li>propNameï¼šéœ€å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åå­—ã€‚</li>\n<li>descriptorï¼šå°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ç¬¦ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"attr\">configurable</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// å½“ä¸”ä»…å½“configurableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼Œä¹Ÿèƒ½å¤Ÿè¢«åˆ é™¤ã€‚é»˜è®¤ä¸º falseã€‚</span></div><div class=\"line\">    enumerable: <span class=\"literal\">false</span>, <span class=\"comment\">// å½“ä¸”ä»…å½“enumerableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚é»˜è®¤ä¸º falseã€‚</span></div><div class=\"line\">    value: <span class=\"literal\">null</span>, <span class=\"comment\">// å½“å‰propNameå¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„JavaScriptå€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚é»˜è®¤ä¸º undefinedã€‚è¿™å°±æ˜¯è§£é‡Šäº†ä¸ºä»€ä¹ˆï¼šâ€å¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ã€‚â€œ</span></div><div class=\"line\">    writable: <span class=\"literal\">false</span> <span class=\"comment\">// å½“ä¸”ä»…å½“writableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚é»˜è®¤ä¸º falseã€‚</span></div><div class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// getteræ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›å€¼è¢«ç”¨ä½œå±æ€§å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚</span></div><div class=\"line\">        <span class=\"comment\">// å…¶ä»–çš„ä»£ç â€¦</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'self define value'</span>; <span class=\"comment\">// ä¹Ÿå¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤ä¸º undefined</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"attr\">set</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">_val</span>) </span>&#123; <span class=\"comment\">// setteræ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚è¯¥æ–¹æ³•å°†æ¥å—å”¯ä¸€å‚æ•°ï¼Œå¹¶å°†è¯¥å‚æ•°çš„æ–°å€¼åˆ†é…ç»™è¯¥å±æ€§ã€‚</span></div><div class=\"line\">        <span class=\"comment\">// å…¶ä»–çš„ä»£ç â€¦</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>PS: æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½æ··åˆä½¿ç”¨ã€‚æ¯”å¦‚get å’Œ valueä¸å¯ä»¥å…±å­˜ã€‚</p>\n</blockquote>\n<ul>\n<li>è¿”å›å€¼ &gt; è¿”å›ä¼ å…¥å‡½æ•°çš„å¯¹è±¡ï¼Œå³ç¬¬ä¸€ä¸ªå‚æ•°obj</li>\n</ul>\n<h1 id=\"ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\"><a href=\"#ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\" class=\"headerlink\" title=\"ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\"></a>ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚</h1><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle\" target=\"_blank\" rel=\"external\">Window.getComputedStyle()</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/style\" target=\"_blank\" rel=\"external\">HTMLElement.style</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/currentStyle\" target=\"_blank\" rel=\"external\">Element.currentStyle</a></li>\n</ul>\n<blockquote>\n<p>widow.getComputedStyle (è·å–cssä¸­è®¾ç½®çš„æ ·å¼ï¼Œâ€™å‡†æµè§ˆå™¨â€™ã€‚è¿”å›çš„å¯¹è±¡ä¸­ï¼Œé©¼å³°å‘½åå’Œä¸­åˆ’çº¿å‘½åçš„éƒ½æœ‰ï¼Œå¦‚ï¼šbackground-colorå’ŒbackgroundColoréƒ½æœ‰ã€‚ element.style (è·å–çš„æ˜¯å…ƒç´ è¡Œé—´è®¾ç½®çš„æ ·å¼) element.currentStyle (ieä½ç‰ˆæœ¬)</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// è·å–æŒ‡å®šå…ƒç´ çš„æŸä¸ªCSSæ ·å¼ï¼Œå…¼å®¹IE</span></div><div class=\"line\"><span class=\"keyword\">var</span> getStyle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$el, _attr</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">window</span>.getComputedStyle) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.getComputedStyle($el, <span class=\"literal\">null</span>)[_attr]</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>($el.currentStyle) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> $el.currentStyle[_attr];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> $el.style[_attr];</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> getBG = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$el</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> color = getStyle($el, <span class=\"string\">'backgroundColor'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span>(color === <span class=\"string\">'rgba(0, 0, 0, 0)'</span> || color === <span class=\"string\">'transparent'</span>) &#123; <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦é€æ˜</span></div><div class=\"line\">        <span class=\"keyword\">return</span> $el.tagName === <span class=\"string\">'HTML'</span> ? <span class=\"string\">'rgb(255, 255, 255)'</span> : <span class=\"built_in\">arguments</span>.callee($el.parentNode, <span class=\"string\">'backgroundColor'</span>);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> color;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Object-defineProperty\"><a href=\"#Object-defineProperty\" class=\"headerlink\" title=\"Object.defineProperty()\"></a><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\" target=\"_blank\" rel=\"external\">Object.defineProperty()</a></h1><ul>\n<li>æ„ä¹‰ä¸ä½¿ç”¨åœºæ™¯ &gt; Object.definePropertyå¯ä»¥ç›‘å¬æŸä¸ªå¯¹è±¡çš„å±æ€§çš„è®¾ç½®ä¸å–å€¼ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰ç›¸å…³å‡½æ•°ã€‚ &gt; PSï¼šå¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰</li>\n<li>è¯­æ³• javascript Object.defineProperty(objName, propName, descriptor);</li>\n<li>å‚æ•°<ul>\n<li>objNameï¼šéœ€è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚</li>\n<li>propNameï¼šéœ€å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åå­—ã€‚</li>\n<li>descriptorï¼šå°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ç¬¦ã€‚</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"attr\">configurable</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// å½“ä¸”ä»…å½“configurableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼Œä¹Ÿèƒ½å¤Ÿè¢«åˆ é™¤ã€‚é»˜è®¤ä¸º falseã€‚</span></div><div class=\"line\">    enumerable: <span class=\"literal\">false</span>, <span class=\"comment\">// å½“ä¸”ä»…å½“enumerableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½å¤Ÿå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚é»˜è®¤ä¸º falseã€‚</span></div><div class=\"line\">    value: <span class=\"literal\">null</span>, <span class=\"comment\">// å½“å‰propNameå¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„JavaScriptå€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚é»˜è®¤ä¸º undefinedã€‚è¿™å°±æ˜¯è§£é‡Šäº†ä¸ºä»€ä¹ˆï¼šâ€å¯¹è±¡åˆå§‹åŒ–çš„å€¼ä¼šè¢«æ¸…ç©ºï¼Œå®šä¹‰åˆå§‹å€¼åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ã€‚â€œ</span></div><div class=\"line\">    writable: <span class=\"literal\">false</span> <span class=\"comment\">// å½“ä¸”ä»…å½“writableä¸ºtrueæ—¶ï¼Œå½“å‰propNameæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚é»˜è®¤ä¸º falseã€‚</span></div><div class=\"line\">    get: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// getteræ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›å€¼è¢«ç”¨ä½œå±æ€§å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚</span></div><div class=\"line\">        <span class=\"comment\">// å…¶ä»–çš„ä»£ç â€¦</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'self define value'</span>; <span class=\"comment\">// ä¹Ÿå¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤ä¸º undefined</span></div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"attr\">set</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">_val</span>) </span>&#123; <span class=\"comment\">// setteræ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚è¯¥æ–¹æ³•å°†æ¥å—å”¯ä¸€å‚æ•°ï¼Œå¹¶å°†è¯¥å‚æ•°çš„æ–°å€¼åˆ†é…ç»™è¯¥å±æ€§ã€‚</span></div><div class=\"line\">        <span class=\"comment\">// å…¶ä»–çš„ä»£ç â€¦</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>PS: æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½æ··åˆä½¿ç”¨ã€‚æ¯”å¦‚get å’Œ valueä¸å¯ä»¥å…±å­˜ã€‚</p>\n</blockquote>\n<ul>\n<li>è¿”å›å€¼ &gt; è¿”å›ä¼ å…¥å‡½æ•°çš„å¯¹è±¡ï¼Œå³ç¬¬ä¸€ä¸ªå‚æ•°obj</li>\n</ul>\n<h1 id=\"ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\"><a href=\"#ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\" class=\"headerlink\" title=\"ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚\"></a>ç”¨JSæ±‚å‡ºå…ƒç´ çš„æœ€ç»ˆçš„background-colorï¼Œä¸è€ƒè™‘å…ƒç´ floatæƒ…å†µã€‚</h1><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle\" target=\"_blank\" rel=\"external\">Window.getComputedStyle()</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/style\" target=\"_blank\" rel=\"external\">HTMLElement.style</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/currentStyle\" target=\"_blank\" rel=\"external\">Element.currentStyle</a></li>\n</ul>\n<blockquote>\n<p>widow.getComputedStyle (è·å–cssä¸­è®¾ç½®çš„æ ·å¼ï¼Œâ€™å‡†æµè§ˆå™¨â€™ã€‚è¿”å›çš„å¯¹è±¡ä¸­ï¼Œé©¼å³°å‘½åå’Œä¸­åˆ’çº¿å‘½åçš„éƒ½æœ‰ï¼Œå¦‚ï¼šbackground-colorå’ŒbackgroundColoréƒ½æœ‰ã€‚ element.style (è·å–çš„æ˜¯å…ƒç´ è¡Œé—´è®¾ç½®çš„æ ·å¼) element.currentStyle (ieä½ç‰ˆæœ¬)</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// è·å–æŒ‡å®šå…ƒç´ çš„æŸä¸ªCSSæ ·å¼ï¼Œå…¼å®¹IE</span></div><div class=\"line\"><span class=\"keyword\">var</span> getStyle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$el, _attr</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">window</span>.getComputedStyle) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.getComputedStyle($el, <span class=\"literal\">null</span>)[_attr]</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span>($el.currentStyle) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> $el.currentStyle[_attr];</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> $el.style[_attr];</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> getBG = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$el</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> color = getStyle($el, <span class=\"string\">'backgroundColor'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span>(color === <span class=\"string\">'rgba(0, 0, 0, 0)'</span> || color === <span class=\"string\">'transparent'</span>) &#123; <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦é€æ˜</span></div><div class=\"line\">        <span class=\"keyword\">return</span> $el.tagName === <span class=\"string\">'HTML'</span> ? <span class=\"string\">'rgb(255, 255, 255)'</span> : <span class=\"built_in\">arguments</span>.callee($el.parentNode, <span class=\"string\">'backgroundColor'</span>);</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> color;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"ä¸‹ä¸€ä»£ Web åº”ç”¨æ¨¡å‹ â€”â€” Progressive Web App","subtitle":"The Next Generation Application Model For The Web - Progressive Web App","date":"2017-02-09T04:00:00.000Z","author":"Hux","header-img":"img/post-bg-nextgen-web-pwa.jpg","header-mask":0.3,"catalog":true,"_content":"\n\n\n> æœ¬æ–‡é¦–å‘äº[ã€Šç¨‹åºå‘˜ã€‹](http://geek.csdn.net/news/detail/135595)ï¼Œå‘å¸ƒäº [Hux Blog](https://huangxuan.me)ã€[å‰ç«¯å¤–åˆŠè¯„è®º](https://zhuanlan.zhihu.com/FrontendMagazine)ï¼Œè½¬è½½è¯·ä¿ç•™é“¾æ¥ ;)\n\n\n## ä¸‹ä¸€ä»£ Web åº”ç”¨ï¼Ÿ\n\nè¿‘å¹´æ¥ï¼ŒWeb åº”ç”¨åœ¨æ•´ä¸ªè½¯ä»¶ä¸äº’è”ç½‘è¡Œä¸šæ‰¿è½½çš„è´£ä»»è¶Šæ¥è¶Šé‡ï¼Œè½¯ä»¶å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬è¶Šæ¥è¶Šé«˜ï¼ŒWeb æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯ Web å®¢æˆ·ç«¯æŠ€æœ¯ï¼Œè¿æ¥äº†çˆ†å‘å¼çš„å‘å±•ã€‚\n\nåŒ…æ‹¬ä½†ä¸é™äºåŸºäº Node.js çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼›è¯¸å¦‚ Webpackã€Rollup è¿™æ ·çš„æ‰“åŒ…å·¥å…·ï¼›Babelã€PostCSS è¿™æ ·çš„è½¬è¯‘å·¥å…·ï¼›TypeScriptã€Elm è¿™æ ·è½¬è¯‘è‡³ JavaScript çš„ç¼–ç¨‹è¯­è¨€ï¼›Reactã€Angularã€Vue è¿™æ ·é¢å‘ç°ä»£ web åº”ç”¨éœ€æ±‚çš„å‰ç«¯æ¡†æ¶åŠå…¶ç”Ÿæ€ï¼Œä¹Ÿæ¶Œç°å‡ºäº†åƒ[åŒæ„ JavaScript][1]ä¸[é€šç”¨ JavaScript åº”ç”¨][2]è¿™æ ·å°†æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆServer-side Renderingï¼‰ä¸å•é¡µé¢åº”ç”¨æ¨¡å‹ï¼ˆSingle-page Appï¼‰ç»“åˆçš„ web åº”ç”¨æ¶æ„æ–¹å¼ï¼Œå¯ä»¥è¯´æ˜¯ç™¾èŠ±é½æ”¾ã€‚\n\nä½†æ˜¯ï¼ŒWeb åº”ç”¨åœ¨ç§»åŠ¨æ—¶ä»£å¹¶æ²¡æœ‰è¾¾åˆ°å…¶åœ¨æ¡Œé¢è®¾å¤‡ä¸Šæµè¡Œçš„ç¨‹åº¦ã€‚ç©¶å…¶åŸå› ï¼Œå°½ç®¡ä¸Šè¿°çš„å„ç§æ–¹æ¡ˆå·²ç»å……åˆ†åˆ©ç”¨äº†ç°æœ‰çš„ JavaScript è®¡ç®—èƒ½åŠ›ã€CSS å¸ƒå±€èƒ½åŠ›ã€HTTP ç¼“å­˜ä¸æµè§ˆå™¨ API å¯¹å½“ä»£åŸºäº [Ajax][3] ä¸[å“åº”å¼è®¾è®¡][4]çš„ web åº”ç”¨æ¨¡å‹çš„æ€§èƒ½ä¸ä½“éªŒå¸¦æ¥äº†å·¥ç¨‹è§’åº¦çš„å·¨å¤§çªç ´ï¼Œæˆ‘ä»¬ä»ç„¶æ— æ³•åœ¨ä¸å€ŸåŠ©åŸç”Ÿç¨‹åºè¾…åŠ©æµè§ˆå™¨çš„å‰æä¸‹çªç ´ web å¹³å°æœ¬èº«å¯¹ web åº”ç”¨å›ºæœ‰çš„æ¡æ¢ï¼š**å®¢æˆ·ç«¯è½¯ä»¶ï¼ˆå³ç½‘é¡µï¼‰éœ€è¦ä¸‹è½½æ‰€å¸¦æ¥çš„ç½‘ç»œå»¶è¿Ÿï¼›ä¸ Web åº”ç”¨ä¾èµ–æµè§ˆå™¨ä½œä¸ºå…¥å£æ‰€å¸¦æ¥çš„ä½“éªŒé—®é¢˜ã€‚**\n\n![](/img/in-post/post-nextgen-web-pwa/PWAR-007.jpeg)\n*Web ä¸åŸç”Ÿåº”ç”¨åœ¨ç§»åŠ¨å¹³å°ä¸Šçš„ä½¿ç”¨æ—¶é•¿å¯¹æ¯” [å›¾ç‰‡æ¥æº: Google][i2]*\n\nåœ¨æ¡Œé¢è®¾å¤‡ä¸Šï¼Œç”±äºç½‘ç»œæ¡ä»¶ç¨³å®šï¼Œå±å¹•å°ºå¯¸å……åˆ†ï¼Œäº¤äº’æ–¹å¼è¶‹å‘äºå¤šä»»åŠ¡ï¼Œè¿™ä¸¤ç‚¹é€ æˆçš„è´Ÿé¢å½±å“å¯¹æ¯” web åº”ç”¨å…äºå®‰è£…ã€éšå«éšåˆ°ã€æ— éœ€æ›´æ–°ç­‰ä¼˜ç‚¹ï¼Œç‘•ä¸æ©ç‘œã€‚ä½†æ˜¯åœ¨ç§»åŠ¨æ—¶ä»£ï¼Œè„†å¼±çš„ç½‘ç»œè¿æ¥ä¸å…¨æ–°çš„äººæœºäº¤äº’æ–¹å¼ä½¿å¾—è¿™ä¸¤ä¸ªé—®é¢˜è¢«æ— é™æ”¾å¤§ï¼Œä¸¥é‡åˆ¶çº¦äº† web åº”ç”¨åœ¨ç§»åŠ¨å¹³å°çš„å‘å±•ã€‚åœ¨ç”¨æˆ·çœ¼é‡Œï¼ŒåŸç”Ÿåº”ç”¨ä¸ä¼šå‡ºç°ã€Œç™½å±ã€ï¼Œæ¸…ä¸€è‰²éƒ½æ‘†åœ¨ä¸»å±å¹•ä¸Šï¼›è€Œ web åº”ç”¨åˆ™æ˜¯æµè§ˆå™¨è¿™ä¸ªåº”ç”¨ä¸­çš„åº”ç”¨ï¼Œä½¿ç”¨èµ·æ¥å¹¶ä¸æ–¹ä¾¿ï¼Œè€Œä¸”åŠ è½½ä¹Ÿæ¯”åŸç”Ÿåº”ç”¨è¦æ…¢ã€‚\n\nProgressive Web Appsï¼ˆä»¥ä¸‹ç®€ç§° PWAï¼‰ä»¥åŠæ„æˆ PWA çš„ä¸€ç³»åˆ—å…³é”®æŠ€æœ¯çš„å‡ºç°ï¼Œç»ˆäºè®©æˆ‘ä»¬çœ‹åˆ°äº†å½»åº•è§£å†³è¿™ä¸¤ä¸ªå¹³å°çº§åˆ«é—®é¢˜çš„æ›™å…‰ï¼šèƒ½å¤Ÿæ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦ã€ç”šè‡³è®© web åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä½¿ç”¨çš„ Service Worker ä¸ Cache Storageï¼›ç”¨äºæè¿° web åº”ç”¨å…ƒæ•°æ®ï¼ˆmetadataï¼‰ã€è®© web åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±ã€å…¨å±æ‰§è¡Œçš„ Web App Manifestï¼›ä»¥åŠè¿›ä¸€æ­¥æé«˜ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›ï¼Œè®© web åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥çš„ Push API ä¸ Notification API ç­‰ç­‰ã€‚\n\nå°†è¿™äº›æŠ€æœ¯ç»„åˆåœ¨ä¸€èµ·ä¼šæ˜¯æ€æ ·çš„æ•ˆæœå‘¢ï¼Ÿã€Œå°åº¦é˜¿é‡Œå·´å·´ã€ â€”â€” [Flipkart][17] åœ¨ 2015 å¹´ä¸€åº¦å…³é—­äº†è‡ªå·±çš„ç§»åŠ¨ç«¯ç½‘ç«™ï¼Œå´åœ¨å¹´åº•å‘å¸ƒäº†ç°åœ¨æœ€ä¸ºäººæ´¥æ´¥ä¹é“çš„ PWA æ¡ˆä¾‹ *FlipKart Lite*ï¼Œæˆä¸ºä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæ”¯æ’‘å¤§è§„æ¨¡ä¸šåŠ¡çš„ PWAã€‚å‘å¸ƒçš„ä¸€å‘¨åå®ƒå°±äº®ç›¸äº [Chrome Dev Summit 2015][15] ä¸Šï¼Œç¬”è€…å½“æ—¶å°±è¢«æƒŠè‰³åˆ°äº†ã€‚ä¸ºäº†æ–¹ä¾¿å„åª’ä»‹ä¸Šçš„è¯»è€…è§‚çœ‹ï¼Œç¬”è€…åšäº†å‡ å¹…å›¾æ–¹ä¾¿ç»™å¤§å®¶ä»‹ç»ï¼š\n\n![](/img/in-post/post-nextgen-web-pwa/flipkart-1.jpeg)\n*å›¾ç‰‡æ¥æº: Hux & [Medium.com][i3]*\n\nå½“æµè§ˆå™¨å‘ç°ç”¨æˆ·[éœ€è¦][16] Flipkart Lite æ—¶ï¼Œå®ƒå°±ä¼šæç¤ºç”¨æˆ·ã€Œå˜¿ï¼Œä½ å¯ä»¥æŠŠå®ƒæ·»åŠ è‡³ä¸»å±å“¦ã€ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼‰ã€‚è¿™æ ·ï¼ŒFlipkart Lite å°±ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·åœ¨ä¸»å±ä¸Šç•™ä¸‹ä¸€ä¸ªè‡ªå®šä¹‰çš„ icon ä½œä¸ºå…¥å£ï¼›ä¸ä¸€èˆ¬çš„ä¹¦ç­¾ä¸åŒï¼Œå½“ç”¨æˆ·ç‚¹å‡» icon æ—¶ï¼ŒFlipkat Lite å°†ç›´æ¥å…¨å±æ‰“å¼€ï¼Œä¸å†å—å›°äºæµè§ˆå™¨çš„ UI ä¸­ï¼Œè€Œä¸”æœ‰è‡ªå·±çš„å¯åŠ¨å±æ•ˆæœã€‚\n\n\n![](/img/in-post/post-nextgen-web-pwa/flipkart-2.jpeg)\n*å›¾ç‰‡æ¥æº: Hux & [Medium.com][i3]*\n\næ›´å¼ºå¤§çš„æ˜¯ï¼Œåœ¨æ— æ³•è®¿é—®ç½‘ç»œæ—¶ï¼ŒFlipkart Lite å¯ä»¥åƒåŸç”Ÿåº”ç”¨ä¸€æ ·ç…§å¸¸æ‰§è¡Œï¼Œè¿˜ä¼šå¾ˆéªšæ°”çš„å˜æˆé»‘ç™½è‰²ï¼›ä¸ä½†å¦‚æ­¤ï¼Œæ›¾ç»è®¿é—®è¿‡çš„å•†å“éƒ½ä¼šè¢«ç¼“å­˜ä¸‹æ¥å¾—ä»¥åœ¨ç¦»çº¿æ—¶ç»§ç»­è®¿é—®ã€‚åœ¨å•†å“é™ä»·ã€ä¿ƒé”€ç­‰æ—¶åˆ»ï¼ŒFlipkart Lite ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·å‘èµ·æ¨é€é€šçŸ¥ï¼Œå¸å¼•ç”¨æˆ·å›åˆ°åº”ç”¨ã€‚\n\n**æ— éœ€æ‹…å¿ƒç½‘ç»œå»¶è¿Ÿï¼›æœ‰ç€ç‹¬ç«‹å…¥å£ä¸ç‹¬ç«‹çš„ä¿æ´»æœºåˆ¶ã€‚**ä¹‹å‰ä¸¤ä¸ªé—®é¢˜çš„ä¸€å¹¶è§£å†³ï¼Œå®£å‘Šç€ web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æµ´ç«é‡ç”Ÿï¼šæ»¡è¶³ PWA æ¨¡å‹çš„ web åº”ç”¨ï¼Œå°†é€æ¸æˆä¸ºç§»åŠ¨æ“ä½œç³»ç»Ÿçš„ä¸€ç­‰å…¬æ°‘ï¼Œå¹¶å°†å‘åŸç”Ÿåº”ç”¨å‘èµ·æŒ‘æˆ˜ä¸ã€Œå¤ä»‡ã€ã€‚\n\næ›´ä»¤ç¬”è€…å…´å¥‹çš„æ˜¯ï¼Œå°±åœ¨ä»Šå¹´ 11 æœˆçš„ [Chrome Dev Summit 2016][18] ä¸Šï¼ŒChrome çš„å·¥ç¨‹ VP Darin Fisher ä»‹ç»äº† Chrome å›¢é˜Ÿæ­£åœ¨åšçš„ä¸€äº›å®éªŒï¼šæŠŠã€Œæ·»åŠ è‡³ä¸»å±ã€é‡å‘½åä¸ºã€Œå®‰è£…ã€ï¼Œè¢«å®‰è£…çš„ PWA ä¸å†ä»…ä»¥ widget çš„å½¢å¼æ˜¾ç¤ºåœ¨æ¡Œé¢ä¸Šï¼Œè€Œæ˜¯çœŸæ­£åšåˆ°ä¸æ‰€æœ‰åŸç”Ÿåº”ç”¨å¹³çº§ï¼Œä¸€æ ·è¢«æ”¶çº³è¿›åº”ç”¨æŠ½å±‰ï¼ˆApp Drawerï¼‰é‡Œï¼Œä¸€æ ·å‡ºç°åœ¨ç³»ç»Ÿè®¾ç½®ä¸­ ğŸ‰ğŸ‰ğŸ‰ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/flipkart-3.jpeg)\n*å›¾ç‰‡æ¥æº: Hux & [@adityapunjani][i4]*\n\nå›¾ä¸­ä»å·¦åˆ°å³åˆ†åˆ«ä¸ºï¼šç±»ä¼¼åŸç”Ÿåº”ç”¨çš„å®‰è£…ç•Œé¢ï¼›è¢«æ”¶çº³åœ¨åº”ç”¨æŠ½å±‰é‡Œçš„ Flipkart Lite ä¸ Hux Blogï¼›è®¾ç½®ç•Œé¢ä¸­å¹¶åˆ—å‡ºç°çš„ Flipkart åŸç”Ÿåº”ç”¨ä¸ Flipkart Lite PWA ï¼ˆå¯ä»¥çœ‹åˆ° PWA å·¨å¤§çš„ä½“ç§¯ä¼˜åŠ¿ï¼‰\n\n**ç¬”è€…ç›¸ä¿¡ï¼ŒPWA æ¨¡å‹å°†ç»§çº¦ 20 å¹´å‰æ¨ªç©ºå‡ºä¸–çš„ Ajax ä¸çº¦ 10 å¹´å‰é£é¡ç§»åŠ¨äº’è”ç½‘çš„å“åº”å¼è®¾è®¡ä¹‹åï¼Œæ€èµ· web åº”ç”¨æ¨¡å‹çš„ç¬¬ä¸‰æ¬¡æ ¹æœ¬æ€§é©å‘½ï¼Œå°† web åº”ç”¨å¸¦è¿›ä¸€ä¸ªå…¨æ–°çš„æ—¶ä»£ã€‚**\n\n## PWA å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\n\n### [Web App Manifest][spec1]\n\nWeb App Manifestï¼Œå³é€šè¿‡ä¸€ä¸ªæ¸…å•æ–‡ä»¶å‘æµè§ˆå™¨æš´éœ² web åº”ç”¨çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åå­—ã€icon çš„ URL ç­‰ï¼Œä»¥å¤‡æµè§ˆå™¨ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ·»åŠ è‡³ä¸»å±æˆ–æ¨é€é€šçŸ¥æ—¶æš´éœ²ç»™æ“ä½œç³»ç»Ÿï¼Œä»è€Œå¢å¼º web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿçš„é›†æˆèƒ½åŠ›ã€‚\n\nè®© web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä½“éªŒæ›´æ¥è¿‘åŸç”Ÿåº”ç”¨çš„å°è¯•å…¶å®æ—©åœ¨ 2008 å¹´çš„ [iOS 1.1.3 ä¸ iOS 2.1.0 ][q37]æ—¶å°±å¼€å§‹äº†ï¼Œå®ƒä»¬åˆ†åˆ«ä¸º web åº”ç”¨å¢åŠ äº†å¯¹è‡ªå®šä¹‰ icon å’Œå…¨å±æ‰“å¼€çš„æ”¯æŒã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/ios2-a2hs.gif)\n*å›¾ç‰‡æ¥æº: [appleinsider.com][i1]*\n\nä½†æ˜¯å¾ˆå¿«ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„ç§æœ‰å¹³å°é€šè¿‡ `<meta>`/`<link>` æ ‡ç­¾æ¥ä¸º web åº”ç”¨æ·»åŠ ã€Œç§è´§ã€ï¼Œ`<head>` å¾ˆå¿«å°±è¢«å¡æ»¡äº†ï¼š\n\n```html\n<!-- Add to homescreen for Safari on iOS -->\n<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\">\n<meta name=\"apple-mobile-web-app-title\" content=\"Lighten\">\n\n<!-- Add to homescreen for Chrome on Android -->\n<meta name=\"mobile-web-app-capable\" content=\"yes\">\n<mate name=\"theme-color\" content=\"#000000\">\n\n<!-- Icons for iOS and Android Chrome M31~M38 -->\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"images/touch/apple-touch-icon-144x144-precomposed.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"114x114\" href=\"images/touch/apple-touch-icon-114x114-precomposed.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"72x72\" href=\"images/touch/apple-touch-icon-72x72-precomposed.png\">\n<link rel=\"apple-touch-icon-precomposed\" href=\"images/touch/apple-touch-icon-57x57-precomposed.png\">\n\n<!-- Icon for Android Chrome, recommended -->\n<link rel=\"shortcut icon\" sizes=\"196x196\" href=\"images/touch/touch-icon-196x196.png\">\n\n<!-- Tile icon for Win8 (144x144 + tile color) -->\n<meta name=\"msapplication-TileImage\" content=\"images/touch/ms-touch-icon-144x144-precomposed.png\">\n<meta name=\"msapplication-TileColor\" content=\"#3372DF\">\n\n<!-- Generic Icon -->\n<link rel=\"shortcut icon\" href=\"images/touch/touch-icon-57x57.png\">\n```\n\næ˜¾ç„¶ï¼Œè¿™ç§åšæ³•å¹¶ä¸ä¼˜é›…ï¼šåˆ†æ•£åˆé‡å¤çš„å…ƒæ•°æ®å®šä¹‰å¤šä½™ä¸”éš¾ä»¥ç»´æŒåŒæ­¥ï¼Œä¸ html è€¦åˆåœ¨ä¸€èµ·ä¹ŸåŠ é‡äº†æµè§ˆå™¨æ£€æŸ¥å…ƒæ•°æ®æœªæ¥å˜åŠ¨çš„æˆæœ¬ã€‚ä¸æ­¤åŒæ—¶ï¼Œç¤¾åŒºé‡Œå¼€å§‹å‡ºç°ä½¿ç”¨ manifest æ–‡ä»¶ä»¥ä¸­å¿ƒåŒ–åœ°æè¿°å…ƒæ•°æ®çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚ [Chrome Extensionã€ Chrome Hosted Web Apps (2010)][12] ä¸ [Firefox OS App Manifest (2011)][13] ä½¿ç”¨ JSONï¼›[Cordova][19] ä¸ [Windows Pinned Site][20] ä½¿ç”¨ XMLï¼›\n\n2013 å¹´ï¼ŒW3C WebApps å·¥ä½œç»„å¼€å§‹å¯¹åŸºäº JSON çš„ Manifest è¿›è¡Œæ ‡å‡†åŒ–ï¼ŒäºåŒå¹´å¹´åº•å‘å¸ƒ[ç¬¬ä¸€ä»½å…¬å¼€ Working Draft][14]ï¼Œå¹¶é€æ¸æ¼”åŒ–æˆä¸ºä»Šå¤©çš„ W3C Web App Manifestï¼š\n\n```json\n{\n  \"short_name\": \"Manifest Sample\",\n  \"name\": \"Web Application Manifest Sample\",\n  \"icons\": [{\n      \"src\": \"launcher-icon-2x.png\",\n      \"sizes\": \"96x96\",\n      \"type\": \"image/png\"\n   }],\n  \"scope\": \"/sample/\",\n  \"start_url\": \"/sample/index.html\",\n  \"display\": \"standalone\",\n  \"orientation\": \"landscape\"\n  \"theme_color\": \"#000\",\n  \"background_color\": \"#fff\",\n}\n```\n```html\n<!-- document -->\n<link rel=\"manifest\" href=\"/manifest.json\">\n```\n\nè¯¸å¦‚ `name`ã€`icons`ã€`display` éƒ½æ˜¯æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ–°å¢çš„æˆå‘˜åˆ™ä¸º web åº”ç”¨å¸¦æ¥äº†ä¸€ç³»åˆ—ä»¥å‰ web åº”ç”¨æƒ³åšå´åšä¸åˆ°ï¼ˆæˆ–åœ¨ä¹‹å‰åªèƒ½é  hackï¼‰çš„æ–°ç‰¹æ€§ï¼š\n\n- `scope`ï¼šå®šä¹‰äº† web åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–çš„ URL å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰ PWA é‡Œç»§ç»­æµè§ˆã€‚\n- `start_url`ï¼šå®šä¹‰äº†ä¸€ä¸ª PWA çš„å…¥å£é¡µé¢ã€‚æ¯”å¦‚è¯´ä½ æ·»åŠ  [Hux Blog][21] çš„ä»»ä½•ä¸€ä¸ªæ–‡ç« åˆ°ä¸»å±ï¼Œä»ä¸»å±æ‰“å¼€æ—¶éƒ½ä¼šè®¿é—® [Hux Blog][21] çš„ä¸»é¡µã€‚\n- `orientation`ï¼šç»ˆäºï¼Œæˆ‘ä»¬å¯ä»¥é”å®šå±å¹•æ—‹è½¬äº†ï¼ˆå–œæè€Œæ³£â€¦ï¼‰\n- `theme_color`/`background_color`ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ UI ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ Android çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰ã€‚\n\nè¿™ä¸ªæ¸…å•çš„æˆå‘˜è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ç”¨äºå£°æ˜ã€Œå¯¹åº”åŸç”Ÿåº”ç”¨ã€çš„ `related_applications` ç­‰ç­‰ï¼Œæœ¬æ–‡å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ä½œä¸º PWA çš„ã€Œæˆ·å£æœ¬ã€ï¼Œæ‰¿è½½ç€ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›çš„é‡ä»»ï¼ŒWeb App Manifest è¿˜å°†åœ¨æ—¥åä¸æ–­æ‰©å±•ï¼Œä»¥æ»¡è¶³ web åº”ç”¨é«˜é€Ÿæ¼”åŒ–çš„éœ€è¦ã€‚\n\n\n\n### [Service Worker][spec2]\n\næˆ‘ä»¬åŸæœ‰çš„æ•´ä¸ª Web åº”ç”¨æ¨¡å‹ï¼Œéƒ½æ˜¯æ„å»ºåœ¨ã€Œç”¨æˆ·èƒ½ä¸Šç½‘ã€çš„å‰æä¹‹ä¸‹çš„ï¼Œæ‰€ä»¥ä¸€ç¦»çº¿å°±åªèƒ½ç©å°æé¾™äº†ã€‚å…¶å®ï¼Œå¯¹äºã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€è¿™ä»¶äº‹ï¼ŒService Worker è‡³å°‘æ˜¯ web ç¤¾åŒºçš„ç¬¬ä¸‰æ¬¡å°è¯•äº†ã€‚\n\næ•…äº‹å¯ä»¥è¿½æº¯åˆ° 2007 å¹´çš„ [Google Gears][48]ï¼šä¸ºäº†è®©è‡ªå®¶çš„ Gmailã€Youtubeã€Google Reader ç­‰ web åº”ç”¨å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®ä¸ç¦»çº¿æ‰§è¡Œï¼ŒGoogle å¼€å‘äº†ä¸€ä¸ªæµè§ˆå™¨æ‹“å±•æ¥å¢å¼º web åº”ç”¨ã€‚Google Gears æ”¯æŒ IE 6ã€Safari 3ã€Firefox 1.5 ç­‰æµè§ˆå™¨ï¼›è¦çŸ¥é“ï¼Œé‚£ä¸€å¹´ Chrome éƒ½è¿˜æ²¡å‡ºç”Ÿå‘¢ã€‚\n\nåœ¨ Gears API ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å‘ LocalServer æ¨¡å—æäº¤ä¸€ä¸ªç¼“å­˜æ–‡ä»¶æ¸…å•æ¥å®ç°ç¦»çº¿æ”¯æŒï¼š\n\n```javascript\n// Somewhere in your javascript\nvar localServer = google.gears.factory.create(\"bata.localserver\");\nvar store = localServer.createManagedStore(STORE_NAME);\nstore.manifestUrl = \"manifest.json\"\n```\n```json\n// manifest.json - å‡è®¾ JSON æœ‰æ³¨é‡Š\n{\nã€€ã€€\"betaManifestVersion\":ã€€1,\nã€€ã€€\"version\": ã€€\"1.0\",\nã€€ã€€\"entries\":ã€€[ã€€\nã€€ã€€ã€€ã€€{ã€€\"url\": ã€€\"index.html\"},\nã€€ã€€ã€€ã€€{ã€€\"url\": ã€€\"main.js\"}\nã€€ã€€]\n}\n```\n\næ˜¯ä¸æ˜¯æ„Ÿåˆ°å¾ˆç†Ÿæ‚‰ï¼Ÿå¥½åƒ [HTML5 è§„èŒƒ][spec11]ä¸­çš„ Application Cache ä¹Ÿæ˜¯ç±»ä¼¼çš„ä¸œè¥¿ï¼Ÿ\n\n```html\n<html manifest=\"cache.appcache\">\n```\n```\nCACHE MANIFEST\n\nCACHE:\nindex.html\nmain.js\n```\n\næ˜¯çš„ï¼ŒGears çš„ LocalServer å°±æ˜¯åæ¥å¤§å®¶æ‰€ç†ŸçŸ¥çš„ App Cache çš„å‰èº«ï¼Œå¤§çº¦ä» [2008][spec10] å¹´å¼€å§‹ W3C å°±å¼€å§‹å°è¯•å°† Gears è¿›è¡Œæ ‡å‡†åŒ–äº†ï¼›é™¤äº† LocalServerï¼ŒGears ä¸­ç”¨äºæä¾›å¹¶è¡Œè®¡ç®—èƒ½åŠ›çš„ WorkerPool æ¨¡å—ä¸ç”¨äºæä¾›æœ¬åœ°æ•°æ®åº“ä¸ SQL æ”¯æŒçš„ Database æ¨¡å—ä¹Ÿåˆ†åˆ«æ˜¯æ—¥å Web Worker ä¸ Web SQL Databaseï¼ˆåè¢«åºŸå¼ƒï¼‰çš„å‰èº«ã€‚\n\nHTML5 App Cache ä½œä¸ºç¬¬äºŒæ³¢ã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€çš„å°è¯•ï¼Œç¡®å®ä¹ŸæœåŠ¡äº†æ¯”å¦‚ Google Docã€å°¤é›¨æºªæ—©å¹´ä½œå“ HTML5 Clearã€ä»¥åŠä¸€ç›´ç”¨ web åº”ç”¨ä½œä¸ºè‡ªå·± iOS åº”ç”¨çš„ FT.comï¼ˆFinancial Timesï¼‰ç­‰ä¸å°‘ web åº”ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰ Service Worker ä»€ä¹ˆäº‹å‘¢ï¼Ÿ  \n\næ˜¯å•Šï¼Œå¦‚æœ App Cache æ²¡æœ‰è¢«è®¾è®¡å¾—[çƒ‚åˆ°å®Œå…¨ä¸å¯ç¼–ç¨‹ã€æ— æ³•æ¸…ç†ç¼“å­˜ã€å‡ ä¹æ²¡æœ‰è·¯ç”±æœºåˆ¶ã€å‡ºäº† Bug ä¸€ç‚¹æ•‘éƒ½æ²¡æœ‰][s12]ï¼Œå¯èƒ½å°±çœŸæ²¡ Service Worker ä»€ä¹ˆäº‹äº†ã€‚[App Cache å·²ç»åœ¨å‰ä¸ä¹…å®šç¨¿çš„ HTML5.1 ä¸­è¢«æ‹¿æ‰äº†ï¼ŒW3C ä¸ºäº†æŒ½æ•‘ web ä¸–ç•ŒçœŸæ˜¯ä¸æƒœæŠŠè‡ªå·±çš„è„¸éƒ½æ‰“è‚¿äº†â€¦â€¦][s13]\n\næ—¶è‡³ä»Šæ—¥ï¼Œæˆ‘ä»¬ç»ˆäºè¿æ¥äº† Service Worker çš„æ›™å…‰ã€‚ç®€å•æ¥è¯´ï¼ŒService Worker æ˜¯ä¸€ä¸ªå¯ç¼–ç¨‹çš„ Web Workerï¼Œå®ƒå°±åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä»¥æ‹¦æˆªã€å¤„ç†ã€å“åº”æµç»çš„ HTTP è¯·æ±‚ï¼›é…åˆéšä¹‹å¼•å…¥ Cache Storage APIï¼Œä½ å¯ä»¥è‡ªç”±ç®¡ç† HTTP è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜ï¼Œè¿™ä½¿å¾— Service Worker å¯ä»¥ä»ç¼“å­˜ä¸­å‘ web åº”ç”¨æä¾›èµ„æºï¼Œå³ä½¿æ˜¯åœ¨ç¦»çº¿çš„ç¯å¢ƒä¸‹ã€‚\n\n\n![](/img/in-post/post-nextgen-web-pwa/sw-sw.png)\n*Service Worker å°±åƒä¸€ä¸ªè¿è¡Œåœ¨å®¢æˆ·ç«¯çš„ä»£ç†*\n\næ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ç½‘é¡µ `foo.html` æ³¨å†Œè¿™ä¹ˆä¸€ä¸ª Service Workerï¼Œå®ƒå°†åŠ«æŒç”± `foo.html` å‘èµ·çš„ä¸€åˆ‡ HTTP è¯·æ±‚ï¼Œå¹¶ç»Ÿç»Ÿè¿”å›æœªè®¾ç½® `Content-Type` çš„ `Hello World!`ï¼š\n\n```javascript\n// sw.js\nself.onfetch = (e) => {\n  e.respondWith(new Response('Hello World!'))\n}\n```\n\nService Worker ç¬¬ä¸€æ¬¡å‘å¸ƒäº 2014 å¹´çš„ Google IO ä¸Šï¼Œç›®å‰å·²å¤„äº W3C å·¥ä½œè‰æ¡ˆçš„çŠ¶æ€ã€‚å…¶è®¾è®¡å¸å–äº† Application Cache çš„å¤±è´¥ç»éªŒï¼Œä½œä¸º web åº”ç”¨çš„å¼€å‘è€…çš„ä½ æœ‰ç€å®Œå…¨çš„æ§åˆ¶èƒ½åŠ›ï¼›åŒæ—¶ï¼Œå®ƒè¿˜å€Ÿé‰´äº† Chrome å¤šå¹´æ¥åœ¨ Chrome Extension ä¸Šçš„è®¾è®¡ç»éªŒï¼ˆChrome Background Pages ä¸ Chrome Event Pagesï¼‰ï¼Œé‡‡ç”¨äº†åŸºäºã€Œäº‹ä»¶é©±åŠ¨ã€çš„å”¤é†’æœºåˆ¶ï¼Œä»¥å¤§å¹…èŠ‚çœåå°è®¡ç®—çš„èƒ½è€—ã€‚æ¯”å¦‚ä¸Šé¢çš„ `fetch` å…¶å®å°±æ˜¯ä¼šå”¤é†’ Service Worker çš„äº‹ä»¶ä¹‹ä¸€ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/sw-lifecycle.png)\n*Service Worker çš„ç”Ÿå‘½å‘¨æœŸ*\n\né™¤äº†ç±»ä¼¼ `fetch` è¿™æ ·çš„åŠŸèƒ½äº‹ä»¶å¤–ï¼ŒService Worker è¿˜æä¾›äº†ä¸€ç»„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ŒåŒ…æ‹¬å®‰è£…ã€æ¿€æ´»ç­‰ç­‰ã€‚æ¯”å¦‚ï¼Œåœ¨ Service Worker çš„ã€Œå®‰è£…ã€äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ web åº”ç”¨æ‰€éœ€è¦çš„èµ„æºç»Ÿç»Ÿé¢„å…ˆä¸‹è½½å¹¶ç¼“å­˜åˆ° Cache Storage ä¸­å»ï¼š\n\n```javascript\n// sw.js\nself.oninstall = (e) => {\n  e.waitUntil(\n    caches.open('installation')\n      .then(cache =>  cache.addAll([\n        './',\n        './styles.css',\n        './script.js'\n      ]))\n  )\n});\n```\n\nè¿™æ ·ï¼Œå½“ç”¨æˆ·ç¦»çº¿ï¼Œç½‘ç»œæ— æ³•è®¿é—®æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ç¼“å­˜ä¸­å¯åŠ¨æˆ‘ä»¬çš„ web åº”ç”¨ï¼š\n\n```javascript\n//sw.js\nself.onfetch = (e) => {\n  const fetched = fetch(e.request)\n  const cached = caches.match(e.request)\n\n  e.respondWith(\n    fetched.catch(_ => cached)\n  )\n}\n```\n\nå¯ä»¥çœ‹å‡ºï¼ŒService Worker è¢«è®¾è®¡ä¸ºä¸€ä¸ªç›¸å¯¹åº•å±‚ï¼ˆlow-levelï¼‰ã€é«˜åº¦å¯ç¼–ç¨‹ã€å­æ¦‚å¿µä¼—å¤šï¼Œä¹Ÿå› æ­¤å¼‚å¸¸çµæ´»ä¸”å¼ºå¤§çš„ APIï¼Œæ•…æœ¬æ–‡åªèƒ½å±•ç¤ºå®ƒçš„å†°å±±ä¸€è§’ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ³¨å†Œ Service Worker è¦æ±‚ä½ çš„ web åº”ç”¨éƒ¨ç½²äº HTTPS åè®®ä¸‹ï¼Œä»¥å…åˆ©ç”¨ Service Worker çš„ä¸­é—´äººæ”»å‡»ã€‚ç¬”è€…åœ¨ä»Šå¹´ GDG åŒ—äº¬çš„ DevFest ä¸Šåˆ†äº«äº† [Service Worker 101][b0]ï¼Œæ¶µç›–äº† Service Worker è­¬å¦‚ã€Œç½‘ç»œä¼˜å…ˆã€ã€ã€Œç¼“å­˜ä¼˜å…ˆã€ã€ã€Œç½‘ç»œä¸ç¼“å­˜æ¯”èµ›ã€è¿™äº›æ›´å¤æ‚çš„ç¼“å­˜ç­–ç•¥ã€å­¦ä¹ èµ„æ–™ã€ä»¥åŠ[ç¤ºä¾‹ä»£ç ][29]ï¼Œå¯ä»¥ä¾›å¤§å®¶å‚è€ƒã€‚\n\n\n![](/img/in-post/post-nextgen-web-pwa/sw-race.png)\n*Service Worker çš„ä¸€ç§ç¼“å­˜ç­–ç•¥ï¼šè®©ç½‘ç»œè¯·æ±‚ä¸è¯»å–ç¼“å­˜æ¯”èµ›*\n\nä½ ä¹Ÿå¯ä»¥å°è¯•åœ¨æ”¯æŒ PWA çš„æµè§ˆå™¨ä¸­è®¿é—®ç¬”è€…çš„åšå®¢ [Hux Blog][21]ï¼Œæ„Ÿå— Service Worker çš„å®é™…æ•ˆæœï¼šæ‰€æœ‰è®¿é—®è¿‡çš„é¡µé¢éƒ½ä¼šè¢«ç¼“å­˜å¹¶å…è®¸åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ç»§ç»­è®¿é—®ï¼Œæ‰€æœ‰æœªè®¿é—®è¿‡çš„é¡µé¢åˆ™ä¼šåœ¨ç¦»çº¿ç¯å¢ƒä¸‹å±•ç¤ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç¦»çº¿é¡µé¢ã€‚\n\nåœ¨ç¬”è€…çœ‹æ¥ï¼Œ**Service Worker å¯¹ PWA çš„é‡è¦æ€§ç›¸å½“äº `XMLHTTPRequest` ä¹‹äº Ajaxï¼Œåª’ä½“æŸ¥è¯¢ï¼ˆMedia Queryï¼‰ä¹‹äºå“åº”å¼è®¾è®¡ï¼Œæ˜¯æ”¯æ’‘ PWA ä½œä¸ºã€Œä¸‹ä¸€ä»£ web åº”ç”¨æ¨¡å‹ã€çš„æœ€æ ¸å¿ƒæŠ€æœ¯ã€‚**ç”±äº Service Worker å¯ä»¥ä¸åŒ…æ‹¬ Indexed DBã€Streams åœ¨å†…çš„å¤§éƒ¨åˆ† DOM æ— å…³ API è¿›è¡Œäº¤äº’ï¼Œå®ƒçš„æ½œåŠ›ç®€ç›´æ— å¯é™é‡ã€‚ç¬”è€…å‡ ä¹å¯ä»¥æ–­è¨€ï¼ŒService Worker å°†åœ¨æœªæ¥åå¹´é‡Œæˆä¸º web å®¢æˆ·ç«¯æŠ€æœ¯å·¥ç¨‹åŒ–çš„å…µå®¶å¿…äº‰ä¹‹åœ°ï¼Œå¸¦æ¥ã€Œç¦»çº¿ä¼˜å…ˆï¼ˆOffline-firstï¼‰ã€çš„æ¶æ„é©å‘½ã€‚\n\n\n\n### Push Notification\n\nPWA æ¨é€é€šçŸ¥ä¸­çš„ã€Œæ¨é€ã€ä¸ã€Œé€šçŸ¥ã€ï¼Œå…¶å®ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒä½†åˆç›¸å¾—ç›Šå½°çš„ APIï¼š\n\n[Notification API][spec4] ç›¸ä¿¡å¤§å®¶å¹¶ä¸é™Œç”Ÿï¼Œå®ƒè´Ÿè´£æ‰€æœ‰ä¸é€šçŸ¥æœ¬èº«ç›¸å…³çš„æœºåˆ¶ï¼Œæ¯”å¦‚é€šçŸ¥çš„æƒé™ç®¡ç†ã€å‘æ“ä½œç³»ç»Ÿå‘èµ·é€šçŸ¥ã€é€šçŸ¥çš„ç±»å‹ä¸éŸ³æ•ˆï¼Œä»¥åŠæä¾›é€šçŸ¥è¢«ç‚¹å‡»æˆ–å…³é—­æ—¶çš„å›è°ƒç­‰ç­‰ï¼Œç›®å‰å›½å†…å¤–çš„å„å¤§ç½‘ç«™ï¼ˆå°¤å…¶åœ¨æ¡Œé¢ç«¯ï¼‰éƒ½æœ‰ä¸€å®šçš„ä½¿ç”¨ã€‚Notification API æœ€æ—©åº”è¯¥æ˜¯åœ¨ [2010][22] å¹´å‰åç”± Chromium æå‡º[è‰æ¡ˆ][spec7]ä»¥ `webkitNotifications` å‰ç¼€æ–¹å¼å®ç°ï¼›éšç€ 2011 å¹´è¿›å…¥æ ‡å‡†åŒ–ï¼›2012 å¹´åœ¨ Safari 6ï¼ˆMac OSX 10.8+ï¼‰ä¸Šè·å¾—æ”¯æŒï¼›2015 å¹´ Notification API æˆä¸º [W3C Recommendation][spec8]ï¼›2016 å¹´ [Edge çš„æ”¯æŒ][23]ï¼›Web Notifications å·²ç»åœ¨æ¡Œé¢æµè§ˆå™¨ä¸­è·å¾—äº†å…¨é¢æ”¯æŒï¼ˆChromeã€Edgeã€Firefoxã€Operaã€Safariï¼‰çš„æˆå°±ã€‚\n\n[Push API][spec3] çš„å‡ºç°åˆ™è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘ web åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œå®ƒå®šä¹‰äº† web åº”ç”¨å¦‚ä½•å‘æ¨é€æœåŠ¡å‘èµ·è®¢é˜…ã€å¦‚ä½•å“åº”æ¨é€æ¶ˆæ¯ï¼Œä»¥åŠ web åº”ç”¨ã€åº”ç”¨æœåŠ¡å™¨ä¸æ¨é€æœåŠ¡ä¹‹é—´çš„é‰´æƒä¸åŠ å¯†æœºåˆ¶ï¼›ç”±äº Push API å¹¶ä¸ä¾èµ– web åº”ç”¨ä¸æµè§ˆå™¨ UI å­˜æ´»ï¼Œæ‰€ä»¥å³ä½¿æ˜¯åœ¨ web åº”ç”¨ä¸æµè§ˆå™¨æœªè¢«ç”¨æˆ·æ‰“å¼€çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åå°è¿›ç¨‹æ¥å—æ¨é€æ¶ˆæ¯å¹¶è°ƒç”¨ Notification API å‘ç”¨æˆ·å‘å‡ºé€šçŸ¥ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒMac OSX 10.9 Mavericks ä¸ Safari 7 åœ¨ 2013 å¹´å°±å‘å¸ƒäº†è‡ªå·±çš„ç§æœ‰æ¨é€æ”¯æŒï¼ŒåŸºäº APNS çš„ [Safari Push Notifications][24]ã€‚\n\nåœ¨ PWA ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ Service Worker çš„åå°è®¡ç®—èƒ½åŠ›ç»“åˆ Push API å¯¹æ¨é€äº‹ä»¶è¿›è¡Œå“åº”ï¼Œå¹¶é€šè¿‡ Notification API å®ç°é€šçŸ¥çš„å‘å‡ºä¸å¤„ç†ï¼š\n\n```javascript\n// sw.js\nself.addEventListener('push', event => {\n  event.waitUntil(\n    // Process the event and display a notification.\n    self.registration.showNotification(\"Hey!\")\n  );\n});\n\nself.addEventListener('notificationclick', event => {  \n  // Do something with the event  \n  event.notification.close();  \n});\n\nself.addEventListener('notificationclose', event => {  \n  // Do something with the event  \n});\n\n```\n\nå¯¹äº Push Notificationï¼Œç¬”è€…çš„å‡ æ¬¡åˆ†äº«ä¸­ä¸€ç›´éƒ½æçš„ç¨å¾®å°‘ä¸€äº›ï¼Œä¸€æ˜¯å› ä¸º Push API è¿˜å¤„äº Editor Draft çš„çŠ¶æ€ï¼ŒäºŒæ˜¯ç›®å‰æµè§ˆå™¨ä¸æ¨é€æœåŠ¡é—´çš„åè®®æ”¯æŒè¿˜ä¸å¤Ÿæˆç†Ÿï¼šChromeï¼ˆä¸å…¶å®ƒåŸºäº Blink çš„æµè§ˆå™¨ï¼‰åœ¨ Chromium 52 ä¹‹å‰åªæ”¯æŒåŸºäº Google ç§æœ‰çš„ GCM/FCM æœåŠ¡è¿›è¡Œé€šçŸ¥æ¨é€ã€‚ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œç»§ Firefox 44 ä¹‹åï¼ŒChrome 52 ä¸ Opera 39 ä¹Ÿç´§è¿½å…¶åå®ç°äº†æ­£åœ¨ç”± IETF è¿›è¡Œæ ‡å‡†åŒ–çš„ [Web æ¨é€åè®®ï¼ˆWeb Push Protocolï¼‰][spec5]ã€‚\n\n\nå¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ Google çš„äº‘æœåŠ¡ï¼ˆæ¯”å¦‚ Firebaseï¼‰ï¼Œå¹¶ä¸”ä¸»è¦é¢å‘çš„æ˜¯æµ·å¤–ç”¨æˆ·ï¼Œé‚£ä¹ˆåœ¨ web åº”ç”¨ä¸Šæ”¯æŒåŸºäº GCM/FCM çš„æ¨é€é€šçŸ¥å¹¶ä¸æ˜¯ä¸€ä»¶è´¹åŠ›çš„äº‹æƒ…ï¼Œç¬”è€…æ¨èä½ é˜…è¯»ä¸€ä¸‹ Google Developers çš„[ç³»åˆ—æ–‡ç« ][25]ï¼Œå¾ˆå¤šå›½å¤–å…¬å¸å·²ç»ç©èµ·æ¥äº†ã€‚\n\n\n\n## ä» Hybrid åˆ° PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\n\n2008 å¹´ï¼Œå½“ç§»åŠ¨æ—¶ä»£æ¥ä¸´ï¼Œ[å”±è¡°ç§»åŠ¨ Web çš„å£°éŸ³][q17]å¼€å§‹å‡ºç°ï¼Œè€Œæµè§ˆå™¨çš„è¿›åŒ–å¹¶ä¸èƒ½è·Ÿä¸Šæ—¶ï¼Œæ¥è‡ª Nitobi çš„ Brian Leroux ç­‰äººåˆ›é€ äº† [Phonegap][10]ï¼Œå¸Œæœ›å®ƒèƒ½ä»¥ Polyfill çš„å½¢å¼ã€å¼¥è¡¥ç›®å‰æµè§ˆå™¨ä¸ç§»åŠ¨è®¾å¤‡é—´çš„ã€Œé¸¿æ²Ÿã€ï¼Œä»æ­¤å¼€å¯äº†[æ··åˆåº”ç”¨ï¼ˆHybrid Appsï¼‰][26]çš„æ—¶ä»£ã€‚\n\nå‡ å¹´é—´ï¼Œ[Adobe AIR][5]ã€[Windows Runtime Apps][6]ã€[Chrome Apps][7]ã€[Firefox OS][8]ã€[WebOS][9]ã€[Cordova/Phonegap][10]ã€[Electron][11] ä»¥åŠå›½å†…æ¯”å¦‚å¾®ä¿¡ã€æ·˜å®ï¼Œæ— æ•°çš„ Hybrid æ–¹æ¡ˆæ‹”åœ°è€Œèµ·ï¼Œè®© web å¼€å‘è€…å¯ä»¥åœ¨ç»§ç»­ä½¿ç”¨ web å®¢æˆ·ç«¯æŠ€æœ¯çš„åŒæ—¶ï¼Œåšåˆ°ä¸€äº›åªæœ‰åŸç”Ÿåº”ç”¨æ‰èƒ½åšåˆ°çš„äº‹æƒ…ï¼ŒåŒ…æ‹¬è®¿é—®ä¸€äº›è®¾å¤‡ä¸æ“ä½œç³»ç»Ÿ APIï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´åŠ  ã€ŒAppyã€ çš„ä½“éªŒï¼Œä»¥åŠè¿›å…¥ App Store ç­‰ç­‰ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/qcon-hybridzation.png)\n*ä¼—å¤šçš„ Hybrid æ–¹æ¡ˆ*\n\nPWA ä½œä¸ºä¸€ä¸ªæ¶µç›–æ€§æœ¯è¯­ï¼Œä¸è¿‡å¾€çš„è¿™äº›æˆ–å¤šæˆ–å°‘é€šè¿‡ç§æœ‰å¹³å° API å¢å¼º web åº”ç”¨çš„å°è¯•æœ€å¤§çš„ä¸åŒï¼Œåœ¨äºæ„æˆ PWA çš„æ¯ä¸€é¡¹åŸºæœ¬æŠ€æœ¯ï¼Œéƒ½å·²ç»æˆ–æ­£åœ¨è¢« IETFã€ECMAã€W3C æˆ– WHATWG æ ‡å‡†åŒ–ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå®ƒä»¬éƒ½å°†è¢«çº³å…¥å¼€æ”¾ web æ ‡å‡†ï¼Œå¹¶åœ¨ä¸è¿œçš„å°†æ¥å¾—åˆ°æ‰€æœ‰æµè§ˆå™¨ä¸å…¨å¹³å°çš„æ”¯æŒã€‚æˆ‘ä»¬ç»ˆäºå¯ä»¥é€ƒå‡º App Store å°é—­çš„ç§˜å¯†èŠ±å›­ï¼Œé‡æ–°å›åˆ°å±äº web çš„é‚£ç‰‡å¼€æ”¾è‡ªç”±çš„å¤§åœ°ã€‚\n\næœ‰è¶£çš„æ˜¯ï¼Œä»ä¸Šæ–‡ä¸­ä½ ä¹Ÿå¯ä»¥å‘ç°ï¼Œç»„æˆ PWA çš„å„é¡¹æŠ€æœ¯çš„è‰æ¡ˆæ­£æ˜¯ç”±ä¸Šè¿°å„ç§ç§æœ‰æ–¹æ¡ˆèƒŒåçš„æµè§ˆå™¨å‚å•†æˆ–å¼€å‘è€…ç›´æ¥è´¡çŒ®æˆ–é—´æ¥å½±å“çš„ã€‚å¯ä»¥è¯´ï¼ŒPWA çš„èƒŒåå¹¶ä¸æ˜¯æŸä¸€å®¶æˆ–ä¸¤å®¶å…¬å¸ï¼Œè€Œæ˜¯æ•´ä¸ª web ç¤¾åŒºä¸æ•´ä¸ª web è§„èŒƒã€‚**æ­£æ˜¯å› ä¸ºè¿™ç§å¼€æ”¾ä¸å»ä¸­å¿ƒåŒ–çš„åŠ›é‡ï¼Œä½¿å¾—ä¸‡ç»´ç½‘ï¼ˆWorld Wide Webï¼‰èƒ½å¤Ÿæˆä¸ºå½“ä»Šä¸–ç•Œä¸Šè·¨å¹³å°èƒ½åŠ›æœ€å¼ºã€ä¸”å‡ ä¹æ˜¯å”¯ä¸€ä¸€ä¸ªå…·å¤‡è¿™ç§è·¨å¹³å°èƒ½åŠ›çš„åº”ç”¨å¹³å°ã€‚**\n\n[ã€Œæˆ‘ä»¬ç›¸ä¿¡ Webï¼Œæ˜¯å› ä¸ºç›¸ä¿¡å®ƒæ˜¯è§£å†³è®¾å¤‡å·®å¼‚åŒ–çš„ç»ˆææ–¹æ¡ˆï¼›æˆ‘ä»¬ç›¸ä¿¡ï¼Œå½“ Web åœ¨ä»Šå¤©åšä¸åˆ°ä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œæ˜¯å› ä¸ºå®ƒè¿˜æ²¡æ¥å¾—åŠå»å®ç°ï¼Œè€Œä¸æ˜¯å› ä¸ºä»–åšä¸åˆ°ã€‚è€Œ Phonegapï¼Œå®ƒçš„ç»ˆæç›®çš„å°±æ˜¯æ¶ˆå¤±åœ¨ Web æ ‡å‡†çš„èƒŒåã€‚ã€][27]\n\nåœ¨ä¸ä¸¢å¤± web çš„å¼€æ”¾çµé­‚ï¼Œåœ¨ä¸éœ€è¦ä¾é  Hybrid æŠŠåº”ç”¨æ”¾åœ¨ App Store çš„å‰æä¸‹ï¼Œè®© web åº”ç”¨èƒ½å¤Ÿæ¸è¿›å¼åœ°è·³è„±å‡ºæµè§ˆå™¨çš„æ ‡ç­¾ï¼Œå˜æˆç”¨æˆ·çœ¼ä¸­çš„ Appã€‚è¿™æ˜¯ Alex Russell åœ¨ 2015 å¹´æå‡º PWA æ¦‚å¿µçš„[åŸå§”][28]ã€‚\n\nè€Œåˆæ­£å› ä¸º web æ˜¯ä¸€ä¸ªæ•´ä½“ï¼ŒPWA å¯ä»¥åˆ©ç”¨çš„æŠ€æœ¯è¿œä¸æ­¢ä¸Šè¿°çš„å‡ ä¸ªè€Œå·²ï¼šAjaxã€å“åº”å¼è®¾è®¡ã€JavaScript æ¡†æ¶ã€ECMAScript Nextã€CSS Nextã€Houdiniã€Indexed DBã€Device APIsã€Web Bluetoothã€Web Socketã€Web Paymentã€[å­µåŒ–][spec6]ä¸­çš„ [Background Sync API][30]ã€[Streams][spec9]ã€WebVRâ€¦â€¦å¼€æ”¾ Web ä¸–ç•Œ 27 å¹´æ¥çš„å‘å±•ä»¥åŠæœªæ¥çš„ä¸€åˆ‡ï¼Œéƒ½ä¸ PWA å¤©ä½œä¹‹åˆã€‚\n\n\n## é±¼ä¸ç†ŠæŒçš„å…¼å¾—\n\nç»è¿‡å‡ å¹´æ¥çš„æ‘¸ç´¢ï¼Œæ•´ä¸ªäº’è”ç½‘è¡Œä¸šä»¿ä½›åœ¨ã€ŒWeb åº”ç”¨ vs. åŸç”Ÿåº”ç”¨ã€è¿™ä¸ªé—®é¢˜ä¸Šè¾¾æˆäº†å…±è¯†ï¼š\n\n- web åº”ç”¨æ˜¯é±¼ï¼šè¿­ä»£å¿«ï¼Œè·å–ç”¨æˆ·æˆæœ¬ä½ï¼›è·¨å¹³å°å¼ºä½“éªŒå¼±ï¼Œå¼€å‘æˆæœ¬ä½ã€‚**é€‚åˆæ‹‰æ–°**ã€‚\n- åŸç”Ÿåº”ç”¨æ˜¯ç†ŠæŒï¼šè¿­ä»£æ…¢ï¼Œè·å–ç”¨æˆ·æˆæœ¬é«˜ï¼›è·¨å¹³å°å¼±ä½“éªŒå¼ºï¼Œå¼€å‘æˆæœ¬é«˜ã€‚**é€‚åˆä¿æ´»**ã€‚\n\nè¦çŸ¥é“ï¼Œè™½ç„¶ç”¨æˆ·èŠ±åœ¨åŸç”Ÿåº”ç”¨ä¸Šçš„æ—¶é—´è¦æ˜æ˜¾å¤šäº web åº”ç”¨ï¼Œä½†å…¶ä¸­[æœ‰ 80% çš„æ—¶é—´æ˜¯èŠ±åœ¨å‰äº”ä¸ªåº”ç”¨ä¸­çš„][31]ã€‚[è°ƒæŸ¥æ˜¾ç¤ºï¼Œç¾å›½æœ‰ä¸€åŠçš„æ™ºèƒ½æ‰‹æœºç”¨æˆ·å¹³å‡æ¯æœˆæ–° App å®‰è£…é‡ä¸ºé›¶][32]ï¼Œè€Œæœˆå‡ç½‘ç«™è®¿é—®é‡å´æœ‰ 100 ä¸ªï¼Œæ›´åˆ«æ Google Play ä¸Š[æœ‰ 60% çš„åº”ç”¨ä»æœªè¢«äººä¸‹è½½è¿‡äº†][33]ã€‚äºæ˜¯ï¼Œæ•´ä¸ªè¡Œä¸šçš„äº§å“ç­–ç•¥æ¸…ä¸€è‰²åœ°**ã€Œæ‹¿é±¼æ¢ç†ŠæŒã€**ï¼Œæ¯”å¦‚ç¬”è€…çš„è€ä¸œå®¶é˜¿é‡Œæ—…è¡Œï¼ˆé£çŒªæ—…è¡Œï¼‰ï¼Œweb åº”ç”¨å¸ƒæ»¡é˜¿é‡Œç³»å„ç§æ¸ é“ï¼Œæä¾›ã€Œä¼˜ç§€çš„ç¬¬ä¸€æ‰‹ä½“éªŒã€ï¼Œç­‰ä½ ç”¨çš„å¼€å¿ƒäº†ï¼Œå†å¼•è¯±ä½ å»ä¸‹è½½å®‰è£…åŸç”Ÿåº”ç”¨ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/PWAR-014+PWA.jpeg)\n*åŸç”Ÿåº”ç”¨ã€å½“ä»£ Web ä¸ PWA å›¾ç‰‡æ¥æº: Hux & [Google][i2]*\n\nä½†æ˜¯ï¼ŒPWA çš„å‡ºç°ï¼Œè®©é±¼ä¸ç†ŠæŒå…¼å¾—å˜æˆäº†å¯èƒ½ â€”â€” å®ƒåŒæ—¶å…·å¤‡äº† web åº”ç”¨ä¸åŸç”Ÿåº”ç”¨çš„ä¼˜ç‚¹ï¼Œæœ‰ç€è‡ªå·±ç‹¬æœ‰çš„å…ˆè¿›æ€§ï¼šã€Œæµè§ˆå™¨ -> æ·»åŠ è‡³ä¸»å±/å®‰è£… -> å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWA -> æ¨é€é€šçŸ¥ -> å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWAã€ï¼ŒPWA è‡ªèº«å°±åŒ…å«ç€ä»æ‹‰æ–°åˆ°ä¿æ´»çš„é—­ç¯ã€‚\n\né™¤æ­¤ä¹‹å¤–ï¼ŒPWA è¿˜ç»§æ‰¿äº† web åº”ç”¨çš„å¦å¤–ä¸¤å¤§ä¼˜ç‚¹ï¼š**æ— éœ€å…ˆä»˜å‡ºå‡ åå…†çš„ä¸‹è½½å®‰è£…æˆæœ¬å³å¯å¼€å§‹ä½¿ç”¨**ï¼Œä»¥åŠ**ä¸éœ€è¦ç»è¿‡åº”ç”¨è¶…å¸‚å®¡æ ¸å°±å¯ä»¥å‘å¸ƒæ–°ç‰ˆæœ¬**ã€‚æ‰€ä»¥ï¼ŒPWA å¯ä»¥ç§°å¾—ä¸Šæ˜¯ä¸€ç§ã€Œæµå¼åº”ç”¨ï¼ˆStreamable Appï¼‰ã€ä¸ã€Œå¸¸é’åº”ç”¨ï¼ˆEvergreen Appï¼‰ã€\n\n\n## æœªæ¥åˆ°æ¥äº†å—\n\nåœ¨ç¬”è€…åˆ†äº« PWA çš„ç»å†ä¸­ï¼Œæœ€ä¸æ„¿æ„å›ç­”çš„ä¸¤ä¸ªé—®é¢˜è«è¿‡äºã€ŒPWA å·²ç»è¢«å¹¿æ³›æ”¯æŒäº†å—ï¼Ÿã€ä»¥åŠã€ŒPWA ä¸ ABCDEFG è¿™äº›æŠ€æœ¯æ–¹æ¡ˆç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿã€ï¼Œä½†æ˜¯è¿™ç¡®å®æ˜¯ä¸¤ä¸ªé€ƒä¸å¼€çš„é—®é¢˜ã€‚\n\n### PWA çš„æ”¯æŒæƒ…å†µï¼Ÿ\n\nå½“æˆ‘ä»¬è¯´åˆ° PWA æ˜¯å¦è¢«æ”¯æŒæ—¶ï¼Œå…¶å®æˆ‘ä»¬åœ¨è¯´çš„æ˜¯ PWA èƒŒåçš„å‡ ä¸ªå…³é”®æŠ€æœ¯éƒ½å¾—åˆ°æ”¯æŒäº†æ²¡æœ‰ã€‚ä»¥æµè§ˆå™¨å†…æ ¸æ¥åˆ’åˆ†çš„è¯ï¼ŒBlinkï¼ˆChromeã€Opreaã€Samsung Internet ç­‰ï¼‰ä¸ Geckoï¼ˆFirefoxï¼‰éƒ½å·²ç»å®ç°äº† PWA æ‰€éœ€çš„æ‰€æœ‰å…³é”®æŠ€æœ¯ï¼ˆğŸ‘ğŸ‘ğŸ‘ï¼‰ï¼Œå¹¶å·²ç»å¼€å§‹æ¢å¯»æ›´å¤šçš„å¯èƒ½æ€§ã€‚EdgeHTMLï¼ˆEdgeï¼‰[ç®€ç›´ç§¯æå¾—ä¸èƒ½æ›´ç§¯æäº†][34]ï¼Œæ‰€æœ‰çš„ç‰¹æ€§éƒ½å·²ç»å¤„äºã€Œæ­£åœ¨å¼€å‘ä¸­ã€çš„[çŠ¶æ€][35]ã€‚æœ€å¤§çš„ç»Šè„šçŸ³ä»ç„¶æ¥è‡ªäº Webkitï¼ˆSafariï¼‰ï¼Œå°¤å…¶æ˜¯åœ¨ iOS ä¸Šï¼Œä¸Šè¿°çš„å››ä¸ª API éƒ½æœªå¾—åˆ°æ”¯æŒï¼Œè€Œä¸”ç”±äºå¹³å°é™åˆ¶ï¼Œç¬¬ä¸‰æ–¹æµè§ˆå™¨ä¹Ÿæ— æ³•åœ¨ iOS ä¸Šæ”¯æŒã€‚ï¼ˆ[ä»€ä¹ˆä½ è¯´ IEï¼Ÿ][42]ï¼‰\n\nä¸è¿‡ï¼Œä¹Ÿä¸è¦æ°”é¦ï¼ŒWebkit ä¸ä½†åœ¨å®ƒ [2015 å¹´å‘å¸ƒçš„äº”å¹´è®¡åˆ’][36]é‡Œæåˆ°äº† Service Workerï¼Œæ›´æ˜¯å·²ç»åœ¨æœ€è¿‘å®ç°äº† Service Worker æ‰€[ä¾èµ–][41]çš„ Requestã€Response ä¸ Fetch APIï¼Œè¿˜æŠŠ Service Worker ä¸ Web App Manifest çº·çº·[åˆ—å…¥äº†ã€Œæ­£åœ¨è€ƒè™‘ã€][37]çš„ API ä¸­ï¼›è¦çŸ¥é“ï¼ŒWebkit å¯æ˜¯æŠŠ Web Components ä¸­çš„ HTML Imports ç›´æ¥[åˆ—åˆ°ã€Œä¸è€ƒè™‘ã€é‡Œå»äº†][38]â€¦â€¦ï¼ˆå…¶å® Firefox ä¹Ÿæ˜¯ï¼‰\n\næ›´ä½•å†µï¼Œç”±äº web ç¤¾åŒºä¸€ç›´ä»¥æ¥æ‰€è¿½æ±‚çš„ã€Œæ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§ã€ï¼Œä¸€ä¸ª PWA å½“ç„¶å¯ä»¥åœ¨ iOS ç¯å¢ƒæ­£å¸¸æ‰§è¡Œã€‚[äº‹å®ä¸Šï¼Œåç››é¡¿é‚®æŠ¥å°†ç½‘ç«™è¿ç§»åˆ° PWA ä¹‹åå‘ç°ï¼Œä¸æ­¢æ˜¯ Androidï¼Œåœ¨ iOS ä¸Šä¹Ÿè·å¾—äº† 5 å€çš„æ´»è·ƒåº¦å¢é•¿][39]ï¼Œï¼ˆæ— è®ºæ˜¯ä¸æ˜¯å®ƒä»¬ä¹‹å‰çš„ç½‘ç«™å†™å¾—å¤ªçƒ‚å§ï¼‰ï¼Œå°±ç®— iOS ç°åœ¨è¿˜ä¸æ”¯æŒ PWA ä¹Ÿ[ä¸ä¼šæ€ä¹ˆæ ·][40]ï¼Œæˆ‘ä»¬æ›´æ˜¯æœ‰ç†ç”±ç›¸ä¿¡ PWA ä¼šå¾ˆå¿«åœ¨ iOS ä¸Šåˆ°æ¥ã€‚\n\n### PWA vs. Others\n\nè´ºè€ï¼ˆè´ºå¸ˆä¿Šï¼‰æ›¾è¯´è¿‡ï¼šã€Œä»çº¯ Web åˆ°çº¯ Nativeï¼Œä¹‹é—´æœ‰è®¸å¤šå¯èƒ½çš„ç‚¹ã€ã€‚å½“è€ƒè™‘ç§»åŠ¨åº”ç”¨çš„æŠ€æœ¯é€‰å‹æ—¶ï¼Œé™¤äº† Web ä¸åŸç”Ÿåº”ç”¨ï¼Œæˆ‘ä»¬è¿˜æœ‰å„ç§ä¸åŒç¨‹åº¦çš„ Hybridï¼Œè¿˜æœ‰ä»Šå¹´çˆ†å‘çš„è¯¸å¤š JS-to-Native æ–¹æ¡ˆã€‚\n\nè™½ç„¶æˆ‘åœ¨ä¸Šæ–‡ä¸­ç”¨äº†ã€Œå¤ä»‡ã€è¿™æ ·çš„å­—çœ¼ï¼Œä¸è¿‡æ— è®ºä»æŠ€æœ¯è¿˜æ˜¯å•†ä¸šçš„è§’åº¦ï¼Œæˆ‘ä»¬éƒ½æ²¡å¿…è¦æŠŠ web æˆ–æ˜¯ PWA æ”¾åˆ° Native çš„å¯¹ç«‹é¢å»çœ‹ã€‚å®ƒä»¬å½“ç„¶å­˜åœ¨ç«äº‰å…³ç³»ï¼Œä½†æ˜¯æ›´å¤šçš„æ—¶å€™ï¼Œweb-only ä¸ app-only çš„ç­–ç•¥éƒ½æ˜¯ä¸å®Œç¾çš„ï¼Œå½“å…¬å¸èµ„æºè¶³å¤Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€‰æ‹©åŒæ—¶å¼€å‘ä¸¤è€…ã€‚[å½“ç„¶ï¼Œæ— è®ºä¸ä¸ä¸åŸç”Ÿåº”ç”¨å¯¹æ¯”ï¼ŒPWA è®© web åº”ç”¨å˜å¾—ä½“éªŒæ›´å¥½è¿™ä»¶äº‹æœ¬èº«æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚][43]ã€Œä¸è°ˆåœºæ™¯èŠæŠ€æœ¯éƒ½æ˜¯æ‰¯æ·¡ã€ï¼Œ[æˆ‘ä»¬ä»ç„¶è¿˜æ˜¯éœ€è¦æ ¹æ®è‡ªå·±äº§å“ä¸å›¢é˜Ÿçš„æƒ…å†µæ¥å†³å®šå¯¹åº”çš„æŠ€æœ¯é€‰å‹ä¸å¹³å°ç­–ç•¥ï¼Œåªæ˜¯ PWA è®© web åº”ç”¨åœ¨é¢å¯¹é€‰å‹è€ƒéªŒæ—¶æ›´åŠ å¼ºåŠ¿äº†è€Œå·²ã€‚][44]\n\n\n![](/img/in-post/post-nextgen-web-pwa/qcon-trend.png)\n*ä¼—å¤šçš„æŠ€æœ¯é€‰å‹ï¼Œä»¥åŠç¬”è€…çš„ä¸€ç§çŒœæµ‹*\n\nç¬”è€…ä¸è´Ÿè´£ä»»å¾—åšä¸€äº›çŒœæµ‹ï¼šè™½ç„¶[é‡é‡çº§çš„ Hybrid æ¶æ„ä¸åŸºç¡€è®¾æ–½][45]ä»æ˜¯ç›®å‰ä¸å°‘åœºæ™¯ä¸‹æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆï¼›ä½†æ˜¯éšç€ç§»åŠ¨è®¾å¤‡æœ¬èº«çš„ç¡¬ä»¶æ€§èƒ½æå‡ä¸æ–°æŠ€æœ¯çš„æˆç†Ÿä¸æ™®åŠï¼ŒJS-to-Native ä¸ä»¥ PWA ä¸ºé¦–çš„çº¯ web åº”ç”¨ï¼Œå°†åˆ†åˆ«ä»ä¸¤ä¸ªæ–¹å‘æŒ¤å‹ Hybrid çš„ç”Ÿå­˜ç©ºé—´ï¼Œæ¶ˆåŒ–å½“å‰ Hybrid æ¶æ„ä¸»è¦è§£å†³çš„é—®é¢˜ï¼›å‰è€…å°†é€æ¸æ¼”åŒ–ä¸ºç±»ä¼¼ Xarmarin è¿™æ ·é’ˆå¯¹è·¨å¹³å°åŸç”Ÿåº”ç”¨å¼€å‘çš„è§£å†³æ–¹æ¡ˆï¼›åè€…å°†æ˜¾è‘—é™ä½å½“å‰ Hybrid æ¶æ„çš„å®¹å™¨å¼€å‘ä¸éƒ¨ç½²æˆæœ¬ï¼Œå°† Hybrid è¿”ç’å½’çœŸä¸ºç®€å•çš„ webview è°ƒç”¨ã€‚\n\nè¿™ç§çŒœæµ‹å½“ç„¶ä¸æ˜¯æ²¡æœ‰ä¾æ®çš„ççŒœï¼Œæ¯”å¦‚å‰è€…å¯ä»¥å‚è€ƒé˜¿é‡Œå·´å·´é›†å›¢çº§åˆ«è¿ç§» Weex çš„æˆ˜ç•¥ä¸å¾®ä¿¡å°ç¨‹åºçš„ roadmapï¼›åè€…åˆ™å¯ä»¥å‚è€ƒå½“å‰ Cordova ä¸ Ionic ä¸¤å¤§ Hybrid ç¤¾åŒºå¯¹ PWA çš„çƒ­çƒˆåå“ã€‚\n\n### PWA in China\n\nçœ‹çœ‹ Google å®˜æ–¹å®£ä¼ è¾ƒå¤šçš„ PWA [æ¡ˆä¾‹][47]å°±ä¼šå‘ç°ï¼ŒFlipKartã€Housing.com æ¥è‡ªå°åº¦ï¼›Lyftã€åç››é¡¿é‚®æŠ¥æ¥è‡ªåŒ—ç¾ï¼›å”¯ä¸€æ¥è‡ªä¸­å›½çš„ AliExpress ä¸»è¦å¼€å±•çš„åˆ™æ˜¯æµ·å¤–ä¸šåŠ¡ã€‚\n\nç”±äºä¸­å›½çš„ç‰¹æ®Šæ€§ï¼Œç¬”è€…åœ¨[ç¬¬ä¸€æ¬¡][46]èŠåˆ° PWA æ—¶éš¾å…è¡¨ç°å‡ºäº†ä¸€å®šç¨‹åº¦çš„æ‚²è§‚ï¼š\n\n- å›½å†…è¾ƒé‡è§† iOSï¼Œè€Œ iOS ç›®å‰è¿˜ä¸æ”¯æŒ PWAã€‚\n- å›½å†…çš„ Android å®ä¸ºã€Œå®‰å“ã€ï¼Œä¸è‡ªå¸¦ Chrome æ˜¯ä¸€ï¼Œå¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–å…¼å®¹é—®é¢˜ã€‚\n- å›½å†…å‚å•†å¯èƒ½å¹¶ä¸ä¼šåƒä¸‰æ˜Ÿé‚£æ ·å¯¹æ¨åŠ¨è‡ªå®¶æµè§ˆå™¨æ”¯æŒ PWA é‚£ä¹ˆæ„Ÿå…´è¶£ã€‚\n- ä¾èµ– GCM æ¨é€çš„é€šçŸ¥ä¸å¯ç”¨ï¼ŒWeb Push Protocol è¿˜æ²¡æœ‰å›½å†…çš„æ¨é€æœåŠ¡å®ç°ã€‚\n- å›½å†… webview ç¯å¢ƒè¾ƒä¸ºå¤æ‚ï¼ˆæ¯”å¦‚å¾®ä¿¡ï¼‰ï¼Œé»‘ç§‘æŠ€æ¯”è¾ƒå¤šã€‚\n\nåè§‚å°åº¦ï¼Œç”±äº Google æœåŠ¡å¥å…¨ã€æ ‡é… Chrome çš„ Android æ‰‹æœºå¸‚å ç‡éå¸¸é«˜ï¼ŒPWA çš„ç”¨æˆ·è¾¾åˆ°ç‡ç®€ç›´ç›´é€¼ 100%ï¼Œä¹Ÿéš¾å…è·å¾—æ— æ•°å¥½è¯„ä¸æ”¯æŒäº†ã€‚**ç¬”è€…å¥¢æœ›ç€æœ¬æ–‡èƒ½å¯¹æ¨åŠ¨ PWA çš„å›½å†…ç¯å¢ƒæœ‰ä¸€å®šçš„è´¡çŒ®ã€‚**ä¸è¿‡æ— è®ºå¦‚ä½•ï¼ŒPWA åœ¨å›½å†…çš„æ˜¥å¤©å¯èƒ½çš„ç¡®ä¼šæ¥å¾—ç¨å¾®æ™šä¸€ç‚¹äº†ã€‚\n\n\n## ç»“è¯­\n\nã€Œ[æˆ‘ä»¬ä¿¡ä»° Webï¼Œä¸ä»…ä»…åœ¨äºè½¯ä»¶ã€è½¯ä»¶å¹³å°ä¸å•çº¯çš„æŠ€æœ¯][q97]ï¼Œè¿˜åœ¨äº[ã€ä»»ä½•äººï¼Œåœ¨ä»»ä½•æ—¶é—´ä»»ä½•åœ°ç‚¹ï¼Œéƒ½å¯ä»¥åœ¨ä¸‡ç»´ç½‘ä¸Šå‘å¸ƒä»»ä½•ä¿¡æ¯ï¼Œå¹¶è¢«ä¸–ç•Œä¸Šçš„ä»»ä½•ä¸€ä¸ªäººæ‰€è®¿é—®åˆ°ã€‚ã€è€Œè¿™æ‰æ˜¯ web çš„æœ€ä¸ºé©å‘½ä¹‹å¤„ï¼Œå ªç§°æˆ‘ä»¬äººç±»ï¼Œä½œä¸ºä¸€ä¸ªç‰©ç§çš„ä¸€æ¬¡è¿›åŒ–ã€‚][27]ã€\n\nè¯·ä¸è¦è®© web å†[ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»][49]ï¼Œæµè§ˆå™¨å‚å•†ä»¬å·²ç»é‡æ–°èµ°åˆ°äº†ä¸€èµ·ï¼Œè€Œä¸‹ä¸€æ£’å°†æ˜¯äº¤åˆ°æˆ‘ä»¬ web åº”ç”¨å¼€å‘è€…çš„æ‰‹ä¸Šã€‚[ä¹”å¸ƒæ–¯æ›¾ç›¸ä¿¡ web åº”ç”¨æ‰ç§»åŠ¨åº”ç”¨çš„æœªæ¥][50]ï¼Œé‚£å°±è®©æˆ‘ä»¬ç”¨ä»£ç è¯æ˜ç»™è¿™ä¸ªä¸–ç•Œçœ‹å§ã€‚\n\n**è®©æˆ‘ä»¬çš„ç”¨æˆ·ï¼Œä¹Ÿåƒæˆ‘ä»¬è¿™èˆ¬çƒ­çˆ± web å§ã€‚**\n\né»„ç„ï¼Œäº 12 æœˆçš„åŒ—äº¬ã€‚\n\n---\n\n*æ³¨ï¼šåœ¨ç¬”è€…æ’°æ–‡æœŸé—´ï¼ŒGoogle åœ¨ Google China Developers Days ä¸Šå®£å¸ƒäº† developers.google.cn åŸŸåçš„å¯ç”¨ï¼Œæ–¹ä¾¿å›½å†…å¼€å‘è€…è®¿é—®ã€‚å¯¹äºæ–‡ä¸­æ‰€æœ‰é“¾å‘ developers.google.com çš„å‚è€ƒæ–‡çŒ®ï¼Œåº”è¯¥éƒ½å¯ä»¥åœ¨ cn ç«™ç‚¹ä¸­æ‰¾åˆ°ã€‚*\n\n\n[1]: http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/ \"Isomorphic JavaScript: The Future of Web Apps\"\n\n[2]: https://medium.com/@mjackson/universal-javascript-4761051b7ae9#.unrzyz3b2 \"Universal JavaScript\"\n\n[3]: https://en.wikipedia.org/wiki/Ajax_(programming) \"Ajax - Wikipedia\"\n\n[4]: https://en.wikipedia.org/wiki/Responsive_web_design \"Responsive Web Design - Wikipedia\"\n\n[5]: http://www.adobe.com/products/air.html \"Adobe AIR Application\"\n\n[6]: https://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx \"Windows Runtime JS API\"\n\n[7]: https://developer.chrome.com/extensions/apps \"Chrome Packaged Apps\"\n\n[8]: https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS \"Firefox OS Packaged Apps\"\n\n[9]: http://www.openwebosproject.org/ \"Open webOS\"\n\n[10]: https://cordova.apache.org/ \"Apache Cordova\"\n\n[11]: http://electron.atom.io/ \"Electron\"\n\n[12]: https://developer.chrome.com/extensions/manifest \"Chrome Apps Manifest\"\n\n[13]: https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS/Manifest \"Firefox OS App Manifest\"\n\n[14]: https://www.w3.org/TR/2013/WD-appmanifest-20131217/ \"Manifest for web apps and bookmarks - First Public Working Draft\"\n\n[15]: https://youtu.be/m2a9hlUFRhg \"Keynote (Chrome Dev Summit 2015)\"\n\n[16]: https://developers.google.com/web/fundamentals/engage-and-retain/app-install-banners/?hl=en \"Web App Install Banners - Google Developer\"\n\n[17]: https://en.wikipedia.org/wiki/Flipkart \"Flipkart - wikipedia\"\n\n[18]: https://youtu.be/eI3B6x0fw9s \"Keynote (Chrome Dev Summit 2016)\"\n\n[19]: http://cordova.apache.org/docs/en/6.x/config_ref/index.html \"Config.xml - Apache Cordova\"\n\n[20]: https://msdn.microsoft.com/en-us/library/dn320426%28v=vs.85%29.aspx \"Browser configuration schema reference - MSDN\"\n\n[21]: https://huangxuan.me \"Hux Blog\"\n\n[22]: https://www.html5rocks.com/en/tutorials/notifications/quick/ \"Using the Notification API\"\n\n[23]: https://blogs.windows.com/msedgedev/2016/05/16/web-notifications-microsoft-edge/#2VBm890EjvAvUcgE.97\n\n[24]: https://developer.apple.com/notifications/safari-push-notifications/ \"Safari Push Notifications\"\n\n[25]: https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/ \"Web Push Notifications - Google Developer\"\n\n[26]: https://en.wikipedia.org/wiki/Progressive_web_app#Hybrid_Apps\n\n[27]: http://phonegap.com/blog/2012/05/09/phonegap-beliefs-goals-and-philosophy/ \"PhoneGap Beliefs, Goals, and Philosophy\"\n\n[28]: https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/ \"Progressive Web Apps: Escaping Tabs Without Losing Our Soul\"\n\n[29]: https://github.com/Huxpro/sw-101-gdgdf\n\n[30]: developers.google.com/web/updates/2015/12/background-sync \"Background Sync - Google Developers\"\n\n[31]: http://marketingland.com/report-mobile-users-spend-80-percent-time-just-five-apps-116858 \"Report: Mobile Users Spend 80 Percent Of Time In Just Five Apps\"\n\n[32]: http://www.recode.net/2016/9/16/12933780/average-app-downloads-per-month-comscore \"Half of U.S. smartphone users download zero apps per month\"\n\n[33]: https://youtu.be/EUthgV-U05w \"AdWords for App Promotion - Google\"\n\n[34]: https://blogs.windows.com/msedgedev/2016/07/08/the-progress-of-web-apps/ \"The Progress of Web Apps - MSEdgeDev Blog\"\n\n[35]: https://developer.microsoft.com/en-us/microsoft-edge/platform/status/ \"Microsoft Edge web platform features status\"\n\n[36]: https://trac.webkit.org/wiki/FiveYearPlanFall2015\n\n[37]: https://webkit.org/status/ \"Webkit Feature Status\"\n\n[38]: https://webkit.org/status/#specification-web-components \"HTML Imports - Not Considering\"\n\n[39]: https://cloudfour.com/thinks/why-does-the-washington-posts-progressive-web-app-increase-engagement-on-ios/ \"Why does The Washington Postâ€™s Progressive Web App increase engagement on iOS?\"\n\n[40]: https://cloudfour.com/thinks/ios-doesnt-support-progressive-web-apps-so-what/ \"iOS doesnâ€™t support Progressive Web Apps, so what?\"\n\n[41]: https://jakearchibald.github.io/isserviceworkerready/ \"Is Service Worker Ready?\"\n\n[42]: https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support \"Internet Explorer End of Support\"\n\n[43]: https://cloudfour.com/thinks/progressive-web-apps-simply-make-sense/?utm_source=mobilewebweekly&utm_medium=email#fn-4857-1 \"Progressive Web Apps Simply Make Sense\"\n\n[44]: https://medium.com/@owencm/the-surprising-tradeoff-at-the-center-of-question-whether-to-build-an-native-or-web-app-d2ad00c40fb2#.ym83ct2ax \"The surprising tradeoff at the center of the question whether to build a Native or Web App\"\n\n[45]: http://zhihu.com/question/31316032/answer/75236718\n\n[46]: https://www.zhihu.com/question/46690207/answer/104851767\n\n[47]: https://developers.google.com/web/showcase/ \"Case Studies - Google Developers\"\n\n[48]: https://en.wikipedia.org/wiki/Google_Gears \"Gears - Wikipedia\"\n\n[49]: https://zhuanlan.zhihu.com/p/22561084 \"Web åœ¨ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»\"\n\n[50]: youtu.be/y1B2c3ZD9fk?t=1h14m48s \"WWDC 2017\"\n\n\n[spec1]: https://w3c.github.io/manifest/#use-cases-and-requirements \"Web App Manifest\"\n\n[spec2]: https://w3c.github.io/ServiceWorker/ \"Service Worker\"\n\n[spec3]: http://w3c.github.io/push-api/ \"Push API\"\n\n[spec4]: https://notifications.spec.whatwg.org/ \"Notification API\"\n\n[spec5]: https://tools.ietf.org/html/draft-ietf-webpush-protocol-12 \"Web Push Protocol\"\n\n[spec6]: https://wicg.github.io/BackgroundSync/spec/ \"Web Background Synchronization - WICG\"\n\n[spec7]: http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification \"API Specification - The Chromium Projects\"\n\n[spec8]: https://www.w3.org/TR/notifications/ \"Web Notifications - W3C\"\n\n[spec9]: https://streams.spec.whatwg.org/ \"Streams\"\n\n[spec10]: https://www.w3.org/TR/offline-webapps/ \"Offline Web Applications\"\n\n[spec11]: https://www.w3.org/TR/2011/WD-html5-20110525/offline.html \"HTML5 5.6 Offline Web Applications\"\n\n\n[i1]: http://appleinsider.com/articles/08/10/03/latest_iphone_software_supports_full_screen_web_apps.html\n\n[i2]: https://developers.google.com/web/events/pwaroadshow/\n\n[i3]: https://medium.com/@AdityaPunjani/building-flipkart-lite-a-progressive-web-app-2c211e641883#.hz4d3kw41 \"Building Flipkart Lite: A Progressive Web App\"\n\n[i4]: https://twitter.com/adityapunjani\n\n\n[q37]: https://huangxuan.me/pwa-qcon2016/#/37 \"PWA@QCon2016 #37\"\n\n[q17]: https://huangxuan.me/pwa-qcon2016/#/17 \"PWA@QCon2016 #17\"\n\n[q97]: https://huangxuan.me/pwa-qcon2016/#/99 \"PWA@QCon2016 #97\"\n\n[s12]: https://huangxuan.me/sw-101-gdgdf/#/12 \"SW-101@DevFest #12\"\n\n[s13]: https://huangxuan.me/sw-101-gdgdf/#/13 \"SW-101@DevFest #13\"\n\n[b0]: https://huangxuan.me/2016/11/20/sw-101-gdgdf/\n","source":"_posts/2017-02-09-nextgen-web-pwa.markdown","raw":"---\nlayout:     post\ntitle:      \"ä¸‹ä¸€ä»£ Web åº”ç”¨æ¨¡å‹ â€”â€” Progressive Web App\"\nsubtitle:   \"The Next Generation Application Model For The Web - Progressive Web App\"\ndate:       2017-02-09 12:00:00\nauthor:     \"Hux\"\nheader-img: \"img/post-bg-nextgen-web-pwa.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - å‰ç«¯å¼€å‘\n    - JavaScript\n    - PWA\n---\n\n\n\n> æœ¬æ–‡é¦–å‘äº[ã€Šç¨‹åºå‘˜ã€‹](http://geek.csdn.net/news/detail/135595)ï¼Œå‘å¸ƒäº [Hux Blog](https://huangxuan.me)ã€[å‰ç«¯å¤–åˆŠè¯„è®º](https://zhuanlan.zhihu.com/FrontendMagazine)ï¼Œè½¬è½½è¯·ä¿ç•™é“¾æ¥ ;)\n\n\n## ä¸‹ä¸€ä»£ Web åº”ç”¨ï¼Ÿ\n\nè¿‘å¹´æ¥ï¼ŒWeb åº”ç”¨åœ¨æ•´ä¸ªè½¯ä»¶ä¸äº’è”ç½‘è¡Œä¸šæ‰¿è½½çš„è´£ä»»è¶Šæ¥è¶Šé‡ï¼Œè½¯ä»¶å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬è¶Šæ¥è¶Šé«˜ï¼ŒWeb æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯ Web å®¢æˆ·ç«¯æŠ€æœ¯ï¼Œè¿æ¥äº†çˆ†å‘å¼çš„å‘å±•ã€‚\n\nåŒ…æ‹¬ä½†ä¸é™äºåŸºäº Node.js çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼›è¯¸å¦‚ Webpackã€Rollup è¿™æ ·çš„æ‰“åŒ…å·¥å…·ï¼›Babelã€PostCSS è¿™æ ·çš„è½¬è¯‘å·¥å…·ï¼›TypeScriptã€Elm è¿™æ ·è½¬è¯‘è‡³ JavaScript çš„ç¼–ç¨‹è¯­è¨€ï¼›Reactã€Angularã€Vue è¿™æ ·é¢å‘ç°ä»£ web åº”ç”¨éœ€æ±‚çš„å‰ç«¯æ¡†æ¶åŠå…¶ç”Ÿæ€ï¼Œä¹Ÿæ¶Œç°å‡ºäº†åƒ[åŒæ„ JavaScript][1]ä¸[é€šç”¨ JavaScript åº”ç”¨][2]è¿™æ ·å°†æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆServer-side Renderingï¼‰ä¸å•é¡µé¢åº”ç”¨æ¨¡å‹ï¼ˆSingle-page Appï¼‰ç»“åˆçš„ web åº”ç”¨æ¶æ„æ–¹å¼ï¼Œå¯ä»¥è¯´æ˜¯ç™¾èŠ±é½æ”¾ã€‚\n\nä½†æ˜¯ï¼ŒWeb åº”ç”¨åœ¨ç§»åŠ¨æ—¶ä»£å¹¶æ²¡æœ‰è¾¾åˆ°å…¶åœ¨æ¡Œé¢è®¾å¤‡ä¸Šæµè¡Œçš„ç¨‹åº¦ã€‚ç©¶å…¶åŸå› ï¼Œå°½ç®¡ä¸Šè¿°çš„å„ç§æ–¹æ¡ˆå·²ç»å……åˆ†åˆ©ç”¨äº†ç°æœ‰çš„ JavaScript è®¡ç®—èƒ½åŠ›ã€CSS å¸ƒå±€èƒ½åŠ›ã€HTTP ç¼“å­˜ä¸æµè§ˆå™¨ API å¯¹å½“ä»£åŸºäº [Ajax][3] ä¸[å“åº”å¼è®¾è®¡][4]çš„ web åº”ç”¨æ¨¡å‹çš„æ€§èƒ½ä¸ä½“éªŒå¸¦æ¥äº†å·¥ç¨‹è§’åº¦çš„å·¨å¤§çªç ´ï¼Œæˆ‘ä»¬ä»ç„¶æ— æ³•åœ¨ä¸å€ŸåŠ©åŸç”Ÿç¨‹åºè¾…åŠ©æµè§ˆå™¨çš„å‰æä¸‹çªç ´ web å¹³å°æœ¬èº«å¯¹ web åº”ç”¨å›ºæœ‰çš„æ¡æ¢ï¼š**å®¢æˆ·ç«¯è½¯ä»¶ï¼ˆå³ç½‘é¡µï¼‰éœ€è¦ä¸‹è½½æ‰€å¸¦æ¥çš„ç½‘ç»œå»¶è¿Ÿï¼›ä¸ Web åº”ç”¨ä¾èµ–æµè§ˆå™¨ä½œä¸ºå…¥å£æ‰€å¸¦æ¥çš„ä½“éªŒé—®é¢˜ã€‚**\n\n![](/img/in-post/post-nextgen-web-pwa/PWAR-007.jpeg)\n*Web ä¸åŸç”Ÿåº”ç”¨åœ¨ç§»åŠ¨å¹³å°ä¸Šçš„ä½¿ç”¨æ—¶é•¿å¯¹æ¯” [å›¾ç‰‡æ¥æº: Google][i2]*\n\nåœ¨æ¡Œé¢è®¾å¤‡ä¸Šï¼Œç”±äºç½‘ç»œæ¡ä»¶ç¨³å®šï¼Œå±å¹•å°ºå¯¸å……åˆ†ï¼Œäº¤äº’æ–¹å¼è¶‹å‘äºå¤šä»»åŠ¡ï¼Œè¿™ä¸¤ç‚¹é€ æˆçš„è´Ÿé¢å½±å“å¯¹æ¯” web åº”ç”¨å…äºå®‰è£…ã€éšå«éšåˆ°ã€æ— éœ€æ›´æ–°ç­‰ä¼˜ç‚¹ï¼Œç‘•ä¸æ©ç‘œã€‚ä½†æ˜¯åœ¨ç§»åŠ¨æ—¶ä»£ï¼Œè„†å¼±çš„ç½‘ç»œè¿æ¥ä¸å…¨æ–°çš„äººæœºäº¤äº’æ–¹å¼ä½¿å¾—è¿™ä¸¤ä¸ªé—®é¢˜è¢«æ— é™æ”¾å¤§ï¼Œä¸¥é‡åˆ¶çº¦äº† web åº”ç”¨åœ¨ç§»åŠ¨å¹³å°çš„å‘å±•ã€‚åœ¨ç”¨æˆ·çœ¼é‡Œï¼ŒåŸç”Ÿåº”ç”¨ä¸ä¼šå‡ºç°ã€Œç™½å±ã€ï¼Œæ¸…ä¸€è‰²éƒ½æ‘†åœ¨ä¸»å±å¹•ä¸Šï¼›è€Œ web åº”ç”¨åˆ™æ˜¯æµè§ˆå™¨è¿™ä¸ªåº”ç”¨ä¸­çš„åº”ç”¨ï¼Œä½¿ç”¨èµ·æ¥å¹¶ä¸æ–¹ä¾¿ï¼Œè€Œä¸”åŠ è½½ä¹Ÿæ¯”åŸç”Ÿåº”ç”¨è¦æ…¢ã€‚\n\nProgressive Web Appsï¼ˆä»¥ä¸‹ç®€ç§° PWAï¼‰ä»¥åŠæ„æˆ PWA çš„ä¸€ç³»åˆ—å…³é”®æŠ€æœ¯çš„å‡ºç°ï¼Œç»ˆäºè®©æˆ‘ä»¬çœ‹åˆ°äº†å½»åº•è§£å†³è¿™ä¸¤ä¸ªå¹³å°çº§åˆ«é—®é¢˜çš„æ›™å…‰ï¼šèƒ½å¤Ÿæ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦ã€ç”šè‡³è®© web åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä½¿ç”¨çš„ Service Worker ä¸ Cache Storageï¼›ç”¨äºæè¿° web åº”ç”¨å…ƒæ•°æ®ï¼ˆmetadataï¼‰ã€è®© web åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±ã€å…¨å±æ‰§è¡Œçš„ Web App Manifestï¼›ä»¥åŠè¿›ä¸€æ­¥æé«˜ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›ï¼Œè®© web åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥çš„ Push API ä¸ Notification API ç­‰ç­‰ã€‚\n\nå°†è¿™äº›æŠ€æœ¯ç»„åˆåœ¨ä¸€èµ·ä¼šæ˜¯æ€æ ·çš„æ•ˆæœå‘¢ï¼Ÿã€Œå°åº¦é˜¿é‡Œå·´å·´ã€ â€”â€” [Flipkart][17] åœ¨ 2015 å¹´ä¸€åº¦å…³é—­äº†è‡ªå·±çš„ç§»åŠ¨ç«¯ç½‘ç«™ï¼Œå´åœ¨å¹´åº•å‘å¸ƒäº†ç°åœ¨æœ€ä¸ºäººæ´¥æ´¥ä¹é“çš„ PWA æ¡ˆä¾‹ *FlipKart Lite*ï¼Œæˆä¸ºä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæ”¯æ’‘å¤§è§„æ¨¡ä¸šåŠ¡çš„ PWAã€‚å‘å¸ƒçš„ä¸€å‘¨åå®ƒå°±äº®ç›¸äº [Chrome Dev Summit 2015][15] ä¸Šï¼Œç¬”è€…å½“æ—¶å°±è¢«æƒŠè‰³åˆ°äº†ã€‚ä¸ºäº†æ–¹ä¾¿å„åª’ä»‹ä¸Šçš„è¯»è€…è§‚çœ‹ï¼Œç¬”è€…åšäº†å‡ å¹…å›¾æ–¹ä¾¿ç»™å¤§å®¶ä»‹ç»ï¼š\n\n![](/img/in-post/post-nextgen-web-pwa/flipkart-1.jpeg)\n*å›¾ç‰‡æ¥æº: Hux & [Medium.com][i3]*\n\nå½“æµè§ˆå™¨å‘ç°ç”¨æˆ·[éœ€è¦][16] Flipkart Lite æ—¶ï¼Œå®ƒå°±ä¼šæç¤ºç”¨æˆ·ã€Œå˜¿ï¼Œä½ å¯ä»¥æŠŠå®ƒæ·»åŠ è‡³ä¸»å±å“¦ã€ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼‰ã€‚è¿™æ ·ï¼ŒFlipkart Lite å°±ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·åœ¨ä¸»å±ä¸Šç•™ä¸‹ä¸€ä¸ªè‡ªå®šä¹‰çš„ icon ä½œä¸ºå…¥å£ï¼›ä¸ä¸€èˆ¬çš„ä¹¦ç­¾ä¸åŒï¼Œå½“ç”¨æˆ·ç‚¹å‡» icon æ—¶ï¼ŒFlipkat Lite å°†ç›´æ¥å…¨å±æ‰“å¼€ï¼Œä¸å†å—å›°äºæµè§ˆå™¨çš„ UI ä¸­ï¼Œè€Œä¸”æœ‰è‡ªå·±çš„å¯åŠ¨å±æ•ˆæœã€‚\n\n\n![](/img/in-post/post-nextgen-web-pwa/flipkart-2.jpeg)\n*å›¾ç‰‡æ¥æº: Hux & [Medium.com][i3]*\n\næ›´å¼ºå¤§çš„æ˜¯ï¼Œåœ¨æ— æ³•è®¿é—®ç½‘ç»œæ—¶ï¼ŒFlipkart Lite å¯ä»¥åƒåŸç”Ÿåº”ç”¨ä¸€æ ·ç…§å¸¸æ‰§è¡Œï¼Œè¿˜ä¼šå¾ˆéªšæ°”çš„å˜æˆé»‘ç™½è‰²ï¼›ä¸ä½†å¦‚æ­¤ï¼Œæ›¾ç»è®¿é—®è¿‡çš„å•†å“éƒ½ä¼šè¢«ç¼“å­˜ä¸‹æ¥å¾—ä»¥åœ¨ç¦»çº¿æ—¶ç»§ç»­è®¿é—®ã€‚åœ¨å•†å“é™ä»·ã€ä¿ƒé”€ç­‰æ—¶åˆ»ï¼ŒFlipkart Lite ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·å‘èµ·æ¨é€é€šçŸ¥ï¼Œå¸å¼•ç”¨æˆ·å›åˆ°åº”ç”¨ã€‚\n\n**æ— éœ€æ‹…å¿ƒç½‘ç»œå»¶è¿Ÿï¼›æœ‰ç€ç‹¬ç«‹å…¥å£ä¸ç‹¬ç«‹çš„ä¿æ´»æœºåˆ¶ã€‚**ä¹‹å‰ä¸¤ä¸ªé—®é¢˜çš„ä¸€å¹¶è§£å†³ï¼Œå®£å‘Šç€ web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æµ´ç«é‡ç”Ÿï¼šæ»¡è¶³ PWA æ¨¡å‹çš„ web åº”ç”¨ï¼Œå°†é€æ¸æˆä¸ºç§»åŠ¨æ“ä½œç³»ç»Ÿçš„ä¸€ç­‰å…¬æ°‘ï¼Œå¹¶å°†å‘åŸç”Ÿåº”ç”¨å‘èµ·æŒ‘æˆ˜ä¸ã€Œå¤ä»‡ã€ã€‚\n\næ›´ä»¤ç¬”è€…å…´å¥‹çš„æ˜¯ï¼Œå°±åœ¨ä»Šå¹´ 11 æœˆçš„ [Chrome Dev Summit 2016][18] ä¸Šï¼ŒChrome çš„å·¥ç¨‹ VP Darin Fisher ä»‹ç»äº† Chrome å›¢é˜Ÿæ­£åœ¨åšçš„ä¸€äº›å®éªŒï¼šæŠŠã€Œæ·»åŠ è‡³ä¸»å±ã€é‡å‘½åä¸ºã€Œå®‰è£…ã€ï¼Œè¢«å®‰è£…çš„ PWA ä¸å†ä»…ä»¥ widget çš„å½¢å¼æ˜¾ç¤ºåœ¨æ¡Œé¢ä¸Šï¼Œè€Œæ˜¯çœŸæ­£åšåˆ°ä¸æ‰€æœ‰åŸç”Ÿåº”ç”¨å¹³çº§ï¼Œä¸€æ ·è¢«æ”¶çº³è¿›åº”ç”¨æŠ½å±‰ï¼ˆApp Drawerï¼‰é‡Œï¼Œä¸€æ ·å‡ºç°åœ¨ç³»ç»Ÿè®¾ç½®ä¸­ ğŸ‰ğŸ‰ğŸ‰ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/flipkart-3.jpeg)\n*å›¾ç‰‡æ¥æº: Hux & [@adityapunjani][i4]*\n\nå›¾ä¸­ä»å·¦åˆ°å³åˆ†åˆ«ä¸ºï¼šç±»ä¼¼åŸç”Ÿåº”ç”¨çš„å®‰è£…ç•Œé¢ï¼›è¢«æ”¶çº³åœ¨åº”ç”¨æŠ½å±‰é‡Œçš„ Flipkart Lite ä¸ Hux Blogï¼›è®¾ç½®ç•Œé¢ä¸­å¹¶åˆ—å‡ºç°çš„ Flipkart åŸç”Ÿåº”ç”¨ä¸ Flipkart Lite PWA ï¼ˆå¯ä»¥çœ‹åˆ° PWA å·¨å¤§çš„ä½“ç§¯ä¼˜åŠ¿ï¼‰\n\n**ç¬”è€…ç›¸ä¿¡ï¼ŒPWA æ¨¡å‹å°†ç»§çº¦ 20 å¹´å‰æ¨ªç©ºå‡ºä¸–çš„ Ajax ä¸çº¦ 10 å¹´å‰é£é¡ç§»åŠ¨äº’è”ç½‘çš„å“åº”å¼è®¾è®¡ä¹‹åï¼Œæ€èµ· web åº”ç”¨æ¨¡å‹çš„ç¬¬ä¸‰æ¬¡æ ¹æœ¬æ€§é©å‘½ï¼Œå°† web åº”ç”¨å¸¦è¿›ä¸€ä¸ªå…¨æ–°çš„æ—¶ä»£ã€‚**\n\n## PWA å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\n\n### [Web App Manifest][spec1]\n\nWeb App Manifestï¼Œå³é€šè¿‡ä¸€ä¸ªæ¸…å•æ–‡ä»¶å‘æµè§ˆå™¨æš´éœ² web åº”ç”¨çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åå­—ã€icon çš„ URL ç­‰ï¼Œä»¥å¤‡æµè§ˆå™¨ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ·»åŠ è‡³ä¸»å±æˆ–æ¨é€é€šçŸ¥æ—¶æš´éœ²ç»™æ“ä½œç³»ç»Ÿï¼Œä»è€Œå¢å¼º web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿçš„é›†æˆèƒ½åŠ›ã€‚\n\nè®© web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä½“éªŒæ›´æ¥è¿‘åŸç”Ÿåº”ç”¨çš„å°è¯•å…¶å®æ—©åœ¨ 2008 å¹´çš„ [iOS 1.1.3 ä¸ iOS 2.1.0 ][q37]æ—¶å°±å¼€å§‹äº†ï¼Œå®ƒä»¬åˆ†åˆ«ä¸º web åº”ç”¨å¢åŠ äº†å¯¹è‡ªå®šä¹‰ icon å’Œå…¨å±æ‰“å¼€çš„æ”¯æŒã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/ios2-a2hs.gif)\n*å›¾ç‰‡æ¥æº: [appleinsider.com][i1]*\n\nä½†æ˜¯å¾ˆå¿«ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„ç§æœ‰å¹³å°é€šè¿‡ `<meta>`/`<link>` æ ‡ç­¾æ¥ä¸º web åº”ç”¨æ·»åŠ ã€Œç§è´§ã€ï¼Œ`<head>` å¾ˆå¿«å°±è¢«å¡æ»¡äº†ï¼š\n\n```html\n<!-- Add to homescreen for Safari on iOS -->\n<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\">\n<meta name=\"apple-mobile-web-app-title\" content=\"Lighten\">\n\n<!-- Add to homescreen for Chrome on Android -->\n<meta name=\"mobile-web-app-capable\" content=\"yes\">\n<mate name=\"theme-color\" content=\"#000000\">\n\n<!-- Icons for iOS and Android Chrome M31~M38 -->\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"images/touch/apple-touch-icon-144x144-precomposed.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"114x114\" href=\"images/touch/apple-touch-icon-114x114-precomposed.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"72x72\" href=\"images/touch/apple-touch-icon-72x72-precomposed.png\">\n<link rel=\"apple-touch-icon-precomposed\" href=\"images/touch/apple-touch-icon-57x57-precomposed.png\">\n\n<!-- Icon for Android Chrome, recommended -->\n<link rel=\"shortcut icon\" sizes=\"196x196\" href=\"images/touch/touch-icon-196x196.png\">\n\n<!-- Tile icon for Win8 (144x144 + tile color) -->\n<meta name=\"msapplication-TileImage\" content=\"images/touch/ms-touch-icon-144x144-precomposed.png\">\n<meta name=\"msapplication-TileColor\" content=\"#3372DF\">\n\n<!-- Generic Icon -->\n<link rel=\"shortcut icon\" href=\"images/touch/touch-icon-57x57.png\">\n```\n\næ˜¾ç„¶ï¼Œè¿™ç§åšæ³•å¹¶ä¸ä¼˜é›…ï¼šåˆ†æ•£åˆé‡å¤çš„å…ƒæ•°æ®å®šä¹‰å¤šä½™ä¸”éš¾ä»¥ç»´æŒåŒæ­¥ï¼Œä¸ html è€¦åˆåœ¨ä¸€èµ·ä¹ŸåŠ é‡äº†æµè§ˆå™¨æ£€æŸ¥å…ƒæ•°æ®æœªæ¥å˜åŠ¨çš„æˆæœ¬ã€‚ä¸æ­¤åŒæ—¶ï¼Œç¤¾åŒºé‡Œå¼€å§‹å‡ºç°ä½¿ç”¨ manifest æ–‡ä»¶ä»¥ä¸­å¿ƒåŒ–åœ°æè¿°å…ƒæ•°æ®çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚ [Chrome Extensionã€ Chrome Hosted Web Apps (2010)][12] ä¸ [Firefox OS App Manifest (2011)][13] ä½¿ç”¨ JSONï¼›[Cordova][19] ä¸ [Windows Pinned Site][20] ä½¿ç”¨ XMLï¼›\n\n2013 å¹´ï¼ŒW3C WebApps å·¥ä½œç»„å¼€å§‹å¯¹åŸºäº JSON çš„ Manifest è¿›è¡Œæ ‡å‡†åŒ–ï¼ŒäºåŒå¹´å¹´åº•å‘å¸ƒ[ç¬¬ä¸€ä»½å…¬å¼€ Working Draft][14]ï¼Œå¹¶é€æ¸æ¼”åŒ–æˆä¸ºä»Šå¤©çš„ W3C Web App Manifestï¼š\n\n```json\n{\n  \"short_name\": \"Manifest Sample\",\n  \"name\": \"Web Application Manifest Sample\",\n  \"icons\": [{\n      \"src\": \"launcher-icon-2x.png\",\n      \"sizes\": \"96x96\",\n      \"type\": \"image/png\"\n   }],\n  \"scope\": \"/sample/\",\n  \"start_url\": \"/sample/index.html\",\n  \"display\": \"standalone\",\n  \"orientation\": \"landscape\"\n  \"theme_color\": \"#000\",\n  \"background_color\": \"#fff\",\n}\n```\n```html\n<!-- document -->\n<link rel=\"manifest\" href=\"/manifest.json\">\n```\n\nè¯¸å¦‚ `name`ã€`icons`ã€`display` éƒ½æ˜¯æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ–°å¢çš„æˆå‘˜åˆ™ä¸º web åº”ç”¨å¸¦æ¥äº†ä¸€ç³»åˆ—ä»¥å‰ web åº”ç”¨æƒ³åšå´åšä¸åˆ°ï¼ˆæˆ–åœ¨ä¹‹å‰åªèƒ½é  hackï¼‰çš„æ–°ç‰¹æ€§ï¼š\n\n- `scope`ï¼šå®šä¹‰äº† web åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–çš„ URL å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰ PWA é‡Œç»§ç»­æµè§ˆã€‚\n- `start_url`ï¼šå®šä¹‰äº†ä¸€ä¸ª PWA çš„å…¥å£é¡µé¢ã€‚æ¯”å¦‚è¯´ä½ æ·»åŠ  [Hux Blog][21] çš„ä»»ä½•ä¸€ä¸ªæ–‡ç« åˆ°ä¸»å±ï¼Œä»ä¸»å±æ‰“å¼€æ—¶éƒ½ä¼šè®¿é—® [Hux Blog][21] çš„ä¸»é¡µã€‚\n- `orientation`ï¼šç»ˆäºï¼Œæˆ‘ä»¬å¯ä»¥é”å®šå±å¹•æ—‹è½¬äº†ï¼ˆå–œæè€Œæ³£â€¦ï¼‰\n- `theme_color`/`background_color`ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ UI ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ Android çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰ã€‚\n\nè¿™ä¸ªæ¸…å•çš„æˆå‘˜è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ç”¨äºå£°æ˜ã€Œå¯¹åº”åŸç”Ÿåº”ç”¨ã€çš„ `related_applications` ç­‰ç­‰ï¼Œæœ¬æ–‡å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ä½œä¸º PWA çš„ã€Œæˆ·å£æœ¬ã€ï¼Œæ‰¿è½½ç€ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›çš„é‡ä»»ï¼ŒWeb App Manifest è¿˜å°†åœ¨æ—¥åä¸æ–­æ‰©å±•ï¼Œä»¥æ»¡è¶³ web åº”ç”¨é«˜é€Ÿæ¼”åŒ–çš„éœ€è¦ã€‚\n\n\n\n### [Service Worker][spec2]\n\næˆ‘ä»¬åŸæœ‰çš„æ•´ä¸ª Web åº”ç”¨æ¨¡å‹ï¼Œéƒ½æ˜¯æ„å»ºåœ¨ã€Œç”¨æˆ·èƒ½ä¸Šç½‘ã€çš„å‰æä¹‹ä¸‹çš„ï¼Œæ‰€ä»¥ä¸€ç¦»çº¿å°±åªèƒ½ç©å°æé¾™äº†ã€‚å…¶å®ï¼Œå¯¹äºã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€è¿™ä»¶äº‹ï¼ŒService Worker è‡³å°‘æ˜¯ web ç¤¾åŒºçš„ç¬¬ä¸‰æ¬¡å°è¯•äº†ã€‚\n\næ•…äº‹å¯ä»¥è¿½æº¯åˆ° 2007 å¹´çš„ [Google Gears][48]ï¼šä¸ºäº†è®©è‡ªå®¶çš„ Gmailã€Youtubeã€Google Reader ç­‰ web åº”ç”¨å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®ä¸ç¦»çº¿æ‰§è¡Œï¼ŒGoogle å¼€å‘äº†ä¸€ä¸ªæµè§ˆå™¨æ‹“å±•æ¥å¢å¼º web åº”ç”¨ã€‚Google Gears æ”¯æŒ IE 6ã€Safari 3ã€Firefox 1.5 ç­‰æµè§ˆå™¨ï¼›è¦çŸ¥é“ï¼Œé‚£ä¸€å¹´ Chrome éƒ½è¿˜æ²¡å‡ºç”Ÿå‘¢ã€‚\n\nåœ¨ Gears API ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å‘ LocalServer æ¨¡å—æäº¤ä¸€ä¸ªç¼“å­˜æ–‡ä»¶æ¸…å•æ¥å®ç°ç¦»çº¿æ”¯æŒï¼š\n\n```javascript\n// Somewhere in your javascript\nvar localServer = google.gears.factory.create(\"bata.localserver\");\nvar store = localServer.createManagedStore(STORE_NAME);\nstore.manifestUrl = \"manifest.json\"\n```\n```json\n// manifest.json - å‡è®¾ JSON æœ‰æ³¨é‡Š\n{\nã€€ã€€\"betaManifestVersion\":ã€€1,\nã€€ã€€\"version\": ã€€\"1.0\",\nã€€ã€€\"entries\":ã€€[ã€€\nã€€ã€€ã€€ã€€{ã€€\"url\": ã€€\"index.html\"},\nã€€ã€€ã€€ã€€{ã€€\"url\": ã€€\"main.js\"}\nã€€ã€€]\n}\n```\n\næ˜¯ä¸æ˜¯æ„Ÿåˆ°å¾ˆç†Ÿæ‚‰ï¼Ÿå¥½åƒ [HTML5 è§„èŒƒ][spec11]ä¸­çš„ Application Cache ä¹Ÿæ˜¯ç±»ä¼¼çš„ä¸œè¥¿ï¼Ÿ\n\n```html\n<html manifest=\"cache.appcache\">\n```\n```\nCACHE MANIFEST\n\nCACHE:\nindex.html\nmain.js\n```\n\næ˜¯çš„ï¼ŒGears çš„ LocalServer å°±æ˜¯åæ¥å¤§å®¶æ‰€ç†ŸçŸ¥çš„ App Cache çš„å‰èº«ï¼Œå¤§çº¦ä» [2008][spec10] å¹´å¼€å§‹ W3C å°±å¼€å§‹å°è¯•å°† Gears è¿›è¡Œæ ‡å‡†åŒ–äº†ï¼›é™¤äº† LocalServerï¼ŒGears ä¸­ç”¨äºæä¾›å¹¶è¡Œè®¡ç®—èƒ½åŠ›çš„ WorkerPool æ¨¡å—ä¸ç”¨äºæä¾›æœ¬åœ°æ•°æ®åº“ä¸ SQL æ”¯æŒçš„ Database æ¨¡å—ä¹Ÿåˆ†åˆ«æ˜¯æ—¥å Web Worker ä¸ Web SQL Databaseï¼ˆåè¢«åºŸå¼ƒï¼‰çš„å‰èº«ã€‚\n\nHTML5 App Cache ä½œä¸ºç¬¬äºŒæ³¢ã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€çš„å°è¯•ï¼Œç¡®å®ä¹ŸæœåŠ¡äº†æ¯”å¦‚ Google Docã€å°¤é›¨æºªæ—©å¹´ä½œå“ HTML5 Clearã€ä»¥åŠä¸€ç›´ç”¨ web åº”ç”¨ä½œä¸ºè‡ªå·± iOS åº”ç”¨çš„ FT.comï¼ˆFinancial Timesï¼‰ç­‰ä¸å°‘ web åº”ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰ Service Worker ä»€ä¹ˆäº‹å‘¢ï¼Ÿ  \n\næ˜¯å•Šï¼Œå¦‚æœ App Cache æ²¡æœ‰è¢«è®¾è®¡å¾—[çƒ‚åˆ°å®Œå…¨ä¸å¯ç¼–ç¨‹ã€æ— æ³•æ¸…ç†ç¼“å­˜ã€å‡ ä¹æ²¡æœ‰è·¯ç”±æœºåˆ¶ã€å‡ºäº† Bug ä¸€ç‚¹æ•‘éƒ½æ²¡æœ‰][s12]ï¼Œå¯èƒ½å°±çœŸæ²¡ Service Worker ä»€ä¹ˆäº‹äº†ã€‚[App Cache å·²ç»åœ¨å‰ä¸ä¹…å®šç¨¿çš„ HTML5.1 ä¸­è¢«æ‹¿æ‰äº†ï¼ŒW3C ä¸ºäº†æŒ½æ•‘ web ä¸–ç•ŒçœŸæ˜¯ä¸æƒœæŠŠè‡ªå·±çš„è„¸éƒ½æ‰“è‚¿äº†â€¦â€¦][s13]\n\næ—¶è‡³ä»Šæ—¥ï¼Œæˆ‘ä»¬ç»ˆäºè¿æ¥äº† Service Worker çš„æ›™å…‰ã€‚ç®€å•æ¥è¯´ï¼ŒService Worker æ˜¯ä¸€ä¸ªå¯ç¼–ç¨‹çš„ Web Workerï¼Œå®ƒå°±åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä»¥æ‹¦æˆªã€å¤„ç†ã€å“åº”æµç»çš„ HTTP è¯·æ±‚ï¼›é…åˆéšä¹‹å¼•å…¥ Cache Storage APIï¼Œä½ å¯ä»¥è‡ªç”±ç®¡ç† HTTP è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜ï¼Œè¿™ä½¿å¾— Service Worker å¯ä»¥ä»ç¼“å­˜ä¸­å‘ web åº”ç”¨æä¾›èµ„æºï¼Œå³ä½¿æ˜¯åœ¨ç¦»çº¿çš„ç¯å¢ƒä¸‹ã€‚\n\n\n![](/img/in-post/post-nextgen-web-pwa/sw-sw.png)\n*Service Worker å°±åƒä¸€ä¸ªè¿è¡Œåœ¨å®¢æˆ·ç«¯çš„ä»£ç†*\n\næ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ç½‘é¡µ `foo.html` æ³¨å†Œè¿™ä¹ˆä¸€ä¸ª Service Workerï¼Œå®ƒå°†åŠ«æŒç”± `foo.html` å‘èµ·çš„ä¸€åˆ‡ HTTP è¯·æ±‚ï¼Œå¹¶ç»Ÿç»Ÿè¿”å›æœªè®¾ç½® `Content-Type` çš„ `Hello World!`ï¼š\n\n```javascript\n// sw.js\nself.onfetch = (e) => {\n  e.respondWith(new Response('Hello World!'))\n}\n```\n\nService Worker ç¬¬ä¸€æ¬¡å‘å¸ƒäº 2014 å¹´çš„ Google IO ä¸Šï¼Œç›®å‰å·²å¤„äº W3C å·¥ä½œè‰æ¡ˆçš„çŠ¶æ€ã€‚å…¶è®¾è®¡å¸å–äº† Application Cache çš„å¤±è´¥ç»éªŒï¼Œä½œä¸º web åº”ç”¨çš„å¼€å‘è€…çš„ä½ æœ‰ç€å®Œå…¨çš„æ§åˆ¶èƒ½åŠ›ï¼›åŒæ—¶ï¼Œå®ƒè¿˜å€Ÿé‰´äº† Chrome å¤šå¹´æ¥åœ¨ Chrome Extension ä¸Šçš„è®¾è®¡ç»éªŒï¼ˆChrome Background Pages ä¸ Chrome Event Pagesï¼‰ï¼Œé‡‡ç”¨äº†åŸºäºã€Œäº‹ä»¶é©±åŠ¨ã€çš„å”¤é†’æœºåˆ¶ï¼Œä»¥å¤§å¹…èŠ‚çœåå°è®¡ç®—çš„èƒ½è€—ã€‚æ¯”å¦‚ä¸Šé¢çš„ `fetch` å…¶å®å°±æ˜¯ä¼šå”¤é†’ Service Worker çš„äº‹ä»¶ä¹‹ä¸€ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/sw-lifecycle.png)\n*Service Worker çš„ç”Ÿå‘½å‘¨æœŸ*\n\né™¤äº†ç±»ä¼¼ `fetch` è¿™æ ·çš„åŠŸèƒ½äº‹ä»¶å¤–ï¼ŒService Worker è¿˜æä¾›äº†ä¸€ç»„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ŒåŒ…æ‹¬å®‰è£…ã€æ¿€æ´»ç­‰ç­‰ã€‚æ¯”å¦‚ï¼Œåœ¨ Service Worker çš„ã€Œå®‰è£…ã€äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ web åº”ç”¨æ‰€éœ€è¦çš„èµ„æºç»Ÿç»Ÿé¢„å…ˆä¸‹è½½å¹¶ç¼“å­˜åˆ° Cache Storage ä¸­å»ï¼š\n\n```javascript\n// sw.js\nself.oninstall = (e) => {\n  e.waitUntil(\n    caches.open('installation')\n      .then(cache =>  cache.addAll([\n        './',\n        './styles.css',\n        './script.js'\n      ]))\n  )\n});\n```\n\nè¿™æ ·ï¼Œå½“ç”¨æˆ·ç¦»çº¿ï¼Œç½‘ç»œæ— æ³•è®¿é—®æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ç¼“å­˜ä¸­å¯åŠ¨æˆ‘ä»¬çš„ web åº”ç”¨ï¼š\n\n```javascript\n//sw.js\nself.onfetch = (e) => {\n  const fetched = fetch(e.request)\n  const cached = caches.match(e.request)\n\n  e.respondWith(\n    fetched.catch(_ => cached)\n  )\n}\n```\n\nå¯ä»¥çœ‹å‡ºï¼ŒService Worker è¢«è®¾è®¡ä¸ºä¸€ä¸ªç›¸å¯¹åº•å±‚ï¼ˆlow-levelï¼‰ã€é«˜åº¦å¯ç¼–ç¨‹ã€å­æ¦‚å¿µä¼—å¤šï¼Œä¹Ÿå› æ­¤å¼‚å¸¸çµæ´»ä¸”å¼ºå¤§çš„ APIï¼Œæ•…æœ¬æ–‡åªèƒ½å±•ç¤ºå®ƒçš„å†°å±±ä¸€è§’ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ³¨å†Œ Service Worker è¦æ±‚ä½ çš„ web åº”ç”¨éƒ¨ç½²äº HTTPS åè®®ä¸‹ï¼Œä»¥å…åˆ©ç”¨ Service Worker çš„ä¸­é—´äººæ”»å‡»ã€‚ç¬”è€…åœ¨ä»Šå¹´ GDG åŒ—äº¬çš„ DevFest ä¸Šåˆ†äº«äº† [Service Worker 101][b0]ï¼Œæ¶µç›–äº† Service Worker è­¬å¦‚ã€Œç½‘ç»œä¼˜å…ˆã€ã€ã€Œç¼“å­˜ä¼˜å…ˆã€ã€ã€Œç½‘ç»œä¸ç¼“å­˜æ¯”èµ›ã€è¿™äº›æ›´å¤æ‚çš„ç¼“å­˜ç­–ç•¥ã€å­¦ä¹ èµ„æ–™ã€ä»¥åŠ[ç¤ºä¾‹ä»£ç ][29]ï¼Œå¯ä»¥ä¾›å¤§å®¶å‚è€ƒã€‚\n\n\n![](/img/in-post/post-nextgen-web-pwa/sw-race.png)\n*Service Worker çš„ä¸€ç§ç¼“å­˜ç­–ç•¥ï¼šè®©ç½‘ç»œè¯·æ±‚ä¸è¯»å–ç¼“å­˜æ¯”èµ›*\n\nä½ ä¹Ÿå¯ä»¥å°è¯•åœ¨æ”¯æŒ PWA çš„æµè§ˆå™¨ä¸­è®¿é—®ç¬”è€…çš„åšå®¢ [Hux Blog][21]ï¼Œæ„Ÿå— Service Worker çš„å®é™…æ•ˆæœï¼šæ‰€æœ‰è®¿é—®è¿‡çš„é¡µé¢éƒ½ä¼šè¢«ç¼“å­˜å¹¶å…è®¸åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ç»§ç»­è®¿é—®ï¼Œæ‰€æœ‰æœªè®¿é—®è¿‡çš„é¡µé¢åˆ™ä¼šåœ¨ç¦»çº¿ç¯å¢ƒä¸‹å±•ç¤ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç¦»çº¿é¡µé¢ã€‚\n\nåœ¨ç¬”è€…çœ‹æ¥ï¼Œ**Service Worker å¯¹ PWA çš„é‡è¦æ€§ç›¸å½“äº `XMLHTTPRequest` ä¹‹äº Ajaxï¼Œåª’ä½“æŸ¥è¯¢ï¼ˆMedia Queryï¼‰ä¹‹äºå“åº”å¼è®¾è®¡ï¼Œæ˜¯æ”¯æ’‘ PWA ä½œä¸ºã€Œä¸‹ä¸€ä»£ web åº”ç”¨æ¨¡å‹ã€çš„æœ€æ ¸å¿ƒæŠ€æœ¯ã€‚**ç”±äº Service Worker å¯ä»¥ä¸åŒ…æ‹¬ Indexed DBã€Streams åœ¨å†…çš„å¤§éƒ¨åˆ† DOM æ— å…³ API è¿›è¡Œäº¤äº’ï¼Œå®ƒçš„æ½œåŠ›ç®€ç›´æ— å¯é™é‡ã€‚ç¬”è€…å‡ ä¹å¯ä»¥æ–­è¨€ï¼ŒService Worker å°†åœ¨æœªæ¥åå¹´é‡Œæˆä¸º web å®¢æˆ·ç«¯æŠ€æœ¯å·¥ç¨‹åŒ–çš„å…µå®¶å¿…äº‰ä¹‹åœ°ï¼Œå¸¦æ¥ã€Œç¦»çº¿ä¼˜å…ˆï¼ˆOffline-firstï¼‰ã€çš„æ¶æ„é©å‘½ã€‚\n\n\n\n### Push Notification\n\nPWA æ¨é€é€šçŸ¥ä¸­çš„ã€Œæ¨é€ã€ä¸ã€Œé€šçŸ¥ã€ï¼Œå…¶å®ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒä½†åˆç›¸å¾—ç›Šå½°çš„ APIï¼š\n\n[Notification API][spec4] ç›¸ä¿¡å¤§å®¶å¹¶ä¸é™Œç”Ÿï¼Œå®ƒè´Ÿè´£æ‰€æœ‰ä¸é€šçŸ¥æœ¬èº«ç›¸å…³çš„æœºåˆ¶ï¼Œæ¯”å¦‚é€šçŸ¥çš„æƒé™ç®¡ç†ã€å‘æ“ä½œç³»ç»Ÿå‘èµ·é€šçŸ¥ã€é€šçŸ¥çš„ç±»å‹ä¸éŸ³æ•ˆï¼Œä»¥åŠæä¾›é€šçŸ¥è¢«ç‚¹å‡»æˆ–å…³é—­æ—¶çš„å›è°ƒç­‰ç­‰ï¼Œç›®å‰å›½å†…å¤–çš„å„å¤§ç½‘ç«™ï¼ˆå°¤å…¶åœ¨æ¡Œé¢ç«¯ï¼‰éƒ½æœ‰ä¸€å®šçš„ä½¿ç”¨ã€‚Notification API æœ€æ—©åº”è¯¥æ˜¯åœ¨ [2010][22] å¹´å‰åç”± Chromium æå‡º[è‰æ¡ˆ][spec7]ä»¥ `webkitNotifications` å‰ç¼€æ–¹å¼å®ç°ï¼›éšç€ 2011 å¹´è¿›å…¥æ ‡å‡†åŒ–ï¼›2012 å¹´åœ¨ Safari 6ï¼ˆMac OSX 10.8+ï¼‰ä¸Šè·å¾—æ”¯æŒï¼›2015 å¹´ Notification API æˆä¸º [W3C Recommendation][spec8]ï¼›2016 å¹´ [Edge çš„æ”¯æŒ][23]ï¼›Web Notifications å·²ç»åœ¨æ¡Œé¢æµè§ˆå™¨ä¸­è·å¾—äº†å…¨é¢æ”¯æŒï¼ˆChromeã€Edgeã€Firefoxã€Operaã€Safariï¼‰çš„æˆå°±ã€‚\n\n[Push API][spec3] çš„å‡ºç°åˆ™è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘ web åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œå®ƒå®šä¹‰äº† web åº”ç”¨å¦‚ä½•å‘æ¨é€æœåŠ¡å‘èµ·è®¢é˜…ã€å¦‚ä½•å“åº”æ¨é€æ¶ˆæ¯ï¼Œä»¥åŠ web åº”ç”¨ã€åº”ç”¨æœåŠ¡å™¨ä¸æ¨é€æœåŠ¡ä¹‹é—´çš„é‰´æƒä¸åŠ å¯†æœºåˆ¶ï¼›ç”±äº Push API å¹¶ä¸ä¾èµ– web åº”ç”¨ä¸æµè§ˆå™¨ UI å­˜æ´»ï¼Œæ‰€ä»¥å³ä½¿æ˜¯åœ¨ web åº”ç”¨ä¸æµè§ˆå™¨æœªè¢«ç”¨æˆ·æ‰“å¼€çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åå°è¿›ç¨‹æ¥å—æ¨é€æ¶ˆæ¯å¹¶è°ƒç”¨ Notification API å‘ç”¨æˆ·å‘å‡ºé€šçŸ¥ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒMac OSX 10.9 Mavericks ä¸ Safari 7 åœ¨ 2013 å¹´å°±å‘å¸ƒäº†è‡ªå·±çš„ç§æœ‰æ¨é€æ”¯æŒï¼ŒåŸºäº APNS çš„ [Safari Push Notifications][24]ã€‚\n\nåœ¨ PWA ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ Service Worker çš„åå°è®¡ç®—èƒ½åŠ›ç»“åˆ Push API å¯¹æ¨é€äº‹ä»¶è¿›è¡Œå“åº”ï¼Œå¹¶é€šè¿‡ Notification API å®ç°é€šçŸ¥çš„å‘å‡ºä¸å¤„ç†ï¼š\n\n```javascript\n// sw.js\nself.addEventListener('push', event => {\n  event.waitUntil(\n    // Process the event and display a notification.\n    self.registration.showNotification(\"Hey!\")\n  );\n});\n\nself.addEventListener('notificationclick', event => {  \n  // Do something with the event  \n  event.notification.close();  \n});\n\nself.addEventListener('notificationclose', event => {  \n  // Do something with the event  \n});\n\n```\n\nå¯¹äº Push Notificationï¼Œç¬”è€…çš„å‡ æ¬¡åˆ†äº«ä¸­ä¸€ç›´éƒ½æçš„ç¨å¾®å°‘ä¸€äº›ï¼Œä¸€æ˜¯å› ä¸º Push API è¿˜å¤„äº Editor Draft çš„çŠ¶æ€ï¼ŒäºŒæ˜¯ç›®å‰æµè§ˆå™¨ä¸æ¨é€æœåŠ¡é—´çš„åè®®æ”¯æŒè¿˜ä¸å¤Ÿæˆç†Ÿï¼šChromeï¼ˆä¸å…¶å®ƒåŸºäº Blink çš„æµè§ˆå™¨ï¼‰åœ¨ Chromium 52 ä¹‹å‰åªæ”¯æŒåŸºäº Google ç§æœ‰çš„ GCM/FCM æœåŠ¡è¿›è¡Œé€šçŸ¥æ¨é€ã€‚ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œç»§ Firefox 44 ä¹‹åï¼ŒChrome 52 ä¸ Opera 39 ä¹Ÿç´§è¿½å…¶åå®ç°äº†æ­£åœ¨ç”± IETF è¿›è¡Œæ ‡å‡†åŒ–çš„ [Web æ¨é€åè®®ï¼ˆWeb Push Protocolï¼‰][spec5]ã€‚\n\n\nå¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ Google çš„äº‘æœåŠ¡ï¼ˆæ¯”å¦‚ Firebaseï¼‰ï¼Œå¹¶ä¸”ä¸»è¦é¢å‘çš„æ˜¯æµ·å¤–ç”¨æˆ·ï¼Œé‚£ä¹ˆåœ¨ web åº”ç”¨ä¸Šæ”¯æŒåŸºäº GCM/FCM çš„æ¨é€é€šçŸ¥å¹¶ä¸æ˜¯ä¸€ä»¶è´¹åŠ›çš„äº‹æƒ…ï¼Œç¬”è€…æ¨èä½ é˜…è¯»ä¸€ä¸‹ Google Developers çš„[ç³»åˆ—æ–‡ç« ][25]ï¼Œå¾ˆå¤šå›½å¤–å…¬å¸å·²ç»ç©èµ·æ¥äº†ã€‚\n\n\n\n## ä» Hybrid åˆ° PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\n\n2008 å¹´ï¼Œå½“ç§»åŠ¨æ—¶ä»£æ¥ä¸´ï¼Œ[å”±è¡°ç§»åŠ¨ Web çš„å£°éŸ³][q17]å¼€å§‹å‡ºç°ï¼Œè€Œæµè§ˆå™¨çš„è¿›åŒ–å¹¶ä¸èƒ½è·Ÿä¸Šæ—¶ï¼Œæ¥è‡ª Nitobi çš„ Brian Leroux ç­‰äººåˆ›é€ äº† [Phonegap][10]ï¼Œå¸Œæœ›å®ƒèƒ½ä»¥ Polyfill çš„å½¢å¼ã€å¼¥è¡¥ç›®å‰æµè§ˆå™¨ä¸ç§»åŠ¨è®¾å¤‡é—´çš„ã€Œé¸¿æ²Ÿã€ï¼Œä»æ­¤å¼€å¯äº†[æ··åˆåº”ç”¨ï¼ˆHybrid Appsï¼‰][26]çš„æ—¶ä»£ã€‚\n\nå‡ å¹´é—´ï¼Œ[Adobe AIR][5]ã€[Windows Runtime Apps][6]ã€[Chrome Apps][7]ã€[Firefox OS][8]ã€[WebOS][9]ã€[Cordova/Phonegap][10]ã€[Electron][11] ä»¥åŠå›½å†…æ¯”å¦‚å¾®ä¿¡ã€æ·˜å®ï¼Œæ— æ•°çš„ Hybrid æ–¹æ¡ˆæ‹”åœ°è€Œèµ·ï¼Œè®© web å¼€å‘è€…å¯ä»¥åœ¨ç»§ç»­ä½¿ç”¨ web å®¢æˆ·ç«¯æŠ€æœ¯çš„åŒæ—¶ï¼Œåšåˆ°ä¸€äº›åªæœ‰åŸç”Ÿåº”ç”¨æ‰èƒ½åšåˆ°çš„äº‹æƒ…ï¼ŒåŒ…æ‹¬è®¿é—®ä¸€äº›è®¾å¤‡ä¸æ“ä½œç³»ç»Ÿ APIï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´åŠ  ã€ŒAppyã€ çš„ä½“éªŒï¼Œä»¥åŠè¿›å…¥ App Store ç­‰ç­‰ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/qcon-hybridzation.png)\n*ä¼—å¤šçš„ Hybrid æ–¹æ¡ˆ*\n\nPWA ä½œä¸ºä¸€ä¸ªæ¶µç›–æ€§æœ¯è¯­ï¼Œä¸è¿‡å¾€çš„è¿™äº›æˆ–å¤šæˆ–å°‘é€šè¿‡ç§æœ‰å¹³å° API å¢å¼º web åº”ç”¨çš„å°è¯•æœ€å¤§çš„ä¸åŒï¼Œåœ¨äºæ„æˆ PWA çš„æ¯ä¸€é¡¹åŸºæœ¬æŠ€æœ¯ï¼Œéƒ½å·²ç»æˆ–æ­£åœ¨è¢« IETFã€ECMAã€W3C æˆ– WHATWG æ ‡å‡†åŒ–ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå®ƒä»¬éƒ½å°†è¢«çº³å…¥å¼€æ”¾ web æ ‡å‡†ï¼Œå¹¶åœ¨ä¸è¿œçš„å°†æ¥å¾—åˆ°æ‰€æœ‰æµè§ˆå™¨ä¸å…¨å¹³å°çš„æ”¯æŒã€‚æˆ‘ä»¬ç»ˆäºå¯ä»¥é€ƒå‡º App Store å°é—­çš„ç§˜å¯†èŠ±å›­ï¼Œé‡æ–°å›åˆ°å±äº web çš„é‚£ç‰‡å¼€æ”¾è‡ªç”±çš„å¤§åœ°ã€‚\n\næœ‰è¶£çš„æ˜¯ï¼Œä»ä¸Šæ–‡ä¸­ä½ ä¹Ÿå¯ä»¥å‘ç°ï¼Œç»„æˆ PWA çš„å„é¡¹æŠ€æœ¯çš„è‰æ¡ˆæ­£æ˜¯ç”±ä¸Šè¿°å„ç§ç§æœ‰æ–¹æ¡ˆèƒŒåçš„æµè§ˆå™¨å‚å•†æˆ–å¼€å‘è€…ç›´æ¥è´¡çŒ®æˆ–é—´æ¥å½±å“çš„ã€‚å¯ä»¥è¯´ï¼ŒPWA çš„èƒŒåå¹¶ä¸æ˜¯æŸä¸€å®¶æˆ–ä¸¤å®¶å…¬å¸ï¼Œè€Œæ˜¯æ•´ä¸ª web ç¤¾åŒºä¸æ•´ä¸ª web è§„èŒƒã€‚**æ­£æ˜¯å› ä¸ºè¿™ç§å¼€æ”¾ä¸å»ä¸­å¿ƒåŒ–çš„åŠ›é‡ï¼Œä½¿å¾—ä¸‡ç»´ç½‘ï¼ˆWorld Wide Webï¼‰èƒ½å¤Ÿæˆä¸ºå½“ä»Šä¸–ç•Œä¸Šè·¨å¹³å°èƒ½åŠ›æœ€å¼ºã€ä¸”å‡ ä¹æ˜¯å”¯ä¸€ä¸€ä¸ªå…·å¤‡è¿™ç§è·¨å¹³å°èƒ½åŠ›çš„åº”ç”¨å¹³å°ã€‚**\n\n[ã€Œæˆ‘ä»¬ç›¸ä¿¡ Webï¼Œæ˜¯å› ä¸ºç›¸ä¿¡å®ƒæ˜¯è§£å†³è®¾å¤‡å·®å¼‚åŒ–çš„ç»ˆææ–¹æ¡ˆï¼›æˆ‘ä»¬ç›¸ä¿¡ï¼Œå½“ Web åœ¨ä»Šå¤©åšä¸åˆ°ä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œæ˜¯å› ä¸ºå®ƒè¿˜æ²¡æ¥å¾—åŠå»å®ç°ï¼Œè€Œä¸æ˜¯å› ä¸ºä»–åšä¸åˆ°ã€‚è€Œ Phonegapï¼Œå®ƒçš„ç»ˆæç›®çš„å°±æ˜¯æ¶ˆå¤±åœ¨ Web æ ‡å‡†çš„èƒŒåã€‚ã€][27]\n\nåœ¨ä¸ä¸¢å¤± web çš„å¼€æ”¾çµé­‚ï¼Œåœ¨ä¸éœ€è¦ä¾é  Hybrid æŠŠåº”ç”¨æ”¾åœ¨ App Store çš„å‰æä¸‹ï¼Œè®© web åº”ç”¨èƒ½å¤Ÿæ¸è¿›å¼åœ°è·³è„±å‡ºæµè§ˆå™¨çš„æ ‡ç­¾ï¼Œå˜æˆç”¨æˆ·çœ¼ä¸­çš„ Appã€‚è¿™æ˜¯ Alex Russell åœ¨ 2015 å¹´æå‡º PWA æ¦‚å¿µçš„[åŸå§”][28]ã€‚\n\nè€Œåˆæ­£å› ä¸º web æ˜¯ä¸€ä¸ªæ•´ä½“ï¼ŒPWA å¯ä»¥åˆ©ç”¨çš„æŠ€æœ¯è¿œä¸æ­¢ä¸Šè¿°çš„å‡ ä¸ªè€Œå·²ï¼šAjaxã€å“åº”å¼è®¾è®¡ã€JavaScript æ¡†æ¶ã€ECMAScript Nextã€CSS Nextã€Houdiniã€Indexed DBã€Device APIsã€Web Bluetoothã€Web Socketã€Web Paymentã€[å­µåŒ–][spec6]ä¸­çš„ [Background Sync API][30]ã€[Streams][spec9]ã€WebVRâ€¦â€¦å¼€æ”¾ Web ä¸–ç•Œ 27 å¹´æ¥çš„å‘å±•ä»¥åŠæœªæ¥çš„ä¸€åˆ‡ï¼Œéƒ½ä¸ PWA å¤©ä½œä¹‹åˆã€‚\n\n\n## é±¼ä¸ç†ŠæŒçš„å…¼å¾—\n\nç»è¿‡å‡ å¹´æ¥çš„æ‘¸ç´¢ï¼Œæ•´ä¸ªäº’è”ç½‘è¡Œä¸šä»¿ä½›åœ¨ã€ŒWeb åº”ç”¨ vs. åŸç”Ÿåº”ç”¨ã€è¿™ä¸ªé—®é¢˜ä¸Šè¾¾æˆäº†å…±è¯†ï¼š\n\n- web åº”ç”¨æ˜¯é±¼ï¼šè¿­ä»£å¿«ï¼Œè·å–ç”¨æˆ·æˆæœ¬ä½ï¼›è·¨å¹³å°å¼ºä½“éªŒå¼±ï¼Œå¼€å‘æˆæœ¬ä½ã€‚**é€‚åˆæ‹‰æ–°**ã€‚\n- åŸç”Ÿåº”ç”¨æ˜¯ç†ŠæŒï¼šè¿­ä»£æ…¢ï¼Œè·å–ç”¨æˆ·æˆæœ¬é«˜ï¼›è·¨å¹³å°å¼±ä½“éªŒå¼ºï¼Œå¼€å‘æˆæœ¬é«˜ã€‚**é€‚åˆä¿æ´»**ã€‚\n\nè¦çŸ¥é“ï¼Œè™½ç„¶ç”¨æˆ·èŠ±åœ¨åŸç”Ÿåº”ç”¨ä¸Šçš„æ—¶é—´è¦æ˜æ˜¾å¤šäº web åº”ç”¨ï¼Œä½†å…¶ä¸­[æœ‰ 80% çš„æ—¶é—´æ˜¯èŠ±åœ¨å‰äº”ä¸ªåº”ç”¨ä¸­çš„][31]ã€‚[è°ƒæŸ¥æ˜¾ç¤ºï¼Œç¾å›½æœ‰ä¸€åŠçš„æ™ºèƒ½æ‰‹æœºç”¨æˆ·å¹³å‡æ¯æœˆæ–° App å®‰è£…é‡ä¸ºé›¶][32]ï¼Œè€Œæœˆå‡ç½‘ç«™è®¿é—®é‡å´æœ‰ 100 ä¸ªï¼Œæ›´åˆ«æ Google Play ä¸Š[æœ‰ 60% çš„åº”ç”¨ä»æœªè¢«äººä¸‹è½½è¿‡äº†][33]ã€‚äºæ˜¯ï¼Œæ•´ä¸ªè¡Œä¸šçš„äº§å“ç­–ç•¥æ¸…ä¸€è‰²åœ°**ã€Œæ‹¿é±¼æ¢ç†ŠæŒã€**ï¼Œæ¯”å¦‚ç¬”è€…çš„è€ä¸œå®¶é˜¿é‡Œæ—…è¡Œï¼ˆé£çŒªæ—…è¡Œï¼‰ï¼Œweb åº”ç”¨å¸ƒæ»¡é˜¿é‡Œç³»å„ç§æ¸ é“ï¼Œæä¾›ã€Œä¼˜ç§€çš„ç¬¬ä¸€æ‰‹ä½“éªŒã€ï¼Œç­‰ä½ ç”¨çš„å¼€å¿ƒäº†ï¼Œå†å¼•è¯±ä½ å»ä¸‹è½½å®‰è£…åŸç”Ÿåº”ç”¨ã€‚\n\n![](/img/in-post/post-nextgen-web-pwa/PWAR-014+PWA.jpeg)\n*åŸç”Ÿåº”ç”¨ã€å½“ä»£ Web ä¸ PWA å›¾ç‰‡æ¥æº: Hux & [Google][i2]*\n\nä½†æ˜¯ï¼ŒPWA çš„å‡ºç°ï¼Œè®©é±¼ä¸ç†ŠæŒå…¼å¾—å˜æˆäº†å¯èƒ½ â€”â€” å®ƒåŒæ—¶å…·å¤‡äº† web åº”ç”¨ä¸åŸç”Ÿåº”ç”¨çš„ä¼˜ç‚¹ï¼Œæœ‰ç€è‡ªå·±ç‹¬æœ‰çš„å…ˆè¿›æ€§ï¼šã€Œæµè§ˆå™¨ -> æ·»åŠ è‡³ä¸»å±/å®‰è£… -> å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWA -> æ¨é€é€šçŸ¥ -> å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWAã€ï¼ŒPWA è‡ªèº«å°±åŒ…å«ç€ä»æ‹‰æ–°åˆ°ä¿æ´»çš„é—­ç¯ã€‚\n\né™¤æ­¤ä¹‹å¤–ï¼ŒPWA è¿˜ç»§æ‰¿äº† web åº”ç”¨çš„å¦å¤–ä¸¤å¤§ä¼˜ç‚¹ï¼š**æ— éœ€å…ˆä»˜å‡ºå‡ åå…†çš„ä¸‹è½½å®‰è£…æˆæœ¬å³å¯å¼€å§‹ä½¿ç”¨**ï¼Œä»¥åŠ**ä¸éœ€è¦ç»è¿‡åº”ç”¨è¶…å¸‚å®¡æ ¸å°±å¯ä»¥å‘å¸ƒæ–°ç‰ˆæœ¬**ã€‚æ‰€ä»¥ï¼ŒPWA å¯ä»¥ç§°å¾—ä¸Šæ˜¯ä¸€ç§ã€Œæµå¼åº”ç”¨ï¼ˆStreamable Appï¼‰ã€ä¸ã€Œå¸¸é’åº”ç”¨ï¼ˆEvergreen Appï¼‰ã€\n\n\n## æœªæ¥åˆ°æ¥äº†å—\n\nåœ¨ç¬”è€…åˆ†äº« PWA çš„ç»å†ä¸­ï¼Œæœ€ä¸æ„¿æ„å›ç­”çš„ä¸¤ä¸ªé—®é¢˜è«è¿‡äºã€ŒPWA å·²ç»è¢«å¹¿æ³›æ”¯æŒäº†å—ï¼Ÿã€ä»¥åŠã€ŒPWA ä¸ ABCDEFG è¿™äº›æŠ€æœ¯æ–¹æ¡ˆç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿã€ï¼Œä½†æ˜¯è¿™ç¡®å®æ˜¯ä¸¤ä¸ªé€ƒä¸å¼€çš„é—®é¢˜ã€‚\n\n### PWA çš„æ”¯æŒæƒ…å†µï¼Ÿ\n\nå½“æˆ‘ä»¬è¯´åˆ° PWA æ˜¯å¦è¢«æ”¯æŒæ—¶ï¼Œå…¶å®æˆ‘ä»¬åœ¨è¯´çš„æ˜¯ PWA èƒŒåçš„å‡ ä¸ªå…³é”®æŠ€æœ¯éƒ½å¾—åˆ°æ”¯æŒäº†æ²¡æœ‰ã€‚ä»¥æµè§ˆå™¨å†…æ ¸æ¥åˆ’åˆ†çš„è¯ï¼ŒBlinkï¼ˆChromeã€Opreaã€Samsung Internet ç­‰ï¼‰ä¸ Geckoï¼ˆFirefoxï¼‰éƒ½å·²ç»å®ç°äº† PWA æ‰€éœ€çš„æ‰€æœ‰å…³é”®æŠ€æœ¯ï¼ˆğŸ‘ğŸ‘ğŸ‘ï¼‰ï¼Œå¹¶å·²ç»å¼€å§‹æ¢å¯»æ›´å¤šçš„å¯èƒ½æ€§ã€‚EdgeHTMLï¼ˆEdgeï¼‰[ç®€ç›´ç§¯æå¾—ä¸èƒ½æ›´ç§¯æäº†][34]ï¼Œæ‰€æœ‰çš„ç‰¹æ€§éƒ½å·²ç»å¤„äºã€Œæ­£åœ¨å¼€å‘ä¸­ã€çš„[çŠ¶æ€][35]ã€‚æœ€å¤§çš„ç»Šè„šçŸ³ä»ç„¶æ¥è‡ªäº Webkitï¼ˆSafariï¼‰ï¼Œå°¤å…¶æ˜¯åœ¨ iOS ä¸Šï¼Œä¸Šè¿°çš„å››ä¸ª API éƒ½æœªå¾—åˆ°æ”¯æŒï¼Œè€Œä¸”ç”±äºå¹³å°é™åˆ¶ï¼Œç¬¬ä¸‰æ–¹æµè§ˆå™¨ä¹Ÿæ— æ³•åœ¨ iOS ä¸Šæ”¯æŒã€‚ï¼ˆ[ä»€ä¹ˆä½ è¯´ IEï¼Ÿ][42]ï¼‰\n\nä¸è¿‡ï¼Œä¹Ÿä¸è¦æ°”é¦ï¼ŒWebkit ä¸ä½†åœ¨å®ƒ [2015 å¹´å‘å¸ƒçš„äº”å¹´è®¡åˆ’][36]é‡Œæåˆ°äº† Service Workerï¼Œæ›´æ˜¯å·²ç»åœ¨æœ€è¿‘å®ç°äº† Service Worker æ‰€[ä¾èµ–][41]çš„ Requestã€Response ä¸ Fetch APIï¼Œè¿˜æŠŠ Service Worker ä¸ Web App Manifest çº·çº·[åˆ—å…¥äº†ã€Œæ­£åœ¨è€ƒè™‘ã€][37]çš„ API ä¸­ï¼›è¦çŸ¥é“ï¼ŒWebkit å¯æ˜¯æŠŠ Web Components ä¸­çš„ HTML Imports ç›´æ¥[åˆ—åˆ°ã€Œä¸è€ƒè™‘ã€é‡Œå»äº†][38]â€¦â€¦ï¼ˆå…¶å® Firefox ä¹Ÿæ˜¯ï¼‰\n\næ›´ä½•å†µï¼Œç”±äº web ç¤¾åŒºä¸€ç›´ä»¥æ¥æ‰€è¿½æ±‚çš„ã€Œæ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§ã€ï¼Œä¸€ä¸ª PWA å½“ç„¶å¯ä»¥åœ¨ iOS ç¯å¢ƒæ­£å¸¸æ‰§è¡Œã€‚[äº‹å®ä¸Šï¼Œåç››é¡¿é‚®æŠ¥å°†ç½‘ç«™è¿ç§»åˆ° PWA ä¹‹åå‘ç°ï¼Œä¸æ­¢æ˜¯ Androidï¼Œåœ¨ iOS ä¸Šä¹Ÿè·å¾—äº† 5 å€çš„æ´»è·ƒåº¦å¢é•¿][39]ï¼Œï¼ˆæ— è®ºæ˜¯ä¸æ˜¯å®ƒä»¬ä¹‹å‰çš„ç½‘ç«™å†™å¾—å¤ªçƒ‚å§ï¼‰ï¼Œå°±ç®— iOS ç°åœ¨è¿˜ä¸æ”¯æŒ PWA ä¹Ÿ[ä¸ä¼šæ€ä¹ˆæ ·][40]ï¼Œæˆ‘ä»¬æ›´æ˜¯æœ‰ç†ç”±ç›¸ä¿¡ PWA ä¼šå¾ˆå¿«åœ¨ iOS ä¸Šåˆ°æ¥ã€‚\n\n### PWA vs. Others\n\nè´ºè€ï¼ˆè´ºå¸ˆä¿Šï¼‰æ›¾è¯´è¿‡ï¼šã€Œä»çº¯ Web åˆ°çº¯ Nativeï¼Œä¹‹é—´æœ‰è®¸å¤šå¯èƒ½çš„ç‚¹ã€ã€‚å½“è€ƒè™‘ç§»åŠ¨åº”ç”¨çš„æŠ€æœ¯é€‰å‹æ—¶ï¼Œé™¤äº† Web ä¸åŸç”Ÿåº”ç”¨ï¼Œæˆ‘ä»¬è¿˜æœ‰å„ç§ä¸åŒç¨‹åº¦çš„ Hybridï¼Œè¿˜æœ‰ä»Šå¹´çˆ†å‘çš„è¯¸å¤š JS-to-Native æ–¹æ¡ˆã€‚\n\nè™½ç„¶æˆ‘åœ¨ä¸Šæ–‡ä¸­ç”¨äº†ã€Œå¤ä»‡ã€è¿™æ ·çš„å­—çœ¼ï¼Œä¸è¿‡æ— è®ºä»æŠ€æœ¯è¿˜æ˜¯å•†ä¸šçš„è§’åº¦ï¼Œæˆ‘ä»¬éƒ½æ²¡å¿…è¦æŠŠ web æˆ–æ˜¯ PWA æ”¾åˆ° Native çš„å¯¹ç«‹é¢å»çœ‹ã€‚å®ƒä»¬å½“ç„¶å­˜åœ¨ç«äº‰å…³ç³»ï¼Œä½†æ˜¯æ›´å¤šçš„æ—¶å€™ï¼Œweb-only ä¸ app-only çš„ç­–ç•¥éƒ½æ˜¯ä¸å®Œç¾çš„ï¼Œå½“å…¬å¸èµ„æºè¶³å¤Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€‰æ‹©åŒæ—¶å¼€å‘ä¸¤è€…ã€‚[å½“ç„¶ï¼Œæ— è®ºä¸ä¸ä¸åŸç”Ÿåº”ç”¨å¯¹æ¯”ï¼ŒPWA è®© web åº”ç”¨å˜å¾—ä½“éªŒæ›´å¥½è¿™ä»¶äº‹æœ¬èº«æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚][43]ã€Œä¸è°ˆåœºæ™¯èŠæŠ€æœ¯éƒ½æ˜¯æ‰¯æ·¡ã€ï¼Œ[æˆ‘ä»¬ä»ç„¶è¿˜æ˜¯éœ€è¦æ ¹æ®è‡ªå·±äº§å“ä¸å›¢é˜Ÿçš„æƒ…å†µæ¥å†³å®šå¯¹åº”çš„æŠ€æœ¯é€‰å‹ä¸å¹³å°ç­–ç•¥ï¼Œåªæ˜¯ PWA è®© web åº”ç”¨åœ¨é¢å¯¹é€‰å‹è€ƒéªŒæ—¶æ›´åŠ å¼ºåŠ¿äº†è€Œå·²ã€‚][44]\n\n\n![](/img/in-post/post-nextgen-web-pwa/qcon-trend.png)\n*ä¼—å¤šçš„æŠ€æœ¯é€‰å‹ï¼Œä»¥åŠç¬”è€…çš„ä¸€ç§çŒœæµ‹*\n\nç¬”è€…ä¸è´Ÿè´£ä»»å¾—åšä¸€äº›çŒœæµ‹ï¼šè™½ç„¶[é‡é‡çº§çš„ Hybrid æ¶æ„ä¸åŸºç¡€è®¾æ–½][45]ä»æ˜¯ç›®å‰ä¸å°‘åœºæ™¯ä¸‹æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆï¼›ä½†æ˜¯éšç€ç§»åŠ¨è®¾å¤‡æœ¬èº«çš„ç¡¬ä»¶æ€§èƒ½æå‡ä¸æ–°æŠ€æœ¯çš„æˆç†Ÿä¸æ™®åŠï¼ŒJS-to-Native ä¸ä»¥ PWA ä¸ºé¦–çš„çº¯ web åº”ç”¨ï¼Œå°†åˆ†åˆ«ä»ä¸¤ä¸ªæ–¹å‘æŒ¤å‹ Hybrid çš„ç”Ÿå­˜ç©ºé—´ï¼Œæ¶ˆåŒ–å½“å‰ Hybrid æ¶æ„ä¸»è¦è§£å†³çš„é—®é¢˜ï¼›å‰è€…å°†é€æ¸æ¼”åŒ–ä¸ºç±»ä¼¼ Xarmarin è¿™æ ·é’ˆå¯¹è·¨å¹³å°åŸç”Ÿåº”ç”¨å¼€å‘çš„è§£å†³æ–¹æ¡ˆï¼›åè€…å°†æ˜¾è‘—é™ä½å½“å‰ Hybrid æ¶æ„çš„å®¹å™¨å¼€å‘ä¸éƒ¨ç½²æˆæœ¬ï¼Œå°† Hybrid è¿”ç’å½’çœŸä¸ºç®€å•çš„ webview è°ƒç”¨ã€‚\n\nè¿™ç§çŒœæµ‹å½“ç„¶ä¸æ˜¯æ²¡æœ‰ä¾æ®çš„ççŒœï¼Œæ¯”å¦‚å‰è€…å¯ä»¥å‚è€ƒé˜¿é‡Œå·´å·´é›†å›¢çº§åˆ«è¿ç§» Weex çš„æˆ˜ç•¥ä¸å¾®ä¿¡å°ç¨‹åºçš„ roadmapï¼›åè€…åˆ™å¯ä»¥å‚è€ƒå½“å‰ Cordova ä¸ Ionic ä¸¤å¤§ Hybrid ç¤¾åŒºå¯¹ PWA çš„çƒ­çƒˆåå“ã€‚\n\n### PWA in China\n\nçœ‹çœ‹ Google å®˜æ–¹å®£ä¼ è¾ƒå¤šçš„ PWA [æ¡ˆä¾‹][47]å°±ä¼šå‘ç°ï¼ŒFlipKartã€Housing.com æ¥è‡ªå°åº¦ï¼›Lyftã€åç››é¡¿é‚®æŠ¥æ¥è‡ªåŒ—ç¾ï¼›å”¯ä¸€æ¥è‡ªä¸­å›½çš„ AliExpress ä¸»è¦å¼€å±•çš„åˆ™æ˜¯æµ·å¤–ä¸šåŠ¡ã€‚\n\nç”±äºä¸­å›½çš„ç‰¹æ®Šæ€§ï¼Œç¬”è€…åœ¨[ç¬¬ä¸€æ¬¡][46]èŠåˆ° PWA æ—¶éš¾å…è¡¨ç°å‡ºäº†ä¸€å®šç¨‹åº¦çš„æ‚²è§‚ï¼š\n\n- å›½å†…è¾ƒé‡è§† iOSï¼Œè€Œ iOS ç›®å‰è¿˜ä¸æ”¯æŒ PWAã€‚\n- å›½å†…çš„ Android å®ä¸ºã€Œå®‰å“ã€ï¼Œä¸è‡ªå¸¦ Chrome æ˜¯ä¸€ï¼Œå¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–å…¼å®¹é—®é¢˜ã€‚\n- å›½å†…å‚å•†å¯èƒ½å¹¶ä¸ä¼šåƒä¸‰æ˜Ÿé‚£æ ·å¯¹æ¨åŠ¨è‡ªå®¶æµè§ˆå™¨æ”¯æŒ PWA é‚£ä¹ˆæ„Ÿå…´è¶£ã€‚\n- ä¾èµ– GCM æ¨é€çš„é€šçŸ¥ä¸å¯ç”¨ï¼ŒWeb Push Protocol è¿˜æ²¡æœ‰å›½å†…çš„æ¨é€æœåŠ¡å®ç°ã€‚\n- å›½å†… webview ç¯å¢ƒè¾ƒä¸ºå¤æ‚ï¼ˆæ¯”å¦‚å¾®ä¿¡ï¼‰ï¼Œé»‘ç§‘æŠ€æ¯”è¾ƒå¤šã€‚\n\nåè§‚å°åº¦ï¼Œç”±äº Google æœåŠ¡å¥å…¨ã€æ ‡é… Chrome çš„ Android æ‰‹æœºå¸‚å ç‡éå¸¸é«˜ï¼ŒPWA çš„ç”¨æˆ·è¾¾åˆ°ç‡ç®€ç›´ç›´é€¼ 100%ï¼Œä¹Ÿéš¾å…è·å¾—æ— æ•°å¥½è¯„ä¸æ”¯æŒäº†ã€‚**ç¬”è€…å¥¢æœ›ç€æœ¬æ–‡èƒ½å¯¹æ¨åŠ¨ PWA çš„å›½å†…ç¯å¢ƒæœ‰ä¸€å®šçš„è´¡çŒ®ã€‚**ä¸è¿‡æ— è®ºå¦‚ä½•ï¼ŒPWA åœ¨å›½å†…çš„æ˜¥å¤©å¯èƒ½çš„ç¡®ä¼šæ¥å¾—ç¨å¾®æ™šä¸€ç‚¹äº†ã€‚\n\n\n## ç»“è¯­\n\nã€Œ[æˆ‘ä»¬ä¿¡ä»° Webï¼Œä¸ä»…ä»…åœ¨äºè½¯ä»¶ã€è½¯ä»¶å¹³å°ä¸å•çº¯çš„æŠ€æœ¯][q97]ï¼Œè¿˜åœ¨äº[ã€ä»»ä½•äººï¼Œåœ¨ä»»ä½•æ—¶é—´ä»»ä½•åœ°ç‚¹ï¼Œéƒ½å¯ä»¥åœ¨ä¸‡ç»´ç½‘ä¸Šå‘å¸ƒä»»ä½•ä¿¡æ¯ï¼Œå¹¶è¢«ä¸–ç•Œä¸Šçš„ä»»ä½•ä¸€ä¸ªäººæ‰€è®¿é—®åˆ°ã€‚ã€è€Œè¿™æ‰æ˜¯ web çš„æœ€ä¸ºé©å‘½ä¹‹å¤„ï¼Œå ªç§°æˆ‘ä»¬äººç±»ï¼Œä½œä¸ºä¸€ä¸ªç‰©ç§çš„ä¸€æ¬¡è¿›åŒ–ã€‚][27]ã€\n\nè¯·ä¸è¦è®© web å†[ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»][49]ï¼Œæµè§ˆå™¨å‚å•†ä»¬å·²ç»é‡æ–°èµ°åˆ°äº†ä¸€èµ·ï¼Œè€Œä¸‹ä¸€æ£’å°†æ˜¯äº¤åˆ°æˆ‘ä»¬ web åº”ç”¨å¼€å‘è€…çš„æ‰‹ä¸Šã€‚[ä¹”å¸ƒæ–¯æ›¾ç›¸ä¿¡ web åº”ç”¨æ‰ç§»åŠ¨åº”ç”¨çš„æœªæ¥][50]ï¼Œé‚£å°±è®©æˆ‘ä»¬ç”¨ä»£ç è¯æ˜ç»™è¿™ä¸ªä¸–ç•Œçœ‹å§ã€‚\n\n**è®©æˆ‘ä»¬çš„ç”¨æˆ·ï¼Œä¹Ÿåƒæˆ‘ä»¬è¿™èˆ¬çƒ­çˆ± web å§ã€‚**\n\né»„ç„ï¼Œäº 12 æœˆçš„åŒ—äº¬ã€‚\n\n---\n\n*æ³¨ï¼šåœ¨ç¬”è€…æ’°æ–‡æœŸé—´ï¼ŒGoogle åœ¨ Google China Developers Days ä¸Šå®£å¸ƒäº† developers.google.cn åŸŸåçš„å¯ç”¨ï¼Œæ–¹ä¾¿å›½å†…å¼€å‘è€…è®¿é—®ã€‚å¯¹äºæ–‡ä¸­æ‰€æœ‰é“¾å‘ developers.google.com çš„å‚è€ƒæ–‡çŒ®ï¼Œåº”è¯¥éƒ½å¯ä»¥åœ¨ cn ç«™ç‚¹ä¸­æ‰¾åˆ°ã€‚*\n\n\n[1]: http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/ \"Isomorphic JavaScript: The Future of Web Apps\"\n\n[2]: https://medium.com/@mjackson/universal-javascript-4761051b7ae9#.unrzyz3b2 \"Universal JavaScript\"\n\n[3]: https://en.wikipedia.org/wiki/Ajax_(programming) \"Ajax - Wikipedia\"\n\n[4]: https://en.wikipedia.org/wiki/Responsive_web_design \"Responsive Web Design - Wikipedia\"\n\n[5]: http://www.adobe.com/products/air.html \"Adobe AIR Application\"\n\n[6]: https://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx \"Windows Runtime JS API\"\n\n[7]: https://developer.chrome.com/extensions/apps \"Chrome Packaged Apps\"\n\n[8]: https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS \"Firefox OS Packaged Apps\"\n\n[9]: http://www.openwebosproject.org/ \"Open webOS\"\n\n[10]: https://cordova.apache.org/ \"Apache Cordova\"\n\n[11]: http://electron.atom.io/ \"Electron\"\n\n[12]: https://developer.chrome.com/extensions/manifest \"Chrome Apps Manifest\"\n\n[13]: https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS/Manifest \"Firefox OS App Manifest\"\n\n[14]: https://www.w3.org/TR/2013/WD-appmanifest-20131217/ \"Manifest for web apps and bookmarks - First Public Working Draft\"\n\n[15]: https://youtu.be/m2a9hlUFRhg \"Keynote (Chrome Dev Summit 2015)\"\n\n[16]: https://developers.google.com/web/fundamentals/engage-and-retain/app-install-banners/?hl=en \"Web App Install Banners - Google Developer\"\n\n[17]: https://en.wikipedia.org/wiki/Flipkart \"Flipkart - wikipedia\"\n\n[18]: https://youtu.be/eI3B6x0fw9s \"Keynote (Chrome Dev Summit 2016)\"\n\n[19]: http://cordova.apache.org/docs/en/6.x/config_ref/index.html \"Config.xml - Apache Cordova\"\n\n[20]: https://msdn.microsoft.com/en-us/library/dn320426%28v=vs.85%29.aspx \"Browser configuration schema reference - MSDN\"\n\n[21]: https://huangxuan.me \"Hux Blog\"\n\n[22]: https://www.html5rocks.com/en/tutorials/notifications/quick/ \"Using the Notification API\"\n\n[23]: https://blogs.windows.com/msedgedev/2016/05/16/web-notifications-microsoft-edge/#2VBm890EjvAvUcgE.97\n\n[24]: https://developer.apple.com/notifications/safari-push-notifications/ \"Safari Push Notifications\"\n\n[25]: https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/ \"Web Push Notifications - Google Developer\"\n\n[26]: https://en.wikipedia.org/wiki/Progressive_web_app#Hybrid_Apps\n\n[27]: http://phonegap.com/blog/2012/05/09/phonegap-beliefs-goals-and-philosophy/ \"PhoneGap Beliefs, Goals, and Philosophy\"\n\n[28]: https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/ \"Progressive Web Apps: Escaping Tabs Without Losing Our Soul\"\n\n[29]: https://github.com/Huxpro/sw-101-gdgdf\n\n[30]: developers.google.com/web/updates/2015/12/background-sync \"Background Sync - Google Developers\"\n\n[31]: http://marketingland.com/report-mobile-users-spend-80-percent-time-just-five-apps-116858 \"Report: Mobile Users Spend 80 Percent Of Time In Just Five Apps\"\n\n[32]: http://www.recode.net/2016/9/16/12933780/average-app-downloads-per-month-comscore \"Half of U.S. smartphone users download zero apps per month\"\n\n[33]: https://youtu.be/EUthgV-U05w \"AdWords for App Promotion - Google\"\n\n[34]: https://blogs.windows.com/msedgedev/2016/07/08/the-progress-of-web-apps/ \"The Progress of Web Apps - MSEdgeDev Blog\"\n\n[35]: https://developer.microsoft.com/en-us/microsoft-edge/platform/status/ \"Microsoft Edge web platform features status\"\n\n[36]: https://trac.webkit.org/wiki/FiveYearPlanFall2015\n\n[37]: https://webkit.org/status/ \"Webkit Feature Status\"\n\n[38]: https://webkit.org/status/#specification-web-components \"HTML Imports - Not Considering\"\n\n[39]: https://cloudfour.com/thinks/why-does-the-washington-posts-progressive-web-app-increase-engagement-on-ios/ \"Why does The Washington Postâ€™s Progressive Web App increase engagement on iOS?\"\n\n[40]: https://cloudfour.com/thinks/ios-doesnt-support-progressive-web-apps-so-what/ \"iOS doesnâ€™t support Progressive Web Apps, so what?\"\n\n[41]: https://jakearchibald.github.io/isserviceworkerready/ \"Is Service Worker Ready?\"\n\n[42]: https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support \"Internet Explorer End of Support\"\n\n[43]: https://cloudfour.com/thinks/progressive-web-apps-simply-make-sense/?utm_source=mobilewebweekly&utm_medium=email#fn-4857-1 \"Progressive Web Apps Simply Make Sense\"\n\n[44]: https://medium.com/@owencm/the-surprising-tradeoff-at-the-center-of-question-whether-to-build-an-native-or-web-app-d2ad00c40fb2#.ym83ct2ax \"The surprising tradeoff at the center of the question whether to build a Native or Web App\"\n\n[45]: http://zhihu.com/question/31316032/answer/75236718\n\n[46]: https://www.zhihu.com/question/46690207/answer/104851767\n\n[47]: https://developers.google.com/web/showcase/ \"Case Studies - Google Developers\"\n\n[48]: https://en.wikipedia.org/wiki/Google_Gears \"Gears - Wikipedia\"\n\n[49]: https://zhuanlan.zhihu.com/p/22561084 \"Web åœ¨ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»\"\n\n[50]: youtu.be/y1B2c3ZD9fk?t=1h14m48s \"WWDC 2017\"\n\n\n[spec1]: https://w3c.github.io/manifest/#use-cases-and-requirements \"Web App Manifest\"\n\n[spec2]: https://w3c.github.io/ServiceWorker/ \"Service Worker\"\n\n[spec3]: http://w3c.github.io/push-api/ \"Push API\"\n\n[spec4]: https://notifications.spec.whatwg.org/ \"Notification API\"\n\n[spec5]: https://tools.ietf.org/html/draft-ietf-webpush-protocol-12 \"Web Push Protocol\"\n\n[spec6]: https://wicg.github.io/BackgroundSync/spec/ \"Web Background Synchronization - WICG\"\n\n[spec7]: http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification \"API Specification - The Chromium Projects\"\n\n[spec8]: https://www.w3.org/TR/notifications/ \"Web Notifications - W3C\"\n\n[spec9]: https://streams.spec.whatwg.org/ \"Streams\"\n\n[spec10]: https://www.w3.org/TR/offline-webapps/ \"Offline Web Applications\"\n\n[spec11]: https://www.w3.org/TR/2011/WD-html5-20110525/offline.html \"HTML5 5.6 Offline Web Applications\"\n\n\n[i1]: http://appleinsider.com/articles/08/10/03/latest_iphone_software_supports_full_screen_web_apps.html\n\n[i2]: https://developers.google.com/web/events/pwaroadshow/\n\n[i3]: https://medium.com/@AdityaPunjani/building-flipkart-lite-a-progressive-web-app-2c211e641883#.hz4d3kw41 \"Building Flipkart Lite: A Progressive Web App\"\n\n[i4]: https://twitter.com/adityapunjani\n\n\n[q37]: https://huangxuan.me/pwa-qcon2016/#/37 \"PWA@QCon2016 #37\"\n\n[q17]: https://huangxuan.me/pwa-qcon2016/#/17 \"PWA@QCon2016 #17\"\n\n[q97]: https://huangxuan.me/pwa-qcon2016/#/99 \"PWA@QCon2016 #97\"\n\n[s12]: https://huangxuan.me/sw-101-gdgdf/#/12 \"SW-101@DevFest #12\"\n\n[s13]: https://huangxuan.me/sw-101-gdgdf/#/13 \"SW-101@DevFest #13\"\n\n[b0]: https://huangxuan.me/2016/11/20/sw-101-gdgdf/\n","slug":"2017-02-09-nextgen-web-pwa","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxp0017mmt7ywv0gx12","content":"<blockquote>\n<p>æœ¬æ–‡é¦–å‘äº<a href=\"http://geek.csdn.net/news/detail/135595\" target=\"_blank\" rel=\"external\">ã€Šç¨‹åºå‘˜ã€‹</a>ï¼Œå‘å¸ƒäº <a href=\"https://huangxuan.me\" target=\"_blank\" rel=\"external\">Hux Blog</a>ã€<a href=\"https://zhuanlan.zhihu.com/FrontendMagazine\" target=\"_blank\" rel=\"external\">å‰ç«¯å¤–åˆŠè¯„è®º</a>ï¼Œè½¬è½½è¯·ä¿ç•™é“¾æ¥ ;)</p>\n</blockquote>\n<h2 id=\"ä¸‹ä¸€ä»£-Web-åº”ç”¨ï¼Ÿ\"><a href=\"#ä¸‹ä¸€ä»£-Web-åº”ç”¨ï¼Ÿ\" class=\"headerlink\" title=\"ä¸‹ä¸€ä»£ Web åº”ç”¨ï¼Ÿ\"></a>ä¸‹ä¸€ä»£ Web åº”ç”¨ï¼Ÿ</h2><p>è¿‘å¹´æ¥ï¼ŒWeb åº”ç”¨åœ¨æ•´ä¸ªè½¯ä»¶ä¸äº’è”ç½‘è¡Œä¸šæ‰¿è½½çš„è´£ä»»è¶Šæ¥è¶Šé‡ï¼Œè½¯ä»¶å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬è¶Šæ¥è¶Šé«˜ï¼ŒWeb æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯ Web å®¢æˆ·ç«¯æŠ€æœ¯ï¼Œè¿æ¥äº†çˆ†å‘å¼çš„å‘å±•ã€‚</p>\n<p>åŒ…æ‹¬ä½†ä¸é™äºåŸºäº Node.js çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼›è¯¸å¦‚ Webpackã€Rollup è¿™æ ·çš„æ‰“åŒ…å·¥å…·ï¼›Babelã€PostCSS è¿™æ ·çš„è½¬è¯‘å·¥å…·ï¼›TypeScriptã€Elm è¿™æ ·è½¬è¯‘è‡³ JavaScript çš„ç¼–ç¨‹è¯­è¨€ï¼›Reactã€Angularã€Vue è¿™æ ·é¢å‘ç°ä»£ web åº”ç”¨éœ€æ±‚çš„å‰ç«¯æ¡†æ¶åŠå…¶ç”Ÿæ€ï¼Œä¹Ÿæ¶Œç°å‡ºäº†åƒ<a href=\"http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/\" title=\"Isomorphic JavaScript: The Future of Web Apps\" target=\"_blank\" rel=\"external\">åŒæ„ JavaScript</a>ä¸<a href=\"https://medium.com/@mjackson/universal-javascript-4761051b7ae9#.unrzyz3b2\" title=\"Universal JavaScript\" target=\"_blank\" rel=\"external\">é€šç”¨ JavaScript åº”ç”¨</a>è¿™æ ·å°†æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆServer-side Renderingï¼‰ä¸å•é¡µé¢åº”ç”¨æ¨¡å‹ï¼ˆSingle-page Appï¼‰ç»“åˆçš„ web åº”ç”¨æ¶æ„æ–¹å¼ï¼Œå¯ä»¥è¯´æ˜¯ç™¾èŠ±é½æ”¾ã€‚</p>\n<p>ä½†æ˜¯ï¼ŒWeb åº”ç”¨åœ¨ç§»åŠ¨æ—¶ä»£å¹¶æ²¡æœ‰è¾¾åˆ°å…¶åœ¨æ¡Œé¢è®¾å¤‡ä¸Šæµè¡Œçš„ç¨‹åº¦ã€‚ç©¶å…¶åŸå› ï¼Œå°½ç®¡ä¸Šè¿°çš„å„ç§æ–¹æ¡ˆå·²ç»å……åˆ†åˆ©ç”¨äº†ç°æœ‰çš„ JavaScript è®¡ç®—èƒ½åŠ›ã€CSS å¸ƒå±€èƒ½åŠ›ã€HTTP ç¼“å­˜ä¸æµè§ˆå™¨ API å¯¹å½“ä»£åŸºäº <a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\" title=\"Ajax - Wikipedia\" target=\"_blank\" rel=\"external\">Ajax</a> ä¸<a href=\"https://en.wikipedia.org/wiki/Responsive_web_design\" title=\"Responsive Web Design - Wikipedia\" target=\"_blank\" rel=\"external\">å“åº”å¼è®¾è®¡</a>çš„ web åº”ç”¨æ¨¡å‹çš„æ€§èƒ½ä¸ä½“éªŒå¸¦æ¥äº†å·¥ç¨‹è§’åº¦çš„å·¨å¤§çªç ´ï¼Œæˆ‘ä»¬ä»ç„¶æ— æ³•åœ¨ä¸å€ŸåŠ©åŸç”Ÿç¨‹åºè¾…åŠ©æµè§ˆå™¨çš„å‰æä¸‹çªç ´ web å¹³å°æœ¬èº«å¯¹ web åº”ç”¨å›ºæœ‰çš„æ¡æ¢ï¼š<strong>å®¢æˆ·ç«¯è½¯ä»¶ï¼ˆå³ç½‘é¡µï¼‰éœ€è¦ä¸‹è½½æ‰€å¸¦æ¥çš„ç½‘ç»œå»¶è¿Ÿï¼›ä¸ Web åº”ç”¨ä¾èµ–æµè§ˆå™¨ä½œä¸ºå…¥å£æ‰€å¸¦æ¥çš„ä½“éªŒé—®é¢˜ã€‚</strong></p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/PWAR-007.jpeg\" alt=\"\"><br><em>Web ä¸åŸç”Ÿåº”ç”¨åœ¨ç§»åŠ¨å¹³å°ä¸Šçš„ä½¿ç”¨æ—¶é•¿å¯¹æ¯” <a href=\"https://developers.google.com/web/events/pwaroadshow/\" target=\"_blank\" rel=\"external\">å›¾ç‰‡æ¥æº: Google</a></em></p>\n<p>åœ¨æ¡Œé¢è®¾å¤‡ä¸Šï¼Œç”±äºç½‘ç»œæ¡ä»¶ç¨³å®šï¼Œå±å¹•å°ºå¯¸å……åˆ†ï¼Œäº¤äº’æ–¹å¼è¶‹å‘äºå¤šä»»åŠ¡ï¼Œè¿™ä¸¤ç‚¹é€ æˆçš„è´Ÿé¢å½±å“å¯¹æ¯” web åº”ç”¨å…äºå®‰è£…ã€éšå«éšåˆ°ã€æ— éœ€æ›´æ–°ç­‰ä¼˜ç‚¹ï¼Œç‘•ä¸æ©ç‘œã€‚ä½†æ˜¯åœ¨ç§»åŠ¨æ—¶ä»£ï¼Œè„†å¼±çš„ç½‘ç»œè¿æ¥ä¸å…¨æ–°çš„äººæœºäº¤äº’æ–¹å¼ä½¿å¾—è¿™ä¸¤ä¸ªé—®é¢˜è¢«æ— é™æ”¾å¤§ï¼Œä¸¥é‡åˆ¶çº¦äº† web åº”ç”¨åœ¨ç§»åŠ¨å¹³å°çš„å‘å±•ã€‚åœ¨ç”¨æˆ·çœ¼é‡Œï¼ŒåŸç”Ÿåº”ç”¨ä¸ä¼šå‡ºç°ã€Œç™½å±ã€ï¼Œæ¸…ä¸€è‰²éƒ½æ‘†åœ¨ä¸»å±å¹•ä¸Šï¼›è€Œ web åº”ç”¨åˆ™æ˜¯æµè§ˆå™¨è¿™ä¸ªåº”ç”¨ä¸­çš„åº”ç”¨ï¼Œä½¿ç”¨èµ·æ¥å¹¶ä¸æ–¹ä¾¿ï¼Œè€Œä¸”åŠ è½½ä¹Ÿæ¯”åŸç”Ÿåº”ç”¨è¦æ…¢ã€‚</p>\n<p>Progressive Web Appsï¼ˆä»¥ä¸‹ç®€ç§° PWAï¼‰ä»¥åŠæ„æˆ PWA çš„ä¸€ç³»åˆ—å…³é”®æŠ€æœ¯çš„å‡ºç°ï¼Œç»ˆäºè®©æˆ‘ä»¬çœ‹åˆ°äº†å½»åº•è§£å†³è¿™ä¸¤ä¸ªå¹³å°çº§åˆ«é—®é¢˜çš„æ›™å…‰ï¼šèƒ½å¤Ÿæ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦ã€ç”šè‡³è®© web åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä½¿ç”¨çš„ Service Worker ä¸ Cache Storageï¼›ç”¨äºæè¿° web åº”ç”¨å…ƒæ•°æ®ï¼ˆmetadataï¼‰ã€è®© web åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±ã€å…¨å±æ‰§è¡Œçš„ Web App Manifestï¼›ä»¥åŠè¿›ä¸€æ­¥æé«˜ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›ï¼Œè®© web åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥çš„ Push API ä¸ Notification API ç­‰ç­‰ã€‚</p>\n<p>å°†è¿™äº›æŠ€æœ¯ç»„åˆåœ¨ä¸€èµ·ä¼šæ˜¯æ€æ ·çš„æ•ˆæœå‘¢ï¼Ÿã€Œå°åº¦é˜¿é‡Œå·´å·´ã€ â€”â€” <a href=\"https://en.wikipedia.org/wiki/Flipkart\" title=\"Flipkart - wikipedia\" target=\"_blank\" rel=\"external\">Flipkart</a> åœ¨ 2015 å¹´ä¸€åº¦å…³é—­äº†è‡ªå·±çš„ç§»åŠ¨ç«¯ç½‘ç«™ï¼Œå´åœ¨å¹´åº•å‘å¸ƒäº†ç°åœ¨æœ€ä¸ºäººæ´¥æ´¥ä¹é“çš„ PWA æ¡ˆä¾‹ <em>FlipKart Lite</em>ï¼Œæˆä¸ºä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæ”¯æ’‘å¤§è§„æ¨¡ä¸šåŠ¡çš„ PWAã€‚å‘å¸ƒçš„ä¸€å‘¨åå®ƒå°±äº®ç›¸äº <a href=\"https://youtu.be/m2a9hlUFRhg\" title=\"Keynote (Chrome Dev Summit 2015)\" target=\"_blank\" rel=\"external\">Chrome Dev Summit 2015</a> ä¸Šï¼Œç¬”è€…å½“æ—¶å°±è¢«æƒŠè‰³åˆ°äº†ã€‚ä¸ºäº†æ–¹ä¾¿å„åª’ä»‹ä¸Šçš„è¯»è€…è§‚çœ‹ï¼Œç¬”è€…åšäº†å‡ å¹…å›¾æ–¹ä¾¿ç»™å¤§å®¶ä»‹ç»ï¼š</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/flipkart-1.jpeg\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://medium.com/@AdityaPunjani/building-flipkart-lite-a-progressive-web-app-2c211e641883#.hz4d3kw41\" title=\"Building Flipkart Lite: A Progressive Web App\" target=\"_blank\" rel=\"external\">Medium.com</a></em></p>\n<p>å½“æµè§ˆå™¨å‘ç°ç”¨æˆ·<a href=\"https://developers.google.com/web/fundamentals/engage-and-retain/app-install-banners/?hl=en\" title=\"Web App Install Banners - Google Developer\" target=\"_blank\" rel=\"external\">éœ€è¦</a> Flipkart Lite æ—¶ï¼Œå®ƒå°±ä¼šæç¤ºç”¨æˆ·ã€Œå˜¿ï¼Œä½ å¯ä»¥æŠŠå®ƒæ·»åŠ è‡³ä¸»å±å“¦ã€ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼‰ã€‚è¿™æ ·ï¼ŒFlipkart Lite å°±ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·åœ¨ä¸»å±ä¸Šç•™ä¸‹ä¸€ä¸ªè‡ªå®šä¹‰çš„ icon ä½œä¸ºå…¥å£ï¼›ä¸ä¸€èˆ¬çš„ä¹¦ç­¾ä¸åŒï¼Œå½“ç”¨æˆ·ç‚¹å‡» icon æ—¶ï¼ŒFlipkat Lite å°†ç›´æ¥å…¨å±æ‰“å¼€ï¼Œä¸å†å—å›°äºæµè§ˆå™¨çš„ UI ä¸­ï¼Œè€Œä¸”æœ‰è‡ªå·±çš„å¯åŠ¨å±æ•ˆæœã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/flipkart-2.jpeg\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://medium.com/@AdityaPunjani/building-flipkart-lite-a-progressive-web-app-2c211e641883#.hz4d3kw41\" title=\"Building Flipkart Lite: A Progressive Web App\" target=\"_blank\" rel=\"external\">Medium.com</a></em></p>\n<p>æ›´å¼ºå¤§çš„æ˜¯ï¼Œåœ¨æ— æ³•è®¿é—®ç½‘ç»œæ—¶ï¼ŒFlipkart Lite å¯ä»¥åƒåŸç”Ÿåº”ç”¨ä¸€æ ·ç…§å¸¸æ‰§è¡Œï¼Œè¿˜ä¼šå¾ˆéªšæ°”çš„å˜æˆé»‘ç™½è‰²ï¼›ä¸ä½†å¦‚æ­¤ï¼Œæ›¾ç»è®¿é—®è¿‡çš„å•†å“éƒ½ä¼šè¢«ç¼“å­˜ä¸‹æ¥å¾—ä»¥åœ¨ç¦»çº¿æ—¶ç»§ç»­è®¿é—®ã€‚åœ¨å•†å“é™ä»·ã€ä¿ƒé”€ç­‰æ—¶åˆ»ï¼ŒFlipkart Lite ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·å‘èµ·æ¨é€é€šçŸ¥ï¼Œå¸å¼•ç”¨æˆ·å›åˆ°åº”ç”¨ã€‚</p>\n<p><strong>æ— éœ€æ‹…å¿ƒç½‘ç»œå»¶è¿Ÿï¼›æœ‰ç€ç‹¬ç«‹å…¥å£ä¸ç‹¬ç«‹çš„ä¿æ´»æœºåˆ¶ã€‚</strong>ä¹‹å‰ä¸¤ä¸ªé—®é¢˜çš„ä¸€å¹¶è§£å†³ï¼Œå®£å‘Šç€ web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æµ´ç«é‡ç”Ÿï¼šæ»¡è¶³ PWA æ¨¡å‹çš„ web åº”ç”¨ï¼Œå°†é€æ¸æˆä¸ºç§»åŠ¨æ“ä½œç³»ç»Ÿçš„ä¸€ç­‰å…¬æ°‘ï¼Œå¹¶å°†å‘åŸç”Ÿåº”ç”¨å‘èµ·æŒ‘æˆ˜ä¸ã€Œå¤ä»‡ã€ã€‚</p>\n<p>æ›´ä»¤ç¬”è€…å…´å¥‹çš„æ˜¯ï¼Œå°±åœ¨ä»Šå¹´ 11 æœˆçš„ <a href=\"https://youtu.be/eI3B6x0fw9s\" title=\"Keynote (Chrome Dev Summit 2016)\" target=\"_blank\" rel=\"external\">Chrome Dev Summit 2016</a> ä¸Šï¼ŒChrome çš„å·¥ç¨‹ VP Darin Fisher ä»‹ç»äº† Chrome å›¢é˜Ÿæ­£åœ¨åšçš„ä¸€äº›å®éªŒï¼šæŠŠã€Œæ·»åŠ è‡³ä¸»å±ã€é‡å‘½åä¸ºã€Œå®‰è£…ã€ï¼Œè¢«å®‰è£…çš„ PWA ä¸å†ä»…ä»¥ widget çš„å½¢å¼æ˜¾ç¤ºåœ¨æ¡Œé¢ä¸Šï¼Œè€Œæ˜¯çœŸæ­£åšåˆ°ä¸æ‰€æœ‰åŸç”Ÿåº”ç”¨å¹³çº§ï¼Œä¸€æ ·è¢«æ”¶çº³è¿›åº”ç”¨æŠ½å±‰ï¼ˆApp Drawerï¼‰é‡Œï¼Œä¸€æ ·å‡ºç°åœ¨ç³»ç»Ÿè®¾ç½®ä¸­ ğŸ‰ğŸ‰ğŸ‰ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/flipkart-3.jpeg\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://twitter.com/adityapunjani\" target=\"_blank\" rel=\"external\">@adityapunjani</a></em></p>\n<p>å›¾ä¸­ä»å·¦åˆ°å³åˆ†åˆ«ä¸ºï¼šç±»ä¼¼åŸç”Ÿåº”ç”¨çš„å®‰è£…ç•Œé¢ï¼›è¢«æ”¶çº³åœ¨åº”ç”¨æŠ½å±‰é‡Œçš„ Flipkart Lite ä¸ Hux Blogï¼›è®¾ç½®ç•Œé¢ä¸­å¹¶åˆ—å‡ºç°çš„ Flipkart åŸç”Ÿåº”ç”¨ä¸ Flipkart Lite PWA ï¼ˆå¯ä»¥çœ‹åˆ° PWA å·¨å¤§çš„ä½“ç§¯ä¼˜åŠ¿ï¼‰</p>\n<p><strong>ç¬”è€…ç›¸ä¿¡ï¼ŒPWA æ¨¡å‹å°†ç»§çº¦ 20 å¹´å‰æ¨ªç©ºå‡ºä¸–çš„ Ajax ä¸çº¦ 10 å¹´å‰é£é¡ç§»åŠ¨äº’è”ç½‘çš„å“åº”å¼è®¾è®¡ä¹‹åï¼Œæ€èµ· web åº”ç”¨æ¨¡å‹çš„ç¬¬ä¸‰æ¬¡æ ¹æœ¬æ€§é©å‘½ï¼Œå°† web åº”ç”¨å¸¦è¿›ä¸€ä¸ªå…¨æ–°çš„æ—¶ä»£ã€‚</strong></p>\n<h2 id=\"PWA-å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\"><a href=\"#PWA-å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\" class=\"headerlink\" title=\"PWA å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\"></a>PWA å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ</h2><h3 id=\"Web-App-Manifest\"><a href=\"#Web-App-Manifest\" class=\"headerlink\" title=\"Web App Manifest\"></a><a href=\"https://w3c.github.io/manifest/#use-cases-and-requirements\" title=\"Web App Manifest\" target=\"_blank\" rel=\"external\">Web App Manifest</a></h3><p>Web App Manifestï¼Œå³é€šè¿‡ä¸€ä¸ªæ¸…å•æ–‡ä»¶å‘æµè§ˆå™¨æš´éœ² web åº”ç”¨çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åå­—ã€icon çš„ URL ç­‰ï¼Œä»¥å¤‡æµè§ˆå™¨ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ·»åŠ è‡³ä¸»å±æˆ–æ¨é€é€šçŸ¥æ—¶æš´éœ²ç»™æ“ä½œç³»ç»Ÿï¼Œä»è€Œå¢å¼º web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿçš„é›†æˆèƒ½åŠ›ã€‚</p>\n<p>è®© web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä½“éªŒæ›´æ¥è¿‘åŸç”Ÿåº”ç”¨çš„å°è¯•å…¶å®æ—©åœ¨ 2008 å¹´çš„ <a href=\"https://huangxuan.me/pwa-qcon2016/#/37\" title=\"PWA@QCon2016 #37\" target=\"_blank\" rel=\"external\">iOS 1.1.3 ä¸ iOS 2.1.0 </a>æ—¶å°±å¼€å§‹äº†ï¼Œå®ƒä»¬åˆ†åˆ«ä¸º web åº”ç”¨å¢åŠ äº†å¯¹è‡ªå®šä¹‰ icon å’Œå…¨å±æ‰“å¼€çš„æ”¯æŒã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/ios2-a2hs.gif\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: <a href=\"http://appleinsider.com/articles/08/10/03/latest_iphone_software_supports_full_screen_web_apps.html\" target=\"_blank\" rel=\"external\">appleinsider.com</a></em></p>\n<p>ä½†æ˜¯å¾ˆå¿«ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„ç§æœ‰å¹³å°é€šè¿‡ <code>&lt;meta&gt;</code>/<code>&lt;link&gt;</code> æ ‡ç­¾æ¥ä¸º web åº”ç”¨æ·»åŠ ã€Œç§è´§ã€ï¼Œ<code>&lt;head&gt;</code> å¾ˆå¿«å°±è¢«å¡æ»¡äº†ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- Add to homescreen for Safari on iOS --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"apple-mobile-web-app-capable\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"yes\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"apple-mobile-web-app-status-bar-style\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"black\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"apple-mobile-web-app-title\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"Lighten\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Add to homescreen for Chrome on Android --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"mobile-web-app-capable\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"yes\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mate</span> <span class=\"attr\">name</span>=<span class=\"string\">\"theme-color\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"#000000\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Icons for iOS and Android Chrome M31~M38 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"144x144\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-144x144-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"114x114\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-114x114-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"72x72\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-72x72-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-57x57-precomposed.png\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Icon for Android Chrome, recommended --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"196x196\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/touch-icon-196x196.png\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Tile icon for Win8 (144x144 + tile color) --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"msapplication-TileImage\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"images/touch/ms-touch-icon-144x144-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"msapplication-TileColor\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"#3372DF\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Generic Icon --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/touch-icon-57x57.png\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>æ˜¾ç„¶ï¼Œè¿™ç§åšæ³•å¹¶ä¸ä¼˜é›…ï¼šåˆ†æ•£åˆé‡å¤çš„å…ƒæ•°æ®å®šä¹‰å¤šä½™ä¸”éš¾ä»¥ç»´æŒåŒæ­¥ï¼Œä¸ html è€¦åˆåœ¨ä¸€èµ·ä¹ŸåŠ é‡äº†æµè§ˆå™¨æ£€æŸ¥å…ƒæ•°æ®æœªæ¥å˜åŠ¨çš„æˆæœ¬ã€‚ä¸æ­¤åŒæ—¶ï¼Œç¤¾åŒºé‡Œå¼€å§‹å‡ºç°ä½¿ç”¨ manifest æ–‡ä»¶ä»¥ä¸­å¿ƒåŒ–åœ°æè¿°å…ƒæ•°æ®çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚ <a href=\"https://developer.chrome.com/extensions/manifest\" title=\"Chrome Apps Manifest\" target=\"_blank\" rel=\"external\">Chrome Extensionã€ Chrome Hosted Web Apps (2010)</a> ä¸ <a href=\"https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS/Manifest\" title=\"Firefox OS App Manifest\" target=\"_blank\" rel=\"external\">Firefox OS App Manifest (2011)</a> ä½¿ç”¨ JSONï¼›<a href=\"http://cordova.apache.org/docs/en/6.x/config_ref/index.html\" title=\"Config.xml - Apache Cordova\" target=\"_blank\" rel=\"external\">Cordova</a> ä¸ <a href=\"https://msdn.microsoft.com/en-us/library/dn320426%28v=vs.85%29.aspx\" title=\"Browser configuration schema reference - MSDN\" target=\"_blank\" rel=\"external\">Windows Pinned Site</a> ä½¿ç”¨ XMLï¼›</p>\n<p>2013 å¹´ï¼ŒW3C WebApps å·¥ä½œç»„å¼€å§‹å¯¹åŸºäº JSON çš„ Manifest è¿›è¡Œæ ‡å‡†åŒ–ï¼ŒäºåŒå¹´å¹´åº•å‘å¸ƒ<a href=\"https://www.w3.org/TR/2013/WD-appmanifest-20131217/\" title=\"Manifest for web apps and bookmarks - First Public Working Draft\" target=\"_blank\" rel=\"external\">ç¬¬ä¸€ä»½å…¬å¼€ Working Draft</a>ï¼Œå¹¶é€æ¸æ¼”åŒ–æˆä¸ºä»Šå¤©çš„ W3C Web App Manifestï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"short_name\"</span>: <span class=\"string\">\"Manifest Sample\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Web Application Manifest Sample\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"icons\"</span>: [&#123;</div><div class=\"line\">      <span class=\"attr\">\"src\"</span>: <span class=\"string\">\"launcher-icon-2x.png\"</span>,</div><div class=\"line\">      <span class=\"attr\">\"sizes\"</span>: <span class=\"string\">\"96x96\"</span>,</div><div class=\"line\">      <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></div><div class=\"line\">   &#125;],</div><div class=\"line\">  <span class=\"attr\">\"scope\"</span>: <span class=\"string\">\"/sample/\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"start_url\"</span>: <span class=\"string\">\"/sample/index.html\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"display\"</span>: <span class=\"string\">\"standalone\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"orientation\"</span>: <span class=\"string\">\"landscape\"</span></div><div class=\"line\">  <span class=\"string\">\"theme_color\"</span>: <span class=\"string\">\"#000\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"background_color\"</span>: <span class=\"string\">\"#fff\"</span>,</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- document --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"manifest\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/manifest.json\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>è¯¸å¦‚ <code>name</code>ã€<code>icons</code>ã€<code>display</code> éƒ½æ˜¯æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ–°å¢çš„æˆå‘˜åˆ™ä¸º web åº”ç”¨å¸¦æ¥äº†ä¸€ç³»åˆ—ä»¥å‰ web åº”ç”¨æƒ³åšå´åšä¸åˆ°ï¼ˆæˆ–åœ¨ä¹‹å‰åªèƒ½é  hackï¼‰çš„æ–°ç‰¹æ€§ï¼š</p>\n<ul>\n<li><code>scope</code>ï¼šå®šä¹‰äº† web åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–çš„ URL å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰ PWA é‡Œç»§ç»­æµè§ˆã€‚</li>\n<li><code>start_url</code>ï¼šå®šä¹‰äº†ä¸€ä¸ª PWA çš„å…¥å£é¡µé¢ã€‚æ¯”å¦‚è¯´ä½ æ·»åŠ  <a href=\"https://huangxuan.me\" title=\"Hux Blog\" target=\"_blank\" rel=\"external\">Hux Blog</a> çš„ä»»ä½•ä¸€ä¸ªæ–‡ç« åˆ°ä¸»å±ï¼Œä»ä¸»å±æ‰“å¼€æ—¶éƒ½ä¼šè®¿é—® <a href=\"https://huangxuan.me\" title=\"Hux Blog\" target=\"_blank\" rel=\"external\">Hux Blog</a> çš„ä¸»é¡µã€‚</li>\n<li><code>orientation</code>ï¼šç»ˆäºï¼Œæˆ‘ä»¬å¯ä»¥é”å®šå±å¹•æ—‹è½¬äº†ï¼ˆå–œæè€Œæ³£â€¦ï¼‰</li>\n<li><code>theme_color</code>/<code>background_color</code>ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ UI ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ Android çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰ã€‚</li>\n</ul>\n<p>è¿™ä¸ªæ¸…å•çš„æˆå‘˜è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ç”¨äºå£°æ˜ã€Œå¯¹åº”åŸç”Ÿåº”ç”¨ã€çš„ <code>related_applications</code> ç­‰ç­‰ï¼Œæœ¬æ–‡å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ä½œä¸º PWA çš„ã€Œæˆ·å£æœ¬ã€ï¼Œæ‰¿è½½ç€ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›çš„é‡ä»»ï¼ŒWeb App Manifest è¿˜å°†åœ¨æ—¥åä¸æ–­æ‰©å±•ï¼Œä»¥æ»¡è¶³ web åº”ç”¨é«˜é€Ÿæ¼”åŒ–çš„éœ€è¦ã€‚</p>\n<h3 id=\"Service-Worker\"><a href=\"#Service-Worker\" class=\"headerlink\" title=\"Service Worker\"></a><a href=\"https://w3c.github.io/ServiceWorker/\" title=\"Service Worker\" target=\"_blank\" rel=\"external\">Service Worker</a></h3><p>æˆ‘ä»¬åŸæœ‰çš„æ•´ä¸ª Web åº”ç”¨æ¨¡å‹ï¼Œéƒ½æ˜¯æ„å»ºåœ¨ã€Œç”¨æˆ·èƒ½ä¸Šç½‘ã€çš„å‰æä¹‹ä¸‹çš„ï¼Œæ‰€ä»¥ä¸€ç¦»çº¿å°±åªèƒ½ç©å°æé¾™äº†ã€‚å…¶å®ï¼Œå¯¹äºã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€è¿™ä»¶äº‹ï¼ŒService Worker è‡³å°‘æ˜¯ web ç¤¾åŒºçš„ç¬¬ä¸‰æ¬¡å°è¯•äº†ã€‚</p>\n<p>æ•…äº‹å¯ä»¥è¿½æº¯åˆ° 2007 å¹´çš„ <a href=\"https://en.wikipedia.org/wiki/Google_Gears\" title=\"Gears - Wikipedia\" target=\"_blank\" rel=\"external\">Google Gears</a>ï¼šä¸ºäº†è®©è‡ªå®¶çš„ Gmailã€Youtubeã€Google Reader ç­‰ web åº”ç”¨å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®ä¸ç¦»çº¿æ‰§è¡Œï¼ŒGoogle å¼€å‘äº†ä¸€ä¸ªæµè§ˆå™¨æ‹“å±•æ¥å¢å¼º web åº”ç”¨ã€‚Google Gears æ”¯æŒ IE 6ã€Safari 3ã€Firefox 1.5 ç­‰æµè§ˆå™¨ï¼›è¦çŸ¥é“ï¼Œé‚£ä¸€å¹´ Chrome éƒ½è¿˜æ²¡å‡ºç”Ÿå‘¢ã€‚</p>\n<p>åœ¨ Gears API ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å‘ LocalServer æ¨¡å—æäº¤ä¸€ä¸ªç¼“å­˜æ–‡ä»¶æ¸…å•æ¥å®ç°ç¦»çº¿æ”¯æŒï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Somewhere in your javascript</span></div><div class=\"line\"><span class=\"keyword\">var</span> localServer = google.gears.factory.create(<span class=\"string\">\"bata.localserver\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> store = localServer.createManagedStore(STORE_NAME);</div><div class=\"line\">store.manifestUrl = <span class=\"string\">\"manifest.json\"</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">// manifest.json - å‡è®¾ JSON æœ‰æ³¨é‡Š</div><div class=\"line\">&#123;</div><div class=\"line\">ã€€ã€€\"betaManifestVersion\":ã€€1,</div><div class=\"line\">ã€€ã€€\"version\": ã€€\"1.0\",</div><div class=\"line\">ã€€ã€€\"entries\":ã€€[ã€€</div><div class=\"line\">ã€€ã€€ã€€ã€€&#123;ã€€\"url\": ã€€\"index.html\"&#125;,</div><div class=\"line\">ã€€ã€€ã€€ã€€&#123;ã€€\"url\": ã€€\"main.js\"&#125;</div><div class=\"line\">ã€€ã€€]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æ˜¯ä¸æ˜¯æ„Ÿåˆ°å¾ˆç†Ÿæ‚‰ï¼Ÿå¥½åƒ <a href=\"https://www.w3.org/TR/2011/WD-html5-20110525/offline.html\" title=\"HTML5 5.6 Offline Web Applications\" target=\"_blank\" rel=\"external\">HTML5 è§„èŒƒ</a>ä¸­çš„ Application Cache ä¹Ÿæ˜¯ç±»ä¼¼çš„ä¸œè¥¿ï¼Ÿ</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">manifest</span>=<span class=\"string\">\"cache.appcache\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">CACHE</span> <span class=\"selector-tag\">MANIFEST</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">CACHE</span>:</div><div class=\"line\"><span class=\"selector-tag\">index</span><span class=\"selector-class\">.html</span></div><div class=\"line\"><span class=\"selector-tag\">main</span><span class=\"selector-class\">.js</span></div></pre></td></tr></table></figure>\n<p>æ˜¯çš„ï¼ŒGears çš„ LocalServer å°±æ˜¯åæ¥å¤§å®¶æ‰€ç†ŸçŸ¥çš„ App Cache çš„å‰èº«ï¼Œå¤§çº¦ä» <a href=\"https://www.w3.org/TR/offline-webapps/\" title=\"Offline Web Applications\" target=\"_blank\" rel=\"external\">2008</a> å¹´å¼€å§‹ W3C å°±å¼€å§‹å°è¯•å°† Gears è¿›è¡Œæ ‡å‡†åŒ–äº†ï¼›é™¤äº† LocalServerï¼ŒGears ä¸­ç”¨äºæä¾›å¹¶è¡Œè®¡ç®—èƒ½åŠ›çš„ WorkerPool æ¨¡å—ä¸ç”¨äºæä¾›æœ¬åœ°æ•°æ®åº“ä¸ SQL æ”¯æŒçš„ Database æ¨¡å—ä¹Ÿåˆ†åˆ«æ˜¯æ—¥å Web Worker ä¸ Web SQL Databaseï¼ˆåè¢«åºŸå¼ƒï¼‰çš„å‰èº«ã€‚</p>\n<p>HTML5 App Cache ä½œä¸ºç¬¬äºŒæ³¢ã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€çš„å°è¯•ï¼Œç¡®å®ä¹ŸæœåŠ¡äº†æ¯”å¦‚ Google Docã€å°¤é›¨æºªæ—©å¹´ä½œå“ HTML5 Clearã€ä»¥åŠä¸€ç›´ç”¨ web åº”ç”¨ä½œä¸ºè‡ªå·± iOS åº”ç”¨çš„ FT.comï¼ˆFinancial Timesï¼‰ç­‰ä¸å°‘ web åº”ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰ Service Worker ä»€ä¹ˆäº‹å‘¢ï¼Ÿ  </p>\n<p>æ˜¯å•Šï¼Œå¦‚æœ App Cache æ²¡æœ‰è¢«è®¾è®¡å¾—<a href=\"https://huangxuan.me/sw-101-gdgdf/#/12\" title=\"SW-101@DevFest #12\" target=\"_blank\" rel=\"external\">çƒ‚åˆ°å®Œå…¨ä¸å¯ç¼–ç¨‹ã€æ— æ³•æ¸…ç†ç¼“å­˜ã€å‡ ä¹æ²¡æœ‰è·¯ç”±æœºåˆ¶ã€å‡ºäº† Bug ä¸€ç‚¹æ•‘éƒ½æ²¡æœ‰</a>ï¼Œå¯èƒ½å°±çœŸæ²¡ Service Worker ä»€ä¹ˆäº‹äº†ã€‚<a href=\"https://huangxuan.me/sw-101-gdgdf/#/13\" title=\"SW-101@DevFest #13\" target=\"_blank\" rel=\"external\">App Cache å·²ç»åœ¨å‰ä¸ä¹…å®šç¨¿çš„ HTML5.1 ä¸­è¢«æ‹¿æ‰äº†ï¼ŒW3C ä¸ºäº†æŒ½æ•‘ web ä¸–ç•ŒçœŸæ˜¯ä¸æƒœæŠŠè‡ªå·±çš„è„¸éƒ½æ‰“è‚¿äº†â€¦â€¦</a></p>\n<p>æ—¶è‡³ä»Šæ—¥ï¼Œæˆ‘ä»¬ç»ˆäºè¿æ¥äº† Service Worker çš„æ›™å…‰ã€‚ç®€å•æ¥è¯´ï¼ŒService Worker æ˜¯ä¸€ä¸ªå¯ç¼–ç¨‹çš„ Web Workerï¼Œå®ƒå°±åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä»¥æ‹¦æˆªã€å¤„ç†ã€å“åº”æµç»çš„ HTTP è¯·æ±‚ï¼›é…åˆéšä¹‹å¼•å…¥ Cache Storage APIï¼Œä½ å¯ä»¥è‡ªç”±ç®¡ç† HTTP è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜ï¼Œè¿™ä½¿å¾— Service Worker å¯ä»¥ä»ç¼“å­˜ä¸­å‘ web åº”ç”¨æä¾›èµ„æºï¼Œå³ä½¿æ˜¯åœ¨ç¦»çº¿çš„ç¯å¢ƒä¸‹ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/sw-sw.png\" alt=\"\"><br><em>Service Worker å°±åƒä¸€ä¸ªè¿è¡Œåœ¨å®¢æˆ·ç«¯çš„ä»£ç†</em></p>\n<p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ç½‘é¡µ <code>foo.html</code> æ³¨å†Œè¿™ä¹ˆä¸€ä¸ª Service Workerï¼Œå®ƒå°†åŠ«æŒç”± <code>foo.html</code> å‘èµ·çš„ä¸€åˆ‡ HTTP è¯·æ±‚ï¼Œå¹¶ç»Ÿç»Ÿè¿”å›æœªè®¾ç½® <code>Content-Type</code> çš„ <code>Hello World!</code>ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// sw.js</span></div><div class=\"line\">self.onfetch = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</div><div class=\"line\">  e.respondWith(<span class=\"keyword\">new</span> Response(<span class=\"string\">'Hello World!'</span>))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Service Worker ç¬¬ä¸€æ¬¡å‘å¸ƒäº 2014 å¹´çš„ Google IO ä¸Šï¼Œç›®å‰å·²å¤„äº W3C å·¥ä½œè‰æ¡ˆçš„çŠ¶æ€ã€‚å…¶è®¾è®¡å¸å–äº† Application Cache çš„å¤±è´¥ç»éªŒï¼Œä½œä¸º web åº”ç”¨çš„å¼€å‘è€…çš„ä½ æœ‰ç€å®Œå…¨çš„æ§åˆ¶èƒ½åŠ›ï¼›åŒæ—¶ï¼Œå®ƒè¿˜å€Ÿé‰´äº† Chrome å¤šå¹´æ¥åœ¨ Chrome Extension ä¸Šçš„è®¾è®¡ç»éªŒï¼ˆChrome Background Pages ä¸ Chrome Event Pagesï¼‰ï¼Œé‡‡ç”¨äº†åŸºäºã€Œäº‹ä»¶é©±åŠ¨ã€çš„å”¤é†’æœºåˆ¶ï¼Œä»¥å¤§å¹…èŠ‚çœåå°è®¡ç®—çš„èƒ½è€—ã€‚æ¯”å¦‚ä¸Šé¢çš„ <code>fetch</code> å…¶å®å°±æ˜¯ä¼šå”¤é†’ Service Worker çš„äº‹ä»¶ä¹‹ä¸€ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/sw-lifecycle.png\" alt=\"\"><br><em>Service Worker çš„ç”Ÿå‘½å‘¨æœŸ</em></p>\n<p>é™¤äº†ç±»ä¼¼ <code>fetch</code> è¿™æ ·çš„åŠŸèƒ½äº‹ä»¶å¤–ï¼ŒService Worker è¿˜æä¾›äº†ä¸€ç»„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ŒåŒ…æ‹¬å®‰è£…ã€æ¿€æ´»ç­‰ç­‰ã€‚æ¯”å¦‚ï¼Œåœ¨ Service Worker çš„ã€Œå®‰è£…ã€äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ web åº”ç”¨æ‰€éœ€è¦çš„èµ„æºç»Ÿç»Ÿé¢„å…ˆä¸‹è½½å¹¶ç¼“å­˜åˆ° Cache Storage ä¸­å»ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// sw.js</span></div><div class=\"line\">self.oninstall = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</div><div class=\"line\">  e.waitUntil(</div><div class=\"line\">    caches.open(<span class=\"string\">'installation'</span>)</div><div class=\"line\">      .then(<span class=\"function\"><span class=\"params\">cache</span> =&gt;</span>  cache.addAll([</div><div class=\"line\">        <span class=\"string\">'./'</span>,</div><div class=\"line\">        <span class=\"string\">'./styles.css'</span>,</div><div class=\"line\">        <span class=\"string\">'./script.js'</span></div><div class=\"line\">      ]))</div><div class=\"line\">  )</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>è¿™æ ·ï¼Œå½“ç”¨æˆ·ç¦»çº¿ï¼Œç½‘ç»œæ— æ³•è®¿é—®æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ç¼“å­˜ä¸­å¯åŠ¨æˆ‘ä»¬çš„ web åº”ç”¨ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//sw.js</span></div><div class=\"line\">self.onfetch = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> fetched = fetch(e.request)</div><div class=\"line\">  <span class=\"keyword\">const</span> cached = caches.match(e.request)</div><div class=\"line\"></div><div class=\"line\">  e.respondWith(</div><div class=\"line\">    fetched.catch(<span class=\"function\"><span class=\"params\">_</span> =&gt;</span> cached)</div><div class=\"line\">  )</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹å‡ºï¼ŒService Worker è¢«è®¾è®¡ä¸ºä¸€ä¸ªç›¸å¯¹åº•å±‚ï¼ˆlow-levelï¼‰ã€é«˜åº¦å¯ç¼–ç¨‹ã€å­æ¦‚å¿µä¼—å¤šï¼Œä¹Ÿå› æ­¤å¼‚å¸¸çµæ´»ä¸”å¼ºå¤§çš„ APIï¼Œæ•…æœ¬æ–‡åªèƒ½å±•ç¤ºå®ƒçš„å†°å±±ä¸€è§’ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ³¨å†Œ Service Worker è¦æ±‚ä½ çš„ web åº”ç”¨éƒ¨ç½²äº HTTPS åè®®ä¸‹ï¼Œä»¥å…åˆ©ç”¨ Service Worker çš„ä¸­é—´äººæ”»å‡»ã€‚ç¬”è€…åœ¨ä»Šå¹´ GDG åŒ—äº¬çš„ DevFest ä¸Šåˆ†äº«äº† <a href=\"https://huangxuan.me/2016/11/20/sw-101-gdgdf/\" target=\"_blank\" rel=\"external\">Service Worker 101</a>ï¼Œæ¶µç›–äº† Service Worker è­¬å¦‚ã€Œç½‘ç»œä¼˜å…ˆã€ã€ã€Œç¼“å­˜ä¼˜å…ˆã€ã€ã€Œç½‘ç»œä¸ç¼“å­˜æ¯”èµ›ã€è¿™äº›æ›´å¤æ‚çš„ç¼“å­˜ç­–ç•¥ã€å­¦ä¹ èµ„æ–™ã€ä»¥åŠ<a href=\"https://github.com/Huxpro/sw-101-gdgdf\" target=\"_blank\" rel=\"external\">ç¤ºä¾‹ä»£ç </a>ï¼Œå¯ä»¥ä¾›å¤§å®¶å‚è€ƒã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/sw-race.png\" alt=\"\"><br><em>Service Worker çš„ä¸€ç§ç¼“å­˜ç­–ç•¥ï¼šè®©ç½‘ç»œè¯·æ±‚ä¸è¯»å–ç¼“å­˜æ¯”èµ›</em></p>\n<p>ä½ ä¹Ÿå¯ä»¥å°è¯•åœ¨æ”¯æŒ PWA çš„æµè§ˆå™¨ä¸­è®¿é—®ç¬”è€…çš„åšå®¢ <a href=\"https://huangxuan.me\" title=\"Hux Blog\" target=\"_blank\" rel=\"external\">Hux Blog</a>ï¼Œæ„Ÿå— Service Worker çš„å®é™…æ•ˆæœï¼šæ‰€æœ‰è®¿é—®è¿‡çš„é¡µé¢éƒ½ä¼šè¢«ç¼“å­˜å¹¶å…è®¸åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ç»§ç»­è®¿é—®ï¼Œæ‰€æœ‰æœªè®¿é—®è¿‡çš„é¡µé¢åˆ™ä¼šåœ¨ç¦»çº¿ç¯å¢ƒä¸‹å±•ç¤ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç¦»çº¿é¡µé¢ã€‚</p>\n<p>åœ¨ç¬”è€…çœ‹æ¥ï¼Œ<strong>Service Worker å¯¹ PWA çš„é‡è¦æ€§ç›¸å½“äº <code>XMLHTTPRequest</code> ä¹‹äº Ajaxï¼Œåª’ä½“æŸ¥è¯¢ï¼ˆMedia Queryï¼‰ä¹‹äºå“åº”å¼è®¾è®¡ï¼Œæ˜¯æ”¯æ’‘ PWA ä½œä¸ºã€Œä¸‹ä¸€ä»£ web åº”ç”¨æ¨¡å‹ã€çš„æœ€æ ¸å¿ƒæŠ€æœ¯ã€‚</strong>ç”±äº Service Worker å¯ä»¥ä¸åŒ…æ‹¬ Indexed DBã€Streams åœ¨å†…çš„å¤§éƒ¨åˆ† DOM æ— å…³ API è¿›è¡Œäº¤äº’ï¼Œå®ƒçš„æ½œåŠ›ç®€ç›´æ— å¯é™é‡ã€‚ç¬”è€…å‡ ä¹å¯ä»¥æ–­è¨€ï¼ŒService Worker å°†åœ¨æœªæ¥åå¹´é‡Œæˆä¸º web å®¢æˆ·ç«¯æŠ€æœ¯å·¥ç¨‹åŒ–çš„å…µå®¶å¿…äº‰ä¹‹åœ°ï¼Œå¸¦æ¥ã€Œç¦»çº¿ä¼˜å…ˆï¼ˆOffline-firstï¼‰ã€çš„æ¶æ„é©å‘½ã€‚</p>\n<h3 id=\"Push-Notification\"><a href=\"#Push-Notification\" class=\"headerlink\" title=\"Push Notification\"></a>Push Notification</h3><p>PWA æ¨é€é€šçŸ¥ä¸­çš„ã€Œæ¨é€ã€ä¸ã€Œé€šçŸ¥ã€ï¼Œå…¶å®ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒä½†åˆç›¸å¾—ç›Šå½°çš„ APIï¼š</p>\n<p><a href=\"https://notifications.spec.whatwg.org/\" title=\"Notification API\" target=\"_blank\" rel=\"external\">Notification API</a> ç›¸ä¿¡å¤§å®¶å¹¶ä¸é™Œç”Ÿï¼Œå®ƒè´Ÿè´£æ‰€æœ‰ä¸é€šçŸ¥æœ¬èº«ç›¸å…³çš„æœºåˆ¶ï¼Œæ¯”å¦‚é€šçŸ¥çš„æƒé™ç®¡ç†ã€å‘æ“ä½œç³»ç»Ÿå‘èµ·é€šçŸ¥ã€é€šçŸ¥çš„ç±»å‹ä¸éŸ³æ•ˆï¼Œä»¥åŠæä¾›é€šçŸ¥è¢«ç‚¹å‡»æˆ–å…³é—­æ—¶çš„å›è°ƒç­‰ç­‰ï¼Œç›®å‰å›½å†…å¤–çš„å„å¤§ç½‘ç«™ï¼ˆå°¤å…¶åœ¨æ¡Œé¢ç«¯ï¼‰éƒ½æœ‰ä¸€å®šçš„ä½¿ç”¨ã€‚Notification API æœ€æ—©åº”è¯¥æ˜¯åœ¨ <a href=\"https://www.html5rocks.com/en/tutorials/notifications/quick/\" title=\"Using the Notification API\" target=\"_blank\" rel=\"external\">2010</a> å¹´å‰åç”± Chromium æå‡º<a href=\"http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification\" title=\"API Specification - The Chromium Projects\" target=\"_blank\" rel=\"external\">è‰æ¡ˆ</a>ä»¥ <code>webkitNotifications</code> å‰ç¼€æ–¹å¼å®ç°ï¼›éšç€ 2011 å¹´è¿›å…¥æ ‡å‡†åŒ–ï¼›2012 å¹´åœ¨ Safari 6ï¼ˆMac OSX 10.8+ï¼‰ä¸Šè·å¾—æ”¯æŒï¼›2015 å¹´ Notification API æˆä¸º <a href=\"https://www.w3.org/TR/notifications/\" title=\"Web Notifications - W3C\" target=\"_blank\" rel=\"external\">W3C Recommendation</a>ï¼›2016 å¹´ <a href=\"https://blogs.windows.com/msedgedev/2016/05/16/web-notifications-microsoft-edge/#2VBm890EjvAvUcgE.97\" target=\"_blank\" rel=\"external\">Edge çš„æ”¯æŒ</a>ï¼›Web Notifications å·²ç»åœ¨æ¡Œé¢æµè§ˆå™¨ä¸­è·å¾—äº†å…¨é¢æ”¯æŒï¼ˆChromeã€Edgeã€Firefoxã€Operaã€Safariï¼‰çš„æˆå°±ã€‚</p>\n<p><a href=\"http://w3c.github.io/push-api/\" title=\"Push API\" target=\"_blank\" rel=\"external\">Push API</a> çš„å‡ºç°åˆ™è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘ web åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œå®ƒå®šä¹‰äº† web åº”ç”¨å¦‚ä½•å‘æ¨é€æœåŠ¡å‘èµ·è®¢é˜…ã€å¦‚ä½•å“åº”æ¨é€æ¶ˆæ¯ï¼Œä»¥åŠ web åº”ç”¨ã€åº”ç”¨æœåŠ¡å™¨ä¸æ¨é€æœåŠ¡ä¹‹é—´çš„é‰´æƒä¸åŠ å¯†æœºåˆ¶ï¼›ç”±äº Push API å¹¶ä¸ä¾èµ– web åº”ç”¨ä¸æµè§ˆå™¨ UI å­˜æ´»ï¼Œæ‰€ä»¥å³ä½¿æ˜¯åœ¨ web åº”ç”¨ä¸æµè§ˆå™¨æœªè¢«ç”¨æˆ·æ‰“å¼€çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åå°è¿›ç¨‹æ¥å—æ¨é€æ¶ˆæ¯å¹¶è°ƒç”¨ Notification API å‘ç”¨æˆ·å‘å‡ºé€šçŸ¥ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒMac OSX 10.9 Mavericks ä¸ Safari 7 åœ¨ 2013 å¹´å°±å‘å¸ƒäº†è‡ªå·±çš„ç§æœ‰æ¨é€æ”¯æŒï¼ŒåŸºäº APNS çš„ <a href=\"https://developer.apple.com/notifications/safari-push-notifications/\" title=\"Safari Push Notifications\" target=\"_blank\" rel=\"external\">Safari Push Notifications</a>ã€‚</p>\n<p>åœ¨ PWA ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ Service Worker çš„åå°è®¡ç®—èƒ½åŠ›ç»“åˆ Push API å¯¹æ¨é€äº‹ä»¶è¿›è¡Œå“åº”ï¼Œå¹¶é€šè¿‡ Notification API å®ç°é€šçŸ¥çš„å‘å‡ºä¸å¤„ç†ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// sw.js</span></div><div class=\"line\">self.addEventListener(<span class=\"string\">'push'</span>, event =&gt; &#123;</div><div class=\"line\">  event.waitUntil(</div><div class=\"line\">    <span class=\"comment\">// Process the event and display a notification.</span></div><div class=\"line\">    self.registration.showNotification(<span class=\"string\">\"Hey!\"</span>)</div><div class=\"line\">  );</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">self.addEventListener(<span class=\"string\">'notificationclick'</span>, event =&gt; &#123;  </div><div class=\"line\">  <span class=\"comment\">// Do something with the event  </span></div><div class=\"line\">  event.notification.close();  </div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">self.addEventListener(<span class=\"string\">'notificationclose'</span>, event =&gt; &#123;  </div><div class=\"line\">  <span class=\"comment\">// Do something with the event  </span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>å¯¹äº Push Notificationï¼Œç¬”è€…çš„å‡ æ¬¡åˆ†äº«ä¸­ä¸€ç›´éƒ½æçš„ç¨å¾®å°‘ä¸€äº›ï¼Œä¸€æ˜¯å› ä¸º Push API è¿˜å¤„äº Editor Draft çš„çŠ¶æ€ï¼ŒäºŒæ˜¯ç›®å‰æµè§ˆå™¨ä¸æ¨é€æœåŠ¡é—´çš„åè®®æ”¯æŒè¿˜ä¸å¤Ÿæˆç†Ÿï¼šChromeï¼ˆä¸å…¶å®ƒåŸºäº Blink çš„æµè§ˆå™¨ï¼‰åœ¨ Chromium 52 ä¹‹å‰åªæ”¯æŒåŸºäº Google ç§æœ‰çš„ GCM/FCM æœåŠ¡è¿›è¡Œé€šçŸ¥æ¨é€ã€‚ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œç»§ Firefox 44 ä¹‹åï¼ŒChrome 52 ä¸ Opera 39 ä¹Ÿç´§è¿½å…¶åå®ç°äº†æ­£åœ¨ç”± IETF è¿›è¡Œæ ‡å‡†åŒ–çš„ <a href=\"https://tools.ietf.org/html/draft-ietf-webpush-protocol-12\" title=\"Web Push Protocol\" target=\"_blank\" rel=\"external\">Web æ¨é€åè®®ï¼ˆWeb Push Protocolï¼‰</a>ã€‚</p>\n<p>å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ Google çš„äº‘æœåŠ¡ï¼ˆæ¯”å¦‚ Firebaseï¼‰ï¼Œå¹¶ä¸”ä¸»è¦é¢å‘çš„æ˜¯æµ·å¤–ç”¨æˆ·ï¼Œé‚£ä¹ˆåœ¨ web åº”ç”¨ä¸Šæ”¯æŒåŸºäº GCM/FCM çš„æ¨é€é€šçŸ¥å¹¶ä¸æ˜¯ä¸€ä»¶è´¹åŠ›çš„äº‹æƒ…ï¼Œç¬”è€…æ¨èä½ é˜…è¯»ä¸€ä¸‹ Google Developers çš„<a href=\"https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/\" title=\"Web Push Notifications - Google Developer\" target=\"_blank\" rel=\"external\">ç³»åˆ—æ–‡ç« </a>ï¼Œå¾ˆå¤šå›½å¤–å…¬å¸å·²ç»ç©èµ·æ¥äº†ã€‚</p>\n<h2 id=\"ä»-Hybrid-åˆ°-PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\"><a href=\"#ä»-Hybrid-åˆ°-PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\" class=\"headerlink\" title=\"ä» Hybrid åˆ° PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\"></a>ä» Hybrid åˆ° PWAï¼Œä»å°é—­åˆ°å¼€æ”¾</h2><p>2008 å¹´ï¼Œå½“ç§»åŠ¨æ—¶ä»£æ¥ä¸´ï¼Œ<a href=\"https://huangxuan.me/pwa-qcon2016/#/17\" title=\"PWA@QCon2016 #17\" target=\"_blank\" rel=\"external\">å”±è¡°ç§»åŠ¨ Web çš„å£°éŸ³</a>å¼€å§‹å‡ºç°ï¼Œè€Œæµè§ˆå™¨çš„è¿›åŒ–å¹¶ä¸èƒ½è·Ÿä¸Šæ—¶ï¼Œæ¥è‡ª Nitobi çš„ Brian Leroux ç­‰äººåˆ›é€ äº† <a href=\"https://cordova.apache.org/\" title=\"Apache Cordova\" target=\"_blank\" rel=\"external\">Phonegap</a>ï¼Œå¸Œæœ›å®ƒèƒ½ä»¥ Polyfill çš„å½¢å¼ã€å¼¥è¡¥ç›®å‰æµè§ˆå™¨ä¸ç§»åŠ¨è®¾å¤‡é—´çš„ã€Œé¸¿æ²Ÿã€ï¼Œä»æ­¤å¼€å¯äº†<a href=\"https://en.wikipedia.org/wiki/Progressive_web_app#Hybrid_Apps\" target=\"_blank\" rel=\"external\">æ··åˆåº”ç”¨ï¼ˆHybrid Appsï¼‰</a>çš„æ—¶ä»£ã€‚</p>\n<p>å‡ å¹´é—´ï¼Œ<a href=\"http://www.adobe.com/products/air.html\" title=\"Adobe AIR Application\" target=\"_blank\" rel=\"external\">Adobe AIR</a>ã€<a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx\" title=\"Windows Runtime JS API\" target=\"_blank\" rel=\"external\">Windows Runtime Apps</a>ã€<a href=\"https://developer.chrome.com/extensions/apps\" title=\"Chrome Packaged Apps\" target=\"_blank\" rel=\"external\">Chrome Apps</a>ã€<a href=\"https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS\" title=\"Firefox OS Packaged Apps\" target=\"_blank\" rel=\"external\">Firefox OS</a>ã€<a href=\"http://www.openwebosproject.org/\" title=\"Open webOS\" target=\"_blank\" rel=\"external\">WebOS</a>ã€<a href=\"https://cordova.apache.org/\" title=\"Apache Cordova\" target=\"_blank\" rel=\"external\">Cordova/Phonegap</a>ã€<a href=\"http://electron.atom.io/\" title=\"Electron\" target=\"_blank\" rel=\"external\">Electron</a> ä»¥åŠå›½å†…æ¯”å¦‚å¾®ä¿¡ã€æ·˜å®ï¼Œæ— æ•°çš„ Hybrid æ–¹æ¡ˆæ‹”åœ°è€Œèµ·ï¼Œè®© web å¼€å‘è€…å¯ä»¥åœ¨ç»§ç»­ä½¿ç”¨ web å®¢æˆ·ç«¯æŠ€æœ¯çš„åŒæ—¶ï¼Œåšåˆ°ä¸€äº›åªæœ‰åŸç”Ÿåº”ç”¨æ‰èƒ½åšåˆ°çš„äº‹æƒ…ï¼ŒåŒ…æ‹¬è®¿é—®ä¸€äº›è®¾å¤‡ä¸æ“ä½œç³»ç»Ÿ APIï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´åŠ  ã€ŒAppyã€ çš„ä½“éªŒï¼Œä»¥åŠè¿›å…¥ App Store ç­‰ç­‰ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/qcon-hybridzation.png\" alt=\"\"><br><em>ä¼—å¤šçš„ Hybrid æ–¹æ¡ˆ</em></p>\n<p>PWA ä½œä¸ºä¸€ä¸ªæ¶µç›–æ€§æœ¯è¯­ï¼Œä¸è¿‡å¾€çš„è¿™äº›æˆ–å¤šæˆ–å°‘é€šè¿‡ç§æœ‰å¹³å° API å¢å¼º web åº”ç”¨çš„å°è¯•æœ€å¤§çš„ä¸åŒï¼Œåœ¨äºæ„æˆ PWA çš„æ¯ä¸€é¡¹åŸºæœ¬æŠ€æœ¯ï¼Œéƒ½å·²ç»æˆ–æ­£åœ¨è¢« IETFã€ECMAã€W3C æˆ– WHATWG æ ‡å‡†åŒ–ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå®ƒä»¬éƒ½å°†è¢«çº³å…¥å¼€æ”¾ web æ ‡å‡†ï¼Œå¹¶åœ¨ä¸è¿œçš„å°†æ¥å¾—åˆ°æ‰€æœ‰æµè§ˆå™¨ä¸å…¨å¹³å°çš„æ”¯æŒã€‚æˆ‘ä»¬ç»ˆäºå¯ä»¥é€ƒå‡º App Store å°é—­çš„ç§˜å¯†èŠ±å›­ï¼Œé‡æ–°å›åˆ°å±äº web çš„é‚£ç‰‡å¼€æ”¾è‡ªç”±çš„å¤§åœ°ã€‚</p>\n<p>æœ‰è¶£çš„æ˜¯ï¼Œä»ä¸Šæ–‡ä¸­ä½ ä¹Ÿå¯ä»¥å‘ç°ï¼Œç»„æˆ PWA çš„å„é¡¹æŠ€æœ¯çš„è‰æ¡ˆæ­£æ˜¯ç”±ä¸Šè¿°å„ç§ç§æœ‰æ–¹æ¡ˆèƒŒåçš„æµè§ˆå™¨å‚å•†æˆ–å¼€å‘è€…ç›´æ¥è´¡çŒ®æˆ–é—´æ¥å½±å“çš„ã€‚å¯ä»¥è¯´ï¼ŒPWA çš„èƒŒåå¹¶ä¸æ˜¯æŸä¸€å®¶æˆ–ä¸¤å®¶å…¬å¸ï¼Œè€Œæ˜¯æ•´ä¸ª web ç¤¾åŒºä¸æ•´ä¸ª web è§„èŒƒã€‚<strong>æ­£æ˜¯å› ä¸ºè¿™ç§å¼€æ”¾ä¸å»ä¸­å¿ƒåŒ–çš„åŠ›é‡ï¼Œä½¿å¾—ä¸‡ç»´ç½‘ï¼ˆWorld Wide Webï¼‰èƒ½å¤Ÿæˆä¸ºå½“ä»Šä¸–ç•Œä¸Šè·¨å¹³å°èƒ½åŠ›æœ€å¼ºã€ä¸”å‡ ä¹æ˜¯å”¯ä¸€ä¸€ä¸ªå…·å¤‡è¿™ç§è·¨å¹³å°èƒ½åŠ›çš„åº”ç”¨å¹³å°ã€‚</strong></p>\n<p><a href=\"http://phonegap.com/blog/2012/05/09/phonegap-beliefs-goals-and-philosophy/\" title=\"PhoneGap Beliefs, Goals, and Philosophy\" target=\"_blank\" rel=\"external\">ã€Œæˆ‘ä»¬ç›¸ä¿¡ Webï¼Œæ˜¯å› ä¸ºç›¸ä¿¡å®ƒæ˜¯è§£å†³è®¾å¤‡å·®å¼‚åŒ–çš„ç»ˆææ–¹æ¡ˆï¼›æˆ‘ä»¬ç›¸ä¿¡ï¼Œå½“ Web åœ¨ä»Šå¤©åšä¸åˆ°ä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œæ˜¯å› ä¸ºå®ƒè¿˜æ²¡æ¥å¾—åŠå»å®ç°ï¼Œè€Œä¸æ˜¯å› ä¸ºä»–åšä¸åˆ°ã€‚è€Œ Phonegapï¼Œå®ƒçš„ç»ˆæç›®çš„å°±æ˜¯æ¶ˆå¤±åœ¨ Web æ ‡å‡†çš„èƒŒåã€‚ã€</a></p>\n<p>åœ¨ä¸ä¸¢å¤± web çš„å¼€æ”¾çµé­‚ï¼Œåœ¨ä¸éœ€è¦ä¾é  Hybrid æŠŠåº”ç”¨æ”¾åœ¨ App Store çš„å‰æä¸‹ï¼Œè®© web åº”ç”¨èƒ½å¤Ÿæ¸è¿›å¼åœ°è·³è„±å‡ºæµè§ˆå™¨çš„æ ‡ç­¾ï¼Œå˜æˆç”¨æˆ·çœ¼ä¸­çš„ Appã€‚è¿™æ˜¯ Alex Russell åœ¨ 2015 å¹´æå‡º PWA æ¦‚å¿µçš„<a href=\"https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/\" title=\"Progressive Web Apps: Escaping Tabs Without Losing Our Soul\" target=\"_blank\" rel=\"external\">åŸå§”</a>ã€‚</p>\n<p>è€Œåˆæ­£å› ä¸º web æ˜¯ä¸€ä¸ªæ•´ä½“ï¼ŒPWA å¯ä»¥åˆ©ç”¨çš„æŠ€æœ¯è¿œä¸æ­¢ä¸Šè¿°çš„å‡ ä¸ªè€Œå·²ï¼šAjaxã€å“åº”å¼è®¾è®¡ã€JavaScript æ¡†æ¶ã€ECMAScript Nextã€CSS Nextã€Houdiniã€Indexed DBã€Device APIsã€Web Bluetoothã€Web Socketã€Web Paymentã€<a href=\"https://wicg.github.io/BackgroundSync/spec/\" title=\"Web Background Synchronization - WICG\" target=\"_blank\" rel=\"external\">å­µåŒ–</a>ä¸­çš„ <a href=\"developers.google.com/web/updates/2015/12/background-sync\" title=\"Background Sync - Google Developers\">Background Sync API</a>ã€<a href=\"https://streams.spec.whatwg.org/\" title=\"Streams\" target=\"_blank\" rel=\"external\">Streams</a>ã€WebVRâ€¦â€¦å¼€æ”¾ Web ä¸–ç•Œ 27 å¹´æ¥çš„å‘å±•ä»¥åŠæœªæ¥çš„ä¸€åˆ‡ï¼Œéƒ½ä¸ PWA å¤©ä½œä¹‹åˆã€‚</p>\n<h2 id=\"é±¼ä¸ç†ŠæŒçš„å…¼å¾—\"><a href=\"#é±¼ä¸ç†ŠæŒçš„å…¼å¾—\" class=\"headerlink\" title=\"é±¼ä¸ç†ŠæŒçš„å…¼å¾—\"></a>é±¼ä¸ç†ŠæŒçš„å…¼å¾—</h2><p>ç»è¿‡å‡ å¹´æ¥çš„æ‘¸ç´¢ï¼Œæ•´ä¸ªäº’è”ç½‘è¡Œä¸šä»¿ä½›åœ¨ã€ŒWeb åº”ç”¨ vs. åŸç”Ÿåº”ç”¨ã€è¿™ä¸ªé—®é¢˜ä¸Šè¾¾æˆäº†å…±è¯†ï¼š</p>\n<ul>\n<li>web åº”ç”¨æ˜¯é±¼ï¼šè¿­ä»£å¿«ï¼Œè·å–ç”¨æˆ·æˆæœ¬ä½ï¼›è·¨å¹³å°å¼ºä½“éªŒå¼±ï¼Œå¼€å‘æˆæœ¬ä½ã€‚<strong>é€‚åˆæ‹‰æ–°</strong>ã€‚</li>\n<li>åŸç”Ÿåº”ç”¨æ˜¯ç†ŠæŒï¼šè¿­ä»£æ…¢ï¼Œè·å–ç”¨æˆ·æˆæœ¬é«˜ï¼›è·¨å¹³å°å¼±ä½“éªŒå¼ºï¼Œå¼€å‘æˆæœ¬é«˜ã€‚<strong>é€‚åˆä¿æ´»</strong>ã€‚</li>\n</ul>\n<p>è¦çŸ¥é“ï¼Œè™½ç„¶ç”¨æˆ·èŠ±åœ¨åŸç”Ÿåº”ç”¨ä¸Šçš„æ—¶é—´è¦æ˜æ˜¾å¤šäº web åº”ç”¨ï¼Œä½†å…¶ä¸­<a href=\"http://marketingland.com/report-mobile-users-spend-80-percent-time-just-five-apps-116858\" title=\"Report: Mobile Users Spend 80 Percent Of Time In Just Five Apps\" target=\"_blank\" rel=\"external\">æœ‰ 80% çš„æ—¶é—´æ˜¯èŠ±åœ¨å‰äº”ä¸ªåº”ç”¨ä¸­çš„</a>ã€‚<a href=\"http://www.recode.net/2016/9/16/12933780/average-app-downloads-per-month-comscore\" title=\"Half of U.S. smartphone users download zero apps per month\" target=\"_blank\" rel=\"external\">è°ƒæŸ¥æ˜¾ç¤ºï¼Œç¾å›½æœ‰ä¸€åŠçš„æ™ºèƒ½æ‰‹æœºç”¨æˆ·å¹³å‡æ¯æœˆæ–° App å®‰è£…é‡ä¸ºé›¶</a>ï¼Œè€Œæœˆå‡ç½‘ç«™è®¿é—®é‡å´æœ‰ 100 ä¸ªï¼Œæ›´åˆ«æ Google Play ä¸Š<a href=\"https://youtu.be/EUthgV-U05w\" title=\"AdWords for App Promotion - Google\" target=\"_blank\" rel=\"external\">æœ‰ 60% çš„åº”ç”¨ä»æœªè¢«äººä¸‹è½½è¿‡äº†</a>ã€‚äºæ˜¯ï¼Œæ•´ä¸ªè¡Œä¸šçš„äº§å“ç­–ç•¥æ¸…ä¸€è‰²åœ°<strong>ã€Œæ‹¿é±¼æ¢ç†ŠæŒã€</strong>ï¼Œæ¯”å¦‚ç¬”è€…çš„è€ä¸œå®¶é˜¿é‡Œæ—…è¡Œï¼ˆé£çŒªæ—…è¡Œï¼‰ï¼Œweb åº”ç”¨å¸ƒæ»¡é˜¿é‡Œç³»å„ç§æ¸ é“ï¼Œæä¾›ã€Œä¼˜ç§€çš„ç¬¬ä¸€æ‰‹ä½“éªŒã€ï¼Œç­‰ä½ ç”¨çš„å¼€å¿ƒäº†ï¼Œå†å¼•è¯±ä½ å»ä¸‹è½½å®‰è£…åŸç”Ÿåº”ç”¨ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/PWAR-014+PWA.jpeg\" alt=\"\"><br><em>åŸç”Ÿåº”ç”¨ã€å½“ä»£ Web ä¸ PWA å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://developers.google.com/web/events/pwaroadshow/\" target=\"_blank\" rel=\"external\">Google</a></em></p>\n<p>ä½†æ˜¯ï¼ŒPWA çš„å‡ºç°ï¼Œè®©é±¼ä¸ç†ŠæŒå…¼å¾—å˜æˆäº†å¯èƒ½ â€”â€” å®ƒåŒæ—¶å…·å¤‡äº† web åº”ç”¨ä¸åŸç”Ÿåº”ç”¨çš„ä¼˜ç‚¹ï¼Œæœ‰ç€è‡ªå·±ç‹¬æœ‰çš„å…ˆè¿›æ€§ï¼šã€Œæµè§ˆå™¨ -&gt; æ·»åŠ è‡³ä¸»å±/å®‰è£… -&gt; å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWA -&gt; æ¨é€é€šçŸ¥ -&gt; å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWAã€ï¼ŒPWA è‡ªèº«å°±åŒ…å«ç€ä»æ‹‰æ–°åˆ°ä¿æ´»çš„é—­ç¯ã€‚</p>\n<p>é™¤æ­¤ä¹‹å¤–ï¼ŒPWA è¿˜ç»§æ‰¿äº† web åº”ç”¨çš„å¦å¤–ä¸¤å¤§ä¼˜ç‚¹ï¼š<strong>æ— éœ€å…ˆä»˜å‡ºå‡ åå…†çš„ä¸‹è½½å®‰è£…æˆæœ¬å³å¯å¼€å§‹ä½¿ç”¨</strong>ï¼Œä»¥åŠ<strong>ä¸éœ€è¦ç»è¿‡åº”ç”¨è¶…å¸‚å®¡æ ¸å°±å¯ä»¥å‘å¸ƒæ–°ç‰ˆæœ¬</strong>ã€‚æ‰€ä»¥ï¼ŒPWA å¯ä»¥ç§°å¾—ä¸Šæ˜¯ä¸€ç§ã€Œæµå¼åº”ç”¨ï¼ˆStreamable Appï¼‰ã€ä¸ã€Œå¸¸é’åº”ç”¨ï¼ˆEvergreen Appï¼‰ã€</p>\n<h2 id=\"æœªæ¥åˆ°æ¥äº†å—\"><a href=\"#æœªæ¥åˆ°æ¥äº†å—\" class=\"headerlink\" title=\"æœªæ¥åˆ°æ¥äº†å—\"></a>æœªæ¥åˆ°æ¥äº†å—</h2><p>åœ¨ç¬”è€…åˆ†äº« PWA çš„ç»å†ä¸­ï¼Œæœ€ä¸æ„¿æ„å›ç­”çš„ä¸¤ä¸ªé—®é¢˜è«è¿‡äºã€ŒPWA å·²ç»è¢«å¹¿æ³›æ”¯æŒäº†å—ï¼Ÿã€ä»¥åŠã€ŒPWA ä¸ ABCDEFG è¿™äº›æŠ€æœ¯æ–¹æ¡ˆç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿã€ï¼Œä½†æ˜¯è¿™ç¡®å®æ˜¯ä¸¤ä¸ªé€ƒä¸å¼€çš„é—®é¢˜ã€‚</p>\n<h3 id=\"PWA-çš„æ”¯æŒæƒ…å†µï¼Ÿ\"><a href=\"#PWA-çš„æ”¯æŒæƒ…å†µï¼Ÿ\" class=\"headerlink\" title=\"PWA çš„æ”¯æŒæƒ…å†µï¼Ÿ\"></a>PWA çš„æ”¯æŒæƒ…å†µï¼Ÿ</h3><p>å½“æˆ‘ä»¬è¯´åˆ° PWA æ˜¯å¦è¢«æ”¯æŒæ—¶ï¼Œå…¶å®æˆ‘ä»¬åœ¨è¯´çš„æ˜¯ PWA èƒŒåçš„å‡ ä¸ªå…³é”®æŠ€æœ¯éƒ½å¾—åˆ°æ”¯æŒäº†æ²¡æœ‰ã€‚ä»¥æµè§ˆå™¨å†…æ ¸æ¥åˆ’åˆ†çš„è¯ï¼ŒBlinkï¼ˆChromeã€Opreaã€Samsung Internet ç­‰ï¼‰ä¸ Geckoï¼ˆFirefoxï¼‰éƒ½å·²ç»å®ç°äº† PWA æ‰€éœ€çš„æ‰€æœ‰å…³é”®æŠ€æœ¯ï¼ˆğŸ‘ğŸ‘ğŸ‘ï¼‰ï¼Œå¹¶å·²ç»å¼€å§‹æ¢å¯»æ›´å¤šçš„å¯èƒ½æ€§ã€‚EdgeHTMLï¼ˆEdgeï¼‰<a href=\"https://blogs.windows.com/msedgedev/2016/07/08/the-progress-of-web-apps/\" title=\"The Progress of Web Apps - MSEdgeDev Blog\" target=\"_blank\" rel=\"external\">ç®€ç›´ç§¯æå¾—ä¸èƒ½æ›´ç§¯æäº†</a>ï¼Œæ‰€æœ‰çš„ç‰¹æ€§éƒ½å·²ç»å¤„äºã€Œæ­£åœ¨å¼€å‘ä¸­ã€çš„<a href=\"https://developer.microsoft.com/en-us/microsoft-edge/platform/status/\" title=\"Microsoft Edge web platform features status\" target=\"_blank\" rel=\"external\">çŠ¶æ€</a>ã€‚æœ€å¤§çš„ç»Šè„šçŸ³ä»ç„¶æ¥è‡ªäº Webkitï¼ˆSafariï¼‰ï¼Œå°¤å…¶æ˜¯åœ¨ iOS ä¸Šï¼Œä¸Šè¿°çš„å››ä¸ª API éƒ½æœªå¾—åˆ°æ”¯æŒï¼Œè€Œä¸”ç”±äºå¹³å°é™åˆ¶ï¼Œç¬¬ä¸‰æ–¹æµè§ˆå™¨ä¹Ÿæ— æ³•åœ¨ iOS ä¸Šæ”¯æŒã€‚ï¼ˆ<a href=\"https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support\" title=\"Internet Explorer End of Support\" target=\"_blank\" rel=\"external\">ä»€ä¹ˆä½ è¯´ IEï¼Ÿ</a>ï¼‰</p>\n<p>ä¸è¿‡ï¼Œä¹Ÿä¸è¦æ°”é¦ï¼ŒWebkit ä¸ä½†åœ¨å®ƒ <a href=\"https://trac.webkit.org/wiki/FiveYearPlanFall2015\" target=\"_blank\" rel=\"external\">2015 å¹´å‘å¸ƒçš„äº”å¹´è®¡åˆ’</a>é‡Œæåˆ°äº† Service Workerï¼Œæ›´æ˜¯å·²ç»åœ¨æœ€è¿‘å®ç°äº† Service Worker æ‰€<a href=\"https://jakearchibald.github.io/isserviceworkerready/\" title=\"Is Service Worker Ready?\" target=\"_blank\" rel=\"external\">ä¾èµ–</a>çš„ Requestã€Response ä¸ Fetch APIï¼Œè¿˜æŠŠ Service Worker ä¸ Web App Manifest çº·çº·<a href=\"https://webkit.org/status/\" title=\"Webkit Feature Status\" target=\"_blank\" rel=\"external\">åˆ—å…¥äº†ã€Œæ­£åœ¨è€ƒè™‘ã€</a>çš„ API ä¸­ï¼›è¦çŸ¥é“ï¼ŒWebkit å¯æ˜¯æŠŠ Web Components ä¸­çš„ HTML Imports ç›´æ¥<a href=\"https://webkit.org/status/#specification-web-components\" title=\"HTML Imports - Not Considering\" target=\"_blank\" rel=\"external\">åˆ—åˆ°ã€Œä¸è€ƒè™‘ã€é‡Œå»äº†</a>â€¦â€¦ï¼ˆå…¶å® Firefox ä¹Ÿæ˜¯ï¼‰</p>\n<p>æ›´ä½•å†µï¼Œç”±äº web ç¤¾åŒºä¸€ç›´ä»¥æ¥æ‰€è¿½æ±‚çš„ã€Œæ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§ã€ï¼Œä¸€ä¸ª PWA å½“ç„¶å¯ä»¥åœ¨ iOS ç¯å¢ƒæ­£å¸¸æ‰§è¡Œã€‚<a href=\"https://cloudfour.com/thinks/why-does-the-washington-posts-progressive-web-app-increase-engagement-on-ios/\" title=\"Why does The Washington Postâ€™s Progressive Web App increase engagement on iOS?\" target=\"_blank\" rel=\"external\">äº‹å®ä¸Šï¼Œåç››é¡¿é‚®æŠ¥å°†ç½‘ç«™è¿ç§»åˆ° PWA ä¹‹åå‘ç°ï¼Œä¸æ­¢æ˜¯ Androidï¼Œåœ¨ iOS ä¸Šä¹Ÿè·å¾—äº† 5 å€çš„æ´»è·ƒåº¦å¢é•¿</a>ï¼Œï¼ˆæ— è®ºæ˜¯ä¸æ˜¯å®ƒä»¬ä¹‹å‰çš„ç½‘ç«™å†™å¾—å¤ªçƒ‚å§ï¼‰ï¼Œå°±ç®— iOS ç°åœ¨è¿˜ä¸æ”¯æŒ PWA ä¹Ÿ<a href=\"https://cloudfour.com/thinks/ios-doesnt-support-progressive-web-apps-so-what/\" title=\"iOS doesnâ€™t support Progressive Web Apps, so what?\" target=\"_blank\" rel=\"external\">ä¸ä¼šæ€ä¹ˆæ ·</a>ï¼Œæˆ‘ä»¬æ›´æ˜¯æœ‰ç†ç”±ç›¸ä¿¡ PWA ä¼šå¾ˆå¿«åœ¨ iOS ä¸Šåˆ°æ¥ã€‚</p>\n<h3 id=\"PWA-vs-Others\"><a href=\"#PWA-vs-Others\" class=\"headerlink\" title=\"PWA vs. Others\"></a>PWA vs. Others</h3><p>è´ºè€ï¼ˆè´ºå¸ˆä¿Šï¼‰æ›¾è¯´è¿‡ï¼šã€Œä»çº¯ Web åˆ°çº¯ Nativeï¼Œä¹‹é—´æœ‰è®¸å¤šå¯èƒ½çš„ç‚¹ã€ã€‚å½“è€ƒè™‘ç§»åŠ¨åº”ç”¨çš„æŠ€æœ¯é€‰å‹æ—¶ï¼Œé™¤äº† Web ä¸åŸç”Ÿåº”ç”¨ï¼Œæˆ‘ä»¬è¿˜æœ‰å„ç§ä¸åŒç¨‹åº¦çš„ Hybridï¼Œè¿˜æœ‰ä»Šå¹´çˆ†å‘çš„è¯¸å¤š JS-to-Native æ–¹æ¡ˆã€‚</p>\n<p>è™½ç„¶æˆ‘åœ¨ä¸Šæ–‡ä¸­ç”¨äº†ã€Œå¤ä»‡ã€è¿™æ ·çš„å­—çœ¼ï¼Œä¸è¿‡æ— è®ºä»æŠ€æœ¯è¿˜æ˜¯å•†ä¸šçš„è§’åº¦ï¼Œæˆ‘ä»¬éƒ½æ²¡å¿…è¦æŠŠ web æˆ–æ˜¯ PWA æ”¾åˆ° Native çš„å¯¹ç«‹é¢å»çœ‹ã€‚å®ƒä»¬å½“ç„¶å­˜åœ¨ç«äº‰å…³ç³»ï¼Œä½†æ˜¯æ›´å¤šçš„æ—¶å€™ï¼Œweb-only ä¸ app-only çš„ç­–ç•¥éƒ½æ˜¯ä¸å®Œç¾çš„ï¼Œå½“å…¬å¸èµ„æºè¶³å¤Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€‰æ‹©åŒæ—¶å¼€å‘ä¸¤è€…ã€‚<a href=\"https://cloudfour.com/thinks/progressive-web-apps-simply-make-sense/?utm_source=mobilewebweekly&amp;utm_medium=email#fn-4857-1\" title=\"Progressive Web Apps Simply Make Sense\" target=\"_blank\" rel=\"external\">å½“ç„¶ï¼Œæ— è®ºä¸ä¸ä¸åŸç”Ÿåº”ç”¨å¯¹æ¯”ï¼ŒPWA è®© web åº”ç”¨å˜å¾—ä½“éªŒæ›´å¥½è¿™ä»¶äº‹æœ¬èº«æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚</a>ã€Œä¸è°ˆåœºæ™¯èŠæŠ€æœ¯éƒ½æ˜¯æ‰¯æ·¡ã€ï¼Œ<a href=\"https://medium.com/@owencm/the-surprising-tradeoff-at-the-center-of-question-whether-to-build-an-native-or-web-app-d2ad00c40fb2#.ym83ct2ax\" title=\"The surprising tradeoff at the center of the question whether to build a Native or Web App\" target=\"_blank\" rel=\"external\">æˆ‘ä»¬ä»ç„¶è¿˜æ˜¯éœ€è¦æ ¹æ®è‡ªå·±äº§å“ä¸å›¢é˜Ÿçš„æƒ…å†µæ¥å†³å®šå¯¹åº”çš„æŠ€æœ¯é€‰å‹ä¸å¹³å°ç­–ç•¥ï¼Œåªæ˜¯ PWA è®© web åº”ç”¨åœ¨é¢å¯¹é€‰å‹è€ƒéªŒæ—¶æ›´åŠ å¼ºåŠ¿äº†è€Œå·²ã€‚</a></p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/qcon-trend.png\" alt=\"\"><br><em>ä¼—å¤šçš„æŠ€æœ¯é€‰å‹ï¼Œä»¥åŠç¬”è€…çš„ä¸€ç§çŒœæµ‹</em></p>\n<p>ç¬”è€…ä¸è´Ÿè´£ä»»å¾—åšä¸€äº›çŒœæµ‹ï¼šè™½ç„¶<a href=\"http://zhihu.com/question/31316032/answer/75236718\" target=\"_blank\" rel=\"external\">é‡é‡çº§çš„ Hybrid æ¶æ„ä¸åŸºç¡€è®¾æ–½</a>ä»æ˜¯ç›®å‰ä¸å°‘åœºæ™¯ä¸‹æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆï¼›ä½†æ˜¯éšç€ç§»åŠ¨è®¾å¤‡æœ¬èº«çš„ç¡¬ä»¶æ€§èƒ½æå‡ä¸æ–°æŠ€æœ¯çš„æˆç†Ÿä¸æ™®åŠï¼ŒJS-to-Native ä¸ä»¥ PWA ä¸ºé¦–çš„çº¯ web åº”ç”¨ï¼Œå°†åˆ†åˆ«ä»ä¸¤ä¸ªæ–¹å‘æŒ¤å‹ Hybrid çš„ç”Ÿå­˜ç©ºé—´ï¼Œæ¶ˆåŒ–å½“å‰ Hybrid æ¶æ„ä¸»è¦è§£å†³çš„é—®é¢˜ï¼›å‰è€…å°†é€æ¸æ¼”åŒ–ä¸ºç±»ä¼¼ Xarmarin è¿™æ ·é’ˆå¯¹è·¨å¹³å°åŸç”Ÿåº”ç”¨å¼€å‘çš„è§£å†³æ–¹æ¡ˆï¼›åè€…å°†æ˜¾è‘—é™ä½å½“å‰ Hybrid æ¶æ„çš„å®¹å™¨å¼€å‘ä¸éƒ¨ç½²æˆæœ¬ï¼Œå°† Hybrid è¿”ç’å½’çœŸä¸ºç®€å•çš„ webview è°ƒç”¨ã€‚</p>\n<p>è¿™ç§çŒœæµ‹å½“ç„¶ä¸æ˜¯æ²¡æœ‰ä¾æ®çš„ççŒœï¼Œæ¯”å¦‚å‰è€…å¯ä»¥å‚è€ƒé˜¿é‡Œå·´å·´é›†å›¢çº§åˆ«è¿ç§» Weex çš„æˆ˜ç•¥ä¸å¾®ä¿¡å°ç¨‹åºçš„ roadmapï¼›åè€…åˆ™å¯ä»¥å‚è€ƒå½“å‰ Cordova ä¸ Ionic ä¸¤å¤§ Hybrid ç¤¾åŒºå¯¹ PWA çš„çƒ­çƒˆåå“ã€‚</p>\n<h3 id=\"PWA-in-China\"><a href=\"#PWA-in-China\" class=\"headerlink\" title=\"PWA in China\"></a>PWA in China</h3><p>çœ‹çœ‹ Google å®˜æ–¹å®£ä¼ è¾ƒå¤šçš„ PWA <a href=\"https://developers.google.com/web/showcase/\" title=\"Case Studies - Google Developers\" target=\"_blank\" rel=\"external\">æ¡ˆä¾‹</a>å°±ä¼šå‘ç°ï¼ŒFlipKartã€Housing.com æ¥è‡ªå°åº¦ï¼›Lyftã€åç››é¡¿é‚®æŠ¥æ¥è‡ªåŒ—ç¾ï¼›å”¯ä¸€æ¥è‡ªä¸­å›½çš„ AliExpress ä¸»è¦å¼€å±•çš„åˆ™æ˜¯æµ·å¤–ä¸šåŠ¡ã€‚</p>\n<p>ç”±äºä¸­å›½çš„ç‰¹æ®Šæ€§ï¼Œç¬”è€…åœ¨<a href=\"https://www.zhihu.com/question/46690207/answer/104851767\" target=\"_blank\" rel=\"external\">ç¬¬ä¸€æ¬¡</a>èŠåˆ° PWA æ—¶éš¾å…è¡¨ç°å‡ºäº†ä¸€å®šç¨‹åº¦çš„æ‚²è§‚ï¼š</p>\n<ul>\n<li>å›½å†…è¾ƒé‡è§† iOSï¼Œè€Œ iOS ç›®å‰è¿˜ä¸æ”¯æŒ PWAã€‚</li>\n<li>å›½å†…çš„ Android å®ä¸ºã€Œå®‰å“ã€ï¼Œä¸è‡ªå¸¦ Chrome æ˜¯ä¸€ï¼Œå¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–å…¼å®¹é—®é¢˜ã€‚</li>\n<li>å›½å†…å‚å•†å¯èƒ½å¹¶ä¸ä¼šåƒä¸‰æ˜Ÿé‚£æ ·å¯¹æ¨åŠ¨è‡ªå®¶æµè§ˆå™¨æ”¯æŒ PWA é‚£ä¹ˆæ„Ÿå…´è¶£ã€‚</li>\n<li>ä¾èµ– GCM æ¨é€çš„é€šçŸ¥ä¸å¯ç”¨ï¼ŒWeb Push Protocol è¿˜æ²¡æœ‰å›½å†…çš„æ¨é€æœåŠ¡å®ç°ã€‚</li>\n<li>å›½å†… webview ç¯å¢ƒè¾ƒä¸ºå¤æ‚ï¼ˆæ¯”å¦‚å¾®ä¿¡ï¼‰ï¼Œé»‘ç§‘æŠ€æ¯”è¾ƒå¤šã€‚</li>\n</ul>\n<p>åè§‚å°åº¦ï¼Œç”±äº Google æœåŠ¡å¥å…¨ã€æ ‡é… Chrome çš„ Android æ‰‹æœºå¸‚å ç‡éå¸¸é«˜ï¼ŒPWA çš„ç”¨æˆ·è¾¾åˆ°ç‡ç®€ç›´ç›´é€¼ 100%ï¼Œä¹Ÿéš¾å…è·å¾—æ— æ•°å¥½è¯„ä¸æ”¯æŒäº†ã€‚<strong>ç¬”è€…å¥¢æœ›ç€æœ¬æ–‡èƒ½å¯¹æ¨åŠ¨ PWA çš„å›½å†…ç¯å¢ƒæœ‰ä¸€å®šçš„è´¡çŒ®ã€‚</strong>ä¸è¿‡æ— è®ºå¦‚ä½•ï¼ŒPWA åœ¨å›½å†…çš„æ˜¥å¤©å¯èƒ½çš„ç¡®ä¼šæ¥å¾—ç¨å¾®æ™šä¸€ç‚¹äº†ã€‚</p>\n<h2 id=\"ç»“è¯­\"><a href=\"#ç»“è¯­\" class=\"headerlink\" title=\"ç»“è¯­\"></a>ç»“è¯­</h2><p>ã€Œ<a href=\"https://huangxuan.me/pwa-qcon2016/#/99\" title=\"PWA@QCon2016 #97\" target=\"_blank\" rel=\"external\">æˆ‘ä»¬ä¿¡ä»° Webï¼Œä¸ä»…ä»…åœ¨äºè½¯ä»¶ã€è½¯ä»¶å¹³å°ä¸å•çº¯çš„æŠ€æœ¯</a>ï¼Œè¿˜åœ¨äº<a href=\"http://phonegap.com/blog/2012/05/09/phonegap-beliefs-goals-and-philosophy/\" title=\"PhoneGap Beliefs, Goals, and Philosophy\" target=\"_blank\" rel=\"external\">ã€ä»»ä½•äººï¼Œåœ¨ä»»ä½•æ—¶é—´ä»»ä½•åœ°ç‚¹ï¼Œéƒ½å¯ä»¥åœ¨ä¸‡ç»´ç½‘ä¸Šå‘å¸ƒä»»ä½•ä¿¡æ¯ï¼Œå¹¶è¢«ä¸–ç•Œä¸Šçš„ä»»ä½•ä¸€ä¸ªäººæ‰€è®¿é—®åˆ°ã€‚ã€è€Œè¿™æ‰æ˜¯ web çš„æœ€ä¸ºé©å‘½ä¹‹å¤„ï¼Œå ªç§°æˆ‘ä»¬äººç±»ï¼Œä½œä¸ºä¸€ä¸ªç‰©ç§çš„ä¸€æ¬¡è¿›åŒ–ã€‚</a>ã€</p>\n<p>è¯·ä¸è¦è®© web å†<a href=\"https://zhuanlan.zhihu.com/p/22561084\" title=\"Web åœ¨ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»\" target=\"_blank\" rel=\"external\">ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»</a>ï¼Œæµè§ˆå™¨å‚å•†ä»¬å·²ç»é‡æ–°èµ°åˆ°äº†ä¸€èµ·ï¼Œè€Œä¸‹ä¸€æ£’å°†æ˜¯äº¤åˆ°æˆ‘ä»¬ web åº”ç”¨å¼€å‘è€…çš„æ‰‹ä¸Šã€‚<a href=\"youtu.be/y1B2c3ZD9fk?t=1h14m48s\" title=\"WWDC 2017\">ä¹”å¸ƒæ–¯æ›¾ç›¸ä¿¡ web åº”ç”¨æ‰ç§»åŠ¨åº”ç”¨çš„æœªæ¥</a>ï¼Œé‚£å°±è®©æˆ‘ä»¬ç”¨ä»£ç è¯æ˜ç»™è¿™ä¸ªä¸–ç•Œçœ‹å§ã€‚</p>\n<p><strong>è®©æˆ‘ä»¬çš„ç”¨æˆ·ï¼Œä¹Ÿåƒæˆ‘ä»¬è¿™èˆ¬çƒ­çˆ± web å§ã€‚</strong></p>\n<p>é»„ç„ï¼Œäº 12 æœˆçš„åŒ—äº¬ã€‚</p>\n<hr>\n<p><em>æ³¨ï¼šåœ¨ç¬”è€…æ’°æ–‡æœŸé—´ï¼ŒGoogle åœ¨ Google China Developers Days ä¸Šå®£å¸ƒäº† developers.google.cn åŸŸåçš„å¯ç”¨ï¼Œæ–¹ä¾¿å›½å†…å¼€å‘è€…è®¿é—®ã€‚å¯¹äºæ–‡ä¸­æ‰€æœ‰é“¾å‘ developers.google.com çš„å‚è€ƒæ–‡çŒ®ï¼Œåº”è¯¥éƒ½å¯ä»¥åœ¨ cn ç«™ç‚¹ä¸­æ‰¾åˆ°ã€‚</em></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>æœ¬æ–‡é¦–å‘äº<a href=\"http://geek.csdn.net/news/detail/135595\" target=\"_blank\" rel=\"external\">ã€Šç¨‹åºå‘˜ã€‹</a>ï¼Œå‘å¸ƒäº <a href=\"https://huangxuan.me\" target=\"_blank\" rel=\"external\">Hux Blog</a>ã€<a href=\"https://zhuanlan.zhihu.com/FrontendMagazine\" target=\"_blank\" rel=\"external\">å‰ç«¯å¤–åˆŠè¯„è®º</a>ï¼Œè½¬è½½è¯·ä¿ç•™é“¾æ¥ ;)</p>\n</blockquote>\n<h2 id=\"ä¸‹ä¸€ä»£-Web-åº”ç”¨ï¼Ÿ\"><a href=\"#ä¸‹ä¸€ä»£-Web-åº”ç”¨ï¼Ÿ\" class=\"headerlink\" title=\"ä¸‹ä¸€ä»£ Web åº”ç”¨ï¼Ÿ\"></a>ä¸‹ä¸€ä»£ Web åº”ç”¨ï¼Ÿ</h2><p>è¿‘å¹´æ¥ï¼ŒWeb åº”ç”¨åœ¨æ•´ä¸ªè½¯ä»¶ä¸äº’è”ç½‘è¡Œä¸šæ‰¿è½½çš„è´£ä»»è¶Šæ¥è¶Šé‡ï¼Œè½¯ä»¶å¤æ‚åº¦å’Œç»´æŠ¤æˆæœ¬è¶Šæ¥è¶Šé«˜ï¼ŒWeb æŠ€æœ¯ï¼Œå°¤å…¶æ˜¯ Web å®¢æˆ·ç«¯æŠ€æœ¯ï¼Œè¿æ¥äº†çˆ†å‘å¼çš„å‘å±•ã€‚</p>\n<p>åŒ…æ‹¬ä½†ä¸é™äºåŸºäº Node.js çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆï¼›è¯¸å¦‚ Webpackã€Rollup è¿™æ ·çš„æ‰“åŒ…å·¥å…·ï¼›Babelã€PostCSS è¿™æ ·çš„è½¬è¯‘å·¥å…·ï¼›TypeScriptã€Elm è¿™æ ·è½¬è¯‘è‡³ JavaScript çš„ç¼–ç¨‹è¯­è¨€ï¼›Reactã€Angularã€Vue è¿™æ ·é¢å‘ç°ä»£ web åº”ç”¨éœ€æ±‚çš„å‰ç«¯æ¡†æ¶åŠå…¶ç”Ÿæ€ï¼Œä¹Ÿæ¶Œç°å‡ºäº†åƒ<a href=\"http://nerds.airbnb.com/isomorphic-javascript-future-web-apps/\" title=\"Isomorphic JavaScript: The Future of Web Apps\" target=\"_blank\" rel=\"external\">åŒæ„ JavaScript</a>ä¸<a href=\"https://medium.com/@mjackson/universal-javascript-4761051b7ae9#.unrzyz3b2\" title=\"Universal JavaScript\" target=\"_blank\" rel=\"external\">é€šç”¨ JavaScript åº”ç”¨</a>è¿™æ ·å°†æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆServer-side Renderingï¼‰ä¸å•é¡µé¢åº”ç”¨æ¨¡å‹ï¼ˆSingle-page Appï¼‰ç»“åˆçš„ web åº”ç”¨æ¶æ„æ–¹å¼ï¼Œå¯ä»¥è¯´æ˜¯ç™¾èŠ±é½æ”¾ã€‚</p>\n<p>ä½†æ˜¯ï¼ŒWeb åº”ç”¨åœ¨ç§»åŠ¨æ—¶ä»£å¹¶æ²¡æœ‰è¾¾åˆ°å…¶åœ¨æ¡Œé¢è®¾å¤‡ä¸Šæµè¡Œçš„ç¨‹åº¦ã€‚ç©¶å…¶åŸå› ï¼Œå°½ç®¡ä¸Šè¿°çš„å„ç§æ–¹æ¡ˆå·²ç»å……åˆ†åˆ©ç”¨äº†ç°æœ‰çš„ JavaScript è®¡ç®—èƒ½åŠ›ã€CSS å¸ƒå±€èƒ½åŠ›ã€HTTP ç¼“å­˜ä¸æµè§ˆå™¨ API å¯¹å½“ä»£åŸºäº <a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\" title=\"Ajax - Wikipedia\" target=\"_blank\" rel=\"external\">Ajax</a> ä¸<a href=\"https://en.wikipedia.org/wiki/Responsive_web_design\" title=\"Responsive Web Design - Wikipedia\" target=\"_blank\" rel=\"external\">å“åº”å¼è®¾è®¡</a>çš„ web åº”ç”¨æ¨¡å‹çš„æ€§èƒ½ä¸ä½“éªŒå¸¦æ¥äº†å·¥ç¨‹è§’åº¦çš„å·¨å¤§çªç ´ï¼Œæˆ‘ä»¬ä»ç„¶æ— æ³•åœ¨ä¸å€ŸåŠ©åŸç”Ÿç¨‹åºè¾…åŠ©æµè§ˆå™¨çš„å‰æä¸‹çªç ´ web å¹³å°æœ¬èº«å¯¹ web åº”ç”¨å›ºæœ‰çš„æ¡æ¢ï¼š<strong>å®¢æˆ·ç«¯è½¯ä»¶ï¼ˆå³ç½‘é¡µï¼‰éœ€è¦ä¸‹è½½æ‰€å¸¦æ¥çš„ç½‘ç»œå»¶è¿Ÿï¼›ä¸ Web åº”ç”¨ä¾èµ–æµè§ˆå™¨ä½œä¸ºå…¥å£æ‰€å¸¦æ¥çš„ä½“éªŒé—®é¢˜ã€‚</strong></p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/PWAR-007.jpeg\" alt=\"\"><br><em>Web ä¸åŸç”Ÿåº”ç”¨åœ¨ç§»åŠ¨å¹³å°ä¸Šçš„ä½¿ç”¨æ—¶é•¿å¯¹æ¯” <a href=\"https://developers.google.com/web/events/pwaroadshow/\" target=\"_blank\" rel=\"external\">å›¾ç‰‡æ¥æº: Google</a></em></p>\n<p>åœ¨æ¡Œé¢è®¾å¤‡ä¸Šï¼Œç”±äºç½‘ç»œæ¡ä»¶ç¨³å®šï¼Œå±å¹•å°ºå¯¸å……åˆ†ï¼Œäº¤äº’æ–¹å¼è¶‹å‘äºå¤šä»»åŠ¡ï¼Œè¿™ä¸¤ç‚¹é€ æˆçš„è´Ÿé¢å½±å“å¯¹æ¯” web åº”ç”¨å…äºå®‰è£…ã€éšå«éšåˆ°ã€æ— éœ€æ›´æ–°ç­‰ä¼˜ç‚¹ï¼Œç‘•ä¸æ©ç‘œã€‚ä½†æ˜¯åœ¨ç§»åŠ¨æ—¶ä»£ï¼Œè„†å¼±çš„ç½‘ç»œè¿æ¥ä¸å…¨æ–°çš„äººæœºäº¤äº’æ–¹å¼ä½¿å¾—è¿™ä¸¤ä¸ªé—®é¢˜è¢«æ— é™æ”¾å¤§ï¼Œä¸¥é‡åˆ¶çº¦äº† web åº”ç”¨åœ¨ç§»åŠ¨å¹³å°çš„å‘å±•ã€‚åœ¨ç”¨æˆ·çœ¼é‡Œï¼ŒåŸç”Ÿåº”ç”¨ä¸ä¼šå‡ºç°ã€Œç™½å±ã€ï¼Œæ¸…ä¸€è‰²éƒ½æ‘†åœ¨ä¸»å±å¹•ä¸Šï¼›è€Œ web åº”ç”¨åˆ™æ˜¯æµè§ˆå™¨è¿™ä¸ªåº”ç”¨ä¸­çš„åº”ç”¨ï¼Œä½¿ç”¨èµ·æ¥å¹¶ä¸æ–¹ä¾¿ï¼Œè€Œä¸”åŠ è½½ä¹Ÿæ¯”åŸç”Ÿåº”ç”¨è¦æ…¢ã€‚</p>\n<p>Progressive Web Appsï¼ˆä»¥ä¸‹ç®€ç§° PWAï¼‰ä»¥åŠæ„æˆ PWA çš„ä¸€ç³»åˆ—å…³é”®æŠ€æœ¯çš„å‡ºç°ï¼Œç»ˆäºè®©æˆ‘ä»¬çœ‹åˆ°äº†å½»åº•è§£å†³è¿™ä¸¤ä¸ªå¹³å°çº§åˆ«é—®é¢˜çš„æ›™å…‰ï¼šèƒ½å¤Ÿæ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦ã€ç”šè‡³è®© web åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä½¿ç”¨çš„ Service Worker ä¸ Cache Storageï¼›ç”¨äºæè¿° web åº”ç”¨å…ƒæ•°æ®ï¼ˆmetadataï¼‰ã€è®© web åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±ã€å…¨å±æ‰§è¡Œçš„ Web App Manifestï¼›ä»¥åŠè¿›ä¸€æ­¥æé«˜ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›ï¼Œè®© web åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥çš„ Push API ä¸ Notification API ç­‰ç­‰ã€‚</p>\n<p>å°†è¿™äº›æŠ€æœ¯ç»„åˆåœ¨ä¸€èµ·ä¼šæ˜¯æ€æ ·çš„æ•ˆæœå‘¢ï¼Ÿã€Œå°åº¦é˜¿é‡Œå·´å·´ã€ â€”â€” <a href=\"https://en.wikipedia.org/wiki/Flipkart\" title=\"Flipkart - wikipedia\" target=\"_blank\" rel=\"external\">Flipkart</a> åœ¨ 2015 å¹´ä¸€åº¦å…³é—­äº†è‡ªå·±çš„ç§»åŠ¨ç«¯ç½‘ç«™ï¼Œå´åœ¨å¹´åº•å‘å¸ƒäº†ç°åœ¨æœ€ä¸ºäººæ´¥æ´¥ä¹é“çš„ PWA æ¡ˆä¾‹ <em>FlipKart Lite</em>ï¼Œæˆä¸ºä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæ”¯æ’‘å¤§è§„æ¨¡ä¸šåŠ¡çš„ PWAã€‚å‘å¸ƒçš„ä¸€å‘¨åå®ƒå°±äº®ç›¸äº <a href=\"https://youtu.be/m2a9hlUFRhg\" title=\"Keynote (Chrome Dev Summit 2015)\" target=\"_blank\" rel=\"external\">Chrome Dev Summit 2015</a> ä¸Šï¼Œç¬”è€…å½“æ—¶å°±è¢«æƒŠè‰³åˆ°äº†ã€‚ä¸ºäº†æ–¹ä¾¿å„åª’ä»‹ä¸Šçš„è¯»è€…è§‚çœ‹ï¼Œç¬”è€…åšäº†å‡ å¹…å›¾æ–¹ä¾¿ç»™å¤§å®¶ä»‹ç»ï¼š</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/flipkart-1.jpeg\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://medium.com/@AdityaPunjani/building-flipkart-lite-a-progressive-web-app-2c211e641883#.hz4d3kw41\" title=\"Building Flipkart Lite: A Progressive Web App\" target=\"_blank\" rel=\"external\">Medium.com</a></em></p>\n<p>å½“æµè§ˆå™¨å‘ç°ç”¨æˆ·<a href=\"https://developers.google.com/web/fundamentals/engage-and-retain/app-install-banners/?hl=en\" title=\"Web App Install Banners - Google Developer\" target=\"_blank\" rel=\"external\">éœ€è¦</a> Flipkart Lite æ—¶ï¼Œå®ƒå°±ä¼šæç¤ºç”¨æˆ·ã€Œå˜¿ï¼Œä½ å¯ä»¥æŠŠå®ƒæ·»åŠ è‡³ä¸»å±å“¦ã€ï¼ˆç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼‰ã€‚è¿™æ ·ï¼ŒFlipkart Lite å°±ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·åœ¨ä¸»å±ä¸Šç•™ä¸‹ä¸€ä¸ªè‡ªå®šä¹‰çš„ icon ä½œä¸ºå…¥å£ï¼›ä¸ä¸€èˆ¬çš„ä¹¦ç­¾ä¸åŒï¼Œå½“ç”¨æˆ·ç‚¹å‡» icon æ—¶ï¼ŒFlipkat Lite å°†ç›´æ¥å…¨å±æ‰“å¼€ï¼Œä¸å†å—å›°äºæµè§ˆå™¨çš„ UI ä¸­ï¼Œè€Œä¸”æœ‰è‡ªå·±çš„å¯åŠ¨å±æ•ˆæœã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/flipkart-2.jpeg\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://medium.com/@AdityaPunjani/building-flipkart-lite-a-progressive-web-app-2c211e641883#.hz4d3kw41\" title=\"Building Flipkart Lite: A Progressive Web App\" target=\"_blank\" rel=\"external\">Medium.com</a></em></p>\n<p>æ›´å¼ºå¤§çš„æ˜¯ï¼Œåœ¨æ— æ³•è®¿é—®ç½‘ç»œæ—¶ï¼ŒFlipkart Lite å¯ä»¥åƒåŸç”Ÿåº”ç”¨ä¸€æ ·ç…§å¸¸æ‰§è¡Œï¼Œè¿˜ä¼šå¾ˆéªšæ°”çš„å˜æˆé»‘ç™½è‰²ï¼›ä¸ä½†å¦‚æ­¤ï¼Œæ›¾ç»è®¿é—®è¿‡çš„å•†å“éƒ½ä¼šè¢«ç¼“å­˜ä¸‹æ¥å¾—ä»¥åœ¨ç¦»çº¿æ—¶ç»§ç»­è®¿é—®ã€‚åœ¨å•†å“é™ä»·ã€ä¿ƒé”€ç­‰æ—¶åˆ»ï¼ŒFlipkart Lite ä¼šåƒåŸç”Ÿåº”ç”¨ä¸€æ ·å‘èµ·æ¨é€é€šçŸ¥ï¼Œå¸å¼•ç”¨æˆ·å›åˆ°åº”ç”¨ã€‚</p>\n<p><strong>æ— éœ€æ‹…å¿ƒç½‘ç»œå»¶è¿Ÿï¼›æœ‰ç€ç‹¬ç«‹å…¥å£ä¸ç‹¬ç«‹çš„ä¿æ´»æœºåˆ¶ã€‚</strong>ä¹‹å‰ä¸¤ä¸ªé—®é¢˜çš„ä¸€å¹¶è§£å†³ï¼Œå®£å‘Šç€ web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æµ´ç«é‡ç”Ÿï¼šæ»¡è¶³ PWA æ¨¡å‹çš„ web åº”ç”¨ï¼Œå°†é€æ¸æˆä¸ºç§»åŠ¨æ“ä½œç³»ç»Ÿçš„ä¸€ç­‰å…¬æ°‘ï¼Œå¹¶å°†å‘åŸç”Ÿåº”ç”¨å‘èµ·æŒ‘æˆ˜ä¸ã€Œå¤ä»‡ã€ã€‚</p>\n<p>æ›´ä»¤ç¬”è€…å…´å¥‹çš„æ˜¯ï¼Œå°±åœ¨ä»Šå¹´ 11 æœˆçš„ <a href=\"https://youtu.be/eI3B6x0fw9s\" title=\"Keynote (Chrome Dev Summit 2016)\" target=\"_blank\" rel=\"external\">Chrome Dev Summit 2016</a> ä¸Šï¼ŒChrome çš„å·¥ç¨‹ VP Darin Fisher ä»‹ç»äº† Chrome å›¢é˜Ÿæ­£åœ¨åšçš„ä¸€äº›å®éªŒï¼šæŠŠã€Œæ·»åŠ è‡³ä¸»å±ã€é‡å‘½åä¸ºã€Œå®‰è£…ã€ï¼Œè¢«å®‰è£…çš„ PWA ä¸å†ä»…ä»¥ widget çš„å½¢å¼æ˜¾ç¤ºåœ¨æ¡Œé¢ä¸Šï¼Œè€Œæ˜¯çœŸæ­£åšåˆ°ä¸æ‰€æœ‰åŸç”Ÿåº”ç”¨å¹³çº§ï¼Œä¸€æ ·è¢«æ”¶çº³è¿›åº”ç”¨æŠ½å±‰ï¼ˆApp Drawerï¼‰é‡Œï¼Œä¸€æ ·å‡ºç°åœ¨ç³»ç»Ÿè®¾ç½®ä¸­ ğŸ‰ğŸ‰ğŸ‰ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/flipkart-3.jpeg\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://twitter.com/adityapunjani\" target=\"_blank\" rel=\"external\">@adityapunjani</a></em></p>\n<p>å›¾ä¸­ä»å·¦åˆ°å³åˆ†åˆ«ä¸ºï¼šç±»ä¼¼åŸç”Ÿåº”ç”¨çš„å®‰è£…ç•Œé¢ï¼›è¢«æ”¶çº³åœ¨åº”ç”¨æŠ½å±‰é‡Œçš„ Flipkart Lite ä¸ Hux Blogï¼›è®¾ç½®ç•Œé¢ä¸­å¹¶åˆ—å‡ºç°çš„ Flipkart åŸç”Ÿåº”ç”¨ä¸ Flipkart Lite PWA ï¼ˆå¯ä»¥çœ‹åˆ° PWA å·¨å¤§çš„ä½“ç§¯ä¼˜åŠ¿ï¼‰</p>\n<p><strong>ç¬”è€…ç›¸ä¿¡ï¼ŒPWA æ¨¡å‹å°†ç»§çº¦ 20 å¹´å‰æ¨ªç©ºå‡ºä¸–çš„ Ajax ä¸çº¦ 10 å¹´å‰é£é¡ç§»åŠ¨äº’è”ç½‘çš„å“åº”å¼è®¾è®¡ä¹‹åï¼Œæ€èµ· web åº”ç”¨æ¨¡å‹çš„ç¬¬ä¸‰æ¬¡æ ¹æœ¬æ€§é©å‘½ï¼Œå°† web åº”ç”¨å¸¦è¿›ä¸€ä¸ªå…¨æ–°çš„æ—¶ä»£ã€‚</strong></p>\n<h2 id=\"PWA-å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\"><a href=\"#PWA-å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\" class=\"headerlink\" title=\"PWA å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ\"></a>PWA å…³é”®æŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ</h2><h3 id=\"Web-App-Manifest\"><a href=\"#Web-App-Manifest\" class=\"headerlink\" title=\"Web App Manifest\"></a><a href=\"https://w3c.github.io/manifest/#use-cases-and-requirements\" title=\"Web App Manifest\" target=\"_blank\" rel=\"external\">Web App Manifest</a></h3><p>Web App Manifestï¼Œå³é€šè¿‡ä¸€ä¸ªæ¸…å•æ–‡ä»¶å‘æµè§ˆå™¨æš´éœ² web åº”ç”¨çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åå­—ã€icon çš„ URL ç­‰ï¼Œä»¥å¤‡æµè§ˆå™¨ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ·»åŠ è‡³ä¸»å±æˆ–æ¨é€é€šçŸ¥æ—¶æš´éœ²ç»™æ“ä½œç³»ç»Ÿï¼Œä»è€Œå¢å¼º web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿçš„é›†æˆèƒ½åŠ›ã€‚</p>\n<p>è®© web åº”ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„ä½“éªŒæ›´æ¥è¿‘åŸç”Ÿåº”ç”¨çš„å°è¯•å…¶å®æ—©åœ¨ 2008 å¹´çš„ <a href=\"https://huangxuan.me/pwa-qcon2016/#/37\" title=\"PWA@QCon2016 #37\" target=\"_blank\" rel=\"external\">iOS 1.1.3 ä¸ iOS 2.1.0 </a>æ—¶å°±å¼€å§‹äº†ï¼Œå®ƒä»¬åˆ†åˆ«ä¸º web åº”ç”¨å¢åŠ äº†å¯¹è‡ªå®šä¹‰ icon å’Œå…¨å±æ‰“å¼€çš„æ”¯æŒã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/ios2-a2hs.gif\" alt=\"\"><br><em>å›¾ç‰‡æ¥æº: <a href=\"http://appleinsider.com/articles/08/10/03/latest_iphone_software_supports_full_screen_web_apps.html\" target=\"_blank\" rel=\"external\">appleinsider.com</a></em></p>\n<p>ä½†æ˜¯å¾ˆå¿«ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„ç§æœ‰å¹³å°é€šè¿‡ <code>&lt;meta&gt;</code>/<code>&lt;link&gt;</code> æ ‡ç­¾æ¥ä¸º web åº”ç”¨æ·»åŠ ã€Œç§è´§ã€ï¼Œ<code>&lt;head&gt;</code> å¾ˆå¿«å°±è¢«å¡æ»¡äº†ï¼š</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- Add to homescreen for Safari on iOS --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"apple-mobile-web-app-capable\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"yes\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"apple-mobile-web-app-status-bar-style\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"black\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"apple-mobile-web-app-title\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"Lighten\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Add to homescreen for Chrome on Android --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"mobile-web-app-capable\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"yes\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mate</span> <span class=\"attr\">name</span>=<span class=\"string\">\"theme-color\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"#000000\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Icons for iOS and Android Chrome M31~M38 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"144x144\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-144x144-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"114x114\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-114x114-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"72x72\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-72x72-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"apple-touch-icon-precomposed\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/apple-touch-icon-57x57-precomposed.png\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Icon for Android Chrome, recommended --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">sizes</span>=<span class=\"string\">\"196x196\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/touch-icon-196x196.png\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Tile icon for Win8 (144x144 + tile color) --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"msapplication-TileImage\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"images/touch/ms-touch-icon-144x144-precomposed.png\"</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"msapplication-TileColor\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"#3372DF\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">&lt;!-- Generic Icon --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"shortcut icon\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"images/touch/touch-icon-57x57.png\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>æ˜¾ç„¶ï¼Œè¿™ç§åšæ³•å¹¶ä¸ä¼˜é›…ï¼šåˆ†æ•£åˆé‡å¤çš„å…ƒæ•°æ®å®šä¹‰å¤šä½™ä¸”éš¾ä»¥ç»´æŒåŒæ­¥ï¼Œä¸ html è€¦åˆåœ¨ä¸€èµ·ä¹ŸåŠ é‡äº†æµè§ˆå™¨æ£€æŸ¥å…ƒæ•°æ®æœªæ¥å˜åŠ¨çš„æˆæœ¬ã€‚ä¸æ­¤åŒæ—¶ï¼Œç¤¾åŒºé‡Œå¼€å§‹å‡ºç°ä½¿ç”¨ manifest æ–‡ä»¶ä»¥ä¸­å¿ƒåŒ–åœ°æè¿°å…ƒæ•°æ®çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚ <a href=\"https://developer.chrome.com/extensions/manifest\" title=\"Chrome Apps Manifest\" target=\"_blank\" rel=\"external\">Chrome Extensionã€ Chrome Hosted Web Apps (2010)</a> ä¸ <a href=\"https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS/Manifest\" title=\"Firefox OS App Manifest\" target=\"_blank\" rel=\"external\">Firefox OS App Manifest (2011)</a> ä½¿ç”¨ JSONï¼›<a href=\"http://cordova.apache.org/docs/en/6.x/config_ref/index.html\" title=\"Config.xml - Apache Cordova\" target=\"_blank\" rel=\"external\">Cordova</a> ä¸ <a href=\"https://msdn.microsoft.com/en-us/library/dn320426%28v=vs.85%29.aspx\" title=\"Browser configuration schema reference - MSDN\" target=\"_blank\" rel=\"external\">Windows Pinned Site</a> ä½¿ç”¨ XMLï¼›</p>\n<p>2013 å¹´ï¼ŒW3C WebApps å·¥ä½œç»„å¼€å§‹å¯¹åŸºäº JSON çš„ Manifest è¿›è¡Œæ ‡å‡†åŒ–ï¼ŒäºåŒå¹´å¹´åº•å‘å¸ƒ<a href=\"https://www.w3.org/TR/2013/WD-appmanifest-20131217/\" title=\"Manifest for web apps and bookmarks - First Public Working Draft\" target=\"_blank\" rel=\"external\">ç¬¬ä¸€ä»½å…¬å¼€ Working Draft</a>ï¼Œå¹¶é€æ¸æ¼”åŒ–æˆä¸ºä»Šå¤©çš„ W3C Web App Manifestï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"attr\">\"short_name\"</span>: <span class=\"string\">\"Manifest Sample\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"Web Application Manifest Sample\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"icons\"</span>: [&#123;</div><div class=\"line\">      <span class=\"attr\">\"src\"</span>: <span class=\"string\">\"launcher-icon-2x.png\"</span>,</div><div class=\"line\">      <span class=\"attr\">\"sizes\"</span>: <span class=\"string\">\"96x96\"</span>,</div><div class=\"line\">      <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"image/png\"</span></div><div class=\"line\">   &#125;],</div><div class=\"line\">  <span class=\"attr\">\"scope\"</span>: <span class=\"string\">\"/sample/\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"start_url\"</span>: <span class=\"string\">\"/sample/index.html\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"display\"</span>: <span class=\"string\">\"standalone\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"orientation\"</span>: <span class=\"string\">\"landscape\"</span></div><div class=\"line\">  <span class=\"string\">\"theme_color\"</span>: <span class=\"string\">\"#000\"</span>,</div><div class=\"line\">  <span class=\"attr\">\"background_color\"</span>: <span class=\"string\">\"#fff\"</span>,</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">&lt;!-- document --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"manifest\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"/manifest.json\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>è¯¸å¦‚ <code>name</code>ã€<code>icons</code>ã€<code>display</code> éƒ½æ˜¯æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ–°å¢çš„æˆå‘˜åˆ™ä¸º web åº”ç”¨å¸¦æ¥äº†ä¸€ç³»åˆ—ä»¥å‰ web åº”ç”¨æƒ³åšå´åšä¸åˆ°ï¼ˆæˆ–åœ¨ä¹‹å‰åªèƒ½é  hackï¼‰çš„æ–°ç‰¹æ€§ï¼š</p>\n<ul>\n<li><code>scope</code>ï¼šå®šä¹‰äº† web åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–çš„ URL å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰ PWA é‡Œç»§ç»­æµè§ˆã€‚</li>\n<li><code>start_url</code>ï¼šå®šä¹‰äº†ä¸€ä¸ª PWA çš„å…¥å£é¡µé¢ã€‚æ¯”å¦‚è¯´ä½ æ·»åŠ  <a href=\"https://huangxuan.me\" title=\"Hux Blog\" target=\"_blank\" rel=\"external\">Hux Blog</a> çš„ä»»ä½•ä¸€ä¸ªæ–‡ç« åˆ°ä¸»å±ï¼Œä»ä¸»å±æ‰“å¼€æ—¶éƒ½ä¼šè®¿é—® <a href=\"https://huangxuan.me\" title=\"Hux Blog\" target=\"_blank\" rel=\"external\">Hux Blog</a> çš„ä¸»é¡µã€‚</li>\n<li><code>orientation</code>ï¼šç»ˆäºï¼Œæˆ‘ä»¬å¯ä»¥é”å®šå±å¹•æ—‹è½¬äº†ï¼ˆå–œæè€Œæ³£â€¦ï¼‰</li>\n<li><code>theme_color</code>/<code>background_color</code>ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ UI ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ Android çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰ã€‚</li>\n</ul>\n<p>è¿™ä¸ªæ¸…å•çš„æˆå‘˜è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ç”¨äºå£°æ˜ã€Œå¯¹åº”åŸç”Ÿåº”ç”¨ã€çš„ <code>related_applications</code> ç­‰ç­‰ï¼Œæœ¬æ–‡å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ä½œä¸º PWA çš„ã€Œæˆ·å£æœ¬ã€ï¼Œæ‰¿è½½ç€ web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›çš„é‡ä»»ï¼ŒWeb App Manifest è¿˜å°†åœ¨æ—¥åä¸æ–­æ‰©å±•ï¼Œä»¥æ»¡è¶³ web åº”ç”¨é«˜é€Ÿæ¼”åŒ–çš„éœ€è¦ã€‚</p>\n<h3 id=\"Service-Worker\"><a href=\"#Service-Worker\" class=\"headerlink\" title=\"Service Worker\"></a><a href=\"https://w3c.github.io/ServiceWorker/\" title=\"Service Worker\" target=\"_blank\" rel=\"external\">Service Worker</a></h3><p>æˆ‘ä»¬åŸæœ‰çš„æ•´ä¸ª Web åº”ç”¨æ¨¡å‹ï¼Œéƒ½æ˜¯æ„å»ºåœ¨ã€Œç”¨æˆ·èƒ½ä¸Šç½‘ã€çš„å‰æä¹‹ä¸‹çš„ï¼Œæ‰€ä»¥ä¸€ç¦»çº¿å°±åªèƒ½ç©å°æé¾™äº†ã€‚å…¶å®ï¼Œå¯¹äºã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€è¿™ä»¶äº‹ï¼ŒService Worker è‡³å°‘æ˜¯ web ç¤¾åŒºçš„ç¬¬ä¸‰æ¬¡å°è¯•äº†ã€‚</p>\n<p>æ•…äº‹å¯ä»¥è¿½æº¯åˆ° 2007 å¹´çš„ <a href=\"https://en.wikipedia.org/wiki/Google_Gears\" title=\"Gears - Wikipedia\" target=\"_blank\" rel=\"external\">Google Gears</a>ï¼šä¸ºäº†è®©è‡ªå®¶çš„ Gmailã€Youtubeã€Google Reader ç­‰ web åº”ç”¨å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®ä¸ç¦»çº¿æ‰§è¡Œï¼ŒGoogle å¼€å‘äº†ä¸€ä¸ªæµè§ˆå™¨æ‹“å±•æ¥å¢å¼º web åº”ç”¨ã€‚Google Gears æ”¯æŒ IE 6ã€Safari 3ã€Firefox 1.5 ç­‰æµè§ˆå™¨ï¼›è¦çŸ¥é“ï¼Œé‚£ä¸€å¹´ Chrome éƒ½è¿˜æ²¡å‡ºç”Ÿå‘¢ã€‚</p>\n<p>åœ¨ Gears API ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å‘ LocalServer æ¨¡å—æäº¤ä¸€ä¸ªç¼“å­˜æ–‡ä»¶æ¸…å•æ¥å®ç°ç¦»çº¿æ”¯æŒï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Somewhere in your javascript</span></div><div class=\"line\"><span class=\"keyword\">var</span> localServer = google.gears.factory.create(<span class=\"string\">\"bata.localserver\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> store = localServer.createManagedStore(STORE_NAME);</div><div class=\"line\">store.manifestUrl = <span class=\"string\">\"manifest.json\"</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">// manifest.json - å‡è®¾ JSON æœ‰æ³¨é‡Š</div><div class=\"line\">&#123;</div><div class=\"line\">ã€€ã€€\"betaManifestVersion\":ã€€1,</div><div class=\"line\">ã€€ã€€\"version\": ã€€\"1.0\",</div><div class=\"line\">ã€€ã€€\"entries\":ã€€[ã€€</div><div class=\"line\">ã€€ã€€ã€€ã€€&#123;ã€€\"url\": ã€€\"index.html\"&#125;,</div><div class=\"line\">ã€€ã€€ã€€ã€€&#123;ã€€\"url\": ã€€\"main.js\"&#125;</div><div class=\"line\">ã€€ã€€]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æ˜¯ä¸æ˜¯æ„Ÿåˆ°å¾ˆç†Ÿæ‚‰ï¼Ÿå¥½åƒ <a href=\"https://www.w3.org/TR/2011/WD-html5-20110525/offline.html\" title=\"HTML5 5.6 Offline Web Applications\" target=\"_blank\" rel=\"external\">HTML5 è§„èŒƒ</a>ä¸­çš„ Application Cache ä¹Ÿæ˜¯ç±»ä¼¼çš„ä¸œè¥¿ï¼Ÿ</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">manifest</span>=<span class=\"string\">\"cache.appcache\"</span>&gt;</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">CACHE</span> <span class=\"selector-tag\">MANIFEST</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">CACHE</span>:</div><div class=\"line\"><span class=\"selector-tag\">index</span><span class=\"selector-class\">.html</span></div><div class=\"line\"><span class=\"selector-tag\">main</span><span class=\"selector-class\">.js</span></div></pre></td></tr></table></figure>\n<p>æ˜¯çš„ï¼ŒGears çš„ LocalServer å°±æ˜¯åæ¥å¤§å®¶æ‰€ç†ŸçŸ¥çš„ App Cache çš„å‰èº«ï¼Œå¤§çº¦ä» <a href=\"https://www.w3.org/TR/offline-webapps/\" title=\"Offline Web Applications\" target=\"_blank\" rel=\"external\">2008</a> å¹´å¼€å§‹ W3C å°±å¼€å§‹å°è¯•å°† Gears è¿›è¡Œæ ‡å‡†åŒ–äº†ï¼›é™¤äº† LocalServerï¼ŒGears ä¸­ç”¨äºæä¾›å¹¶è¡Œè®¡ç®—èƒ½åŠ›çš„ WorkerPool æ¨¡å—ä¸ç”¨äºæä¾›æœ¬åœ°æ•°æ®åº“ä¸ SQL æ”¯æŒçš„ Database æ¨¡å—ä¹Ÿåˆ†åˆ«æ˜¯æ—¥å Web Worker ä¸ Web SQL Databaseï¼ˆåè¢«åºŸå¼ƒï¼‰çš„å‰èº«ã€‚</p>\n<p>HTML5 App Cache ä½œä¸ºç¬¬äºŒæ³¢ã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€çš„å°è¯•ï¼Œç¡®å®ä¹ŸæœåŠ¡äº†æ¯”å¦‚ Google Docã€å°¤é›¨æºªæ—©å¹´ä½œå“ HTML5 Clearã€ä»¥åŠä¸€ç›´ç”¨ web åº”ç”¨ä½œä¸ºè‡ªå·± iOS åº”ç”¨çš„ FT.comï¼ˆFinancial Timesï¼‰ç­‰ä¸å°‘ web åº”ç”¨ã€‚é‚£ä¹ˆï¼Œè¿˜æœ‰ Service Worker ä»€ä¹ˆäº‹å‘¢ï¼Ÿ  </p>\n<p>æ˜¯å•Šï¼Œå¦‚æœ App Cache æ²¡æœ‰è¢«è®¾è®¡å¾—<a href=\"https://huangxuan.me/sw-101-gdgdf/#/12\" title=\"SW-101@DevFest #12\" target=\"_blank\" rel=\"external\">çƒ‚åˆ°å®Œå…¨ä¸å¯ç¼–ç¨‹ã€æ— æ³•æ¸…ç†ç¼“å­˜ã€å‡ ä¹æ²¡æœ‰è·¯ç”±æœºåˆ¶ã€å‡ºäº† Bug ä¸€ç‚¹æ•‘éƒ½æ²¡æœ‰</a>ï¼Œå¯èƒ½å°±çœŸæ²¡ Service Worker ä»€ä¹ˆäº‹äº†ã€‚<a href=\"https://huangxuan.me/sw-101-gdgdf/#/13\" title=\"SW-101@DevFest #13\" target=\"_blank\" rel=\"external\">App Cache å·²ç»åœ¨å‰ä¸ä¹…å®šç¨¿çš„ HTML5.1 ä¸­è¢«æ‹¿æ‰äº†ï¼ŒW3C ä¸ºäº†æŒ½æ•‘ web ä¸–ç•ŒçœŸæ˜¯ä¸æƒœæŠŠè‡ªå·±çš„è„¸éƒ½æ‰“è‚¿äº†â€¦â€¦</a></p>\n<p>æ—¶è‡³ä»Šæ—¥ï¼Œæˆ‘ä»¬ç»ˆäºè¿æ¥äº† Service Worker çš„æ›™å…‰ã€‚ç®€å•æ¥è¯´ï¼ŒService Worker æ˜¯ä¸€ä¸ªå¯ç¼–ç¨‹çš„ Web Workerï¼Œå®ƒå°±åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä»¥æ‹¦æˆªã€å¤„ç†ã€å“åº”æµç»çš„ HTTP è¯·æ±‚ï¼›é…åˆéšä¹‹å¼•å…¥ Cache Storage APIï¼Œä½ å¯ä»¥è‡ªç”±ç®¡ç† HTTP è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜ï¼Œè¿™ä½¿å¾— Service Worker å¯ä»¥ä»ç¼“å­˜ä¸­å‘ web åº”ç”¨æä¾›èµ„æºï¼Œå³ä½¿æ˜¯åœ¨ç¦»çº¿çš„ç¯å¢ƒä¸‹ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/sw-sw.png\" alt=\"\"><br><em>Service Worker å°±åƒä¸€ä¸ªè¿è¡Œåœ¨å®¢æˆ·ç«¯çš„ä»£ç†</em></p>\n<p>æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ç½‘é¡µ <code>foo.html</code> æ³¨å†Œè¿™ä¹ˆä¸€ä¸ª Service Workerï¼Œå®ƒå°†åŠ«æŒç”± <code>foo.html</code> å‘èµ·çš„ä¸€åˆ‡ HTTP è¯·æ±‚ï¼Œå¹¶ç»Ÿç»Ÿè¿”å›æœªè®¾ç½® <code>Content-Type</code> çš„ <code>Hello World!</code>ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// sw.js</span></div><div class=\"line\">self.onfetch = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</div><div class=\"line\">  e.respondWith(<span class=\"keyword\">new</span> Response(<span class=\"string\">'Hello World!'</span>))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Service Worker ç¬¬ä¸€æ¬¡å‘å¸ƒäº 2014 å¹´çš„ Google IO ä¸Šï¼Œç›®å‰å·²å¤„äº W3C å·¥ä½œè‰æ¡ˆçš„çŠ¶æ€ã€‚å…¶è®¾è®¡å¸å–äº† Application Cache çš„å¤±è´¥ç»éªŒï¼Œä½œä¸º web åº”ç”¨çš„å¼€å‘è€…çš„ä½ æœ‰ç€å®Œå…¨çš„æ§åˆ¶èƒ½åŠ›ï¼›åŒæ—¶ï¼Œå®ƒè¿˜å€Ÿé‰´äº† Chrome å¤šå¹´æ¥åœ¨ Chrome Extension ä¸Šçš„è®¾è®¡ç»éªŒï¼ˆChrome Background Pages ä¸ Chrome Event Pagesï¼‰ï¼Œé‡‡ç”¨äº†åŸºäºã€Œäº‹ä»¶é©±åŠ¨ã€çš„å”¤é†’æœºåˆ¶ï¼Œä»¥å¤§å¹…èŠ‚çœåå°è®¡ç®—çš„èƒ½è€—ã€‚æ¯”å¦‚ä¸Šé¢çš„ <code>fetch</code> å…¶å®å°±æ˜¯ä¼šå”¤é†’ Service Worker çš„äº‹ä»¶ä¹‹ä¸€ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/sw-lifecycle.png\" alt=\"\"><br><em>Service Worker çš„ç”Ÿå‘½å‘¨æœŸ</em></p>\n<p>é™¤äº†ç±»ä¼¼ <code>fetch</code> è¿™æ ·çš„åŠŸèƒ½äº‹ä»¶å¤–ï¼ŒService Worker è¿˜æä¾›äº†ä¸€ç»„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ŒåŒ…æ‹¬å®‰è£…ã€æ¿€æ´»ç­‰ç­‰ã€‚æ¯”å¦‚ï¼Œåœ¨ Service Worker çš„ã€Œå®‰è£…ã€äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ web åº”ç”¨æ‰€éœ€è¦çš„èµ„æºç»Ÿç»Ÿé¢„å…ˆä¸‹è½½å¹¶ç¼“å­˜åˆ° Cache Storage ä¸­å»ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// sw.js</span></div><div class=\"line\">self.oninstall = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</div><div class=\"line\">  e.waitUntil(</div><div class=\"line\">    caches.open(<span class=\"string\">'installation'</span>)</div><div class=\"line\">      .then(<span class=\"function\"><span class=\"params\">cache</span> =&gt;</span>  cache.addAll([</div><div class=\"line\">        <span class=\"string\">'./'</span>,</div><div class=\"line\">        <span class=\"string\">'./styles.css'</span>,</div><div class=\"line\">        <span class=\"string\">'./script.js'</span></div><div class=\"line\">      ]))</div><div class=\"line\">  )</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>è¿™æ ·ï¼Œå½“ç”¨æˆ·ç¦»çº¿ï¼Œç½‘ç»œæ— æ³•è®¿é—®æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ç¼“å­˜ä¸­å¯åŠ¨æˆ‘ä»¬çš„ web åº”ç”¨ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//sw.js</span></div><div class=\"line\">self.onfetch = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">const</span> fetched = fetch(e.request)</div><div class=\"line\">  <span class=\"keyword\">const</span> cached = caches.match(e.request)</div><div class=\"line\"></div><div class=\"line\">  e.respondWith(</div><div class=\"line\">    fetched.catch(<span class=\"function\"><span class=\"params\">_</span> =&gt;</span> cached)</div><div class=\"line\">  )</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹å‡ºï¼ŒService Worker è¢«è®¾è®¡ä¸ºä¸€ä¸ªç›¸å¯¹åº•å±‚ï¼ˆlow-levelï¼‰ã€é«˜åº¦å¯ç¼–ç¨‹ã€å­æ¦‚å¿µä¼—å¤šï¼Œä¹Ÿå› æ­¤å¼‚å¸¸çµæ´»ä¸”å¼ºå¤§çš„ APIï¼Œæ•…æœ¬æ–‡åªèƒ½å±•ç¤ºå®ƒçš„å†°å±±ä¸€è§’ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ³¨å†Œ Service Worker è¦æ±‚ä½ çš„ web åº”ç”¨éƒ¨ç½²äº HTTPS åè®®ä¸‹ï¼Œä»¥å…åˆ©ç”¨ Service Worker çš„ä¸­é—´äººæ”»å‡»ã€‚ç¬”è€…åœ¨ä»Šå¹´ GDG åŒ—äº¬çš„ DevFest ä¸Šåˆ†äº«äº† <a href=\"https://huangxuan.me/2016/11/20/sw-101-gdgdf/\" target=\"_blank\" rel=\"external\">Service Worker 101</a>ï¼Œæ¶µç›–äº† Service Worker è­¬å¦‚ã€Œç½‘ç»œä¼˜å…ˆã€ã€ã€Œç¼“å­˜ä¼˜å…ˆã€ã€ã€Œç½‘ç»œä¸ç¼“å­˜æ¯”èµ›ã€è¿™äº›æ›´å¤æ‚çš„ç¼“å­˜ç­–ç•¥ã€å­¦ä¹ èµ„æ–™ã€ä»¥åŠ<a href=\"https://github.com/Huxpro/sw-101-gdgdf\" target=\"_blank\" rel=\"external\">ç¤ºä¾‹ä»£ç </a>ï¼Œå¯ä»¥ä¾›å¤§å®¶å‚è€ƒã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/sw-race.png\" alt=\"\"><br><em>Service Worker çš„ä¸€ç§ç¼“å­˜ç­–ç•¥ï¼šè®©ç½‘ç»œè¯·æ±‚ä¸è¯»å–ç¼“å­˜æ¯”èµ›</em></p>\n<p>ä½ ä¹Ÿå¯ä»¥å°è¯•åœ¨æ”¯æŒ PWA çš„æµè§ˆå™¨ä¸­è®¿é—®ç¬”è€…çš„åšå®¢ <a href=\"https://huangxuan.me\" title=\"Hux Blog\" target=\"_blank\" rel=\"external\">Hux Blog</a>ï¼Œæ„Ÿå— Service Worker çš„å®é™…æ•ˆæœï¼šæ‰€æœ‰è®¿é—®è¿‡çš„é¡µé¢éƒ½ä¼šè¢«ç¼“å­˜å¹¶å…è®¸åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ç»§ç»­è®¿é—®ï¼Œæ‰€æœ‰æœªè®¿é—®è¿‡çš„é¡µé¢åˆ™ä¼šåœ¨ç¦»çº¿ç¯å¢ƒä¸‹å±•ç¤ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç¦»çº¿é¡µé¢ã€‚</p>\n<p>åœ¨ç¬”è€…çœ‹æ¥ï¼Œ<strong>Service Worker å¯¹ PWA çš„é‡è¦æ€§ç›¸å½“äº <code>XMLHTTPRequest</code> ä¹‹äº Ajaxï¼Œåª’ä½“æŸ¥è¯¢ï¼ˆMedia Queryï¼‰ä¹‹äºå“åº”å¼è®¾è®¡ï¼Œæ˜¯æ”¯æ’‘ PWA ä½œä¸ºã€Œä¸‹ä¸€ä»£ web åº”ç”¨æ¨¡å‹ã€çš„æœ€æ ¸å¿ƒæŠ€æœ¯ã€‚</strong>ç”±äº Service Worker å¯ä»¥ä¸åŒ…æ‹¬ Indexed DBã€Streams åœ¨å†…çš„å¤§éƒ¨åˆ† DOM æ— å…³ API è¿›è¡Œäº¤äº’ï¼Œå®ƒçš„æ½œåŠ›ç®€ç›´æ— å¯é™é‡ã€‚ç¬”è€…å‡ ä¹å¯ä»¥æ–­è¨€ï¼ŒService Worker å°†åœ¨æœªæ¥åå¹´é‡Œæˆä¸º web å®¢æˆ·ç«¯æŠ€æœ¯å·¥ç¨‹åŒ–çš„å…µå®¶å¿…äº‰ä¹‹åœ°ï¼Œå¸¦æ¥ã€Œç¦»çº¿ä¼˜å…ˆï¼ˆOffline-firstï¼‰ã€çš„æ¶æ„é©å‘½ã€‚</p>\n<h3 id=\"Push-Notification\"><a href=\"#Push-Notification\" class=\"headerlink\" title=\"Push Notification\"></a>Push Notification</h3><p>PWA æ¨é€é€šçŸ¥ä¸­çš„ã€Œæ¨é€ã€ä¸ã€Œé€šçŸ¥ã€ï¼Œå…¶å®ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒä½†åˆç›¸å¾—ç›Šå½°çš„ APIï¼š</p>\n<p><a href=\"https://notifications.spec.whatwg.org/\" title=\"Notification API\" target=\"_blank\" rel=\"external\">Notification API</a> ç›¸ä¿¡å¤§å®¶å¹¶ä¸é™Œç”Ÿï¼Œå®ƒè´Ÿè´£æ‰€æœ‰ä¸é€šçŸ¥æœ¬èº«ç›¸å…³çš„æœºåˆ¶ï¼Œæ¯”å¦‚é€šçŸ¥çš„æƒé™ç®¡ç†ã€å‘æ“ä½œç³»ç»Ÿå‘èµ·é€šçŸ¥ã€é€šçŸ¥çš„ç±»å‹ä¸éŸ³æ•ˆï¼Œä»¥åŠæä¾›é€šçŸ¥è¢«ç‚¹å‡»æˆ–å…³é—­æ—¶çš„å›è°ƒç­‰ç­‰ï¼Œç›®å‰å›½å†…å¤–çš„å„å¤§ç½‘ç«™ï¼ˆå°¤å…¶åœ¨æ¡Œé¢ç«¯ï¼‰éƒ½æœ‰ä¸€å®šçš„ä½¿ç”¨ã€‚Notification API æœ€æ—©åº”è¯¥æ˜¯åœ¨ <a href=\"https://www.html5rocks.com/en/tutorials/notifications/quick/\" title=\"Using the Notification API\" target=\"_blank\" rel=\"external\">2010</a> å¹´å‰åç”± Chromium æå‡º<a href=\"http://www.chromium.org/developers/design-documents/desktop-notifications/api-specification\" title=\"API Specification - The Chromium Projects\" target=\"_blank\" rel=\"external\">è‰æ¡ˆ</a>ä»¥ <code>webkitNotifications</code> å‰ç¼€æ–¹å¼å®ç°ï¼›éšç€ 2011 å¹´è¿›å…¥æ ‡å‡†åŒ–ï¼›2012 å¹´åœ¨ Safari 6ï¼ˆMac OSX 10.8+ï¼‰ä¸Šè·å¾—æ”¯æŒï¼›2015 å¹´ Notification API æˆä¸º <a href=\"https://www.w3.org/TR/notifications/\" title=\"Web Notifications - W3C\" target=\"_blank\" rel=\"external\">W3C Recommendation</a>ï¼›2016 å¹´ <a href=\"https://blogs.windows.com/msedgedev/2016/05/16/web-notifications-microsoft-edge/#2VBm890EjvAvUcgE.97\" target=\"_blank\" rel=\"external\">Edge çš„æ”¯æŒ</a>ï¼›Web Notifications å·²ç»åœ¨æ¡Œé¢æµè§ˆå™¨ä¸­è·å¾—äº†å…¨é¢æ”¯æŒï¼ˆChromeã€Edgeã€Firefoxã€Operaã€Safariï¼‰çš„æˆå°±ã€‚</p>\n<p><a href=\"http://w3c.github.io/push-api/\" title=\"Push API\" target=\"_blank\" rel=\"external\">Push API</a> çš„å‡ºç°åˆ™è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘ web åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›ï¼Œå®ƒå®šä¹‰äº† web åº”ç”¨å¦‚ä½•å‘æ¨é€æœåŠ¡å‘èµ·è®¢é˜…ã€å¦‚ä½•å“åº”æ¨é€æ¶ˆæ¯ï¼Œä»¥åŠ web åº”ç”¨ã€åº”ç”¨æœåŠ¡å™¨ä¸æ¨é€æœåŠ¡ä¹‹é—´çš„é‰´æƒä¸åŠ å¯†æœºåˆ¶ï¼›ç”±äº Push API å¹¶ä¸ä¾èµ– web åº”ç”¨ä¸æµè§ˆå™¨ UI å­˜æ´»ï¼Œæ‰€ä»¥å³ä½¿æ˜¯åœ¨ web åº”ç”¨ä¸æµè§ˆå™¨æœªè¢«ç”¨æˆ·æ‰“å¼€çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åå°è¿›ç¨‹æ¥å—æ¨é€æ¶ˆæ¯å¹¶è°ƒç”¨ Notification API å‘ç”¨æˆ·å‘å‡ºé€šçŸ¥ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒMac OSX 10.9 Mavericks ä¸ Safari 7 åœ¨ 2013 å¹´å°±å‘å¸ƒäº†è‡ªå·±çš„ç§æœ‰æ¨é€æ”¯æŒï¼ŒåŸºäº APNS çš„ <a href=\"https://developer.apple.com/notifications/safari-push-notifications/\" title=\"Safari Push Notifications\" target=\"_blank\" rel=\"external\">Safari Push Notifications</a>ã€‚</p>\n<p>åœ¨ PWA ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ Service Worker çš„åå°è®¡ç®—èƒ½åŠ›ç»“åˆ Push API å¯¹æ¨é€äº‹ä»¶è¿›è¡Œå“åº”ï¼Œå¹¶é€šè¿‡ Notification API å®ç°é€šçŸ¥çš„å‘å‡ºä¸å¤„ç†ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// sw.js</span></div><div class=\"line\">self.addEventListener(<span class=\"string\">'push'</span>, event =&gt; &#123;</div><div class=\"line\">  event.waitUntil(</div><div class=\"line\">    <span class=\"comment\">// Process the event and display a notification.</span></div><div class=\"line\">    self.registration.showNotification(<span class=\"string\">\"Hey!\"</span>)</div><div class=\"line\">  );</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">self.addEventListener(<span class=\"string\">'notificationclick'</span>, event =&gt; &#123;  </div><div class=\"line\">  <span class=\"comment\">// Do something with the event  </span></div><div class=\"line\">  event.notification.close();  </div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">self.addEventListener(<span class=\"string\">'notificationclose'</span>, event =&gt; &#123;  </div><div class=\"line\">  <span class=\"comment\">// Do something with the event  </span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>å¯¹äº Push Notificationï¼Œç¬”è€…çš„å‡ æ¬¡åˆ†äº«ä¸­ä¸€ç›´éƒ½æçš„ç¨å¾®å°‘ä¸€äº›ï¼Œä¸€æ˜¯å› ä¸º Push API è¿˜å¤„äº Editor Draft çš„çŠ¶æ€ï¼ŒäºŒæ˜¯ç›®å‰æµè§ˆå™¨ä¸æ¨é€æœåŠ¡é—´çš„åè®®æ”¯æŒè¿˜ä¸å¤Ÿæˆç†Ÿï¼šChromeï¼ˆä¸å…¶å®ƒåŸºäº Blink çš„æµè§ˆå™¨ï¼‰åœ¨ Chromium 52 ä¹‹å‰åªæ”¯æŒåŸºäº Google ç§æœ‰çš„ GCM/FCM æœåŠ¡è¿›è¡Œé€šçŸ¥æ¨é€ã€‚ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œç»§ Firefox 44 ä¹‹åï¼ŒChrome 52 ä¸ Opera 39 ä¹Ÿç´§è¿½å…¶åå®ç°äº†æ­£åœ¨ç”± IETF è¿›è¡Œæ ‡å‡†åŒ–çš„ <a href=\"https://tools.ietf.org/html/draft-ietf-webpush-protocol-12\" title=\"Web Push Protocol\" target=\"_blank\" rel=\"external\">Web æ¨é€åè®®ï¼ˆWeb Push Protocolï¼‰</a>ã€‚</p>\n<p>å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ Google çš„äº‘æœåŠ¡ï¼ˆæ¯”å¦‚ Firebaseï¼‰ï¼Œå¹¶ä¸”ä¸»è¦é¢å‘çš„æ˜¯æµ·å¤–ç”¨æˆ·ï¼Œé‚£ä¹ˆåœ¨ web åº”ç”¨ä¸Šæ”¯æŒåŸºäº GCM/FCM çš„æ¨é€é€šçŸ¥å¹¶ä¸æ˜¯ä¸€ä»¶è´¹åŠ›çš„äº‹æƒ…ï¼Œç¬”è€…æ¨èä½ é˜…è¯»ä¸€ä¸‹ Google Developers çš„<a href=\"https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/\" title=\"Web Push Notifications - Google Developer\" target=\"_blank\" rel=\"external\">ç³»åˆ—æ–‡ç« </a>ï¼Œå¾ˆå¤šå›½å¤–å…¬å¸å·²ç»ç©èµ·æ¥äº†ã€‚</p>\n<h2 id=\"ä»-Hybrid-åˆ°-PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\"><a href=\"#ä»-Hybrid-åˆ°-PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\" class=\"headerlink\" title=\"ä» Hybrid åˆ° PWAï¼Œä»å°é—­åˆ°å¼€æ”¾\"></a>ä» Hybrid åˆ° PWAï¼Œä»å°é—­åˆ°å¼€æ”¾</h2><p>2008 å¹´ï¼Œå½“ç§»åŠ¨æ—¶ä»£æ¥ä¸´ï¼Œ<a href=\"https://huangxuan.me/pwa-qcon2016/#/17\" title=\"PWA@QCon2016 #17\" target=\"_blank\" rel=\"external\">å”±è¡°ç§»åŠ¨ Web çš„å£°éŸ³</a>å¼€å§‹å‡ºç°ï¼Œè€Œæµè§ˆå™¨çš„è¿›åŒ–å¹¶ä¸èƒ½è·Ÿä¸Šæ—¶ï¼Œæ¥è‡ª Nitobi çš„ Brian Leroux ç­‰äººåˆ›é€ äº† <a href=\"https://cordova.apache.org/\" title=\"Apache Cordova\" target=\"_blank\" rel=\"external\">Phonegap</a>ï¼Œå¸Œæœ›å®ƒèƒ½ä»¥ Polyfill çš„å½¢å¼ã€å¼¥è¡¥ç›®å‰æµè§ˆå™¨ä¸ç§»åŠ¨è®¾å¤‡é—´çš„ã€Œé¸¿æ²Ÿã€ï¼Œä»æ­¤å¼€å¯äº†<a href=\"https://en.wikipedia.org/wiki/Progressive_web_app#Hybrid_Apps\" target=\"_blank\" rel=\"external\">æ··åˆåº”ç”¨ï¼ˆHybrid Appsï¼‰</a>çš„æ—¶ä»£ã€‚</p>\n<p>å‡ å¹´é—´ï¼Œ<a href=\"http://www.adobe.com/products/air.html\" title=\"Adobe AIR Application\" target=\"_blank\" rel=\"external\">Adobe AIR</a>ã€<a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx\" title=\"Windows Runtime JS API\" target=\"_blank\" rel=\"external\">Windows Runtime Apps</a>ã€<a href=\"https://developer.chrome.com/extensions/apps\" title=\"Chrome Packaged Apps\" target=\"_blank\" rel=\"external\">Chrome Apps</a>ã€<a href=\"https://developer.mozilla.org/en-US/docs/Archive/Firefox_OS/Firefox_OS_apps/Building_apps_for_Firefox_OS\" title=\"Firefox OS Packaged Apps\" target=\"_blank\" rel=\"external\">Firefox OS</a>ã€<a href=\"http://www.openwebosproject.org/\" title=\"Open webOS\" target=\"_blank\" rel=\"external\">WebOS</a>ã€<a href=\"https://cordova.apache.org/\" title=\"Apache Cordova\" target=\"_blank\" rel=\"external\">Cordova/Phonegap</a>ã€<a href=\"http://electron.atom.io/\" title=\"Electron\" target=\"_blank\" rel=\"external\">Electron</a> ä»¥åŠå›½å†…æ¯”å¦‚å¾®ä¿¡ã€æ·˜å®ï¼Œæ— æ•°çš„ Hybrid æ–¹æ¡ˆæ‹”åœ°è€Œèµ·ï¼Œè®© web å¼€å‘è€…å¯ä»¥åœ¨ç»§ç»­ä½¿ç”¨ web å®¢æˆ·ç«¯æŠ€æœ¯çš„åŒæ—¶ï¼Œåšåˆ°ä¸€äº›åªæœ‰åŸç”Ÿåº”ç”¨æ‰èƒ½åšåˆ°çš„äº‹æƒ…ï¼ŒåŒ…æ‹¬è®¿é—®ä¸€äº›è®¾å¤‡ä¸æ“ä½œç³»ç»Ÿ APIï¼Œç»™ç”¨æˆ·å¸¦æ¥æ›´åŠ  ã€ŒAppyã€ çš„ä½“éªŒï¼Œä»¥åŠè¿›å…¥ App Store ç­‰ç­‰ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/qcon-hybridzation.png\" alt=\"\"><br><em>ä¼—å¤šçš„ Hybrid æ–¹æ¡ˆ</em></p>\n<p>PWA ä½œä¸ºä¸€ä¸ªæ¶µç›–æ€§æœ¯è¯­ï¼Œä¸è¿‡å¾€çš„è¿™äº›æˆ–å¤šæˆ–å°‘é€šè¿‡ç§æœ‰å¹³å° API å¢å¼º web åº”ç”¨çš„å°è¯•æœ€å¤§çš„ä¸åŒï¼Œåœ¨äºæ„æˆ PWA çš„æ¯ä¸€é¡¹åŸºæœ¬æŠ€æœ¯ï¼Œéƒ½å·²ç»æˆ–æ­£åœ¨è¢« IETFã€ECMAã€W3C æˆ– WHATWG æ ‡å‡†åŒ–ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œå®ƒä»¬éƒ½å°†è¢«çº³å…¥å¼€æ”¾ web æ ‡å‡†ï¼Œå¹¶åœ¨ä¸è¿œçš„å°†æ¥å¾—åˆ°æ‰€æœ‰æµè§ˆå™¨ä¸å…¨å¹³å°çš„æ”¯æŒã€‚æˆ‘ä»¬ç»ˆäºå¯ä»¥é€ƒå‡º App Store å°é—­çš„ç§˜å¯†èŠ±å›­ï¼Œé‡æ–°å›åˆ°å±äº web çš„é‚£ç‰‡å¼€æ”¾è‡ªç”±çš„å¤§åœ°ã€‚</p>\n<p>æœ‰è¶£çš„æ˜¯ï¼Œä»ä¸Šæ–‡ä¸­ä½ ä¹Ÿå¯ä»¥å‘ç°ï¼Œç»„æˆ PWA çš„å„é¡¹æŠ€æœ¯çš„è‰æ¡ˆæ­£æ˜¯ç”±ä¸Šè¿°å„ç§ç§æœ‰æ–¹æ¡ˆèƒŒåçš„æµè§ˆå™¨å‚å•†æˆ–å¼€å‘è€…ç›´æ¥è´¡çŒ®æˆ–é—´æ¥å½±å“çš„ã€‚å¯ä»¥è¯´ï¼ŒPWA çš„èƒŒåå¹¶ä¸æ˜¯æŸä¸€å®¶æˆ–ä¸¤å®¶å…¬å¸ï¼Œè€Œæ˜¯æ•´ä¸ª web ç¤¾åŒºä¸æ•´ä¸ª web è§„èŒƒã€‚<strong>æ­£æ˜¯å› ä¸ºè¿™ç§å¼€æ”¾ä¸å»ä¸­å¿ƒåŒ–çš„åŠ›é‡ï¼Œä½¿å¾—ä¸‡ç»´ç½‘ï¼ˆWorld Wide Webï¼‰èƒ½å¤Ÿæˆä¸ºå½“ä»Šä¸–ç•Œä¸Šè·¨å¹³å°èƒ½åŠ›æœ€å¼ºã€ä¸”å‡ ä¹æ˜¯å”¯ä¸€ä¸€ä¸ªå…·å¤‡è¿™ç§è·¨å¹³å°èƒ½åŠ›çš„åº”ç”¨å¹³å°ã€‚</strong></p>\n<p><a href=\"http://phonegap.com/blog/2012/05/09/phonegap-beliefs-goals-and-philosophy/\" title=\"PhoneGap Beliefs, Goals, and Philosophy\" target=\"_blank\" rel=\"external\">ã€Œæˆ‘ä»¬ç›¸ä¿¡ Webï¼Œæ˜¯å› ä¸ºç›¸ä¿¡å®ƒæ˜¯è§£å†³è®¾å¤‡å·®å¼‚åŒ–çš„ç»ˆææ–¹æ¡ˆï¼›æˆ‘ä»¬ç›¸ä¿¡ï¼Œå½“ Web åœ¨ä»Šå¤©åšä¸åˆ°ä¸€ä»¶äº‹çš„æ—¶å€™ï¼Œæ˜¯å› ä¸ºå®ƒè¿˜æ²¡æ¥å¾—åŠå»å®ç°ï¼Œè€Œä¸æ˜¯å› ä¸ºä»–åšä¸åˆ°ã€‚è€Œ Phonegapï¼Œå®ƒçš„ç»ˆæç›®çš„å°±æ˜¯æ¶ˆå¤±åœ¨ Web æ ‡å‡†çš„èƒŒåã€‚ã€</a></p>\n<p>åœ¨ä¸ä¸¢å¤± web çš„å¼€æ”¾çµé­‚ï¼Œåœ¨ä¸éœ€è¦ä¾é  Hybrid æŠŠåº”ç”¨æ”¾åœ¨ App Store çš„å‰æä¸‹ï¼Œè®© web åº”ç”¨èƒ½å¤Ÿæ¸è¿›å¼åœ°è·³è„±å‡ºæµè§ˆå™¨çš„æ ‡ç­¾ï¼Œå˜æˆç”¨æˆ·çœ¼ä¸­çš„ Appã€‚è¿™æ˜¯ Alex Russell åœ¨ 2015 å¹´æå‡º PWA æ¦‚å¿µçš„<a href=\"https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/\" title=\"Progressive Web Apps: Escaping Tabs Without Losing Our Soul\" target=\"_blank\" rel=\"external\">åŸå§”</a>ã€‚</p>\n<p>è€Œåˆæ­£å› ä¸º web æ˜¯ä¸€ä¸ªæ•´ä½“ï¼ŒPWA å¯ä»¥åˆ©ç”¨çš„æŠ€æœ¯è¿œä¸æ­¢ä¸Šè¿°çš„å‡ ä¸ªè€Œå·²ï¼šAjaxã€å“åº”å¼è®¾è®¡ã€JavaScript æ¡†æ¶ã€ECMAScript Nextã€CSS Nextã€Houdiniã€Indexed DBã€Device APIsã€Web Bluetoothã€Web Socketã€Web Paymentã€<a href=\"https://wicg.github.io/BackgroundSync/spec/\" title=\"Web Background Synchronization - WICG\" target=\"_blank\" rel=\"external\">å­µåŒ–</a>ä¸­çš„ <a href=\"developers.google.com/web/updates/2015/12/background-sync\" title=\"Background Sync - Google Developers\">Background Sync API</a>ã€<a href=\"https://streams.spec.whatwg.org/\" title=\"Streams\" target=\"_blank\" rel=\"external\">Streams</a>ã€WebVRâ€¦â€¦å¼€æ”¾ Web ä¸–ç•Œ 27 å¹´æ¥çš„å‘å±•ä»¥åŠæœªæ¥çš„ä¸€åˆ‡ï¼Œéƒ½ä¸ PWA å¤©ä½œä¹‹åˆã€‚</p>\n<h2 id=\"é±¼ä¸ç†ŠæŒçš„å…¼å¾—\"><a href=\"#é±¼ä¸ç†ŠæŒçš„å…¼å¾—\" class=\"headerlink\" title=\"é±¼ä¸ç†ŠæŒçš„å…¼å¾—\"></a>é±¼ä¸ç†ŠæŒçš„å…¼å¾—</h2><p>ç»è¿‡å‡ å¹´æ¥çš„æ‘¸ç´¢ï¼Œæ•´ä¸ªäº’è”ç½‘è¡Œä¸šä»¿ä½›åœ¨ã€ŒWeb åº”ç”¨ vs. åŸç”Ÿåº”ç”¨ã€è¿™ä¸ªé—®é¢˜ä¸Šè¾¾æˆäº†å…±è¯†ï¼š</p>\n<ul>\n<li>web åº”ç”¨æ˜¯é±¼ï¼šè¿­ä»£å¿«ï¼Œè·å–ç”¨æˆ·æˆæœ¬ä½ï¼›è·¨å¹³å°å¼ºä½“éªŒå¼±ï¼Œå¼€å‘æˆæœ¬ä½ã€‚<strong>é€‚åˆæ‹‰æ–°</strong>ã€‚</li>\n<li>åŸç”Ÿåº”ç”¨æ˜¯ç†ŠæŒï¼šè¿­ä»£æ…¢ï¼Œè·å–ç”¨æˆ·æˆæœ¬é«˜ï¼›è·¨å¹³å°å¼±ä½“éªŒå¼ºï¼Œå¼€å‘æˆæœ¬é«˜ã€‚<strong>é€‚åˆä¿æ´»</strong>ã€‚</li>\n</ul>\n<p>è¦çŸ¥é“ï¼Œè™½ç„¶ç”¨æˆ·èŠ±åœ¨åŸç”Ÿåº”ç”¨ä¸Šçš„æ—¶é—´è¦æ˜æ˜¾å¤šäº web åº”ç”¨ï¼Œä½†å…¶ä¸­<a href=\"http://marketingland.com/report-mobile-users-spend-80-percent-time-just-five-apps-116858\" title=\"Report: Mobile Users Spend 80 Percent Of Time In Just Five Apps\" target=\"_blank\" rel=\"external\">æœ‰ 80% çš„æ—¶é—´æ˜¯èŠ±åœ¨å‰äº”ä¸ªåº”ç”¨ä¸­çš„</a>ã€‚<a href=\"http://www.recode.net/2016/9/16/12933780/average-app-downloads-per-month-comscore\" title=\"Half of U.S. smartphone users download zero apps per month\" target=\"_blank\" rel=\"external\">è°ƒæŸ¥æ˜¾ç¤ºï¼Œç¾å›½æœ‰ä¸€åŠçš„æ™ºèƒ½æ‰‹æœºç”¨æˆ·å¹³å‡æ¯æœˆæ–° App å®‰è£…é‡ä¸ºé›¶</a>ï¼Œè€Œæœˆå‡ç½‘ç«™è®¿é—®é‡å´æœ‰ 100 ä¸ªï¼Œæ›´åˆ«æ Google Play ä¸Š<a href=\"https://youtu.be/EUthgV-U05w\" title=\"AdWords for App Promotion - Google\" target=\"_blank\" rel=\"external\">æœ‰ 60% çš„åº”ç”¨ä»æœªè¢«äººä¸‹è½½è¿‡äº†</a>ã€‚äºæ˜¯ï¼Œæ•´ä¸ªè¡Œä¸šçš„äº§å“ç­–ç•¥æ¸…ä¸€è‰²åœ°<strong>ã€Œæ‹¿é±¼æ¢ç†ŠæŒã€</strong>ï¼Œæ¯”å¦‚ç¬”è€…çš„è€ä¸œå®¶é˜¿é‡Œæ—…è¡Œï¼ˆé£çŒªæ—…è¡Œï¼‰ï¼Œweb åº”ç”¨å¸ƒæ»¡é˜¿é‡Œç³»å„ç§æ¸ é“ï¼Œæä¾›ã€Œä¼˜ç§€çš„ç¬¬ä¸€æ‰‹ä½“éªŒã€ï¼Œç­‰ä½ ç”¨çš„å¼€å¿ƒäº†ï¼Œå†å¼•è¯±ä½ å»ä¸‹è½½å®‰è£…åŸç”Ÿåº”ç”¨ã€‚</p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/PWAR-014+PWA.jpeg\" alt=\"\"><br><em>åŸç”Ÿåº”ç”¨ã€å½“ä»£ Web ä¸ PWA å›¾ç‰‡æ¥æº: Hux &amp; <a href=\"https://developers.google.com/web/events/pwaroadshow/\" target=\"_blank\" rel=\"external\">Google</a></em></p>\n<p>ä½†æ˜¯ï¼ŒPWA çš„å‡ºç°ï¼Œè®©é±¼ä¸ç†ŠæŒå…¼å¾—å˜æˆäº†å¯èƒ½ â€”â€” å®ƒåŒæ—¶å…·å¤‡äº† web åº”ç”¨ä¸åŸç”Ÿåº”ç”¨çš„ä¼˜ç‚¹ï¼Œæœ‰ç€è‡ªå·±ç‹¬æœ‰çš„å…ˆè¿›æ€§ï¼šã€Œæµè§ˆå™¨ -&gt; æ·»åŠ è‡³ä¸»å±/å®‰è£… -&gt; å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWA -&gt; æ¨é€é€šçŸ¥ -&gt; å…·å¤‡åŸç”Ÿåº”ç”¨ä½“éªŒçš„ PWAã€ï¼ŒPWA è‡ªèº«å°±åŒ…å«ç€ä»æ‹‰æ–°åˆ°ä¿æ´»çš„é—­ç¯ã€‚</p>\n<p>é™¤æ­¤ä¹‹å¤–ï¼ŒPWA è¿˜ç»§æ‰¿äº† web åº”ç”¨çš„å¦å¤–ä¸¤å¤§ä¼˜ç‚¹ï¼š<strong>æ— éœ€å…ˆä»˜å‡ºå‡ åå…†çš„ä¸‹è½½å®‰è£…æˆæœ¬å³å¯å¼€å§‹ä½¿ç”¨</strong>ï¼Œä»¥åŠ<strong>ä¸éœ€è¦ç»è¿‡åº”ç”¨è¶…å¸‚å®¡æ ¸å°±å¯ä»¥å‘å¸ƒæ–°ç‰ˆæœ¬</strong>ã€‚æ‰€ä»¥ï¼ŒPWA å¯ä»¥ç§°å¾—ä¸Šæ˜¯ä¸€ç§ã€Œæµå¼åº”ç”¨ï¼ˆStreamable Appï¼‰ã€ä¸ã€Œå¸¸é’åº”ç”¨ï¼ˆEvergreen Appï¼‰ã€</p>\n<h2 id=\"æœªæ¥åˆ°æ¥äº†å—\"><a href=\"#æœªæ¥åˆ°æ¥äº†å—\" class=\"headerlink\" title=\"æœªæ¥åˆ°æ¥äº†å—\"></a>æœªæ¥åˆ°æ¥äº†å—</h2><p>åœ¨ç¬”è€…åˆ†äº« PWA çš„ç»å†ä¸­ï¼Œæœ€ä¸æ„¿æ„å›ç­”çš„ä¸¤ä¸ªé—®é¢˜è«è¿‡äºã€ŒPWA å·²ç»è¢«å¹¿æ³›æ”¯æŒäº†å—ï¼Ÿã€ä»¥åŠã€ŒPWA ä¸ ABCDEFG è¿™äº›æŠ€æœ¯æ–¹æ¡ˆç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Ÿã€ï¼Œä½†æ˜¯è¿™ç¡®å®æ˜¯ä¸¤ä¸ªé€ƒä¸å¼€çš„é—®é¢˜ã€‚</p>\n<h3 id=\"PWA-çš„æ”¯æŒæƒ…å†µï¼Ÿ\"><a href=\"#PWA-çš„æ”¯æŒæƒ…å†µï¼Ÿ\" class=\"headerlink\" title=\"PWA çš„æ”¯æŒæƒ…å†µï¼Ÿ\"></a>PWA çš„æ”¯æŒæƒ…å†µï¼Ÿ</h3><p>å½“æˆ‘ä»¬è¯´åˆ° PWA æ˜¯å¦è¢«æ”¯æŒæ—¶ï¼Œå…¶å®æˆ‘ä»¬åœ¨è¯´çš„æ˜¯ PWA èƒŒåçš„å‡ ä¸ªå…³é”®æŠ€æœ¯éƒ½å¾—åˆ°æ”¯æŒäº†æ²¡æœ‰ã€‚ä»¥æµè§ˆå™¨å†…æ ¸æ¥åˆ’åˆ†çš„è¯ï¼ŒBlinkï¼ˆChromeã€Opreaã€Samsung Internet ç­‰ï¼‰ä¸ Geckoï¼ˆFirefoxï¼‰éƒ½å·²ç»å®ç°äº† PWA æ‰€éœ€çš„æ‰€æœ‰å…³é”®æŠ€æœ¯ï¼ˆğŸ‘ğŸ‘ğŸ‘ï¼‰ï¼Œå¹¶å·²ç»å¼€å§‹æ¢å¯»æ›´å¤šçš„å¯èƒ½æ€§ã€‚EdgeHTMLï¼ˆEdgeï¼‰<a href=\"https://blogs.windows.com/msedgedev/2016/07/08/the-progress-of-web-apps/\" title=\"The Progress of Web Apps - MSEdgeDev Blog\" target=\"_blank\" rel=\"external\">ç®€ç›´ç§¯æå¾—ä¸èƒ½æ›´ç§¯æäº†</a>ï¼Œæ‰€æœ‰çš„ç‰¹æ€§éƒ½å·²ç»å¤„äºã€Œæ­£åœ¨å¼€å‘ä¸­ã€çš„<a href=\"https://developer.microsoft.com/en-us/microsoft-edge/platform/status/\" title=\"Microsoft Edge web platform features status\" target=\"_blank\" rel=\"external\">çŠ¶æ€</a>ã€‚æœ€å¤§çš„ç»Šè„šçŸ³ä»ç„¶æ¥è‡ªäº Webkitï¼ˆSafariï¼‰ï¼Œå°¤å…¶æ˜¯åœ¨ iOS ä¸Šï¼Œä¸Šè¿°çš„å››ä¸ª API éƒ½æœªå¾—åˆ°æ”¯æŒï¼Œè€Œä¸”ç”±äºå¹³å°é™åˆ¶ï¼Œç¬¬ä¸‰æ–¹æµè§ˆå™¨ä¹Ÿæ— æ³•åœ¨ iOS ä¸Šæ”¯æŒã€‚ï¼ˆ<a href=\"https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support\" title=\"Internet Explorer End of Support\" target=\"_blank\" rel=\"external\">ä»€ä¹ˆä½ è¯´ IEï¼Ÿ</a>ï¼‰</p>\n<p>ä¸è¿‡ï¼Œä¹Ÿä¸è¦æ°”é¦ï¼ŒWebkit ä¸ä½†åœ¨å®ƒ <a href=\"https://trac.webkit.org/wiki/FiveYearPlanFall2015\" target=\"_blank\" rel=\"external\">2015 å¹´å‘å¸ƒçš„äº”å¹´è®¡åˆ’</a>é‡Œæåˆ°äº† Service Workerï¼Œæ›´æ˜¯å·²ç»åœ¨æœ€è¿‘å®ç°äº† Service Worker æ‰€<a href=\"https://jakearchibald.github.io/isserviceworkerready/\" title=\"Is Service Worker Ready?\" target=\"_blank\" rel=\"external\">ä¾èµ–</a>çš„ Requestã€Response ä¸ Fetch APIï¼Œè¿˜æŠŠ Service Worker ä¸ Web App Manifest çº·çº·<a href=\"https://webkit.org/status/\" title=\"Webkit Feature Status\" target=\"_blank\" rel=\"external\">åˆ—å…¥äº†ã€Œæ­£åœ¨è€ƒè™‘ã€</a>çš„ API ä¸­ï¼›è¦çŸ¥é“ï¼ŒWebkit å¯æ˜¯æŠŠ Web Components ä¸­çš„ HTML Imports ç›´æ¥<a href=\"https://webkit.org/status/#specification-web-components\" title=\"HTML Imports - Not Considering\" target=\"_blank\" rel=\"external\">åˆ—åˆ°ã€Œä¸è€ƒè™‘ã€é‡Œå»äº†</a>â€¦â€¦ï¼ˆå…¶å® Firefox ä¹Ÿæ˜¯ï¼‰</p>\n<p>æ›´ä½•å†µï¼Œç”±äº web ç¤¾åŒºä¸€ç›´ä»¥æ¥æ‰€è¿½æ±‚çš„ã€Œæ¸è¿›å¢å¼ºã€ä¼˜é›…é™çº§ã€ï¼Œä¸€ä¸ª PWA å½“ç„¶å¯ä»¥åœ¨ iOS ç¯å¢ƒæ­£å¸¸æ‰§è¡Œã€‚<a href=\"https://cloudfour.com/thinks/why-does-the-washington-posts-progressive-web-app-increase-engagement-on-ios/\" title=\"Why does The Washington Postâ€™s Progressive Web App increase engagement on iOS?\" target=\"_blank\" rel=\"external\">äº‹å®ä¸Šï¼Œåç››é¡¿é‚®æŠ¥å°†ç½‘ç«™è¿ç§»åˆ° PWA ä¹‹åå‘ç°ï¼Œä¸æ­¢æ˜¯ Androidï¼Œåœ¨ iOS ä¸Šä¹Ÿè·å¾—äº† 5 å€çš„æ´»è·ƒåº¦å¢é•¿</a>ï¼Œï¼ˆæ— è®ºæ˜¯ä¸æ˜¯å®ƒä»¬ä¹‹å‰çš„ç½‘ç«™å†™å¾—å¤ªçƒ‚å§ï¼‰ï¼Œå°±ç®— iOS ç°åœ¨è¿˜ä¸æ”¯æŒ PWA ä¹Ÿ<a href=\"https://cloudfour.com/thinks/ios-doesnt-support-progressive-web-apps-so-what/\" title=\"iOS doesnâ€™t support Progressive Web Apps, so what?\" target=\"_blank\" rel=\"external\">ä¸ä¼šæ€ä¹ˆæ ·</a>ï¼Œæˆ‘ä»¬æ›´æ˜¯æœ‰ç†ç”±ç›¸ä¿¡ PWA ä¼šå¾ˆå¿«åœ¨ iOS ä¸Šåˆ°æ¥ã€‚</p>\n<h3 id=\"PWA-vs-Others\"><a href=\"#PWA-vs-Others\" class=\"headerlink\" title=\"PWA vs. Others\"></a>PWA vs. Others</h3><p>è´ºè€ï¼ˆè´ºå¸ˆä¿Šï¼‰æ›¾è¯´è¿‡ï¼šã€Œä»çº¯ Web åˆ°çº¯ Nativeï¼Œä¹‹é—´æœ‰è®¸å¤šå¯èƒ½çš„ç‚¹ã€ã€‚å½“è€ƒè™‘ç§»åŠ¨åº”ç”¨çš„æŠ€æœ¯é€‰å‹æ—¶ï¼Œé™¤äº† Web ä¸åŸç”Ÿåº”ç”¨ï¼Œæˆ‘ä»¬è¿˜æœ‰å„ç§ä¸åŒç¨‹åº¦çš„ Hybridï¼Œè¿˜æœ‰ä»Šå¹´çˆ†å‘çš„è¯¸å¤š JS-to-Native æ–¹æ¡ˆã€‚</p>\n<p>è™½ç„¶æˆ‘åœ¨ä¸Šæ–‡ä¸­ç”¨äº†ã€Œå¤ä»‡ã€è¿™æ ·çš„å­—çœ¼ï¼Œä¸è¿‡æ— è®ºä»æŠ€æœ¯è¿˜æ˜¯å•†ä¸šçš„è§’åº¦ï¼Œæˆ‘ä»¬éƒ½æ²¡å¿…è¦æŠŠ web æˆ–æ˜¯ PWA æ”¾åˆ° Native çš„å¯¹ç«‹é¢å»çœ‹ã€‚å®ƒä»¬å½“ç„¶å­˜åœ¨ç«äº‰å…³ç³»ï¼Œä½†æ˜¯æ›´å¤šçš„æ—¶å€™ï¼Œweb-only ä¸ app-only çš„ç­–ç•¥éƒ½æ˜¯ä¸å®Œç¾çš„ï¼Œå½“å…¬å¸èµ„æºè¶³å¤Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€‰æ‹©åŒæ—¶å¼€å‘ä¸¤è€…ã€‚<a href=\"https://cloudfour.com/thinks/progressive-web-apps-simply-make-sense/?utm_source=mobilewebweekly&amp;utm_medium=email#fn-4857-1\" title=\"Progressive Web Apps Simply Make Sense\" target=\"_blank\" rel=\"external\">å½“ç„¶ï¼Œæ— è®ºä¸ä¸ä¸åŸç”Ÿåº”ç”¨å¯¹æ¯”ï¼ŒPWA è®© web åº”ç”¨å˜å¾—ä½“éªŒæ›´å¥½è¿™ä»¶äº‹æœ¬èº«æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚</a>ã€Œä¸è°ˆåœºæ™¯èŠæŠ€æœ¯éƒ½æ˜¯æ‰¯æ·¡ã€ï¼Œ<a href=\"https://medium.com/@owencm/the-surprising-tradeoff-at-the-center-of-question-whether-to-build-an-native-or-web-app-d2ad00c40fb2#.ym83ct2ax\" title=\"The surprising tradeoff at the center of the question whether to build a Native or Web App\" target=\"_blank\" rel=\"external\">æˆ‘ä»¬ä»ç„¶è¿˜æ˜¯éœ€è¦æ ¹æ®è‡ªå·±äº§å“ä¸å›¢é˜Ÿçš„æƒ…å†µæ¥å†³å®šå¯¹åº”çš„æŠ€æœ¯é€‰å‹ä¸å¹³å°ç­–ç•¥ï¼Œåªæ˜¯ PWA è®© web åº”ç”¨åœ¨é¢å¯¹é€‰å‹è€ƒéªŒæ—¶æ›´åŠ å¼ºåŠ¿äº†è€Œå·²ã€‚</a></p>\n<p><img src=\"/img/in-post/post-nextgen-web-pwa/qcon-trend.png\" alt=\"\"><br><em>ä¼—å¤šçš„æŠ€æœ¯é€‰å‹ï¼Œä»¥åŠç¬”è€…çš„ä¸€ç§çŒœæµ‹</em></p>\n<p>ç¬”è€…ä¸è´Ÿè´£ä»»å¾—åšä¸€äº›çŒœæµ‹ï¼šè™½ç„¶<a href=\"http://zhihu.com/question/31316032/answer/75236718\" target=\"_blank\" rel=\"external\">é‡é‡çº§çš„ Hybrid æ¶æ„ä¸åŸºç¡€è®¾æ–½</a>ä»æ˜¯ç›®å‰ä¸å°‘åœºæ™¯ä¸‹æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆï¼›ä½†æ˜¯éšç€ç§»åŠ¨è®¾å¤‡æœ¬èº«çš„ç¡¬ä»¶æ€§èƒ½æå‡ä¸æ–°æŠ€æœ¯çš„æˆç†Ÿä¸æ™®åŠï¼ŒJS-to-Native ä¸ä»¥ PWA ä¸ºé¦–çš„çº¯ web åº”ç”¨ï¼Œå°†åˆ†åˆ«ä»ä¸¤ä¸ªæ–¹å‘æŒ¤å‹ Hybrid çš„ç”Ÿå­˜ç©ºé—´ï¼Œæ¶ˆåŒ–å½“å‰ Hybrid æ¶æ„ä¸»è¦è§£å†³çš„é—®é¢˜ï¼›å‰è€…å°†é€æ¸æ¼”åŒ–ä¸ºç±»ä¼¼ Xarmarin è¿™æ ·é’ˆå¯¹è·¨å¹³å°åŸç”Ÿåº”ç”¨å¼€å‘çš„è§£å†³æ–¹æ¡ˆï¼›åè€…å°†æ˜¾è‘—é™ä½å½“å‰ Hybrid æ¶æ„çš„å®¹å™¨å¼€å‘ä¸éƒ¨ç½²æˆæœ¬ï¼Œå°† Hybrid è¿”ç’å½’çœŸä¸ºç®€å•çš„ webview è°ƒç”¨ã€‚</p>\n<p>è¿™ç§çŒœæµ‹å½“ç„¶ä¸æ˜¯æ²¡æœ‰ä¾æ®çš„ççŒœï¼Œæ¯”å¦‚å‰è€…å¯ä»¥å‚è€ƒé˜¿é‡Œå·´å·´é›†å›¢çº§åˆ«è¿ç§» Weex çš„æˆ˜ç•¥ä¸å¾®ä¿¡å°ç¨‹åºçš„ roadmapï¼›åè€…åˆ™å¯ä»¥å‚è€ƒå½“å‰ Cordova ä¸ Ionic ä¸¤å¤§ Hybrid ç¤¾åŒºå¯¹ PWA çš„çƒ­çƒˆåå“ã€‚</p>\n<h3 id=\"PWA-in-China\"><a href=\"#PWA-in-China\" class=\"headerlink\" title=\"PWA in China\"></a>PWA in China</h3><p>çœ‹çœ‹ Google å®˜æ–¹å®£ä¼ è¾ƒå¤šçš„ PWA <a href=\"https://developers.google.com/web/showcase/\" title=\"Case Studies - Google Developers\" target=\"_blank\" rel=\"external\">æ¡ˆä¾‹</a>å°±ä¼šå‘ç°ï¼ŒFlipKartã€Housing.com æ¥è‡ªå°åº¦ï¼›Lyftã€åç››é¡¿é‚®æŠ¥æ¥è‡ªåŒ—ç¾ï¼›å”¯ä¸€æ¥è‡ªä¸­å›½çš„ AliExpress ä¸»è¦å¼€å±•çš„åˆ™æ˜¯æµ·å¤–ä¸šåŠ¡ã€‚</p>\n<p>ç”±äºä¸­å›½çš„ç‰¹æ®Šæ€§ï¼Œç¬”è€…åœ¨<a href=\"https://www.zhihu.com/question/46690207/answer/104851767\" target=\"_blank\" rel=\"external\">ç¬¬ä¸€æ¬¡</a>èŠåˆ° PWA æ—¶éš¾å…è¡¨ç°å‡ºäº†ä¸€å®šç¨‹åº¦çš„æ‚²è§‚ï¼š</p>\n<ul>\n<li>å›½å†…è¾ƒé‡è§† iOSï¼Œè€Œ iOS ç›®å‰è¿˜ä¸æ”¯æŒ PWAã€‚</li>\n<li>å›½å†…çš„ Android å®ä¸ºã€Œå®‰å“ã€ï¼Œä¸è‡ªå¸¦ Chrome æ˜¯ä¸€ï¼Œå¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–å…¼å®¹é—®é¢˜ã€‚</li>\n<li>å›½å†…å‚å•†å¯èƒ½å¹¶ä¸ä¼šåƒä¸‰æ˜Ÿé‚£æ ·å¯¹æ¨åŠ¨è‡ªå®¶æµè§ˆå™¨æ”¯æŒ PWA é‚£ä¹ˆæ„Ÿå…´è¶£ã€‚</li>\n<li>ä¾èµ– GCM æ¨é€çš„é€šçŸ¥ä¸å¯ç”¨ï¼ŒWeb Push Protocol è¿˜æ²¡æœ‰å›½å†…çš„æ¨é€æœåŠ¡å®ç°ã€‚</li>\n<li>å›½å†… webview ç¯å¢ƒè¾ƒä¸ºå¤æ‚ï¼ˆæ¯”å¦‚å¾®ä¿¡ï¼‰ï¼Œé»‘ç§‘æŠ€æ¯”è¾ƒå¤šã€‚</li>\n</ul>\n<p>åè§‚å°åº¦ï¼Œç”±äº Google æœåŠ¡å¥å…¨ã€æ ‡é… Chrome çš„ Android æ‰‹æœºå¸‚å ç‡éå¸¸é«˜ï¼ŒPWA çš„ç”¨æˆ·è¾¾åˆ°ç‡ç®€ç›´ç›´é€¼ 100%ï¼Œä¹Ÿéš¾å…è·å¾—æ— æ•°å¥½è¯„ä¸æ”¯æŒäº†ã€‚<strong>ç¬”è€…å¥¢æœ›ç€æœ¬æ–‡èƒ½å¯¹æ¨åŠ¨ PWA çš„å›½å†…ç¯å¢ƒæœ‰ä¸€å®šçš„è´¡çŒ®ã€‚</strong>ä¸è¿‡æ— è®ºå¦‚ä½•ï¼ŒPWA åœ¨å›½å†…çš„æ˜¥å¤©å¯èƒ½çš„ç¡®ä¼šæ¥å¾—ç¨å¾®æ™šä¸€ç‚¹äº†ã€‚</p>\n<h2 id=\"ç»“è¯­\"><a href=\"#ç»“è¯­\" class=\"headerlink\" title=\"ç»“è¯­\"></a>ç»“è¯­</h2><p>ã€Œ<a href=\"https://huangxuan.me/pwa-qcon2016/#/99\" title=\"PWA@QCon2016 #97\" target=\"_blank\" rel=\"external\">æˆ‘ä»¬ä¿¡ä»° Webï¼Œä¸ä»…ä»…åœ¨äºè½¯ä»¶ã€è½¯ä»¶å¹³å°ä¸å•çº¯çš„æŠ€æœ¯</a>ï¼Œè¿˜åœ¨äº<a href=\"http://phonegap.com/blog/2012/05/09/phonegap-beliefs-goals-and-philosophy/\" title=\"PhoneGap Beliefs, Goals, and Philosophy\" target=\"_blank\" rel=\"external\">ã€ä»»ä½•äººï¼Œåœ¨ä»»ä½•æ—¶é—´ä»»ä½•åœ°ç‚¹ï¼Œéƒ½å¯ä»¥åœ¨ä¸‡ç»´ç½‘ä¸Šå‘å¸ƒä»»ä½•ä¿¡æ¯ï¼Œå¹¶è¢«ä¸–ç•Œä¸Šçš„ä»»ä½•ä¸€ä¸ªäººæ‰€è®¿é—®åˆ°ã€‚ã€è€Œè¿™æ‰æ˜¯ web çš„æœ€ä¸ºé©å‘½ä¹‹å¤„ï¼Œå ªç§°æˆ‘ä»¬äººç±»ï¼Œä½œä¸ºä¸€ä¸ªç‰©ç§çš„ä¸€æ¬¡è¿›åŒ–ã€‚</a>ã€</p>\n<p>è¯·ä¸è¦è®© web å†<a href=\"https://zhuanlan.zhihu.com/p/22561084\" title=\"Web åœ¨ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»\" target=\"_blank\" rel=\"external\">ç»§ç»­ç¦»æˆ‘ä»¬è¿œå»</a>ï¼Œæµè§ˆå™¨å‚å•†ä»¬å·²ç»é‡æ–°èµ°åˆ°äº†ä¸€èµ·ï¼Œè€Œä¸‹ä¸€æ£’å°†æ˜¯äº¤åˆ°æˆ‘ä»¬ web åº”ç”¨å¼€å‘è€…çš„æ‰‹ä¸Šã€‚<a href=\"youtu.be/y1B2c3ZD9fk?t=1h14m48s\" title=\"WWDC 2017\">ä¹”å¸ƒæ–¯æ›¾ç›¸ä¿¡ web åº”ç”¨æ‰ç§»åŠ¨åº”ç”¨çš„æœªæ¥</a>ï¼Œé‚£å°±è®©æˆ‘ä»¬ç”¨ä»£ç è¯æ˜ç»™è¿™ä¸ªä¸–ç•Œçœ‹å§ã€‚</p>\n<p><strong>è®©æˆ‘ä»¬çš„ç”¨æˆ·ï¼Œä¹Ÿåƒæˆ‘ä»¬è¿™èˆ¬çƒ­çˆ± web å§ã€‚</strong></p>\n<p>é»„ç„ï¼Œäº 12 æœˆçš„åŒ—äº¬ã€‚</p>\n<hr>\n<p><em>æ³¨ï¼šåœ¨ç¬”è€…æ’°æ–‡æœŸé—´ï¼ŒGoogle åœ¨ Google China Developers Days ä¸Šå®£å¸ƒäº† developers.google.cn åŸŸåçš„å¯ç”¨ï¼Œæ–¹ä¾¿å›½å†…å¼€å‘è€…è®¿é—®ã€‚å¯¹äºæ–‡ä¸­æ‰€æœ‰é“¾å‘ developers.google.com çš„å‚è€ƒæ–‡çŒ®ï¼Œåº”è¯¥éƒ½å¯ä»¥åœ¨ cn ç«™ç‚¹ä¸­æ‰¾åˆ°ã€‚</em></p>\n"},{"layout":"post","title":"We have a problem with promise","subtitle":"Promise","date":"2016-07-04T07:23:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n### *ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«*\n\n```javascript\n    doSomething().then(() => {\n        return doSomethingElse()\n    })\n\n    doSomething().then(() => {\n        doSomethingElse()\n    })\n\n    doSomething().then(doSomethingElse())\n\n    doSomething().then(doSomethingElse)\n```\n\n## Promiseçš„èµ·æº\n\nå¦‚æœä½ é˜…è¯»äº† promises çš„ä¸€äº›ç›¸å…³æ–‡çŒ®ï¼Œä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªè¯ [é‡‘å­—å¡”é—®é¢˜](https://medium.com/@wavded/managing-node-js-callback-hell-1fe03ba8baf#.ca5u6o9fl) ç»å¸¸å‡ºç°ã€‚å®ƒæè¿°çš„æ˜¯å¤§é‡çš„å›è°ƒå‡½æ•°æ…¢æ…¢å‘å³ä¾§å±å¹•å»¶ä¼¸çš„ä¸€ç§çŠ¶æ€ã€‚\n\nPromises çš„ç¡®è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”ä¸ä»…ä»…æ˜¯ç¼©è¿›é—®é¢˜ã€‚å°±åƒåœ¨ [Callback Hellçš„æ•‘èµ](http://youtu.be/hf1T_AONQJU) ä¸­æè¿°çš„ä¸€æ ·ï¼Œå›è°ƒå‡½æ•°çœŸæ­£çš„é—®é¢˜åœ¨äºä»–å‰¥å¤ºäº†æˆ‘ä»¬ä½¿ç”¨ return å’Œ throw è¿™äº›å…³é”®å­—çš„èƒ½åŠ›ã€‚ç›¸åï¼Œæˆ‘ä»¬çš„æ•´ä¸ªä»£ç æµç¨‹éƒ½æ˜¯åŸºäºå‰¯ä½œç”¨çš„: ä¸€ä¸ªå‡½æ•°ä¼šé™„å¸¦è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚\n\n> åŸæ–‡å…³äºå‰¯ä½œç”¨çš„æè¿°å¹¶ä¸èƒ½å¾ˆç›´è§‚çš„è¿›è¡Œç†è§£ï¼Œå»ºè®®å‚è€ƒ [WIKI](https://en.wikipedia.org/wiki/Side_effect_(computer_science)) ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå‡½æ•°é™¤äº†ä¼šè¿”å›ä¸€ä¸ªå€¼ä¹‹å¤–ï¼Œè¿˜ä¼šä¿®æ”¹å‡½æ•°ä»¥å¤–çš„çŠ¶æ€å¦‚å…¨å±€å˜é‡ç­‰ç­‰ã€‚å®é™…ä¸Šæ‰€æœ‰å¼‚æ­¥è°ƒç”¨éƒ½å¯ä»¥è§†ä¸ºå¸¦æœ‰å‰¯ä½œç”¨çš„è¡Œä¸ºã€‚\n\nå¹¶ä¸”å®é™…ä¸Šï¼Œå›è°ƒæ›´åŠ æ¼äººçš„æ˜¯ï¼Œä»–ä¼šå°†æˆ‘ä»¬é€šå¸¸åœ¨å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸­èƒ½è·å¾—çš„*å †æ ˆ*ç ´åã€‚ç¼–å†™ä»£ç æ—¶å¦‚æœæ— æ³•è·å–å †æ ˆå°±åƒå¼€è½¦æ—¶æ²¡æœ‰åˆ¹è½¦ä¸€æ ·: ä¸åˆ°ç”¨çš„æ—¶å€™ï¼Œä½ ä¸ä¼šçŸ¥é“å®ƒæœ‰å¤šé‡è¦ã€‚\n\nPromises ç»™äºˆæˆ‘ä»¬çš„å°±æ˜¯åœ¨æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥æ—¶ä¸¢å¤±çš„æœ€é‡è¦çš„è¯­è¨€åŸºçŸ³: return, throw ä»¥åŠå †æ ˆã€‚ä½†æ˜¯æƒ³è¦ promises èƒ½å¤Ÿæä¾›è¿™äº›ä¾¿åˆ©ç»™ä½ çš„å‰ææ˜¯ä½ çŸ¥é“å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ã€‚\n\n## æ–°æ‰‹é”™è¯¯\n\nPromiseå¯¹äºä¸åŒçš„äººæœ‰ä¸åŒçš„ç†è§£å’Œè§‚ç‚¹ï¼Œä½†æ˜¯è¿™ç¯‡æ–‡ç« æˆ‘ç‰¹è´¨[æ­£å¼æ ‡å‡†](https://promisesaplus.com/), åœ¨ç°ä»£æµè§ˆå™¨ä¸­æš´éœ²ä¸ºwindow.Promiseã€‚è™½ç„¶å¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰windows.Promise,ä½†æ˜¯å¯ä»¥å¯»æ‰¾ä¸€äº›pollyfill,æ¯”å¦‚[Lie](https://github.com/calvinmetcalf/lie)ã€[bluebird](https://github.com/petkaantonov/bluebird)ã€‚\n\n### æ–°æ‰‹é”™è¯¯ #1ï¼š promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\nè§‚å¯Ÿå¤§å®¶å¦‚ä½•ä½¿ç”¨ PouchDB è¿™ç±»å¤§å‹çš„ promise é£æ ¼çš„APIï¼Œæˆ‘å‘ç°å¤§é‡é”™è¯¯çš„ promise ä½¿ç”¨å½¢å¼ã€‚æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ä¸‹é¢è¿™ä¸ª:\n\n```javascript\n    remotedb.allDocs({\n        include_docs: true,\n        attachments: true\n    }).then(function (result) {\n        var docs = result.rows;\n        docs.forEach(function(element) {\n            localdb.put(element.doc).then(function(response) {\n                alert('Pulled doc with id ' + element.doc._id + ' and added to local db.');\n            }).catch(function (err) {\n                if (err.status == 409) {\n                    localdb.get(element.doc._id).then(function (resp) {\n                        localdb.remove(resp._id, resp._rev).then(function (resp) {\n                                // et cetera...\n                        })\n                    })\n                }\n            })\n        })\n    })\n\n```\n\næ˜¯çš„ï¼Œå®é™…ä¸Šä½ å¯ä»¥åƒä½¿ç”¨å›è°ƒä¸€æ ·ä½¿ç”¨ promisesï¼Œæ©ï¼Œå°±åƒç”¨æ‰“ç£¨æœºå»å‰Šè„šè¶¾ç”²ä¸€æ ·ï¼Œä½ ç¡®å®å¯ä»¥è¿™ä¹ˆåšã€‚\n\nå¹¶ä¸”å¦‚æœä½ ä»¥ä¸ºè¿™æ ·çš„é”™è¯¯åªé™äºåˆå­¦è€…ï¼Œé‚£ä¹ˆä½ ä¼šæƒŠè®¶äºæˆ‘å®é™…ä¸Šæ˜¯åœ¨é»‘è“å®˜æ–¹å¼€å‘è€…åšå®¢ä¸Šçœ‹åˆ°ä¸Šé¢çš„ä»£ç ã€‚è€çš„å›è°ƒé£æ ¼çš„ä¹ æƒ¯éš¾ä»¥æ¶ˆç­ã€‚(è‡³å¼€å‘è€…: æŠ±æ­‰é€‰äº†ä½ çš„ä¾‹å­ï¼Œä½†æ˜¯ä½ çš„ä¾‹å­å°†ä¼šæœ‰ç§¯æçš„æ•™è‚²æ„ä¹‰)\n\næ­£ç¡®çš„é£æ ¼åº”è¯¥æ˜¯:\n\n```javascript\n    remotedb.allDocs(...).then(function (resultOfAllDocs) {\n        return localdb.put(...)\n    }).then(function (resultOfPut) {\n        return localdb.get(...)\n    }).then(function (resultOfGet) {\n        return localdb.put(...)\n    }).catch(function (err) {\n        console.log(err)\n    })\n```\nè¿™ç§å†™æ³•è¢«ç§°ä¸º composing promises ï¼Œæ˜¯ promises çš„å¼ºå¤§èƒ½åŠ›ä¹‹ä¸€ã€‚æ¯ä¸€ä¸ªå‡½æ•°åªä¼šåœ¨å‰ä¸€ä¸ª promise è¢«è°ƒç”¨å¹¶ä¸”å®Œæˆå›è°ƒåè°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°ä¼šè¢«å‰ä¸€ä¸ª promise çš„è¾“å‡ºè°ƒç”¨ï¼Œç¨åæˆ‘ä»¬åœ¨è¿™å—åšæ›´å¤šçš„è®¨è®ºã€‚\n\n### æ–°æ‰‹é”™è¯¯ #2ï¼š WTF, ç”¨äº† promises åæ€ä¹ˆç”¨ forEach?\n\nè¿™é‡Œæ˜¯å¤§å¤šæ•°äººå¯¹äº promises çš„ç†è§£å¼€å§‹å‡ºç°åå·®ã€‚ä¸€æ—¦å½“ä»–ä»¬è¦ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ forEach() å¾ªç¯ (æ— è®ºæ˜¯ for å¾ªç¯è¿˜æ˜¯ while å¾ªç¯)ï¼Œä»–ä»¬å®Œå…¨ä¸çŸ¥é“å¦‚ä½•å°† promises ä¸å…¶ä¸€èµ·ä½¿ã€‚å› æ­¤ä»–ä»¬å°±ä¼šå†™ä¸‹ç±»ä¼¼è¿™æ ·çš„ä»£ç ã€‚\n\n```javascript\n    // I want to remove() all docs\n    db.allDocs({include_docs: true}).then(function (result) {\n        result.rows.forEach(function (row) {\n            db.remove(row.doc)\n        })\n    }).then(function () {\n        // I naively believe all docs have been removed() now!\n    })\n```\n\nè¿™ä»½ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿé—®é¢˜åœ¨äºç¬¬ä¸€ä¸ªå‡½æ•°å®é™…ä¸Šè¿”å›çš„æ˜¯ undefinedï¼Œè¿™æ„å‘³ç€ç¬¬äºŒä¸ªæ–¹æ³•ä¸ä¼šç­‰å¾…æ‰€æœ‰ documents éƒ½æ‰§è¡Œ db.remove()ã€‚å®é™…ä¸Šä»–ä¸ä¼šç­‰å¾…ä»»ä½•äº‹æƒ…ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨ä»»æ„æ•°é‡çš„æ–‡æ¡£è¢«åˆ é™¤åæ‰§è¡Œï¼\n\nè¿™æ˜¯ä¸€ä¸ªéå¸¸éšè”½çš„ bugï¼Œå› ä¸ºå¦‚æœ PouchDB åˆ é™¤è¿™äº›æ–‡æ¡£è¶³å¤Ÿå¿«ï¼Œä½ çš„ UI ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ä¼šå®Œæˆæ­£å¸¸ï¼Œä½ å¯èƒ½ä¼šå®Œå…¨æ³¨æ„ä¸åˆ°æœ‰ä»€ä¹ˆä¸œè¥¿æœ‰é”™è¯¯ã€‚è¿™ä¸ª bug å¯èƒ½ä¼šåœ¨ä¸€äº›å¤æ€ªçš„ç«æ€é—®é¢˜æˆ–ä¸€äº›ç‰¹å®šçš„æµè§ˆå™¨ä¸­æš´éœ²å‡ºæ¥ï¼Œå¹¶ä¸”åˆ°æ—¶å¯èƒ½å‡ ä¹æ²¡æœ‰å¯èƒ½å»å®šä½é—®é¢˜ã€‚\n\nç®€è€Œè¨€ä¹‹ï¼ŒforEach()/for/while å¹¶éä½ å¯»æ‰¾çš„è§£å†³æ–¹æ¡ˆã€‚ä½ éœ€è¦çš„æ˜¯ Promise.all():\n\n```javascript\n    db.allDocs({include_docs: true}).then(function (result) {\n        return Promise.all(result.rows.map(function (row) {\n            return db.remove(row.doc)\n        }))\n    }).then(function (arrayOfResults) {\n        // All docs have really been removed() now!\n    })\n```\n\nä¸Šé¢çš„ä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¤§ä½“æ¥è¯´ï¼ŒPromise.all()ä¼šä»¥ä¸€ä¸ª promises æ•°ç»„ä¸ºè¾“å…¥ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ promiseã€‚è¿™ä¸ªæ–°çš„ promise ä¼šåœ¨æ•°ç»„ä¸­æ‰€æœ‰çš„ promises éƒ½æˆåŠŸè¿”å›åæ‰è¿”å›ã€‚ä»–æ˜¯å¼‚æ­¥ç‰ˆçš„ for å¾ªç¯ã€‚\n\nå¹¶ä¸” Promise.all() ä¼šå°†æ‰§è¡Œç»“æœç»„æˆçš„æ•°ç»„è¿”å›åˆ°ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚å½“ä½ å¸Œæœ›ä» PouchDB ä¸­è·å–å¤šä¸ªå¯¹è±¡æ—¶ï¼Œä¼šéå¸¸æœ‰ç”¨ã€‚æ­¤å¤–ä¸€ä¸ªæ›´åŠ æœ‰ç”¨çš„ç‰¹æ•ˆæ˜¯ï¼Œä¸€æ—¦æ•°ç»„ä¸­çš„ promise ä»»æ„ä¸€ä¸ªè¿”å›é”™è¯¯ï¼ŒPromise.all() ä¹Ÿä¼šè¿”å›é”™è¯¯ã€‚\n\n### æ–°æ‰‹é”™è¯¯ #3ï¼š å¿˜è®°ä½¿ç”¨ .catch()\n\nè¿™æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ã€‚å•çº¯çš„åšä¿¡è‡ªå·±çš„ promises ä¼šæ°¸è¿œä¸å‡ºç°å¼‚å¸¸ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šå¿˜è®°åœ¨ä»–ä»¬çš„ä»£ç ä¸­æ·»åŠ ä¸€ä¸ª .catch()ã€‚ç„¶è€Œä¸å¹¸çš„æ˜¯è¿™ä¹Ÿæ„å‘³ç€ï¼Œä»»ä½•è¢«æŠ›å‡ºçš„å¼‚å¸¸éƒ½ä¼šè¢«åƒæ‰ï¼Œå¹¶ä¸”ä½ æ— æ³•åœ¨ console ä¸­è§‚å¯Ÿåˆ°ä»–ä»¬ã€‚è¿™ç±»é—®é¢˜ debug èµ·æ¥ä¼šéå¸¸ç—›è‹¦ã€‚\n\n> ç±»ä¼¼ Bluebird ä¹‹ç±»çš„ Promise åº“ä¼šåœ¨è¿™ç§åœºæ™¯æŠ›å‡º UnhandledRejectionError è­¦ç¤ºæœ‰æœªå¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç±»æƒ…å†µä¸€æ—¦å‘ç°ï¼Œå°±ä¼šé€ æˆè„šæœ¬å¼‚å¸¸ï¼Œåœ¨ Node ä¸­æ›´ä¼šé€ æˆè¿›ç¨‹ Crash çš„é—®é¢˜ï¼Œå› æ­¤æ­£ç¡®çš„æ·»åŠ  .catch() éå¸¸é‡è¦ã€‚ è¯‘è€…æ³¨\n\nä¸ºäº†é¿å…è¿™ç±»è®¨åŒçš„åœºæ™¯ï¼Œæˆ‘ä¹ æƒ¯äºåƒä¸‹é¢çš„ä»£ç ä¸€æ ·ä½¿ç”¨ promise:\n\n```javascript\n    somePromise().then(function () {\n        return anotherPromise();\n    }).then(function () {\n        return yetAnotherPromise();\n    }).catch(console.log.bind(console)); // <-- this is badass\n```\n\nå³ä½¿ä½ åšä¿¡ä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œæ·»åŠ ä¸€ä¸ª catch() æ€»å½’æ˜¯æ›´åŠ è°¨æ…çš„ã€‚å¦‚æœä½ çš„å‡è®¾æœ€ç»ˆè¢«å‘ç°æ˜¯é”™è¯¯çš„ï¼Œå®ƒä¼šè®©ä½ çš„ç”Ÿæ´»æ›´åŠ ç¾å¥½ã€‚\n\n### æ–°æ‰‹é”™è¯¯ #4ï¼šä½¿ç”¨ â€œdeferredâ€\nè¿™æ˜¯ä¸€ä¸ªæˆ‘ç»å¸¸å¯ä»¥çœ‹åˆ°çš„é”™è¯¯ï¼Œä»¥è‡³äºæˆ‘ç”šè‡³ä¸æ„¿æ„åœ¨è¿™é‡Œé‡å¤å®ƒï¼Œå°±åƒæƒ§æ€• Beetlejuice ä¸€æ ·ï¼Œä»…ä»…æ˜¯æåˆ°å®ƒçš„åå­—ï¼Œå°±ä¼šå¬å”¤å‡ºæ¥æ›´å¤šã€‚\n\nç®€å•çš„è¯´ï¼Œpromises æ‹¥æœ‰ä¸€ä¸ªæ¼«é•¿å¹¶ä¸”æˆå‰§åŒ–çš„å†å²ï¼ŒJavascript ç¤¾åŒºèŠ±è´¹äº†å¤§é‡çš„æ—¶é—´è®©å…¶èµ°ä¸Šæ­£è½¨ã€‚åœ¨æ—©æœŸï¼Œdeferred åœ¨ Qï¼ŒWhenï¼ŒRSVPï¼ŒBluebirdï¼ŒLieç­‰ç­‰çš„ â€œä¼˜ç§€â€ ç±»åº“ä¸­è¢«å¼•å…¥ï¼Œ jQuery ä¸ Angular åœ¨ä½¿ç”¨ ES6 Promise è§„èŒƒä¹‹å‰ï¼Œéƒ½æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å¼ç¼–å†™ä»£ç ã€‚\n\nå› æ­¤å¦‚æœä½ åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è¿™ä¸ªè¯ (æˆ‘ä¸ä¼šæŠŠè¿™ä¸ªè¯é‡å¤ç¬¬ä¸‰éï¼)ï¼Œä½ å°±åšé”™äº†ã€‚ä¸‹é¢æ˜¯è¯´æ˜ä¸€ä¸‹å¦‚ä½•é¿å…å®ƒã€‚\n\né¦–å…ˆï¼Œå¤§éƒ¨åˆ† promises ç±»åº“éƒ½ä¼šæä¾›ä¸€ä¸ªæ–¹å¼å»åŒ…è£…ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ promises å¯¹è±¡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒAngularçš„ $q æ¨¡å—å…è®¸ä½ ä½¿ç”¨ $q.when åŒ…è£¹é $q çš„ promisesã€‚å› æ­¤ Angular ç”¨æˆ·å¯ä»¥è¿™æ ·ä½¿ç”¨ PouchDB promises.\n\n```javascript\n    $q.when(db.put(doc)).then(/* ... */); // <-- this is all the code you need\n```\n\nå¦ä¸€ç§ç­–ç•¥æ˜¯ä½¿ç”¨[æ„é€ å‡½æ•°å£°æ˜æ¨¡å¼](https://blog.domenic.me/the-revealing-constructor-pattern/)ï¼Œå®ƒåœ¨ç”¨æ¥åŒ…è£¹é promise API æ—¶éå¸¸æœ‰ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸ºäº†åŒ…è£¹ä¸€ä¸ªå›è°ƒé£æ ¼çš„ API å¦‚ Node çš„ fs.readFile ï¼Œä½ å¯ä»¥ç®€å•çš„è¿™ä¹ˆåš:\n\n```javascript\n    new Promise(function (resolve, reject) {\n        fs.readFile('myfile.txt', function (err, file) {\n            if (err) {\n                return reject(err);\n            }\n            resolve(file);\n        });\n    }).then(/* ... */)\n```\nå®Œå·¥ï¼æˆ‘ä»¬æ‰“è´¥äº†å¯æ€•çš„ defâ€¦.å•Šå“ˆï¼ŒæŠ“åˆ°è‡ªå·±äº†ã€‚:)\n\n> å…³äºä¸ºä½•è¿™æ˜¯ä¸€ç§åæ¨¡å¼æ›´å¤šçš„å†…å®¹ï¼Œè¯·æŸ¥çœ‹ Bluebird çš„ [promise anti-patterns](https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern) wiki é¡µ\n\n### æ–°æ‰‹é”™è¯¯ #5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\n\n```javascript\n    somePromise().then(function () {\n        someOtherPromise()\n    }).then(function () {\n        // Gee, I hope someOtherPromise() has resolved!\n        // Spoiler alert: it hasn't.\n    })\n```\n\nå¥½äº†ï¼Œç°åœ¨æ˜¯æ—¶å€™è®¨è®ºä¸€ä¸‹å…³äº promises ä½ æ‰€éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ã€‚\n\nè®¤çœŸçš„è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸€æ—¦ä½ ç†è§£äº†å®ƒï¼Œå°±ä¼šé¿å…æ‰€æœ‰æˆ‘æåŠçš„é”™è¯¯çš„å¤æ€ªçš„æŠ€å·§ã€‚ä½ å‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ\n\nå°±å¦‚æˆ‘å‰é¢æ‰€è¯´ï¼Œpromises çš„å¥‡å¦™åœ¨äºç»™äºˆæˆ‘ä»¬ä»¥å‰çš„ return ä¸ throwã€‚ä½†æ˜¯åœ¨å®è·µä¸­è¿™åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿ\n\næ¯ä¸€ä¸ª promise éƒ½ä¼šæä¾›ç»™ä½ ä¸€ä¸ª then() å‡½æ•° (æˆ–æ˜¯ catch()ï¼Œå®é™…ä¸Šåªæ˜¯ then(null, ...) çš„è¯­æ³•ç³–)ã€‚å½“æˆ‘ä»¬åœ¨ then() å‡½æ•°å†…éƒ¨æ—¶ï¼š\n\n```javascript\n    somePromise().then(function () {\n        // I'm inside a then() function!\n    })\n```\næˆ‘ä»¬å¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿæœ‰ä¸‰ç§äº‹æƒ…ï¼š\n\nreturn å¦ä¸€ä¸ª promise\nreturn ä¸€ä¸ªåŒæ­¥çš„å€¼ (æˆ–è€… undefined)\nthrow ä¸€ä¸ªåŒæ­¥å¼‚å¸¸\nå°±æ˜¯è¿™æ ·ã€‚ä¸€æ—¦ä½ ç†è§£äº†è¿™ä¸ªæŠ€å·§ï¼Œä½ å°±ç†è§£äº† promisesã€‚å› æ­¤è®©æˆ‘ä»¬é€ä¸ªäº†è§£ä¸‹ã€‚\n\nè¿”å›å¦ä¸€ä¸ª promise\nè¿™æ˜¯ä¸€ä¸ªåœ¨ promise æ–‡æ¡£ä¸­å¸¸è§çš„ä½¿ç”¨æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šæ–‡ä¸­æåˆ°çš„ â€œcomposing promisesâ€ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        return getUserAccountById(user.id)\n    }).then(function (userAccount) {\n        // I got a user account!\n    })\n```\n\n> æ³¨æ„åˆ°æˆ‘æ˜¯ `return` ç¬¬äºŒä¸ª promiseï¼Œè¿™ä¸ª `return` éå¸¸é‡è¦ã€‚å¦‚æœæˆ‘æ²¡æœ‰å†™ `return`ï¼Œ`getUserAccountById()` å°±ä¼šæˆä¸ºä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ªå‡½æ•°å°†ä¼šæ¥æ”¶åˆ° `undefined` è€Œé `userAccount`ã€‚\n\n### è¿”å›ä¸€ä¸ªåŒæ­¥å€¼ (æˆ–è€… undefined)\n\nè¿”å› undefined é€šå¸¸æ˜¯é”™è¯¯çš„ï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ªåŒæ­¥å€¼å®é™…ä¸Šæ˜¯å°†åŒæ­¥ä»£ç åŒ…è£¹ä¸º promise é£æ ¼ä»£ç çš„ä¸€ç§éå¸¸èµçš„æ‰‹æ®µã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯¹ users ä¿¡æ¯æœ‰ä¸€ä¸ªå†…å­˜ç¼“å­˜ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        if (inMemoryCache[user.id]) {\n            return inMemoryCache[user.id]    // returning a synchronous value!\n        }\n        return getUserAccountById(user.id) // returning a promise!\n    }).then(function (userAccount) {\n        // I got a user account!\n    });\n```\n\næ˜¯ä¸æ˜¯å¾ˆèµï¼Ÿç¬¬äºŒä¸ªå‡½æ•°ä¸éœ€è¦å…³å¿ƒ userAccount æ˜¯ä»åŒæ­¥æ–¹æ³•è¿˜æ˜¯å¼‚æ­¥æ–¹æ³•ä¸­è·å–çš„ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå‡½æ•°å¯ä»¥éå¸¸è‡ªç”±çš„è¿”å›ä¸€ä¸ªåŒæ­¥æˆ–è€…å¼‚æ­¥å€¼ã€‚\n\nä¸å¹¸çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªä¸ä¾¿çš„ç°å®æ˜¯åœ¨ JavaScript ä¸­æ— è¿”å›å€¼å‡½æ•°åœ¨æŠ€æœ¯ä¸Šæ˜¯è¿”å› undefinedï¼Œè¿™å°±æ„å‘³ç€å½“ä½ æœ¬æ„æ˜¯è¿”å›æŸäº›å€¼æ—¶ï¼Œä½ å¾ˆå®¹æ˜“ä¼šä¸ç»æ„é—´å¼•å…¥å‰¯ä½œç”¨ã€‚\n\nå‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä¸ªäººå…»æˆäº†åœ¨ then() å‡½æ•°å†…éƒ¨ æ°¸è¿œè¿”å›æˆ–æŠ›å‡º çš„ä¹ æƒ¯ã€‚æˆ‘å»ºè®®ä½ ä¹Ÿè¿™æ ·åšã€‚\n\n### æŠ›å‡ºåŒæ­¥å¼‚å¸¸\n\nè°ˆåˆ° throwï¼Œè¿™æ˜¯è®© promises æ›´åŠ èµçš„ä¸€ç‚¹ã€‚æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨ç”¨æˆ·å·²ç»ç™»å‡ºæ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªåŒæ­¥å¼‚å¸¸ã€‚è¿™ä¼šéå¸¸ç®€å•ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        if (user.isLoggedOut()) {\n            throw new Error('user logged out!') // throwing a synchronous error!\n        }\n\n        if (inMemoryCache[user.id]) {\n            return inMemoryCache[user.id]       // returning a synchronous value!\n        }\n\n        return getUserAccountById(user.id)   // returning a promise!\n    }).then(function (userAccount) {\n        // I got a user account!\n    }).catch(function (err) {\n        // Boo, I got an error!\n    })\n```\n\nå¦‚æœç”¨æˆ·å·²ç»ç™»å‡ºï¼Œæˆ‘ä»¬çš„ catch() ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªåŒæ­¥å¼‚å¸¸ï¼Œå¹¶ä¸”å¦‚æœ åç»­çš„ promise ä¸­å‡ºç°å¼‚æ­¥å¼‚å¸¸ï¼Œä»–ä¹Ÿä¼šæ¥æ”¶åˆ°ã€‚å†å¼ºè°ƒä¸€æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°å¹¶ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªå¼‚å¸¸æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥è¿”å›çš„ã€‚\n\nè¿™ç§ç‰¹æ€§éå¸¸æœ‰ç”¨ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¸®åŠ©å®šä½ä»£ç é—®é¢˜ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœåœ¨ then() å‡½æ•°å†…éƒ¨ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œæˆ‘ä»¬æ‰§è¡Œ JSON.parse()ï¼Œå¦‚æœ JSON æ ¼å¼æ˜¯é”™è¯¯çš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å¦‚æœæ˜¯ä½¿ç”¨å›è°ƒé£æ ¼ï¼Œè¿™ä¸ªé”™è¯¯å¾ˆå¯èƒ½å°±ä¼šè¢«åƒæ‰ï¼Œä½†æ˜¯ä½¿ç”¨ promisesï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“çš„åœ¨ catch() å‡½æ•°ä¸­å¤„ç†å®ƒäº†ã€‚\n\n# è¿›é˜¶é”™è¯¯\n\nå¥½äº†ï¼Œç°åœ¨ä½ å·²ç»äº†è§£äº†è®© promises å˜çš„è¶…çº§ç®€å•çš„æŠ€å·§ï¼Œç°åœ¨è®©æˆ‘ä»¬èŠä¸€èŠä¸€äº›ç‰¹æ®Šåœºæ™¯ã€‚\nè¿™äº›é”™è¯¯ä¹‹æ‰€ä»¥è¢«æˆ‘å½’ç±»ä¸º â€œè¿›é˜¶â€ ï¼Œæ˜¯å› ä¸ºæˆ‘åªè§è¿‡è¿™äº›é”™è¯¯å‘ç”Ÿåœ¨å¯¹ promises å·²ç»æœ‰ç›¸å½“æ·±å…¥äº†è§£çš„å¼€å‘è€…èº«ä¸Šã€‚ä½†æ˜¯ä¸ºäº†è§£å†³æ–‡ç« æœ€å¼€å§‹çš„è°œé¢˜ï¼Œæˆ‘ä»¬å¿…é¡»è®¨è®ºä¸€ä¸‹è¿™äº›é”™è¯¯ã€‚\n\n### è¿›é˜¶é”™è¯¯ #1ï¼šä¸çŸ¥é“ Promise.resolve()\n\nå¦‚æˆ‘ä¸Šé¢æ‰€åˆ—ä¸¾çš„ï¼Œpromises åœ¨å°è£…åŒæ­¥ä¸å¼‚æ­¥ä»£ç æ—¶éå¸¸çš„æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å‘ç°ä½ ç»å¸¸å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š\n\n```javascript\n    new Promise(function (resolve, reject) {\n        resolve(someSynchronousValue)\n    }).then(/* ... */)\n```\n\nä½ ä¼šå‘ç°ä½¿ç”¨ Promise.resolve ä¼šæ›´åŠ ç®€æ´ï¼š\n\n```javascript\n    Promise.resolve(someSynchronousValue).then(/* ... */);\n```\n\nå®ƒåœ¨ç”¨æ¥æ•è·åŒæ­¥å¼‚å¸¸æ—¶ä¹Ÿæå…¶çš„å¥½ç”¨ã€‚ç”±äºå®ƒå®åœ¨æ˜¯å¥½ç”¨ï¼Œå› æ­¤æˆ‘å·²ç»å…»æˆäº†åœ¨æˆ‘æ‰€æœ‰ promise å½¢å¼çš„ API æ¥å£ä¸­è¿™æ ·ä½¿ç”¨å®ƒï¼š\n\n```javascript\n    function somePromiseAPI() {\n        return Promise.resolve().then(function () {\n            doSomethingThatMayThrow()\n            return 'foo'\n        }).then(/* ... */)\n    }\n```\n\nåˆ‡è®°ï¼šä»»ä½•æœ‰å¯èƒ½ throw åŒæ­¥å¼‚å¸¸çš„ä»£ç éƒ½æ˜¯ä¸€ä¸ªåç»­ä¼šå¯¼è‡´å‡ ä¹æ— æ³•è°ƒè¯•å¼‚å¸¸çš„æ½œåœ¨å› ç´ ã€‚ä½†æ˜¯å¦‚æœä½ å°†æ‰€æœ‰ä»£ç éƒ½ä½¿ç”¨ Promise.resolve() å°è£…ï¼Œé‚£ä¹ˆä½ æ€»æ˜¯å¯ä»¥åœ¨ä¹‹åä½¿ç”¨ catch() æ¥æ•è·å®ƒã€‚\n\nç±»ä¼¼çš„ï¼Œè¿˜æœ‰ Promise.reject() ä½ å¯ä»¥ç”¨æ¥è¿”å›ä¸€ä¸ªç«‹åˆ»è¿”å›å¤±è´¥çš„ promiseã€‚\n\n```javascript\n    Promise.reject(new Error('some awful error'));\n```\n\n### è¿›é˜¶é”™è¯¯ #2ï¼šcatch() ä¸ then(null, ...) å¹¶éå®Œå…¨ç­‰ä»·\n\nä¹‹å‰æˆ‘è¯´è¿‡ catch() ä»…ä»…æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚å› æ­¤ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š\n\n```javascript\n    somePromise().catch(function (err) {\n        // handle error\n    })\n\n    somePromise().then(null, function (err) {\n        // handle error\n    })\n```\n\nç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š\n\n```javascript\n    somePromise().then(function () {\n        return someOtherPromise();\n    }).catch(function (err) {\n        // handle error\n    });\n\n    somePromise().then(function () {\n        return someOtherPromise();\n    }, function (err) {\n        // handle error\n    });\n```\n\nå¦‚æœä½ å¥½å¥‡ä¸ºä½•è¿™ä¸¤æ®µä»£ç å¹¶ä¸ç­‰ä»·ï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹å¦‚æœç¬¬ä¸€ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸ä¼šå‘ç”Ÿä»€ä¹ˆï¼š\n\n```javascript\n    somePromise().then(function () {\n        throw new Error('oh noes')\n    }).catch(function (err) {\n        // I caught your error! :)\n    })\n\n    somePromise().then(function () {\n        throw new Error('oh noes')\n    }, function (err) {\n        // I didn't catch your error! :(\n    })\n```\n\nå› æ­¤ï¼Œå½“ä½ ä½¿ç”¨ then(resolveHandler, rejectHandler) è¿™ç§å½¢å¼æ—¶ï¼ŒrejectHandler å¹¶ä¸ä¼šæ•è·ç”± resolveHandler å¼•å‘çš„å¼‚å¸¸ã€‚\n\né‰´äºæ­¤ï¼Œæˆ‘ä¸ªäººçš„ä¹ æƒ¯æ˜¯ä¸é€‚ç”¨ then() çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè€Œæ˜¯æ€»æ˜¯ä½¿ç”¨ catch()ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å½“æˆ‘å†™ä¸€äº›å¼‚æ­¥çš„ Mocha æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæˆ‘å¯èƒ½ä¼šå¸Œæœ›ç”¨ä¾‹çš„å¼‚å¸¸å¯ä»¥æ­£ç¡®çš„è¢«æŠ›å‡ºï¼š\n\n```javascript\n    it('should throw an error', function () {\n        return doSomethingThatThrows().then(function () {\n            throw new Error('I expected an error!')\n        }, function (err) {\n            should.exist(err)\n        })\n    })\n```\n\nè¯´åˆ°è¿™é‡Œï¼Œ[Mocha](http://mochajs.org/) å’Œ [Chai](http://chaijs.com/) ç”¨æ¥æµ‹è¯• promise æ¥å£æ—¶ï¼Œæ˜¯ä¸€å¯¹éå¸¸å¥½çš„ç»„åˆã€‚ [pouchdb-plugin-seed](https://github.com/pouchdb/plugin-seed) é¡¹ç›®ä¸­æœ‰ä¸€äº› [ç¤ºä¾‹](https://github.com/pouchdb/plugin-seed/blob/master/test/test.js) å¯ä»¥å¸®åŠ©ä½ å…¥é—¨ã€‚\n\n### è¿›é˜¶é”™è¯¯ #3ï¼špromises vs promises factories\n\nå½“æˆ‘ä»¬å¸Œæœ›æ‰§è¡Œä¸€ä¸ªä¸ªçš„æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ï¼Œå³ç±»ä¼¼ Promise.all() ä½†æ˜¯å¹¶éå¹¶è¡Œçš„æ‰§è¡Œæ‰€æœ‰ promisesã€‚\n\nä½ å¯èƒ½å¤©çœŸçš„å†™ä¸‹è¿™æ ·çš„ä»£ç ï¼š\n\n```javascript\n    function executeSequentially(promises) {\n        var result = Promise.resolve()\n        promises.forEach(function (promise) {\n            result = result.then(promise)\n        })\n\n        return result\n    }\n```\n\nä¸å¹¸çš„æ˜¯ï¼Œè¿™ä»½ä»£ç ä¸ä¼šæŒ‰ç…§ä½ çš„æœŸæœ›å»æ‰§è¡Œï¼Œä½ ä¼ å…¥ executeSequentially() çš„ promises ä¾ç„¶ä¼šå¹¶è¡Œæ‰§è¡Œã€‚\n\nå…¶æ ¹æºåœ¨äºä½ æ‰€å¸Œæœ›çš„ï¼Œå®é™…ä¸Šæ ¹æœ¬ä¸æ˜¯å»æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ã€‚ä¾ç…§ promises è§„èŒƒï¼Œä¸€æ—¦ä¸€ä¸ª promise è¢«åˆ›å»ºï¼Œå®ƒå°±è¢«æ‰§è¡Œäº†ã€‚å› æ­¤ä½ å®é™…ä¸Šéœ€è¦çš„æ˜¯ä¸€ä¸ª promise factories æ•°ç»„ã€‚\n\n```javascript\n    function executeSequentially(promiseFactories) {\n        var result = Promise.resolve()\n        promiseFactories.forEach(function (promiseFactory) {\n            result = result.then(promiseFactory)\n        })\n\n        return result\n    }\n```\n\næˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼šâ€œè¿™æ˜¯å“ªä¸ªè§é¬¼çš„ Java ç¨‹åºçŒ¿ï¼Œä»–ä¸ºå•¥åœ¨è¯´ factoriesï¼Ÿâ€ ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ª promises factory æ˜¯ååˆ†ç®€å•çš„ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªå¯ä»¥è¿”å› promise çš„å‡½æ•°ï¼š\n\n```javascript\n    function myPromiseFactory() {\n        return somethingThatCreatesAPromise();\n    }\n```\n\nä¸ºä½•è¿™æ ·å°±å¯ä»¥äº†ï¼Ÿè¿™æ˜¯å› ä¸ºä¸€ä¸ª promise factory åœ¨è¢«æ‰§è¡Œä¹‹å‰å¹¶ä¸ä¼šåˆ›å»º promiseã€‚å®ƒå°±åƒä¸€ä¸ª then å‡½æ•°ä¸€æ ·ï¼Œè€Œå®é™…ä¸Šï¼Œå®ƒä»¬å°±æ˜¯å®Œå…¨ä¸€æ ·çš„ä¸œè¥¿ã€‚\n\nå¦‚æœä½ æŸ¥çœ‹ä¸Šé¢çš„ executeSequentially() å‡½æ•°ï¼Œç„¶åæƒ³è±¡ myPromiseFactory è¢«åŒ…è£¹åœ¨ result.then(...) ä¹‹ä¸­ï¼Œä¹Ÿè®¸ä½ è„‘ä¸­çš„å°ç¯æ³¡å°±ä¼šäº®èµ·ã€‚åœ¨æ­¤æ—¶æ­¤åˆ»ï¼Œå¯¹äº promise ä½ å°±ç®—æ˜¯æ‚Ÿé“äº†ã€‚\n\n### è¿›é˜¶é”™è¯¯ #4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª promises çš„ç»“æœæ€ä¹ˆåŠ\n\næœ‰æ—¶å€™ï¼Œä¸€ä¸ª promise ä¼šä¾èµ–äºå¦ä¸€ä¸ªï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›åŒæ—¶è·å¾—è¿™ä¸¤ä¸ª promises çš„è¾“å‡ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        return getUserAccountById(user.id)\n    }).then(function (userAccount) {\n        // dangit, I need the \"user\" object too!\n    })\n```\n\nä¸ºäº†æˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ Javascript å¼€å‘è€…ï¼Œå¹¶ä¸”é¿å…é‡‘å­—å¡”é—®é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°† user å¯¹è±¡å­˜åœ¨ä¸€ä¸ªæ›´é«˜çš„ä½œç”¨åŸŸä¸­çš„å˜é‡é‡Œï¼š\n\n```javascript\n    var user\n    getUserByName('nolan')\n    .then(function (result) {\n        user = result\n        return getUserAccountById(user.id)\n    }).then(function (userAccount) {\n        // okay, I have both the \"user\" and the \"userAccount\"\n    })\n```\n\nè¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºè¿™æ ·åšæœ‰äº›æ‚ç‰Œã€‚æˆ‘æ¨èçš„ç­–ç•¥æ˜¯æŠ›å¼ƒæˆè§ï¼Œæ‹¥æŠ±é‡‘å­—å¡”ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        return getUserAccountById(user.id).then(function (userAccount) {\n            // okay, I have both the \"user\" and the \"userAccount\"\n        })\n    })\n```\n\nâ€¦è‡³å°‘æš‚æ—¶è¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ã€‚ä¸€æ—¦ç¼©è¿›å¼€å§‹æˆä¸ºé—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡ Javascript å¼€å‘è€…ä»è¿œå¤æ—¶æœŸå°±å¼€å§‹ä½¿ç”¨çš„æŠ€å·§ï¼Œå°†å‡½æ•°æŠ½ç¦»åˆ°ä¸€ä¸ªå‘½åå‡½æ•°ä¸­ï¼š\n\n```javascript\n    function onGetUserAndUserAccount(user, userAccount) {\n        return doSomething(user, userAccount)\n    }\n\n    function onGetUser(user) {\n        return getUserAccountById(user.id).then(function (userAccount) {\n            return onGetUserAndUserAccount(user, userAccount)\n        })\n    }\n\n    getUserByName('nolan')\n    .then(onGetUser)\n    .then(function () {\n        // at this point, doSomething() is done, and we are back to indentation 0\n    })\n```\n\nç”±äºä½ çš„ promise ä»£ç å¼€å§‹å˜å¾—æ›´åŠ å¤æ‚ï¼Œä½ å¯èƒ½å‘ç°è‡ªå·±å¼€å§‹å°†è¶Šæ¥è¶Šå¤šçš„å‡½æ•°æŠ½ç¦»åˆ°å‘½åå‡½æ•°ä¸­ï¼Œæˆ‘å‘ç°è¿™æ ·åšï¼Œä½ çš„ä»£ç ä¼šè¶Šæ¥è¶Šæ¼‚äº®ï¼Œå°±åƒè¿™æ ·ï¼š\n\n```javascript\n    putYourRightFootIn()\n    .then(putYourRightFootOut)\n    .then(putYourRightFootIn)\n    .then(shakeItAllAbout)\n```\n\n`è¿™å°±æ˜¯ promises çš„é‡ç‚¹ã€‚`\n\n\n### è¿›é˜¶é”™è¯¯ #5ï¼špromises ç©¿é€\n\næœ€åï¼Œè¿™ä¸ªé”™è¯¯å°±æ˜¯æˆ‘å¼€å¤´è¯´çš„ promises è°œé¢˜æ‰€å½±å°„çš„é”™è¯¯ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç¨€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶ä¸”å¯èƒ½å®Œå…¨ä¸ä¼šå‡ºç°åœ¨ä½ çš„ä»£ç ä¸­ï¼Œä½†æ˜¯çš„çš„ç¡®ç¡®éœ‡æƒŠäº†æˆ‘ã€‚\n\nä½ è®¤ä¸ºä¸‹é¢çš„ä»£ç ä¼šæ‰“å°å‡ºä»€ä¹ˆï¼Ÿ\n\n```javascript\n    Promise.resolve('foo')\n    .then(Promise.resolve('bar'))\n    .then(function (result) {\n        console.log(result);\n    });\n```\n\nå¦‚æœä½ è®¤ä¸ºå®ƒä¼šæ‰“å°å‡º barï¼Œé‚£ä¹ˆä½ å°±é”™äº†ã€‚å®ƒå®é™…ä¸Šæ‰“å°å‡ºæ¥çš„æ˜¯ fooï¼\n\nå‘ç”Ÿè¿™ä¸ªçš„åŸå› æ˜¯å¦‚æœä½ åƒ then() ä¼ é€’çš„å¹¶éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæ¯”å¦‚ promiseï¼‰ï¼Œå®ƒå®é™…ä¸Šä¼šå°†å…¶è§£é‡Šä¸º then(null)ï¼Œè¿™å°±ä¼šå¯¼è‡´å‰ä¸€ä¸ª promise çš„ç»“æœä¼šç©¿é€ä¸‹é¢ã€‚ä½ å¯ä»¥è‡ªå·±æµ‹è¯•ä¸€ä¸‹ï¼š\n\n```javascript\n    Promise.resolve('foo')\n    .then(null)\n    .then(function (result) {\n        console.log(result)\n    })\n```\n\næ·»åŠ ä»»æ„æ•°é‡çš„ then(null)ï¼Œå®ƒä¾ç„¶ä¼šæ‰“å° fooã€‚\n\nè¿™å®é™…ä¸Šåˆå›åˆ°äº†æˆ‘ä¹‹å‰è¯´çš„ promises vs promise factoriesã€‚ç®€å•çš„è¯´ï¼Œä½ å¯ä»¥ç›´æ¥ä¼ é€’ä¸€ä¸ª promise åˆ° then() å‡½æ•°ä¸­ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šæŒ‰ç…§ä½ æœŸæœ›çš„å»æ‰§è¡Œã€‚then() æ˜¯æœŸæœ›è·å–ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤ä½ å¸Œæœ›åšçš„æœ€å¯èƒ½æ˜¯ï¼š\n\n```javascript\n    Promise.resolve('foo').then(function () {\n        return Promise.resolve('bar')\n    }).then(function (result) {\n        console.log(result)\n    })\n```\n\nè¿™æ ·ä»–å°±ä¼šå¦‚æˆ‘ä»¬æ‰€æƒ³çš„æ‰“å°å‡º barã€‚\n\n`å› æ­¤è®°ä½ï¼šæ°¸è¿œéƒ½æ˜¯å¾€ then() ä¸­ä¼ é€’å‡½æ•°ï¼`\n\n\n### æœŸå¾… async/await\nåœ¨ â€œ[Taming the asynchronous beast with ES7](https://pouchdb.com/2015/03/05/taming-the-async-beast-with-es7.html)â€ ä¸­æåˆ°çš„é‡ç‚¹ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘æ¢ç©¶äº† ES7 çš„ async/await å…³é”®å­—ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å°† promises æ›´æ·±åº¦çš„ç»“åˆå…¥è¯­è¨€ã€‚ä¸å†ä¼šè¦æ±‚æˆ‘ä»¬å»ç¼–å†™ä¼ªåŒæ­¥çš„ä»£ç ï¼ˆä»¥åŠä¸€ä¸ªå‡çš„ catch() å‡½æ•°ï¼Œè™½ç„¶åƒï¼Œä½†æ˜¯å¹¶éæ˜¯ catchï¼‰ï¼ŒES7 å°†ä¼šå…è®¸æˆ‘ä»¬ä½¿ç”¨çœŸæ­£çš„ try/catch/return å…³é”®å­—ï¼Œå°±åƒæˆ‘ä»¬åœ¨ CS 101 ä¸Šå­¦çš„ä¸€æ ·ã€‚\n\nè¿™å¯¹äº Javascript è¯­è¨€æ¥è¯´æ˜¯ä¸€ä¸ªå¤§ç¦éŸ³ã€‚å› ä¸ºå³ä½¿åˆ°æœ€åï¼Œåªè¦æˆ‘ä»¬çš„å·¥å…·ä¸å‘Šè¯‰æˆ‘ä»¬åšé”™äº†ï¼Œè¿™äº› promise åæ¨¡å¼ä¾ç„¶ä¼šä¸€ç›´å‡ºç°ã€‚\n\nä» JavaScript çš„å†å²æ¥çœ‹ï¼Œæˆ‘è®¤ä¸ºå…¬æ­£çš„è¯„ä»·æ¥è¯´ JSLint ä¸ JSHint å¯¹ç¤¾åŒºçš„è´¡çŒ®æ˜¯é«˜äº JavaScript: The Good Parts çš„ï¼Œè™½ç„¶ä»–ä»¬åŒ…å«çš„ä¿¡æ¯å®é™…ä¸Šæ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯å®ƒä»¬çš„åŒºåˆ«åœ¨äº è¢«å‘ŠçŸ¥ä½ åœ¨ä½ ä»£ç ä¸­çŠ¯çš„é”™è¯¯ ä¸ä½ å»é˜…è¯»ä¸€æœ¬ä¹¦ç±ï¼Œå»ç†è§£å…¶ä»–äººçŠ¯çš„é”™è¯¯ã€‚\n\nES7 çš„ async/await çš„ç¾å¦™åœ¨äºï¼Œä½ çš„é”™è¯¯ä¼šè¢«ä½œä¸ºè¯­æ³•æˆ–è€…ç¼–è¯‘å™¨é”™è¯¯æç¤ºå‡ºæ¥ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶çš„ bugã€‚ä¸è¿‡å°±ç›®å‰è€Œè¨€ï¼Œäº†è§£ promise å¯ä»¥åšä»€ä¹ˆä»¥åŠå¦‚ä½•åœ¨ ES5 ä¸ ES6 ä¸­æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ä¾ç„¶æ˜¯æœ‰å¿…è¦çš„ã€‚\n\nå› æ­¤å½“æˆ‘æ„è¯†åˆ°ï¼Œå°±åƒ JavaScript: The Good Parts ä¸€æ ·ï¼Œè¿™ç¯‡åšæ–‡å¯èƒ½åªä¼šæœ‰éå¸¸æœ‰é™çš„å½±å“çš„æ—¶å€™ï¼Œæˆ‘å¸Œæœ›å½“ä½ å‘ç°å…¶ä»–äººåœ¨çŠ¯åŒæ ·çš„é”™è¯¯çš„æ—¶å€™ï¼Œä½ å¯ä»¥å°†è¿™ç¯‡åšæ–‡æä¾›ç»™ä»–ä»¬ã€‚å› ä¸ºç°åœ¨ä¾ç„¶æœ‰å¾ˆå¤šåŒå­¦éœ€è¦æ‰¿è®¤: â€œI have a problem with promises!â€\n\n```javascript\n\n// Promise.all is good for executing many promises at once\nPromise.all([\n  promise1,\n  promise2\n]);\n\n// Promise.resolve is good for wrapping synchronous code\nPromise.resolve().then(function () {\n  if (somethingIsNotRight()) {\n    throw new Error(\"I will be rejected asynchronously!\");\n  } else {\n    return \"This string will be resolved asynchronously!\";\n  }\n});\n\n// execute some promises one after the other.\n// this takes an array of promise factories, i.e.\n// an array of functions that RETURN a promise\n// (not an array of promises themselves; those would execute immediately)\nfunction sequentialize(promiseFactories) {\n  var chain = Promise.resolve();\n  promiseFactories.forEach(function (promiseFactory) {\n    chain = chain.then(promiseFactory);\n  });\n  return chain;\n}\n\n// Promise.race is good for setting a timeout:\nPromise.race([\n  new Promise(function (resolve, reject) {\n    setTimeout(reject, 10000); // timeout after 10 secs\n  }),\n  doSomethingThatMayTakeAwhile()\n]);\n\n// Promise finally util similar to Q.finally\n// e.g. promise.then(...).catch().then(...).finally(...)\nfunction finally (promise, cb) {\n  return promise.then(function (res) {\n    var promise2 = cb();\n    if (typeof promise2.then === 'function') {\n      return promise2.then(function () {\n        return res;\n      });\n    }\n    return res;\n  }, function (reason) {\n    var promise2 = cb();\n    if (typeof promise2.then === 'function') {\n      return promise2.then(function () {\n        throw reason;\n      });\n    }\n    throw reason;\n  });\n};\n\n```\n","source":"_posts/2017-03-06-we-have-a-problem-with-promise.markdown","raw":"---\nlayout:     post\ntitle:      \"We have a problem with promise\"\nsubtitle:   \"Promise\"\ndate:       2016-07-04 15:23\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Promise\n---\n\n### *ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«*\n\n```javascript\n    doSomething().then(() => {\n        return doSomethingElse()\n    })\n\n    doSomething().then(() => {\n        doSomethingElse()\n    })\n\n    doSomething().then(doSomethingElse())\n\n    doSomething().then(doSomethingElse)\n```\n\n## Promiseçš„èµ·æº\n\nå¦‚æœä½ é˜…è¯»äº† promises çš„ä¸€äº›ç›¸å…³æ–‡çŒ®ï¼Œä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªè¯ [é‡‘å­—å¡”é—®é¢˜](https://medium.com/@wavded/managing-node-js-callback-hell-1fe03ba8baf#.ca5u6o9fl) ç»å¸¸å‡ºç°ã€‚å®ƒæè¿°çš„æ˜¯å¤§é‡çš„å›è°ƒå‡½æ•°æ…¢æ…¢å‘å³ä¾§å±å¹•å»¶ä¼¸çš„ä¸€ç§çŠ¶æ€ã€‚\n\nPromises çš„ç¡®è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”ä¸ä»…ä»…æ˜¯ç¼©è¿›é—®é¢˜ã€‚å°±åƒåœ¨ [Callback Hellçš„æ•‘èµ](http://youtu.be/hf1T_AONQJU) ä¸­æè¿°çš„ä¸€æ ·ï¼Œå›è°ƒå‡½æ•°çœŸæ­£çš„é—®é¢˜åœ¨äºä»–å‰¥å¤ºäº†æˆ‘ä»¬ä½¿ç”¨ return å’Œ throw è¿™äº›å…³é”®å­—çš„èƒ½åŠ›ã€‚ç›¸åï¼Œæˆ‘ä»¬çš„æ•´ä¸ªä»£ç æµç¨‹éƒ½æ˜¯åŸºäºå‰¯ä½œç”¨çš„: ä¸€ä¸ªå‡½æ•°ä¼šé™„å¸¦è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚\n\n> åŸæ–‡å…³äºå‰¯ä½œç”¨çš„æè¿°å¹¶ä¸èƒ½å¾ˆç›´è§‚çš„è¿›è¡Œç†è§£ï¼Œå»ºè®®å‚è€ƒ [WIKI](https://en.wikipedia.org/wiki/Side_effect_(computer_science)) ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå‡½æ•°é™¤äº†ä¼šè¿”å›ä¸€ä¸ªå€¼ä¹‹å¤–ï¼Œè¿˜ä¼šä¿®æ”¹å‡½æ•°ä»¥å¤–çš„çŠ¶æ€å¦‚å…¨å±€å˜é‡ç­‰ç­‰ã€‚å®é™…ä¸Šæ‰€æœ‰å¼‚æ­¥è°ƒç”¨éƒ½å¯ä»¥è§†ä¸ºå¸¦æœ‰å‰¯ä½œç”¨çš„è¡Œä¸ºã€‚\n\nå¹¶ä¸”å®é™…ä¸Šï¼Œå›è°ƒæ›´åŠ æ¼äººçš„æ˜¯ï¼Œä»–ä¼šå°†æˆ‘ä»¬é€šå¸¸åœ¨å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸­èƒ½è·å¾—çš„*å †æ ˆ*ç ´åã€‚ç¼–å†™ä»£ç æ—¶å¦‚æœæ— æ³•è·å–å †æ ˆå°±åƒå¼€è½¦æ—¶æ²¡æœ‰åˆ¹è½¦ä¸€æ ·: ä¸åˆ°ç”¨çš„æ—¶å€™ï¼Œä½ ä¸ä¼šçŸ¥é“å®ƒæœ‰å¤šé‡è¦ã€‚\n\nPromises ç»™äºˆæˆ‘ä»¬çš„å°±æ˜¯åœ¨æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥æ—¶ä¸¢å¤±çš„æœ€é‡è¦çš„è¯­è¨€åŸºçŸ³: return, throw ä»¥åŠå †æ ˆã€‚ä½†æ˜¯æƒ³è¦ promises èƒ½å¤Ÿæä¾›è¿™äº›ä¾¿åˆ©ç»™ä½ çš„å‰ææ˜¯ä½ çŸ¥é“å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ã€‚\n\n## æ–°æ‰‹é”™è¯¯\n\nPromiseå¯¹äºä¸åŒçš„äººæœ‰ä¸åŒçš„ç†è§£å’Œè§‚ç‚¹ï¼Œä½†æ˜¯è¿™ç¯‡æ–‡ç« æˆ‘ç‰¹è´¨[æ­£å¼æ ‡å‡†](https://promisesaplus.com/), åœ¨ç°ä»£æµè§ˆå™¨ä¸­æš´éœ²ä¸ºwindow.Promiseã€‚è™½ç„¶å¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰windows.Promise,ä½†æ˜¯å¯ä»¥å¯»æ‰¾ä¸€äº›pollyfill,æ¯”å¦‚[Lie](https://github.com/calvinmetcalf/lie)ã€[bluebird](https://github.com/petkaantonov/bluebird)ã€‚\n\n### æ–°æ‰‹é”™è¯¯ #1ï¼š promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\nè§‚å¯Ÿå¤§å®¶å¦‚ä½•ä½¿ç”¨ PouchDB è¿™ç±»å¤§å‹çš„ promise é£æ ¼çš„APIï¼Œæˆ‘å‘ç°å¤§é‡é”™è¯¯çš„ promise ä½¿ç”¨å½¢å¼ã€‚æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ä¸‹é¢è¿™ä¸ª:\n\n```javascript\n    remotedb.allDocs({\n        include_docs: true,\n        attachments: true\n    }).then(function (result) {\n        var docs = result.rows;\n        docs.forEach(function(element) {\n            localdb.put(element.doc).then(function(response) {\n                alert('Pulled doc with id ' + element.doc._id + ' and added to local db.');\n            }).catch(function (err) {\n                if (err.status == 409) {\n                    localdb.get(element.doc._id).then(function (resp) {\n                        localdb.remove(resp._id, resp._rev).then(function (resp) {\n                                // et cetera...\n                        })\n                    })\n                }\n            })\n        })\n    })\n\n```\n\næ˜¯çš„ï¼Œå®é™…ä¸Šä½ å¯ä»¥åƒä½¿ç”¨å›è°ƒä¸€æ ·ä½¿ç”¨ promisesï¼Œæ©ï¼Œå°±åƒç”¨æ‰“ç£¨æœºå»å‰Šè„šè¶¾ç”²ä¸€æ ·ï¼Œä½ ç¡®å®å¯ä»¥è¿™ä¹ˆåšã€‚\n\nå¹¶ä¸”å¦‚æœä½ ä»¥ä¸ºè¿™æ ·çš„é”™è¯¯åªé™äºåˆå­¦è€…ï¼Œé‚£ä¹ˆä½ ä¼šæƒŠè®¶äºæˆ‘å®é™…ä¸Šæ˜¯åœ¨é»‘è“å®˜æ–¹å¼€å‘è€…åšå®¢ä¸Šçœ‹åˆ°ä¸Šé¢çš„ä»£ç ã€‚è€çš„å›è°ƒé£æ ¼çš„ä¹ æƒ¯éš¾ä»¥æ¶ˆç­ã€‚(è‡³å¼€å‘è€…: æŠ±æ­‰é€‰äº†ä½ çš„ä¾‹å­ï¼Œä½†æ˜¯ä½ çš„ä¾‹å­å°†ä¼šæœ‰ç§¯æçš„æ•™è‚²æ„ä¹‰)\n\næ­£ç¡®çš„é£æ ¼åº”è¯¥æ˜¯:\n\n```javascript\n    remotedb.allDocs(...).then(function (resultOfAllDocs) {\n        return localdb.put(...)\n    }).then(function (resultOfPut) {\n        return localdb.get(...)\n    }).then(function (resultOfGet) {\n        return localdb.put(...)\n    }).catch(function (err) {\n        console.log(err)\n    })\n```\nè¿™ç§å†™æ³•è¢«ç§°ä¸º composing promises ï¼Œæ˜¯ promises çš„å¼ºå¤§èƒ½åŠ›ä¹‹ä¸€ã€‚æ¯ä¸€ä¸ªå‡½æ•°åªä¼šåœ¨å‰ä¸€ä¸ª promise è¢«è°ƒç”¨å¹¶ä¸”å®Œæˆå›è°ƒåè°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°ä¼šè¢«å‰ä¸€ä¸ª promise çš„è¾“å‡ºè°ƒç”¨ï¼Œç¨åæˆ‘ä»¬åœ¨è¿™å—åšæ›´å¤šçš„è®¨è®ºã€‚\n\n### æ–°æ‰‹é”™è¯¯ #2ï¼š WTF, ç”¨äº† promises åæ€ä¹ˆç”¨ forEach?\n\nè¿™é‡Œæ˜¯å¤§å¤šæ•°äººå¯¹äº promises çš„ç†è§£å¼€å§‹å‡ºç°åå·®ã€‚ä¸€æ—¦å½“ä»–ä»¬è¦ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ forEach() å¾ªç¯ (æ— è®ºæ˜¯ for å¾ªç¯è¿˜æ˜¯ while å¾ªç¯)ï¼Œä»–ä»¬å®Œå…¨ä¸çŸ¥é“å¦‚ä½•å°† promises ä¸å…¶ä¸€èµ·ä½¿ã€‚å› æ­¤ä»–ä»¬å°±ä¼šå†™ä¸‹ç±»ä¼¼è¿™æ ·çš„ä»£ç ã€‚\n\n```javascript\n    // I want to remove() all docs\n    db.allDocs({include_docs: true}).then(function (result) {\n        result.rows.forEach(function (row) {\n            db.remove(row.doc)\n        })\n    }).then(function () {\n        // I naively believe all docs have been removed() now!\n    })\n```\n\nè¿™ä»½ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿé—®é¢˜åœ¨äºç¬¬ä¸€ä¸ªå‡½æ•°å®é™…ä¸Šè¿”å›çš„æ˜¯ undefinedï¼Œè¿™æ„å‘³ç€ç¬¬äºŒä¸ªæ–¹æ³•ä¸ä¼šç­‰å¾…æ‰€æœ‰ documents éƒ½æ‰§è¡Œ db.remove()ã€‚å®é™…ä¸Šä»–ä¸ä¼šç­‰å¾…ä»»ä½•äº‹æƒ…ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨ä»»æ„æ•°é‡çš„æ–‡æ¡£è¢«åˆ é™¤åæ‰§è¡Œï¼\n\nè¿™æ˜¯ä¸€ä¸ªéå¸¸éšè”½çš„ bugï¼Œå› ä¸ºå¦‚æœ PouchDB åˆ é™¤è¿™äº›æ–‡æ¡£è¶³å¤Ÿå¿«ï¼Œä½ çš„ UI ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ä¼šå®Œæˆæ­£å¸¸ï¼Œä½ å¯èƒ½ä¼šå®Œå…¨æ³¨æ„ä¸åˆ°æœ‰ä»€ä¹ˆä¸œè¥¿æœ‰é”™è¯¯ã€‚è¿™ä¸ª bug å¯èƒ½ä¼šåœ¨ä¸€äº›å¤æ€ªçš„ç«æ€é—®é¢˜æˆ–ä¸€äº›ç‰¹å®šçš„æµè§ˆå™¨ä¸­æš´éœ²å‡ºæ¥ï¼Œå¹¶ä¸”åˆ°æ—¶å¯èƒ½å‡ ä¹æ²¡æœ‰å¯èƒ½å»å®šä½é—®é¢˜ã€‚\n\nç®€è€Œè¨€ä¹‹ï¼ŒforEach()/for/while å¹¶éä½ å¯»æ‰¾çš„è§£å†³æ–¹æ¡ˆã€‚ä½ éœ€è¦çš„æ˜¯ Promise.all():\n\n```javascript\n    db.allDocs({include_docs: true}).then(function (result) {\n        return Promise.all(result.rows.map(function (row) {\n            return db.remove(row.doc)\n        }))\n    }).then(function (arrayOfResults) {\n        // All docs have really been removed() now!\n    })\n```\n\nä¸Šé¢çš„ä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¤§ä½“æ¥è¯´ï¼ŒPromise.all()ä¼šä»¥ä¸€ä¸ª promises æ•°ç»„ä¸ºè¾“å…¥ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ promiseã€‚è¿™ä¸ªæ–°çš„ promise ä¼šåœ¨æ•°ç»„ä¸­æ‰€æœ‰çš„ promises éƒ½æˆåŠŸè¿”å›åæ‰è¿”å›ã€‚ä»–æ˜¯å¼‚æ­¥ç‰ˆçš„ for å¾ªç¯ã€‚\n\nå¹¶ä¸” Promise.all() ä¼šå°†æ‰§è¡Œç»“æœç»„æˆçš„æ•°ç»„è¿”å›åˆ°ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚å½“ä½ å¸Œæœ›ä» PouchDB ä¸­è·å–å¤šä¸ªå¯¹è±¡æ—¶ï¼Œä¼šéå¸¸æœ‰ç”¨ã€‚æ­¤å¤–ä¸€ä¸ªæ›´åŠ æœ‰ç”¨çš„ç‰¹æ•ˆæ˜¯ï¼Œä¸€æ—¦æ•°ç»„ä¸­çš„ promise ä»»æ„ä¸€ä¸ªè¿”å›é”™è¯¯ï¼ŒPromise.all() ä¹Ÿä¼šè¿”å›é”™è¯¯ã€‚\n\n### æ–°æ‰‹é”™è¯¯ #3ï¼š å¿˜è®°ä½¿ç”¨ .catch()\n\nè¿™æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ã€‚å•çº¯çš„åšä¿¡è‡ªå·±çš„ promises ä¼šæ°¸è¿œä¸å‡ºç°å¼‚å¸¸ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šå¿˜è®°åœ¨ä»–ä»¬çš„ä»£ç ä¸­æ·»åŠ ä¸€ä¸ª .catch()ã€‚ç„¶è€Œä¸å¹¸çš„æ˜¯è¿™ä¹Ÿæ„å‘³ç€ï¼Œä»»ä½•è¢«æŠ›å‡ºçš„å¼‚å¸¸éƒ½ä¼šè¢«åƒæ‰ï¼Œå¹¶ä¸”ä½ æ— æ³•åœ¨ console ä¸­è§‚å¯Ÿåˆ°ä»–ä»¬ã€‚è¿™ç±»é—®é¢˜ debug èµ·æ¥ä¼šéå¸¸ç—›è‹¦ã€‚\n\n> ç±»ä¼¼ Bluebird ä¹‹ç±»çš„ Promise åº“ä¼šåœ¨è¿™ç§åœºæ™¯æŠ›å‡º UnhandledRejectionError è­¦ç¤ºæœ‰æœªå¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç±»æƒ…å†µä¸€æ—¦å‘ç°ï¼Œå°±ä¼šé€ æˆè„šæœ¬å¼‚å¸¸ï¼Œåœ¨ Node ä¸­æ›´ä¼šé€ æˆè¿›ç¨‹ Crash çš„é—®é¢˜ï¼Œå› æ­¤æ­£ç¡®çš„æ·»åŠ  .catch() éå¸¸é‡è¦ã€‚ è¯‘è€…æ³¨\n\nä¸ºäº†é¿å…è¿™ç±»è®¨åŒçš„åœºæ™¯ï¼Œæˆ‘ä¹ æƒ¯äºåƒä¸‹é¢çš„ä»£ç ä¸€æ ·ä½¿ç”¨ promise:\n\n```javascript\n    somePromise().then(function () {\n        return anotherPromise();\n    }).then(function () {\n        return yetAnotherPromise();\n    }).catch(console.log.bind(console)); // <-- this is badass\n```\n\nå³ä½¿ä½ åšä¿¡ä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œæ·»åŠ ä¸€ä¸ª catch() æ€»å½’æ˜¯æ›´åŠ è°¨æ…çš„ã€‚å¦‚æœä½ çš„å‡è®¾æœ€ç»ˆè¢«å‘ç°æ˜¯é”™è¯¯çš„ï¼Œå®ƒä¼šè®©ä½ çš„ç”Ÿæ´»æ›´åŠ ç¾å¥½ã€‚\n\n### æ–°æ‰‹é”™è¯¯ #4ï¼šä½¿ç”¨ â€œdeferredâ€\nè¿™æ˜¯ä¸€ä¸ªæˆ‘ç»å¸¸å¯ä»¥çœ‹åˆ°çš„é”™è¯¯ï¼Œä»¥è‡³äºæˆ‘ç”šè‡³ä¸æ„¿æ„åœ¨è¿™é‡Œé‡å¤å®ƒï¼Œå°±åƒæƒ§æ€• Beetlejuice ä¸€æ ·ï¼Œä»…ä»…æ˜¯æåˆ°å®ƒçš„åå­—ï¼Œå°±ä¼šå¬å”¤å‡ºæ¥æ›´å¤šã€‚\n\nç®€å•çš„è¯´ï¼Œpromises æ‹¥æœ‰ä¸€ä¸ªæ¼«é•¿å¹¶ä¸”æˆå‰§åŒ–çš„å†å²ï¼ŒJavascript ç¤¾åŒºèŠ±è´¹äº†å¤§é‡çš„æ—¶é—´è®©å…¶èµ°ä¸Šæ­£è½¨ã€‚åœ¨æ—©æœŸï¼Œdeferred åœ¨ Qï¼ŒWhenï¼ŒRSVPï¼ŒBluebirdï¼ŒLieç­‰ç­‰çš„ â€œä¼˜ç§€â€ ç±»åº“ä¸­è¢«å¼•å…¥ï¼Œ jQuery ä¸ Angular åœ¨ä½¿ç”¨ ES6 Promise è§„èŒƒä¹‹å‰ï¼Œéƒ½æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å¼ç¼–å†™ä»£ç ã€‚\n\nå› æ­¤å¦‚æœä½ åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è¿™ä¸ªè¯ (æˆ‘ä¸ä¼šæŠŠè¿™ä¸ªè¯é‡å¤ç¬¬ä¸‰éï¼)ï¼Œä½ å°±åšé”™äº†ã€‚ä¸‹é¢æ˜¯è¯´æ˜ä¸€ä¸‹å¦‚ä½•é¿å…å®ƒã€‚\n\né¦–å…ˆï¼Œå¤§éƒ¨åˆ† promises ç±»åº“éƒ½ä¼šæä¾›ä¸€ä¸ªæ–¹å¼å»åŒ…è£…ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ promises å¯¹è±¡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒAngularçš„ $q æ¨¡å—å…è®¸ä½ ä½¿ç”¨ $q.when åŒ…è£¹é $q çš„ promisesã€‚å› æ­¤ Angular ç”¨æˆ·å¯ä»¥è¿™æ ·ä½¿ç”¨ PouchDB promises.\n\n```javascript\n    $q.when(db.put(doc)).then(/* ... */); // <-- this is all the code you need\n```\n\nå¦ä¸€ç§ç­–ç•¥æ˜¯ä½¿ç”¨[æ„é€ å‡½æ•°å£°æ˜æ¨¡å¼](https://blog.domenic.me/the-revealing-constructor-pattern/)ï¼Œå®ƒåœ¨ç”¨æ¥åŒ…è£¹é promise API æ—¶éå¸¸æœ‰ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸ºäº†åŒ…è£¹ä¸€ä¸ªå›è°ƒé£æ ¼çš„ API å¦‚ Node çš„ fs.readFile ï¼Œä½ å¯ä»¥ç®€å•çš„è¿™ä¹ˆåš:\n\n```javascript\n    new Promise(function (resolve, reject) {\n        fs.readFile('myfile.txt', function (err, file) {\n            if (err) {\n                return reject(err);\n            }\n            resolve(file);\n        });\n    }).then(/* ... */)\n```\nå®Œå·¥ï¼æˆ‘ä»¬æ‰“è´¥äº†å¯æ€•çš„ defâ€¦.å•Šå“ˆï¼ŒæŠ“åˆ°è‡ªå·±äº†ã€‚:)\n\n> å…³äºä¸ºä½•è¿™æ˜¯ä¸€ç§åæ¨¡å¼æ›´å¤šçš„å†…å®¹ï¼Œè¯·æŸ¥çœ‹ Bluebird çš„ [promise anti-patterns](https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern) wiki é¡µ\n\n### æ–°æ‰‹é”™è¯¯ #5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\n\n```javascript\n    somePromise().then(function () {\n        someOtherPromise()\n    }).then(function () {\n        // Gee, I hope someOtherPromise() has resolved!\n        // Spoiler alert: it hasn't.\n    })\n```\n\nå¥½äº†ï¼Œç°åœ¨æ˜¯æ—¶å€™è®¨è®ºä¸€ä¸‹å…³äº promises ä½ æ‰€éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ã€‚\n\nè®¤çœŸçš„è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸€æ—¦ä½ ç†è§£äº†å®ƒï¼Œå°±ä¼šé¿å…æ‰€æœ‰æˆ‘æåŠçš„é”™è¯¯çš„å¤æ€ªçš„æŠ€å·§ã€‚ä½ å‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ\n\nå°±å¦‚æˆ‘å‰é¢æ‰€è¯´ï¼Œpromises çš„å¥‡å¦™åœ¨äºç»™äºˆæˆ‘ä»¬ä»¥å‰çš„ return ä¸ throwã€‚ä½†æ˜¯åœ¨å®è·µä¸­è¿™åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿ\n\næ¯ä¸€ä¸ª promise éƒ½ä¼šæä¾›ç»™ä½ ä¸€ä¸ª then() å‡½æ•° (æˆ–æ˜¯ catch()ï¼Œå®é™…ä¸Šåªæ˜¯ then(null, ...) çš„è¯­æ³•ç³–)ã€‚å½“æˆ‘ä»¬åœ¨ then() å‡½æ•°å†…éƒ¨æ—¶ï¼š\n\n```javascript\n    somePromise().then(function () {\n        // I'm inside a then() function!\n    })\n```\næˆ‘ä»¬å¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿæœ‰ä¸‰ç§äº‹æƒ…ï¼š\n\nreturn å¦ä¸€ä¸ª promise\nreturn ä¸€ä¸ªåŒæ­¥çš„å€¼ (æˆ–è€… undefined)\nthrow ä¸€ä¸ªåŒæ­¥å¼‚å¸¸\nå°±æ˜¯è¿™æ ·ã€‚ä¸€æ—¦ä½ ç†è§£äº†è¿™ä¸ªæŠ€å·§ï¼Œä½ å°±ç†è§£äº† promisesã€‚å› æ­¤è®©æˆ‘ä»¬é€ä¸ªäº†è§£ä¸‹ã€‚\n\nè¿”å›å¦ä¸€ä¸ª promise\nè¿™æ˜¯ä¸€ä¸ªåœ¨ promise æ–‡æ¡£ä¸­å¸¸è§çš„ä½¿ç”¨æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šæ–‡ä¸­æåˆ°çš„ â€œcomposing promisesâ€ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        return getUserAccountById(user.id)\n    }).then(function (userAccount) {\n        // I got a user account!\n    })\n```\n\n> æ³¨æ„åˆ°æˆ‘æ˜¯ `return` ç¬¬äºŒä¸ª promiseï¼Œè¿™ä¸ª `return` éå¸¸é‡è¦ã€‚å¦‚æœæˆ‘æ²¡æœ‰å†™ `return`ï¼Œ`getUserAccountById()` å°±ä¼šæˆä¸ºä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ªå‡½æ•°å°†ä¼šæ¥æ”¶åˆ° `undefined` è€Œé `userAccount`ã€‚\n\n### è¿”å›ä¸€ä¸ªåŒæ­¥å€¼ (æˆ–è€… undefined)\n\nè¿”å› undefined é€šå¸¸æ˜¯é”™è¯¯çš„ï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ªåŒæ­¥å€¼å®é™…ä¸Šæ˜¯å°†åŒæ­¥ä»£ç åŒ…è£¹ä¸º promise é£æ ¼ä»£ç çš„ä¸€ç§éå¸¸èµçš„æ‰‹æ®µã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯¹ users ä¿¡æ¯æœ‰ä¸€ä¸ªå†…å­˜ç¼“å­˜ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        if (inMemoryCache[user.id]) {\n            return inMemoryCache[user.id]    // returning a synchronous value!\n        }\n        return getUserAccountById(user.id) // returning a promise!\n    }).then(function (userAccount) {\n        // I got a user account!\n    });\n```\n\næ˜¯ä¸æ˜¯å¾ˆèµï¼Ÿç¬¬äºŒä¸ªå‡½æ•°ä¸éœ€è¦å…³å¿ƒ userAccount æ˜¯ä»åŒæ­¥æ–¹æ³•è¿˜æ˜¯å¼‚æ­¥æ–¹æ³•ä¸­è·å–çš„ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå‡½æ•°å¯ä»¥éå¸¸è‡ªç”±çš„è¿”å›ä¸€ä¸ªåŒæ­¥æˆ–è€…å¼‚æ­¥å€¼ã€‚\n\nä¸å¹¸çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªä¸ä¾¿çš„ç°å®æ˜¯åœ¨ JavaScript ä¸­æ— è¿”å›å€¼å‡½æ•°åœ¨æŠ€æœ¯ä¸Šæ˜¯è¿”å› undefinedï¼Œè¿™å°±æ„å‘³ç€å½“ä½ æœ¬æ„æ˜¯è¿”å›æŸäº›å€¼æ—¶ï¼Œä½ å¾ˆå®¹æ˜“ä¼šä¸ç»æ„é—´å¼•å…¥å‰¯ä½œç”¨ã€‚\n\nå‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä¸ªäººå…»æˆäº†åœ¨ then() å‡½æ•°å†…éƒ¨ æ°¸è¿œè¿”å›æˆ–æŠ›å‡º çš„ä¹ æƒ¯ã€‚æˆ‘å»ºè®®ä½ ä¹Ÿè¿™æ ·åšã€‚\n\n### æŠ›å‡ºåŒæ­¥å¼‚å¸¸\n\nè°ˆåˆ° throwï¼Œè¿™æ˜¯è®© promises æ›´åŠ èµçš„ä¸€ç‚¹ã€‚æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨ç”¨æˆ·å·²ç»ç™»å‡ºæ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªåŒæ­¥å¼‚å¸¸ã€‚è¿™ä¼šéå¸¸ç®€å•ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        if (user.isLoggedOut()) {\n            throw new Error('user logged out!') // throwing a synchronous error!\n        }\n\n        if (inMemoryCache[user.id]) {\n            return inMemoryCache[user.id]       // returning a synchronous value!\n        }\n\n        return getUserAccountById(user.id)   // returning a promise!\n    }).then(function (userAccount) {\n        // I got a user account!\n    }).catch(function (err) {\n        // Boo, I got an error!\n    })\n```\n\nå¦‚æœç”¨æˆ·å·²ç»ç™»å‡ºï¼Œæˆ‘ä»¬çš„ catch() ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªåŒæ­¥å¼‚å¸¸ï¼Œå¹¶ä¸”å¦‚æœ åç»­çš„ promise ä¸­å‡ºç°å¼‚æ­¥å¼‚å¸¸ï¼Œä»–ä¹Ÿä¼šæ¥æ”¶åˆ°ã€‚å†å¼ºè°ƒä¸€æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°å¹¶ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªå¼‚å¸¸æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥è¿”å›çš„ã€‚\n\nè¿™ç§ç‰¹æ€§éå¸¸æœ‰ç”¨ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¸®åŠ©å®šä½ä»£ç é—®é¢˜ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœåœ¨ then() å‡½æ•°å†…éƒ¨ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œæˆ‘ä»¬æ‰§è¡Œ JSON.parse()ï¼Œå¦‚æœ JSON æ ¼å¼æ˜¯é”™è¯¯çš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å¦‚æœæ˜¯ä½¿ç”¨å›è°ƒé£æ ¼ï¼Œè¿™ä¸ªé”™è¯¯å¾ˆå¯èƒ½å°±ä¼šè¢«åƒæ‰ï¼Œä½†æ˜¯ä½¿ç”¨ promisesï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“çš„åœ¨ catch() å‡½æ•°ä¸­å¤„ç†å®ƒäº†ã€‚\n\n# è¿›é˜¶é”™è¯¯\n\nå¥½äº†ï¼Œç°åœ¨ä½ å·²ç»äº†è§£äº†è®© promises å˜çš„è¶…çº§ç®€å•çš„æŠ€å·§ï¼Œç°åœ¨è®©æˆ‘ä»¬èŠä¸€èŠä¸€äº›ç‰¹æ®Šåœºæ™¯ã€‚\nè¿™äº›é”™è¯¯ä¹‹æ‰€ä»¥è¢«æˆ‘å½’ç±»ä¸º â€œè¿›é˜¶â€ ï¼Œæ˜¯å› ä¸ºæˆ‘åªè§è¿‡è¿™äº›é”™è¯¯å‘ç”Ÿåœ¨å¯¹ promises å·²ç»æœ‰ç›¸å½“æ·±å…¥äº†è§£çš„å¼€å‘è€…èº«ä¸Šã€‚ä½†æ˜¯ä¸ºäº†è§£å†³æ–‡ç« æœ€å¼€å§‹çš„è°œé¢˜ï¼Œæˆ‘ä»¬å¿…é¡»è®¨è®ºä¸€ä¸‹è¿™äº›é”™è¯¯ã€‚\n\n### è¿›é˜¶é”™è¯¯ #1ï¼šä¸çŸ¥é“ Promise.resolve()\n\nå¦‚æˆ‘ä¸Šé¢æ‰€åˆ—ä¸¾çš„ï¼Œpromises åœ¨å°è£…åŒæ­¥ä¸å¼‚æ­¥ä»£ç æ—¶éå¸¸çš„æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å‘ç°ä½ ç»å¸¸å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š\n\n```javascript\n    new Promise(function (resolve, reject) {\n        resolve(someSynchronousValue)\n    }).then(/* ... */)\n```\n\nä½ ä¼šå‘ç°ä½¿ç”¨ Promise.resolve ä¼šæ›´åŠ ç®€æ´ï¼š\n\n```javascript\n    Promise.resolve(someSynchronousValue).then(/* ... */);\n```\n\nå®ƒåœ¨ç”¨æ¥æ•è·åŒæ­¥å¼‚å¸¸æ—¶ä¹Ÿæå…¶çš„å¥½ç”¨ã€‚ç”±äºå®ƒå®åœ¨æ˜¯å¥½ç”¨ï¼Œå› æ­¤æˆ‘å·²ç»å…»æˆäº†åœ¨æˆ‘æ‰€æœ‰ promise å½¢å¼çš„ API æ¥å£ä¸­è¿™æ ·ä½¿ç”¨å®ƒï¼š\n\n```javascript\n    function somePromiseAPI() {\n        return Promise.resolve().then(function () {\n            doSomethingThatMayThrow()\n            return 'foo'\n        }).then(/* ... */)\n    }\n```\n\nåˆ‡è®°ï¼šä»»ä½•æœ‰å¯èƒ½ throw åŒæ­¥å¼‚å¸¸çš„ä»£ç éƒ½æ˜¯ä¸€ä¸ªåç»­ä¼šå¯¼è‡´å‡ ä¹æ— æ³•è°ƒè¯•å¼‚å¸¸çš„æ½œåœ¨å› ç´ ã€‚ä½†æ˜¯å¦‚æœä½ å°†æ‰€æœ‰ä»£ç éƒ½ä½¿ç”¨ Promise.resolve() å°è£…ï¼Œé‚£ä¹ˆä½ æ€»æ˜¯å¯ä»¥åœ¨ä¹‹åä½¿ç”¨ catch() æ¥æ•è·å®ƒã€‚\n\nç±»ä¼¼çš„ï¼Œè¿˜æœ‰ Promise.reject() ä½ å¯ä»¥ç”¨æ¥è¿”å›ä¸€ä¸ªç«‹åˆ»è¿”å›å¤±è´¥çš„ promiseã€‚\n\n```javascript\n    Promise.reject(new Error('some awful error'));\n```\n\n### è¿›é˜¶é”™è¯¯ #2ï¼šcatch() ä¸ then(null, ...) å¹¶éå®Œå…¨ç­‰ä»·\n\nä¹‹å‰æˆ‘è¯´è¿‡ catch() ä»…ä»…æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚å› æ­¤ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š\n\n```javascript\n    somePromise().catch(function (err) {\n        // handle error\n    })\n\n    somePromise().then(null, function (err) {\n        // handle error\n    })\n```\n\nç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š\n\n```javascript\n    somePromise().then(function () {\n        return someOtherPromise();\n    }).catch(function (err) {\n        // handle error\n    });\n\n    somePromise().then(function () {\n        return someOtherPromise();\n    }, function (err) {\n        // handle error\n    });\n```\n\nå¦‚æœä½ å¥½å¥‡ä¸ºä½•è¿™ä¸¤æ®µä»£ç å¹¶ä¸ç­‰ä»·ï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹å¦‚æœç¬¬ä¸€ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸ä¼šå‘ç”Ÿä»€ä¹ˆï¼š\n\n```javascript\n    somePromise().then(function () {\n        throw new Error('oh noes')\n    }).catch(function (err) {\n        // I caught your error! :)\n    })\n\n    somePromise().then(function () {\n        throw new Error('oh noes')\n    }, function (err) {\n        // I didn't catch your error! :(\n    })\n```\n\nå› æ­¤ï¼Œå½“ä½ ä½¿ç”¨ then(resolveHandler, rejectHandler) è¿™ç§å½¢å¼æ—¶ï¼ŒrejectHandler å¹¶ä¸ä¼šæ•è·ç”± resolveHandler å¼•å‘çš„å¼‚å¸¸ã€‚\n\né‰´äºæ­¤ï¼Œæˆ‘ä¸ªäººçš„ä¹ æƒ¯æ˜¯ä¸é€‚ç”¨ then() çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè€Œæ˜¯æ€»æ˜¯ä½¿ç”¨ catch()ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å½“æˆ‘å†™ä¸€äº›å¼‚æ­¥çš„ Mocha æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæˆ‘å¯èƒ½ä¼šå¸Œæœ›ç”¨ä¾‹çš„å¼‚å¸¸å¯ä»¥æ­£ç¡®çš„è¢«æŠ›å‡ºï¼š\n\n```javascript\n    it('should throw an error', function () {\n        return doSomethingThatThrows().then(function () {\n            throw new Error('I expected an error!')\n        }, function (err) {\n            should.exist(err)\n        })\n    })\n```\n\nè¯´åˆ°è¿™é‡Œï¼Œ[Mocha](http://mochajs.org/) å’Œ [Chai](http://chaijs.com/) ç”¨æ¥æµ‹è¯• promise æ¥å£æ—¶ï¼Œæ˜¯ä¸€å¯¹éå¸¸å¥½çš„ç»„åˆã€‚ [pouchdb-plugin-seed](https://github.com/pouchdb/plugin-seed) é¡¹ç›®ä¸­æœ‰ä¸€äº› [ç¤ºä¾‹](https://github.com/pouchdb/plugin-seed/blob/master/test/test.js) å¯ä»¥å¸®åŠ©ä½ å…¥é—¨ã€‚\n\n### è¿›é˜¶é”™è¯¯ #3ï¼špromises vs promises factories\n\nå½“æˆ‘ä»¬å¸Œæœ›æ‰§è¡Œä¸€ä¸ªä¸ªçš„æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ï¼Œå³ç±»ä¼¼ Promise.all() ä½†æ˜¯å¹¶éå¹¶è¡Œçš„æ‰§è¡Œæ‰€æœ‰ promisesã€‚\n\nä½ å¯èƒ½å¤©çœŸçš„å†™ä¸‹è¿™æ ·çš„ä»£ç ï¼š\n\n```javascript\n    function executeSequentially(promises) {\n        var result = Promise.resolve()\n        promises.forEach(function (promise) {\n            result = result.then(promise)\n        })\n\n        return result\n    }\n```\n\nä¸å¹¸çš„æ˜¯ï¼Œè¿™ä»½ä»£ç ä¸ä¼šæŒ‰ç…§ä½ çš„æœŸæœ›å»æ‰§è¡Œï¼Œä½ ä¼ å…¥ executeSequentially() çš„ promises ä¾ç„¶ä¼šå¹¶è¡Œæ‰§è¡Œã€‚\n\nå…¶æ ¹æºåœ¨äºä½ æ‰€å¸Œæœ›çš„ï¼Œå®é™…ä¸Šæ ¹æœ¬ä¸æ˜¯å»æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ã€‚ä¾ç…§ promises è§„èŒƒï¼Œä¸€æ—¦ä¸€ä¸ª promise è¢«åˆ›å»ºï¼Œå®ƒå°±è¢«æ‰§è¡Œäº†ã€‚å› æ­¤ä½ å®é™…ä¸Šéœ€è¦çš„æ˜¯ä¸€ä¸ª promise factories æ•°ç»„ã€‚\n\n```javascript\n    function executeSequentially(promiseFactories) {\n        var result = Promise.resolve()\n        promiseFactories.forEach(function (promiseFactory) {\n            result = result.then(promiseFactory)\n        })\n\n        return result\n    }\n```\n\næˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼šâ€œè¿™æ˜¯å“ªä¸ªè§é¬¼çš„ Java ç¨‹åºçŒ¿ï¼Œä»–ä¸ºå•¥åœ¨è¯´ factoriesï¼Ÿâ€ ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ª promises factory æ˜¯ååˆ†ç®€å•çš„ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªå¯ä»¥è¿”å› promise çš„å‡½æ•°ï¼š\n\n```javascript\n    function myPromiseFactory() {\n        return somethingThatCreatesAPromise();\n    }\n```\n\nä¸ºä½•è¿™æ ·å°±å¯ä»¥äº†ï¼Ÿè¿™æ˜¯å› ä¸ºä¸€ä¸ª promise factory åœ¨è¢«æ‰§è¡Œä¹‹å‰å¹¶ä¸ä¼šåˆ›å»º promiseã€‚å®ƒå°±åƒä¸€ä¸ª then å‡½æ•°ä¸€æ ·ï¼Œè€Œå®é™…ä¸Šï¼Œå®ƒä»¬å°±æ˜¯å®Œå…¨ä¸€æ ·çš„ä¸œè¥¿ã€‚\n\nå¦‚æœä½ æŸ¥çœ‹ä¸Šé¢çš„ executeSequentially() å‡½æ•°ï¼Œç„¶åæƒ³è±¡ myPromiseFactory è¢«åŒ…è£¹åœ¨ result.then(...) ä¹‹ä¸­ï¼Œä¹Ÿè®¸ä½ è„‘ä¸­çš„å°ç¯æ³¡å°±ä¼šäº®èµ·ã€‚åœ¨æ­¤æ—¶æ­¤åˆ»ï¼Œå¯¹äº promise ä½ å°±ç®—æ˜¯æ‚Ÿé“äº†ã€‚\n\n### è¿›é˜¶é”™è¯¯ #4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª promises çš„ç»“æœæ€ä¹ˆåŠ\n\næœ‰æ—¶å€™ï¼Œä¸€ä¸ª promise ä¼šä¾èµ–äºå¦ä¸€ä¸ªï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›åŒæ—¶è·å¾—è¿™ä¸¤ä¸ª promises çš„è¾“å‡ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        return getUserAccountById(user.id)\n    }).then(function (userAccount) {\n        // dangit, I need the \"user\" object too!\n    })\n```\n\nä¸ºäº†æˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ Javascript å¼€å‘è€…ï¼Œå¹¶ä¸”é¿å…é‡‘å­—å¡”é—®é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°† user å¯¹è±¡å­˜åœ¨ä¸€ä¸ªæ›´é«˜çš„ä½œç”¨åŸŸä¸­çš„å˜é‡é‡Œï¼š\n\n```javascript\n    var user\n    getUserByName('nolan')\n    .then(function (result) {\n        user = result\n        return getUserAccountById(user.id)\n    }).then(function (userAccount) {\n        // okay, I have both the \"user\" and the \"userAccount\"\n    })\n```\n\nè¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºè¿™æ ·åšæœ‰äº›æ‚ç‰Œã€‚æˆ‘æ¨èçš„ç­–ç•¥æ˜¯æŠ›å¼ƒæˆè§ï¼Œæ‹¥æŠ±é‡‘å­—å¡”ï¼š\n\n```javascript\n    getUserByName('nolan').then(function (user) {\n        return getUserAccountById(user.id).then(function (userAccount) {\n            // okay, I have both the \"user\" and the \"userAccount\"\n        })\n    })\n```\n\nâ€¦è‡³å°‘æš‚æ—¶è¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ã€‚ä¸€æ—¦ç¼©è¿›å¼€å§‹æˆä¸ºé—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡ Javascript å¼€å‘è€…ä»è¿œå¤æ—¶æœŸå°±å¼€å§‹ä½¿ç”¨çš„æŠ€å·§ï¼Œå°†å‡½æ•°æŠ½ç¦»åˆ°ä¸€ä¸ªå‘½åå‡½æ•°ä¸­ï¼š\n\n```javascript\n    function onGetUserAndUserAccount(user, userAccount) {\n        return doSomething(user, userAccount)\n    }\n\n    function onGetUser(user) {\n        return getUserAccountById(user.id).then(function (userAccount) {\n            return onGetUserAndUserAccount(user, userAccount)\n        })\n    }\n\n    getUserByName('nolan')\n    .then(onGetUser)\n    .then(function () {\n        // at this point, doSomething() is done, and we are back to indentation 0\n    })\n```\n\nç”±äºä½ çš„ promise ä»£ç å¼€å§‹å˜å¾—æ›´åŠ å¤æ‚ï¼Œä½ å¯èƒ½å‘ç°è‡ªå·±å¼€å§‹å°†è¶Šæ¥è¶Šå¤šçš„å‡½æ•°æŠ½ç¦»åˆ°å‘½åå‡½æ•°ä¸­ï¼Œæˆ‘å‘ç°è¿™æ ·åšï¼Œä½ çš„ä»£ç ä¼šè¶Šæ¥è¶Šæ¼‚äº®ï¼Œå°±åƒè¿™æ ·ï¼š\n\n```javascript\n    putYourRightFootIn()\n    .then(putYourRightFootOut)\n    .then(putYourRightFootIn)\n    .then(shakeItAllAbout)\n```\n\n`è¿™å°±æ˜¯ promises çš„é‡ç‚¹ã€‚`\n\n\n### è¿›é˜¶é”™è¯¯ #5ï¼špromises ç©¿é€\n\næœ€åï¼Œè¿™ä¸ªé”™è¯¯å°±æ˜¯æˆ‘å¼€å¤´è¯´çš„ promises è°œé¢˜æ‰€å½±å°„çš„é”™è¯¯ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç¨€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶ä¸”å¯èƒ½å®Œå…¨ä¸ä¼šå‡ºç°åœ¨ä½ çš„ä»£ç ä¸­ï¼Œä½†æ˜¯çš„çš„ç¡®ç¡®éœ‡æƒŠäº†æˆ‘ã€‚\n\nä½ è®¤ä¸ºä¸‹é¢çš„ä»£ç ä¼šæ‰“å°å‡ºä»€ä¹ˆï¼Ÿ\n\n```javascript\n    Promise.resolve('foo')\n    .then(Promise.resolve('bar'))\n    .then(function (result) {\n        console.log(result);\n    });\n```\n\nå¦‚æœä½ è®¤ä¸ºå®ƒä¼šæ‰“å°å‡º barï¼Œé‚£ä¹ˆä½ å°±é”™äº†ã€‚å®ƒå®é™…ä¸Šæ‰“å°å‡ºæ¥çš„æ˜¯ fooï¼\n\nå‘ç”Ÿè¿™ä¸ªçš„åŸå› æ˜¯å¦‚æœä½ åƒ then() ä¼ é€’çš„å¹¶éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæ¯”å¦‚ promiseï¼‰ï¼Œå®ƒå®é™…ä¸Šä¼šå°†å…¶è§£é‡Šä¸º then(null)ï¼Œè¿™å°±ä¼šå¯¼è‡´å‰ä¸€ä¸ª promise çš„ç»“æœä¼šç©¿é€ä¸‹é¢ã€‚ä½ å¯ä»¥è‡ªå·±æµ‹è¯•ä¸€ä¸‹ï¼š\n\n```javascript\n    Promise.resolve('foo')\n    .then(null)\n    .then(function (result) {\n        console.log(result)\n    })\n```\n\næ·»åŠ ä»»æ„æ•°é‡çš„ then(null)ï¼Œå®ƒä¾ç„¶ä¼šæ‰“å° fooã€‚\n\nè¿™å®é™…ä¸Šåˆå›åˆ°äº†æˆ‘ä¹‹å‰è¯´çš„ promises vs promise factoriesã€‚ç®€å•çš„è¯´ï¼Œä½ å¯ä»¥ç›´æ¥ä¼ é€’ä¸€ä¸ª promise åˆ° then() å‡½æ•°ä¸­ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šæŒ‰ç…§ä½ æœŸæœ›çš„å»æ‰§è¡Œã€‚then() æ˜¯æœŸæœ›è·å–ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤ä½ å¸Œæœ›åšçš„æœ€å¯èƒ½æ˜¯ï¼š\n\n```javascript\n    Promise.resolve('foo').then(function () {\n        return Promise.resolve('bar')\n    }).then(function (result) {\n        console.log(result)\n    })\n```\n\nè¿™æ ·ä»–å°±ä¼šå¦‚æˆ‘ä»¬æ‰€æƒ³çš„æ‰“å°å‡º barã€‚\n\n`å› æ­¤è®°ä½ï¼šæ°¸è¿œéƒ½æ˜¯å¾€ then() ä¸­ä¼ é€’å‡½æ•°ï¼`\n\n\n### æœŸå¾… async/await\nåœ¨ â€œ[Taming the asynchronous beast with ES7](https://pouchdb.com/2015/03/05/taming-the-async-beast-with-es7.html)â€ ä¸­æåˆ°çš„é‡ç‚¹ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘æ¢ç©¶äº† ES7 çš„ async/await å…³é”®å­—ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å°† promises æ›´æ·±åº¦çš„ç»“åˆå…¥è¯­è¨€ã€‚ä¸å†ä¼šè¦æ±‚æˆ‘ä»¬å»ç¼–å†™ä¼ªåŒæ­¥çš„ä»£ç ï¼ˆä»¥åŠä¸€ä¸ªå‡çš„ catch() å‡½æ•°ï¼Œè™½ç„¶åƒï¼Œä½†æ˜¯å¹¶éæ˜¯ catchï¼‰ï¼ŒES7 å°†ä¼šå…è®¸æˆ‘ä»¬ä½¿ç”¨çœŸæ­£çš„ try/catch/return å…³é”®å­—ï¼Œå°±åƒæˆ‘ä»¬åœ¨ CS 101 ä¸Šå­¦çš„ä¸€æ ·ã€‚\n\nè¿™å¯¹äº Javascript è¯­è¨€æ¥è¯´æ˜¯ä¸€ä¸ªå¤§ç¦éŸ³ã€‚å› ä¸ºå³ä½¿åˆ°æœ€åï¼Œåªè¦æˆ‘ä»¬çš„å·¥å…·ä¸å‘Šè¯‰æˆ‘ä»¬åšé”™äº†ï¼Œè¿™äº› promise åæ¨¡å¼ä¾ç„¶ä¼šä¸€ç›´å‡ºç°ã€‚\n\nä» JavaScript çš„å†å²æ¥çœ‹ï¼Œæˆ‘è®¤ä¸ºå…¬æ­£çš„è¯„ä»·æ¥è¯´ JSLint ä¸ JSHint å¯¹ç¤¾åŒºçš„è´¡çŒ®æ˜¯é«˜äº JavaScript: The Good Parts çš„ï¼Œè™½ç„¶ä»–ä»¬åŒ…å«çš„ä¿¡æ¯å®é™…ä¸Šæ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯å®ƒä»¬çš„åŒºåˆ«åœ¨äº è¢«å‘ŠçŸ¥ä½ åœ¨ä½ ä»£ç ä¸­çŠ¯çš„é”™è¯¯ ä¸ä½ å»é˜…è¯»ä¸€æœ¬ä¹¦ç±ï¼Œå»ç†è§£å…¶ä»–äººçŠ¯çš„é”™è¯¯ã€‚\n\nES7 çš„ async/await çš„ç¾å¦™åœ¨äºï¼Œä½ çš„é”™è¯¯ä¼šè¢«ä½œä¸ºè¯­æ³•æˆ–è€…ç¼–è¯‘å™¨é”™è¯¯æç¤ºå‡ºæ¥ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶çš„ bugã€‚ä¸è¿‡å°±ç›®å‰è€Œè¨€ï¼Œäº†è§£ promise å¯ä»¥åšä»€ä¹ˆä»¥åŠå¦‚ä½•åœ¨ ES5 ä¸ ES6 ä¸­æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ä¾ç„¶æ˜¯æœ‰å¿…è¦çš„ã€‚\n\nå› æ­¤å½“æˆ‘æ„è¯†åˆ°ï¼Œå°±åƒ JavaScript: The Good Parts ä¸€æ ·ï¼Œè¿™ç¯‡åšæ–‡å¯èƒ½åªä¼šæœ‰éå¸¸æœ‰é™çš„å½±å“çš„æ—¶å€™ï¼Œæˆ‘å¸Œæœ›å½“ä½ å‘ç°å…¶ä»–äººåœ¨çŠ¯åŒæ ·çš„é”™è¯¯çš„æ—¶å€™ï¼Œä½ å¯ä»¥å°†è¿™ç¯‡åšæ–‡æä¾›ç»™ä»–ä»¬ã€‚å› ä¸ºç°åœ¨ä¾ç„¶æœ‰å¾ˆå¤šåŒå­¦éœ€è¦æ‰¿è®¤: â€œI have a problem with promises!â€\n\n```javascript\n\n// Promise.all is good for executing many promises at once\nPromise.all([\n  promise1,\n  promise2\n]);\n\n// Promise.resolve is good for wrapping synchronous code\nPromise.resolve().then(function () {\n  if (somethingIsNotRight()) {\n    throw new Error(\"I will be rejected asynchronously!\");\n  } else {\n    return \"This string will be resolved asynchronously!\";\n  }\n});\n\n// execute some promises one after the other.\n// this takes an array of promise factories, i.e.\n// an array of functions that RETURN a promise\n// (not an array of promises themselves; those would execute immediately)\nfunction sequentialize(promiseFactories) {\n  var chain = Promise.resolve();\n  promiseFactories.forEach(function (promiseFactory) {\n    chain = chain.then(promiseFactory);\n  });\n  return chain;\n}\n\n// Promise.race is good for setting a timeout:\nPromise.race([\n  new Promise(function (resolve, reject) {\n    setTimeout(reject, 10000); // timeout after 10 secs\n  }),\n  doSomethingThatMayTakeAwhile()\n]);\n\n// Promise finally util similar to Q.finally\n// e.g. promise.then(...).catch().then(...).finally(...)\nfunction finally (promise, cb) {\n  return promise.then(function (res) {\n    var promise2 = cb();\n    if (typeof promise2.then === 'function') {\n      return promise2.then(function () {\n        return res;\n      });\n    }\n    return res;\n  }, function (reason) {\n    var promise2 = cb();\n    if (typeof promise2.then === 'function') {\n      return promise2.then(function () {\n        throw reason;\n      });\n    }\n    throw reason;\n  });\n};\n\n```\n","slug":"2017-03-06-we-have-a-problem-with-promise","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxr0019mmt7e6p5jb6r","content":"<h3 id=\"ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«\"><a href=\"#ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«\" class=\"headerlink\" title=\"ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«\"></a><em>ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«</em></h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">doSomething().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> doSomethingElse()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">doSomething().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    doSomethingElse()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">doSomething().then(doSomethingElse())</div><div class=\"line\"></div><div class=\"line\">doSomething().then(doSomethingElse)</div></pre></td></tr></table></figure>\n<h2 id=\"Promiseçš„èµ·æº\"><a href=\"#Promiseçš„èµ·æº\" class=\"headerlink\" title=\"Promiseçš„èµ·æº\"></a>Promiseçš„èµ·æº</h2><p>å¦‚æœä½ é˜…è¯»äº† promises çš„ä¸€äº›ç›¸å…³æ–‡çŒ®ï¼Œä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªè¯ <a href=\"https://medium.com/@wavded/managing-node-js-callback-hell-1fe03ba8baf#.ca5u6o9fl\" target=\"_blank\" rel=\"external\">é‡‘å­—å¡”é—®é¢˜</a> ç»å¸¸å‡ºç°ã€‚å®ƒæè¿°çš„æ˜¯å¤§é‡çš„å›è°ƒå‡½æ•°æ…¢æ…¢å‘å³ä¾§å±å¹•å»¶ä¼¸çš„ä¸€ç§çŠ¶æ€ã€‚</p>\n<p>Promises çš„ç¡®è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”ä¸ä»…ä»…æ˜¯ç¼©è¿›é—®é¢˜ã€‚å°±åƒåœ¨ <a href=\"http://youtu.be/hf1T_AONQJU\" target=\"_blank\" rel=\"external\">Callback Hellçš„æ•‘èµ</a> ä¸­æè¿°çš„ä¸€æ ·ï¼Œå›è°ƒå‡½æ•°çœŸæ­£çš„é—®é¢˜åœ¨äºä»–å‰¥å¤ºäº†æˆ‘ä»¬ä½¿ç”¨ return å’Œ throw è¿™äº›å…³é”®å­—çš„èƒ½åŠ›ã€‚ç›¸åï¼Œæˆ‘ä»¬çš„æ•´ä¸ªä»£ç æµç¨‹éƒ½æ˜¯åŸºäºå‰¯ä½œç”¨çš„: ä¸€ä¸ªå‡½æ•°ä¼šé™„å¸¦è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚</p>\n<blockquote>\n<p>åŸæ–‡å…³äºå‰¯ä½œç”¨çš„æè¿°å¹¶ä¸èƒ½å¾ˆç›´è§‚çš„è¿›è¡Œç†è§£ï¼Œå»ºè®®å‚è€ƒ <a href=\"https://en.wikipedia.org/wiki/Side_effect_(computer_science\" target=\"_blank\" rel=\"external\">WIKI</a>) ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå‡½æ•°é™¤äº†ä¼šè¿”å›ä¸€ä¸ªå€¼ä¹‹å¤–ï¼Œè¿˜ä¼šä¿®æ”¹å‡½æ•°ä»¥å¤–çš„çŠ¶æ€å¦‚å…¨å±€å˜é‡ç­‰ç­‰ã€‚å®é™…ä¸Šæ‰€æœ‰å¼‚æ­¥è°ƒç”¨éƒ½å¯ä»¥è§†ä¸ºå¸¦æœ‰å‰¯ä½œç”¨çš„è¡Œä¸ºã€‚</p>\n</blockquote>\n<p>å¹¶ä¸”å®é™…ä¸Šï¼Œå›è°ƒæ›´åŠ æ¼äººçš„æ˜¯ï¼Œä»–ä¼šå°†æˆ‘ä»¬é€šå¸¸åœ¨å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸­èƒ½è·å¾—çš„<em>å †æ ˆ</em>ç ´åã€‚ç¼–å†™ä»£ç æ—¶å¦‚æœæ— æ³•è·å–å †æ ˆå°±åƒå¼€è½¦æ—¶æ²¡æœ‰åˆ¹è½¦ä¸€æ ·: ä¸åˆ°ç”¨çš„æ—¶å€™ï¼Œä½ ä¸ä¼šçŸ¥é“å®ƒæœ‰å¤šé‡è¦ã€‚</p>\n<p>Promises ç»™äºˆæˆ‘ä»¬çš„å°±æ˜¯åœ¨æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥æ—¶ä¸¢å¤±çš„æœ€é‡è¦çš„è¯­è¨€åŸºçŸ³: return, throw ä»¥åŠå †æ ˆã€‚ä½†æ˜¯æƒ³è¦ promises èƒ½å¤Ÿæä¾›è¿™äº›ä¾¿åˆ©ç»™ä½ çš„å‰ææ˜¯ä½ çŸ¥é“å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ã€‚</p>\n<h2 id=\"æ–°æ‰‹é”™è¯¯\"><a href=\"#æ–°æ‰‹é”™è¯¯\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯\"></a>æ–°æ‰‹é”™è¯¯</h2><p>Promiseå¯¹äºä¸åŒçš„äººæœ‰ä¸åŒçš„ç†è§£å’Œè§‚ç‚¹ï¼Œä½†æ˜¯è¿™ç¯‡æ–‡ç« æˆ‘ç‰¹è´¨<a href=\"https://promisesaplus.com/\" target=\"_blank\" rel=\"external\">æ­£å¼æ ‡å‡†</a>, åœ¨ç°ä»£æµè§ˆå™¨ä¸­æš´éœ²ä¸ºwindow.Promiseã€‚è™½ç„¶å¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰windows.Promise,ä½†æ˜¯å¯ä»¥å¯»æ‰¾ä¸€äº›pollyfill,æ¯”å¦‚<a href=\"https://github.com/calvinmetcalf/lie\" target=\"_blank\" rel=\"external\">Lie</a>ã€<a href=\"https://github.com/petkaantonov/bluebird\" target=\"_blank\" rel=\"external\">bluebird</a>ã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-1ï¼š-promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\"><a href=\"#æ–°æ‰‹é”™è¯¯-1ï¼š-promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #1ï¼š promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\"></a>æ–°æ‰‹é”™è¯¯ #1ï¼š promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜</h3><p>è§‚å¯Ÿå¤§å®¶å¦‚ä½•ä½¿ç”¨ PouchDB è¿™ç±»å¤§å‹çš„ promise é£æ ¼çš„APIï¼Œæˆ‘å‘ç°å¤§é‡é”™è¯¯çš„ promise ä½¿ç”¨å½¢å¼ã€‚æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ä¸‹é¢è¿™ä¸ª:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">remotedb.allDocs(&#123;</div><div class=\"line\">    <span class=\"attr\">include_docs</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">attachments</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> docs = result.rows;</div><div class=\"line\">    docs.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">element</span>) </span>&#123;</div><div class=\"line\">        localdb.put(element.doc).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">            alert(<span class=\"string\">'Pulled doc with id '</span> + element.doc._id + <span class=\"string\">' and added to local db.'</span>);</div><div class=\"line\">        &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (err.status == <span class=\"number\">409</span>) &#123;</div><div class=\"line\">                localdb.get(element.doc._id).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resp</span>) </span>&#123;</div><div class=\"line\">                    localdb.remove(resp._id, resp._rev).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resp</span>) </span>&#123;</div><div class=\"line\">                            <span class=\"comment\">// et cetera...</span></div><div class=\"line\">                    &#125;)</div><div class=\"line\">                &#125;)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>æ˜¯çš„ï¼Œå®é™…ä¸Šä½ å¯ä»¥åƒä½¿ç”¨å›è°ƒä¸€æ ·ä½¿ç”¨ promisesï¼Œæ©ï¼Œå°±åƒç”¨æ‰“ç£¨æœºå»å‰Šè„šè¶¾ç”²ä¸€æ ·ï¼Œä½ ç¡®å®å¯ä»¥è¿™ä¹ˆåšã€‚</p>\n<p>å¹¶ä¸”å¦‚æœä½ ä»¥ä¸ºè¿™æ ·çš„é”™è¯¯åªé™äºåˆå­¦è€…ï¼Œé‚£ä¹ˆä½ ä¼šæƒŠè®¶äºæˆ‘å®é™…ä¸Šæ˜¯åœ¨é»‘è“å®˜æ–¹å¼€å‘è€…åšå®¢ä¸Šçœ‹åˆ°ä¸Šé¢çš„ä»£ç ã€‚è€çš„å›è°ƒé£æ ¼çš„ä¹ æƒ¯éš¾ä»¥æ¶ˆç­ã€‚(è‡³å¼€å‘è€…: æŠ±æ­‰é€‰äº†ä½ çš„ä¾‹å­ï¼Œä½†æ˜¯ä½ çš„ä¾‹å­å°†ä¼šæœ‰ç§¯æçš„æ•™è‚²æ„ä¹‰)</p>\n<p>æ­£ç¡®çš„é£æ ¼åº”è¯¥æ˜¯:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">remotedb.allDocs(...).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resultOfAllDocs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> localdb.put(...)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resultOfPut</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> localdb.get(...)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resultOfGet</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> localdb.put(...)</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™ç§å†™æ³•è¢«ç§°ä¸º composing promises ï¼Œæ˜¯ promises çš„å¼ºå¤§èƒ½åŠ›ä¹‹ä¸€ã€‚æ¯ä¸€ä¸ªå‡½æ•°åªä¼šåœ¨å‰ä¸€ä¸ª promise è¢«è°ƒç”¨å¹¶ä¸”å®Œæˆå›è°ƒåè°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°ä¼šè¢«å‰ä¸€ä¸ª promise çš„è¾“å‡ºè°ƒç”¨ï¼Œç¨åæˆ‘ä»¬åœ¨è¿™å—åšæ›´å¤šçš„è®¨è®ºã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-2ï¼š-WTF-ç”¨äº†-promises-åæ€ä¹ˆç”¨-forEach\"><a href=\"#æ–°æ‰‹é”™è¯¯-2ï¼š-WTF-ç”¨äº†-promises-åæ€ä¹ˆç”¨-forEach\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #2ï¼š WTF, ç”¨äº† promises åæ€ä¹ˆç”¨ forEach?\"></a>æ–°æ‰‹é”™è¯¯ #2ï¼š WTF, ç”¨äº† promises åæ€ä¹ˆç”¨ forEach?</h3><p>è¿™é‡Œæ˜¯å¤§å¤šæ•°äººå¯¹äº promises çš„ç†è§£å¼€å§‹å‡ºç°åå·®ã€‚ä¸€æ—¦å½“ä»–ä»¬è¦ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ forEach() å¾ªç¯ (æ— è®ºæ˜¯ for å¾ªç¯è¿˜æ˜¯ while å¾ªç¯)ï¼Œä»–ä»¬å®Œå…¨ä¸çŸ¥é“å¦‚ä½•å°† promises ä¸å…¶ä¸€èµ·ä½¿ã€‚å› æ­¤ä»–ä»¬å°±ä¼šå†™ä¸‹ç±»ä¼¼è¿™æ ·çš„ä»£ç ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// I want to remove() all docs</span></div><div class=\"line\">db.allDocs(&#123;<span class=\"attr\">include_docs</span>: <span class=\"literal\">true</span>&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    result.rows.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">row</span>) </span>&#123;</div><div class=\"line\">        db.remove(row.doc)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I naively believe all docs have been removed() now!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™ä»½ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿé—®é¢˜åœ¨äºç¬¬ä¸€ä¸ªå‡½æ•°å®é™…ä¸Šè¿”å›çš„æ˜¯ undefinedï¼Œè¿™æ„å‘³ç€ç¬¬äºŒä¸ªæ–¹æ³•ä¸ä¼šç­‰å¾…æ‰€æœ‰ documents éƒ½æ‰§è¡Œ db.remove()ã€‚å®é™…ä¸Šä»–ä¸ä¼šç­‰å¾…ä»»ä½•äº‹æƒ…ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨ä»»æ„æ•°é‡çš„æ–‡æ¡£è¢«åˆ é™¤åæ‰§è¡Œï¼</p>\n<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸éšè”½çš„ bugï¼Œå› ä¸ºå¦‚æœ PouchDB åˆ é™¤è¿™äº›æ–‡æ¡£è¶³å¤Ÿå¿«ï¼Œä½ çš„ UI ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ä¼šå®Œæˆæ­£å¸¸ï¼Œä½ å¯èƒ½ä¼šå®Œå…¨æ³¨æ„ä¸åˆ°æœ‰ä»€ä¹ˆä¸œè¥¿æœ‰é”™è¯¯ã€‚è¿™ä¸ª bug å¯èƒ½ä¼šåœ¨ä¸€äº›å¤æ€ªçš„ç«æ€é—®é¢˜æˆ–ä¸€äº›ç‰¹å®šçš„æµè§ˆå™¨ä¸­æš´éœ²å‡ºæ¥ï¼Œå¹¶ä¸”åˆ°æ—¶å¯èƒ½å‡ ä¹æ²¡æœ‰å¯èƒ½å»å®šä½é—®é¢˜ã€‚</p>\n<p>ç®€è€Œè¨€ä¹‹ï¼ŒforEach()/for/while å¹¶éä½ å¯»æ‰¾çš„è§£å†³æ–¹æ¡ˆã€‚ä½ éœ€è¦çš„æ˜¯ Promise.all():</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">db.allDocs(&#123;<span class=\"attr\">include_docs</span>: <span class=\"literal\">true</span>&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.all(result.rows.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">row</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> db.remove(row.doc)</div><div class=\"line\">    &#125;))</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">arrayOfResults</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// All docs have really been removed() now!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„ä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¤§ä½“æ¥è¯´ï¼ŒPromise.all()ä¼šä»¥ä¸€ä¸ª promises æ•°ç»„ä¸ºè¾“å…¥ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ promiseã€‚è¿™ä¸ªæ–°çš„ promise ä¼šåœ¨æ•°ç»„ä¸­æ‰€æœ‰çš„ promises éƒ½æˆåŠŸè¿”å›åæ‰è¿”å›ã€‚ä»–æ˜¯å¼‚æ­¥ç‰ˆçš„ for å¾ªç¯ã€‚</p>\n<p>å¹¶ä¸” Promise.all() ä¼šå°†æ‰§è¡Œç»“æœç»„æˆçš„æ•°ç»„è¿”å›åˆ°ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚å½“ä½ å¸Œæœ›ä» PouchDB ä¸­è·å–å¤šä¸ªå¯¹è±¡æ—¶ï¼Œä¼šéå¸¸æœ‰ç”¨ã€‚æ­¤å¤–ä¸€ä¸ªæ›´åŠ æœ‰ç”¨çš„ç‰¹æ•ˆæ˜¯ï¼Œä¸€æ—¦æ•°ç»„ä¸­çš„ promise ä»»æ„ä¸€ä¸ªè¿”å›é”™è¯¯ï¼ŒPromise.all() ä¹Ÿä¼šè¿”å›é”™è¯¯ã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-3ï¼š-å¿˜è®°ä½¿ç”¨-catch\"><a href=\"#æ–°æ‰‹é”™è¯¯-3ï¼š-å¿˜è®°ä½¿ç”¨-catch\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #3ï¼š å¿˜è®°ä½¿ç”¨ .catch()\"></a>æ–°æ‰‹é”™è¯¯ #3ï¼š å¿˜è®°ä½¿ç”¨ .catch()</h3><p>è¿™æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ã€‚å•çº¯çš„åšä¿¡è‡ªå·±çš„ promises ä¼šæ°¸è¿œä¸å‡ºç°å¼‚å¸¸ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šå¿˜è®°åœ¨ä»–ä»¬çš„ä»£ç ä¸­æ·»åŠ ä¸€ä¸ª .catch()ã€‚ç„¶è€Œä¸å¹¸çš„æ˜¯è¿™ä¹Ÿæ„å‘³ç€ï¼Œä»»ä½•è¢«æŠ›å‡ºçš„å¼‚å¸¸éƒ½ä¼šè¢«åƒæ‰ï¼Œå¹¶ä¸”ä½ æ— æ³•åœ¨ console ä¸­è§‚å¯Ÿåˆ°ä»–ä»¬ã€‚è¿™ç±»é—®é¢˜ debug èµ·æ¥ä¼šéå¸¸ç—›è‹¦ã€‚</p>\n<blockquote>\n<p>ç±»ä¼¼ Bluebird ä¹‹ç±»çš„ Promise åº“ä¼šåœ¨è¿™ç§åœºæ™¯æŠ›å‡º UnhandledRejectionError è­¦ç¤ºæœ‰æœªå¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç±»æƒ…å†µä¸€æ—¦å‘ç°ï¼Œå°±ä¼šé€ æˆè„šæœ¬å¼‚å¸¸ï¼Œåœ¨ Node ä¸­æ›´ä¼šé€ æˆè¿›ç¨‹ Crash çš„é—®é¢˜ï¼Œå› æ­¤æ­£ç¡®çš„æ·»åŠ  .catch() éå¸¸é‡è¦ã€‚ è¯‘è€…æ³¨</p>\n</blockquote>\n<p>ä¸ºäº†é¿å…è¿™ç±»è®¨åŒçš„åœºæ™¯ï¼Œæˆ‘ä¹ æƒ¯äºåƒä¸‹é¢çš„ä»£ç ä¸€æ ·ä½¿ç”¨ promise:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> anotherPromise();</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> yetAnotherPromise();</div><div class=\"line\">&#125;).catch(<span class=\"built_in\">console</span>.log.bind(<span class=\"built_in\">console</span>)); <span class=\"comment\">// &lt;-- this is badass</span></div></pre></td></tr></table></figure>\n<p>å³ä½¿ä½ åšä¿¡ä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œæ·»åŠ ä¸€ä¸ª catch() æ€»å½’æ˜¯æ›´åŠ è°¨æ…çš„ã€‚å¦‚æœä½ çš„å‡è®¾æœ€ç»ˆè¢«å‘ç°æ˜¯é”™è¯¯çš„ï¼Œå®ƒä¼šè®©ä½ çš„ç”Ÿæ´»æ›´åŠ ç¾å¥½ã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-4ï¼šä½¿ç”¨-â€œdeferredâ€\"><a href=\"#æ–°æ‰‹é”™è¯¯-4ï¼šä½¿ç”¨-â€œdeferredâ€\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #4ï¼šä½¿ç”¨ â€œdeferredâ€\"></a>æ–°æ‰‹é”™è¯¯ #4ï¼šä½¿ç”¨ â€œdeferredâ€</h3><p>è¿™æ˜¯ä¸€ä¸ªæˆ‘ç»å¸¸å¯ä»¥çœ‹åˆ°çš„é”™è¯¯ï¼Œä»¥è‡³äºæˆ‘ç”šè‡³ä¸æ„¿æ„åœ¨è¿™é‡Œé‡å¤å®ƒï¼Œå°±åƒæƒ§æ€• Beetlejuice ä¸€æ ·ï¼Œä»…ä»…æ˜¯æåˆ°å®ƒçš„åå­—ï¼Œå°±ä¼šå¬å”¤å‡ºæ¥æ›´å¤šã€‚</p>\n<p>ç®€å•çš„è¯´ï¼Œpromises æ‹¥æœ‰ä¸€ä¸ªæ¼«é•¿å¹¶ä¸”æˆå‰§åŒ–çš„å†å²ï¼ŒJavascript ç¤¾åŒºèŠ±è´¹äº†å¤§é‡çš„æ—¶é—´è®©å…¶èµ°ä¸Šæ­£è½¨ã€‚åœ¨æ—©æœŸï¼Œdeferred åœ¨ Qï¼ŒWhenï¼ŒRSVPï¼ŒBluebirdï¼ŒLieç­‰ç­‰çš„ â€œä¼˜ç§€â€ ç±»åº“ä¸­è¢«å¼•å…¥ï¼Œ jQuery ä¸ Angular åœ¨ä½¿ç”¨ ES6 Promise è§„èŒƒä¹‹å‰ï¼Œéƒ½æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å¼ç¼–å†™ä»£ç ã€‚</p>\n<p>å› æ­¤å¦‚æœä½ åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è¿™ä¸ªè¯ (æˆ‘ä¸ä¼šæŠŠè¿™ä¸ªè¯é‡å¤ç¬¬ä¸‰éï¼)ï¼Œä½ å°±åšé”™äº†ã€‚ä¸‹é¢æ˜¯è¯´æ˜ä¸€ä¸‹å¦‚ä½•é¿å…å®ƒã€‚</p>\n<p>é¦–å…ˆï¼Œå¤§éƒ¨åˆ† promises ç±»åº“éƒ½ä¼šæä¾›ä¸€ä¸ªæ–¹å¼å»åŒ…è£…ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ promises å¯¹è±¡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒAngularçš„ $q æ¨¡å—å…è®¸ä½ ä½¿ç”¨ $q.when åŒ…è£¹é $q çš„ promisesã€‚å› æ­¤ Angular ç”¨æˆ·å¯ä»¥è¿™æ ·ä½¿ç”¨ PouchDB promises.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$q.when(db.put(doc)).then(<span class=\"comment\">/* ... */</span>); <span class=\"comment\">// &lt;-- this is all the code you need</span></div></pre></td></tr></table></figure>\n<p>å¦ä¸€ç§ç­–ç•¥æ˜¯ä½¿ç”¨<a href=\"https://blog.domenic.me/the-revealing-constructor-pattern/\" target=\"_blank\" rel=\"external\">æ„é€ å‡½æ•°å£°æ˜æ¨¡å¼</a>ï¼Œå®ƒåœ¨ç”¨æ¥åŒ…è£¹é promise API æ—¶éå¸¸æœ‰ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸ºäº†åŒ…è£¹ä¸€ä¸ªå›è°ƒé£æ ¼çš„ API å¦‚ Node çš„ fs.readFile ï¼Œä½ å¯ä»¥ç®€å•çš„è¿™ä¹ˆåš:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">    fs.readFile(<span class=\"string\">'myfile.txt'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, file</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (err) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> reject(err);</div><div class=\"line\">        &#125;</div><div class=\"line\">        resolve(file);</div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;).then(<span class=\"comment\">/* ... */</span>)</div></pre></td></tr></table></figure>\n<p>å®Œå·¥ï¼æˆ‘ä»¬æ‰“è´¥äº†å¯æ€•çš„ defâ€¦.å•Šå“ˆï¼ŒæŠ“åˆ°è‡ªå·±äº†ã€‚:)</p>\n<blockquote>\n<p>å…³äºä¸ºä½•è¿™æ˜¯ä¸€ç§åæ¨¡å¼æ›´å¤šçš„å†…å®¹ï¼Œè¯·æŸ¥çœ‹ Bluebird çš„ <a href=\"https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern\" target=\"_blank\" rel=\"external\">promise anti-patterns</a> wiki é¡µ</p>\n</blockquote>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\"><a href=\"#æ–°æ‰‹é”™è¯¯-5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\"></a>æ–°æ‰‹é”™è¯¯ #5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    someOtherPromise()</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Gee, I hope someOtherPromise() has resolved!</span></div><div class=\"line\">    <span class=\"comment\">// Spoiler alert: it hasn't.</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>å¥½äº†ï¼Œç°åœ¨æ˜¯æ—¶å€™è®¨è®ºä¸€ä¸‹å…³äº promises ä½ æ‰€éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ã€‚</p>\n<p>è®¤çœŸçš„è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸€æ—¦ä½ ç†è§£äº†å®ƒï¼Œå°±ä¼šé¿å…æ‰€æœ‰æˆ‘æåŠçš„é”™è¯¯çš„å¤æ€ªçš„æŠ€å·§ã€‚ä½ å‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ</p>\n<p>å°±å¦‚æˆ‘å‰é¢æ‰€è¯´ï¼Œpromises çš„å¥‡å¦™åœ¨äºç»™äºˆæˆ‘ä»¬ä»¥å‰çš„ return ä¸ throwã€‚ä½†æ˜¯åœ¨å®è·µä¸­è¿™åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿ</p>\n<p>æ¯ä¸€ä¸ª promise éƒ½ä¼šæä¾›ç»™ä½ ä¸€ä¸ª then() å‡½æ•° (æˆ–æ˜¯ catch()ï¼Œå®é™…ä¸Šåªæ˜¯ then(null, â€¦) çš„è¯­æ³•ç³–)ã€‚å½“æˆ‘ä»¬åœ¨ then() å‡½æ•°å†…éƒ¨æ—¶ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I'm inside a then() function!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿæœ‰ä¸‰ç§äº‹æƒ…ï¼š</p>\n<p>return å¦ä¸€ä¸ª promise<br>return ä¸€ä¸ªåŒæ­¥çš„å€¼ (æˆ–è€… undefined)<br>throw ä¸€ä¸ªåŒæ­¥å¼‚å¸¸<br>å°±æ˜¯è¿™æ ·ã€‚ä¸€æ—¦ä½ ç†è§£äº†è¿™ä¸ªæŠ€å·§ï¼Œä½ å°±ç†è§£äº† promisesã€‚å› æ­¤è®©æˆ‘ä»¬é€ä¸ªäº†è§£ä¸‹ã€‚</p>\n<p>è¿”å›å¦ä¸€ä¸ª promise<br>è¿™æ˜¯ä¸€ä¸ªåœ¨ promise æ–‡æ¡£ä¸­å¸¸è§çš„ä½¿ç”¨æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šæ–‡ä¸­æåˆ°çš„ â€œcomposing promisesâ€ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I got a user account!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>æ³¨æ„åˆ°æˆ‘æ˜¯ <code>return</code> ç¬¬äºŒä¸ª promiseï¼Œè¿™ä¸ª <code>return</code> éå¸¸é‡è¦ã€‚å¦‚æœæˆ‘æ²¡æœ‰å†™ <code>return</code>ï¼Œ<code>getUserAccountById()</code> å°±ä¼šæˆä¸ºä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ªå‡½æ•°å°†ä¼šæ¥æ”¶åˆ° <code>undefined</code> è€Œé <code>userAccount</code>ã€‚</p>\n</blockquote>\n<h3 id=\"è¿”å›ä¸€ä¸ªåŒæ­¥å€¼-æˆ–è€…-undefined\"><a href=\"#è¿”å›ä¸€ä¸ªåŒæ­¥å€¼-æˆ–è€…-undefined\" class=\"headerlink\" title=\"è¿”å›ä¸€ä¸ªåŒæ­¥å€¼ (æˆ–è€… undefined)\"></a>è¿”å›ä¸€ä¸ªåŒæ­¥å€¼ (æˆ–è€… undefined)</h3><p>è¿”å› undefined é€šå¸¸æ˜¯é”™è¯¯çš„ï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ªåŒæ­¥å€¼å®é™…ä¸Šæ˜¯å°†åŒæ­¥ä»£ç åŒ…è£¹ä¸º promise é£æ ¼ä»£ç çš„ä¸€ç§éå¸¸èµçš„æ‰‹æ®µã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯¹ users ä¿¡æ¯æœ‰ä¸€ä¸ªå†…å­˜ç¼“å­˜ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (inMemoryCache[user.id]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inMemoryCache[user.id]    <span class=\"comment\">// returning a synchronous value!</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id) <span class=\"comment\">// returning a promise!</span></div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I got a user account!</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>æ˜¯ä¸æ˜¯å¾ˆèµï¼Ÿç¬¬äºŒä¸ªå‡½æ•°ä¸éœ€è¦å…³å¿ƒ userAccount æ˜¯ä»åŒæ­¥æ–¹æ³•è¿˜æ˜¯å¼‚æ­¥æ–¹æ³•ä¸­è·å–çš„ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå‡½æ•°å¯ä»¥éå¸¸è‡ªç”±çš„è¿”å›ä¸€ä¸ªåŒæ­¥æˆ–è€…å¼‚æ­¥å€¼ã€‚</p>\n<p>ä¸å¹¸çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªä¸ä¾¿çš„ç°å®æ˜¯åœ¨ JavaScript ä¸­æ— è¿”å›å€¼å‡½æ•°åœ¨æŠ€æœ¯ä¸Šæ˜¯è¿”å› undefinedï¼Œè¿™å°±æ„å‘³ç€å½“ä½ æœ¬æ„æ˜¯è¿”å›æŸäº›å€¼æ—¶ï¼Œä½ å¾ˆå®¹æ˜“ä¼šä¸ç»æ„é—´å¼•å…¥å‰¯ä½œç”¨ã€‚</p>\n<p>å‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä¸ªäººå…»æˆäº†åœ¨ then() å‡½æ•°å†…éƒ¨ æ°¸è¿œè¿”å›æˆ–æŠ›å‡º çš„ä¹ æƒ¯ã€‚æˆ‘å»ºè®®ä½ ä¹Ÿè¿™æ ·åšã€‚</p>\n<h3 id=\"æŠ›å‡ºåŒæ­¥å¼‚å¸¸\"><a href=\"#æŠ›å‡ºåŒæ­¥å¼‚å¸¸\" class=\"headerlink\" title=\"æŠ›å‡ºåŒæ­¥å¼‚å¸¸\"></a>æŠ›å‡ºåŒæ­¥å¼‚å¸¸</h3><p>è°ˆåˆ° throwï¼Œè¿™æ˜¯è®© promises æ›´åŠ èµçš„ä¸€ç‚¹ã€‚æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨ç”¨æˆ·å·²ç»ç™»å‡ºæ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªåŒæ­¥å¼‚å¸¸ã€‚è¿™ä¼šéå¸¸ç®€å•ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (user.isLoggedOut()) &#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'user logged out!'</span>) <span class=\"comment\">// throwing a synchronous error!</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (inMemoryCache[user.id]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inMemoryCache[user.id]       <span class=\"comment\">// returning a synchronous value!</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)   <span class=\"comment\">// returning a promise!</span></div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I got a user account!</span></div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Boo, I got an error!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>å¦‚æœç”¨æˆ·å·²ç»ç™»å‡ºï¼Œæˆ‘ä»¬çš„ catch() ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªåŒæ­¥å¼‚å¸¸ï¼Œå¹¶ä¸”å¦‚æœ åç»­çš„ promise ä¸­å‡ºç°å¼‚æ­¥å¼‚å¸¸ï¼Œä»–ä¹Ÿä¼šæ¥æ”¶åˆ°ã€‚å†å¼ºè°ƒä¸€æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°å¹¶ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªå¼‚å¸¸æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥è¿”å›çš„ã€‚</p>\n<p>è¿™ç§ç‰¹æ€§éå¸¸æœ‰ç”¨ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¸®åŠ©å®šä½ä»£ç é—®é¢˜ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœåœ¨ then() å‡½æ•°å†…éƒ¨ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œæˆ‘ä»¬æ‰§è¡Œ JSON.parse()ï¼Œå¦‚æœ JSON æ ¼å¼æ˜¯é”™è¯¯çš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å¦‚æœæ˜¯ä½¿ç”¨å›è°ƒé£æ ¼ï¼Œè¿™ä¸ªé”™è¯¯å¾ˆå¯èƒ½å°±ä¼šè¢«åƒæ‰ï¼Œä½†æ˜¯ä½¿ç”¨ promisesï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“çš„åœ¨ catch() å‡½æ•°ä¸­å¤„ç†å®ƒäº†ã€‚</p>\n<h1 id=\"è¿›é˜¶é”™è¯¯\"><a href=\"#è¿›é˜¶é”™è¯¯\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯\"></a>è¿›é˜¶é”™è¯¯</h1><p>å¥½äº†ï¼Œç°åœ¨ä½ å·²ç»äº†è§£äº†è®© promises å˜çš„è¶…çº§ç®€å•çš„æŠ€å·§ï¼Œç°åœ¨è®©æˆ‘ä»¬èŠä¸€èŠä¸€äº›ç‰¹æ®Šåœºæ™¯ã€‚<br>è¿™äº›é”™è¯¯ä¹‹æ‰€ä»¥è¢«æˆ‘å½’ç±»ä¸º â€œè¿›é˜¶â€ ï¼Œæ˜¯å› ä¸ºæˆ‘åªè§è¿‡è¿™äº›é”™è¯¯å‘ç”Ÿåœ¨å¯¹ promises å·²ç»æœ‰ç›¸å½“æ·±å…¥äº†è§£çš„å¼€å‘è€…èº«ä¸Šã€‚ä½†æ˜¯ä¸ºäº†è§£å†³æ–‡ç« æœ€å¼€å§‹çš„è°œé¢˜ï¼Œæˆ‘ä»¬å¿…é¡»è®¨è®ºä¸€ä¸‹è¿™äº›é”™è¯¯ã€‚</p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-1ï¼šä¸çŸ¥é“-Promise-resolve\"><a href=\"#è¿›é˜¶é”™è¯¯-1ï¼šä¸çŸ¥é“-Promise-resolve\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #1ï¼šä¸çŸ¥é“ Promise.resolve()\"></a>è¿›é˜¶é”™è¯¯ #1ï¼šä¸çŸ¥é“ Promise.resolve()</h3><p>å¦‚æˆ‘ä¸Šé¢æ‰€åˆ—ä¸¾çš„ï¼Œpromises åœ¨å°è£…åŒæ­¥ä¸å¼‚æ­¥ä»£ç æ—¶éå¸¸çš„æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å‘ç°ä½ ç»å¸¸å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">    resolve(someSynchronousValue)</div><div class=\"line\">&#125;).then(<span class=\"comment\">/* ... */</span>)</div></pre></td></tr></table></figure>\n<p>ä½ ä¼šå‘ç°ä½¿ç”¨ Promise.resolve ä¼šæ›´åŠ ç®€æ´ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(someSynchronousValue).then(<span class=\"comment\">/* ... */</span>);</div></pre></td></tr></table></figure>\n<p>å®ƒåœ¨ç”¨æ¥æ•è·åŒæ­¥å¼‚å¸¸æ—¶ä¹Ÿæå…¶çš„å¥½ç”¨ã€‚ç”±äºå®ƒå®åœ¨æ˜¯å¥½ç”¨ï¼Œå› æ­¤æˆ‘å·²ç»å…»æˆäº†åœ¨æˆ‘æ‰€æœ‰ promise å½¢å¼çš„ API æ¥å£ä¸­è¿™æ ·ä½¿ç”¨å®ƒï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">somePromiseAPI</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        doSomethingThatMayThrow()</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'foo'</span></div><div class=\"line\">    &#125;).then(<span class=\"comment\">/* ... */</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>åˆ‡è®°ï¼šä»»ä½•æœ‰å¯èƒ½ throw åŒæ­¥å¼‚å¸¸çš„ä»£ç éƒ½æ˜¯ä¸€ä¸ªåç»­ä¼šå¯¼è‡´å‡ ä¹æ— æ³•è°ƒè¯•å¼‚å¸¸çš„æ½œåœ¨å› ç´ ã€‚ä½†æ˜¯å¦‚æœä½ å°†æ‰€æœ‰ä»£ç éƒ½ä½¿ç”¨ Promise.resolve() å°è£…ï¼Œé‚£ä¹ˆä½ æ€»æ˜¯å¯ä»¥åœ¨ä¹‹åä½¿ç”¨ catch() æ¥æ•è·å®ƒã€‚</p>\n<p>ç±»ä¼¼çš„ï¼Œè¿˜æœ‰ Promise.reject() ä½ å¯ä»¥ç”¨æ¥è¿”å›ä¸€ä¸ªç«‹åˆ»è¿”å›å¤±è´¥çš„ promiseã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'some awful error'</span>));</div></pre></td></tr></table></figure>\n<h3 id=\"è¿›é˜¶é”™è¯¯-2ï¼šcatch-ä¸-then-null-â€¦-å¹¶éå®Œå…¨ç­‰ä»·\"><a href=\"#è¿›é˜¶é”™è¯¯-2ï¼šcatch-ä¸-then-null-â€¦-å¹¶éå®Œå…¨ç­‰ä»·\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #2ï¼šcatch() ä¸ then(null, â€¦) å¹¶éå®Œå…¨ç­‰ä»·\"></a>è¿›é˜¶é”™è¯¯ #2ï¼šcatch() ä¸ then(null, â€¦) å¹¶éå®Œå…¨ç­‰ä»·</h3><p>ä¹‹å‰æˆ‘è¯´è¿‡ catch() ä»…ä»…æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚å› æ­¤ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">somePromise().then(<span class=\"literal\">null</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> someOtherPromise();</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> someOtherPromise();</div><div class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ å¥½å¥‡ä¸ºä½•è¿™ä¸¤æ®µä»£ç å¹¶ä¸ç­‰ä»·ï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹å¦‚æœç¬¬ä¸€ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oh noes'</span>)</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I caught your error! :)</span></div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oh noes'</span>)</div><div class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I didn't catch your error! :(</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>å› æ­¤ï¼Œå½“ä½ ä½¿ç”¨ then(resolveHandler, rejectHandler) è¿™ç§å½¢å¼æ—¶ï¼ŒrejectHandler å¹¶ä¸ä¼šæ•è·ç”± resolveHandler å¼•å‘çš„å¼‚å¸¸ã€‚</p>\n<p>é‰´äºæ­¤ï¼Œæˆ‘ä¸ªäººçš„ä¹ æƒ¯æ˜¯ä¸é€‚ç”¨ then() çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè€Œæ˜¯æ€»æ˜¯ä½¿ç”¨ catch()ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å½“æˆ‘å†™ä¸€äº›å¼‚æ­¥çš„ Mocha æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæˆ‘å¯èƒ½ä¼šå¸Œæœ›ç”¨ä¾‹çš„å¼‚å¸¸å¯ä»¥æ­£ç¡®çš„è¢«æŠ›å‡ºï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">it(<span class=\"string\">'should throw an error'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> doSomethingThatThrows().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'I expected an error!'</span>)</div><div class=\"line\">    &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">        should.exist(err)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¯´åˆ°è¿™é‡Œï¼Œ<a href=\"http://mochajs.org/\" target=\"_blank\" rel=\"external\">Mocha</a> å’Œ <a href=\"http://chaijs.com/\" target=\"_blank\" rel=\"external\">Chai</a> ç”¨æ¥æµ‹è¯• promise æ¥å£æ—¶ï¼Œæ˜¯ä¸€å¯¹éå¸¸å¥½çš„ç»„åˆã€‚ <a href=\"https://github.com/pouchdb/plugin-seed\" target=\"_blank\" rel=\"external\">pouchdb-plugin-seed</a> é¡¹ç›®ä¸­æœ‰ä¸€äº› <a href=\"https://github.com/pouchdb/plugin-seed/blob/master/test/test.js\" target=\"_blank\" rel=\"external\">ç¤ºä¾‹</a> å¯ä»¥å¸®åŠ©ä½ å…¥é—¨ã€‚</p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-3ï¼špromises-vs-promises-factories\"><a href=\"#è¿›é˜¶é”™è¯¯-3ï¼špromises-vs-promises-factories\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #3ï¼špromises vs promises factories\"></a>è¿›é˜¶é”™è¯¯ #3ï¼špromises vs promises factories</h3><p>å½“æˆ‘ä»¬å¸Œæœ›æ‰§è¡Œä¸€ä¸ªä¸ªçš„æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ï¼Œå³ç±»ä¼¼ Promise.all() ä½†æ˜¯å¹¶éå¹¶è¡Œçš„æ‰§è¡Œæ‰€æœ‰ promisesã€‚</p>\n<p>ä½ å¯èƒ½å¤©çœŸçš„å†™ä¸‹è¿™æ ·çš„ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">executeSequentially</span>(<span class=\"params\">promises</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"built_in\">Promise</span>.resolve()</div><div class=\"line\">    promises.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">promise</span>) </span>&#123;</div><div class=\"line\">        result = result.then(promise)</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> result</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä»½ä»£ç ä¸ä¼šæŒ‰ç…§ä½ çš„æœŸæœ›å»æ‰§è¡Œï¼Œä½ ä¼ å…¥ executeSequentially() çš„ promises ä¾ç„¶ä¼šå¹¶è¡Œæ‰§è¡Œã€‚</p>\n<p>å…¶æ ¹æºåœ¨äºä½ æ‰€å¸Œæœ›çš„ï¼Œå®é™…ä¸Šæ ¹æœ¬ä¸æ˜¯å»æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ã€‚ä¾ç…§ promises è§„èŒƒï¼Œä¸€æ—¦ä¸€ä¸ª promise è¢«åˆ›å»ºï¼Œå®ƒå°±è¢«æ‰§è¡Œäº†ã€‚å› æ­¤ä½ å®é™…ä¸Šéœ€è¦çš„æ˜¯ä¸€ä¸ª promise factories æ•°ç»„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">executeSequentially</span>(<span class=\"params\">promiseFactories</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"built_in\">Promise</span>.resolve()</div><div class=\"line\">    promiseFactories.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">promiseFactory</span>) </span>&#123;</div><div class=\"line\">        result = result.then(promiseFactory)</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> result</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼šâ€œè¿™æ˜¯å“ªä¸ªè§é¬¼çš„ Java ç¨‹åºçŒ¿ï¼Œä»–ä¸ºå•¥åœ¨è¯´ factoriesï¼Ÿâ€ ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ª promises factory æ˜¯ååˆ†ç®€å•çš„ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªå¯ä»¥è¿”å› promise çš„å‡½æ•°ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myPromiseFactory</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> somethingThatCreatesAPromise();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä¸ºä½•è¿™æ ·å°±å¯ä»¥äº†ï¼Ÿè¿™æ˜¯å› ä¸ºä¸€ä¸ª promise factory åœ¨è¢«æ‰§è¡Œä¹‹å‰å¹¶ä¸ä¼šåˆ›å»º promiseã€‚å®ƒå°±åƒä¸€ä¸ª then å‡½æ•°ä¸€æ ·ï¼Œè€Œå®é™…ä¸Šï¼Œå®ƒä»¬å°±æ˜¯å®Œå…¨ä¸€æ ·çš„ä¸œè¥¿ã€‚</p>\n<p>å¦‚æœä½ æŸ¥çœ‹ä¸Šé¢çš„ executeSequentially() å‡½æ•°ï¼Œç„¶åæƒ³è±¡ myPromiseFactory è¢«åŒ…è£¹åœ¨ result.then(â€¦) ä¹‹ä¸­ï¼Œä¹Ÿè®¸ä½ è„‘ä¸­çš„å°ç¯æ³¡å°±ä¼šäº®èµ·ã€‚åœ¨æ­¤æ—¶æ­¤åˆ»ï¼Œå¯¹äº promise ä½ å°±ç®—æ˜¯æ‚Ÿé“äº†ã€‚</p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª-promises-çš„ç»“æœæ€ä¹ˆåŠ\"><a href=\"#è¿›é˜¶é”™è¯¯-4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª-promises-çš„ç»“æœæ€ä¹ˆåŠ\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª promises çš„ç»“æœæ€ä¹ˆåŠ\"></a>è¿›é˜¶é”™è¯¯ #4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª promises çš„ç»“æœæ€ä¹ˆåŠ</h3><p>æœ‰æ—¶å€™ï¼Œä¸€ä¸ª promise ä¼šä¾èµ–äºå¦ä¸€ä¸ªï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›åŒæ—¶è·å¾—è¿™ä¸¤ä¸ª promises çš„è¾“å‡ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// dangit, I need the \"user\" object too!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ä¸ºäº†æˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ Javascript å¼€å‘è€…ï¼Œå¹¶ä¸”é¿å…é‡‘å­—å¡”é—®é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°† user å¯¹è±¡å­˜åœ¨ä¸€ä¸ªæ›´é«˜çš„ä½œç”¨åŸŸä¸­çš„å˜é‡é‡Œï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> user</div><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    user = result</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// okay, I have both the \"user\" and the \"userAccount\"</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºè¿™æ ·åšæœ‰äº›æ‚ç‰Œã€‚æˆ‘æ¨èçš„ç­–ç•¥æ˜¯æŠ›å¼ƒæˆè§ï¼Œæ‹¥æŠ±é‡‘å­—å¡”ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// okay, I have both the \"user\" and the \"userAccount\"</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>â€¦è‡³å°‘æš‚æ—¶è¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ã€‚ä¸€æ—¦ç¼©è¿›å¼€å§‹æˆä¸ºé—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡ Javascript å¼€å‘è€…ä»è¿œå¤æ—¶æœŸå°±å¼€å§‹ä½¿ç”¨çš„æŠ€å·§ï¼Œå°†å‡½æ•°æŠ½ç¦»åˆ°ä¸€ä¸ªå‘½åå‡½æ•°ä¸­ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onGetUserAndUserAccount</span>(<span class=\"params\">user, userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> doSomething(user, userAccount)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onGetUser</span>(<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> onGetUserAndUserAccount(user, userAccount)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>)</div><div class=\"line\">.then(onGetUser)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// at this point, doSomething() is done, and we are back to indentation 0</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ç”±äºä½ çš„ promise ä»£ç å¼€å§‹å˜å¾—æ›´åŠ å¤æ‚ï¼Œä½ å¯èƒ½å‘ç°è‡ªå·±å¼€å§‹å°†è¶Šæ¥è¶Šå¤šçš„å‡½æ•°æŠ½ç¦»åˆ°å‘½åå‡½æ•°ä¸­ï¼Œæˆ‘å‘ç°è¿™æ ·åšï¼Œä½ çš„ä»£ç ä¼šè¶Šæ¥è¶Šæ¼‚äº®ï¼Œå°±åƒè¿™æ ·ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">putYourRightFootIn()</div><div class=\"line\">.then(putYourRightFootOut)</div><div class=\"line\">.then(putYourRightFootIn)</div><div class=\"line\">.then(shakeItAllAbout)</div></pre></td></tr></table></figure>\n<p><code>è¿™å°±æ˜¯ promises çš„é‡ç‚¹ã€‚</code></p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-5ï¼špromises-ç©¿é€\"><a href=\"#è¿›é˜¶é”™è¯¯-5ï¼špromises-ç©¿é€\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #5ï¼špromises ç©¿é€\"></a>è¿›é˜¶é”™è¯¯ #5ï¼špromises ç©¿é€</h3><p>æœ€åï¼Œè¿™ä¸ªé”™è¯¯å°±æ˜¯æˆ‘å¼€å¤´è¯´çš„ promises è°œé¢˜æ‰€å½±å°„çš„é”™è¯¯ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç¨€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶ä¸”å¯èƒ½å®Œå…¨ä¸ä¼šå‡ºç°åœ¨ä½ çš„ä»£ç ä¸­ï¼Œä½†æ˜¯çš„çš„ç¡®ç¡®éœ‡æƒŠäº†æˆ‘ã€‚</p>\n<p>ä½ è®¤ä¸ºä¸‹é¢çš„ä»£ç ä¼šæ‰“å°å‡ºä»€ä¹ˆï¼Ÿ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'foo'</span>)</div><div class=\"line\">.then(<span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'bar'</span>))</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(result);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ è®¤ä¸ºå®ƒä¼šæ‰“å°å‡º barï¼Œé‚£ä¹ˆä½ å°±é”™äº†ã€‚å®ƒå®é™…ä¸Šæ‰“å°å‡ºæ¥çš„æ˜¯ fooï¼</p>\n<p>å‘ç”Ÿè¿™ä¸ªçš„åŸå› æ˜¯å¦‚æœä½ åƒ then() ä¼ é€’çš„å¹¶éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæ¯”å¦‚ promiseï¼‰ï¼Œå®ƒå®é™…ä¸Šä¼šå°†å…¶è§£é‡Šä¸º then(null)ï¼Œè¿™å°±ä¼šå¯¼è‡´å‰ä¸€ä¸ª promise çš„ç»“æœä¼šç©¿é€ä¸‹é¢ã€‚ä½ å¯ä»¥è‡ªå·±æµ‹è¯•ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'foo'</span>)</div><div class=\"line\">.then(<span class=\"literal\">null</span>)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(result)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>æ·»åŠ ä»»æ„æ•°é‡çš„ then(null)ï¼Œå®ƒä¾ç„¶ä¼šæ‰“å° fooã€‚</p>\n<p>è¿™å®é™…ä¸Šåˆå›åˆ°äº†æˆ‘ä¹‹å‰è¯´çš„ promises vs promise factoriesã€‚ç®€å•çš„è¯´ï¼Œä½ å¯ä»¥ç›´æ¥ä¼ é€’ä¸€ä¸ª promise åˆ° then() å‡½æ•°ä¸­ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šæŒ‰ç…§ä½ æœŸæœ›çš„å»æ‰§è¡Œã€‚then() æ˜¯æœŸæœ›è·å–ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤ä½ å¸Œæœ›åšçš„æœ€å¯èƒ½æ˜¯ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'foo'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'bar'</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(result)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™æ ·ä»–å°±ä¼šå¦‚æˆ‘ä»¬æ‰€æƒ³çš„æ‰“å°å‡º barã€‚</p>\n<p><code>å› æ­¤è®°ä½ï¼šæ°¸è¿œéƒ½æ˜¯å¾€ then() ä¸­ä¼ é€’å‡½æ•°ï¼</code></p>\n<h3 id=\"æœŸå¾…-async-await\"><a href=\"#æœŸå¾…-async-await\" class=\"headerlink\" title=\"æœŸå¾… async/await\"></a>æœŸå¾… async/await</h3><p>åœ¨ â€œ<a href=\"https://pouchdb.com/2015/03/05/taming-the-async-beast-with-es7.html\" target=\"_blank\" rel=\"external\">Taming the asynchronous beast with ES7</a>â€ ä¸­æåˆ°çš„é‡ç‚¹ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘æ¢ç©¶äº† ES7 çš„ async/await å…³é”®å­—ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å°† promises æ›´æ·±åº¦çš„ç»“åˆå…¥è¯­è¨€ã€‚ä¸å†ä¼šè¦æ±‚æˆ‘ä»¬å»ç¼–å†™ä¼ªåŒæ­¥çš„ä»£ç ï¼ˆä»¥åŠä¸€ä¸ªå‡çš„ catch() å‡½æ•°ï¼Œè™½ç„¶åƒï¼Œä½†æ˜¯å¹¶éæ˜¯ catchï¼‰ï¼ŒES7 å°†ä¼šå…è®¸æˆ‘ä»¬ä½¿ç”¨çœŸæ­£çš„ try/catch/return å…³é”®å­—ï¼Œå°±åƒæˆ‘ä»¬åœ¨ CS 101 ä¸Šå­¦çš„ä¸€æ ·ã€‚</p>\n<p>è¿™å¯¹äº Javascript è¯­è¨€æ¥è¯´æ˜¯ä¸€ä¸ªå¤§ç¦éŸ³ã€‚å› ä¸ºå³ä½¿åˆ°æœ€åï¼Œåªè¦æˆ‘ä»¬çš„å·¥å…·ä¸å‘Šè¯‰æˆ‘ä»¬åšé”™äº†ï¼Œè¿™äº› promise åæ¨¡å¼ä¾ç„¶ä¼šä¸€ç›´å‡ºç°ã€‚</p>\n<p>ä» JavaScript çš„å†å²æ¥çœ‹ï¼Œæˆ‘è®¤ä¸ºå…¬æ­£çš„è¯„ä»·æ¥è¯´ JSLint ä¸ JSHint å¯¹ç¤¾åŒºçš„è´¡çŒ®æ˜¯é«˜äº JavaScript: The Good Parts çš„ï¼Œè™½ç„¶ä»–ä»¬åŒ…å«çš„ä¿¡æ¯å®é™…ä¸Šæ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯å®ƒä»¬çš„åŒºåˆ«åœ¨äº è¢«å‘ŠçŸ¥ä½ åœ¨ä½ ä»£ç ä¸­çŠ¯çš„é”™è¯¯ ä¸ä½ å»é˜…è¯»ä¸€æœ¬ä¹¦ç±ï¼Œå»ç†è§£å…¶ä»–äººçŠ¯çš„é”™è¯¯ã€‚</p>\n<p>ES7 çš„ async/await çš„ç¾å¦™åœ¨äºï¼Œä½ çš„é”™è¯¯ä¼šè¢«ä½œä¸ºè¯­æ³•æˆ–è€…ç¼–è¯‘å™¨é”™è¯¯æç¤ºå‡ºæ¥ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶çš„ bugã€‚ä¸è¿‡å°±ç›®å‰è€Œè¨€ï¼Œäº†è§£ promise å¯ä»¥åšä»€ä¹ˆä»¥åŠå¦‚ä½•åœ¨ ES5 ä¸ ES6 ä¸­æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ä¾ç„¶æ˜¯æœ‰å¿…è¦çš„ã€‚</p>\n<p>å› æ­¤å½“æˆ‘æ„è¯†åˆ°ï¼Œå°±åƒ JavaScript: The Good Parts ä¸€æ ·ï¼Œè¿™ç¯‡åšæ–‡å¯èƒ½åªä¼šæœ‰éå¸¸æœ‰é™çš„å½±å“çš„æ—¶å€™ï¼Œæˆ‘å¸Œæœ›å½“ä½ å‘ç°å…¶ä»–äººåœ¨çŠ¯åŒæ ·çš„é”™è¯¯çš„æ—¶å€™ï¼Œä½ å¯ä»¥å°†è¿™ç¯‡åšæ–‡æä¾›ç»™ä»–ä»¬ã€‚å› ä¸ºç°åœ¨ä¾ç„¶æœ‰å¾ˆå¤šåŒå­¦éœ€è¦æ‰¿è®¤: â€œI have a problem with promises!â€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise.all is good for executing many promises at once</span></div><div class=\"line\"><span class=\"built_in\">Promise</span>.all([</div><div class=\"line\">  promise1,</div><div class=\"line\">  promise2</div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise.resolve is good for wrapping synchronous code</span></div><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (somethingIsNotRight()) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"I will be rejected asynchronously!\"</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"This string will be resolved asynchronously!\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// execute some promises one after the other.</span></div><div class=\"line\"><span class=\"comment\">// this takes an array of promise factories, i.e.</span></div><div class=\"line\"><span class=\"comment\">// an array of functions that RETURN a promise</span></div><div class=\"line\"><span class=\"comment\">// (not an array of promises themselves; those would execute immediately)</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sequentialize</span>(<span class=\"params\">promiseFactories</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> chain = <span class=\"built_in\">Promise</span>.resolve();</div><div class=\"line\">  promiseFactories.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">promiseFactory</span>) </span>&#123;</div><div class=\"line\">    chain = chain.then(promiseFactory);</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> chain;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise.race is good for setting a timeout:</span></div><div class=\"line\"><span class=\"built_in\">Promise</span>.race([</div><div class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">    setTimeout(reject, <span class=\"number\">10000</span>); <span class=\"comment\">// timeout after 10 secs</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">  doSomethingThatMayTakeAwhile()</div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise finally util similar to Q.finally</span></div><div class=\"line\"><span class=\"comment\">// e.g. promise.then(...).catch().then(...).finally(...)</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">finally</span> (<span class=\"params\">promise, cb</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> promise.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> promise2 = cb();</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> promise2.then === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> promise2.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">  &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">reason</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> promise2 = cb();</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> promise2.then === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> promise2.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> reason;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">throw</span> reason;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«\"><a href=\"#ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«\" class=\"headerlink\" title=\"ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«\"></a><em>ä¸‹é¢å››ç§Promiseçš„åŒºåˆ«</em></h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">doSomething().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> doSomethingElse()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">doSomething().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    doSomethingElse()</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">doSomething().then(doSomethingElse())</div><div class=\"line\"></div><div class=\"line\">doSomething().then(doSomethingElse)</div></pre></td></tr></table></figure>\n<h2 id=\"Promiseçš„èµ·æº\"><a href=\"#Promiseçš„èµ·æº\" class=\"headerlink\" title=\"Promiseçš„èµ·æº\"></a>Promiseçš„èµ·æº</h2><p>å¦‚æœä½ é˜…è¯»äº† promises çš„ä¸€äº›ç›¸å…³æ–‡çŒ®ï¼Œä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªè¯ <a href=\"https://medium.com/@wavded/managing-node-js-callback-hell-1fe03ba8baf#.ca5u6o9fl\" target=\"_blank\" rel=\"external\">é‡‘å­—å¡”é—®é¢˜</a> ç»å¸¸å‡ºç°ã€‚å®ƒæè¿°çš„æ˜¯å¤§é‡çš„å›è°ƒå‡½æ•°æ…¢æ…¢å‘å³ä¾§å±å¹•å»¶ä¼¸çš„ä¸€ç§çŠ¶æ€ã€‚</p>\n<p>Promises çš„ç¡®è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”ä¸ä»…ä»…æ˜¯ç¼©è¿›é—®é¢˜ã€‚å°±åƒåœ¨ <a href=\"http://youtu.be/hf1T_AONQJU\" target=\"_blank\" rel=\"external\">Callback Hellçš„æ•‘èµ</a> ä¸­æè¿°çš„ä¸€æ ·ï¼Œå›è°ƒå‡½æ•°çœŸæ­£çš„é—®é¢˜åœ¨äºä»–å‰¥å¤ºäº†æˆ‘ä»¬ä½¿ç”¨ return å’Œ throw è¿™äº›å…³é”®å­—çš„èƒ½åŠ›ã€‚ç›¸åï¼Œæˆ‘ä»¬çš„æ•´ä¸ªä»£ç æµç¨‹éƒ½æ˜¯åŸºäºå‰¯ä½œç”¨çš„: ä¸€ä¸ªå‡½æ•°ä¼šé™„å¸¦è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚</p>\n<blockquote>\n<p>åŸæ–‡å…³äºå‰¯ä½œç”¨çš„æè¿°å¹¶ä¸èƒ½å¾ˆç›´è§‚çš„è¿›è¡Œç†è§£ï¼Œå»ºè®®å‚è€ƒ <a href=\"https://en.wikipedia.org/wiki/Side_effect_(computer_science\" target=\"_blank\" rel=\"external\">WIKI</a>) ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå‡½æ•°é™¤äº†ä¼šè¿”å›ä¸€ä¸ªå€¼ä¹‹å¤–ï¼Œè¿˜ä¼šä¿®æ”¹å‡½æ•°ä»¥å¤–çš„çŠ¶æ€å¦‚å…¨å±€å˜é‡ç­‰ç­‰ã€‚å®é™…ä¸Šæ‰€æœ‰å¼‚æ­¥è°ƒç”¨éƒ½å¯ä»¥è§†ä¸ºå¸¦æœ‰å‰¯ä½œç”¨çš„è¡Œä¸ºã€‚</p>\n</blockquote>\n<p>å¹¶ä¸”å®é™…ä¸Šï¼Œå›è°ƒæ›´åŠ æ¼äººçš„æ˜¯ï¼Œä»–ä¼šå°†æˆ‘ä»¬é€šå¸¸åœ¨å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸­èƒ½è·å¾—çš„<em>å †æ ˆ</em>ç ´åã€‚ç¼–å†™ä»£ç æ—¶å¦‚æœæ— æ³•è·å–å †æ ˆå°±åƒå¼€è½¦æ—¶æ²¡æœ‰åˆ¹è½¦ä¸€æ ·: ä¸åˆ°ç”¨çš„æ—¶å€™ï¼Œä½ ä¸ä¼šçŸ¥é“å®ƒæœ‰å¤šé‡è¦ã€‚</p>\n<p>Promises ç»™äºˆæˆ‘ä»¬çš„å°±æ˜¯åœ¨æˆ‘ä»¬ä½¿ç”¨å¼‚æ­¥æ—¶ä¸¢å¤±çš„æœ€é‡è¦çš„è¯­è¨€åŸºçŸ³: return, throw ä»¥åŠå †æ ˆã€‚ä½†æ˜¯æƒ³è¦ promises èƒ½å¤Ÿæä¾›è¿™äº›ä¾¿åˆ©ç»™ä½ çš„å‰ææ˜¯ä½ çŸ¥é“å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ã€‚</p>\n<h2 id=\"æ–°æ‰‹é”™è¯¯\"><a href=\"#æ–°æ‰‹é”™è¯¯\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯\"></a>æ–°æ‰‹é”™è¯¯</h2><p>Promiseå¯¹äºä¸åŒçš„äººæœ‰ä¸åŒçš„ç†è§£å’Œè§‚ç‚¹ï¼Œä½†æ˜¯è¿™ç¯‡æ–‡ç« æˆ‘ç‰¹è´¨<a href=\"https://promisesaplus.com/\" target=\"_blank\" rel=\"external\">æ­£å¼æ ‡å‡†</a>, åœ¨ç°ä»£æµè§ˆå™¨ä¸­æš´éœ²ä¸ºwindow.Promiseã€‚è™½ç„¶å¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰windows.Promise,ä½†æ˜¯å¯ä»¥å¯»æ‰¾ä¸€äº›pollyfill,æ¯”å¦‚<a href=\"https://github.com/calvinmetcalf/lie\" target=\"_blank\" rel=\"external\">Lie</a>ã€<a href=\"https://github.com/petkaantonov/bluebird\" target=\"_blank\" rel=\"external\">bluebird</a>ã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-1ï¼š-promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\"><a href=\"#æ–°æ‰‹é”™è¯¯-1ï¼š-promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #1ï¼š promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜\"></a>æ–°æ‰‹é”™è¯¯ #1ï¼š promiseç‰ˆçš„é‡‘å­—å¡”é—®é¢˜</h3><p>è§‚å¯Ÿå¤§å®¶å¦‚ä½•ä½¿ç”¨ PouchDB è¿™ç±»å¤§å‹çš„ promise é£æ ¼çš„APIï¼Œæˆ‘å‘ç°å¤§é‡é”™è¯¯çš„ promise ä½¿ç”¨å½¢å¼ã€‚æœ€å¸¸è§çš„é”™è¯¯å°±æ˜¯ä¸‹é¢è¿™ä¸ª:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">remotedb.allDocs(&#123;</div><div class=\"line\">    <span class=\"attr\">include_docs</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">attachments</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> docs = result.rows;</div><div class=\"line\">    docs.forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">element</span>) </span>&#123;</div><div class=\"line\">        localdb.put(element.doc).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">            alert(<span class=\"string\">'Pulled doc with id '</span> + element.doc._id + <span class=\"string\">' and added to local db.'</span>);</div><div class=\"line\">        &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (err.status == <span class=\"number\">409</span>) &#123;</div><div class=\"line\">                localdb.get(element.doc._id).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resp</span>) </span>&#123;</div><div class=\"line\">                    localdb.remove(resp._id, resp._rev).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resp</span>) </span>&#123;</div><div class=\"line\">                            <span class=\"comment\">// et cetera...</span></div><div class=\"line\">                    &#125;)</div><div class=\"line\">                &#125;)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>æ˜¯çš„ï¼Œå®é™…ä¸Šä½ å¯ä»¥åƒä½¿ç”¨å›è°ƒä¸€æ ·ä½¿ç”¨ promisesï¼Œæ©ï¼Œå°±åƒç”¨æ‰“ç£¨æœºå»å‰Šè„šè¶¾ç”²ä¸€æ ·ï¼Œä½ ç¡®å®å¯ä»¥è¿™ä¹ˆåšã€‚</p>\n<p>å¹¶ä¸”å¦‚æœä½ ä»¥ä¸ºè¿™æ ·çš„é”™è¯¯åªé™äºåˆå­¦è€…ï¼Œé‚£ä¹ˆä½ ä¼šæƒŠè®¶äºæˆ‘å®é™…ä¸Šæ˜¯åœ¨é»‘è“å®˜æ–¹å¼€å‘è€…åšå®¢ä¸Šçœ‹åˆ°ä¸Šé¢çš„ä»£ç ã€‚è€çš„å›è°ƒé£æ ¼çš„ä¹ æƒ¯éš¾ä»¥æ¶ˆç­ã€‚(è‡³å¼€å‘è€…: æŠ±æ­‰é€‰äº†ä½ çš„ä¾‹å­ï¼Œä½†æ˜¯ä½ çš„ä¾‹å­å°†ä¼šæœ‰ç§¯æçš„æ•™è‚²æ„ä¹‰)</p>\n<p>æ­£ç¡®çš„é£æ ¼åº”è¯¥æ˜¯:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">remotedb.allDocs(...).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resultOfAllDocs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> localdb.put(...)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resultOfPut</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> localdb.get(...)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resultOfGet</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> localdb.put(...)</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(err)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™ç§å†™æ³•è¢«ç§°ä¸º composing promises ï¼Œæ˜¯ promises çš„å¼ºå¤§èƒ½åŠ›ä¹‹ä¸€ã€‚æ¯ä¸€ä¸ªå‡½æ•°åªä¼šåœ¨å‰ä¸€ä¸ª promise è¢«è°ƒç”¨å¹¶ä¸”å®Œæˆå›è°ƒåè°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°ä¼šè¢«å‰ä¸€ä¸ª promise çš„è¾“å‡ºè°ƒç”¨ï¼Œç¨åæˆ‘ä»¬åœ¨è¿™å—åšæ›´å¤šçš„è®¨è®ºã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-2ï¼š-WTF-ç”¨äº†-promises-åæ€ä¹ˆç”¨-forEach\"><a href=\"#æ–°æ‰‹é”™è¯¯-2ï¼š-WTF-ç”¨äº†-promises-åæ€ä¹ˆç”¨-forEach\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #2ï¼š WTF, ç”¨äº† promises åæ€ä¹ˆç”¨ forEach?\"></a>æ–°æ‰‹é”™è¯¯ #2ï¼š WTF, ç”¨äº† promises åæ€ä¹ˆç”¨ forEach?</h3><p>è¿™é‡Œæ˜¯å¤§å¤šæ•°äººå¯¹äº promises çš„ç†è§£å¼€å§‹å‡ºç°åå·®ã€‚ä¸€æ—¦å½“ä»–ä»¬è¦ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ forEach() å¾ªç¯ (æ— è®ºæ˜¯ for å¾ªç¯è¿˜æ˜¯ while å¾ªç¯)ï¼Œä»–ä»¬å®Œå…¨ä¸çŸ¥é“å¦‚ä½•å°† promises ä¸å…¶ä¸€èµ·ä½¿ã€‚å› æ­¤ä»–ä»¬å°±ä¼šå†™ä¸‹ç±»ä¼¼è¿™æ ·çš„ä»£ç ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// I want to remove() all docs</span></div><div class=\"line\">db.allDocs(&#123;<span class=\"attr\">include_docs</span>: <span class=\"literal\">true</span>&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    result.rows.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">row</span>) </span>&#123;</div><div class=\"line\">        db.remove(row.doc)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I naively believe all docs have been removed() now!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™ä»½ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿé—®é¢˜åœ¨äºç¬¬ä¸€ä¸ªå‡½æ•°å®é™…ä¸Šè¿”å›çš„æ˜¯ undefinedï¼Œè¿™æ„å‘³ç€ç¬¬äºŒä¸ªæ–¹æ³•ä¸ä¼šç­‰å¾…æ‰€æœ‰ documents éƒ½æ‰§è¡Œ db.remove()ã€‚å®é™…ä¸Šä»–ä¸ä¼šç­‰å¾…ä»»ä½•äº‹æƒ…ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨ä»»æ„æ•°é‡çš„æ–‡æ¡£è¢«åˆ é™¤åæ‰§è¡Œï¼</p>\n<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸éšè”½çš„ bugï¼Œå› ä¸ºå¦‚æœ PouchDB åˆ é™¤è¿™äº›æ–‡æ¡£è¶³å¤Ÿå¿«ï¼Œä½ çš„ UI ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ä¼šå®Œæˆæ­£å¸¸ï¼Œä½ å¯èƒ½ä¼šå®Œå…¨æ³¨æ„ä¸åˆ°æœ‰ä»€ä¹ˆä¸œè¥¿æœ‰é”™è¯¯ã€‚è¿™ä¸ª bug å¯èƒ½ä¼šåœ¨ä¸€äº›å¤æ€ªçš„ç«æ€é—®é¢˜æˆ–ä¸€äº›ç‰¹å®šçš„æµè§ˆå™¨ä¸­æš´éœ²å‡ºæ¥ï¼Œå¹¶ä¸”åˆ°æ—¶å¯èƒ½å‡ ä¹æ²¡æœ‰å¯èƒ½å»å®šä½é—®é¢˜ã€‚</p>\n<p>ç®€è€Œè¨€ä¹‹ï¼ŒforEach()/for/while å¹¶éä½ å¯»æ‰¾çš„è§£å†³æ–¹æ¡ˆã€‚ä½ éœ€è¦çš„æ˜¯ Promise.all():</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">db.allDocs(&#123;<span class=\"attr\">include_docs</span>: <span class=\"literal\">true</span>&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.all(result.rows.map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">row</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> db.remove(row.doc)</div><div class=\"line\">    &#125;))</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">arrayOfResults</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// All docs have really been removed() now!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„ä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¤§ä½“æ¥è¯´ï¼ŒPromise.all()ä¼šä»¥ä¸€ä¸ª promises æ•°ç»„ä¸ºè¾“å…¥ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ promiseã€‚è¿™ä¸ªæ–°çš„ promise ä¼šåœ¨æ•°ç»„ä¸­æ‰€æœ‰çš„ promises éƒ½æˆåŠŸè¿”å›åæ‰è¿”å›ã€‚ä»–æ˜¯å¼‚æ­¥ç‰ˆçš„ for å¾ªç¯ã€‚</p>\n<p>å¹¶ä¸” Promise.all() ä¼šå°†æ‰§è¡Œç»“æœç»„æˆçš„æ•°ç»„è¿”å›åˆ°ä¸‹ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚å½“ä½ å¸Œæœ›ä» PouchDB ä¸­è·å–å¤šä¸ªå¯¹è±¡æ—¶ï¼Œä¼šéå¸¸æœ‰ç”¨ã€‚æ­¤å¤–ä¸€ä¸ªæ›´åŠ æœ‰ç”¨çš„ç‰¹æ•ˆæ˜¯ï¼Œä¸€æ—¦æ•°ç»„ä¸­çš„ promise ä»»æ„ä¸€ä¸ªè¿”å›é”™è¯¯ï¼ŒPromise.all() ä¹Ÿä¼šè¿”å›é”™è¯¯ã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-3ï¼š-å¿˜è®°ä½¿ç”¨-catch\"><a href=\"#æ–°æ‰‹é”™è¯¯-3ï¼š-å¿˜è®°ä½¿ç”¨-catch\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #3ï¼š å¿˜è®°ä½¿ç”¨ .catch()\"></a>æ–°æ‰‹é”™è¯¯ #3ï¼š å¿˜è®°ä½¿ç”¨ .catch()</h3><p>è¿™æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ã€‚å•çº¯çš„åšä¿¡è‡ªå·±çš„ promises ä¼šæ°¸è¿œä¸å‡ºç°å¼‚å¸¸ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šå¿˜è®°åœ¨ä»–ä»¬çš„ä»£ç ä¸­æ·»åŠ ä¸€ä¸ª .catch()ã€‚ç„¶è€Œä¸å¹¸çš„æ˜¯è¿™ä¹Ÿæ„å‘³ç€ï¼Œä»»ä½•è¢«æŠ›å‡ºçš„å¼‚å¸¸éƒ½ä¼šè¢«åƒæ‰ï¼Œå¹¶ä¸”ä½ æ— æ³•åœ¨ console ä¸­è§‚å¯Ÿåˆ°ä»–ä»¬ã€‚è¿™ç±»é—®é¢˜ debug èµ·æ¥ä¼šéå¸¸ç—›è‹¦ã€‚</p>\n<blockquote>\n<p>ç±»ä¼¼ Bluebird ä¹‹ç±»çš„ Promise åº“ä¼šåœ¨è¿™ç§åœºæ™¯æŠ›å‡º UnhandledRejectionError è­¦ç¤ºæœ‰æœªå¤„ç†çš„å¼‚å¸¸ï¼Œè¿™ç±»æƒ…å†µä¸€æ—¦å‘ç°ï¼Œå°±ä¼šé€ æˆè„šæœ¬å¼‚å¸¸ï¼Œåœ¨ Node ä¸­æ›´ä¼šé€ æˆè¿›ç¨‹ Crash çš„é—®é¢˜ï¼Œå› æ­¤æ­£ç¡®çš„æ·»åŠ  .catch() éå¸¸é‡è¦ã€‚ è¯‘è€…æ³¨</p>\n</blockquote>\n<p>ä¸ºäº†é¿å…è¿™ç±»è®¨åŒçš„åœºæ™¯ï¼Œæˆ‘ä¹ æƒ¯äºåƒä¸‹é¢çš„ä»£ç ä¸€æ ·ä½¿ç”¨ promise:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> anotherPromise();</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> yetAnotherPromise();</div><div class=\"line\">&#125;).catch(<span class=\"built_in\">console</span>.log.bind(<span class=\"built_in\">console</span>)); <span class=\"comment\">// &lt;-- this is badass</span></div></pre></td></tr></table></figure>\n<p>å³ä½¿ä½ åšä¿¡ä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œæ·»åŠ ä¸€ä¸ª catch() æ€»å½’æ˜¯æ›´åŠ è°¨æ…çš„ã€‚å¦‚æœä½ çš„å‡è®¾æœ€ç»ˆè¢«å‘ç°æ˜¯é”™è¯¯çš„ï¼Œå®ƒä¼šè®©ä½ çš„ç”Ÿæ´»æ›´åŠ ç¾å¥½ã€‚</p>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-4ï¼šä½¿ç”¨-â€œdeferredâ€\"><a href=\"#æ–°æ‰‹é”™è¯¯-4ï¼šä½¿ç”¨-â€œdeferredâ€\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #4ï¼šä½¿ç”¨ â€œdeferredâ€\"></a>æ–°æ‰‹é”™è¯¯ #4ï¼šä½¿ç”¨ â€œdeferredâ€</h3><p>è¿™æ˜¯ä¸€ä¸ªæˆ‘ç»å¸¸å¯ä»¥çœ‹åˆ°çš„é”™è¯¯ï¼Œä»¥è‡³äºæˆ‘ç”šè‡³ä¸æ„¿æ„åœ¨è¿™é‡Œé‡å¤å®ƒï¼Œå°±åƒæƒ§æ€• Beetlejuice ä¸€æ ·ï¼Œä»…ä»…æ˜¯æåˆ°å®ƒçš„åå­—ï¼Œå°±ä¼šå¬å”¤å‡ºæ¥æ›´å¤šã€‚</p>\n<p>ç®€å•çš„è¯´ï¼Œpromises æ‹¥æœ‰ä¸€ä¸ªæ¼«é•¿å¹¶ä¸”æˆå‰§åŒ–çš„å†å²ï¼ŒJavascript ç¤¾åŒºèŠ±è´¹äº†å¤§é‡çš„æ—¶é—´è®©å…¶èµ°ä¸Šæ­£è½¨ã€‚åœ¨æ—©æœŸï¼Œdeferred åœ¨ Qï¼ŒWhenï¼ŒRSVPï¼ŒBluebirdï¼ŒLieç­‰ç­‰çš„ â€œä¼˜ç§€â€ ç±»åº“ä¸­è¢«å¼•å…¥ï¼Œ jQuery ä¸ Angular åœ¨ä½¿ç”¨ ES6 Promise è§„èŒƒä¹‹å‰ï¼Œéƒ½æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å¼ç¼–å†™ä»£ç ã€‚</p>\n<p>å› æ­¤å¦‚æœä½ åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨äº†è¿™ä¸ªè¯ (æˆ‘ä¸ä¼šæŠŠè¿™ä¸ªè¯é‡å¤ç¬¬ä¸‰éï¼)ï¼Œä½ å°±åšé”™äº†ã€‚ä¸‹é¢æ˜¯è¯´æ˜ä¸€ä¸‹å¦‚ä½•é¿å…å®ƒã€‚</p>\n<p>é¦–å…ˆï¼Œå¤§éƒ¨åˆ† promises ç±»åº“éƒ½ä¼šæä¾›ä¸€ä¸ªæ–¹å¼å»åŒ…è£…ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ promises å¯¹è±¡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒAngularçš„ $q æ¨¡å—å…è®¸ä½ ä½¿ç”¨ $q.when åŒ…è£¹é $q çš„ promisesã€‚å› æ­¤ Angular ç”¨æˆ·å¯ä»¥è¿™æ ·ä½¿ç”¨ PouchDB promises.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$q.when(db.put(doc)).then(<span class=\"comment\">/* ... */</span>); <span class=\"comment\">// &lt;-- this is all the code you need</span></div></pre></td></tr></table></figure>\n<p>å¦ä¸€ç§ç­–ç•¥æ˜¯ä½¿ç”¨<a href=\"https://blog.domenic.me/the-revealing-constructor-pattern/\" target=\"_blank\" rel=\"external\">æ„é€ å‡½æ•°å£°æ˜æ¨¡å¼</a>ï¼Œå®ƒåœ¨ç”¨æ¥åŒ…è£¹é promise API æ—¶éå¸¸æœ‰ç”¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸ºäº†åŒ…è£¹ä¸€ä¸ªå›è°ƒé£æ ¼çš„ API å¦‚ Node çš„ fs.readFile ï¼Œä½ å¯ä»¥ç®€å•çš„è¿™ä¹ˆåš:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">    fs.readFile(<span class=\"string\">'myfile.txt'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, file</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (err) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> reject(err);</div><div class=\"line\">        &#125;</div><div class=\"line\">        resolve(file);</div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;).then(<span class=\"comment\">/* ... */</span>)</div></pre></td></tr></table></figure>\n<p>å®Œå·¥ï¼æˆ‘ä»¬æ‰“è´¥äº†å¯æ€•çš„ defâ€¦.å•Šå“ˆï¼ŒæŠ“åˆ°è‡ªå·±äº†ã€‚:)</p>\n<blockquote>\n<p>å…³äºä¸ºä½•è¿™æ˜¯ä¸€ç§åæ¨¡å¼æ›´å¤šçš„å†…å®¹ï¼Œè¯·æŸ¥çœ‹ Bluebird çš„ <a href=\"https://github.com/petkaantonov/bluebird/wiki/Promise-anti-patterns#the-deferred-anti-pattern\" target=\"_blank\" rel=\"external\">promise anti-patterns</a> wiki é¡µ</p>\n</blockquote>\n<h3 id=\"æ–°æ‰‹é”™è¯¯-5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\"><a href=\"#æ–°æ‰‹é”™è¯¯-5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\" class=\"headerlink\" title=\"æ–°æ‰‹é”™è¯¯ #5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›\"></a>æ–°æ‰‹é”™è¯¯ #5ï¼šä½¿ç”¨å‰¯ä½œç”¨è°ƒç”¨è€Œéè¿”å›</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    someOtherPromise()</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Gee, I hope someOtherPromise() has resolved!</span></div><div class=\"line\">    <span class=\"comment\">// Spoiler alert: it hasn't.</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>å¥½äº†ï¼Œç°åœ¨æ˜¯æ—¶å€™è®¨è®ºä¸€ä¸‹å…³äº promises ä½ æ‰€éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ã€‚</p>\n<p>è®¤çœŸçš„è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸€æ—¦ä½ ç†è§£äº†å®ƒï¼Œå°±ä¼šé¿å…æ‰€æœ‰æˆ‘æåŠçš„é”™è¯¯çš„å¤æ€ªçš„æŠ€å·§ã€‚ä½ å‡†å¤‡å¥½äº†ä¹ˆï¼Ÿ</p>\n<p>å°±å¦‚æˆ‘å‰é¢æ‰€è¯´ï¼Œpromises çš„å¥‡å¦™åœ¨äºç»™äºˆæˆ‘ä»¬ä»¥å‰çš„ return ä¸ throwã€‚ä½†æ˜¯åœ¨å®è·µä¸­è¿™åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹å‘¢ï¼Ÿ</p>\n<p>æ¯ä¸€ä¸ª promise éƒ½ä¼šæä¾›ç»™ä½ ä¸€ä¸ª then() å‡½æ•° (æˆ–æ˜¯ catch()ï¼Œå®é™…ä¸Šåªæ˜¯ then(null, â€¦) çš„è¯­æ³•ç³–)ã€‚å½“æˆ‘ä»¬åœ¨ then() å‡½æ•°å†…éƒ¨æ—¶ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I'm inside a then() function!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿæœ‰ä¸‰ç§äº‹æƒ…ï¼š</p>\n<p>return å¦ä¸€ä¸ª promise<br>return ä¸€ä¸ªåŒæ­¥çš„å€¼ (æˆ–è€… undefined)<br>throw ä¸€ä¸ªåŒæ­¥å¼‚å¸¸<br>å°±æ˜¯è¿™æ ·ã€‚ä¸€æ—¦ä½ ç†è§£äº†è¿™ä¸ªæŠ€å·§ï¼Œä½ å°±ç†è§£äº† promisesã€‚å› æ­¤è®©æˆ‘ä»¬é€ä¸ªäº†è§£ä¸‹ã€‚</p>\n<p>è¿”å›å¦ä¸€ä¸ª promise<br>è¿™æ˜¯ä¸€ä¸ªåœ¨ promise æ–‡æ¡£ä¸­å¸¸è§çš„ä½¿ç”¨æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šæ–‡ä¸­æåˆ°çš„ â€œcomposing promisesâ€ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I got a user account!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<blockquote>\n<p>æ³¨æ„åˆ°æˆ‘æ˜¯ <code>return</code> ç¬¬äºŒä¸ª promiseï¼Œè¿™ä¸ª <code>return</code> éå¸¸é‡è¦ã€‚å¦‚æœæˆ‘æ²¡æœ‰å†™ <code>return</code>ï¼Œ<code>getUserAccountById()</code> å°±ä¼šæˆä¸ºä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ªå‡½æ•°å°†ä¼šæ¥æ”¶åˆ° <code>undefined</code> è€Œé <code>userAccount</code>ã€‚</p>\n</blockquote>\n<h3 id=\"è¿”å›ä¸€ä¸ªåŒæ­¥å€¼-æˆ–è€…-undefined\"><a href=\"#è¿”å›ä¸€ä¸ªåŒæ­¥å€¼-æˆ–è€…-undefined\" class=\"headerlink\" title=\"è¿”å›ä¸€ä¸ªåŒæ­¥å€¼ (æˆ–è€… undefined)\"></a>è¿”å›ä¸€ä¸ªåŒæ­¥å€¼ (æˆ–è€… undefined)</h3><p>è¿”å› undefined é€šå¸¸æ˜¯é”™è¯¯çš„ï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ªåŒæ­¥å€¼å®é™…ä¸Šæ˜¯å°†åŒæ­¥ä»£ç åŒ…è£¹ä¸º promise é£æ ¼ä»£ç çš„ä¸€ç§éå¸¸èµçš„æ‰‹æ®µã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯¹ users ä¿¡æ¯æœ‰ä¸€ä¸ªå†…å­˜ç¼“å­˜ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (inMemoryCache[user.id]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inMemoryCache[user.id]    <span class=\"comment\">// returning a synchronous value!</span></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id) <span class=\"comment\">// returning a promise!</span></div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I got a user account!</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>æ˜¯ä¸æ˜¯å¾ˆèµï¼Ÿç¬¬äºŒä¸ªå‡½æ•°ä¸éœ€è¦å…³å¿ƒ userAccount æ˜¯ä»åŒæ­¥æ–¹æ³•è¿˜æ˜¯å¼‚æ­¥æ–¹æ³•ä¸­è·å–çš„ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå‡½æ•°å¯ä»¥éå¸¸è‡ªç”±çš„è¿”å›ä¸€ä¸ªåŒæ­¥æˆ–è€…å¼‚æ­¥å€¼ã€‚</p>\n<p>ä¸å¹¸çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªä¸ä¾¿çš„ç°å®æ˜¯åœ¨ JavaScript ä¸­æ— è¿”å›å€¼å‡½æ•°åœ¨æŠ€æœ¯ä¸Šæ˜¯è¿”å› undefinedï¼Œè¿™å°±æ„å‘³ç€å½“ä½ æœ¬æ„æ˜¯è¿”å›æŸäº›å€¼æ—¶ï¼Œä½ å¾ˆå®¹æ˜“ä¼šä¸ç»æ„é—´å¼•å…¥å‰¯ä½œç”¨ã€‚</p>\n<p>å‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä¸ªäººå…»æˆäº†åœ¨ then() å‡½æ•°å†…éƒ¨ æ°¸è¿œè¿”å›æˆ–æŠ›å‡º çš„ä¹ æƒ¯ã€‚æˆ‘å»ºè®®ä½ ä¹Ÿè¿™æ ·åšã€‚</p>\n<h3 id=\"æŠ›å‡ºåŒæ­¥å¼‚å¸¸\"><a href=\"#æŠ›å‡ºåŒæ­¥å¼‚å¸¸\" class=\"headerlink\" title=\"æŠ›å‡ºåŒæ­¥å¼‚å¸¸\"></a>æŠ›å‡ºåŒæ­¥å¼‚å¸¸</h3><p>è°ˆåˆ° throwï¼Œè¿™æ˜¯è®© promises æ›´åŠ èµçš„ä¸€ç‚¹ã€‚æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åœ¨ç”¨æˆ·å·²ç»ç™»å‡ºæ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªåŒæ­¥å¼‚å¸¸ã€‚è¿™ä¼šéå¸¸ç®€å•ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (user.isLoggedOut()) &#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'user logged out!'</span>) <span class=\"comment\">// throwing a synchronous error!</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (inMemoryCache[user.id]) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> inMemoryCache[user.id]       <span class=\"comment\">// returning a synchronous value!</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)   <span class=\"comment\">// returning a promise!</span></div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I got a user account!</span></div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Boo, I got an error!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>å¦‚æœç”¨æˆ·å·²ç»ç™»å‡ºï¼Œæˆ‘ä»¬çš„ catch() ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªåŒæ­¥å¼‚å¸¸ï¼Œå¹¶ä¸”å¦‚æœ åç»­çš„ promise ä¸­å‡ºç°å¼‚æ­¥å¼‚å¸¸ï¼Œä»–ä¹Ÿä¼šæ¥æ”¶åˆ°ã€‚å†å¼ºè°ƒä¸€æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°å¹¶ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªå¼‚å¸¸æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥è¿”å›çš„ã€‚</p>\n<p>è¿™ç§ç‰¹æ€§éå¸¸æœ‰ç”¨ï¼Œå› æ­¤å®ƒèƒ½å¤Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¸®åŠ©å®šä½ä»£ç é—®é¢˜ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœåœ¨ then() å‡½æ•°å†…éƒ¨ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œæˆ‘ä»¬æ‰§è¡Œ JSON.parse()ï¼Œå¦‚æœ JSON æ ¼å¼æ˜¯é”™è¯¯çš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å¦‚æœæ˜¯ä½¿ç”¨å›è°ƒé£æ ¼ï¼Œè¿™ä¸ªé”™è¯¯å¾ˆå¯èƒ½å°±ä¼šè¢«åƒæ‰ï¼Œä½†æ˜¯ä½¿ç”¨ promisesï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“çš„åœ¨ catch() å‡½æ•°ä¸­å¤„ç†å®ƒäº†ã€‚</p>\n<h1 id=\"è¿›é˜¶é”™è¯¯\"><a href=\"#è¿›é˜¶é”™è¯¯\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯\"></a>è¿›é˜¶é”™è¯¯</h1><p>å¥½äº†ï¼Œç°åœ¨ä½ å·²ç»äº†è§£äº†è®© promises å˜çš„è¶…çº§ç®€å•çš„æŠ€å·§ï¼Œç°åœ¨è®©æˆ‘ä»¬èŠä¸€èŠä¸€äº›ç‰¹æ®Šåœºæ™¯ã€‚<br>è¿™äº›é”™è¯¯ä¹‹æ‰€ä»¥è¢«æˆ‘å½’ç±»ä¸º â€œè¿›é˜¶â€ ï¼Œæ˜¯å› ä¸ºæˆ‘åªè§è¿‡è¿™äº›é”™è¯¯å‘ç”Ÿåœ¨å¯¹ promises å·²ç»æœ‰ç›¸å½“æ·±å…¥äº†è§£çš„å¼€å‘è€…èº«ä¸Šã€‚ä½†æ˜¯ä¸ºäº†è§£å†³æ–‡ç« æœ€å¼€å§‹çš„è°œé¢˜ï¼Œæˆ‘ä»¬å¿…é¡»è®¨è®ºä¸€ä¸‹è¿™äº›é”™è¯¯ã€‚</p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-1ï¼šä¸çŸ¥é“-Promise-resolve\"><a href=\"#è¿›é˜¶é”™è¯¯-1ï¼šä¸çŸ¥é“-Promise-resolve\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #1ï¼šä¸çŸ¥é“ Promise.resolve()\"></a>è¿›é˜¶é”™è¯¯ #1ï¼šä¸çŸ¥é“ Promise.resolve()</h3><p>å¦‚æˆ‘ä¸Šé¢æ‰€åˆ—ä¸¾çš„ï¼Œpromises åœ¨å°è£…åŒæ­¥ä¸å¼‚æ­¥ä»£ç æ—¶éå¸¸çš„æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå¦‚æœä½ å‘ç°ä½ ç»å¸¸å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">    resolve(someSynchronousValue)</div><div class=\"line\">&#125;).then(<span class=\"comment\">/* ... */</span>)</div></pre></td></tr></table></figure>\n<p>ä½ ä¼šå‘ç°ä½¿ç”¨ Promise.resolve ä¼šæ›´åŠ ç®€æ´ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(someSynchronousValue).then(<span class=\"comment\">/* ... */</span>);</div></pre></td></tr></table></figure>\n<p>å®ƒåœ¨ç”¨æ¥æ•è·åŒæ­¥å¼‚å¸¸æ—¶ä¹Ÿæå…¶çš„å¥½ç”¨ã€‚ç”±äºå®ƒå®åœ¨æ˜¯å¥½ç”¨ï¼Œå› æ­¤æˆ‘å·²ç»å…»æˆäº†åœ¨æˆ‘æ‰€æœ‰ promise å½¢å¼çš„ API æ¥å£ä¸­è¿™æ ·ä½¿ç”¨å®ƒï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">somePromiseAPI</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        doSomethingThatMayThrow()</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'foo'</span></div><div class=\"line\">    &#125;).then(<span class=\"comment\">/* ... */</span>)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>åˆ‡è®°ï¼šä»»ä½•æœ‰å¯èƒ½ throw åŒæ­¥å¼‚å¸¸çš„ä»£ç éƒ½æ˜¯ä¸€ä¸ªåç»­ä¼šå¯¼è‡´å‡ ä¹æ— æ³•è°ƒè¯•å¼‚å¸¸çš„æ½œåœ¨å› ç´ ã€‚ä½†æ˜¯å¦‚æœä½ å°†æ‰€æœ‰ä»£ç éƒ½ä½¿ç”¨ Promise.resolve() å°è£…ï¼Œé‚£ä¹ˆä½ æ€»æ˜¯å¯ä»¥åœ¨ä¹‹åä½¿ç”¨ catch() æ¥æ•è·å®ƒã€‚</p>\n<p>ç±»ä¼¼çš„ï¼Œè¿˜æœ‰ Promise.reject() ä½ å¯ä»¥ç”¨æ¥è¿”å›ä¸€ä¸ªç«‹åˆ»è¿”å›å¤±è´¥çš„ promiseã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'some awful error'</span>));</div></pre></td></tr></table></figure>\n<h3 id=\"è¿›é˜¶é”™è¯¯-2ï¼šcatch-ä¸-then-null-â€¦-å¹¶éå®Œå…¨ç­‰ä»·\"><a href=\"#è¿›é˜¶é”™è¯¯-2ï¼šcatch-ä¸-then-null-â€¦-å¹¶éå®Œå…¨ç­‰ä»·\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #2ï¼šcatch() ä¸ then(null, â€¦) å¹¶éå®Œå…¨ç­‰ä»·\"></a>è¿›é˜¶é”™è¯¯ #2ï¼šcatch() ä¸ then(null, â€¦) å¹¶éå®Œå…¨ç­‰ä»·</h3><p>ä¹‹å‰æˆ‘è¯´è¿‡ catch() ä»…ä»…æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ã€‚å› æ­¤ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">somePromise().then(<span class=\"literal\">null</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> someOtherPromise();</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> someOtherPromise();</div><div class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// handle error</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ å¥½å¥‡ä¸ºä½•è¿™ä¸¤æ®µä»£ç å¹¶ä¸ç­‰ä»·ï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹å¦‚æœç¬¬ä¸€ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oh noes'</span>)</div><div class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I caught your error! :)</span></div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">somePromise().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'oh noes'</span>)</div><div class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// I didn't catch your error! :(</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>å› æ­¤ï¼Œå½“ä½ ä½¿ç”¨ then(resolveHandler, rejectHandler) è¿™ç§å½¢å¼æ—¶ï¼ŒrejectHandler å¹¶ä¸ä¼šæ•è·ç”± resolveHandler å¼•å‘çš„å¼‚å¸¸ã€‚</p>\n<p>é‰´äºæ­¤ï¼Œæˆ‘ä¸ªäººçš„ä¹ æƒ¯æ˜¯ä¸é€‚ç”¨ then() çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè€Œæ˜¯æ€»æ˜¯ä½¿ç”¨ catch()ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯å½“æˆ‘å†™ä¸€äº›å¼‚æ­¥çš„ Mocha æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæˆ‘å¯èƒ½ä¼šå¸Œæœ›ç”¨ä¾‹çš„å¼‚å¸¸å¯ä»¥æ­£ç¡®çš„è¢«æŠ›å‡ºï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">it(<span class=\"string\">'should throw an error'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> doSomethingThatThrows().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'I expected an error!'</span>)</div><div class=\"line\">    &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">        should.exist(err)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¯´åˆ°è¿™é‡Œï¼Œ<a href=\"http://mochajs.org/\" target=\"_blank\" rel=\"external\">Mocha</a> å’Œ <a href=\"http://chaijs.com/\" target=\"_blank\" rel=\"external\">Chai</a> ç”¨æ¥æµ‹è¯• promise æ¥å£æ—¶ï¼Œæ˜¯ä¸€å¯¹éå¸¸å¥½çš„ç»„åˆã€‚ <a href=\"https://github.com/pouchdb/plugin-seed\" target=\"_blank\" rel=\"external\">pouchdb-plugin-seed</a> é¡¹ç›®ä¸­æœ‰ä¸€äº› <a href=\"https://github.com/pouchdb/plugin-seed/blob/master/test/test.js\" target=\"_blank\" rel=\"external\">ç¤ºä¾‹</a> å¯ä»¥å¸®åŠ©ä½ å…¥é—¨ã€‚</p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-3ï¼špromises-vs-promises-factories\"><a href=\"#è¿›é˜¶é”™è¯¯-3ï¼špromises-vs-promises-factories\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #3ï¼špromises vs promises factories\"></a>è¿›é˜¶é”™è¯¯ #3ï¼špromises vs promises factories</h3><p>å½“æˆ‘ä»¬å¸Œæœ›æ‰§è¡Œä¸€ä¸ªä¸ªçš„æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ï¼Œå³ç±»ä¼¼ Promise.all() ä½†æ˜¯å¹¶éå¹¶è¡Œçš„æ‰§è¡Œæ‰€æœ‰ promisesã€‚</p>\n<p>ä½ å¯èƒ½å¤©çœŸçš„å†™ä¸‹è¿™æ ·çš„ä»£ç ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">executeSequentially</span>(<span class=\"params\">promises</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"built_in\">Promise</span>.resolve()</div><div class=\"line\">    promises.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">promise</span>) </span>&#123;</div><div class=\"line\">        result = result.then(promise)</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> result</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä»½ä»£ç ä¸ä¼šæŒ‰ç…§ä½ çš„æœŸæœ›å»æ‰§è¡Œï¼Œä½ ä¼ å…¥ executeSequentially() çš„ promises ä¾ç„¶ä¼šå¹¶è¡Œæ‰§è¡Œã€‚</p>\n<p>å…¶æ ¹æºåœ¨äºä½ æ‰€å¸Œæœ›çš„ï¼Œå®é™…ä¸Šæ ¹æœ¬ä¸æ˜¯å»æ‰§è¡Œä¸€ä¸ª promises åºåˆ—ã€‚ä¾ç…§ promises è§„èŒƒï¼Œä¸€æ—¦ä¸€ä¸ª promise è¢«åˆ›å»ºï¼Œå®ƒå°±è¢«æ‰§è¡Œäº†ã€‚å› æ­¤ä½ å®é™…ä¸Šéœ€è¦çš„æ˜¯ä¸€ä¸ª promise factories æ•°ç»„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">executeSequentially</span>(<span class=\"params\">promiseFactories</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> result = <span class=\"built_in\">Promise</span>.resolve()</div><div class=\"line\">    promiseFactories.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">promiseFactory</span>) </span>&#123;</div><div class=\"line\">        result = result.then(promiseFactory)</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> result</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼šâ€œè¿™æ˜¯å“ªä¸ªè§é¬¼çš„ Java ç¨‹åºçŒ¿ï¼Œä»–ä¸ºå•¥åœ¨è¯´ factoriesï¼Ÿâ€ ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ª promises factory æ˜¯ååˆ†ç®€å•çš„ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªå¯ä»¥è¿”å› promise çš„å‡½æ•°ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">myPromiseFactory</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> somethingThatCreatesAPromise();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä¸ºä½•è¿™æ ·å°±å¯ä»¥äº†ï¼Ÿè¿™æ˜¯å› ä¸ºä¸€ä¸ª promise factory åœ¨è¢«æ‰§è¡Œä¹‹å‰å¹¶ä¸ä¼šåˆ›å»º promiseã€‚å®ƒå°±åƒä¸€ä¸ª then å‡½æ•°ä¸€æ ·ï¼Œè€Œå®é™…ä¸Šï¼Œå®ƒä»¬å°±æ˜¯å®Œå…¨ä¸€æ ·çš„ä¸œè¥¿ã€‚</p>\n<p>å¦‚æœä½ æŸ¥çœ‹ä¸Šé¢çš„ executeSequentially() å‡½æ•°ï¼Œç„¶åæƒ³è±¡ myPromiseFactory è¢«åŒ…è£¹åœ¨ result.then(â€¦) ä¹‹ä¸­ï¼Œä¹Ÿè®¸ä½ è„‘ä¸­çš„å°ç¯æ³¡å°±ä¼šäº®èµ·ã€‚åœ¨æ­¤æ—¶æ­¤åˆ»ï¼Œå¯¹äº promise ä½ å°±ç®—æ˜¯æ‚Ÿé“äº†ã€‚</p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª-promises-çš„ç»“æœæ€ä¹ˆåŠ\"><a href=\"#è¿›é˜¶é”™è¯¯-4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª-promises-çš„ç»“æœæ€ä¹ˆåŠ\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª promises çš„ç»“æœæ€ä¹ˆåŠ\"></a>è¿›é˜¶é”™è¯¯ #4ï¼šå¥½äº†ï¼Œå¦‚æœæˆ‘å¸Œæœ›è·å¾—ä¸¤ä¸ª promises çš„ç»“æœæ€ä¹ˆåŠ</h3><p>æœ‰æ—¶å€™ï¼Œä¸€ä¸ª promise ä¼šä¾èµ–äºå¦ä¸€ä¸ªï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›åŒæ—¶è·å¾—è¿™ä¸¤ä¸ª promises çš„è¾“å‡ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// dangit, I need the \"user\" object too!</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ä¸ºäº†æˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ Javascript å¼€å‘è€…ï¼Œå¹¶ä¸”é¿å…é‡‘å­—å¡”é—®é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°† user å¯¹è±¡å­˜åœ¨ä¸€ä¸ªæ›´é«˜çš„ä½œç”¨åŸŸä¸­çš„å˜é‡é‡Œï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> user</div><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    user = result</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// okay, I have both the \"user\" and the \"userAccount\"</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºè¿™æ ·åšæœ‰äº›æ‚ç‰Œã€‚æˆ‘æ¨èçš„ç­–ç•¥æ˜¯æŠ›å¼ƒæˆè§ï¼Œæ‹¥æŠ±é‡‘å­—å¡”ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// okay, I have both the \"user\" and the \"userAccount\"</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>â€¦è‡³å°‘æš‚æ—¶è¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ã€‚ä¸€æ—¦ç¼©è¿›å¼€å§‹æˆä¸ºé—®é¢˜ï¼Œä½ å¯ä»¥é€šè¿‡ Javascript å¼€å‘è€…ä»è¿œå¤æ—¶æœŸå°±å¼€å§‹ä½¿ç”¨çš„æŠ€å·§ï¼Œå°†å‡½æ•°æŠ½ç¦»åˆ°ä¸€ä¸ªå‘½åå‡½æ•°ä¸­ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onGetUserAndUserAccount</span>(<span class=\"params\">user, userAccount</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> doSomething(user, userAccount)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onGetUser</span>(<span class=\"params\">user</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> getUserAccountById(user.id).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">userAccount</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> onGetUserAndUserAccount(user, userAccount)</div><div class=\"line\">    &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">getUserByName(<span class=\"string\">'nolan'</span>)</div><div class=\"line\">.then(onGetUser)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// at this point, doSomething() is done, and we are back to indentation 0</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>ç”±äºä½ çš„ promise ä»£ç å¼€å§‹å˜å¾—æ›´åŠ å¤æ‚ï¼Œä½ å¯èƒ½å‘ç°è‡ªå·±å¼€å§‹å°†è¶Šæ¥è¶Šå¤šçš„å‡½æ•°æŠ½ç¦»åˆ°å‘½åå‡½æ•°ä¸­ï¼Œæˆ‘å‘ç°è¿™æ ·åšï¼Œä½ çš„ä»£ç ä¼šè¶Šæ¥è¶Šæ¼‚äº®ï¼Œå°±åƒè¿™æ ·ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">putYourRightFootIn()</div><div class=\"line\">.then(putYourRightFootOut)</div><div class=\"line\">.then(putYourRightFootIn)</div><div class=\"line\">.then(shakeItAllAbout)</div></pre></td></tr></table></figure>\n<p><code>è¿™å°±æ˜¯ promises çš„é‡ç‚¹ã€‚</code></p>\n<h3 id=\"è¿›é˜¶é”™è¯¯-5ï¼špromises-ç©¿é€\"><a href=\"#è¿›é˜¶é”™è¯¯-5ï¼špromises-ç©¿é€\" class=\"headerlink\" title=\"è¿›é˜¶é”™è¯¯ #5ï¼špromises ç©¿é€\"></a>è¿›é˜¶é”™è¯¯ #5ï¼špromises ç©¿é€</h3><p>æœ€åï¼Œè¿™ä¸ªé”™è¯¯å°±æ˜¯æˆ‘å¼€å¤´è¯´çš„ promises è°œé¢˜æ‰€å½±å°„çš„é”™è¯¯ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç¨€æœ‰çš„ç”¨ä¾‹ï¼Œå¹¶ä¸”å¯èƒ½å®Œå…¨ä¸ä¼šå‡ºç°åœ¨ä½ çš„ä»£ç ä¸­ï¼Œä½†æ˜¯çš„çš„ç¡®ç¡®éœ‡æƒŠäº†æˆ‘ã€‚</p>\n<p>ä½ è®¤ä¸ºä¸‹é¢çš„ä»£ç ä¼šæ‰“å°å‡ºä»€ä¹ˆï¼Ÿ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'foo'</span>)</div><div class=\"line\">.then(<span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'bar'</span>))</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(result);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ è®¤ä¸ºå®ƒä¼šæ‰“å°å‡º barï¼Œé‚£ä¹ˆä½ å°±é”™äº†ã€‚å®ƒå®é™…ä¸Šæ‰“å°å‡ºæ¥çš„æ˜¯ fooï¼</p>\n<p>å‘ç”Ÿè¿™ä¸ªçš„åŸå› æ˜¯å¦‚æœä½ åƒ then() ä¼ é€’çš„å¹¶éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæ¯”å¦‚ promiseï¼‰ï¼Œå®ƒå®é™…ä¸Šä¼šå°†å…¶è§£é‡Šä¸º then(null)ï¼Œè¿™å°±ä¼šå¯¼è‡´å‰ä¸€ä¸ª promise çš„ç»“æœä¼šç©¿é€ä¸‹é¢ã€‚ä½ å¯ä»¥è‡ªå·±æµ‹è¯•ä¸€ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'foo'</span>)</div><div class=\"line\">.then(<span class=\"literal\">null</span>)</div><div class=\"line\">.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(result)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>æ·»åŠ ä»»æ„æ•°é‡çš„ then(null)ï¼Œå®ƒä¾ç„¶ä¼šæ‰“å° fooã€‚</p>\n<p>è¿™å®é™…ä¸Šåˆå›åˆ°äº†æˆ‘ä¹‹å‰è¯´çš„ promises vs promise factoriesã€‚ç®€å•çš„è¯´ï¼Œä½ å¯ä»¥ç›´æ¥ä¼ é€’ä¸€ä¸ª promise åˆ° then() å‡½æ•°ä¸­ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šæŒ‰ç…§ä½ æœŸæœ›çš„å»æ‰§è¡Œã€‚then() æ˜¯æœŸæœ›è·å–ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤ä½ å¸Œæœ›åšçš„æœ€å¯èƒ½æ˜¯ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'foo'</span>).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'bar'</span>)</div><div class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">result</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(result)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>è¿™æ ·ä»–å°±ä¼šå¦‚æˆ‘ä»¬æ‰€æƒ³çš„æ‰“å°å‡º barã€‚</p>\n<p><code>å› æ­¤è®°ä½ï¼šæ°¸è¿œéƒ½æ˜¯å¾€ then() ä¸­ä¼ é€’å‡½æ•°ï¼</code></p>\n<h3 id=\"æœŸå¾…-async-await\"><a href=\"#æœŸå¾…-async-await\" class=\"headerlink\" title=\"æœŸå¾… async/await\"></a>æœŸå¾… async/await</h3><p>åœ¨ â€œ<a href=\"https://pouchdb.com/2015/03/05/taming-the-async-beast-with-es7.html\" target=\"_blank\" rel=\"external\">Taming the asynchronous beast with ES7</a>â€ ä¸­æåˆ°çš„é‡ç‚¹ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘æ¢ç©¶äº† ES7 çš„ async/await å…³é”®å­—ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å°† promises æ›´æ·±åº¦çš„ç»“åˆå…¥è¯­è¨€ã€‚ä¸å†ä¼šè¦æ±‚æˆ‘ä»¬å»ç¼–å†™ä¼ªåŒæ­¥çš„ä»£ç ï¼ˆä»¥åŠä¸€ä¸ªå‡çš„ catch() å‡½æ•°ï¼Œè™½ç„¶åƒï¼Œä½†æ˜¯å¹¶éæ˜¯ catchï¼‰ï¼ŒES7 å°†ä¼šå…è®¸æˆ‘ä»¬ä½¿ç”¨çœŸæ­£çš„ try/catch/return å…³é”®å­—ï¼Œå°±åƒæˆ‘ä»¬åœ¨ CS 101 ä¸Šå­¦çš„ä¸€æ ·ã€‚</p>\n<p>è¿™å¯¹äº Javascript è¯­è¨€æ¥è¯´æ˜¯ä¸€ä¸ªå¤§ç¦éŸ³ã€‚å› ä¸ºå³ä½¿åˆ°æœ€åï¼Œåªè¦æˆ‘ä»¬çš„å·¥å…·ä¸å‘Šè¯‰æˆ‘ä»¬åšé”™äº†ï¼Œè¿™äº› promise åæ¨¡å¼ä¾ç„¶ä¼šä¸€ç›´å‡ºç°ã€‚</p>\n<p>ä» JavaScript çš„å†å²æ¥çœ‹ï¼Œæˆ‘è®¤ä¸ºå…¬æ­£çš„è¯„ä»·æ¥è¯´ JSLint ä¸ JSHint å¯¹ç¤¾åŒºçš„è´¡çŒ®æ˜¯é«˜äº JavaScript: The Good Parts çš„ï¼Œè™½ç„¶ä»–ä»¬åŒ…å«çš„ä¿¡æ¯å®é™…ä¸Šæ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯å®ƒä»¬çš„åŒºåˆ«åœ¨äº è¢«å‘ŠçŸ¥ä½ åœ¨ä½ ä»£ç ä¸­çŠ¯çš„é”™è¯¯ ä¸ä½ å»é˜…è¯»ä¸€æœ¬ä¹¦ç±ï¼Œå»ç†è§£å…¶ä»–äººçŠ¯çš„é”™è¯¯ã€‚</p>\n<p>ES7 çš„ async/await çš„ç¾å¦™åœ¨äºï¼Œä½ çš„é”™è¯¯ä¼šè¢«ä½œä¸ºè¯­æ³•æˆ–è€…ç¼–è¯‘å™¨é”™è¯¯æç¤ºå‡ºæ¥ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶çš„ bugã€‚ä¸è¿‡å°±ç›®å‰è€Œè¨€ï¼Œäº†è§£ promise å¯ä»¥åšä»€ä¹ˆä»¥åŠå¦‚ä½•åœ¨ ES5 ä¸ ES6 ä¸­æ­£ç¡®çš„ä½¿ç”¨å®ƒä»¬ä¾ç„¶æ˜¯æœ‰å¿…è¦çš„ã€‚</p>\n<p>å› æ­¤å½“æˆ‘æ„è¯†åˆ°ï¼Œå°±åƒ JavaScript: The Good Parts ä¸€æ ·ï¼Œè¿™ç¯‡åšæ–‡å¯èƒ½åªä¼šæœ‰éå¸¸æœ‰é™çš„å½±å“çš„æ—¶å€™ï¼Œæˆ‘å¸Œæœ›å½“ä½ å‘ç°å…¶ä»–äººåœ¨çŠ¯åŒæ ·çš„é”™è¯¯çš„æ—¶å€™ï¼Œä½ å¯ä»¥å°†è¿™ç¯‡åšæ–‡æä¾›ç»™ä»–ä»¬ã€‚å› ä¸ºç°åœ¨ä¾ç„¶æœ‰å¾ˆå¤šåŒå­¦éœ€è¦æ‰¿è®¤: â€œI have a problem with promises!â€</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise.all is good for executing many promises at once</span></div><div class=\"line\"><span class=\"built_in\">Promise</span>.all([</div><div class=\"line\">  promise1,</div><div class=\"line\">  promise2</div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise.resolve is good for wrapping synchronous code</span></div><div class=\"line\"><span class=\"built_in\">Promise</span>.resolve().then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (somethingIsNotRight()) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">\"I will be rejected asynchronously!\"</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"This string will be resolved asynchronously!\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// execute some promises one after the other.</span></div><div class=\"line\"><span class=\"comment\">// this takes an array of promise factories, i.e.</span></div><div class=\"line\"><span class=\"comment\">// an array of functions that RETURN a promise</span></div><div class=\"line\"><span class=\"comment\">// (not an array of promises themselves; those would execute immediately)</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sequentialize</span>(<span class=\"params\">promiseFactories</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> chain = <span class=\"built_in\">Promise</span>.resolve();</div><div class=\"line\">  promiseFactories.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">promiseFactory</span>) </span>&#123;</div><div class=\"line\">    chain = chain.then(promiseFactory);</div><div class=\"line\">  &#125;);</div><div class=\"line\">  <span class=\"keyword\">return</span> chain;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise.race is good for setting a timeout:</span></div><div class=\"line\"><span class=\"built_in\">Promise</span>.race([</div><div class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">    setTimeout(reject, <span class=\"number\">10000</span>); <span class=\"comment\">// timeout after 10 secs</span></div><div class=\"line\">  &#125;),</div><div class=\"line\">  doSomethingThatMayTakeAwhile()</div><div class=\"line\">]);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Promise finally util similar to Q.finally</span></div><div class=\"line\"><span class=\"comment\">// e.g. promise.then(...).catch().then(...).finally(...)</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">finally</span> (<span class=\"params\">promise, cb</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> promise.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> promise2 = cb();</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> promise2.then === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> promise2.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> res;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> res;</div><div class=\"line\">  &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">reason</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> promise2 = cb();</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> promise2.then === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> promise2.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">throw</span> reason;</div><div class=\"line\">      &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">throw</span> reason;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Frontend Interview Question","subtitle":"Frontend Interview Question","date":"2017-03-21T16:00:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n# Lazy Man\n\n```javascript\n\nfunction _LazyMan(name){\n    this.task = [];\n    var self = this;\n    var fn = (function(n){\n        var name = n;\n        return function(){\n            console.log('Hi This is ' + name + '!');\n            self.next();\n        }\n    })(name)\n\n    this.task.push(fn);\n    setTimeout(function(){\n        self.next();\n    }, 0)\n}\n\n_LazyMan.prototype.next = function(){\n    var fn = this.task.shift();\n    fn && fn();\n}\n\n_LazyMan.prototype.eat = function(name){\n    var self = this;\n    var fn = (function(name){\n        return function(){\n            console.log('Eat ' + name + '~');\n            self.next();\n        }\n    })(name)\n    this.task.push(fn);\n    return this;\n}\n\n_LazyMan.prototype.sleep = function(time){\n    var self = this;\n    var fn = (function(time){\n        return function(){\n            setTimeout(function(){\n                console.log('Wake up after ' + time + 's!');\n                self.next();\n            }, time*1000)\n        }\n    })(time);\n    this.task.push(fn);\n    return this;\n}\n\n\nfunction LazyMan(name){\n    return new _LazyMan(name);\n}\n\nLazyMan('Hank').sleep(1).eat('sss')\n\n```\n\n# Functional add\n\n```javascript\n\nvar puls = (num) => {\n\tvar adder = function() {\n\t\tvar _args = []\n\t\tvar _adder = function _adder() {\n\t\t\t[].push.apply(_args, [].slice.call(arguments))\n\n\t\t\treturn _adder\n\t\t}\n\n\t\t_adder.toString = function() {\n\t\t\treturn _args.reduce(function(a, b) {\n\t\t\t\treturn a + b\n\t\t\t})\n\t\t}\n\n\t\treturn _adder\n\t}\n\n\treturn adder()(num)\n}\n\npuls(1)(2)\n\nvar add = (...outArguments) => {\n\tconsole.log('arguments1 ', outArguments)\n\tlet _args = [].slice.call(outArguments)\n\n\tconst adder = () => {\n\t\tconst _adder = (..._innerArugments) => {\n\t\t\tconsole.log('arguments 3 ', _innerArugments);\n\n\t\t\t[].push.apply(_args, [].slice.call(_innerArugments))\n\t\t\treturn _adder\n\t\t}\n\n\t\t_adder.toString = () => {\n\t\t\tconsole.log('ToString ', _args)\n\t\t\treturn _args.reduce((a, b) => {\n\t\t\t\treturn a + b\n\t\t\t})\n\t\t}\n\n\t\treturn _adder\n\t}\n\n\treturn adder.apply(null, [].slice.call(outArguments))\n}\n\nadd(1)(2)(3)(4)\n\n```\n\n# è¿ç®—ç¬¦ä¼˜å…ˆçº§\n\n[Mozilla](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)\n\n```javascript\n\nfunction Foo() {\n    getName = function () {\n        console.log('1');\n    };\n    return this;\n}\nFoo.getName = function () {\n    console.log('2');\n};\nFoo.prototype.getName = function () {\n    console.log('3');\n};\nvar getName = function () {\n    console.log('4');\n};\nfunction getName() {\n    console.log(5);\n}\n\nFoo.getName() 2\ngetName() 4\nFoo().getName() 1\ngetName()  1\n\nnew Foo.getName() => new (Foo.getName()) => 2\n\nnew Foo().getName() => (new Foo()).getName() => new Foo()\n\nnew new Foo().getName() => new ((new Foo()).getName)()\n\n```\n\n# Thisç»‘å®šç±»å‹\n\n* é»˜è®¤ç»‘å®š: å°±æ˜¯ä»€ä¹ˆéƒ½åŒ¹é…ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œéä¸¥æ ¼æ¨¡å¼thisç»‘å®šåˆ°å…¨å±€å¯¹è±¡windowæˆ–è€…global\n* éšå¼ç»‘å®š: ç»‘å®šåˆ°undefined;éšå¼ç»‘å®šå°±æ˜¯å‡½æ•°ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡å¯¹è±¡å±æ€§çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™thisç»‘å®šåˆ°å¯¹è±¡\n* æ˜¾ç¤ºç»‘å®š: é€šè¿‡applyå’Œcallè°ƒç”¨çš„æ–¹å¼\n* newç»‘å®š:\n","source":"_posts/2017-03-22-frontend-interview-question.markdown","raw":"---\nlayout:     post\ntitle:      \"Frontend Interview Question\"\nsubtitle:   \"Frontend Interview Question\"\ndate:       2017-03-22\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Frontend\n---\n\n# Lazy Man\n\n```javascript\n\nfunction _LazyMan(name){\n    this.task = [];\n    var self = this;\n    var fn = (function(n){\n        var name = n;\n        return function(){\n            console.log('Hi This is ' + name + '!');\n            self.next();\n        }\n    })(name)\n\n    this.task.push(fn);\n    setTimeout(function(){\n        self.next();\n    }, 0)\n}\n\n_LazyMan.prototype.next = function(){\n    var fn = this.task.shift();\n    fn && fn();\n}\n\n_LazyMan.prototype.eat = function(name){\n    var self = this;\n    var fn = (function(name){\n        return function(){\n            console.log('Eat ' + name + '~');\n            self.next();\n        }\n    })(name)\n    this.task.push(fn);\n    return this;\n}\n\n_LazyMan.prototype.sleep = function(time){\n    var self = this;\n    var fn = (function(time){\n        return function(){\n            setTimeout(function(){\n                console.log('Wake up after ' + time + 's!');\n                self.next();\n            }, time*1000)\n        }\n    })(time);\n    this.task.push(fn);\n    return this;\n}\n\n\nfunction LazyMan(name){\n    return new _LazyMan(name);\n}\n\nLazyMan('Hank').sleep(1).eat('sss')\n\n```\n\n# Functional add\n\n```javascript\n\nvar puls = (num) => {\n\tvar adder = function() {\n\t\tvar _args = []\n\t\tvar _adder = function _adder() {\n\t\t\t[].push.apply(_args, [].slice.call(arguments))\n\n\t\t\treturn _adder\n\t\t}\n\n\t\t_adder.toString = function() {\n\t\t\treturn _args.reduce(function(a, b) {\n\t\t\t\treturn a + b\n\t\t\t})\n\t\t}\n\n\t\treturn _adder\n\t}\n\n\treturn adder()(num)\n}\n\npuls(1)(2)\n\nvar add = (...outArguments) => {\n\tconsole.log('arguments1 ', outArguments)\n\tlet _args = [].slice.call(outArguments)\n\n\tconst adder = () => {\n\t\tconst _adder = (..._innerArugments) => {\n\t\t\tconsole.log('arguments 3 ', _innerArugments);\n\n\t\t\t[].push.apply(_args, [].slice.call(_innerArugments))\n\t\t\treturn _adder\n\t\t}\n\n\t\t_adder.toString = () => {\n\t\t\tconsole.log('ToString ', _args)\n\t\t\treturn _args.reduce((a, b) => {\n\t\t\t\treturn a + b\n\t\t\t})\n\t\t}\n\n\t\treturn _adder\n\t}\n\n\treturn adder.apply(null, [].slice.call(outArguments))\n}\n\nadd(1)(2)(3)(4)\n\n```\n\n# è¿ç®—ç¬¦ä¼˜å…ˆçº§\n\n[Mozilla](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)\n\n```javascript\n\nfunction Foo() {\n    getName = function () {\n        console.log('1');\n    };\n    return this;\n}\nFoo.getName = function () {\n    console.log('2');\n};\nFoo.prototype.getName = function () {\n    console.log('3');\n};\nvar getName = function () {\n    console.log('4');\n};\nfunction getName() {\n    console.log(5);\n}\n\nFoo.getName() 2\ngetName() 4\nFoo().getName() 1\ngetName()  1\n\nnew Foo.getName() => new (Foo.getName()) => 2\n\nnew Foo().getName() => (new Foo()).getName() => new Foo()\n\nnew new Foo().getName() => new ((new Foo()).getName)()\n\n```\n\n# Thisç»‘å®šç±»å‹\n\n* é»˜è®¤ç»‘å®š: å°±æ˜¯ä»€ä¹ˆéƒ½åŒ¹é…ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œéä¸¥æ ¼æ¨¡å¼thisç»‘å®šåˆ°å…¨å±€å¯¹è±¡windowæˆ–è€…global\n* éšå¼ç»‘å®š: ç»‘å®šåˆ°undefined;éšå¼ç»‘å®šå°±æ˜¯å‡½æ•°ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡å¯¹è±¡å±æ€§çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™thisç»‘å®šåˆ°å¯¹è±¡\n* æ˜¾ç¤ºç»‘å®š: é€šè¿‡applyå’Œcallè°ƒç”¨çš„æ–¹å¼\n* newç»‘å®š:\n","slug":"2017-03-22-frontend-interview-question","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxs001ammt7mvkoxvcv","content":"<h1 id=\"Lazy-Man\"><a href=\"#Lazy-Man\" class=\"headerlink\" title=\"Lazy Man\"></a>Lazy Man</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.task = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> name = n;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hi This is '</span> + name + <span class=\"string\">'!'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        self.next();</div><div class=\"line\">    &#125;, <span class=\"number\">0</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.next = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = <span class=\"keyword\">this</span>.task.shift();</div><div class=\"line\">    fn &amp;&amp; fn();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Eat '</span> + name + <span class=\"string\">'~'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.sleep = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'Wake up after '</span> + time + <span class=\"string\">'s!'</span>);</div><div class=\"line\">                self.next();</div><div class=\"line\">            &#125;, time*<span class=\"number\">1000</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(time);</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _LazyMan(name);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LazyMan(<span class=\"string\">'Hank'</span>).sleep(<span class=\"number\">1</span>).eat(<span class=\"string\">'sss'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"Functional-add\"><a href=\"#Functional-add\" class=\"headerlink\" title=\"Functional add\"></a>Functional add</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> puls = <span class=\"function\">(<span class=\"params\">num</span>) =&gt;</span> &#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> adder = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> _args = []</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> _adder = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_adder</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t\t[].push.apply(_args, [].slice.call(<span class=\"built_in\">arguments</span>))</div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t_adder.toString = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _args.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> a + b</div><div class=\"line\">\t\t\t&#125;)</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> adder()(num)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">puls(<span class=\"number\">1</span>)(<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> add = <span class=\"function\">(<span class=\"params\">...outArguments</span>) =&gt;</span> &#123;</div><div class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'arguments1 '</span>, outArguments)</div><div class=\"line\">\t<span class=\"keyword\">let</span> _args = [].slice.call(outArguments)</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">const</span> adder = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">\t\t<span class=\"keyword\">const</span> _adder = <span class=\"function\">(<span class=\"params\">..._innerArugments</span>) =&gt;</span> &#123;</div><div class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'arguments 3 '</span>, _innerArugments);</div><div class=\"line\"></div><div class=\"line\">\t\t\t[].push.apply(_args, [].slice.call(_innerArugments))</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t_adder.toString = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'ToString '</span>, _args)</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _args.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> &#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> a + b</div><div class=\"line\">\t\t\t&#125;)</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> adder.apply(<span class=\"literal\">null</span>, [].slice.call(outArguments))</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">add(<span class=\"number\">1</span>)(<span class=\"number\">2</span>)(<span class=\"number\">3</span>)(<span class=\"number\">4</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"><a href=\"#è¿ç®—ç¬¦ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h1><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence\" target=\"_blank\" rel=\"external\">Mozilla</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'2'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'3'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'4'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Foo.getName() <span class=\"number\">2</span></div><div class=\"line\">getName() <span class=\"number\">4</span></div><div class=\"line\">Foo().getName() <span class=\"number\">1</span></div><div class=\"line\">getName()  <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Foo.getName() =&gt; <span class=\"keyword\">new</span> (Foo.getName()) =&gt; <span class=\"number\">2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Foo().getName() =&gt; <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">new</span> Foo(</span>)).<span class=\"params\">getName</span><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">new</span> Foo()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> Foo().getName() =&gt; <span class=\"keyword\">new</span> ((<span class=\"keyword\">new</span> Foo()).getName)()</div></pre></td></tr></table></figure>\n<h1 id=\"Thisç»‘å®šç±»å‹\"><a href=\"#Thisç»‘å®šç±»å‹\" class=\"headerlink\" title=\"Thisç»‘å®šç±»å‹\"></a>Thisç»‘å®šç±»å‹</h1><ul>\n<li>é»˜è®¤ç»‘å®š: å°±æ˜¯ä»€ä¹ˆéƒ½åŒ¹é…ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œéä¸¥æ ¼æ¨¡å¼thisç»‘å®šåˆ°å…¨å±€å¯¹è±¡windowæˆ–è€…global</li>\n<li>éšå¼ç»‘å®š: ç»‘å®šåˆ°undefined;éšå¼ç»‘å®šå°±æ˜¯å‡½æ•°ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡å¯¹è±¡å±æ€§çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™thisç»‘å®šåˆ°å¯¹è±¡</li>\n<li>æ˜¾ç¤ºç»‘å®š: é€šè¿‡applyå’Œcallè°ƒç”¨çš„æ–¹å¼</li>\n<li>newç»‘å®š:</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Lazy-Man\"><a href=\"#Lazy-Man\" class=\"headerlink\" title=\"Lazy Man\"></a>Lazy Man</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.task = [];</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">n</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> name = n;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Hi This is '</span> + name + <span class=\"string\">'!'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        self.next();</div><div class=\"line\">    &#125;, <span class=\"number\">0</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.next = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = <span class=\"keyword\">this</span>.task.shift();</div><div class=\"line\">    fn &amp;&amp; fn();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.eat = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            <span class=\"built_in\">console</span>.log(<span class=\"string\">'Eat '</span> + name + <span class=\"string\">'~'</span>);</div><div class=\"line\">            self.next();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(name)</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_LazyMan.prototype.sleep = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> fn = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time</span>)</span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">            setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">                <span class=\"built_in\">console</span>.log(<span class=\"string\">'Wake up after '</span> + time + <span class=\"string\">'s!'</span>);</div><div class=\"line\">                self.next();</div><div class=\"line\">            &#125;, time*<span class=\"number\">1000</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)(time);</div><div class=\"line\">    <span class=\"keyword\">this</span>.task.push(fn);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LazyMan</span>(<span class=\"params\">name</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> _LazyMan(name);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LazyMan(<span class=\"string\">'Hank'</span>).sleep(<span class=\"number\">1</span>).eat(<span class=\"string\">'sss'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"Functional-add\"><a href=\"#Functional-add\" class=\"headerlink\" title=\"Functional add\"></a>Functional add</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> puls = <span class=\"function\">(<span class=\"params\">num</span>) =&gt;</span> &#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> adder = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> _args = []</div><div class=\"line\">\t\t<span class=\"keyword\">var</span> _adder = <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_adder</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t\t[].push.apply(_args, [].slice.call(<span class=\"built_in\">arguments</span>))</div><div class=\"line\"></div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t_adder.toString = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _args.reduce(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> a + b</div><div class=\"line\">\t\t\t&#125;)</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> adder()(num)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">puls(<span class=\"number\">1</span>)(<span class=\"number\">2</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> add = <span class=\"function\">(<span class=\"params\">...outArguments</span>) =&gt;</span> &#123;</div><div class=\"line\">\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'arguments1 '</span>, outArguments)</div><div class=\"line\">\t<span class=\"keyword\">let</span> _args = [].slice.call(outArguments)</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">const</span> adder = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">\t\t<span class=\"keyword\">const</span> _adder = <span class=\"function\">(<span class=\"params\">..._innerArugments</span>) =&gt;</span> &#123;</div><div class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'arguments 3 '</span>, _innerArugments);</div><div class=\"line\"></div><div class=\"line\">\t\t\t[].push.apply(_args, [].slice.call(_innerArugments))</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t_adder.toString = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">'ToString '</span>, _args)</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> _args.reduce(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> &#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> a + b</div><div class=\"line\">\t\t\t&#125;)</div><div class=\"line\">\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">return</span> _adder</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> adder.apply(<span class=\"literal\">null</span>, [].slice.call(outArguments))</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">add(<span class=\"number\">1</span>)(<span class=\"number\">2</span>)(<span class=\"number\">3</span>)(<span class=\"number\">4</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"><a href=\"#è¿ç®—ç¬¦ä¼˜å…ˆçº§\" class=\"headerlink\" title=\"è¿ç®—ç¬¦ä¼˜å…ˆçº§\"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h1><p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence\" target=\"_blank\" rel=\"external\">Mozilla</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'1'</span>);</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">Foo.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'2'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\">Foo.prototype.getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'3'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"keyword\">var</span> getName = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'4'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">5</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Foo.getName() <span class=\"number\">2</span></div><div class=\"line\">getName() <span class=\"number\">4</span></div><div class=\"line\">Foo().getName() <span class=\"number\">1</span></div><div class=\"line\">getName()  <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Foo.getName() =&gt; <span class=\"keyword\">new</span> (Foo.getName()) =&gt; <span class=\"number\">2</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> Foo().getName() =&gt; <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">new</span> Foo(</span>)).<span class=\"params\">getName</span><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">new</span> Foo()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"keyword\">new</span> Foo().getName() =&gt; <span class=\"keyword\">new</span> ((<span class=\"keyword\">new</span> Foo()).getName)()</div></pre></td></tr></table></figure>\n<h1 id=\"Thisç»‘å®šç±»å‹\"><a href=\"#Thisç»‘å®šç±»å‹\" class=\"headerlink\" title=\"Thisç»‘å®šç±»å‹\"></a>Thisç»‘å®šç±»å‹</h1><ul>\n<li>é»˜è®¤ç»‘å®š: å°±æ˜¯ä»€ä¹ˆéƒ½åŒ¹é…ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œéä¸¥æ ¼æ¨¡å¼thisç»‘å®šåˆ°å…¨å±€å¯¹è±¡windowæˆ–è€…global</li>\n<li>éšå¼ç»‘å®š: ç»‘å®šåˆ°undefined;éšå¼ç»‘å®šå°±æ˜¯å‡½æ•°ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡å¯¹è±¡å±æ€§çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™thisç»‘å®šåˆ°å¯¹è±¡</li>\n<li>æ˜¾ç¤ºç»‘å®š: é€šè¿‡applyå’Œcallè°ƒç”¨çš„æ–¹å¼</li>\n<li>newç»‘å®š:</li>\n</ul>\n"},{"layout":"post","title":"Functional Program","subtitle":"Functional","date":"2017-03-09T07:03:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"// https://github.com/shfshanyue/fp-jargon-zh#arity\n\n# Arity\n\nå‡½æ•°å‚æ•°çš„ä¸ªæ•°ã€‚æ¥è‡ªäºå•è¯ unary, binary, ternary ç­‰ç­‰ã€‚è¿™ä¸ªå•è¯æ˜¯ç”± -ary ä¸ -ity ä¸¤ä¸ªåç¼€æ‹¼æ¥è€Œæˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°è¢«ç§°ä¸ºäºŒå…ƒå‡½æ•°æˆ–è€…å®ƒçš„ arity æ˜¯2ã€‚å®ƒä¹Ÿè¢«é‚£äº›æ›´å–œæ¬¢å¸Œè…Šè¯æ ¹è€Œéæ‹‰ä¸è¯æ ¹çš„äººç§°ä¸º dyadicã€‚åŒæ ·åœ°ï¼Œå¸¦æœ‰å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°è¢«ç§°ä¸º variadicï¼Œè€ŒäºŒå…ƒå‡½æ•°åªèƒ½å¸¦ä¸¤ä¸ªå‚æ•°ã€‚\n\n```javascript\n    const sum = (a, b) => a + b\n    const arity = sum.length\n\n    console.log('arity: ', arity)\n```\n\n# é«˜é˜¶å‡½æ•° (Higher-Order Function/HOF)\n\nä»¥å‡½æ•°ä¸ºå‚æ•°æˆ–/å’Œè¿”å›å€¼\n\n```javascript\n\n    const filter = (predicate, xs) => xs.filter(predicte)\n    const is = (type) => (x) => Object(x) instanceof type\n    filter(is(Number), [0, '1', 2, null])\n\n```\n\n# åå‡½æ•° (Partial Function)\n\nå¯¹åŸå§‹å‡½æ•°é¢„è®¾å‚æ•°ä½œä¸ºä¸€ä¸ªæ–°çš„å‡½æ•°\n\n```javascript\n\n    const partical = (f, ...args) => (...moreArgs) => f(...args, ...moreArgs)\n\n    const add3 = (a, b, c) => a + b + c\n\n    const fivePlus = partical(add3, 2, 3)\n\n    fivePlus(4)\n\n    // ä¹Ÿå¯ä»¥ä½¿ç”¨Function.prototype.bindå®ç°åå‡½æ•°\n    const add1More = add3.bind(null, 2, 3)\n\n```\n\n# æŸ¯é‡ŒåŒ– (Currying)\n\nè®²ä¸€ä¸ªå¤šå…ƒå‡½æ•°è½¬å˜ä¸ºä¸€å…ƒå‡½æ•°çš„è¿‡ç¨‹ã€‚æ¯å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä»…ä»…æ¥æ”¶ä¸€ä¸ª å‚æ•°å¹¶ä¸”è¿”å›å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç›´æ¥ä¼ é€’å®Œæ‰€æœ‰çš„å‚æ•°ã€‚\n\n```javascript\n\n    const sum = (a, b) => a + b\n    const curriedSum = (a) => (b) => a + b\n\n    curriedSum(3)(4)\n\n    const add2 = curriedSum(2)\n    add2(10)\n\n```\n\n# è‡ªåŠ¨æŸ¯é‡ŒåŒ– (Auto Currying)\n\n`lodash`, `understore`å’Œ`ramda`æœ‰`curry`å‡½æ•°å¯ä»¥è‡ªåŠ¨å®ŒæˆæŸ¯é‡ŒåŒ–\n\n```javascript\n\n    const add = (x, y) => x + y\n    const curriedAdd = _.curry(add)\n\n    curriedAdd(1, 2)\n    curriedAdd(1)(2)\n    curriedAdd(1)\n\n```\n\n### è¿›ä¸€æ­¥é˜…è¯»\n\n- [Favoring Curry](http://fr.umio.us/favoring-curry/)\n- [Hey Underscore, You're Doing It Wrong!](https://www.youtube.com/watch?v=m3svKOdZijA)\n\n# å‡½æ•°ç»„åˆ (Function Composing)\n\næ¥æ”¶å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»å³åˆ°å·¦ï¼Œä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å‡º\n\n```javascript\n\n    const compose = (f, g) => (a) => f(g(a))\n    const floorAndToString = compose((val) => val.toString(), Math.floor)\n    floorAndToString(12.12)\n\n```\n\nContinuation\n\nåœ¨ä¸€ä¸ªç¨‹åºæ‰§è¡Œçš„ä»»æ„æ—¶åˆ», å°šæœªæ‰§è¡Œçš„ä»£ç æˆä¸ºContinuation.\n\n```javascript\n\n    const printAsString = (num) => console.log(`Given ${num}`)\n\n    const addOneAndContinue = (num, cc) => {\n        const result = num + 1\n        cc(result)\n    }\n\n    andOneAndContinue(2, printAsString)\n\n```\n\nContinuation åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­å¾ˆå¸¸è§, æ¯”å¦‚å½“ç¨‹åºéœ€è¦æ¥æ”¶åˆ°æ•°æ®æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚è¯·æ±‚çš„ç›¸åº”åŒåŸä½œä¸ºä»£ç çš„å‰©ä½™æ‰§è¡Œéƒ¨åˆ†ï¼Œä¸€æ—¦æ¥æ”¶åˆ°æ•°æ®ï¼Œå¯¹æ•°æ®çš„å¤„ç†è¢«ä½œä¸ºContinuation.\n\n```javascript\n\n    const continueProgramWith = (data) => {}\n    readFileAsync('path/to/file', (response, error) => {\n        if (error) {\n            return\n        }\n\n        continueProgramWith(response)\n    })\n\n```\n\n# çº¯å‡½æ•° (Purity)\nè¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸”ä¸äº§ç”Ÿå‰¯ä½œç”¨ã€‚\n\n```javascript\n\n    const greet = (name) => `hello, ${name}`\n    greet('world')\n\n```\n\nä»¥ä¸€ä¸‹ä»£ç ä¸æ˜¯çº¯å‡½æ•°ï¼š\n\n```javascript\n\n    window.name = 'Brianne'\n    const greet = () => `Hi, ${window.name}` //å‡½æ•°ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€‚\n\n```\n\n```javascript\n\n    let greeting\n\n    const greet = (name) => {\n        greeting = `Hi, ${name}`\n    }\n\n    greet('Brianne')\n    greeting\n\n```\n\n# å‰¯ä½œç”¨(Side effects)\nå¦‚æœå‡½æ•°ä¸å¤–éƒ¨å¯å˜çŠ¶æ€è¿›è¡Œäº¤äº’ï¼Œåˆ™å®ƒæ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚\n\n```javascript\n\n    const differentEveryTime = new Date()\n    console.log('IO is a side effect!')\n\n```\n\n# å¹‚ç­‰è¡Œ(Idempotent)\nå¦‚æœä¸€ä¸ªå‡½æ•°æ‰§è¡Œå¤šæ¬¡çš†è¿”å›ç›¸åŒçš„ç»“æœï¼Œåˆ™å®ƒæ˜¯å¹‚ç­‰æ€§çš„ã€‚\n\n```javascript\n\n    f(f(x)) = f(x)\n    Math.abs(Math.abs(10))\n    sort(sort(sort([2, 1])))\n\n```\n\n# Point-Free é£æ ¼(Point-Free Style)\nå®šä¹‰å‡½æ•°æ—¶ï¼Œä¸æ˜¾å¼çš„æ”¯å‡ºå‡½æ•°æ‰€å¸¦å‚æ•°ã€‚è¿™ç§é£æ ¼é€šå¸¸éœ€è¦æŸ¯é‡ŒåŒ–æˆ–è€…é«˜é˜¶å‡½æ•°ã€‚ä¹Ÿå«Tacit programmingã€‚\n\n```javascript\n\n    const map = (fn) => (list) => list.map(fn)\n    const add = (a) => (b) => a + b\n\n    const incrementAll = (numbers) => map(add(1))(numbers)\n    const incrementAll2 = map(add(1))\n\n```\n\n# è°“è¯ (Predicate)\n\næ ¹æ®è¾“å…¥è¿”å›trueæˆ–false. é€šå¸¸ç”¨åœ¨Array.prototype.filterçš„å›è°ƒå‡½æ•°ä¸­ã€‚\n\n```javascript\n\n    const predicate = (a) => a > 2\n    [1, 2, 3, 4].filter(predicate)\n\n```\n\n# å¥‘çº¦ (Contracts)\n\nå¥‘çº¦ä¿è¯äº†å‡½æ•°æˆ–è€…è¡¨è¾¾å¼åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚å½“è¿åäº†å¥‘çº¦æ—¶ï¼Œå°†è·‘å‡ºä¸€ä¸ªé”™è¯¯ã€‚\n\n```javascript\n\n    const contract  = (input) => {\n        if (typeof input === 'number') return true\n\n        throw new Error('Contract Violated: expected int -> int')\n    }\n\n    const addOne = (num) => contract(num) && num + 1\n\n    addOne(2)\n    addOne('hello')\n\n```\n\n# èŒƒç•´ (Category)\n\nåœ¨èŒƒç•´è®ºä¸­ï¼ŒèŒƒç•´æ˜¯æŒ‡å¯¹è±¡é›†åˆåŠå®ƒä»¬ä¹‹é—´çš„æ€å°„ (morphism)ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ•°æ®ç±»å‹ä½œä¸ºå¯¹è±¡ï¼Œå‡½æ•°ä½œä¸ºæ€å°„ã€‚\n\nä¸€ä¸ªæœ‰æ•ˆçš„èŒƒç•´éµä»ä»¥ä¸‹ä¸‰ä¸ªåŸåˆ™ï¼š\n\n- å¿…æœ‰ä¸€ä¸ª identity æ€å°„ï¼Œä½¿å¾— map ä¸€ä¸ªå¯¹è±¡æ˜¯å®ƒè‡ªèº«ã€‚a æ˜¯èŒƒç•´é‡Œçš„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¿…æœ‰ä¸€ä¸ªå‡½æ•°ä½¿ a -> aã€‚\n- æ€å°„å¿…æ˜¯å¯ç»„åˆçš„ã€‚aï¼Œbï¼Œc æ˜¯èŒƒç•´é‡Œçš„å¯¹è±¡ï¼Œf æ˜¯æ€å°„ a -> bï¼Œg æ˜¯ b -> c æ€å°„ã€‚g(f(x)) ä¸€å®šä¸ (g â— f)(x)\n- ç»„åˆæ»¡è¶³ç»“åˆå¾‹ã€‚f â— (g â— h) ä¸ (f â— g) â— h æ˜¯ç­‰ä»·çš„ã€‚\n\nè¿™äº›å‡†åˆ™æ˜¯éå¸¸æŠ½è±¡çš„ï¼ŒèŒƒç•´è®ºå¯¹ä¸å‘ç°ç»„åˆçš„æ–°æ–¹æ³•æ˜¯ä¼Ÿå¤§çš„ã€‚\n\nè¿›ä¸€æ­¥é˜…è¯»\n\n[Category Theory for Programmers](https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/)\n\n# å€¼ (Value)\n\nèµ‹å€¼ç»™å˜é‡çš„å€¼ç§°ä½œValue\n\n```javascript\n\n    5\n    Object.freeze({name: 'John', age: 30})\n    ;(a) => a\n    ;[1]\n    undefined\n\n```\n\n# å¸¸é‡ (Constant)\n\nä¸€æ—¦å®šä¹‰ä¸å¯é‡æ–°èµ‹å€¼ã€‚\n\n```javascript\n\n    const five = 5\n    const john = Object.freeze({name: 'John', age: 30})\n\n```\n\nå¸¸é‡æ˜¯[å¼•ç”¨é€æ˜](https://github.com/shfshanyue/fp-jargon-zh#referential-transparency)çš„ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«å®ƒä»¬æ‰€ä»£è¡¨çš„å€¼æ›¿ä»£è€Œä¸å½±å“ç»“æœã€‚\n\nå¯¹äºä»¥ä¸Šä¸¤ä¸ªå¸¸é‡ï¼Œä»¥ä¸‹è¯­å¥æ€»ä¼šè¿”å› trueã€‚\n\n```javascript\n\n    john.age + five === ({name: 'John', age: 30}).age + (5)\n\n```\n\n# å‡½å­ (Functor)\n\nä¸€ä¸ªå®ç°äº†map å‡½æ•°çš„å¯¹è±¡ï¼Œmap ä¼šéå†å¯¹è±¡ä¸­çš„æ¯ä¸ªå€¼å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚éµå®ˆä¸¤ä¸ªå‡†åˆ™\n\n### ä¸€è‡´æ€§ (Preserves identity)\n\nobject.map(x => x) â‰ object\n### ç»„åˆæ€§ (Composable)\n\nobject.map(compose(f, g)) â‰ object.map(g).map(f)  // f, g ä¸ºä»»æ„å‡½æ•°\nåœ¨ javascript ä¸­ä¸€ä¸ªå¸¸è§çš„å‡½å­æ˜¯ Array, å› ä¸ºå®ƒéµå®ˆå› å­çš„ä¸¤ä¸ªå‡†åˆ™ã€‚\n\n```javascript\n\n    const f = x => x + 1\n    const g = x => x * 2\n\n    ;[1, 2, 3].map(x => f(g(x)))\n    ;[1, 2, 3].map(g).map(f)\n\n```\n\n# Pointed Functor\n\nä¸€ä¸ªå®ç°äº† of å‡½æ•°çš„å¯¹è±¡ã€‚\n\nES2015 æ·»åŠ äº† Array.ofï¼Œä½¿ Array æˆä¸ºäº† Pointed Functorã€‚\n\n```javascript\n\n    Array.of(1)\n\n```\n\n# Lift\n\n\n# å¼•ç”¨é€æ˜æ€§ (Referential Transparency)\n\nä¸€ä¸ªè¡¨è¾¾å¼èƒ½å¤Ÿè¢«å®ƒçš„å€¼æ›¿ä»£è€Œä¸æ”¹å˜ç¨‹åºçš„è¡Œä¸ºæˆä¸ºå¼•ç”¨é€æ˜ã€‚\n\n```javascript\n\n    const greet = () => 'hello, world.'\n\n```\n\n# åŒ¿åå‡½æ•° (Lambda)\n\nåŒ¿åå‡½æ•°è¢«è§†ä½œä¸€ä¸ªå€¼\n\n```javascript\n\n    ;(function (a) {\n        return a + 1\n    })\n\n    ;(a) => a + 1\n\n```\n\nåŒ¿åå‡½æ•°é€šå¸¸ä½œä¸ºé«˜é˜¶å‡½æ•°çš„å‚æ•°\n\n```javascript\n\n    [1, 2].map((a) => a + 1)\n\n```\n\nå¯ä»¥æŠŠ Lambda èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡\n\n```javascript\n\n    const add1 = (a) => a + 1\n\n```\n\n# Lambda Caculus\n\næ•°å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä½¿ç”¨å‡½æ•°åˆ›é€  [é€šè¿‡è®¡ç®—æ¨¡å‹](https://en.wikipedia.org/wiki/Lambda_calculus)\n\n\n# æƒ°æ€§æ±‚å€¼ (Lazy evaluation)\n\næŒ‰éœ€æ±‚å€¼æœºåˆ¶ï¼Œåªæœ‰å½“éœ€è¦è®¡ç®—æ‰€å¾—å€¼æ—¶æ‰ä¼šè®¡ç®—\n\n```javascript\n    const rand = function* () {\n        while (true) {\n            yield Math.random()\n        }\n    }\n\n    const randIter = rand()\n    randIter.next()\n```\n\n# Monoid\n\nä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªå‡½æ•°ç”¨æ¥è¿æ¥ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚\n\næ•°å€¼åŠ æ³•æ˜¯ä¸€ä¸ªç®€å•çš„ Monoid\n```javascript\n1 + 1   // 2\n```\nä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæ•°å€¼æ˜¯å¯¹è±¡è€Œ + æ˜¯å‡½æ•°ã€‚\n\nä¸å¦ä¸€ä¸ªå€¼ç»“åˆè€Œä¸ä¼šæ”¹å˜å®ƒçš„å€¼å¿…é¡»å­˜åœ¨ï¼Œç§°ä¸º identityã€‚\n\nåŠ æ³•çš„ identity å€¼ä¸º 0:\n```javascript\n1 + 0   // 1\n```\néœ€è¦æ»¡è¶³ç»“åˆå¾‹\n```javascript\n1 + (2 + 3) === (1 + 2) + 3 // true\n```\næ•°ç»„çš„ç»“åˆä¹Ÿæ˜¯ Monoid\n```javascript\n;[1, 2].concat([3, 4])\n```\nidentity å€¼ä¸ºç©ºæ•°ç»„\n\n;[1, 2].concat([])\nidentity ä¸ compose å‡½æ•°èƒ½å¤Ÿç»„æˆ monoid\n```javascript\nconst identity = (a) => a\nconst compose = (f, g) => (x) => f(g(x))\n```\n\nfoo æ˜¯åªå¸¦ä¸€ä¸ªå‚æ•°çš„ä»»æ„å‡½æ•°\n```javascript\ncompose(foo, identity) â‰ compose(identity, foo) â‰ foo\n```\n\n# Monad\n\næ‹¥æœ‰ of å’Œ chain å‡½æ•°çš„å¯¹è±¡ã€‚chain å¾ˆåƒ mapï¼Œ é™¤äº†ç”¨æ¥é“ºå¹³åµŒå¥—æ•°æ®ã€‚\n\n```javascript\n\n    Array.prototype.chain = function (f) {\n        return this.reduce((acc, it) => acc.concat(f(it)), [])\n    }\n\n    // ['cat', 'dog', 'fish', 'bird']\n    ;Array.of('cat,dog', 'fish,bird').chain(s => s.split(','))\n\n    // [['cat', 'dog'], ['fish', 'bird']]\n    ;Array.of('cat,dog', 'fish,bird').map(s => s.split(','))\n\n```\n\nåœ¨æœ‰äº›è¯­è¨€ä¸­ï¼Œof ä¹Ÿç§°ä¸º returnï¼Œchain ä¹Ÿç§°ä¸º flatmap ä¸ bindã€‚\n\n# Comonad\n\næ‹¥æœ‰ extract ä¸ extend å‡½æ•°çš„å¯¹è±¡ã€‚\n\n```javascript\n\n    const CoIdentity = (v) => ({\n        val: v,\n        extract () {\n            return this.val\n        },\n        extend (f) {\n            return CoIdentity(f(this))\n        }\n    })\n\n    CoIdentity(1).extract()\n    CoIdentity(1).extend(x => x.extract() + 1)   # CoIdentity(2)\n\n```\n\n# Applicative Functor\n\nä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚\n\n```javascript\n\n    // å®ç°\n    Array.prototype.ap = function (xs) {\n        return this.reduce((acc, f) => acc.concat(xs.map(f)), [])\n    }\n\n    // ç¤ºä¾‹\n    ;[(a) => a + 1].ap([1]) // [2]\n\n```\n\nå¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°\n\n```javascript\n\n    // Arrays that you want to combine\n    const arg1 = [1, 3]\n    const arg2 = [4, 5]\n\n    // combining function - must be curried for this to work\n    const add = (x) => (y) => x + y\n\n    const partiallyAppliedAdds = [add].ap(arg1) // [(y) => 1 + y, (y) => 3 + y]\n\n```\n\nç”±æ­¤å¾—åˆ°äº†ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œå¹¶ä¸”å¯ä»¥è°ƒç”¨ ap å‡½æ•°å¾—åˆ°ç»“æœ\n\n```javascript\n\n    partiallyAppliedAdds.ap(arg2) // [5, 6, 7, 8]\n\n```\n\n# Applicative Functor\n\nä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚\n\n```javascript\n\n    // å®ç°\n    Array.prototype.ap = function (xs) {\n        return this.reduce((acc, f) => acc.concat(xs.map(f)), [])\n    }\n\n    // ç¤ºä¾‹\n    ;[(a) => a + 1].ap([1]) // [2]\n\n```\n\nå¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°\n\n```javascript\n\n    // Arrays that you want to combine\n    const arg1 = [1, 3]\n    const arg2 = [4, 5]\n\n    // combining function - must be curried for this to work\n    const add = (x) => (y) => x + y\n\n    const partiallyAppliedAdds = [add].ap(arg1) // [(y) => 1 + y, (y) => 3 + y]\n\n```\n\n# æ€å°„ (Morphism)\n\nä¸€ä¸ªå˜å½¢çš„å‡½æ•°ã€‚\n\n# è‡ªåŒæ€ (Endomorphism)\n\nè¾“å…¥è¾“å‡ºæ˜¯ç›¸åŒç±»å‹çš„å‡½æ•°ã€‚\n\n```javascript\n\n    // uppercase :: String -> String\n    const uppercase = (str) => str.toUpperCase()\n\n    // decrement :: Number -> Number\n    const decrement = (x) => x - 1\n\n```\n\n# åŒæ„ (Isomorphism)\n\nä¸ç”¨ç±»å‹å¯¹è±¡çš„å˜å½¢ï¼Œä¿æŒç»“æ„å¹¶ä¸”ä¸ä¸¢å¤±æ•°æ®ã€‚\n\nä¾‹å¦‚ï¼Œä¸€ä¸ªäºŒç»´åæ ‡æ—¢å¯ä»¥è¡¨ç¤ºä¸ºæ•°ç»„ [2, 3]ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºå¯¹è±¡ {x: 2, y: 3}ã€‚\n\n```javascript\n    // æä¾›å‡½æ•°åœ¨ä¸¤ç§ç±»å‹é—´äº’ç›¸è½¬æ¢\n    const pairToCoords = (pair) => ({x: pair[0], y: pair[1]})\n\n    const coordsToPair = (coords) => [coords.x, coords.y]\n\n    coordsToPair(pairToCoords([1, 2])) // [1, 2]\n\n    pairToCoords(coordsToPair({x: 1, y: 2})) // {x: 1, y: 2}\n```\n\n# Setoid\n\næ‹¥æœ‰ equals å‡½æ•°çš„å¯¹è±¡ã€‚equals å¯ä»¥ç”¨æ¥å’Œå…¶å®ƒå¯¹è±¡æ¯”è¾ƒã€‚\n\n```javascript\n\n    Array.prototype.equals = function (arr) {\n    const len = this.length\n    if (len !== arr.length) {\n    return false\n    }\n    for (let i = 0; i < len; i++) {\n    if (this[i] !== arr[i]) {\n      return false\n    }\n    }\n    return true\n    }\n\n    ;[1, 2].equals([1, 2])   // true\n    ;[1, 2].equals([3, 4])   // false\n\n```\n\n# åŠç¾¤ (Semigroup)\n\nAn object that has a concat function that combines it with another object of the same type.\n\n```javascript\n\n    ;[1].concat([2]) // [1, 2]\n\n```\n\n# Foldable\n\nAn object that has a reduce function that can transform that object into some other type.\n\n```javascript\n\n    const sum = list => list.reduce((account, value) => account + value, 0)\n    sum([1, 2, 3])\n\n```\n\n# Traversbale\nTODO\n\n# Type Signatures\n\nOften functions in JavaScript will include comments that indicate the types of their arguments and return values.\n\nThere's quite a bit of variance across the community but they often follow the following patterns:\n\n```javascript\n\n    // functionName :: firstArgType -> secondArgType -> returnType\n\n    // add :: Number -> Number -> Number\n    const add = (x) => (y) => x + y\n\n    // increment :: Number -> Number\n    const increment = (x) => x + 1\n\n```\n\nIf a function accepts another function as an argument it is wrapped in parentheses.\n\n```javascript\n\n    // call :: (a -> b) -> a -> b\n    const call = (f) => (x) => f(x)\n\n```\n\nThe letters a, b, c, d are used to signify that the argument can be of any type. The following version of map takes a function that transforms a value of some type a into another type b, an array of values of type a, and returns an array of values of type b.\n\n```javascript\n\n    // map :: (a -> b) -> [a] -> [b]\n    const map = (f) => (list) => list.map(f)\n\n```\n\nFurther reading\n\n- [Ramda's type signatures](https://github.com/ramda/ramda/wiki/Type-Signatures)\n- [Mostly Adequate Guide](https://drboolean.gitbooks.io/mostly-adequate-guide/content/ch7.html#whats-your-type)\n- [What is Hindley-Milner?](http://stackoverflow.com/questions/399312/what-is-hindley-milner/399392#399392) on Stack Overflow\n\n# Union type\n\nA union type is the combination of two types together into another one.\n\nJS doesn't have static types but let's say we invent a type NumOrString which is a sum of String and Number.\n\nThe + operator in JS works on strings and numbers so we can use this new type to describe its inputs and outputs:\n\n```javascript\n\n    // add :: (NumOrString, NumOrString) -> NumOrString\n    const add = (a, b) => a + b\n\n    add(1, 2) // Returns number 3\n    add('Foo', 2) // Returns string \"Foo2\"\n    add('Foo', 'Bar') // Returns string \"FooBar\"\n\n```\n\nUnion types are also known as algebraic types, tagged unions, or sum types.\n\nThere's a couple libraries in JS which help with defining and using union types.\n- [union-type](https://github.com/paldepind/union-type)\n- [daggy](https://github.com/fantasyland/daggy)\n\n# Product type\n\nA product type combines types together in a way you're probably more familiar with:\n\n```javascript\n\n    // point :: (Number, Number) -> {x: Number, y: Number}\n    const point = (x, y) => ({x: x, y: y})\n\n```\n\nIt's called a product because the total possible values of the data structure is the product of the different values.\n\nSee also [Set theory](https://en.wikipedia.org/wiki/Set_theory).\n\n# Option\n\nOption is a union type with two cases often called Some and None.\n\nOption is useful for composing functions that might not return a value.\n\n```javascript\n\n// Naive definition\n\n    const Some = (v) => ({\n        val: v,\n        map (f) {\n            return Some(f(this.val))\n        },\n        chain (f) {\n            return f(this.val)\n        }\n    })\n\n    const None = () => ({\n        map (f) {\n            return this\n        },\n        chain (f) {\n            return this\n        }\n    })\n\n    // maybeProp :: (String, {a}) -> Option a\n    const maybeProp = (key, obj) => typeof obj[key] === 'undefined' ? None() : Some(obj[key])\n\n```\n\nUse `chain` to sequence functions that return `Options`\n\n```javascript\n\n    // getItem :: Cart -> Option CartItem\n    const getItem = (cart) => maybeProp('item', cart)\n\n    // getPrice :: Item -> Option Number\n    const getPrice = (item) => maybeProp('price', item)\n\n    // getNestedPrice :: cart -> Option a\n    const getNestedPrice = (cart) => getItem(obj).chain(getPrice)\n\n    getNestedPrice({}) // None()\n    getNestedPrice({item: {foo: 1}}) // None()\n    getNestedPrice({item: {price: 9.99}}) // Some(9.99)\n\n```\n\n`Option` is also known as `Maybe`. `Some` is sometimes called `Just`. `None` is sometimes called `Nothing`.\n\n# Functional Programming Libraries in JavaScript\n\n- [mori](https://github.com/swannodette/mori)\n- [Immutable](https://github.com/facebook/immutable-js/)\n- [Ramda](https://github.com/ramda/ramda)\n- [Folktale](http://folktalejs.org/)\n- [monet.js](https://cwmyers.github.io/monet.js/)\n- [lodash](https://github.com/lodash/lodash)\n- [Underscore.js](https://github.com/jashkenas/underscore)\n- [Lazy.js](https://github.com/dtao/lazy.js)\n- [maryamyriameliamurphies.js](https://github.com/sjsyrek/maryamyriameliamurphies.js)\n- [Haskell in ES6](https://github.com/casualjavascript/haskell-in-es6)\n","source":"_posts/2017-03-09-functional-program.markdown","raw":"---\nlayout:     post\ntitle:      \"Functional Program\"\nsubtitle:   \"Functional\"\ndate:       2017-03-09 15:03\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Functional\n---\n// https://github.com/shfshanyue/fp-jargon-zh#arity\n\n# Arity\n\nå‡½æ•°å‚æ•°çš„ä¸ªæ•°ã€‚æ¥è‡ªäºå•è¯ unary, binary, ternary ç­‰ç­‰ã€‚è¿™ä¸ªå•è¯æ˜¯ç”± -ary ä¸ -ity ä¸¤ä¸ªåç¼€æ‹¼æ¥è€Œæˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°è¢«ç§°ä¸ºäºŒå…ƒå‡½æ•°æˆ–è€…å®ƒçš„ arity æ˜¯2ã€‚å®ƒä¹Ÿè¢«é‚£äº›æ›´å–œæ¬¢å¸Œè…Šè¯æ ¹è€Œéæ‹‰ä¸è¯æ ¹çš„äººç§°ä¸º dyadicã€‚åŒæ ·åœ°ï¼Œå¸¦æœ‰å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°è¢«ç§°ä¸º variadicï¼Œè€ŒäºŒå…ƒå‡½æ•°åªèƒ½å¸¦ä¸¤ä¸ªå‚æ•°ã€‚\n\n```javascript\n    const sum = (a, b) => a + b\n    const arity = sum.length\n\n    console.log('arity: ', arity)\n```\n\n# é«˜é˜¶å‡½æ•° (Higher-Order Function/HOF)\n\nä»¥å‡½æ•°ä¸ºå‚æ•°æˆ–/å’Œè¿”å›å€¼\n\n```javascript\n\n    const filter = (predicate, xs) => xs.filter(predicte)\n    const is = (type) => (x) => Object(x) instanceof type\n    filter(is(Number), [0, '1', 2, null])\n\n```\n\n# åå‡½æ•° (Partial Function)\n\nå¯¹åŸå§‹å‡½æ•°é¢„è®¾å‚æ•°ä½œä¸ºä¸€ä¸ªæ–°çš„å‡½æ•°\n\n```javascript\n\n    const partical = (f, ...args) => (...moreArgs) => f(...args, ...moreArgs)\n\n    const add3 = (a, b, c) => a + b + c\n\n    const fivePlus = partical(add3, 2, 3)\n\n    fivePlus(4)\n\n    // ä¹Ÿå¯ä»¥ä½¿ç”¨Function.prototype.bindå®ç°åå‡½æ•°\n    const add1More = add3.bind(null, 2, 3)\n\n```\n\n# æŸ¯é‡ŒåŒ– (Currying)\n\nè®²ä¸€ä¸ªå¤šå…ƒå‡½æ•°è½¬å˜ä¸ºä¸€å…ƒå‡½æ•°çš„è¿‡ç¨‹ã€‚æ¯å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä»…ä»…æ¥æ”¶ä¸€ä¸ª å‚æ•°å¹¶ä¸”è¿”å›å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç›´æ¥ä¼ é€’å®Œæ‰€æœ‰çš„å‚æ•°ã€‚\n\n```javascript\n\n    const sum = (a, b) => a + b\n    const curriedSum = (a) => (b) => a + b\n\n    curriedSum(3)(4)\n\n    const add2 = curriedSum(2)\n    add2(10)\n\n```\n\n# è‡ªåŠ¨æŸ¯é‡ŒåŒ– (Auto Currying)\n\n`lodash`, `understore`å’Œ`ramda`æœ‰`curry`å‡½æ•°å¯ä»¥è‡ªåŠ¨å®ŒæˆæŸ¯é‡ŒåŒ–\n\n```javascript\n\n    const add = (x, y) => x + y\n    const curriedAdd = _.curry(add)\n\n    curriedAdd(1, 2)\n    curriedAdd(1)(2)\n    curriedAdd(1)\n\n```\n\n### è¿›ä¸€æ­¥é˜…è¯»\n\n- [Favoring Curry](http://fr.umio.us/favoring-curry/)\n- [Hey Underscore, You're Doing It Wrong!](https://www.youtube.com/watch?v=m3svKOdZijA)\n\n# å‡½æ•°ç»„åˆ (Function Composing)\n\næ¥æ”¶å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»å³åˆ°å·¦ï¼Œä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å‡º\n\n```javascript\n\n    const compose = (f, g) => (a) => f(g(a))\n    const floorAndToString = compose((val) => val.toString(), Math.floor)\n    floorAndToString(12.12)\n\n```\n\nContinuation\n\nåœ¨ä¸€ä¸ªç¨‹åºæ‰§è¡Œçš„ä»»æ„æ—¶åˆ», å°šæœªæ‰§è¡Œçš„ä»£ç æˆä¸ºContinuation.\n\n```javascript\n\n    const printAsString = (num) => console.log(`Given ${num}`)\n\n    const addOneAndContinue = (num, cc) => {\n        const result = num + 1\n        cc(result)\n    }\n\n    andOneAndContinue(2, printAsString)\n\n```\n\nContinuation åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­å¾ˆå¸¸è§, æ¯”å¦‚å½“ç¨‹åºéœ€è¦æ¥æ”¶åˆ°æ•°æ®æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚è¯·æ±‚çš„ç›¸åº”åŒåŸä½œä¸ºä»£ç çš„å‰©ä½™æ‰§è¡Œéƒ¨åˆ†ï¼Œä¸€æ—¦æ¥æ”¶åˆ°æ•°æ®ï¼Œå¯¹æ•°æ®çš„å¤„ç†è¢«ä½œä¸ºContinuation.\n\n```javascript\n\n    const continueProgramWith = (data) => {}\n    readFileAsync('path/to/file', (response, error) => {\n        if (error) {\n            return\n        }\n\n        continueProgramWith(response)\n    })\n\n```\n\n# çº¯å‡½æ•° (Purity)\nè¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸”ä¸äº§ç”Ÿå‰¯ä½œç”¨ã€‚\n\n```javascript\n\n    const greet = (name) => `hello, ${name}`\n    greet('world')\n\n```\n\nä»¥ä¸€ä¸‹ä»£ç ä¸æ˜¯çº¯å‡½æ•°ï¼š\n\n```javascript\n\n    window.name = 'Brianne'\n    const greet = () => `Hi, ${window.name}` //å‡½æ•°ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€‚\n\n```\n\n```javascript\n\n    let greeting\n\n    const greet = (name) => {\n        greeting = `Hi, ${name}`\n    }\n\n    greet('Brianne')\n    greeting\n\n```\n\n# å‰¯ä½œç”¨(Side effects)\nå¦‚æœå‡½æ•°ä¸å¤–éƒ¨å¯å˜çŠ¶æ€è¿›è¡Œäº¤äº’ï¼Œåˆ™å®ƒæ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚\n\n```javascript\n\n    const differentEveryTime = new Date()\n    console.log('IO is a side effect!')\n\n```\n\n# å¹‚ç­‰è¡Œ(Idempotent)\nå¦‚æœä¸€ä¸ªå‡½æ•°æ‰§è¡Œå¤šæ¬¡çš†è¿”å›ç›¸åŒçš„ç»“æœï¼Œåˆ™å®ƒæ˜¯å¹‚ç­‰æ€§çš„ã€‚\n\n```javascript\n\n    f(f(x)) = f(x)\n    Math.abs(Math.abs(10))\n    sort(sort(sort([2, 1])))\n\n```\n\n# Point-Free é£æ ¼(Point-Free Style)\nå®šä¹‰å‡½æ•°æ—¶ï¼Œä¸æ˜¾å¼çš„æ”¯å‡ºå‡½æ•°æ‰€å¸¦å‚æ•°ã€‚è¿™ç§é£æ ¼é€šå¸¸éœ€è¦æŸ¯é‡ŒåŒ–æˆ–è€…é«˜é˜¶å‡½æ•°ã€‚ä¹Ÿå«Tacit programmingã€‚\n\n```javascript\n\n    const map = (fn) => (list) => list.map(fn)\n    const add = (a) => (b) => a + b\n\n    const incrementAll = (numbers) => map(add(1))(numbers)\n    const incrementAll2 = map(add(1))\n\n```\n\n# è°“è¯ (Predicate)\n\næ ¹æ®è¾“å…¥è¿”å›trueæˆ–false. é€šå¸¸ç”¨åœ¨Array.prototype.filterçš„å›è°ƒå‡½æ•°ä¸­ã€‚\n\n```javascript\n\n    const predicate = (a) => a > 2\n    [1, 2, 3, 4].filter(predicate)\n\n```\n\n# å¥‘çº¦ (Contracts)\n\nå¥‘çº¦ä¿è¯äº†å‡½æ•°æˆ–è€…è¡¨è¾¾å¼åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚å½“è¿åäº†å¥‘çº¦æ—¶ï¼Œå°†è·‘å‡ºä¸€ä¸ªé”™è¯¯ã€‚\n\n```javascript\n\n    const contract  = (input) => {\n        if (typeof input === 'number') return true\n\n        throw new Error('Contract Violated: expected int -> int')\n    }\n\n    const addOne = (num) => contract(num) && num + 1\n\n    addOne(2)\n    addOne('hello')\n\n```\n\n# èŒƒç•´ (Category)\n\nåœ¨èŒƒç•´è®ºä¸­ï¼ŒèŒƒç•´æ˜¯æŒ‡å¯¹è±¡é›†åˆåŠå®ƒä»¬ä¹‹é—´çš„æ€å°„ (morphism)ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ•°æ®ç±»å‹ä½œä¸ºå¯¹è±¡ï¼Œå‡½æ•°ä½œä¸ºæ€å°„ã€‚\n\nä¸€ä¸ªæœ‰æ•ˆçš„èŒƒç•´éµä»ä»¥ä¸‹ä¸‰ä¸ªåŸåˆ™ï¼š\n\n- å¿…æœ‰ä¸€ä¸ª identity æ€å°„ï¼Œä½¿å¾— map ä¸€ä¸ªå¯¹è±¡æ˜¯å®ƒè‡ªèº«ã€‚a æ˜¯èŒƒç•´é‡Œçš„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¿…æœ‰ä¸€ä¸ªå‡½æ•°ä½¿ a -> aã€‚\n- æ€å°„å¿…æ˜¯å¯ç»„åˆçš„ã€‚aï¼Œbï¼Œc æ˜¯èŒƒç•´é‡Œçš„å¯¹è±¡ï¼Œf æ˜¯æ€å°„ a -> bï¼Œg æ˜¯ b -> c æ€å°„ã€‚g(f(x)) ä¸€å®šä¸ (g â— f)(x)\n- ç»„åˆæ»¡è¶³ç»“åˆå¾‹ã€‚f â— (g â— h) ä¸ (f â— g) â— h æ˜¯ç­‰ä»·çš„ã€‚\n\nè¿™äº›å‡†åˆ™æ˜¯éå¸¸æŠ½è±¡çš„ï¼ŒèŒƒç•´è®ºå¯¹ä¸å‘ç°ç»„åˆçš„æ–°æ–¹æ³•æ˜¯ä¼Ÿå¤§çš„ã€‚\n\nè¿›ä¸€æ­¥é˜…è¯»\n\n[Category Theory for Programmers](https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/)\n\n# å€¼ (Value)\n\nèµ‹å€¼ç»™å˜é‡çš„å€¼ç§°ä½œValue\n\n```javascript\n\n    5\n    Object.freeze({name: 'John', age: 30})\n    ;(a) => a\n    ;[1]\n    undefined\n\n```\n\n# å¸¸é‡ (Constant)\n\nä¸€æ—¦å®šä¹‰ä¸å¯é‡æ–°èµ‹å€¼ã€‚\n\n```javascript\n\n    const five = 5\n    const john = Object.freeze({name: 'John', age: 30})\n\n```\n\nå¸¸é‡æ˜¯[å¼•ç”¨é€æ˜](https://github.com/shfshanyue/fp-jargon-zh#referential-transparency)çš„ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«å®ƒä»¬æ‰€ä»£è¡¨çš„å€¼æ›¿ä»£è€Œä¸å½±å“ç»“æœã€‚\n\nå¯¹äºä»¥ä¸Šä¸¤ä¸ªå¸¸é‡ï¼Œä»¥ä¸‹è¯­å¥æ€»ä¼šè¿”å› trueã€‚\n\n```javascript\n\n    john.age + five === ({name: 'John', age: 30}).age + (5)\n\n```\n\n# å‡½å­ (Functor)\n\nä¸€ä¸ªå®ç°äº†map å‡½æ•°çš„å¯¹è±¡ï¼Œmap ä¼šéå†å¯¹è±¡ä¸­çš„æ¯ä¸ªå€¼å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚éµå®ˆä¸¤ä¸ªå‡†åˆ™\n\n### ä¸€è‡´æ€§ (Preserves identity)\n\nobject.map(x => x) â‰ object\n### ç»„åˆæ€§ (Composable)\n\nobject.map(compose(f, g)) â‰ object.map(g).map(f)  // f, g ä¸ºä»»æ„å‡½æ•°\nåœ¨ javascript ä¸­ä¸€ä¸ªå¸¸è§çš„å‡½å­æ˜¯ Array, å› ä¸ºå®ƒéµå®ˆå› å­çš„ä¸¤ä¸ªå‡†åˆ™ã€‚\n\n```javascript\n\n    const f = x => x + 1\n    const g = x => x * 2\n\n    ;[1, 2, 3].map(x => f(g(x)))\n    ;[1, 2, 3].map(g).map(f)\n\n```\n\n# Pointed Functor\n\nä¸€ä¸ªå®ç°äº† of å‡½æ•°çš„å¯¹è±¡ã€‚\n\nES2015 æ·»åŠ äº† Array.ofï¼Œä½¿ Array æˆä¸ºäº† Pointed Functorã€‚\n\n```javascript\n\n    Array.of(1)\n\n```\n\n# Lift\n\n\n# å¼•ç”¨é€æ˜æ€§ (Referential Transparency)\n\nä¸€ä¸ªè¡¨è¾¾å¼èƒ½å¤Ÿè¢«å®ƒçš„å€¼æ›¿ä»£è€Œä¸æ”¹å˜ç¨‹åºçš„è¡Œä¸ºæˆä¸ºå¼•ç”¨é€æ˜ã€‚\n\n```javascript\n\n    const greet = () => 'hello, world.'\n\n```\n\n# åŒ¿åå‡½æ•° (Lambda)\n\nåŒ¿åå‡½æ•°è¢«è§†ä½œä¸€ä¸ªå€¼\n\n```javascript\n\n    ;(function (a) {\n        return a + 1\n    })\n\n    ;(a) => a + 1\n\n```\n\nåŒ¿åå‡½æ•°é€šå¸¸ä½œä¸ºé«˜é˜¶å‡½æ•°çš„å‚æ•°\n\n```javascript\n\n    [1, 2].map((a) => a + 1)\n\n```\n\nå¯ä»¥æŠŠ Lambda èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡\n\n```javascript\n\n    const add1 = (a) => a + 1\n\n```\n\n# Lambda Caculus\n\næ•°å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä½¿ç”¨å‡½æ•°åˆ›é€  [é€šè¿‡è®¡ç®—æ¨¡å‹](https://en.wikipedia.org/wiki/Lambda_calculus)\n\n\n# æƒ°æ€§æ±‚å€¼ (Lazy evaluation)\n\næŒ‰éœ€æ±‚å€¼æœºåˆ¶ï¼Œåªæœ‰å½“éœ€è¦è®¡ç®—æ‰€å¾—å€¼æ—¶æ‰ä¼šè®¡ç®—\n\n```javascript\n    const rand = function* () {\n        while (true) {\n            yield Math.random()\n        }\n    }\n\n    const randIter = rand()\n    randIter.next()\n```\n\n# Monoid\n\nä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªå‡½æ•°ç”¨æ¥è¿æ¥ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚\n\næ•°å€¼åŠ æ³•æ˜¯ä¸€ä¸ªç®€å•çš„ Monoid\n```javascript\n1 + 1   // 2\n```\nä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæ•°å€¼æ˜¯å¯¹è±¡è€Œ + æ˜¯å‡½æ•°ã€‚\n\nä¸å¦ä¸€ä¸ªå€¼ç»“åˆè€Œä¸ä¼šæ”¹å˜å®ƒçš„å€¼å¿…é¡»å­˜åœ¨ï¼Œç§°ä¸º identityã€‚\n\nåŠ æ³•çš„ identity å€¼ä¸º 0:\n```javascript\n1 + 0   // 1\n```\néœ€è¦æ»¡è¶³ç»“åˆå¾‹\n```javascript\n1 + (2 + 3) === (1 + 2) + 3 // true\n```\næ•°ç»„çš„ç»“åˆä¹Ÿæ˜¯ Monoid\n```javascript\n;[1, 2].concat([3, 4])\n```\nidentity å€¼ä¸ºç©ºæ•°ç»„\n\n;[1, 2].concat([])\nidentity ä¸ compose å‡½æ•°èƒ½å¤Ÿç»„æˆ monoid\n```javascript\nconst identity = (a) => a\nconst compose = (f, g) => (x) => f(g(x))\n```\n\nfoo æ˜¯åªå¸¦ä¸€ä¸ªå‚æ•°çš„ä»»æ„å‡½æ•°\n```javascript\ncompose(foo, identity) â‰ compose(identity, foo) â‰ foo\n```\n\n# Monad\n\næ‹¥æœ‰ of å’Œ chain å‡½æ•°çš„å¯¹è±¡ã€‚chain å¾ˆåƒ mapï¼Œ é™¤äº†ç”¨æ¥é“ºå¹³åµŒå¥—æ•°æ®ã€‚\n\n```javascript\n\n    Array.prototype.chain = function (f) {\n        return this.reduce((acc, it) => acc.concat(f(it)), [])\n    }\n\n    // ['cat', 'dog', 'fish', 'bird']\n    ;Array.of('cat,dog', 'fish,bird').chain(s => s.split(','))\n\n    // [['cat', 'dog'], ['fish', 'bird']]\n    ;Array.of('cat,dog', 'fish,bird').map(s => s.split(','))\n\n```\n\nåœ¨æœ‰äº›è¯­è¨€ä¸­ï¼Œof ä¹Ÿç§°ä¸º returnï¼Œchain ä¹Ÿç§°ä¸º flatmap ä¸ bindã€‚\n\n# Comonad\n\næ‹¥æœ‰ extract ä¸ extend å‡½æ•°çš„å¯¹è±¡ã€‚\n\n```javascript\n\n    const CoIdentity = (v) => ({\n        val: v,\n        extract () {\n            return this.val\n        },\n        extend (f) {\n            return CoIdentity(f(this))\n        }\n    })\n\n    CoIdentity(1).extract()\n    CoIdentity(1).extend(x => x.extract() + 1)   # CoIdentity(2)\n\n```\n\n# Applicative Functor\n\nä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚\n\n```javascript\n\n    // å®ç°\n    Array.prototype.ap = function (xs) {\n        return this.reduce((acc, f) => acc.concat(xs.map(f)), [])\n    }\n\n    // ç¤ºä¾‹\n    ;[(a) => a + 1].ap([1]) // [2]\n\n```\n\nå¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°\n\n```javascript\n\n    // Arrays that you want to combine\n    const arg1 = [1, 3]\n    const arg2 = [4, 5]\n\n    // combining function - must be curried for this to work\n    const add = (x) => (y) => x + y\n\n    const partiallyAppliedAdds = [add].ap(arg1) // [(y) => 1 + y, (y) => 3 + y]\n\n```\n\nç”±æ­¤å¾—åˆ°äº†ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œå¹¶ä¸”å¯ä»¥è°ƒç”¨ ap å‡½æ•°å¾—åˆ°ç»“æœ\n\n```javascript\n\n    partiallyAppliedAdds.ap(arg2) // [5, 6, 7, 8]\n\n```\n\n# Applicative Functor\n\nä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚\n\n```javascript\n\n    // å®ç°\n    Array.prototype.ap = function (xs) {\n        return this.reduce((acc, f) => acc.concat(xs.map(f)), [])\n    }\n\n    // ç¤ºä¾‹\n    ;[(a) => a + 1].ap([1]) // [2]\n\n```\n\nå¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°\n\n```javascript\n\n    // Arrays that you want to combine\n    const arg1 = [1, 3]\n    const arg2 = [4, 5]\n\n    // combining function - must be curried for this to work\n    const add = (x) => (y) => x + y\n\n    const partiallyAppliedAdds = [add].ap(arg1) // [(y) => 1 + y, (y) => 3 + y]\n\n```\n\n# æ€å°„ (Morphism)\n\nä¸€ä¸ªå˜å½¢çš„å‡½æ•°ã€‚\n\n# è‡ªåŒæ€ (Endomorphism)\n\nè¾“å…¥è¾“å‡ºæ˜¯ç›¸åŒç±»å‹çš„å‡½æ•°ã€‚\n\n```javascript\n\n    // uppercase :: String -> String\n    const uppercase = (str) => str.toUpperCase()\n\n    // decrement :: Number -> Number\n    const decrement = (x) => x - 1\n\n```\n\n# åŒæ„ (Isomorphism)\n\nä¸ç”¨ç±»å‹å¯¹è±¡çš„å˜å½¢ï¼Œä¿æŒç»“æ„å¹¶ä¸”ä¸ä¸¢å¤±æ•°æ®ã€‚\n\nä¾‹å¦‚ï¼Œä¸€ä¸ªäºŒç»´åæ ‡æ—¢å¯ä»¥è¡¨ç¤ºä¸ºæ•°ç»„ [2, 3]ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºå¯¹è±¡ {x: 2, y: 3}ã€‚\n\n```javascript\n    // æä¾›å‡½æ•°åœ¨ä¸¤ç§ç±»å‹é—´äº’ç›¸è½¬æ¢\n    const pairToCoords = (pair) => ({x: pair[0], y: pair[1]})\n\n    const coordsToPair = (coords) => [coords.x, coords.y]\n\n    coordsToPair(pairToCoords([1, 2])) // [1, 2]\n\n    pairToCoords(coordsToPair({x: 1, y: 2})) // {x: 1, y: 2}\n```\n\n# Setoid\n\næ‹¥æœ‰ equals å‡½æ•°çš„å¯¹è±¡ã€‚equals å¯ä»¥ç”¨æ¥å’Œå…¶å®ƒå¯¹è±¡æ¯”è¾ƒã€‚\n\n```javascript\n\n    Array.prototype.equals = function (arr) {\n    const len = this.length\n    if (len !== arr.length) {\n    return false\n    }\n    for (let i = 0; i < len; i++) {\n    if (this[i] !== arr[i]) {\n      return false\n    }\n    }\n    return true\n    }\n\n    ;[1, 2].equals([1, 2])   // true\n    ;[1, 2].equals([3, 4])   // false\n\n```\n\n# åŠç¾¤ (Semigroup)\n\nAn object that has a concat function that combines it with another object of the same type.\n\n```javascript\n\n    ;[1].concat([2]) // [1, 2]\n\n```\n\n# Foldable\n\nAn object that has a reduce function that can transform that object into some other type.\n\n```javascript\n\n    const sum = list => list.reduce((account, value) => account + value, 0)\n    sum([1, 2, 3])\n\n```\n\n# Traversbale\nTODO\n\n# Type Signatures\n\nOften functions in JavaScript will include comments that indicate the types of their arguments and return values.\n\nThere's quite a bit of variance across the community but they often follow the following patterns:\n\n```javascript\n\n    // functionName :: firstArgType -> secondArgType -> returnType\n\n    // add :: Number -> Number -> Number\n    const add = (x) => (y) => x + y\n\n    // increment :: Number -> Number\n    const increment = (x) => x + 1\n\n```\n\nIf a function accepts another function as an argument it is wrapped in parentheses.\n\n```javascript\n\n    // call :: (a -> b) -> a -> b\n    const call = (f) => (x) => f(x)\n\n```\n\nThe letters a, b, c, d are used to signify that the argument can be of any type. The following version of map takes a function that transforms a value of some type a into another type b, an array of values of type a, and returns an array of values of type b.\n\n```javascript\n\n    // map :: (a -> b) -> [a] -> [b]\n    const map = (f) => (list) => list.map(f)\n\n```\n\nFurther reading\n\n- [Ramda's type signatures](https://github.com/ramda/ramda/wiki/Type-Signatures)\n- [Mostly Adequate Guide](https://drboolean.gitbooks.io/mostly-adequate-guide/content/ch7.html#whats-your-type)\n- [What is Hindley-Milner?](http://stackoverflow.com/questions/399312/what-is-hindley-milner/399392#399392) on Stack Overflow\n\n# Union type\n\nA union type is the combination of two types together into another one.\n\nJS doesn't have static types but let's say we invent a type NumOrString which is a sum of String and Number.\n\nThe + operator in JS works on strings and numbers so we can use this new type to describe its inputs and outputs:\n\n```javascript\n\n    // add :: (NumOrString, NumOrString) -> NumOrString\n    const add = (a, b) => a + b\n\n    add(1, 2) // Returns number 3\n    add('Foo', 2) // Returns string \"Foo2\"\n    add('Foo', 'Bar') // Returns string \"FooBar\"\n\n```\n\nUnion types are also known as algebraic types, tagged unions, or sum types.\n\nThere's a couple libraries in JS which help with defining and using union types.\n- [union-type](https://github.com/paldepind/union-type)\n- [daggy](https://github.com/fantasyland/daggy)\n\n# Product type\n\nA product type combines types together in a way you're probably more familiar with:\n\n```javascript\n\n    // point :: (Number, Number) -> {x: Number, y: Number}\n    const point = (x, y) => ({x: x, y: y})\n\n```\n\nIt's called a product because the total possible values of the data structure is the product of the different values.\n\nSee also [Set theory](https://en.wikipedia.org/wiki/Set_theory).\n\n# Option\n\nOption is a union type with two cases often called Some and None.\n\nOption is useful for composing functions that might not return a value.\n\n```javascript\n\n// Naive definition\n\n    const Some = (v) => ({\n        val: v,\n        map (f) {\n            return Some(f(this.val))\n        },\n        chain (f) {\n            return f(this.val)\n        }\n    })\n\n    const None = () => ({\n        map (f) {\n            return this\n        },\n        chain (f) {\n            return this\n        }\n    })\n\n    // maybeProp :: (String, {a}) -> Option a\n    const maybeProp = (key, obj) => typeof obj[key] === 'undefined' ? None() : Some(obj[key])\n\n```\n\nUse `chain` to sequence functions that return `Options`\n\n```javascript\n\n    // getItem :: Cart -> Option CartItem\n    const getItem = (cart) => maybeProp('item', cart)\n\n    // getPrice :: Item -> Option Number\n    const getPrice = (item) => maybeProp('price', item)\n\n    // getNestedPrice :: cart -> Option a\n    const getNestedPrice = (cart) => getItem(obj).chain(getPrice)\n\n    getNestedPrice({}) // None()\n    getNestedPrice({item: {foo: 1}}) // None()\n    getNestedPrice({item: {price: 9.99}}) // Some(9.99)\n\n```\n\n`Option` is also known as `Maybe`. `Some` is sometimes called `Just`. `None` is sometimes called `Nothing`.\n\n# Functional Programming Libraries in JavaScript\n\n- [mori](https://github.com/swannodette/mori)\n- [Immutable](https://github.com/facebook/immutable-js/)\n- [Ramda](https://github.com/ramda/ramda)\n- [Folktale](http://folktalejs.org/)\n- [monet.js](https://cwmyers.github.io/monet.js/)\n- [lodash](https://github.com/lodash/lodash)\n- [Underscore.js](https://github.com/jashkenas/underscore)\n- [Lazy.js](https://github.com/dtao/lazy.js)\n- [maryamyriameliamurphies.js](https://github.com/sjsyrek/maryamyriameliamurphies.js)\n- [Haskell in ES6](https://github.com/casualjavascript/haskell-in-es6)\n","slug":"2017-03-09-functional-program","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxu001dmmt7zprdexcq","content":"<p>// <a href=\"https://github.com/shfshanyue/fp-jargon-zh#arity\" target=\"_blank\" rel=\"external\">https://github.com/shfshanyue/fp-jargon-zh#arity</a></p>\n<h1 id=\"Arity\"><a href=\"#Arity\" class=\"headerlink\" title=\"Arity\"></a>Arity</h1><p>å‡½æ•°å‚æ•°çš„ä¸ªæ•°ã€‚æ¥è‡ªäºå•è¯ unary, binary, ternary ç­‰ç­‰ã€‚è¿™ä¸ªå•è¯æ˜¯ç”± -ary ä¸ -ity ä¸¤ä¸ªåç¼€æ‹¼æ¥è€Œæˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°è¢«ç§°ä¸ºäºŒå…ƒå‡½æ•°æˆ–è€…å®ƒçš„ arity æ˜¯2ã€‚å®ƒä¹Ÿè¢«é‚£äº›æ›´å–œæ¬¢å¸Œè…Šè¯æ ¹è€Œéæ‹‰ä¸è¯æ ¹çš„äººç§°ä¸º dyadicã€‚åŒæ ·åœ°ï¼Œå¸¦æœ‰å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°è¢«ç§°ä¸º variadicï¼Œè€ŒäºŒå…ƒå‡½æ•°åªèƒ½å¸¦ä¸¤ä¸ªå‚æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> sum = <span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b</div><div class=\"line\"><span class=\"keyword\">const</span> arity = sum.length</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'arity: '</span>, arity)</div></pre></td></tr></table></figure>\n<h1 id=\"é«˜é˜¶å‡½æ•°-Higher-Order-Function-HOF\"><a href=\"#é«˜é˜¶å‡½æ•°-Higher-Order-Function-HOF\" class=\"headerlink\" title=\"é«˜é˜¶å‡½æ•° (Higher-Order Function/HOF)\"></a>é«˜é˜¶å‡½æ•° (Higher-Order Function/HOF)</h1><p>ä»¥å‡½æ•°ä¸ºå‚æ•°æˆ–/å’Œè¿”å›å€¼</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> filter = <span class=\"function\">(<span class=\"params\">predicate, xs</span>) =&gt;</span> xs.filter(predicte)</div><div class=\"line\"><span class=\"keyword\">const</span> is = <span class=\"function\">(<span class=\"params\">type</span>) =&gt;</span> (x) =&gt; <span class=\"built_in\">Object</span>(x) <span class=\"keyword\">instanceof</span> type</div><div class=\"line\">filter(is(<span class=\"built_in\">Number</span>), [<span class=\"number\">0</span>, <span class=\"string\">'1'</span>, <span class=\"number\">2</span>, <span class=\"literal\">null</span>])</div></pre></td></tr></table></figure>\n<h1 id=\"åå‡½æ•°-Partial-Function\"><a href=\"#åå‡½æ•°-Partial-Function\" class=\"headerlink\" title=\"åå‡½æ•° (Partial Function)\"></a>åå‡½æ•° (Partial Function)</h1><p>å¯¹åŸå§‹å‡½æ•°é¢„è®¾å‚æ•°ä½œä¸ºä¸€ä¸ªæ–°çš„å‡½æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> partical = <span class=\"function\">(<span class=\"params\">f, ...args</span>) =&gt;</span> (...moreArgs) =&gt; f(...args, ...moreArgs)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add3 = <span class=\"function\">(<span class=\"params\">a, b, c</span>) =&gt;</span> a + b + c</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> fivePlus = partical(add3, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</div><div class=\"line\"></div><div class=\"line\">fivePlus(<span class=\"number\">4</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ä¹Ÿå¯ä»¥ä½¿ç”¨Function.prototype.bindå®ç°åå‡½æ•°</span></div><div class=\"line\"><span class=\"keyword\">const</span> add1More = add3.bind(<span class=\"literal\">null</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"æŸ¯é‡ŒåŒ–-Currying\"><a href=\"#æŸ¯é‡ŒåŒ–-Currying\" class=\"headerlink\" title=\"æŸ¯é‡ŒåŒ– (Currying)\"></a>æŸ¯é‡ŒåŒ– (Currying)</h1><p>è®²ä¸€ä¸ªå¤šå…ƒå‡½æ•°è½¬å˜ä¸ºä¸€å…ƒå‡½æ•°çš„è¿‡ç¨‹ã€‚æ¯å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä»…ä»…æ¥æ”¶ä¸€ä¸ª å‚æ•°å¹¶ä¸”è¿”å›å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç›´æ¥ä¼ é€’å®Œæ‰€æœ‰çš„å‚æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> sum = <span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b</div><div class=\"line\"><span class=\"keyword\">const</span> curriedSum = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> (b) =&gt; a + b</div><div class=\"line\"></div><div class=\"line\">curriedSum(<span class=\"number\">3</span>)(<span class=\"number\">4</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add2 = curriedSum(<span class=\"number\">2</span>)</div><div class=\"line\">add2(<span class=\"number\">10</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"è‡ªåŠ¨æŸ¯é‡ŒåŒ–-Auto-Currying\"><a href=\"#è‡ªåŠ¨æŸ¯é‡ŒåŒ–-Auto-Currying\" class=\"headerlink\" title=\"è‡ªåŠ¨æŸ¯é‡ŒåŒ– (Auto Currying)\"></a>è‡ªåŠ¨æŸ¯é‡ŒåŒ– (Auto Currying)</h1><p><code>lodash</code>, <code>understore</code>å’Œ<code>ramda</code>æœ‰<code>curry</code>å‡½æ•°å¯ä»¥è‡ªåŠ¨å®ŒæˆæŸ¯é‡ŒåŒ–</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y</div><div class=\"line\"><span class=\"keyword\">const</span> curriedAdd = _.curry(add)</div><div class=\"line\"></div><div class=\"line\">curriedAdd(<span class=\"number\">1</span>, <span class=\"number\">2</span>)</div><div class=\"line\">curriedAdd(<span class=\"number\">1</span>)(<span class=\"number\">2</span>)</div><div class=\"line\">curriedAdd(<span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"è¿›ä¸€æ­¥é˜…è¯»\"><a href=\"#è¿›ä¸€æ­¥é˜…è¯»\" class=\"headerlink\" title=\"è¿›ä¸€æ­¥é˜…è¯»\"></a>è¿›ä¸€æ­¥é˜…è¯»</h3><ul>\n<li><a href=\"http://fr.umio.us/favoring-curry/\" target=\"_blank\" rel=\"external\">Favoring Curry</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=m3svKOdZijA\" target=\"_blank\" rel=\"external\">Hey Underscore, Youâ€™re Doing It Wrong!</a></li>\n</ul>\n<h1 id=\"å‡½æ•°ç»„åˆ-Function-Composing\"><a href=\"#å‡½æ•°ç»„åˆ-Function-Composing\" class=\"headerlink\" title=\"å‡½æ•°ç»„åˆ (Function Composing)\"></a>å‡½æ•°ç»„åˆ (Function Composing)</h1><p>æ¥æ”¶å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»å³åˆ°å·¦ï¼Œä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å‡º</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\">(<span class=\"params\">f, g</span>) =&gt;</span> (a) =&gt; f(g(a))</div><div class=\"line\"><span class=\"keyword\">const</span> floorAndToString = compose(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> val.toString(), <span class=\"built_in\">Math</span>.floor)</div><div class=\"line\">floorAndToString(<span class=\"number\">12.12</span>)</div></pre></td></tr></table></figure>\n<p>Continuation</p>\n<p>åœ¨ä¸€ä¸ªç¨‹åºæ‰§è¡Œçš„ä»»æ„æ—¶åˆ», å°šæœªæ‰§è¡Œçš„ä»£ç æˆä¸ºContinuation.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> printAsString = <span class=\"function\">(<span class=\"params\">num</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`Given <span class=\"subst\">$&#123;num&#125;</span>`</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> addOneAndContinue = <span class=\"function\">(<span class=\"params\">num, cc</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> result = num + <span class=\"number\">1</span></div><div class=\"line\">    cc(result)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">andOneAndContinue(<span class=\"number\">2</span>, printAsString)</div></pre></td></tr></table></figure>\n<p>Continuation åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­å¾ˆå¸¸è§, æ¯”å¦‚å½“ç¨‹åºéœ€è¦æ¥æ”¶åˆ°æ•°æ®æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚è¯·æ±‚çš„ç›¸åº”åŒåŸä½œä¸ºä»£ç çš„å‰©ä½™æ‰§è¡Œéƒ¨åˆ†ï¼Œä¸€æ—¦æ¥æ”¶åˆ°æ•°æ®ï¼Œå¯¹æ•°æ®çš„å¤„ç†è¢«ä½œä¸ºContinuation.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> continueProgramWith = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;&#125;</div><div class=\"line\">readFileAsync(<span class=\"string\">'path/to/file'</span>, (response, error) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    continueProgramWith(response)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h1 id=\"çº¯å‡½æ•°-Purity\"><a href=\"#çº¯å‡½æ•°-Purity\" class=\"headerlink\" title=\"çº¯å‡½æ•° (Purity)\"></a>çº¯å‡½æ•° (Purity)</h1><p>è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸”ä¸äº§ç”Ÿå‰¯ä½œç”¨ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> <span class=\"string\">`hello, <span class=\"subst\">$&#123;name&#125;</span>`</span></div><div class=\"line\">greet(<span class=\"string\">'world'</span>)</div></pre></td></tr></table></figure>\n<p>ä»¥ä¸€ä¸‹ä»£ç ä¸æ˜¯çº¯å‡½æ•°ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'Brianne'</span></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`Hi, <span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.name&#125;</span>`</span> <span class=\"comment\">//å‡½æ•°ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€‚</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> greeting</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> &#123;</div><div class=\"line\">    greeting = <span class=\"string\">`Hi, <span class=\"subst\">$&#123;name&#125;</span>`</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">greet(<span class=\"string\">'Brianne'</span>)</div><div class=\"line\">greeting</div></pre></td></tr></table></figure>\n<h1 id=\"å‰¯ä½œç”¨-Side-effects\"><a href=\"#å‰¯ä½œç”¨-Side-effects\" class=\"headerlink\" title=\"å‰¯ä½œç”¨(Side effects)\"></a>å‰¯ä½œç”¨(Side effects)</h1><p>å¦‚æœå‡½æ•°ä¸å¤–éƒ¨å¯å˜çŠ¶æ€è¿›è¡Œäº¤äº’ï¼Œåˆ™å®ƒæ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> differentEveryTime = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'IO is a side effect!'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"å¹‚ç­‰è¡Œ-Idempotent\"><a href=\"#å¹‚ç­‰è¡Œ-Idempotent\" class=\"headerlink\" title=\"å¹‚ç­‰è¡Œ(Idempotent)\"></a>å¹‚ç­‰è¡Œ(Idempotent)</h1><p>å¦‚æœä¸€ä¸ªå‡½æ•°æ‰§è¡Œå¤šæ¬¡çš†è¿”å›ç›¸åŒçš„ç»“æœï¼Œåˆ™å®ƒæ˜¯å¹‚ç­‰æ€§çš„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">f(f(x)) = f(x)</div><div class=\"line\"><span class=\"built_in\">Math</span>.abs(<span class=\"built_in\">Math</span>.abs(<span class=\"number\">10</span>))</div><div class=\"line\">sort(sort(sort([<span class=\"number\">2</span>, <span class=\"number\">1</span>])))</div></pre></td></tr></table></figure>\n<h1 id=\"Point-Free-é£æ ¼-Point-Free-Style\"><a href=\"#Point-Free-é£æ ¼-Point-Free-Style\" class=\"headerlink\" title=\"Point-Free é£æ ¼(Point-Free Style)\"></a>Point-Free é£æ ¼(Point-Free Style)</h1><p>å®šä¹‰å‡½æ•°æ—¶ï¼Œä¸æ˜¾å¼çš„æ”¯å‡ºå‡½æ•°æ‰€å¸¦å‚æ•°ã€‚è¿™ç§é£æ ¼é€šå¸¸éœ€è¦æŸ¯é‡ŒåŒ–æˆ–è€…é«˜é˜¶å‡½æ•°ã€‚ä¹Ÿå«Tacit programmingã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> map = <span class=\"function\">(<span class=\"params\">fn</span>) =&gt;</span> (list) =&gt; list.map(fn)</div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> (b) =&gt; a + b</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> incrementAll = <span class=\"function\">(<span class=\"params\">numbers</span>) =&gt;</span> map(add(<span class=\"number\">1</span>))(numbers)</div><div class=\"line\"><span class=\"keyword\">const</span> incrementAll2 = map(add(<span class=\"number\">1</span>))</div></pre></td></tr></table></figure>\n<h1 id=\"è°“è¯-Predicate\"><a href=\"#è°“è¯-Predicate\" class=\"headerlink\" title=\"è°“è¯ (Predicate)\"></a>è°“è¯ (Predicate)</h1><p>æ ¹æ®è¾“å…¥è¿”å›trueæˆ–false. é€šå¸¸ç”¨åœ¨Array.prototype.filterçš„å›è°ƒå‡½æ•°ä¸­ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> predicate = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a &gt; <span class=\"number\">2</span></div><div class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>].filter(predicate)</div></pre></td></tr></table></figure>\n<h1 id=\"å¥‘çº¦-Contracts\"><a href=\"#å¥‘çº¦-Contracts\" class=\"headerlink\" title=\"å¥‘çº¦ (Contracts)\"></a>å¥‘çº¦ (Contracts)</h1><p>å¥‘çº¦ä¿è¯äº†å‡½æ•°æˆ–è€…è¡¨è¾¾å¼åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚å½“è¿åäº†å¥‘çº¦æ—¶ï¼Œå°†è·‘å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> contract  = <span class=\"function\">(<span class=\"params\">input</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> input === <span class=\"string\">'number'</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Contract Violated: expected int -&gt; int'</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> addOne = <span class=\"function\">(<span class=\"params\">num</span>) =&gt;</span> contract(num) &amp;&amp; num + <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">addOne(<span class=\"number\">2</span>)</div><div class=\"line\">addOne(<span class=\"string\">'hello'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"èŒƒç•´-Category\"><a href=\"#èŒƒç•´-Category\" class=\"headerlink\" title=\"èŒƒç•´ (Category)\"></a>èŒƒç•´ (Category)</h1><p>åœ¨èŒƒç•´è®ºä¸­ï¼ŒèŒƒç•´æ˜¯æŒ‡å¯¹è±¡é›†åˆåŠå®ƒä»¬ä¹‹é—´çš„æ€å°„ (morphism)ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ•°æ®ç±»å‹ä½œä¸ºå¯¹è±¡ï¼Œå‡½æ•°ä½œä¸ºæ€å°„ã€‚</p>\n<p>ä¸€ä¸ªæœ‰æ•ˆçš„èŒƒç•´éµä»ä»¥ä¸‹ä¸‰ä¸ªåŸåˆ™ï¼š</p>\n<ul>\n<li>å¿…æœ‰ä¸€ä¸ª identity æ€å°„ï¼Œä½¿å¾— map ä¸€ä¸ªå¯¹è±¡æ˜¯å®ƒè‡ªèº«ã€‚a æ˜¯èŒƒç•´é‡Œçš„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¿…æœ‰ä¸€ä¸ªå‡½æ•°ä½¿ a -&gt; aã€‚</li>\n<li>æ€å°„å¿…æ˜¯å¯ç»„åˆçš„ã€‚aï¼Œbï¼Œc æ˜¯èŒƒç•´é‡Œçš„å¯¹è±¡ï¼Œf æ˜¯æ€å°„ a -&gt; bï¼Œg æ˜¯ b -&gt; c æ€å°„ã€‚g(f(x)) ä¸€å®šä¸ (g â— f)(x)</li>\n<li>ç»„åˆæ»¡è¶³ç»“åˆå¾‹ã€‚f â— (g â— h) ä¸ (f â— g) â— h æ˜¯ç­‰ä»·çš„ã€‚</li>\n</ul>\n<p>è¿™äº›å‡†åˆ™æ˜¯éå¸¸æŠ½è±¡çš„ï¼ŒèŒƒç•´è®ºå¯¹ä¸å‘ç°ç»„åˆçš„æ–°æ–¹æ³•æ˜¯ä¼Ÿå¤§çš„ã€‚</p>\n<p>è¿›ä¸€æ­¥é˜…è¯»</p>\n<p><a href=\"https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/\" target=\"_blank\" rel=\"external\">Category Theory for Programmers</a></p>\n<h1 id=\"å€¼-Value\"><a href=\"#å€¼-Value\" class=\"headerlink\" title=\"å€¼ (Value)\"></a>å€¼ (Value)</h1><p>èµ‹å€¼ç»™å˜é‡çš„å€¼ç§°ä½œValue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"number\">5</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.freeze(&#123;<span class=\"attr\">name</span>: <span class=\"string\">'John'</span>, <span class=\"attr\">age</span>: <span class=\"number\">30</span>&#125;)</div><div class=\"line\">;<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a</div><div class=\"line\">;[<span class=\"number\">1</span>]</div><div class=\"line\"><span class=\"literal\">undefined</span></div></pre></td></tr></table></figure>\n<h1 id=\"å¸¸é‡-Constant\"><a href=\"#å¸¸é‡-Constant\" class=\"headerlink\" title=\"å¸¸é‡ (Constant)\"></a>å¸¸é‡ (Constant)</h1><p>ä¸€æ—¦å®šä¹‰ä¸å¯é‡æ–°èµ‹å€¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> five = <span class=\"number\">5</span></div><div class=\"line\"><span class=\"keyword\">const</span> john = <span class=\"built_in\">Object</span>.freeze(&#123;<span class=\"attr\">name</span>: <span class=\"string\">'John'</span>, <span class=\"attr\">age</span>: <span class=\"number\">30</span>&#125;)</div></pre></td></tr></table></figure>\n<p>å¸¸é‡æ˜¯<a href=\"https://github.com/shfshanyue/fp-jargon-zh#referential-transparency\" target=\"_blank\" rel=\"external\">å¼•ç”¨é€æ˜</a>çš„ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«å®ƒä»¬æ‰€ä»£è¡¨çš„å€¼æ›¿ä»£è€Œä¸å½±å“ç»“æœã€‚</p>\n<p>å¯¹äºä»¥ä¸Šä¸¤ä¸ªå¸¸é‡ï¼Œä»¥ä¸‹è¯­å¥æ€»ä¼šè¿”å› trueã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">john.age + five === (&#123;<span class=\"attr\">name</span>: <span class=\"string\">'John'</span>, <span class=\"attr\">age</span>: <span class=\"number\">30</span>&#125;).age + (<span class=\"number\">5</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"å‡½å­-Functor\"><a href=\"#å‡½å­-Functor\" class=\"headerlink\" title=\"å‡½å­ (Functor)\"></a>å‡½å­ (Functor)</h1><p>ä¸€ä¸ªå®ç°äº†map å‡½æ•°çš„å¯¹è±¡ï¼Œmap ä¼šéå†å¯¹è±¡ä¸­çš„æ¯ä¸ªå€¼å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚éµå®ˆä¸¤ä¸ªå‡†åˆ™</p>\n<h3 id=\"ä¸€è‡´æ€§-Preserves-identity\"><a href=\"#ä¸€è‡´æ€§-Preserves-identity\" class=\"headerlink\" title=\"ä¸€è‡´æ€§ (Preserves identity)\"></a>ä¸€è‡´æ€§ (Preserves identity)</h3><p>object.map(x =&gt; x) â‰ object</p>\n<h3 id=\"ç»„åˆæ€§-Composable\"><a href=\"#ç»„åˆæ€§-Composable\" class=\"headerlink\" title=\"ç»„åˆæ€§ (Composable)\"></a>ç»„åˆæ€§ (Composable)</h3><p>object.map(compose(f, g)) â‰ object.map(g).map(f)  // f, g ä¸ºä»»æ„å‡½æ•°<br>åœ¨ javascript ä¸­ä¸€ä¸ªå¸¸è§çš„å‡½å­æ˜¯ Array, å› ä¸ºå®ƒéµå®ˆå› å­çš„ä¸¤ä¸ªå‡†åˆ™ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> f = <span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x + <span class=\"number\">1</span></div><div class=\"line\"><span class=\"keyword\">const</span> g = <span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x * <span class=\"number\">2</span></div><div class=\"line\"></div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>].map(<span class=\"function\"><span class=\"params\">x</span> =&gt;</span> f(g(x)))</div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>].map(g).map(f)</div></pre></td></tr></table></figure>\n<h1 id=\"Pointed-Functor\"><a href=\"#Pointed-Functor\" class=\"headerlink\" title=\"Pointed Functor\"></a>Pointed Functor</h1><p>ä¸€ä¸ªå®ç°äº† of å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<p>ES2015 æ·»åŠ äº† Array.ofï¼Œä½¿ Array æˆä¸ºäº† Pointed Functorã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.of(<span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"Lift\"><a href=\"#Lift\" class=\"headerlink\" title=\"Lift\"></a>Lift</h1><h1 id=\"å¼•ç”¨é€æ˜æ€§-Referential-Transparency\"><a href=\"#å¼•ç”¨é€æ˜æ€§-Referential-Transparency\" class=\"headerlink\" title=\"å¼•ç”¨é€æ˜æ€§ (Referential Transparency)\"></a>å¼•ç”¨é€æ˜æ€§ (Referential Transparency)</h1><p>ä¸€ä¸ªè¡¨è¾¾å¼èƒ½å¤Ÿè¢«å®ƒçš„å€¼æ›¿ä»£è€Œä¸æ”¹å˜ç¨‹åºçš„è¡Œä¸ºæˆä¸ºå¼•ç”¨é€æ˜ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">'hello, world.'</span></div></pre></td></tr></table></figure>\n<h1 id=\"åŒ¿åå‡½æ•°-Lambda\"><a href=\"#åŒ¿åå‡½æ•°-Lambda\" class=\"headerlink\" title=\"åŒ¿åå‡½æ•° (Lambda)\"></a>åŒ¿åå‡½æ•° (Lambda)</h1><p>åŒ¿åå‡½æ•°è¢«è§†ä½œä¸€ä¸ªå€¼</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">;(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> a + <span class=\"number\">1</span></div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">;<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>åŒ¿åå‡½æ•°é€šå¸¸ä½œä¸ºé«˜é˜¶å‡½æ•°çš„å‚æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>].map(<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<p>å¯ä»¥æŠŠ Lambda èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add1 = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<h1 id=\"Lambda-Caculus\"><a href=\"#Lambda-Caculus\" class=\"headerlink\" title=\"Lambda Caculus\"></a>Lambda Caculus</h1><p>æ•°å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä½¿ç”¨å‡½æ•°åˆ›é€  <a href=\"https://en.wikipedia.org/wiki/Lambda_calculus\" target=\"_blank\" rel=\"external\">é€šè¿‡è®¡ç®—æ¨¡å‹</a></p>\n<h1 id=\"æƒ°æ€§æ±‚å€¼-Lazy-evaluation\"><a href=\"#æƒ°æ€§æ±‚å€¼-Lazy-evaluation\" class=\"headerlink\" title=\"æƒ°æ€§æ±‚å€¼ (Lazy evaluation)\"></a>æƒ°æ€§æ±‚å€¼ (Lazy evaluation)</h1><p>æŒ‰éœ€æ±‚å€¼æœºåˆ¶ï¼Œåªæœ‰å½“éœ€è¦è®¡ç®—æ‰€å¾—å€¼æ—¶æ‰ä¼šè®¡ç®—</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> rand = <span class=\"function\"><span class=\"keyword\">function</span>* (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">yield</span> <span class=\"built_in\">Math</span>.random()</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> randIter = rand()</div><div class=\"line\">randIter.next()</div></pre></td></tr></table></figure>\n<h1 id=\"Monoid\"><a href=\"#Monoid\" class=\"headerlink\" title=\"Monoid\"></a>Monoid</h1><p>ä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªå‡½æ•°ç”¨æ¥è¿æ¥ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚</p>\n<p>æ•°å€¼åŠ æ³•æ˜¯ä¸€ä¸ªç®€å•çš„ Monoid<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span> + <span class=\"number\">1</span>   <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure></p>\n<p>ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæ•°å€¼æ˜¯å¯¹è±¡è€Œ + æ˜¯å‡½æ•°ã€‚</p>\n<p>ä¸å¦ä¸€ä¸ªå€¼ç»“åˆè€Œä¸ä¼šæ”¹å˜å®ƒçš„å€¼å¿…é¡»å­˜åœ¨ï¼Œç§°ä¸º identityã€‚</p>\n<p>åŠ æ³•çš„ identity å€¼ä¸º 0:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span> + <span class=\"number\">0</span>   <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure></p>\n<p>éœ€è¦æ»¡è¶³ç»“åˆå¾‹<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span> + (<span class=\"number\">2</span> + <span class=\"number\">3</span>) === (<span class=\"number\">1</span> + <span class=\"number\">2</span>) + <span class=\"number\">3</span> <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<p>æ•°ç»„çš„ç»“åˆä¹Ÿæ˜¯ Monoid<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>].concat([<span class=\"number\">3</span>, <span class=\"number\">4</span>])</div></pre></td></tr></table></figure></p>\n<p>identity å€¼ä¸ºç©ºæ•°ç»„</p>\n<p>;[1, 2].concat([])<br>identity ä¸ compose å‡½æ•°èƒ½å¤Ÿç»„æˆ monoid<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> identity = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a</div><div class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\">(<span class=\"params\">f, g</span>) =&gt;</span> (x) =&gt; f(g(x))</div></pre></td></tr></table></figure></p>\n<p>foo æ˜¯åªå¸¦ä¸€ä¸ªå‚æ•°çš„ä»»æ„å‡½æ•°<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compose(foo, identity) â‰ compose(identity, foo) â‰ foo</div></pre></td></tr></table></figure></p>\n<h1 id=\"Monad\"><a href=\"#Monad\" class=\"headerlink\" title=\"Monad\"></a>Monad</h1><p>æ‹¥æœ‰ of å’Œ chain å‡½æ•°çš„å¯¹è±¡ã€‚chain å¾ˆåƒ mapï¼Œ é™¤äº†ç”¨æ¥é“ºå¹³åµŒå¥—æ•°æ®ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.chain = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">f</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">acc, it</span>) =&gt;</span> acc.concat(f(it)), [])</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ['cat', 'dog', 'fish', 'bird']</span></div><div class=\"line\">;<span class=\"built_in\">Array</span>.of(<span class=\"string\">'cat,dog'</span>, <span class=\"string\">'fish,bird'</span>).chain(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s.split(<span class=\"string\">','</span>))</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// [['cat', 'dog'], ['fish', 'bird']]</span></div><div class=\"line\">;<span class=\"built_in\">Array</span>.of(<span class=\"string\">'cat,dog'</span>, <span class=\"string\">'fish,bird'</span>).map(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s.split(<span class=\"string\">','</span>))</div></pre></td></tr></table></figure>\n<p>åœ¨æœ‰äº›è¯­è¨€ä¸­ï¼Œof ä¹Ÿç§°ä¸º returnï¼Œchain ä¹Ÿç§°ä¸º flatmap ä¸ bindã€‚</p>\n<h1 id=\"Comonad\"><a href=\"#Comonad\" class=\"headerlink\" title=\"Comonad\"></a>Comonad</h1><p>æ‹¥æœ‰ extract ä¸ extend å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">const CoIdentity = (v) =&gt; (&#123;</div><div class=\"line\">    val: v,</div><div class=\"line\">    extract () &#123;</div><div class=\"line\">        return this.val</div><div class=\"line\">    &#125;,</div><div class=\"line\">    extend (f) &#123;</div><div class=\"line\">        return CoIdentity(f(this))</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">CoIdentity(1).extract()</div><div class=\"line\">CoIdentity(1).extend(x =&gt; x.extract() + 1)   # CoIdentity(2)</div></pre></td></tr></table></figure>\n<h1 id=\"Applicative-Functor\"><a href=\"#Applicative-Functor\" class=\"headerlink\" title=\"Applicative Functor\"></a>Applicative Functor</h1><p>ä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å®ç°</span></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.ap = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">xs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">acc, f</span>) =&gt;</span> acc.concat(xs.map(f)), [])</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç¤ºä¾‹</span></div><div class=\"line\">;[<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span>].ap([<span class=\"number\">1</span>]) <span class=\"comment\">// [2]</span></div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Arrays that you want to combine</span></div><div class=\"line\"><span class=\"keyword\">const</span> arg1 = [<span class=\"number\">1</span>, <span class=\"number\">3</span>]</div><div class=\"line\"><span class=\"keyword\">const</span> arg2 = [<span class=\"number\">4</span>, <span class=\"number\">5</span>]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// combining function - must be curried for this to work</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> partiallyAppliedAdds = [add].ap(arg1) <span class=\"comment\">// [(y) =&gt; 1 + y, (y) =&gt; 3 + y]</span></div></pre></td></tr></table></figure>\n<p>ç”±æ­¤å¾—åˆ°äº†ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œå¹¶ä¸”å¯ä»¥è°ƒç”¨ ap å‡½æ•°å¾—åˆ°ç»“æœ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">partiallyAppliedAdds.ap(arg2) <span class=\"comment\">// [5, 6, 7, 8]</span></div></pre></td></tr></table></figure>\n<h1 id=\"Applicative-Functor-1\"><a href=\"#Applicative-Functor-1\" class=\"headerlink\" title=\"Applicative Functor\"></a>Applicative Functor</h1><p>ä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å®ç°</span></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.ap = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">xs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">acc, f</span>) =&gt;</span> acc.concat(xs.map(f)), [])</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç¤ºä¾‹</span></div><div class=\"line\">;[<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span>].ap([<span class=\"number\">1</span>]) <span class=\"comment\">// [2]</span></div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Arrays that you want to combine</span></div><div class=\"line\"><span class=\"keyword\">const</span> arg1 = [<span class=\"number\">1</span>, <span class=\"number\">3</span>]</div><div class=\"line\"><span class=\"keyword\">const</span> arg2 = [<span class=\"number\">4</span>, <span class=\"number\">5</span>]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// combining function - must be curried for this to work</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> partiallyAppliedAdds = [add].ap(arg1) <span class=\"comment\">// [(y) =&gt; 1 + y, (y) =&gt; 3 + y]</span></div></pre></td></tr></table></figure>\n<h1 id=\"æ€å°„-Morphism\"><a href=\"#æ€å°„-Morphism\" class=\"headerlink\" title=\"æ€å°„ (Morphism)\"></a>æ€å°„ (Morphism)</h1><p>ä¸€ä¸ªå˜å½¢çš„å‡½æ•°ã€‚</p>\n<h1 id=\"è‡ªåŒæ€-Endomorphism\"><a href=\"#è‡ªåŒæ€-Endomorphism\" class=\"headerlink\" title=\"è‡ªåŒæ€ (Endomorphism)\"></a>è‡ªåŒæ€ (Endomorphism)</h1><p>è¾“å…¥è¾“å‡ºæ˜¯ç›¸åŒç±»å‹çš„å‡½æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// uppercase :: String -&gt; String</span></div><div class=\"line\"><span class=\"keyword\">const</span> uppercase = <span class=\"function\">(<span class=\"params\">str</span>) =&gt;</span> str.toUpperCase()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// decrement :: Number -&gt; Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> decrement = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x - <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<h1 id=\"åŒæ„-Isomorphism\"><a href=\"#åŒæ„-Isomorphism\" class=\"headerlink\" title=\"åŒæ„ (Isomorphism)\"></a>åŒæ„ (Isomorphism)</h1><p>ä¸ç”¨ç±»å‹å¯¹è±¡çš„å˜å½¢ï¼Œä¿æŒç»“æ„å¹¶ä¸”ä¸ä¸¢å¤±æ•°æ®ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªäºŒç»´åæ ‡æ—¢å¯ä»¥è¡¨ç¤ºä¸ºæ•°ç»„ [2, 3]ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºå¯¹è±¡ {x: 2, y: 3}ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// æä¾›å‡½æ•°åœ¨ä¸¤ç§ç±»å‹é—´äº’ç›¸è½¬æ¢</span></div><div class=\"line\"><span class=\"keyword\">const</span> pairToCoords = <span class=\"function\">(<span class=\"params\">pair</span>) =&gt;</span> (&#123;<span class=\"attr\">x</span>: pair[<span class=\"number\">0</span>], <span class=\"attr\">y</span>: pair[<span class=\"number\">1</span>]&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> coordsToPair = <span class=\"function\">(<span class=\"params\">coords</span>) =&gt;</span> [coords.x, coords.y]</div><div class=\"line\"></div><div class=\"line\">coordsToPair(pairToCoords([<span class=\"number\">1</span>, <span class=\"number\">2</span>])) <span class=\"comment\">// [1, 2]</span></div><div class=\"line\"></div><div class=\"line\">pairToCoords(coordsToPair(&#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span>&#125;)) <span class=\"comment\">// &#123;x: 1, y: 2&#125;</span></div></pre></td></tr></table></figure>\n<h1 id=\"Setoid\"><a href=\"#Setoid\" class=\"headerlink\" title=\"Setoid\"></a>Setoid</h1><p>æ‹¥æœ‰ equals å‡½æ•°çš„å¯¹è±¡ã€‚equals å¯ä»¥ç”¨æ¥å’Œå…¶å®ƒå¯¹è±¡æ¯”è¾ƒã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.equals = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\"><span class=\"keyword\">const</span> len = <span class=\"keyword\">this</span>.length</div><div class=\"line\"><span class=\"keyword\">if</span> (len !== arr.length) &#123;</div><div class=\"line\"><span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>[i] !== arr[i]) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>].equals([<span class=\"number\">1</span>, <span class=\"number\">2</span>])   <span class=\"comment\">// true</span></div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>].equals([<span class=\"number\">3</span>, <span class=\"number\">4</span>])   <span class=\"comment\">// false</span></div></pre></td></tr></table></figure>\n<h1 id=\"åŠç¾¤-Semigroup\"><a href=\"#åŠç¾¤-Semigroup\" class=\"headerlink\" title=\"åŠç¾¤ (Semigroup)\"></a>åŠç¾¤ (Semigroup)</h1><p>An object that has a concat function that combines it with another object of the same type.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">;[<span class=\"number\">1</span>].concat([<span class=\"number\">2</span>]) <span class=\"comment\">// [1, 2]</span></div></pre></td></tr></table></figure>\n<h1 id=\"Foldable\"><a href=\"#Foldable\" class=\"headerlink\" title=\"Foldable\"></a>Foldable</h1><p>An object that has a reduce function that can transform that object into some other type.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> sum = <span class=\"function\"><span class=\"params\">list</span> =&gt;</span> list.reduce(<span class=\"function\">(<span class=\"params\">account, value</span>) =&gt;</span> account + value, <span class=\"number\">0</span>)</div><div class=\"line\">sum([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])</div></pre></td></tr></table></figure>\n<h1 id=\"Traversbale\"><a href=\"#Traversbale\" class=\"headerlink\" title=\"Traversbale\"></a>Traversbale</h1><p>TODO</p>\n<h1 id=\"Type-Signatures\"><a href=\"#Type-Signatures\" class=\"headerlink\" title=\"Type Signatures\"></a>Type Signatures</h1><p>Often functions in JavaScript will include comments that indicate the types of their arguments and return values.</p>\n<p>Thereâ€™s quite a bit of variance across the community but they often follow the following patterns:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// functionName :: firstArgType -&gt; secondArgType -&gt; returnType</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// add :: Number -&gt; Number -&gt; Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// increment :: Number -&gt; Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> increment = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x + <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>If a function accepts another function as an argument it is wrapped in parentheses.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// call :: (a -&gt; b) -&gt; a -&gt; b</span></div><div class=\"line\"><span class=\"keyword\">const</span> call = <span class=\"function\">(<span class=\"params\">f</span>) =&gt;</span> (x) =&gt; f(x)</div></pre></td></tr></table></figure>\n<p>The letters a, b, c, d are used to signify that the argument can be of any type. The following version of map takes a function that transforms a value of some type a into another type b, an array of values of type a, and returns an array of values of type b.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// map :: (a -&gt; b) -&gt; [a] -&gt; [b]</span></div><div class=\"line\"><span class=\"keyword\">const</span> map = <span class=\"function\">(<span class=\"params\">f</span>) =&gt;</span> (list) =&gt; list.map(f)</div></pre></td></tr></table></figure>\n<p>Further reading</p>\n<ul>\n<li><a href=\"https://github.com/ramda/ramda/wiki/Type-Signatures\" target=\"_blank\" rel=\"external\">Ramdaâ€™s type signatures</a></li>\n<li><a href=\"https://drboolean.gitbooks.io/mostly-adequate-guide/content/ch7.html#whats-your-type\" target=\"_blank\" rel=\"external\">Mostly Adequate Guide</a></li>\n<li><a href=\"http://stackoverflow.com/questions/399312/what-is-hindley-milner/399392#399392\" target=\"_blank\" rel=\"external\">What is Hindley-Milner?</a> on Stack Overflow</li>\n</ul>\n<h1 id=\"Union-type\"><a href=\"#Union-type\" class=\"headerlink\" title=\"Union type\"></a>Union type</h1><p>A union type is the combination of two types together into another one.</p>\n<p>JS doesnâ€™t have static types but letâ€™s say we invent a type NumOrString which is a sum of String and Number.</p>\n<p>The + operator in JS works on strings and numbers so we can use this new type to describe its inputs and outputs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// add :: (NumOrString, NumOrString) -&gt; NumOrString</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b</div><div class=\"line\"></div><div class=\"line\">add(<span class=\"number\">1</span>, <span class=\"number\">2</span>) <span class=\"comment\">// Returns number 3</span></div><div class=\"line\">add(<span class=\"string\">'Foo'</span>, <span class=\"number\">2</span>) <span class=\"comment\">// Returns string \"Foo2\"</span></div><div class=\"line\">add(<span class=\"string\">'Foo'</span>, <span class=\"string\">'Bar'</span>) <span class=\"comment\">// Returns string \"FooBar\"</span></div></pre></td></tr></table></figure>\n<p>Union types are also known as algebraic types, tagged unions, or sum types.</p>\n<p>Thereâ€™s a couple libraries in JS which help with defining and using union types.</p>\n<ul>\n<li><a href=\"https://github.com/paldepind/union-type\" target=\"_blank\" rel=\"external\">union-type</a></li>\n<li><a href=\"https://github.com/fantasyland/daggy\" target=\"_blank\" rel=\"external\">daggy</a></li>\n</ul>\n<h1 id=\"Product-type\"><a href=\"#Product-type\" class=\"headerlink\" title=\"Product type\"></a>Product type</h1><p>A product type combines types together in a way youâ€™re probably more familiar with:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// point :: (Number, Number) -&gt; &#123;x: Number, y: Number&#125;</span></div><div class=\"line\"><span class=\"keyword\">const</span> point = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> (&#123;<span class=\"attr\">x</span>: x, <span class=\"attr\">y</span>: y&#125;)</div></pre></td></tr></table></figure>\n<p>Itâ€™s called a product because the total possible values of the data structure is the product of the different values.</p>\n<p>See also <a href=\"https://en.wikipedia.org/wiki/Set_theory\" target=\"_blank\" rel=\"external\">Set theory</a>.</p>\n<h1 id=\"Option\"><a href=\"#Option\" class=\"headerlink\" title=\"Option\"></a>Option</h1><p>Option is a union type with two cases often called Some and None.</p>\n<p>Option is useful for composing functions that might not return a value.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Naive definition</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">const</span> Some = <span class=\"function\">(<span class=\"params\">v</span>) =&gt;</span> (&#123;</div><div class=\"line\">        <span class=\"attr\">val</span>: v,</div><div class=\"line\">        map (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> Some(f(<span class=\"keyword\">this</span>.val))</div><div class=\"line\">        &#125;,</div><div class=\"line\">        chain (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> f(<span class=\"keyword\">this</span>.val)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">const</span> None = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> (&#123;</div><div class=\"line\">        map (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        chain (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// maybeProp :: (String, &#123;a&#125;) -&gt; Option a</span></div><div class=\"line\">    <span class=\"keyword\">const</span> maybeProp = <span class=\"function\">(<span class=\"params\">key, obj</span>) =&gt;</span> <span class=\"keyword\">typeof</span> obj[key] === <span class=\"string\">'undefined'</span> ? None() : Some(obj[key])</div></pre></td></tr></table></figure>\n<p>Use <code>chain</code> to sequence functions that return <code>Options</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getItem :: Cart -&gt; Option CartItem</span></div><div class=\"line\"><span class=\"keyword\">const</span> getItem = <span class=\"function\">(<span class=\"params\">cart</span>) =&gt;</span> maybeProp(<span class=\"string\">'item'</span>, cart)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getPrice :: Item -&gt; Option Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> getPrice = <span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> maybeProp(<span class=\"string\">'price'</span>, item)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getNestedPrice :: cart -&gt; Option a</span></div><div class=\"line\"><span class=\"keyword\">const</span> getNestedPrice = <span class=\"function\">(<span class=\"params\">cart</span>) =&gt;</span> getItem(obj).chain(getPrice)</div><div class=\"line\"></div><div class=\"line\">getNestedPrice(&#123;&#125;) <span class=\"comment\">// None()</span></div><div class=\"line\">getNestedPrice(&#123;<span class=\"attr\">item</span>: &#123;<span class=\"attr\">foo</span>: <span class=\"number\">1</span>&#125;&#125;) <span class=\"comment\">// None()</span></div><div class=\"line\">getNestedPrice(&#123;<span class=\"attr\">item</span>: &#123;<span class=\"attr\">price</span>: <span class=\"number\">9.99</span>&#125;&#125;) <span class=\"comment\">// Some(9.99)</span></div></pre></td></tr></table></figure>\n<p><code>Option</code> is also known as <code>Maybe</code>. <code>Some</code> is sometimes called <code>Just</code>. <code>None</code> is sometimes called <code>Nothing</code>.</p>\n<h1 id=\"Functional-Programming-Libraries-in-JavaScript\"><a href=\"#Functional-Programming-Libraries-in-JavaScript\" class=\"headerlink\" title=\"Functional Programming Libraries in JavaScript\"></a>Functional Programming Libraries in JavaScript</h1><ul>\n<li><a href=\"https://github.com/swannodette/mori\" target=\"_blank\" rel=\"external\">mori</a></li>\n<li><a href=\"https://github.com/facebook/immutable-js/\" target=\"_blank\" rel=\"external\">Immutable</a></li>\n<li><a href=\"https://github.com/ramda/ramda\" target=\"_blank\" rel=\"external\">Ramda</a></li>\n<li><a href=\"http://folktalejs.org/\" target=\"_blank\" rel=\"external\">Folktale</a></li>\n<li><a href=\"https://cwmyers.github.io/monet.js/\" target=\"_blank\" rel=\"external\">monet.js</a></li>\n<li><a href=\"https://github.com/lodash/lodash\" target=\"_blank\" rel=\"external\">lodash</a></li>\n<li><a href=\"https://github.com/jashkenas/underscore\" target=\"_blank\" rel=\"external\">Underscore.js</a></li>\n<li><a href=\"https://github.com/dtao/lazy.js\" target=\"_blank\" rel=\"external\">Lazy.js</a></li>\n<li><a href=\"https://github.com/sjsyrek/maryamyriameliamurphies.js\" target=\"_blank\" rel=\"external\">maryamyriameliamurphies.js</a></li>\n<li><a href=\"https://github.com/casualjavascript/haskell-in-es6\" target=\"_blank\" rel=\"external\">Haskell in ES6</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>// <a href=\"https://github.com/shfshanyue/fp-jargon-zh#arity\" target=\"_blank\" rel=\"external\">https://github.com/shfshanyue/fp-jargon-zh#arity</a></p>\n<h1 id=\"Arity\"><a href=\"#Arity\" class=\"headerlink\" title=\"Arity\"></a>Arity</h1><p>å‡½æ•°å‚æ•°çš„ä¸ªæ•°ã€‚æ¥è‡ªäºå•è¯ unary, binary, ternary ç­‰ç­‰ã€‚è¿™ä¸ªå•è¯æ˜¯ç”± -ary ä¸ -ity ä¸¤ä¸ªåç¼€æ‹¼æ¥è€Œæˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°è¢«ç§°ä¸ºäºŒå…ƒå‡½æ•°æˆ–è€…å®ƒçš„ arity æ˜¯2ã€‚å®ƒä¹Ÿè¢«é‚£äº›æ›´å–œæ¬¢å¸Œè…Šè¯æ ¹è€Œéæ‹‰ä¸è¯æ ¹çš„äººç§°ä¸º dyadicã€‚åŒæ ·åœ°ï¼Œå¸¦æœ‰å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°è¢«ç§°ä¸º variadicï¼Œè€ŒäºŒå…ƒå‡½æ•°åªèƒ½å¸¦ä¸¤ä¸ªå‚æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> sum = <span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b</div><div class=\"line\"><span class=\"keyword\">const</span> arity = sum.length</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'arity: '</span>, arity)</div></pre></td></tr></table></figure>\n<h1 id=\"é«˜é˜¶å‡½æ•°-Higher-Order-Function-HOF\"><a href=\"#é«˜é˜¶å‡½æ•°-Higher-Order-Function-HOF\" class=\"headerlink\" title=\"é«˜é˜¶å‡½æ•° (Higher-Order Function/HOF)\"></a>é«˜é˜¶å‡½æ•° (Higher-Order Function/HOF)</h1><p>ä»¥å‡½æ•°ä¸ºå‚æ•°æˆ–/å’Œè¿”å›å€¼</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> filter = <span class=\"function\">(<span class=\"params\">predicate, xs</span>) =&gt;</span> xs.filter(predicte)</div><div class=\"line\"><span class=\"keyword\">const</span> is = <span class=\"function\">(<span class=\"params\">type</span>) =&gt;</span> (x) =&gt; <span class=\"built_in\">Object</span>(x) <span class=\"keyword\">instanceof</span> type</div><div class=\"line\">filter(is(<span class=\"built_in\">Number</span>), [<span class=\"number\">0</span>, <span class=\"string\">'1'</span>, <span class=\"number\">2</span>, <span class=\"literal\">null</span>])</div></pre></td></tr></table></figure>\n<h1 id=\"åå‡½æ•°-Partial-Function\"><a href=\"#åå‡½æ•°-Partial-Function\" class=\"headerlink\" title=\"åå‡½æ•° (Partial Function)\"></a>åå‡½æ•° (Partial Function)</h1><p>å¯¹åŸå§‹å‡½æ•°é¢„è®¾å‚æ•°ä½œä¸ºä¸€ä¸ªæ–°çš„å‡½æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> partical = <span class=\"function\">(<span class=\"params\">f, ...args</span>) =&gt;</span> (...moreArgs) =&gt; f(...args, ...moreArgs)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add3 = <span class=\"function\">(<span class=\"params\">a, b, c</span>) =&gt;</span> a + b + c</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> fivePlus = partical(add3, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</div><div class=\"line\"></div><div class=\"line\">fivePlus(<span class=\"number\">4</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ä¹Ÿå¯ä»¥ä½¿ç”¨Function.prototype.bindå®ç°åå‡½æ•°</span></div><div class=\"line\"><span class=\"keyword\">const</span> add1More = add3.bind(<span class=\"literal\">null</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"æŸ¯é‡ŒåŒ–-Currying\"><a href=\"#æŸ¯é‡ŒåŒ–-Currying\" class=\"headerlink\" title=\"æŸ¯é‡ŒåŒ– (Currying)\"></a>æŸ¯é‡ŒåŒ– (Currying)</h1><p>è®²ä¸€ä¸ªå¤šå…ƒå‡½æ•°è½¬å˜ä¸ºä¸€å…ƒå‡½æ•°çš„è¿‡ç¨‹ã€‚æ¯å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä»…ä»…æ¥æ”¶ä¸€ä¸ª å‚æ•°å¹¶ä¸”è¿”å›å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç›´æ¥ä¼ é€’å®Œæ‰€æœ‰çš„å‚æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> sum = <span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b</div><div class=\"line\"><span class=\"keyword\">const</span> curriedSum = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> (b) =&gt; a + b</div><div class=\"line\"></div><div class=\"line\">curriedSum(<span class=\"number\">3</span>)(<span class=\"number\">4</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add2 = curriedSum(<span class=\"number\">2</span>)</div><div class=\"line\">add2(<span class=\"number\">10</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"è‡ªåŠ¨æŸ¯é‡ŒåŒ–-Auto-Currying\"><a href=\"#è‡ªåŠ¨æŸ¯é‡ŒåŒ–-Auto-Currying\" class=\"headerlink\" title=\"è‡ªåŠ¨æŸ¯é‡ŒåŒ– (Auto Currying)\"></a>è‡ªåŠ¨æŸ¯é‡ŒåŒ– (Auto Currying)</h1><p><code>lodash</code>, <code>understore</code>å’Œ<code>ramda</code>æœ‰<code>curry</code>å‡½æ•°å¯ä»¥è‡ªåŠ¨å®ŒæˆæŸ¯é‡ŒåŒ–</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y</div><div class=\"line\"><span class=\"keyword\">const</span> curriedAdd = _.curry(add)</div><div class=\"line\"></div><div class=\"line\">curriedAdd(<span class=\"number\">1</span>, <span class=\"number\">2</span>)</div><div class=\"line\">curriedAdd(<span class=\"number\">1</span>)(<span class=\"number\">2</span>)</div><div class=\"line\">curriedAdd(<span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<h3 id=\"è¿›ä¸€æ­¥é˜…è¯»\"><a href=\"#è¿›ä¸€æ­¥é˜…è¯»\" class=\"headerlink\" title=\"è¿›ä¸€æ­¥é˜…è¯»\"></a>è¿›ä¸€æ­¥é˜…è¯»</h3><ul>\n<li><a href=\"http://fr.umio.us/favoring-curry/\" target=\"_blank\" rel=\"external\">Favoring Curry</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=m3svKOdZijA\" target=\"_blank\" rel=\"external\">Hey Underscore, Youâ€™re Doing It Wrong!</a></li>\n</ul>\n<h1 id=\"å‡½æ•°ç»„åˆ-Function-Composing\"><a href=\"#å‡½æ•°ç»„åˆ-Function-Composing\" class=\"headerlink\" title=\"å‡½æ•°ç»„åˆ (Function Composing)\"></a>å‡½æ•°ç»„åˆ (Function Composing)</h1><p>æ¥æ”¶å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»å³åˆ°å·¦ï¼Œä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¾“å‡º</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\">(<span class=\"params\">f, g</span>) =&gt;</span> (a) =&gt; f(g(a))</div><div class=\"line\"><span class=\"keyword\">const</span> floorAndToString = compose(<span class=\"function\">(<span class=\"params\">val</span>) =&gt;</span> val.toString(), <span class=\"built_in\">Math</span>.floor)</div><div class=\"line\">floorAndToString(<span class=\"number\">12.12</span>)</div></pre></td></tr></table></figure>\n<p>Continuation</p>\n<p>åœ¨ä¸€ä¸ªç¨‹åºæ‰§è¡Œçš„ä»»æ„æ—¶åˆ», å°šæœªæ‰§è¡Œçš„ä»£ç æˆä¸ºContinuation.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> printAsString = <span class=\"function\">(<span class=\"params\">num</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`Given <span class=\"subst\">$&#123;num&#125;</span>`</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> addOneAndContinue = <span class=\"function\">(<span class=\"params\">num, cc</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> result = num + <span class=\"number\">1</span></div><div class=\"line\">    cc(result)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">andOneAndContinue(<span class=\"number\">2</span>, printAsString)</div></pre></td></tr></table></figure>\n<p>Continuation åœ¨å¼‚æ­¥ç¼–ç¨‹ä¸­å¾ˆå¸¸è§, æ¯”å¦‚å½“ç¨‹åºéœ€è¦æ¥æ”¶åˆ°æ•°æ®æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚è¯·æ±‚çš„ç›¸åº”åŒåŸä½œä¸ºä»£ç çš„å‰©ä½™æ‰§è¡Œéƒ¨åˆ†ï¼Œä¸€æ—¦æ¥æ”¶åˆ°æ•°æ®ï¼Œå¯¹æ•°æ®çš„å¤„ç†è¢«ä½œä¸ºContinuation.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> continueProgramWith = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;&#125;</div><div class=\"line\">readFileAsync(<span class=\"string\">'path/to/file'</span>, (response, error) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (error) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    continueProgramWith(response)</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<h1 id=\"çº¯å‡½æ•°-Purity\"><a href=\"#çº¯å‡½æ•°-Purity\" class=\"headerlink\" title=\"çº¯å‡½æ•° (Purity)\"></a>çº¯å‡½æ•° (Purity)</h1><p>è¾“å‡ºä»…ç”±è¾“å…¥å†³å®šï¼Œä¸”ä¸äº§ç”Ÿå‰¯ä½œç”¨ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> <span class=\"string\">`hello, <span class=\"subst\">$&#123;name&#125;</span>`</span></div><div class=\"line\">greet(<span class=\"string\">'world'</span>)</div></pre></td></tr></table></figure>\n<p>ä»¥ä¸€ä¸‹ä»£ç ä¸æ˜¯çº¯å‡½æ•°ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">window</span>.name = <span class=\"string\">'Brianne'</span></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`Hi, <span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.name&#125;</span>`</span> <span class=\"comment\">//å‡½æ•°ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€‚</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> greeting</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> &#123;</div><div class=\"line\">    greeting = <span class=\"string\">`Hi, <span class=\"subst\">$&#123;name&#125;</span>`</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">greet(<span class=\"string\">'Brianne'</span>)</div><div class=\"line\">greeting</div></pre></td></tr></table></figure>\n<h1 id=\"å‰¯ä½œç”¨-Side-effects\"><a href=\"#å‰¯ä½œç”¨-Side-effects\" class=\"headerlink\" title=\"å‰¯ä½œç”¨(Side effects)\"></a>å‰¯ä½œç”¨(Side effects)</h1><p>å¦‚æœå‡½æ•°ä¸å¤–éƒ¨å¯å˜çŠ¶æ€è¿›è¡Œäº¤äº’ï¼Œåˆ™å®ƒæ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> differentEveryTime = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'IO is a side effect!'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"å¹‚ç­‰è¡Œ-Idempotent\"><a href=\"#å¹‚ç­‰è¡Œ-Idempotent\" class=\"headerlink\" title=\"å¹‚ç­‰è¡Œ(Idempotent)\"></a>å¹‚ç­‰è¡Œ(Idempotent)</h1><p>å¦‚æœä¸€ä¸ªå‡½æ•°æ‰§è¡Œå¤šæ¬¡çš†è¿”å›ç›¸åŒçš„ç»“æœï¼Œåˆ™å®ƒæ˜¯å¹‚ç­‰æ€§çš„ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">f(f(x)) = f(x)</div><div class=\"line\"><span class=\"built_in\">Math</span>.abs(<span class=\"built_in\">Math</span>.abs(<span class=\"number\">10</span>))</div><div class=\"line\">sort(sort(sort([<span class=\"number\">2</span>, <span class=\"number\">1</span>])))</div></pre></td></tr></table></figure>\n<h1 id=\"Point-Free-é£æ ¼-Point-Free-Style\"><a href=\"#Point-Free-é£æ ¼-Point-Free-Style\" class=\"headerlink\" title=\"Point-Free é£æ ¼(Point-Free Style)\"></a>Point-Free é£æ ¼(Point-Free Style)</h1><p>å®šä¹‰å‡½æ•°æ—¶ï¼Œä¸æ˜¾å¼çš„æ”¯å‡ºå‡½æ•°æ‰€å¸¦å‚æ•°ã€‚è¿™ç§é£æ ¼é€šå¸¸éœ€è¦æŸ¯é‡ŒåŒ–æˆ–è€…é«˜é˜¶å‡½æ•°ã€‚ä¹Ÿå«Tacit programmingã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> map = <span class=\"function\">(<span class=\"params\">fn</span>) =&gt;</span> (list) =&gt; list.map(fn)</div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> (b) =&gt; a + b</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> incrementAll = <span class=\"function\">(<span class=\"params\">numbers</span>) =&gt;</span> map(add(<span class=\"number\">1</span>))(numbers)</div><div class=\"line\"><span class=\"keyword\">const</span> incrementAll2 = map(add(<span class=\"number\">1</span>))</div></pre></td></tr></table></figure>\n<h1 id=\"è°“è¯-Predicate\"><a href=\"#è°“è¯-Predicate\" class=\"headerlink\" title=\"è°“è¯ (Predicate)\"></a>è°“è¯ (Predicate)</h1><p>æ ¹æ®è¾“å…¥è¿”å›trueæˆ–false. é€šå¸¸ç”¨åœ¨Array.prototype.filterçš„å›è°ƒå‡½æ•°ä¸­ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> predicate = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a &gt; <span class=\"number\">2</span></div><div class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>].filter(predicate)</div></pre></td></tr></table></figure>\n<h1 id=\"å¥‘çº¦-Contracts\"><a href=\"#å¥‘çº¦-Contracts\" class=\"headerlink\" title=\"å¥‘çº¦ (Contracts)\"></a>å¥‘çº¦ (Contracts)</h1><p>å¥‘çº¦ä¿è¯äº†å‡½æ•°æˆ–è€…è¡¨è¾¾å¼åœ¨è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚å½“è¿åäº†å¥‘çº¦æ—¶ï¼Œå°†è·‘å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> contract  = <span class=\"function\">(<span class=\"params\">input</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> input === <span class=\"string\">'number'</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Contract Violated: expected int -&gt; int'</span>)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> addOne = <span class=\"function\">(<span class=\"params\">num</span>) =&gt;</span> contract(num) &amp;&amp; num + <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">addOne(<span class=\"number\">2</span>)</div><div class=\"line\">addOne(<span class=\"string\">'hello'</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"èŒƒç•´-Category\"><a href=\"#èŒƒç•´-Category\" class=\"headerlink\" title=\"èŒƒç•´ (Category)\"></a>èŒƒç•´ (Category)</h1><p>åœ¨èŒƒç•´è®ºä¸­ï¼ŒèŒƒç•´æ˜¯æŒ‡å¯¹è±¡é›†åˆåŠå®ƒä»¬ä¹‹é—´çš„æ€å°„ (morphism)ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ•°æ®ç±»å‹ä½œä¸ºå¯¹è±¡ï¼Œå‡½æ•°ä½œä¸ºæ€å°„ã€‚</p>\n<p>ä¸€ä¸ªæœ‰æ•ˆçš„èŒƒç•´éµä»ä»¥ä¸‹ä¸‰ä¸ªåŸåˆ™ï¼š</p>\n<ul>\n<li>å¿…æœ‰ä¸€ä¸ª identity æ€å°„ï¼Œä½¿å¾— map ä¸€ä¸ªå¯¹è±¡æ˜¯å®ƒè‡ªèº«ã€‚a æ˜¯èŒƒç•´é‡Œçš„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¿…æœ‰ä¸€ä¸ªå‡½æ•°ä½¿ a -&gt; aã€‚</li>\n<li>æ€å°„å¿…æ˜¯å¯ç»„åˆçš„ã€‚aï¼Œbï¼Œc æ˜¯èŒƒç•´é‡Œçš„å¯¹è±¡ï¼Œf æ˜¯æ€å°„ a -&gt; bï¼Œg æ˜¯ b -&gt; c æ€å°„ã€‚g(f(x)) ä¸€å®šä¸ (g â— f)(x)</li>\n<li>ç»„åˆæ»¡è¶³ç»“åˆå¾‹ã€‚f â— (g â— h) ä¸ (f â— g) â— h æ˜¯ç­‰ä»·çš„ã€‚</li>\n</ul>\n<p>è¿™äº›å‡†åˆ™æ˜¯éå¸¸æŠ½è±¡çš„ï¼ŒèŒƒç•´è®ºå¯¹ä¸å‘ç°ç»„åˆçš„æ–°æ–¹æ³•æ˜¯ä¼Ÿå¤§çš„ã€‚</p>\n<p>è¿›ä¸€æ­¥é˜…è¯»</p>\n<p><a href=\"https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/\" target=\"_blank\" rel=\"external\">Category Theory for Programmers</a></p>\n<h1 id=\"å€¼-Value\"><a href=\"#å€¼-Value\" class=\"headerlink\" title=\"å€¼ (Value)\"></a>å€¼ (Value)</h1><p>èµ‹å€¼ç»™å˜é‡çš„å€¼ç§°ä½œValue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"number\">5</span></div><div class=\"line\"><span class=\"built_in\">Object</span>.freeze(&#123;<span class=\"attr\">name</span>: <span class=\"string\">'John'</span>, <span class=\"attr\">age</span>: <span class=\"number\">30</span>&#125;)</div><div class=\"line\">;<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a</div><div class=\"line\">;[<span class=\"number\">1</span>]</div><div class=\"line\"><span class=\"literal\">undefined</span></div></pre></td></tr></table></figure>\n<h1 id=\"å¸¸é‡-Constant\"><a href=\"#å¸¸é‡-Constant\" class=\"headerlink\" title=\"å¸¸é‡ (Constant)\"></a>å¸¸é‡ (Constant)</h1><p>ä¸€æ—¦å®šä¹‰ä¸å¯é‡æ–°èµ‹å€¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> five = <span class=\"number\">5</span></div><div class=\"line\"><span class=\"keyword\">const</span> john = <span class=\"built_in\">Object</span>.freeze(&#123;<span class=\"attr\">name</span>: <span class=\"string\">'John'</span>, <span class=\"attr\">age</span>: <span class=\"number\">30</span>&#125;)</div></pre></td></tr></table></figure>\n<p>å¸¸é‡æ˜¯<a href=\"https://github.com/shfshanyue/fp-jargon-zh#referential-transparency\" target=\"_blank\" rel=\"external\">å¼•ç”¨é€æ˜</a>çš„ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«å®ƒä»¬æ‰€ä»£è¡¨çš„å€¼æ›¿ä»£è€Œä¸å½±å“ç»“æœã€‚</p>\n<p>å¯¹äºä»¥ä¸Šä¸¤ä¸ªå¸¸é‡ï¼Œä»¥ä¸‹è¯­å¥æ€»ä¼šè¿”å› trueã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">john.age + five === (&#123;<span class=\"attr\">name</span>: <span class=\"string\">'John'</span>, <span class=\"attr\">age</span>: <span class=\"number\">30</span>&#125;).age + (<span class=\"number\">5</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"å‡½å­-Functor\"><a href=\"#å‡½å­-Functor\" class=\"headerlink\" title=\"å‡½å­ (Functor)\"></a>å‡½å­ (Functor)</h1><p>ä¸€ä¸ªå®ç°äº†map å‡½æ•°çš„å¯¹è±¡ï¼Œmap ä¼šéå†å¯¹è±¡ä¸­çš„æ¯ä¸ªå€¼å¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚éµå®ˆä¸¤ä¸ªå‡†åˆ™</p>\n<h3 id=\"ä¸€è‡´æ€§-Preserves-identity\"><a href=\"#ä¸€è‡´æ€§-Preserves-identity\" class=\"headerlink\" title=\"ä¸€è‡´æ€§ (Preserves identity)\"></a>ä¸€è‡´æ€§ (Preserves identity)</h3><p>object.map(x =&gt; x) â‰ object</p>\n<h3 id=\"ç»„åˆæ€§-Composable\"><a href=\"#ç»„åˆæ€§-Composable\" class=\"headerlink\" title=\"ç»„åˆæ€§ (Composable)\"></a>ç»„åˆæ€§ (Composable)</h3><p>object.map(compose(f, g)) â‰ object.map(g).map(f)  // f, g ä¸ºä»»æ„å‡½æ•°<br>åœ¨ javascript ä¸­ä¸€ä¸ªå¸¸è§çš„å‡½å­æ˜¯ Array, å› ä¸ºå®ƒéµå®ˆå› å­çš„ä¸¤ä¸ªå‡†åˆ™ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> f = <span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x + <span class=\"number\">1</span></div><div class=\"line\"><span class=\"keyword\">const</span> g = <span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x * <span class=\"number\">2</span></div><div class=\"line\"></div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>].map(<span class=\"function\"><span class=\"params\">x</span> =&gt;</span> f(g(x)))</div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>].map(g).map(f)</div></pre></td></tr></table></figure>\n<h1 id=\"Pointed-Functor\"><a href=\"#Pointed-Functor\" class=\"headerlink\" title=\"Pointed Functor\"></a>Pointed Functor</h1><p>ä¸€ä¸ªå®ç°äº† of å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<p>ES2015 æ·»åŠ äº† Array.ofï¼Œä½¿ Array æˆä¸ºäº† Pointed Functorã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.of(<span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<h1 id=\"Lift\"><a href=\"#Lift\" class=\"headerlink\" title=\"Lift\"></a>Lift</h1><h1 id=\"å¼•ç”¨é€æ˜æ€§-Referential-Transparency\"><a href=\"#å¼•ç”¨é€æ˜æ€§-Referential-Transparency\" class=\"headerlink\" title=\"å¼•ç”¨é€æ˜æ€§ (Referential Transparency)\"></a>å¼•ç”¨é€æ˜æ€§ (Referential Transparency)</h1><p>ä¸€ä¸ªè¡¨è¾¾å¼èƒ½å¤Ÿè¢«å®ƒçš„å€¼æ›¿ä»£è€Œä¸æ”¹å˜ç¨‹åºçš„è¡Œä¸ºæˆä¸ºå¼•ç”¨é€æ˜ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> greet = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">'hello, world.'</span></div></pre></td></tr></table></figure>\n<h1 id=\"åŒ¿åå‡½æ•°-Lambda\"><a href=\"#åŒ¿åå‡½æ•°-Lambda\" class=\"headerlink\" title=\"åŒ¿åå‡½æ•° (Lambda)\"></a>åŒ¿åå‡½æ•° (Lambda)</h1><p>åŒ¿åå‡½æ•°è¢«è§†ä½œä¸€ä¸ªå€¼</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">;(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">a</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> a + <span class=\"number\">1</span></div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">;<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>åŒ¿åå‡½æ•°é€šå¸¸ä½œä¸ºé«˜é˜¶å‡½æ•°çš„å‚æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">[<span class=\"number\">1</span>, <span class=\"number\">2</span>].map(<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<p>å¯ä»¥æŠŠ Lambda èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> add1 = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<h1 id=\"Lambda-Caculus\"><a href=\"#Lambda-Caculus\" class=\"headerlink\" title=\"Lambda Caculus\"></a>Lambda Caculus</h1><p>æ•°å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä½¿ç”¨å‡½æ•°åˆ›é€  <a href=\"https://en.wikipedia.org/wiki/Lambda_calculus\" target=\"_blank\" rel=\"external\">é€šè¿‡è®¡ç®—æ¨¡å‹</a></p>\n<h1 id=\"æƒ°æ€§æ±‚å€¼-Lazy-evaluation\"><a href=\"#æƒ°æ€§æ±‚å€¼-Lazy-evaluation\" class=\"headerlink\" title=\"æƒ°æ€§æ±‚å€¼ (Lazy evaluation)\"></a>æƒ°æ€§æ±‚å€¼ (Lazy evaluation)</h1><p>æŒ‰éœ€æ±‚å€¼æœºåˆ¶ï¼Œåªæœ‰å½“éœ€è¦è®¡ç®—æ‰€å¾—å€¼æ—¶æ‰ä¼šè®¡ç®—</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> rand = <span class=\"function\"><span class=\"keyword\">function</span>* (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">yield</span> <span class=\"built_in\">Math</span>.random()</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> randIter = rand()</div><div class=\"line\">randIter.next()</div></pre></td></tr></table></figure>\n<h1 id=\"Monoid\"><a href=\"#Monoid\" class=\"headerlink\" title=\"Monoid\"></a>Monoid</h1><p>ä¸€ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªå‡½æ•°ç”¨æ¥è¿æ¥ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚</p>\n<p>æ•°å€¼åŠ æ³•æ˜¯ä¸€ä¸ªç®€å•çš„ Monoid<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span> + <span class=\"number\">1</span>   <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure></p>\n<p>ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œæ•°å€¼æ˜¯å¯¹è±¡è€Œ + æ˜¯å‡½æ•°ã€‚</p>\n<p>ä¸å¦ä¸€ä¸ªå€¼ç»“åˆè€Œä¸ä¼šæ”¹å˜å®ƒçš„å€¼å¿…é¡»å­˜åœ¨ï¼Œç§°ä¸º identityã€‚</p>\n<p>åŠ æ³•çš„ identity å€¼ä¸º 0:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span> + <span class=\"number\">0</span>   <span class=\"comment\">// 1</span></div></pre></td></tr></table></figure></p>\n<p>éœ€è¦æ»¡è¶³ç»“åˆå¾‹<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span> + (<span class=\"number\">2</span> + <span class=\"number\">3</span>) === (<span class=\"number\">1</span> + <span class=\"number\">2</span>) + <span class=\"number\">3</span> <span class=\"comment\">// true</span></div></pre></td></tr></table></figure></p>\n<p>æ•°ç»„çš„ç»“åˆä¹Ÿæ˜¯ Monoid<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>].concat([<span class=\"number\">3</span>, <span class=\"number\">4</span>])</div></pre></td></tr></table></figure></p>\n<p>identity å€¼ä¸ºç©ºæ•°ç»„</p>\n<p>;[1, 2].concat([])<br>identity ä¸ compose å‡½æ•°èƒ½å¤Ÿç»„æˆ monoid<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> identity = <span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a</div><div class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\">(<span class=\"params\">f, g</span>) =&gt;</span> (x) =&gt; f(g(x))</div></pre></td></tr></table></figure></p>\n<p>foo æ˜¯åªå¸¦ä¸€ä¸ªå‚æ•°çš„ä»»æ„å‡½æ•°<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">compose(foo, identity) â‰ compose(identity, foo) â‰ foo</div></pre></td></tr></table></figure></p>\n<h1 id=\"Monad\"><a href=\"#Monad\" class=\"headerlink\" title=\"Monad\"></a>Monad</h1><p>æ‹¥æœ‰ of å’Œ chain å‡½æ•°çš„å¯¹è±¡ã€‚chain å¾ˆåƒ mapï¼Œ é™¤äº†ç”¨æ¥é“ºå¹³åµŒå¥—æ•°æ®ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.chain = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">f</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">acc, it</span>) =&gt;</span> acc.concat(f(it)), [])</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ['cat', 'dog', 'fish', 'bird']</span></div><div class=\"line\">;<span class=\"built_in\">Array</span>.of(<span class=\"string\">'cat,dog'</span>, <span class=\"string\">'fish,bird'</span>).chain(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s.split(<span class=\"string\">','</span>))</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// [['cat', 'dog'], ['fish', 'bird']]</span></div><div class=\"line\">;<span class=\"built_in\">Array</span>.of(<span class=\"string\">'cat,dog'</span>, <span class=\"string\">'fish,bird'</span>).map(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s.split(<span class=\"string\">','</span>))</div></pre></td></tr></table></figure>\n<p>åœ¨æœ‰äº›è¯­è¨€ä¸­ï¼Œof ä¹Ÿç§°ä¸º returnï¼Œchain ä¹Ÿç§°ä¸º flatmap ä¸ bindã€‚</p>\n<h1 id=\"Comonad\"><a href=\"#Comonad\" class=\"headerlink\" title=\"Comonad\"></a>Comonad</h1><p>æ‹¥æœ‰ extract ä¸ extend å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">const CoIdentity = (v) =&gt; (&#123;</div><div class=\"line\">    val: v,</div><div class=\"line\">    extract () &#123;</div><div class=\"line\">        return this.val</div><div class=\"line\">    &#125;,</div><div class=\"line\">    extend (f) &#123;</div><div class=\"line\">        return CoIdentity(f(this))</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">CoIdentity(1).extract()</div><div class=\"line\">CoIdentity(1).extend(x =&gt; x.extract() + 1)   # CoIdentity(2)</div></pre></td></tr></table></figure>\n<h1 id=\"Applicative-Functor\"><a href=\"#Applicative-Functor\" class=\"headerlink\" title=\"Applicative Functor\"></a>Applicative Functor</h1><p>ä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å®ç°</span></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.ap = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">xs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">acc, f</span>) =&gt;</span> acc.concat(xs.map(f)), [])</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç¤ºä¾‹</span></div><div class=\"line\">;[<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span>].ap([<span class=\"number\">1</span>]) <span class=\"comment\">// [2]</span></div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Arrays that you want to combine</span></div><div class=\"line\"><span class=\"keyword\">const</span> arg1 = [<span class=\"number\">1</span>, <span class=\"number\">3</span>]</div><div class=\"line\"><span class=\"keyword\">const</span> arg2 = [<span class=\"number\">4</span>, <span class=\"number\">5</span>]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// combining function - must be curried for this to work</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> partiallyAppliedAdds = [add].ap(arg1) <span class=\"comment\">// [(y) =&gt; 1 + y, (y) =&gt; 3 + y]</span></div></pre></td></tr></table></figure>\n<p>ç”±æ­¤å¾—åˆ°äº†ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œå¹¶ä¸”å¯ä»¥è°ƒç”¨ ap å‡½æ•°å¾—åˆ°ç»“æœ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">partiallyAppliedAdds.ap(arg2) <span class=\"comment\">// [5, 6, 7, 8]</span></div></pre></td></tr></table></figure>\n<h1 id=\"Applicative-Functor-1\"><a href=\"#Applicative-Functor-1\" class=\"headerlink\" title=\"Applicative Functor\"></a>Applicative Functor</h1><p>ä¸€ä¸ªæ‹¥æœ‰ ap å‡½æ•°çš„å¯¹è±¡ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// å®ç°</span></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.ap = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">xs</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.reduce(<span class=\"function\">(<span class=\"params\">acc, f</span>) =&gt;</span> acc.concat(xs.map(f)), [])</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// ç¤ºä¾‹</span></div><div class=\"line\">;[<span class=\"function\">(<span class=\"params\">a</span>) =&gt;</span> a + <span class=\"number\">1</span>].ap([<span class=\"number\">1</span>]) <span class=\"comment\">// [2]</span></div></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶éœ€è¦å¯¹ä»–ä»¬çš„å…ƒç´ æ‰§è¡Œä¸€ä¸ªäºŒå…ƒå‡½æ•°</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Arrays that you want to combine</span></div><div class=\"line\"><span class=\"keyword\">const</span> arg1 = [<span class=\"number\">1</span>, <span class=\"number\">3</span>]</div><div class=\"line\"><span class=\"keyword\">const</span> arg2 = [<span class=\"number\">4</span>, <span class=\"number\">5</span>]</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// combining function - must be curried for this to work</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> partiallyAppliedAdds = [add].ap(arg1) <span class=\"comment\">// [(y) =&gt; 1 + y, (y) =&gt; 3 + y]</span></div></pre></td></tr></table></figure>\n<h1 id=\"æ€å°„-Morphism\"><a href=\"#æ€å°„-Morphism\" class=\"headerlink\" title=\"æ€å°„ (Morphism)\"></a>æ€å°„ (Morphism)</h1><p>ä¸€ä¸ªå˜å½¢çš„å‡½æ•°ã€‚</p>\n<h1 id=\"è‡ªåŒæ€-Endomorphism\"><a href=\"#è‡ªåŒæ€-Endomorphism\" class=\"headerlink\" title=\"è‡ªåŒæ€ (Endomorphism)\"></a>è‡ªåŒæ€ (Endomorphism)</h1><p>è¾“å…¥è¾“å‡ºæ˜¯ç›¸åŒç±»å‹çš„å‡½æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// uppercase :: String -&gt; String</span></div><div class=\"line\"><span class=\"keyword\">const</span> uppercase = <span class=\"function\">(<span class=\"params\">str</span>) =&gt;</span> str.toUpperCase()</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// decrement :: Number -&gt; Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> decrement = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x - <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<h1 id=\"åŒæ„-Isomorphism\"><a href=\"#åŒæ„-Isomorphism\" class=\"headerlink\" title=\"åŒæ„ (Isomorphism)\"></a>åŒæ„ (Isomorphism)</h1><p>ä¸ç”¨ç±»å‹å¯¹è±¡çš„å˜å½¢ï¼Œä¿æŒç»“æ„å¹¶ä¸”ä¸ä¸¢å¤±æ•°æ®ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªäºŒç»´åæ ‡æ—¢å¯ä»¥è¡¨ç¤ºä¸ºæ•°ç»„ [2, 3]ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºå¯¹è±¡ {x: 2, y: 3}ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// æä¾›å‡½æ•°åœ¨ä¸¤ç§ç±»å‹é—´äº’ç›¸è½¬æ¢</span></div><div class=\"line\"><span class=\"keyword\">const</span> pairToCoords = <span class=\"function\">(<span class=\"params\">pair</span>) =&gt;</span> (&#123;<span class=\"attr\">x</span>: pair[<span class=\"number\">0</span>], <span class=\"attr\">y</span>: pair[<span class=\"number\">1</span>]&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> coordsToPair = <span class=\"function\">(<span class=\"params\">coords</span>) =&gt;</span> [coords.x, coords.y]</div><div class=\"line\"></div><div class=\"line\">coordsToPair(pairToCoords([<span class=\"number\">1</span>, <span class=\"number\">2</span>])) <span class=\"comment\">// [1, 2]</span></div><div class=\"line\"></div><div class=\"line\">pairToCoords(coordsToPair(&#123;<span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span>&#125;)) <span class=\"comment\">// &#123;x: 1, y: 2&#125;</span></div></pre></td></tr></table></figure>\n<h1 id=\"Setoid\"><a href=\"#Setoid\" class=\"headerlink\" title=\"Setoid\"></a>Setoid</h1><p>æ‹¥æœ‰ equals å‡½æ•°çš„å¯¹è±¡ã€‚equals å¯ä»¥ç”¨æ¥å’Œå…¶å®ƒå¯¹è±¡æ¯”è¾ƒã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Array</span>.prototype.equals = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\"><span class=\"keyword\">const</span> len = <span class=\"keyword\">this</span>.length</div><div class=\"line\"><span class=\"keyword\">if</span> (len !== arr.length) &#123;</div><div class=\"line\"><span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; len; i++) &#123;</div><div class=\"line\"><span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>[i] !== arr[i]) &#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span></div><div class=\"line\">&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">return</span> <span class=\"literal\">true</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>].equals([<span class=\"number\">1</span>, <span class=\"number\">2</span>])   <span class=\"comment\">// true</span></div><div class=\"line\">;[<span class=\"number\">1</span>, <span class=\"number\">2</span>].equals([<span class=\"number\">3</span>, <span class=\"number\">4</span>])   <span class=\"comment\">// false</span></div></pre></td></tr></table></figure>\n<h1 id=\"åŠç¾¤-Semigroup\"><a href=\"#åŠç¾¤-Semigroup\" class=\"headerlink\" title=\"åŠç¾¤ (Semigroup)\"></a>åŠç¾¤ (Semigroup)</h1><p>An object that has a concat function that combines it with another object of the same type.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">;[<span class=\"number\">1</span>].concat([<span class=\"number\">2</span>]) <span class=\"comment\">// [1, 2]</span></div></pre></td></tr></table></figure>\n<h1 id=\"Foldable\"><a href=\"#Foldable\" class=\"headerlink\" title=\"Foldable\"></a>Foldable</h1><p>An object that has a reduce function that can transform that object into some other type.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> sum = <span class=\"function\"><span class=\"params\">list</span> =&gt;</span> list.reduce(<span class=\"function\">(<span class=\"params\">account, value</span>) =&gt;</span> account + value, <span class=\"number\">0</span>)</div><div class=\"line\">sum([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>])</div></pre></td></tr></table></figure>\n<h1 id=\"Traversbale\"><a href=\"#Traversbale\" class=\"headerlink\" title=\"Traversbale\"></a>Traversbale</h1><p>TODO</p>\n<h1 id=\"Type-Signatures\"><a href=\"#Type-Signatures\" class=\"headerlink\" title=\"Type Signatures\"></a>Type Signatures</h1><p>Often functions in JavaScript will include comments that indicate the types of their arguments and return values.</p>\n<p>Thereâ€™s quite a bit of variance across the community but they often follow the following patterns:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// functionName :: firstArgType -&gt; secondArgType -&gt; returnType</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// add :: Number -&gt; Number -&gt; Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// increment :: Number -&gt; Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> increment = <span class=\"function\">(<span class=\"params\">x</span>) =&gt;</span> x + <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>If a function accepts another function as an argument it is wrapped in parentheses.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// call :: (a -&gt; b) -&gt; a -&gt; b</span></div><div class=\"line\"><span class=\"keyword\">const</span> call = <span class=\"function\">(<span class=\"params\">f</span>) =&gt;</span> (x) =&gt; f(x)</div></pre></td></tr></table></figure>\n<p>The letters a, b, c, d are used to signify that the argument can be of any type. The following version of map takes a function that transforms a value of some type a into another type b, an array of values of type a, and returns an array of values of type b.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// map :: (a -&gt; b) -&gt; [a] -&gt; [b]</span></div><div class=\"line\"><span class=\"keyword\">const</span> map = <span class=\"function\">(<span class=\"params\">f</span>) =&gt;</span> (list) =&gt; list.map(f)</div></pre></td></tr></table></figure>\n<p>Further reading</p>\n<ul>\n<li><a href=\"https://github.com/ramda/ramda/wiki/Type-Signatures\" target=\"_blank\" rel=\"external\">Ramdaâ€™s type signatures</a></li>\n<li><a href=\"https://drboolean.gitbooks.io/mostly-adequate-guide/content/ch7.html#whats-your-type\" target=\"_blank\" rel=\"external\">Mostly Adequate Guide</a></li>\n<li><a href=\"http://stackoverflow.com/questions/399312/what-is-hindley-milner/399392#399392\" target=\"_blank\" rel=\"external\">What is Hindley-Milner?</a> on Stack Overflow</li>\n</ul>\n<h1 id=\"Union-type\"><a href=\"#Union-type\" class=\"headerlink\" title=\"Union type\"></a>Union type</h1><p>A union type is the combination of two types together into another one.</p>\n<p>JS doesnâ€™t have static types but letâ€™s say we invent a type NumOrString which is a sum of String and Number.</p>\n<p>The + operator in JS works on strings and numbers so we can use this new type to describe its inputs and outputs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// add :: (NumOrString, NumOrString) -&gt; NumOrString</span></div><div class=\"line\"><span class=\"keyword\">const</span> add = <span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a + b</div><div class=\"line\"></div><div class=\"line\">add(<span class=\"number\">1</span>, <span class=\"number\">2</span>) <span class=\"comment\">// Returns number 3</span></div><div class=\"line\">add(<span class=\"string\">'Foo'</span>, <span class=\"number\">2</span>) <span class=\"comment\">// Returns string \"Foo2\"</span></div><div class=\"line\">add(<span class=\"string\">'Foo'</span>, <span class=\"string\">'Bar'</span>) <span class=\"comment\">// Returns string \"FooBar\"</span></div></pre></td></tr></table></figure>\n<p>Union types are also known as algebraic types, tagged unions, or sum types.</p>\n<p>Thereâ€™s a couple libraries in JS which help with defining and using union types.</p>\n<ul>\n<li><a href=\"https://github.com/paldepind/union-type\" target=\"_blank\" rel=\"external\">union-type</a></li>\n<li><a href=\"https://github.com/fantasyland/daggy\" target=\"_blank\" rel=\"external\">daggy</a></li>\n</ul>\n<h1 id=\"Product-type\"><a href=\"#Product-type\" class=\"headerlink\" title=\"Product type\"></a>Product type</h1><p>A product type combines types together in a way youâ€™re probably more familiar with:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// point :: (Number, Number) -&gt; &#123;x: Number, y: Number&#125;</span></div><div class=\"line\"><span class=\"keyword\">const</span> point = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> (&#123;<span class=\"attr\">x</span>: x, <span class=\"attr\">y</span>: y&#125;)</div></pre></td></tr></table></figure>\n<p>Itâ€™s called a product because the total possible values of the data structure is the product of the different values.</p>\n<p>See also <a href=\"https://en.wikipedia.org/wiki/Set_theory\" target=\"_blank\" rel=\"external\">Set theory</a>.</p>\n<h1 id=\"Option\"><a href=\"#Option\" class=\"headerlink\" title=\"Option\"></a>Option</h1><p>Option is a union type with two cases often called Some and None.</p>\n<p>Option is useful for composing functions that might not return a value.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Naive definition</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">const</span> Some = <span class=\"function\">(<span class=\"params\">v</span>) =&gt;</span> (&#123;</div><div class=\"line\">        <span class=\"attr\">val</span>: v,</div><div class=\"line\">        map (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> Some(f(<span class=\"keyword\">this</span>.val))</div><div class=\"line\">        &#125;,</div><div class=\"line\">        chain (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> f(<span class=\"keyword\">this</span>.val)</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">const</span> None = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> (&#123;</div><div class=\"line\">        map (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        chain (f) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// maybeProp :: (String, &#123;a&#125;) -&gt; Option a</span></div><div class=\"line\">    <span class=\"keyword\">const</span> maybeProp = <span class=\"function\">(<span class=\"params\">key, obj</span>) =&gt;</span> <span class=\"keyword\">typeof</span> obj[key] === <span class=\"string\">'undefined'</span> ? None() : Some(obj[key])</div></pre></td></tr></table></figure>\n<p>Use <code>chain</code> to sequence functions that return <code>Options</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getItem :: Cart -&gt; Option CartItem</span></div><div class=\"line\"><span class=\"keyword\">const</span> getItem = <span class=\"function\">(<span class=\"params\">cart</span>) =&gt;</span> maybeProp(<span class=\"string\">'item'</span>, cart)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getPrice :: Item -&gt; Option Number</span></div><div class=\"line\"><span class=\"keyword\">const</span> getPrice = <span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> maybeProp(<span class=\"string\">'price'</span>, item)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// getNestedPrice :: cart -&gt; Option a</span></div><div class=\"line\"><span class=\"keyword\">const</span> getNestedPrice = <span class=\"function\">(<span class=\"params\">cart</span>) =&gt;</span> getItem(obj).chain(getPrice)</div><div class=\"line\"></div><div class=\"line\">getNestedPrice(&#123;&#125;) <span class=\"comment\">// None()</span></div><div class=\"line\">getNestedPrice(&#123;<span class=\"attr\">item</span>: &#123;<span class=\"attr\">foo</span>: <span class=\"number\">1</span>&#125;&#125;) <span class=\"comment\">// None()</span></div><div class=\"line\">getNestedPrice(&#123;<span class=\"attr\">item</span>: &#123;<span class=\"attr\">price</span>: <span class=\"number\">9.99</span>&#125;&#125;) <span class=\"comment\">// Some(9.99)</span></div></pre></td></tr></table></figure>\n<p><code>Option</code> is also known as <code>Maybe</code>. <code>Some</code> is sometimes called <code>Just</code>. <code>None</code> is sometimes called <code>Nothing</code>.</p>\n<h1 id=\"Functional-Programming-Libraries-in-JavaScript\"><a href=\"#Functional-Programming-Libraries-in-JavaScript\" class=\"headerlink\" title=\"Functional Programming Libraries in JavaScript\"></a>Functional Programming Libraries in JavaScript</h1><ul>\n<li><a href=\"https://github.com/swannodette/mori\" target=\"_blank\" rel=\"external\">mori</a></li>\n<li><a href=\"https://github.com/facebook/immutable-js/\" target=\"_blank\" rel=\"external\">Immutable</a></li>\n<li><a href=\"https://github.com/ramda/ramda\" target=\"_blank\" rel=\"external\">Ramda</a></li>\n<li><a href=\"http://folktalejs.org/\" target=\"_blank\" rel=\"external\">Folktale</a></li>\n<li><a href=\"https://cwmyers.github.io/monet.js/\" target=\"_blank\" rel=\"external\">monet.js</a></li>\n<li><a href=\"https://github.com/lodash/lodash\" target=\"_blank\" rel=\"external\">lodash</a></li>\n<li><a href=\"https://github.com/jashkenas/underscore\" target=\"_blank\" rel=\"external\">Underscore.js</a></li>\n<li><a href=\"https://github.com/dtao/lazy.js\" target=\"_blank\" rel=\"external\">Lazy.js</a></li>\n<li><a href=\"https://github.com/sjsyrek/maryamyriameliamurphies.js\" target=\"_blank\" rel=\"external\">maryamyriameliamurphies.js</a></li>\n<li><a href=\"https://github.com/casualjavascript/haskell-in-es6\" target=\"_blank\" rel=\"external\">Haskell in ES6</a></li>\n</ul>\n"},{"layout":"post","title":"Mobx","subtitle":"Mobx","date":"2017-03-16T16:00:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n# è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\n[GitHub MobxTemplate](https://github.com/AsherJia/MobxTemplate){:target=\"_blank\"}\n\n# FRP\n\n> The essence of functional reactive programming is to specify the dynamic behavior of a value completely\n> at the time of declaration. -- Heinrich Apfelmus\n\næ‰€ä»¥ï¼ŒFRP çš„æœ¬è´¨æ˜¯ï¼Œåœ¨å£°æ˜ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼ŒåŒæ—¶æŒ‡å®šä»–çš„åŠ¨æ€è¡Œä¸ºã€‚è¿™ä¸ªå€¼å¯èƒ½æ˜¯äº‹ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°æ®ã€‚\n\n# åˆ†æ”¯\n\nç„¶å FRP æœ‰ä¸¤ä¸ªé‡è¦çš„åˆ†æ”¯ï¼š\n\n* åŸºäº Event Stream çš„ FRP\n* Transparent FRP (TFRP)\n\nåŸºäº Event Stream çš„ FRP æ“…é•¿äºç®¡ç† Streamï¼Œå¯è¿›è¡Œ Joining, splitting, merging, mapping, sampling ç­‰ç­‰ã€‚åœ¨éœ€è¦å¤„ç†å¤šä¸ª Event Stream çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œä½†å¯¹äºç®€å•åœºæ™¯æ¥è¯´ï¼Œå°±è¿‡äºå¤æ‚äº†ã€‚æ¯”å¦‚ RxJS å’Œ BaconJS å°±å±äºæ­¤ç±»ã€‚\n\nTransparent FRP æ˜¯åœ¨èƒŒåå»å®ç° Reactive Programming ã€‚å’Œ Event Stream çš„ FRP ä¸€æ ·ï¼ŒTFRP ä¼šåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–° Viewï¼Œä¸åŒçš„æ˜¯ TFRP ä¸éœ€è¦ä½ å®šä¹‰å¦‚ä½• (How) ä»¥åŠä½•æ—¶ (When) æ›´æ–°ã€‚è¿™ä¸€ç±»å‹çš„æ¡†æ¶æœ‰ Meter(Tracker)ï¼ŒknockoutJS å’Œ EmberJS ã€‚\n\né‚£ä¹ˆå·²ç»æœ‰è¿™ä¹ˆå¤šå®ç°äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰ Mobx ?\n\n# Mobx\n\nMobx å’Œå…¶ä»–å®ç°æœ‰äº›ä¸åŒã€‚\n\n* åŒæ­¥æ‰§è¡Œ (è¿™æ ·ç›‘å¬çš„å€¼å§‹ç»ˆæ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”è°ƒè¯•ä¼šæ–¹ä¾¿ï¼Œå› ä¸ºæ²¡æœ‰é¢å¤–çš„ Promise/Async åº“å¼•å…¥çš„å †æ ˆä¿¡æ¯)\n* æ²¡æœ‰å¼•å…¥é¢å¤–çš„æ•°æ®ç»“æ„ï¼ŒåŸºäºæ™®é€šçš„ Object, Class, Array å®ç° (æ›´å°‘å­¦ä¹ æˆæœ¬ï¼Œæ›´æ–°æ•°æ®æ—¶æ›´è‡ªç„¶)\n* ç‹¬ç«‹æ–¹æ¡ˆ (ä¸æ†ç»‘æ¡†æ¶ï¼Œç›¸æ¯” Meter, EmberJS å’Œ VueJS è€Œè¨€)\n\n# åŸºæœ¬åŸç†\n\nè€Œè¦ç†è§£ mobx çš„åŸç†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´åº•å±‚çš„ä¾‹å­ã€‚\n\n```javascript\n\nimport { observable, autorun } from 'mobx';\n\nconst counter = observable(0);\nautorun(() => {\nconsole.log('autorun', counter.get());\n});\n\ncounter.set(1);\n\n```\n\nè¿è¡Œç»“æœ:\n\n```javascript\n\nautorun 0\nautorun 1\n\n```\n\nå¤§å®¶å¯èƒ½ä¼šå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆ `counter.set()` ä¹‹åï¼Œ`autorun` ä¼šè‡ªåŠ¨æ‰§è¡Œ? è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œé€šè¿‡ `counter` éœ€è¦çŸ¥é“ `autorun` æ˜¯ä¾èµ–ä»–çš„ã€‚é‚£ä¹ˆè¿™ä¸ªä¾èµ–å…³ç³»æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ä»¥åŠå¦‚ä½•ç”Ÿæˆçš„å‘¢?\n\nå…ˆçœ‹ä»£ç ï¼Œè¿™é‡Œæ¶‰åŠäº† `mobx` çš„ `observable` å’Œ `autorun` æ¥å£ã€‚ä¸æ­¤ç›¸å…³çš„æœ‰ `Observable` å’Œ `Derivation` ä¸¤ä¸ªç±»ã€‚ `Observable` æ˜¯æ•°æ®æºï¼Œ`Derivation` æ˜¯æ¨å¯¼ã€‚\n\nç±»å®šä¹‰å¦‚ä¸‹ï¼š\n\n```javascript\n\nObservable\n  - observing: [Derivation]\n  - get()\n  - set()\n\nDerivation\n  - observer: [Observable]\n\n```\n\nç„¶åï¼Œ`autorun`æ‰§è¡Œçš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š\n\n* ç”Ÿæˆä¸€ä¸ªDerivation\n* æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving\n    * æ€ä¹ˆè®¡ç®—ï¼Ÿè®¿é—®æ•°æ®æ˜¯ä¼šèµ°åˆ°Observableçš„getæ–¹æ³•ï¼Œé€šè¿‡getæ–¹æ³•åšè®°å½•\n* åœ¨observingçš„Observableçš„observeré‡Œæ·»åŠ è¿™ä¸ªDerivation\n\nåˆ°è¿™é‡Œï¼ŒObservableå’ŒDerivationçš„ä¾èµ–å…³è”å°±ç®€å†èµ·æ¥äº†ã€‚\n\né‚£ä¹ˆï¼Œ`counter.set()`æ‰§è¡Œä¹‹åæ˜¯å¦‚ä½•è§¦å‘`autorun`çš„è‡ªåŠ¨æ‰§è¡Œï¼Ÿåœ¨æœ‰äº†ä¸Šé¢è¿™ä¸€å±‚ä¾èµ–å…³ç³»ä¹‹åï¼Œè¿™ä¸ªå°±å¾ˆå¥½ç†è§£äº†ã€‚counter.set()æ‰§è¡Œæ—¶ä¼šä»è‡ªå·±çš„observingå±æ€§é‡Œå–ä¾èµ–ä»–çš„Derivation,å¹¶è§¦å‘ä»–ä»¬çš„é‡æ–°æ‰§è¡Œã€‚\n\n\n# è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\n\n```javascript\n\nimport { observable, autorun } from 'mobx'\n\nconst counter = observable(0)\nconst foo = observalbe(0)\nconst bar = observable(0)\n\nautorun(() => {\n    if (counter.get() === 0) {\n        console.log('foo ', foo.get())\n    } else {\n        console.log('bar ', bar.get())\n    }\n})\n\nbar.set(10)  // no console log\ncounter.set(1) // trigger autorun\nfoo.set(100) // no console log\nbar.set(100) // trigger autorun\n\n```\n\nå®é™…ä¸Šå‰é¢çš„`autorun`çš„æ‰§è¡Œæ­¥éª¤æ˜¯åšäº†ç®€åŒ–çš„ï¼ŒçœŸå®ï¼š\n\n* ç”ŸæˆDerivation\n* è®°å½•oldObserving(+)\n* æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving\n    * è®¿é—®æ•°æ®æ—¶ä¼šèµ°åˆ°Obdervableçš„get()æ–¹æ³•ï¼Œé€šè¿‡get()æ–¹æ³•åšçš„è®°å½•\n* å’ŒoldObdervingåšdiff, å¾—åˆ°æ–°å¢å’Œåˆ é™¤åˆ—è¡¨\n* é€šè¿‡å‰é¢å¾—åˆ°çš„diffç»“æœï¼Œä¿®æ”¹Observableçš„observing\n\nç›¸æ¯”ä¹‹å‰çš„ï¼Œå¢åŠ äº†diffçš„é€»è¾‘ï¼Œä»¥è¾¾åˆ°æ¯æ¬¡æ‰§è¡Œæ—¶å€™åŠ¨æ€æ›´æ–°ä¾èµ–å…³ç³»è¡¨çš„ç›®çš„ã€‚\n\n# get/set magic\n\nå¤§å®¶åœ¨çœ‹å‰é¢çš„ä¾‹å­é‡Œå¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œä¸ºå•¥ç¬¬ä¸€ä¸ªä¾‹å­é‡Œå¯ä»¥é€šè¿‡ appState.counter æ¥è®¾ç½®ï¼Œè€Œåé¢çš„ä¾‹å­é‡Œéœ€è¦ç”¨ counter.get å’Œ counter.set æ¥å–å€¼å’Œè®¾å€¼?\n\nè¿™å’Œæ•°æ®ç±»å‹æœ‰å…³ï¼Œmobx æ”¯æŒçš„ç±»å‹æœ‰ primitives, arrays, classes å’Œ objects ã€‚primitives (åŸå§‹ç±»å‹) åªèƒ½é€šè¿‡ set å’Œ get æ–¹æ³•å–å€¼å’Œè®¾å€¼ã€‚è€Œ Object åˆ™å¯ä»¥åˆ©ç”¨ Object.defineProperty æ–¹æ³•è‡ªå®šä¹‰ getter å’Œ setter ã€‚\n\n```javascript\n\nObject.defineProperty(adm.target, propName, {\n    configurable: true,\n    enumerable: !isComputed,\n    get: function() {\n        return observable.get();\n    },\n    set: isComputed\n        ? throwingComputedValueSetter\n        : createSetter(adm, observable as ObservableValue<any>, propName)\n});\n\n```\nè¯¦è§[æºç ](https://github.com/mobxjs/mobx/blob/44a86f45170d52368858d27ea3bc77ed583a58fa/src/types/observableobject.ts#L108-L117)\n\n# ComputedValue\n\nComputedValue åŒæ—¶å®ç°äº† Observable å’Œ Derivation çš„æ¥å£ï¼Œå³å¯ä»¥ç›‘å¬ Observableï¼Œä¹Ÿå¯ä»¥è¢« Derivation ç›‘å¬ã€‚\n\n# Reaction\n\nReaction æœ¬è´¨ä¸Šæ˜¯ Derivationï¼Œä½†ä»–ä¸èƒ½å†è¢«å…¶ä»– Derivation ç›‘å¬ã€‚\n\n# Autorun\n\nautorun æ˜¯ Reaction çš„[ç®€å•å°è£…](https://github.com/mobxjs/mobx/blob/e195b01d0dd6516480c76a6e952dda206e612a31/src/api/autorun.ts#L14-L27)ã€‚\n\n```javascript\n\nexport function autorun(view: Lambda, scope?: any) {\n\tassertUnwrapped(view, \"autorun methods cannot have modifiers\");\n\tinvariant(typeof view === \"function\", \"autorun expects a function\");\n\tinvariant(view.length === 0, \"autorun expects a function without arguments\");\n\tif (scope)\n\t\tview = view.bind(scope);\n\n\tconst reaction = new Reaction(view.name || (\"Autorun@\" + getNextId()), function () {\n\t\tthis.track(view);\n\t});\n\treaction.schedule();\n\n\treturn reaction.getDisposer();\n}\n\n```\n\n# åŒæ­¥æ‰§è¡Œ\n\nå…¶ä»–çš„ TFRP ç±»åº“ï¼Œæ¯”å¦‚ Tracker å’Œ Knockout ï¼Œæ•°æ®æ›´æ–°åçš„æ‰§è¡Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ç­‰åˆ°ä¸‹ä¸€ä¸ª event loop ã€‚(å¯ä»¥æƒ³è±¡æˆ setTimeout)\n\nè€Œ Mobx çš„æ‰§è¡Œæ˜¯åŒæ­¥çš„ï¼Œè¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š\n\n* ComputedValue åœ¨ä»–ä¾èµ–çš„å€¼ä¿®æ”¹åå¯ä»¥é©¬ä¸Šè¢«ä½¿ç”¨ï¼Œè¿™æ ·ä½ å°±æ°¸è¿œä¸ä¼šä½¿ç”¨ä¸€ä¸ªè¿‡æœŸçš„ ComputedValue\n* è°ƒè¯•æ–¹ä¾¿ï¼Œå †æ ˆé‡Œæ²¡æœ‰å†—ä½™çš„ Promise / async åº“\n\n# Transation\n\nç”±äº mobx çš„æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥æ¯ set ä¸€ä¸ªå€¼ï¼Œå°±ä¼šè§¦å‘ reaction çš„æ›´æ–°ã€‚æ‰€ä»¥ä¸ºäº†æ‰¹é‡æ›´æ–°ï¼Œå°±å¼•å…¥äº† transation ã€‚\n\n```javascript\n\ntransaction(() => {\n  user.firstName = \"foo\";\n  user.lastName = \"bar\";\n});\n\n```\n\nåœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç­‰æ‰€æœ‰çš„ä¿®æ”¹æ‰§è¡Œå®Œå†æ‰§è¡Œæ‰€æœ‰çš„ deviration ä¼šæ›´åˆé€‚ã€‚æ³¨æ„ transaction åªæ˜¯æ¨è¿Ÿäº† deviration çš„æ‰§è¡Œï¼Œæœ¬èº«è¿˜æ˜¯åŒæ­¥çš„ã€‚\n\n# Action\n\naction æ˜¯ transation æ˜¯ç®€å•å°è£…ï¼Œæ”¯æŒé€šè¿‡ decorator çš„æ–¹å¼è°ƒç”¨ã€‚å¹¶ä¸”æ˜¯ untrack çš„ï¼Œè¿™æ ·å¯ä»¥åœ¨ Derivation é‡Œè°ƒç”¨ä»–ã€‚\n\n# Observe(mobx-react)\n\nç¬¬ä¸€æ¬¡renderæ—¶ï¼š\n    * åˆå§‹åŒ–ä¸€ä¸ª Reactionï¼ŒonValidate æ—¶ä¼š forceUpdate Component\n    * åœ¨ reaction.track é‡Œæ‰§è¡Œ baseRenderï¼Œå»ºç«‹ä¾èµ–å…³ç³»\n\næœ‰æ•°æ®ä¿®æ”¹æ—¶ï¼š\n    * è§¦å‘ onValidate æ–¹æ³•ï¼Œæ‰§è¡Œ forceUpdate\n    * è§¦å‘ render çš„æ‰§è¡Œ (ç”±äºåœ¨ reaction.track é‡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä¼šé‡æ–°å»ºç«‹ä¾èµ–å…³ç³»)\n\nshouldComponentUpdateï¼š\n\n    * å’Œ PureRenderMixin ç±»ä¼¼çš„å®ç°ï¼Œé˜»æ­¢ä¸å¿…è¦çš„æ›´æ–°\n\ncomponentWillReact:\n\n    * æ•°æ®æ›´æ–°çš„æ—¶å€™è§¦å‘\n    * æ³¨æ„å’Œ componentWillMount å’Œ componentWillUpdate çš„åŒºåˆ«\n\n[https://github.com/mobxjs/mobx](https://github.com/mobxjs/mobx)\n[https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk](https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk)\n","source":"_posts/2017-03-17-mobx.markdown","raw":"---\nlayout:     post\ntitle:      \"Mobx\"\nsubtitle:   \"Mobx\"\ndate:       2017-03-17\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Mobx\n---\n\n# è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\n[GitHub MobxTemplate](https://github.com/AsherJia/MobxTemplate){:target=\"_blank\"}\n\n# FRP\n\n> The essence of functional reactive programming is to specify the dynamic behavior of a value completely\n> at the time of declaration. -- Heinrich Apfelmus\n\næ‰€ä»¥ï¼ŒFRP çš„æœ¬è´¨æ˜¯ï¼Œåœ¨å£°æ˜ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼ŒåŒæ—¶æŒ‡å®šä»–çš„åŠ¨æ€è¡Œä¸ºã€‚è¿™ä¸ªå€¼å¯èƒ½æ˜¯äº‹ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°æ®ã€‚\n\n# åˆ†æ”¯\n\nç„¶å FRP æœ‰ä¸¤ä¸ªé‡è¦çš„åˆ†æ”¯ï¼š\n\n* åŸºäº Event Stream çš„ FRP\n* Transparent FRP (TFRP)\n\nåŸºäº Event Stream çš„ FRP æ“…é•¿äºç®¡ç† Streamï¼Œå¯è¿›è¡Œ Joining, splitting, merging, mapping, sampling ç­‰ç­‰ã€‚åœ¨éœ€è¦å¤„ç†å¤šä¸ª Event Stream çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œä½†å¯¹äºç®€å•åœºæ™¯æ¥è¯´ï¼Œå°±è¿‡äºå¤æ‚äº†ã€‚æ¯”å¦‚ RxJS å’Œ BaconJS å°±å±äºæ­¤ç±»ã€‚\n\nTransparent FRP æ˜¯åœ¨èƒŒåå»å®ç° Reactive Programming ã€‚å’Œ Event Stream çš„ FRP ä¸€æ ·ï¼ŒTFRP ä¼šåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–° Viewï¼Œä¸åŒçš„æ˜¯ TFRP ä¸éœ€è¦ä½ å®šä¹‰å¦‚ä½• (How) ä»¥åŠä½•æ—¶ (When) æ›´æ–°ã€‚è¿™ä¸€ç±»å‹çš„æ¡†æ¶æœ‰ Meter(Tracker)ï¼ŒknockoutJS å’Œ EmberJS ã€‚\n\né‚£ä¹ˆå·²ç»æœ‰è¿™ä¹ˆå¤šå®ç°äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰ Mobx ?\n\n# Mobx\n\nMobx å’Œå…¶ä»–å®ç°æœ‰äº›ä¸åŒã€‚\n\n* åŒæ­¥æ‰§è¡Œ (è¿™æ ·ç›‘å¬çš„å€¼å§‹ç»ˆæ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”è°ƒè¯•ä¼šæ–¹ä¾¿ï¼Œå› ä¸ºæ²¡æœ‰é¢å¤–çš„ Promise/Async åº“å¼•å…¥çš„å †æ ˆä¿¡æ¯)\n* æ²¡æœ‰å¼•å…¥é¢å¤–çš„æ•°æ®ç»“æ„ï¼ŒåŸºäºæ™®é€šçš„ Object, Class, Array å®ç° (æ›´å°‘å­¦ä¹ æˆæœ¬ï¼Œæ›´æ–°æ•°æ®æ—¶æ›´è‡ªç„¶)\n* ç‹¬ç«‹æ–¹æ¡ˆ (ä¸æ†ç»‘æ¡†æ¶ï¼Œç›¸æ¯” Meter, EmberJS å’Œ VueJS è€Œè¨€)\n\n# åŸºæœ¬åŸç†\n\nè€Œè¦ç†è§£ mobx çš„åŸç†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´åº•å±‚çš„ä¾‹å­ã€‚\n\n```javascript\n\nimport { observable, autorun } from 'mobx';\n\nconst counter = observable(0);\nautorun(() => {\nconsole.log('autorun', counter.get());\n});\n\ncounter.set(1);\n\n```\n\nè¿è¡Œç»“æœ:\n\n```javascript\n\nautorun 0\nautorun 1\n\n```\n\nå¤§å®¶å¯èƒ½ä¼šå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆ `counter.set()` ä¹‹åï¼Œ`autorun` ä¼šè‡ªåŠ¨æ‰§è¡Œ? è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œé€šè¿‡ `counter` éœ€è¦çŸ¥é“ `autorun` æ˜¯ä¾èµ–ä»–çš„ã€‚é‚£ä¹ˆè¿™ä¸ªä¾èµ–å…³ç³»æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ä»¥åŠå¦‚ä½•ç”Ÿæˆçš„å‘¢?\n\nå…ˆçœ‹ä»£ç ï¼Œè¿™é‡Œæ¶‰åŠäº† `mobx` çš„ `observable` å’Œ `autorun` æ¥å£ã€‚ä¸æ­¤ç›¸å…³çš„æœ‰ `Observable` å’Œ `Derivation` ä¸¤ä¸ªç±»ã€‚ `Observable` æ˜¯æ•°æ®æºï¼Œ`Derivation` æ˜¯æ¨å¯¼ã€‚\n\nç±»å®šä¹‰å¦‚ä¸‹ï¼š\n\n```javascript\n\nObservable\n  - observing: [Derivation]\n  - get()\n  - set()\n\nDerivation\n  - observer: [Observable]\n\n```\n\nç„¶åï¼Œ`autorun`æ‰§è¡Œçš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š\n\n* ç”Ÿæˆä¸€ä¸ªDerivation\n* æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving\n    * æ€ä¹ˆè®¡ç®—ï¼Ÿè®¿é—®æ•°æ®æ˜¯ä¼šèµ°åˆ°Observableçš„getæ–¹æ³•ï¼Œé€šè¿‡getæ–¹æ³•åšè®°å½•\n* åœ¨observingçš„Observableçš„observeré‡Œæ·»åŠ è¿™ä¸ªDerivation\n\nåˆ°è¿™é‡Œï¼ŒObservableå’ŒDerivationçš„ä¾èµ–å…³è”å°±ç®€å†èµ·æ¥äº†ã€‚\n\né‚£ä¹ˆï¼Œ`counter.set()`æ‰§è¡Œä¹‹åæ˜¯å¦‚ä½•è§¦å‘`autorun`çš„è‡ªåŠ¨æ‰§è¡Œï¼Ÿåœ¨æœ‰äº†ä¸Šé¢è¿™ä¸€å±‚ä¾èµ–å…³ç³»ä¹‹åï¼Œè¿™ä¸ªå°±å¾ˆå¥½ç†è§£äº†ã€‚counter.set()æ‰§è¡Œæ—¶ä¼šä»è‡ªå·±çš„observingå±æ€§é‡Œå–ä¾èµ–ä»–çš„Derivation,å¹¶è§¦å‘ä»–ä»¬çš„é‡æ–°æ‰§è¡Œã€‚\n\n\n# è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\n\n```javascript\n\nimport { observable, autorun } from 'mobx'\n\nconst counter = observable(0)\nconst foo = observalbe(0)\nconst bar = observable(0)\n\nautorun(() => {\n    if (counter.get() === 0) {\n        console.log('foo ', foo.get())\n    } else {\n        console.log('bar ', bar.get())\n    }\n})\n\nbar.set(10)  // no console log\ncounter.set(1) // trigger autorun\nfoo.set(100) // no console log\nbar.set(100) // trigger autorun\n\n```\n\nå®é™…ä¸Šå‰é¢çš„`autorun`çš„æ‰§è¡Œæ­¥éª¤æ˜¯åšäº†ç®€åŒ–çš„ï¼ŒçœŸå®ï¼š\n\n* ç”ŸæˆDerivation\n* è®°å½•oldObserving(+)\n* æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving\n    * è®¿é—®æ•°æ®æ—¶ä¼šèµ°åˆ°Obdervableçš„get()æ–¹æ³•ï¼Œé€šè¿‡get()æ–¹æ³•åšçš„è®°å½•\n* å’ŒoldObdervingåšdiff, å¾—åˆ°æ–°å¢å’Œåˆ é™¤åˆ—è¡¨\n* é€šè¿‡å‰é¢å¾—åˆ°çš„diffç»“æœï¼Œä¿®æ”¹Observableçš„observing\n\nç›¸æ¯”ä¹‹å‰çš„ï¼Œå¢åŠ äº†diffçš„é€»è¾‘ï¼Œä»¥è¾¾åˆ°æ¯æ¬¡æ‰§è¡Œæ—¶å€™åŠ¨æ€æ›´æ–°ä¾èµ–å…³ç³»è¡¨çš„ç›®çš„ã€‚\n\n# get/set magic\n\nå¤§å®¶åœ¨çœ‹å‰é¢çš„ä¾‹å­é‡Œå¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œä¸ºå•¥ç¬¬ä¸€ä¸ªä¾‹å­é‡Œå¯ä»¥é€šè¿‡ appState.counter æ¥è®¾ç½®ï¼Œè€Œåé¢çš„ä¾‹å­é‡Œéœ€è¦ç”¨ counter.get å’Œ counter.set æ¥å–å€¼å’Œè®¾å€¼?\n\nè¿™å’Œæ•°æ®ç±»å‹æœ‰å…³ï¼Œmobx æ”¯æŒçš„ç±»å‹æœ‰ primitives, arrays, classes å’Œ objects ã€‚primitives (åŸå§‹ç±»å‹) åªèƒ½é€šè¿‡ set å’Œ get æ–¹æ³•å–å€¼å’Œè®¾å€¼ã€‚è€Œ Object åˆ™å¯ä»¥åˆ©ç”¨ Object.defineProperty æ–¹æ³•è‡ªå®šä¹‰ getter å’Œ setter ã€‚\n\n```javascript\n\nObject.defineProperty(adm.target, propName, {\n    configurable: true,\n    enumerable: !isComputed,\n    get: function() {\n        return observable.get();\n    },\n    set: isComputed\n        ? throwingComputedValueSetter\n        : createSetter(adm, observable as ObservableValue<any>, propName)\n});\n\n```\nè¯¦è§[æºç ](https://github.com/mobxjs/mobx/blob/44a86f45170d52368858d27ea3bc77ed583a58fa/src/types/observableobject.ts#L108-L117)\n\n# ComputedValue\n\nComputedValue åŒæ—¶å®ç°äº† Observable å’Œ Derivation çš„æ¥å£ï¼Œå³å¯ä»¥ç›‘å¬ Observableï¼Œä¹Ÿå¯ä»¥è¢« Derivation ç›‘å¬ã€‚\n\n# Reaction\n\nReaction æœ¬è´¨ä¸Šæ˜¯ Derivationï¼Œä½†ä»–ä¸èƒ½å†è¢«å…¶ä»– Derivation ç›‘å¬ã€‚\n\n# Autorun\n\nautorun æ˜¯ Reaction çš„[ç®€å•å°è£…](https://github.com/mobxjs/mobx/blob/e195b01d0dd6516480c76a6e952dda206e612a31/src/api/autorun.ts#L14-L27)ã€‚\n\n```javascript\n\nexport function autorun(view: Lambda, scope?: any) {\n\tassertUnwrapped(view, \"autorun methods cannot have modifiers\");\n\tinvariant(typeof view === \"function\", \"autorun expects a function\");\n\tinvariant(view.length === 0, \"autorun expects a function without arguments\");\n\tif (scope)\n\t\tview = view.bind(scope);\n\n\tconst reaction = new Reaction(view.name || (\"Autorun@\" + getNextId()), function () {\n\t\tthis.track(view);\n\t});\n\treaction.schedule();\n\n\treturn reaction.getDisposer();\n}\n\n```\n\n# åŒæ­¥æ‰§è¡Œ\n\nå…¶ä»–çš„ TFRP ç±»åº“ï¼Œæ¯”å¦‚ Tracker å’Œ Knockout ï¼Œæ•°æ®æ›´æ–°åçš„æ‰§è¡Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ç­‰åˆ°ä¸‹ä¸€ä¸ª event loop ã€‚(å¯ä»¥æƒ³è±¡æˆ setTimeout)\n\nè€Œ Mobx çš„æ‰§è¡Œæ˜¯åŒæ­¥çš„ï¼Œè¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š\n\n* ComputedValue åœ¨ä»–ä¾èµ–çš„å€¼ä¿®æ”¹åå¯ä»¥é©¬ä¸Šè¢«ä½¿ç”¨ï¼Œè¿™æ ·ä½ å°±æ°¸è¿œä¸ä¼šä½¿ç”¨ä¸€ä¸ªè¿‡æœŸçš„ ComputedValue\n* è°ƒè¯•æ–¹ä¾¿ï¼Œå †æ ˆé‡Œæ²¡æœ‰å†—ä½™çš„ Promise / async åº“\n\n# Transation\n\nç”±äº mobx çš„æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥æ¯ set ä¸€ä¸ªå€¼ï¼Œå°±ä¼šè§¦å‘ reaction çš„æ›´æ–°ã€‚æ‰€ä»¥ä¸ºäº†æ‰¹é‡æ›´æ–°ï¼Œå°±å¼•å…¥äº† transation ã€‚\n\n```javascript\n\ntransaction(() => {\n  user.firstName = \"foo\";\n  user.lastName = \"bar\";\n});\n\n```\n\nåœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç­‰æ‰€æœ‰çš„ä¿®æ”¹æ‰§è¡Œå®Œå†æ‰§è¡Œæ‰€æœ‰çš„ deviration ä¼šæ›´åˆé€‚ã€‚æ³¨æ„ transaction åªæ˜¯æ¨è¿Ÿäº† deviration çš„æ‰§è¡Œï¼Œæœ¬èº«è¿˜æ˜¯åŒæ­¥çš„ã€‚\n\n# Action\n\naction æ˜¯ transation æ˜¯ç®€å•å°è£…ï¼Œæ”¯æŒé€šè¿‡ decorator çš„æ–¹å¼è°ƒç”¨ã€‚å¹¶ä¸”æ˜¯ untrack çš„ï¼Œè¿™æ ·å¯ä»¥åœ¨ Derivation é‡Œè°ƒç”¨ä»–ã€‚\n\n# Observe(mobx-react)\n\nç¬¬ä¸€æ¬¡renderæ—¶ï¼š\n    * åˆå§‹åŒ–ä¸€ä¸ª Reactionï¼ŒonValidate æ—¶ä¼š forceUpdate Component\n    * åœ¨ reaction.track é‡Œæ‰§è¡Œ baseRenderï¼Œå»ºç«‹ä¾èµ–å…³ç³»\n\næœ‰æ•°æ®ä¿®æ”¹æ—¶ï¼š\n    * è§¦å‘ onValidate æ–¹æ³•ï¼Œæ‰§è¡Œ forceUpdate\n    * è§¦å‘ render çš„æ‰§è¡Œ (ç”±äºåœ¨ reaction.track é‡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä¼šé‡æ–°å»ºç«‹ä¾èµ–å…³ç³»)\n\nshouldComponentUpdateï¼š\n\n    * å’Œ PureRenderMixin ç±»ä¼¼çš„å®ç°ï¼Œé˜»æ­¢ä¸å¿…è¦çš„æ›´æ–°\n\ncomponentWillReact:\n\n    * æ•°æ®æ›´æ–°çš„æ—¶å€™è§¦å‘\n    * æ³¨æ„å’Œ componentWillMount å’Œ componentWillUpdate çš„åŒºåˆ«\n\n[https://github.com/mobxjs/mobx](https://github.com/mobxjs/mobx)\n[https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk](https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk)\n","slug":"2017-03-17-mobx","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxv001fmmt7xa7f9hn1","content":"<h1 id=\"è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\"><a href=\"#è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\" class=\"headerlink\" title=\"è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\"></a>è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­</h1><p><a href=\"https://github.com/AsherJia/MobxTemplate\" target=\"_blank\" rel=\"external\">GitHub MobxTemplate</a>{:target=â€_blankâ€}</p>\n<h1 id=\"FRP\"><a href=\"#FRP\" class=\"headerlink\" title=\"FRP\"></a>FRP</h1><blockquote>\n<p>The essence of functional reactive programming is to specify the dynamic behavior of a value completely<br>at the time of declaration. â€“ Heinrich Apfelmus</p>\n</blockquote>\n<p>æ‰€ä»¥ï¼ŒFRP çš„æœ¬è´¨æ˜¯ï¼Œåœ¨å£°æ˜ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼ŒåŒæ—¶æŒ‡å®šä»–çš„åŠ¨æ€è¡Œä¸ºã€‚è¿™ä¸ªå€¼å¯èƒ½æ˜¯äº‹ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°æ®ã€‚</p>\n<h1 id=\"åˆ†æ”¯\"><a href=\"#åˆ†æ”¯\" class=\"headerlink\" title=\"åˆ†æ”¯\"></a>åˆ†æ”¯</h1><p>ç„¶å FRP æœ‰ä¸¤ä¸ªé‡è¦çš„åˆ†æ”¯ï¼š</p>\n<ul>\n<li>åŸºäº Event Stream çš„ FRP</li>\n<li>Transparent FRP (TFRP)</li>\n</ul>\n<p>åŸºäº Event Stream çš„ FRP æ“…é•¿äºç®¡ç† Streamï¼Œå¯è¿›è¡Œ Joining, splitting, merging, mapping, sampling ç­‰ç­‰ã€‚åœ¨éœ€è¦å¤„ç†å¤šä¸ª Event Stream çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œä½†å¯¹äºç®€å•åœºæ™¯æ¥è¯´ï¼Œå°±è¿‡äºå¤æ‚äº†ã€‚æ¯”å¦‚ RxJS å’Œ BaconJS å°±å±äºæ­¤ç±»ã€‚</p>\n<p>Transparent FRP æ˜¯åœ¨èƒŒåå»å®ç° Reactive Programming ã€‚å’Œ Event Stream çš„ FRP ä¸€æ ·ï¼ŒTFRP ä¼šåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–° Viewï¼Œä¸åŒçš„æ˜¯ TFRP ä¸éœ€è¦ä½ å®šä¹‰å¦‚ä½• (How) ä»¥åŠä½•æ—¶ (When) æ›´æ–°ã€‚è¿™ä¸€ç±»å‹çš„æ¡†æ¶æœ‰ Meter(Tracker)ï¼ŒknockoutJS å’Œ EmberJS ã€‚</p>\n<p>é‚£ä¹ˆå·²ç»æœ‰è¿™ä¹ˆå¤šå®ç°äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰ Mobx ?</p>\n<h1 id=\"Mobx\"><a href=\"#Mobx\" class=\"headerlink\" title=\"Mobx\"></a>Mobx</h1><p>Mobx å’Œå…¶ä»–å®ç°æœ‰äº›ä¸åŒã€‚</p>\n<ul>\n<li>åŒæ­¥æ‰§è¡Œ (è¿™æ ·ç›‘å¬çš„å€¼å§‹ç»ˆæ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”è°ƒè¯•ä¼šæ–¹ä¾¿ï¼Œå› ä¸ºæ²¡æœ‰é¢å¤–çš„ Promise/Async åº“å¼•å…¥çš„å †æ ˆä¿¡æ¯)</li>\n<li>æ²¡æœ‰å¼•å…¥é¢å¤–çš„æ•°æ®ç»“æ„ï¼ŒåŸºäºæ™®é€šçš„ Object, Class, Array å®ç° (æ›´å°‘å­¦ä¹ æˆæœ¬ï¼Œæ›´æ–°æ•°æ®æ—¶æ›´è‡ªç„¶)</li>\n<li>ç‹¬ç«‹æ–¹æ¡ˆ (ä¸æ†ç»‘æ¡†æ¶ï¼Œç›¸æ¯” Meter, EmberJS å’Œ VueJS è€Œè¨€)</li>\n</ul>\n<h1 id=\"åŸºæœ¬åŸç†\"><a href=\"#åŸºæœ¬åŸç†\" class=\"headerlink\" title=\"åŸºæœ¬åŸç†\"></a>åŸºæœ¬åŸç†</h1><p>è€Œè¦ç†è§£ mobx çš„åŸç†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´åº•å±‚çš„ä¾‹å­ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; observable, autorun &#125; <span class=\"keyword\">from</span> <span class=\"string\">'mobx'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> counter = observable(<span class=\"number\">0</span>);</div><div class=\"line\">autorun(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'autorun'</span>, counter.get());</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">counter.set(<span class=\"number\">1</span>);</div></pre></td></tr></table></figure>\n<p>è¿è¡Œç»“æœ:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">autorun <span class=\"number\">0</span></div><div class=\"line\">autorun <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>å¤§å®¶å¯èƒ½ä¼šå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆ <code>counter.set()</code> ä¹‹åï¼Œ<code>autorun</code> ä¼šè‡ªåŠ¨æ‰§è¡Œ? è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œé€šè¿‡ <code>counter</code> éœ€è¦çŸ¥é“ <code>autorun</code> æ˜¯ä¾èµ–ä»–çš„ã€‚é‚£ä¹ˆè¿™ä¸ªä¾èµ–å…³ç³»æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ä»¥åŠå¦‚ä½•ç”Ÿæˆçš„å‘¢?</p>\n<p>å…ˆçœ‹ä»£ç ï¼Œè¿™é‡Œæ¶‰åŠäº† <code>mobx</code> çš„ <code>observable</code> å’Œ <code>autorun</code> æ¥å£ã€‚ä¸æ­¤ç›¸å…³çš„æœ‰ <code>Observable</code> å’Œ <code>Derivation</code> ä¸¤ä¸ªç±»ã€‚ <code>Observable</code> æ˜¯æ•°æ®æºï¼Œ<code>Derivation</code> æ˜¯æ¨å¯¼ã€‚</p>\n<p>ç±»å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">Observable</div><div class=\"line\">  - observing: [Derivation]</div><div class=\"line\">  - get()</div><div class=\"line\">  - set()</div><div class=\"line\"></div><div class=\"line\">Derivation</div><div class=\"line\">  - observer: [Observable]</div></pre></td></tr></table></figure>\n<p>ç„¶åï¼Œ<code>autorun</code>æ‰§è¡Œçš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š</p>\n<ul>\n<li>ç”Ÿæˆä¸€ä¸ªDerivation</li>\n<li>æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving<ul>\n<li>æ€ä¹ˆè®¡ç®—ï¼Ÿè®¿é—®æ•°æ®æ˜¯ä¼šèµ°åˆ°Observableçš„getæ–¹æ³•ï¼Œé€šè¿‡getæ–¹æ³•åšè®°å½•</li>\n</ul>\n</li>\n<li>åœ¨observingçš„Observableçš„observeré‡Œæ·»åŠ è¿™ä¸ªDerivation</li>\n</ul>\n<p>åˆ°è¿™é‡Œï¼ŒObservableå’ŒDerivationçš„ä¾èµ–å…³è”å°±ç®€å†èµ·æ¥äº†ã€‚</p>\n<p>é‚£ä¹ˆï¼Œ<code>counter.set()</code>æ‰§è¡Œä¹‹åæ˜¯å¦‚ä½•è§¦å‘<code>autorun</code>çš„è‡ªåŠ¨æ‰§è¡Œï¼Ÿåœ¨æœ‰äº†ä¸Šé¢è¿™ä¸€å±‚ä¾èµ–å…³ç³»ä¹‹åï¼Œè¿™ä¸ªå°±å¾ˆå¥½ç†è§£äº†ã€‚counter.set()æ‰§è¡Œæ—¶ä¼šä»è‡ªå·±çš„observingå±æ€§é‡Œå–ä¾èµ–ä»–çš„Derivation,å¹¶è§¦å‘ä»–ä»¬çš„é‡æ–°æ‰§è¡Œã€‚</p>\n<h1 id=\"è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\"><a href=\"#è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\" class=\"headerlink\" title=\"è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\"></a>è¿è¡Œæ—¶ä¾èµ–è®¡ç®—</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; observable, autorun &#125; <span class=\"keyword\">from</span> <span class=\"string\">'mobx'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> counter = observable(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> foo = observalbe(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> bar = observable(<span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">autorun(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (counter.get() === <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'foo '</span>, foo.get())</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'bar '</span>, bar.get())</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">bar.set(<span class=\"number\">10</span>)  <span class=\"comment\">// no console log</span></div><div class=\"line\">counter.set(<span class=\"number\">1</span>) <span class=\"comment\">// trigger autorun</span></div><div class=\"line\">foo.set(<span class=\"number\">100</span>) <span class=\"comment\">// no console log</span></div><div class=\"line\">bar.set(<span class=\"number\">100</span>) <span class=\"comment\">// trigger autorun</span></div></pre></td></tr></table></figure>\n<p>å®é™…ä¸Šå‰é¢çš„<code>autorun</code>çš„æ‰§è¡Œæ­¥éª¤æ˜¯åšäº†ç®€åŒ–çš„ï¼ŒçœŸå®ï¼š</p>\n<ul>\n<li>ç”ŸæˆDerivation</li>\n<li>è®°å½•oldObserving(+)</li>\n<li>æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving<ul>\n<li>è®¿é—®æ•°æ®æ—¶ä¼šèµ°åˆ°Obdervableçš„get()æ–¹æ³•ï¼Œé€šè¿‡get()æ–¹æ³•åšçš„è®°å½•</li>\n</ul>\n</li>\n<li>å’ŒoldObdervingåšdiff, å¾—åˆ°æ–°å¢å’Œåˆ é™¤åˆ—è¡¨</li>\n<li>é€šè¿‡å‰é¢å¾—åˆ°çš„diffç»“æœï¼Œä¿®æ”¹Observableçš„observing</li>\n</ul>\n<p>ç›¸æ¯”ä¹‹å‰çš„ï¼Œå¢åŠ äº†diffçš„é€»è¾‘ï¼Œä»¥è¾¾åˆ°æ¯æ¬¡æ‰§è¡Œæ—¶å€™åŠ¨æ€æ›´æ–°ä¾èµ–å…³ç³»è¡¨çš„ç›®çš„ã€‚</p>\n<h1 id=\"get-set-magic\"><a href=\"#get-set-magic\" class=\"headerlink\" title=\"get/set magic\"></a>get/set magic</h1><p>å¤§å®¶åœ¨çœ‹å‰é¢çš„ä¾‹å­é‡Œå¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œä¸ºå•¥ç¬¬ä¸€ä¸ªä¾‹å­é‡Œå¯ä»¥é€šè¿‡ appState.counter æ¥è®¾ç½®ï¼Œè€Œåé¢çš„ä¾‹å­é‡Œéœ€è¦ç”¨ counter.get å’Œ counter.set æ¥å–å€¼å’Œè®¾å€¼?</p>\n<p>è¿™å’Œæ•°æ®ç±»å‹æœ‰å…³ï¼Œmobx æ”¯æŒçš„ç±»å‹æœ‰ primitives, arrays, classes å’Œ objects ã€‚primitives (åŸå§‹ç±»å‹) åªèƒ½é€šè¿‡ set å’Œ get æ–¹æ³•å–å€¼å’Œè®¾å€¼ã€‚è€Œ Object åˆ™å¯ä»¥åˆ©ç”¨ Object.defineProperty æ–¹æ³•è‡ªå®šä¹‰ getter å’Œ setter ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(adm.target, propName, &#123;</div><div class=\"line\">    <span class=\"attr\">configurable</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">enumerable</span>: !isComputed,</div><div class=\"line\">    <span class=\"attr\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> observable.get();</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"attr\">set</span>: isComputed</div><div class=\"line\">        ? throwingComputedValueSetter</div><div class=\"line\">        : createSetter(adm, observable <span class=\"keyword\">as</span> ObservableValue&lt;any&gt;, propName)</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>è¯¦è§<a href=\"https://github.com/mobxjs/mobx/blob/44a86f45170d52368858d27ea3bc77ed583a58fa/src/types/observableobject.ts#L108-L117\" target=\"_blank\" rel=\"external\">æºç </a></p>\n<h1 id=\"ComputedValue\"><a href=\"#ComputedValue\" class=\"headerlink\" title=\"ComputedValue\"></a>ComputedValue</h1><p>ComputedValue åŒæ—¶å®ç°äº† Observable å’Œ Derivation çš„æ¥å£ï¼Œå³å¯ä»¥ç›‘å¬ Observableï¼Œä¹Ÿå¯ä»¥è¢« Derivation ç›‘å¬ã€‚</p>\n<h1 id=\"Reaction\"><a href=\"#Reaction\" class=\"headerlink\" title=\"Reaction\"></a>Reaction</h1><p>Reaction æœ¬è´¨ä¸Šæ˜¯ Derivationï¼Œä½†ä»–ä¸èƒ½å†è¢«å…¶ä»– Derivation ç›‘å¬ã€‚</p>\n<h1 id=\"Autorun\"><a href=\"#Autorun\" class=\"headerlink\" title=\"Autorun\"></a>Autorun</h1><p>autorun æ˜¯ Reaction çš„<a href=\"https://github.com/mobxjs/mobx/blob/e195b01d0dd6516480c76a6e952dda206e612a31/src/api/autorun.ts#L14-L27\" target=\"_blank\" rel=\"external\">ç®€å•å°è£…</a>ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">autorun</span>(<span class=\"params\">view: Lambda, scope?: any</span>) </span>&#123;</div><div class=\"line\">\tassertUnwrapped(view, <span class=\"string\">\"autorun methods cannot have modifiers\"</span>);</div><div class=\"line\">\tinvariant(<span class=\"keyword\">typeof</span> view === <span class=\"string\">\"function\"</span>, <span class=\"string\">\"autorun expects a function\"</span>);</div><div class=\"line\">\tinvariant(view.length === <span class=\"number\">0</span>, <span class=\"string\">\"autorun expects a function without arguments\"</span>);</div><div class=\"line\">\t<span class=\"keyword\">if</span> (scope)</div><div class=\"line\">\t\tview = view.bind(scope);</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">const</span> reaction = <span class=\"keyword\">new</span> Reaction(view.name || (<span class=\"string\">\"Autorun@\"</span> + getNextId()), <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">this</span>.track(view);</div><div class=\"line\">\t&#125;);</div><div class=\"line\">\treaction.schedule();</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> reaction.getDisposer();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"åŒæ­¥æ‰§è¡Œ\"><a href=\"#åŒæ­¥æ‰§è¡Œ\" class=\"headerlink\" title=\"åŒæ­¥æ‰§è¡Œ\"></a>åŒæ­¥æ‰§è¡Œ</h1><p>å…¶ä»–çš„ TFRP ç±»åº“ï¼Œæ¯”å¦‚ Tracker å’Œ Knockout ï¼Œæ•°æ®æ›´æ–°åçš„æ‰§è¡Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ç­‰åˆ°ä¸‹ä¸€ä¸ª event loop ã€‚(å¯ä»¥æƒ³è±¡æˆ setTimeout)</p>\n<p>è€Œ Mobx çš„æ‰§è¡Œæ˜¯åŒæ­¥çš„ï¼Œè¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>\n<ul>\n<li>ComputedValue åœ¨ä»–ä¾èµ–çš„å€¼ä¿®æ”¹åå¯ä»¥é©¬ä¸Šè¢«ä½¿ç”¨ï¼Œè¿™æ ·ä½ å°±æ°¸è¿œä¸ä¼šä½¿ç”¨ä¸€ä¸ªè¿‡æœŸçš„ ComputedValue</li>\n<li>è°ƒè¯•æ–¹ä¾¿ï¼Œå †æ ˆé‡Œæ²¡æœ‰å†—ä½™çš„ Promise / async åº“</li>\n</ul>\n<h1 id=\"Transation\"><a href=\"#Transation\" class=\"headerlink\" title=\"Transation\"></a>Transation</h1><p>ç”±äº mobx çš„æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥æ¯ set ä¸€ä¸ªå€¼ï¼Œå°±ä¼šè§¦å‘ reaction çš„æ›´æ–°ã€‚æ‰€ä»¥ä¸ºäº†æ‰¹é‡æ›´æ–°ï¼Œå°±å¼•å…¥äº† transation ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">transaction(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  user.firstName = <span class=\"string\">\"foo\"</span>;</div><div class=\"line\">  user.lastName = <span class=\"string\">\"bar\"</span>;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç­‰æ‰€æœ‰çš„ä¿®æ”¹æ‰§è¡Œå®Œå†æ‰§è¡Œæ‰€æœ‰çš„ deviration ä¼šæ›´åˆé€‚ã€‚æ³¨æ„ transaction åªæ˜¯æ¨è¿Ÿäº† deviration çš„æ‰§è¡Œï¼Œæœ¬èº«è¿˜æ˜¯åŒæ­¥çš„ã€‚</p>\n<h1 id=\"Action\"><a href=\"#Action\" class=\"headerlink\" title=\"Action\"></a>Action</h1><p>action æ˜¯ transation æ˜¯ç®€å•å°è£…ï¼Œæ”¯æŒé€šè¿‡ decorator çš„æ–¹å¼è°ƒç”¨ã€‚å¹¶ä¸”æ˜¯ untrack çš„ï¼Œè¿™æ ·å¯ä»¥åœ¨ Derivation é‡Œè°ƒç”¨ä»–ã€‚</p>\n<h1 id=\"Observe-mobx-react\"><a href=\"#Observe-mobx-react\" class=\"headerlink\" title=\"Observe(mobx-react)\"></a>Observe(mobx-react)</h1><p>ç¬¬ä¸€æ¬¡renderæ—¶ï¼š</p>\n<pre><code>* åˆå§‹åŒ–ä¸€ä¸ª Reactionï¼ŒonValidate æ—¶ä¼š forceUpdate Component\n* åœ¨ reaction.track é‡Œæ‰§è¡Œ baseRenderï¼Œå»ºç«‹ä¾èµ–å…³ç³»\n</code></pre><p>æœ‰æ•°æ®ä¿®æ”¹æ—¶ï¼š</p>\n<pre><code>* è§¦å‘ onValidate æ–¹æ³•ï¼Œæ‰§è¡Œ forceUpdate\n* è§¦å‘ render çš„æ‰§è¡Œ (ç”±äºåœ¨ reaction.track é‡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä¼šé‡æ–°å»ºç«‹ä¾èµ–å…³ç³»)\n</code></pre><p>shouldComponentUpdateï¼š</p>\n<pre><code>* å’Œ PureRenderMixin ç±»ä¼¼çš„å®ç°ï¼Œé˜»æ­¢ä¸å¿…è¦çš„æ›´æ–°\n</code></pre><p>componentWillReact:</p>\n<pre><code>* æ•°æ®æ›´æ–°çš„æ—¶å€™è§¦å‘\n* æ³¨æ„å’Œ componentWillMount å’Œ componentWillUpdate çš„åŒºåˆ«\n</code></pre><p><a href=\"https://github.com/mobxjs/mobx\" target=\"_blank\" rel=\"external\">https://github.com/mobxjs/mobx</a><br><a href=\"https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk\" target=\"_blank\" rel=\"external\">https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\"><a href=\"#è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\" class=\"headerlink\" title=\"è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­\"></a>è¯ä¸å¤šè¯´å…ˆæ¥ä¸€ä¸ªæ —å­</h1><p><a href=\"https://github.com/AsherJia/MobxTemplate\" target=\"_blank\" rel=\"external\">GitHub MobxTemplate</a>{:target=â€_blankâ€}</p>\n<h1 id=\"FRP\"><a href=\"#FRP\" class=\"headerlink\" title=\"FRP\"></a>FRP</h1><blockquote>\n<p>The essence of functional reactive programming is to specify the dynamic behavior of a value completely<br>at the time of declaration. â€“ Heinrich Apfelmus</p>\n</blockquote>\n<p>æ‰€ä»¥ï¼ŒFRP çš„æœ¬è´¨æ˜¯ï¼Œåœ¨å£°æ˜ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼ŒåŒæ—¶æŒ‡å®šä»–çš„åŠ¨æ€è¡Œä¸ºã€‚è¿™ä¸ªå€¼å¯èƒ½æ˜¯äº‹ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°æ®ã€‚</p>\n<h1 id=\"åˆ†æ”¯\"><a href=\"#åˆ†æ”¯\" class=\"headerlink\" title=\"åˆ†æ”¯\"></a>åˆ†æ”¯</h1><p>ç„¶å FRP æœ‰ä¸¤ä¸ªé‡è¦çš„åˆ†æ”¯ï¼š</p>\n<ul>\n<li>åŸºäº Event Stream çš„ FRP</li>\n<li>Transparent FRP (TFRP)</li>\n</ul>\n<p>åŸºäº Event Stream çš„ FRP æ“…é•¿äºç®¡ç† Streamï¼Œå¯è¿›è¡Œ Joining, splitting, merging, mapping, sampling ç­‰ç­‰ã€‚åœ¨éœ€è¦å¤„ç†å¤šä¸ª Event Stream çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œä½†å¯¹äºç®€å•åœºæ™¯æ¥è¯´ï¼Œå°±è¿‡äºå¤æ‚äº†ã€‚æ¯”å¦‚ RxJS å’Œ BaconJS å°±å±äºæ­¤ç±»ã€‚</p>\n<p>Transparent FRP æ˜¯åœ¨èƒŒåå»å®ç° Reactive Programming ã€‚å’Œ Event Stream çš„ FRP ä¸€æ ·ï¼ŒTFRP ä¼šåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–° Viewï¼Œä¸åŒçš„æ˜¯ TFRP ä¸éœ€è¦ä½ å®šä¹‰å¦‚ä½• (How) ä»¥åŠä½•æ—¶ (When) æ›´æ–°ã€‚è¿™ä¸€ç±»å‹çš„æ¡†æ¶æœ‰ Meter(Tracker)ï¼ŒknockoutJS å’Œ EmberJS ã€‚</p>\n<p>é‚£ä¹ˆå·²ç»æœ‰è¿™ä¹ˆå¤šå®ç°äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰ Mobx ?</p>\n<h1 id=\"Mobx\"><a href=\"#Mobx\" class=\"headerlink\" title=\"Mobx\"></a>Mobx</h1><p>Mobx å’Œå…¶ä»–å®ç°æœ‰äº›ä¸åŒã€‚</p>\n<ul>\n<li>åŒæ­¥æ‰§è¡Œ (è¿™æ ·ç›‘å¬çš„å€¼å§‹ç»ˆæ˜¯æœ€æ–°çš„ï¼Œå¹¶ä¸”è°ƒè¯•ä¼šæ–¹ä¾¿ï¼Œå› ä¸ºæ²¡æœ‰é¢å¤–çš„ Promise/Async åº“å¼•å…¥çš„å †æ ˆä¿¡æ¯)</li>\n<li>æ²¡æœ‰å¼•å…¥é¢å¤–çš„æ•°æ®ç»“æ„ï¼ŒåŸºäºæ™®é€šçš„ Object, Class, Array å®ç° (æ›´å°‘å­¦ä¹ æˆæœ¬ï¼Œæ›´æ–°æ•°æ®æ—¶æ›´è‡ªç„¶)</li>\n<li>ç‹¬ç«‹æ–¹æ¡ˆ (ä¸æ†ç»‘æ¡†æ¶ï¼Œç›¸æ¯” Meter, EmberJS å’Œ VueJS è€Œè¨€)</li>\n</ul>\n<h1 id=\"åŸºæœ¬åŸç†\"><a href=\"#åŸºæœ¬åŸç†\" class=\"headerlink\" title=\"åŸºæœ¬åŸç†\"></a>åŸºæœ¬åŸç†</h1><p>è€Œè¦ç†è§£ mobx çš„åŸç†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´åº•å±‚çš„ä¾‹å­ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; observable, autorun &#125; <span class=\"keyword\">from</span> <span class=\"string\">'mobx'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> counter = observable(<span class=\"number\">0</span>);</div><div class=\"line\">autorun(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'autorun'</span>, counter.get());</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">counter.set(<span class=\"number\">1</span>);</div></pre></td></tr></table></figure>\n<p>è¿è¡Œç»“æœ:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">autorun <span class=\"number\">0</span></div><div class=\"line\">autorun <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<p>å¤§å®¶å¯èƒ½ä¼šå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆ <code>counter.set()</code> ä¹‹åï¼Œ<code>autorun</code> ä¼šè‡ªåŠ¨æ‰§è¡Œ? è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œé€šè¿‡ <code>counter</code> éœ€è¦çŸ¥é“ <code>autorun</code> æ˜¯ä¾èµ–ä»–çš„ã€‚é‚£ä¹ˆè¿™ä¸ªä¾èµ–å…³ç³»æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ä»¥åŠå¦‚ä½•ç”Ÿæˆçš„å‘¢?</p>\n<p>å…ˆçœ‹ä»£ç ï¼Œè¿™é‡Œæ¶‰åŠäº† <code>mobx</code> çš„ <code>observable</code> å’Œ <code>autorun</code> æ¥å£ã€‚ä¸æ­¤ç›¸å…³çš„æœ‰ <code>Observable</code> å’Œ <code>Derivation</code> ä¸¤ä¸ªç±»ã€‚ <code>Observable</code> æ˜¯æ•°æ®æºï¼Œ<code>Derivation</code> æ˜¯æ¨å¯¼ã€‚</p>\n<p>ç±»å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">Observable</div><div class=\"line\">  - observing: [Derivation]</div><div class=\"line\">  - get()</div><div class=\"line\">  - set()</div><div class=\"line\"></div><div class=\"line\">Derivation</div><div class=\"line\">  - observer: [Observable]</div></pre></td></tr></table></figure>\n<p>ç„¶åï¼Œ<code>autorun</code>æ‰§è¡Œçš„æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š</p>\n<ul>\n<li>ç”Ÿæˆä¸€ä¸ªDerivation</li>\n<li>æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving<ul>\n<li>æ€ä¹ˆè®¡ç®—ï¼Ÿè®¿é—®æ•°æ®æ˜¯ä¼šèµ°åˆ°Observableçš„getæ–¹æ³•ï¼Œé€šè¿‡getæ–¹æ³•åšè®°å½•</li>\n</ul>\n</li>\n<li>åœ¨observingçš„Observableçš„observeré‡Œæ·»åŠ è¿™ä¸ªDerivation</li>\n</ul>\n<p>åˆ°è¿™é‡Œï¼ŒObservableå’ŒDerivationçš„ä¾èµ–å…³è”å°±ç®€å†èµ·æ¥äº†ã€‚</p>\n<p>é‚£ä¹ˆï¼Œ<code>counter.set()</code>æ‰§è¡Œä¹‹åæ˜¯å¦‚ä½•è§¦å‘<code>autorun</code>çš„è‡ªåŠ¨æ‰§è¡Œï¼Ÿåœ¨æœ‰äº†ä¸Šé¢è¿™ä¸€å±‚ä¾èµ–å…³ç³»ä¹‹åï¼Œè¿™ä¸ªå°±å¾ˆå¥½ç†è§£äº†ã€‚counter.set()æ‰§è¡Œæ—¶ä¼šä»è‡ªå·±çš„observingå±æ€§é‡Œå–ä¾èµ–ä»–çš„Derivation,å¹¶è§¦å‘ä»–ä»¬çš„é‡æ–°æ‰§è¡Œã€‚</p>\n<h1 id=\"è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\"><a href=\"#è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\" class=\"headerlink\" title=\"è¿è¡Œæ—¶ä¾èµ–è®¡ç®—\"></a>è¿è¡Œæ—¶ä¾èµ–è®¡ç®—</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; observable, autorun &#125; <span class=\"keyword\">from</span> <span class=\"string\">'mobx'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> counter = observable(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> foo = observalbe(<span class=\"number\">0</span>)</div><div class=\"line\"><span class=\"keyword\">const</span> bar = observable(<span class=\"number\">0</span>)</div><div class=\"line\"></div><div class=\"line\">autorun(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (counter.get() === <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'foo '</span>, foo.get())</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'bar '</span>, bar.get())</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\">bar.set(<span class=\"number\">10</span>)  <span class=\"comment\">// no console log</span></div><div class=\"line\">counter.set(<span class=\"number\">1</span>) <span class=\"comment\">// trigger autorun</span></div><div class=\"line\">foo.set(<span class=\"number\">100</span>) <span class=\"comment\">// no console log</span></div><div class=\"line\">bar.set(<span class=\"number\">100</span>) <span class=\"comment\">// trigger autorun</span></div></pre></td></tr></table></figure>\n<p>å®é™…ä¸Šå‰é¢çš„<code>autorun</code>çš„æ‰§è¡Œæ­¥éª¤æ˜¯åšäº†ç®€åŒ–çš„ï¼ŒçœŸå®ï¼š</p>\n<ul>\n<li>ç”ŸæˆDerivation</li>\n<li>è®°å½•oldObserving(+)</li>\n<li>æ‰§è¡Œä¼ å…¥å‡½æ•°ï¼Œè®¡ç®—å‡ºobserving<ul>\n<li>è®¿é—®æ•°æ®æ—¶ä¼šèµ°åˆ°Obdervableçš„get()æ–¹æ³•ï¼Œé€šè¿‡get()æ–¹æ³•åšçš„è®°å½•</li>\n</ul>\n</li>\n<li>å’ŒoldObdervingåšdiff, å¾—åˆ°æ–°å¢å’Œåˆ é™¤åˆ—è¡¨</li>\n<li>é€šè¿‡å‰é¢å¾—åˆ°çš„diffç»“æœï¼Œä¿®æ”¹Observableçš„observing</li>\n</ul>\n<p>ç›¸æ¯”ä¹‹å‰çš„ï¼Œå¢åŠ äº†diffçš„é€»è¾‘ï¼Œä»¥è¾¾åˆ°æ¯æ¬¡æ‰§è¡Œæ—¶å€™åŠ¨æ€æ›´æ–°ä¾èµ–å…³ç³»è¡¨çš„ç›®çš„ã€‚</p>\n<h1 id=\"get-set-magic\"><a href=\"#get-set-magic\" class=\"headerlink\" title=\"get/set magic\"></a>get/set magic</h1><p>å¤§å®¶åœ¨çœ‹å‰é¢çš„ä¾‹å­é‡Œå¯èƒ½ä¼šæœ‰ä¸ªç–‘é—®ï¼Œä¸ºå•¥ç¬¬ä¸€ä¸ªä¾‹å­é‡Œå¯ä»¥é€šè¿‡ appState.counter æ¥è®¾ç½®ï¼Œè€Œåé¢çš„ä¾‹å­é‡Œéœ€è¦ç”¨ counter.get å’Œ counter.set æ¥å–å€¼å’Œè®¾å€¼?</p>\n<p>è¿™å’Œæ•°æ®ç±»å‹æœ‰å…³ï¼Œmobx æ”¯æŒçš„ç±»å‹æœ‰ primitives, arrays, classes å’Œ objects ã€‚primitives (åŸå§‹ç±»å‹) åªèƒ½é€šè¿‡ set å’Œ get æ–¹æ³•å–å€¼å’Œè®¾å€¼ã€‚è€Œ Object åˆ™å¯ä»¥åˆ©ç”¨ Object.defineProperty æ–¹æ³•è‡ªå®šä¹‰ getter å’Œ setter ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(adm.target, propName, &#123;</div><div class=\"line\">    <span class=\"attr\">configurable</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">enumerable</span>: !isComputed,</div><div class=\"line\">    <span class=\"attr\">get</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> observable.get();</div><div class=\"line\">    &#125;,</div><div class=\"line\">    <span class=\"attr\">set</span>: isComputed</div><div class=\"line\">        ? throwingComputedValueSetter</div><div class=\"line\">        : createSetter(adm, observable <span class=\"keyword\">as</span> ObservableValue&lt;any&gt;, propName)</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>è¯¦è§<a href=\"https://github.com/mobxjs/mobx/blob/44a86f45170d52368858d27ea3bc77ed583a58fa/src/types/observableobject.ts#L108-L117\" target=\"_blank\" rel=\"external\">æºç </a></p>\n<h1 id=\"ComputedValue\"><a href=\"#ComputedValue\" class=\"headerlink\" title=\"ComputedValue\"></a>ComputedValue</h1><p>ComputedValue åŒæ—¶å®ç°äº† Observable å’Œ Derivation çš„æ¥å£ï¼Œå³å¯ä»¥ç›‘å¬ Observableï¼Œä¹Ÿå¯ä»¥è¢« Derivation ç›‘å¬ã€‚</p>\n<h1 id=\"Reaction\"><a href=\"#Reaction\" class=\"headerlink\" title=\"Reaction\"></a>Reaction</h1><p>Reaction æœ¬è´¨ä¸Šæ˜¯ Derivationï¼Œä½†ä»–ä¸èƒ½å†è¢«å…¶ä»– Derivation ç›‘å¬ã€‚</p>\n<h1 id=\"Autorun\"><a href=\"#Autorun\" class=\"headerlink\" title=\"Autorun\"></a>Autorun</h1><p>autorun æ˜¯ Reaction çš„<a href=\"https://github.com/mobxjs/mobx/blob/e195b01d0dd6516480c76a6e952dda206e612a31/src/api/autorun.ts#L14-L27\" target=\"_blank\" rel=\"external\">ç®€å•å°è£…</a>ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">autorun</span>(<span class=\"params\">view: Lambda, scope?: any</span>) </span>&#123;</div><div class=\"line\">\tassertUnwrapped(view, <span class=\"string\">\"autorun methods cannot have modifiers\"</span>);</div><div class=\"line\">\tinvariant(<span class=\"keyword\">typeof</span> view === <span class=\"string\">\"function\"</span>, <span class=\"string\">\"autorun expects a function\"</span>);</div><div class=\"line\">\tinvariant(view.length === <span class=\"number\">0</span>, <span class=\"string\">\"autorun expects a function without arguments\"</span>);</div><div class=\"line\">\t<span class=\"keyword\">if</span> (scope)</div><div class=\"line\">\t\tview = view.bind(scope);</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">const</span> reaction = <span class=\"keyword\">new</span> Reaction(view.name || (<span class=\"string\">\"Autorun@\"</span> + getNextId()), <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">this</span>.track(view);</div><div class=\"line\">\t&#125;);</div><div class=\"line\">\treaction.schedule();</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">return</span> reaction.getDisposer();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"åŒæ­¥æ‰§è¡Œ\"><a href=\"#åŒæ­¥æ‰§è¡Œ\" class=\"headerlink\" title=\"åŒæ­¥æ‰§è¡Œ\"></a>åŒæ­¥æ‰§è¡Œ</h1><p>å…¶ä»–çš„ TFRP ç±»åº“ï¼Œæ¯”å¦‚ Tracker å’Œ Knockout ï¼Œæ•°æ®æ›´æ–°åçš„æ‰§è¡Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ç­‰åˆ°ä¸‹ä¸€ä¸ª event loop ã€‚(å¯ä»¥æƒ³è±¡æˆ setTimeout)</p>\n<p>è€Œ Mobx çš„æ‰§è¡Œæ˜¯åŒæ­¥çš„ï¼Œè¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>\n<ul>\n<li>ComputedValue åœ¨ä»–ä¾èµ–çš„å€¼ä¿®æ”¹åå¯ä»¥é©¬ä¸Šè¢«ä½¿ç”¨ï¼Œè¿™æ ·ä½ å°±æ°¸è¿œä¸ä¼šä½¿ç”¨ä¸€ä¸ªè¿‡æœŸçš„ ComputedValue</li>\n<li>è°ƒè¯•æ–¹ä¾¿ï¼Œå †æ ˆé‡Œæ²¡æœ‰å†—ä½™çš„ Promise / async åº“</li>\n</ul>\n<h1 id=\"Transation\"><a href=\"#Transation\" class=\"headerlink\" title=\"Transation\"></a>Transation</h1><p>ç”±äº mobx çš„æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥æ¯ set ä¸€ä¸ªå€¼ï¼Œå°±ä¼šè§¦å‘ reaction çš„æ›´æ–°ã€‚æ‰€ä»¥ä¸ºäº†æ‰¹é‡æ›´æ–°ï¼Œå°±å¼•å…¥äº† transation ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">transaction(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</div><div class=\"line\">  user.firstName = <span class=\"string\">\"foo\"</span>;</div><div class=\"line\">  user.lastName = <span class=\"string\">\"bar\"</span>;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç­‰æ‰€æœ‰çš„ä¿®æ”¹æ‰§è¡Œå®Œå†æ‰§è¡Œæ‰€æœ‰çš„ deviration ä¼šæ›´åˆé€‚ã€‚æ³¨æ„ transaction åªæ˜¯æ¨è¿Ÿäº† deviration çš„æ‰§è¡Œï¼Œæœ¬èº«è¿˜æ˜¯åŒæ­¥çš„ã€‚</p>\n<h1 id=\"Action\"><a href=\"#Action\" class=\"headerlink\" title=\"Action\"></a>Action</h1><p>action æ˜¯ transation æ˜¯ç®€å•å°è£…ï¼Œæ”¯æŒé€šè¿‡ decorator çš„æ–¹å¼è°ƒç”¨ã€‚å¹¶ä¸”æ˜¯ untrack çš„ï¼Œè¿™æ ·å¯ä»¥åœ¨ Derivation é‡Œè°ƒç”¨ä»–ã€‚</p>\n<h1 id=\"Observe-mobx-react\"><a href=\"#Observe-mobx-react\" class=\"headerlink\" title=\"Observe(mobx-react)\"></a>Observe(mobx-react)</h1><p>ç¬¬ä¸€æ¬¡renderæ—¶ï¼š</p>\n<pre><code>* åˆå§‹åŒ–ä¸€ä¸ª Reactionï¼ŒonValidate æ—¶ä¼š forceUpdate Component\n* åœ¨ reaction.track é‡Œæ‰§è¡Œ baseRenderï¼Œå»ºç«‹ä¾èµ–å…³ç³»\n</code></pre><p>æœ‰æ•°æ®ä¿®æ”¹æ—¶ï¼š</p>\n<pre><code>* è§¦å‘ onValidate æ–¹æ³•ï¼Œæ‰§è¡Œ forceUpdate\n* è§¦å‘ render çš„æ‰§è¡Œ (ç”±äºåœ¨ reaction.track é‡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä¼šé‡æ–°å»ºç«‹ä¾èµ–å…³ç³»)\n</code></pre><p>shouldComponentUpdateï¼š</p>\n<pre><code>* å’Œ PureRenderMixin ç±»ä¼¼çš„å®ç°ï¼Œé˜»æ­¢ä¸å¿…è¦çš„æ›´æ–°\n</code></pre><p>componentWillReact:</p>\n<pre><code>* æ•°æ®æ›´æ–°çš„æ—¶å€™è§¦å‘\n* æ³¨æ„å’Œ componentWillMount å’Œ componentWillUpdate çš„åŒºåˆ«\n</code></pre><p><a href=\"https://github.com/mobxjs/mobx\" target=\"_blank\" rel=\"external\">https://github.com/mobxjs/mobx</a><br><a href=\"https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk\" target=\"_blank\" rel=\"external\">https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.4sxpfpsuk</a></p>\n"},{"layout":"post","title":"Gulp and Markdown","subtitle":"Gulp and Markdown","date":"2017-03-21T16:00:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\nGulp å’Œ webpack ä¹‹é—´çš„å…³ç³»æ˜¯ååˆ†æš§æ˜§çš„ï¼Œå´ä¹Ÿç»å¸¸è¢«äººè¯¯è§£ï¼Œä»¥ä¸ºå®ƒä¿©æ˜¯ç«äº‰å…³ç³»ï¼Œå…¶å®ä¸ç„¶ã€‚\n\nGulp æ˜¯ä¸€ä¸ªä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œè®©ç®€å•çš„ä»»åŠ¡æ›´æ¸…æ™°ï¼Œè®©å¤æ‚çš„ä»»åŠ¡æ˜“äºæŒæ§ï¼›è€Œ webpack çš„ç†å¿µæ˜¯ï¼Œä¸€åˆ‡çš†ä¸ºæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åœ¨æ‰“åŒ…çš„æ—¶å€™éƒ½ä¼šç»è¿‡ä¸€ä¸ªå«åš loader çš„ä¸œè¥¿ï¼Œå®ƒå…·å¤‡éå¸¸å¼ºå¤§çš„ç²¾ç»†åŒ–ç®¡ç†èƒ½åŠ›ï¼Œä¸»è¦è§£å†³çš„æ˜¯ä¾èµ–åˆ†æé—®é¢˜ã€‚\n\nGulp çš„å­¦ä¹ ï¼Œææ¸…æ¥š `gulp.src`, `gulp.dest`, `gulp.task`, `gulp.watch` å››ä¸ª API å°±å·®ä¸å¤šäº†ï¼Œå®ƒçš„åº•å±‚åŸç†æ˜¯ä½¿ç”¨ Node çš„ Transform Streamsï¼Œè¿™æ˜¯ä¸€ä¸ªå¯è¯»å¯å†™å¯åšä¸­é—´è½¬æ¢çš„ Streams ç®¡é“ï¼Œç”±äºä» src åˆ° dest è¿‡ç¨‹ä¸­ï¼Œæ–‡ä»¶ä¸€ç›´åœç•™åœ¨ Streams ä¸­ï¼Œæ²¡æœ‰è½åœ°æˆä¸ºå®ä½“æ–‡ä»¶ï¼Œæ‰€ä»¥æ•´ä½“è¿ä½œæ•ˆç‡éå¸¸é«˜ã€‚\n\nWebpack æ¦‚å¿µå¾ˆå¤šï¼Œä½†ææ¸…æ¥š `entry`ï¼Œ`output` å’Œ `loader` ä¸‰ä¸ªå…³é”®ç‚¹ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è§£å†³ç®€å•çš„é—®é¢˜äº†ï¼Œç¨å¾®å¤æ‚çš„åœºæ™¯ä¸»è¦åŒ…æ‹¬å¯¹èµ„æºçš„åˆå¹¶å¤„ç†ã€åˆ†æ‹†å¤„ç†ã€å¤šæ¬¡æ‰“åŒ…ç­‰ï¼Œéƒ¨åˆ†è¿™æ ·çš„é—®é¢˜å¯ä»¥ä½¿ç”¨æ’ä»¶è¾…åŠ©è§£å†³ï¼Œä½†æ˜¯ Webpack çš„å¼ºå¤§å¹¶ä¸åœ¨æ–‡ä»¶å¤„ç†ï¼Œè€Œæ˜¯ä¾èµ–åˆ†æï¼Œæ‰€ä»¥åœ¨æµç¨‹æ“ä½œç‰¹åˆ«å¤æ‚çš„æƒ…å†µï¼Œwebpack å¹¶ä¸èƒ½èƒœä»»å·¥ä½œï¼Œå¾€å¾€ä¼šè¢«ä½œä¸º gulp çš„ä¸€ä¸ª taskï¼Œæ•´ä½“å·¥ä½œæµäº¤ç»™ gulp ä¸»å¯¼ã€‚\n\n### æ’ä»¶æ¨è\n\nä¸‹é¢æ¨èå‡ ä¸ª gulp çš„æ’ä»¶å§ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ï¼š\n\n- `gulp-load-plugins`ï¼šè‡ªåŠ¨åŠ è½½ package.json ä¸­çš„ gulp æ’ä»¶\n- `gulp-rename`ï¼š é‡å‘½å\n- `gulp-uglify`ï¼šæ–‡ä»¶å‹ç¼©\n- `gulp-concat`ï¼šæ–‡ä»¶åˆå¹¶\n- `gulp-less`ï¼šç¼–è¯‘ less\n- `gulp-sass`ï¼šç¼–è¯‘ sass\n- `gulp-clean-css`ï¼šå‹ç¼© CSS æ–‡ä»¶\n- `gulp-htmlmin`ï¼šå‹ç¼© HTML æ–‡ä»¶\n- `gulp-babel`ï¼šä½¿ç”¨ babel ç¼–è¯‘ JS æ–‡ä»¶\n- `gulp-jshint`ï¼šjshint æ£€æŸ¥\n- `gulp-imagemin`ï¼šå‹ç¼© jpgã€pngã€gif ç­‰å›¾ç‰‡\n- `gulp-livereload`ï¼šå½“ä»£ç å˜åŒ–æ—¶ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ·æ–°é¡µé¢\n\nä¹Ÿæ¨èå‡ ä¸ª webpack å¸¸ç”¨çš„ loader å’Œ pluginï¼š\n\n- Loader åˆ—è¡¨\n  - `less-loader, sass-loader`ï¼šå¤„ç†æ ·å¼\n  - `url-loader, file-loader`ï¼šä¸¤ä¸ªéƒ½å¿…é¡»ç”¨ä¸Šã€‚å¦åˆ™è¶…è¿‡å¤§å°é™åˆ¶çš„å›¾ç‰‡æ— æ³•ç”Ÿæˆåˆ°ç›®æ ‡æ–‡ä»¶å¤¹ä¸­\n  - `babel-loaderï¼Œbabel-preset-es2015ï¼Œbabel-preset-react`ï¼šjså¤„ç†ï¼Œè½¬ç \n  - `expose-loader`ï¼š å°†jsæ¨¡å—æš´éœ²åˆ°å…¨å±€\n- Plugin åˆ—è¡¨\n  - `NormalModuleReplacementPlugin`ï¼šåŒ¹é… resourceRegExpï¼Œæ›¿æ¢ä¸º newResource\n  - `ContextReplacementPlugin`ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶\n  - `IgnorePlugin`ï¼šä¸æ‰“åŒ…åŒ¹é…æ–‡ä»¶\n  - `PrefetchPlugin`ï¼šé¢„åŠ è½½çš„æ’ä»¶ï¼Œæé«˜æ€§èƒ½\n  - `ResolverPlugin`ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶\n  - `ContextReplacementPlugin`ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶\n  - `DedupePlugin`ï¼šæ‰“åŒ…çš„æ—¶å€™åˆ é™¤é‡å¤æˆ–è€…ç›¸ä¼¼çš„æ–‡ä»¶\n  - `MinChunkSizePlugin`ï¼šæŠŠå¤šä¸ªå°æ¨¡å—è¿›è¡Œåˆå¹¶ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°\n  - `LimitChunkCountPlugin`ï¼šé™åˆ¶æ‰“åŒ…æ–‡ä»¶çš„ä¸ªæ•°\n  - `MinChunkSizePlugin`ï¼šæ ¹æ® chars å¤§å°ï¼Œå¦‚æœå°äºè®¾å®šçš„æœ€å°å€¼ï¼Œå°±åˆå¹¶è¿™äº›å°æ¨¡å—ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°\n  - `OccurrenceOrderPlugin`ï¼šæ ¹æ®æ¨¡å—è°ƒç”¨æ¬¡æ•°ï¼Œç»™æ¨¡å—åˆ†é… idsï¼Œå¸¸è¢«è°ƒç”¨çš„idsåˆ†é…æ›´çŸ­çš„ idï¼Œä½¿å¾— ids å¯é¢„æµ‹ï¼Œé™ä½æ–‡ä»¶å¤§å°ï¼Œè¯¥æ¨¡å—æ¨èä½¿ç”¨\n  - `UglifyJsPlugin`ï¼šå‹ç¼© js\n  - `ngAnnotatePlugin`ï¼šä½¿ç”¨ ng-annotate æ¥ç®¡ç† AngularJS çš„ä¸€äº›ä¾èµ–\n  - `CommonsChunkPlugin`ï¼šå¤šä¸ª html å…±ç”¨ä¸€ä¸ªjsæ–‡ä»¶(chunk)\n  - `HotModuleReplacementPlugin`ï¼šæ¨¡å—çƒ­æ›¿æ¢,å¦‚æœä¸åœ¨ dev-server æ¨¡å¼ä¸‹ï¼Œéœ€è¦è®°å½•æ•°æ®ï¼ŒrecordPathï¼Œç”Ÿæˆæ¯ä¸ªæ¨¡å—çš„çƒ­æ›´æ–°æ¨¡å—\n  - `ProgressPlugin`ï¼šç¼–è¯‘è¿›åº¦\n  - `NoErrorsPlugin`ï¼šæŠ¥é”™ä½†ä¸é€€å‡º webpack è¿›ç¨‹\n  - `HtmlWebpackPlugin `ï¼šç”Ÿæˆ html\n\n### æ‹“å±•é˜…è¯»\n","source":"_posts/2017-04-28-gulp-and-webpack.markdown","raw":"---\nlayout:     post\ntitle:      \"Gulp and Markdown\"\nsubtitle:   \"Gulp and Markdown\"\ndate:       2017-03-22\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Gulp and Markdown\n---\n\nGulp å’Œ webpack ä¹‹é—´çš„å…³ç³»æ˜¯ååˆ†æš§æ˜§çš„ï¼Œå´ä¹Ÿç»å¸¸è¢«äººè¯¯è§£ï¼Œä»¥ä¸ºå®ƒä¿©æ˜¯ç«äº‰å…³ç³»ï¼Œå…¶å®ä¸ç„¶ã€‚\n\nGulp æ˜¯ä¸€ä¸ªä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œè®©ç®€å•çš„ä»»åŠ¡æ›´æ¸…æ™°ï¼Œè®©å¤æ‚çš„ä»»åŠ¡æ˜“äºæŒæ§ï¼›è€Œ webpack çš„ç†å¿µæ˜¯ï¼Œä¸€åˆ‡çš†ä¸ºæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åœ¨æ‰“åŒ…çš„æ—¶å€™éƒ½ä¼šç»è¿‡ä¸€ä¸ªå«åš loader çš„ä¸œè¥¿ï¼Œå®ƒå…·å¤‡éå¸¸å¼ºå¤§çš„ç²¾ç»†åŒ–ç®¡ç†èƒ½åŠ›ï¼Œä¸»è¦è§£å†³çš„æ˜¯ä¾èµ–åˆ†æé—®é¢˜ã€‚\n\nGulp çš„å­¦ä¹ ï¼Œææ¸…æ¥š `gulp.src`, `gulp.dest`, `gulp.task`, `gulp.watch` å››ä¸ª API å°±å·®ä¸å¤šäº†ï¼Œå®ƒçš„åº•å±‚åŸç†æ˜¯ä½¿ç”¨ Node çš„ Transform Streamsï¼Œè¿™æ˜¯ä¸€ä¸ªå¯è¯»å¯å†™å¯åšä¸­é—´è½¬æ¢çš„ Streams ç®¡é“ï¼Œç”±äºä» src åˆ° dest è¿‡ç¨‹ä¸­ï¼Œæ–‡ä»¶ä¸€ç›´åœç•™åœ¨ Streams ä¸­ï¼Œæ²¡æœ‰è½åœ°æˆä¸ºå®ä½“æ–‡ä»¶ï¼Œæ‰€ä»¥æ•´ä½“è¿ä½œæ•ˆç‡éå¸¸é«˜ã€‚\n\nWebpack æ¦‚å¿µå¾ˆå¤šï¼Œä½†ææ¸…æ¥š `entry`ï¼Œ`output` å’Œ `loader` ä¸‰ä¸ªå…³é”®ç‚¹ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è§£å†³ç®€å•çš„é—®é¢˜äº†ï¼Œç¨å¾®å¤æ‚çš„åœºæ™¯ä¸»è¦åŒ…æ‹¬å¯¹èµ„æºçš„åˆå¹¶å¤„ç†ã€åˆ†æ‹†å¤„ç†ã€å¤šæ¬¡æ‰“åŒ…ç­‰ï¼Œéƒ¨åˆ†è¿™æ ·çš„é—®é¢˜å¯ä»¥ä½¿ç”¨æ’ä»¶è¾…åŠ©è§£å†³ï¼Œä½†æ˜¯ Webpack çš„å¼ºå¤§å¹¶ä¸åœ¨æ–‡ä»¶å¤„ç†ï¼Œè€Œæ˜¯ä¾èµ–åˆ†æï¼Œæ‰€ä»¥åœ¨æµç¨‹æ“ä½œç‰¹åˆ«å¤æ‚çš„æƒ…å†µï¼Œwebpack å¹¶ä¸èƒ½èƒœä»»å·¥ä½œï¼Œå¾€å¾€ä¼šè¢«ä½œä¸º gulp çš„ä¸€ä¸ª taskï¼Œæ•´ä½“å·¥ä½œæµäº¤ç»™ gulp ä¸»å¯¼ã€‚\n\n### æ’ä»¶æ¨è\n\nä¸‹é¢æ¨èå‡ ä¸ª gulp çš„æ’ä»¶å§ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ï¼š\n\n- `gulp-load-plugins`ï¼šè‡ªåŠ¨åŠ è½½ package.json ä¸­çš„ gulp æ’ä»¶\n- `gulp-rename`ï¼š é‡å‘½å\n- `gulp-uglify`ï¼šæ–‡ä»¶å‹ç¼©\n- `gulp-concat`ï¼šæ–‡ä»¶åˆå¹¶\n- `gulp-less`ï¼šç¼–è¯‘ less\n- `gulp-sass`ï¼šç¼–è¯‘ sass\n- `gulp-clean-css`ï¼šå‹ç¼© CSS æ–‡ä»¶\n- `gulp-htmlmin`ï¼šå‹ç¼© HTML æ–‡ä»¶\n- `gulp-babel`ï¼šä½¿ç”¨ babel ç¼–è¯‘ JS æ–‡ä»¶\n- `gulp-jshint`ï¼šjshint æ£€æŸ¥\n- `gulp-imagemin`ï¼šå‹ç¼© jpgã€pngã€gif ç­‰å›¾ç‰‡\n- `gulp-livereload`ï¼šå½“ä»£ç å˜åŒ–æ—¶ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ·æ–°é¡µé¢\n\nä¹Ÿæ¨èå‡ ä¸ª webpack å¸¸ç”¨çš„ loader å’Œ pluginï¼š\n\n- Loader åˆ—è¡¨\n  - `less-loader, sass-loader`ï¼šå¤„ç†æ ·å¼\n  - `url-loader, file-loader`ï¼šä¸¤ä¸ªéƒ½å¿…é¡»ç”¨ä¸Šã€‚å¦åˆ™è¶…è¿‡å¤§å°é™åˆ¶çš„å›¾ç‰‡æ— æ³•ç”Ÿæˆåˆ°ç›®æ ‡æ–‡ä»¶å¤¹ä¸­\n  - `babel-loaderï¼Œbabel-preset-es2015ï¼Œbabel-preset-react`ï¼šjså¤„ç†ï¼Œè½¬ç \n  - `expose-loader`ï¼š å°†jsæ¨¡å—æš´éœ²åˆ°å…¨å±€\n- Plugin åˆ—è¡¨\n  - `NormalModuleReplacementPlugin`ï¼šåŒ¹é… resourceRegExpï¼Œæ›¿æ¢ä¸º newResource\n  - `ContextReplacementPlugin`ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶\n  - `IgnorePlugin`ï¼šä¸æ‰“åŒ…åŒ¹é…æ–‡ä»¶\n  - `PrefetchPlugin`ï¼šé¢„åŠ è½½çš„æ’ä»¶ï¼Œæé«˜æ€§èƒ½\n  - `ResolverPlugin`ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶\n  - `ContextReplacementPlugin`ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶\n  - `DedupePlugin`ï¼šæ‰“åŒ…çš„æ—¶å€™åˆ é™¤é‡å¤æˆ–è€…ç›¸ä¼¼çš„æ–‡ä»¶\n  - `MinChunkSizePlugin`ï¼šæŠŠå¤šä¸ªå°æ¨¡å—è¿›è¡Œåˆå¹¶ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°\n  - `LimitChunkCountPlugin`ï¼šé™åˆ¶æ‰“åŒ…æ–‡ä»¶çš„ä¸ªæ•°\n  - `MinChunkSizePlugin`ï¼šæ ¹æ® chars å¤§å°ï¼Œå¦‚æœå°äºè®¾å®šçš„æœ€å°å€¼ï¼Œå°±åˆå¹¶è¿™äº›å°æ¨¡å—ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°\n  - `OccurrenceOrderPlugin`ï¼šæ ¹æ®æ¨¡å—è°ƒç”¨æ¬¡æ•°ï¼Œç»™æ¨¡å—åˆ†é… idsï¼Œå¸¸è¢«è°ƒç”¨çš„idsåˆ†é…æ›´çŸ­çš„ idï¼Œä½¿å¾— ids å¯é¢„æµ‹ï¼Œé™ä½æ–‡ä»¶å¤§å°ï¼Œè¯¥æ¨¡å—æ¨èä½¿ç”¨\n  - `UglifyJsPlugin`ï¼šå‹ç¼© js\n  - `ngAnnotatePlugin`ï¼šä½¿ç”¨ ng-annotate æ¥ç®¡ç† AngularJS çš„ä¸€äº›ä¾èµ–\n  - `CommonsChunkPlugin`ï¼šå¤šä¸ª html å…±ç”¨ä¸€ä¸ªjsæ–‡ä»¶(chunk)\n  - `HotModuleReplacementPlugin`ï¼šæ¨¡å—çƒ­æ›¿æ¢,å¦‚æœä¸åœ¨ dev-server æ¨¡å¼ä¸‹ï¼Œéœ€è¦è®°å½•æ•°æ®ï¼ŒrecordPathï¼Œç”Ÿæˆæ¯ä¸ªæ¨¡å—çš„çƒ­æ›´æ–°æ¨¡å—\n  - `ProgressPlugin`ï¼šç¼–è¯‘è¿›åº¦\n  - `NoErrorsPlugin`ï¼šæŠ¥é”™ä½†ä¸é€€å‡º webpack è¿›ç¨‹\n  - `HtmlWebpackPlugin `ï¼šç”Ÿæˆ html\n\n### æ‹“å±•é˜…è¯»\n","slug":"2017-04-28-gulp-and-webpack","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxx001hmmt70mzuus0b","content":"<p>Gulp å’Œ webpack ä¹‹é—´çš„å…³ç³»æ˜¯ååˆ†æš§æ˜§çš„ï¼Œå´ä¹Ÿç»å¸¸è¢«äººè¯¯è§£ï¼Œä»¥ä¸ºå®ƒä¿©æ˜¯ç«äº‰å…³ç³»ï¼Œå…¶å®ä¸ç„¶ã€‚</p>\n<p>Gulp æ˜¯ä¸€ä¸ªä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œè®©ç®€å•çš„ä»»åŠ¡æ›´æ¸…æ™°ï¼Œè®©å¤æ‚çš„ä»»åŠ¡æ˜“äºæŒæ§ï¼›è€Œ webpack çš„ç†å¿µæ˜¯ï¼Œä¸€åˆ‡çš†ä¸ºæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åœ¨æ‰“åŒ…çš„æ—¶å€™éƒ½ä¼šç»è¿‡ä¸€ä¸ªå«åš loader çš„ä¸œè¥¿ï¼Œå®ƒå…·å¤‡éå¸¸å¼ºå¤§çš„ç²¾ç»†åŒ–ç®¡ç†èƒ½åŠ›ï¼Œä¸»è¦è§£å†³çš„æ˜¯ä¾èµ–åˆ†æé—®é¢˜ã€‚</p>\n<p>Gulp çš„å­¦ä¹ ï¼Œææ¸…æ¥š <code>gulp.src</code>, <code>gulp.dest</code>, <code>gulp.task</code>, <code>gulp.watch</code> å››ä¸ª API å°±å·®ä¸å¤šäº†ï¼Œå®ƒçš„åº•å±‚åŸç†æ˜¯ä½¿ç”¨ Node çš„ Transform Streamsï¼Œè¿™æ˜¯ä¸€ä¸ªå¯è¯»å¯å†™å¯åšä¸­é—´è½¬æ¢çš„ Streams ç®¡é“ï¼Œç”±äºä» src åˆ° dest è¿‡ç¨‹ä¸­ï¼Œæ–‡ä»¶ä¸€ç›´åœç•™åœ¨ Streams ä¸­ï¼Œæ²¡æœ‰è½åœ°æˆä¸ºå®ä½“æ–‡ä»¶ï¼Œæ‰€ä»¥æ•´ä½“è¿ä½œæ•ˆç‡éå¸¸é«˜ã€‚</p>\n<p>Webpack æ¦‚å¿µå¾ˆå¤šï¼Œä½†ææ¸…æ¥š <code>entry</code>ï¼Œ<code>output</code> å’Œ <code>loader</code> ä¸‰ä¸ªå…³é”®ç‚¹ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è§£å†³ç®€å•çš„é—®é¢˜äº†ï¼Œç¨å¾®å¤æ‚çš„åœºæ™¯ä¸»è¦åŒ…æ‹¬å¯¹èµ„æºçš„åˆå¹¶å¤„ç†ã€åˆ†æ‹†å¤„ç†ã€å¤šæ¬¡æ‰“åŒ…ç­‰ï¼Œéƒ¨åˆ†è¿™æ ·çš„é—®é¢˜å¯ä»¥ä½¿ç”¨æ’ä»¶è¾…åŠ©è§£å†³ï¼Œä½†æ˜¯ Webpack çš„å¼ºå¤§å¹¶ä¸åœ¨æ–‡ä»¶å¤„ç†ï¼Œè€Œæ˜¯ä¾èµ–åˆ†æï¼Œæ‰€ä»¥åœ¨æµç¨‹æ“ä½œç‰¹åˆ«å¤æ‚çš„æƒ…å†µï¼Œwebpack å¹¶ä¸èƒ½èƒœä»»å·¥ä½œï¼Œå¾€å¾€ä¼šè¢«ä½œä¸º gulp çš„ä¸€ä¸ª taskï¼Œæ•´ä½“å·¥ä½œæµäº¤ç»™ gulp ä¸»å¯¼ã€‚</p>\n<h3 id=\"æ’ä»¶æ¨è\"><a href=\"#æ’ä»¶æ¨è\" class=\"headerlink\" title=\"æ’ä»¶æ¨è\"></a>æ’ä»¶æ¨è</h3><p>ä¸‹é¢æ¨èå‡ ä¸ª gulp çš„æ’ä»¶å§ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ï¼š</p>\n<ul>\n<li><code>gulp-load-plugins</code>ï¼šè‡ªåŠ¨åŠ è½½ package.json ä¸­çš„ gulp æ’ä»¶</li>\n<li><code>gulp-rename</code>ï¼š é‡å‘½å</li>\n<li><code>gulp-uglify</code>ï¼šæ–‡ä»¶å‹ç¼©</li>\n<li><code>gulp-concat</code>ï¼šæ–‡ä»¶åˆå¹¶</li>\n<li><code>gulp-less</code>ï¼šç¼–è¯‘ less</li>\n<li><code>gulp-sass</code>ï¼šç¼–è¯‘ sass</li>\n<li><code>gulp-clean-css</code>ï¼šå‹ç¼© CSS æ–‡ä»¶</li>\n<li><code>gulp-htmlmin</code>ï¼šå‹ç¼© HTML æ–‡ä»¶</li>\n<li><code>gulp-babel</code>ï¼šä½¿ç”¨ babel ç¼–è¯‘ JS æ–‡ä»¶</li>\n<li><code>gulp-jshint</code>ï¼šjshint æ£€æŸ¥</li>\n<li><code>gulp-imagemin</code>ï¼šå‹ç¼© jpgã€pngã€gif ç­‰å›¾ç‰‡</li>\n<li><code>gulp-livereload</code>ï¼šå½“ä»£ç å˜åŒ–æ—¶ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ·æ–°é¡µé¢</li>\n</ul>\n<p>ä¹Ÿæ¨èå‡ ä¸ª webpack å¸¸ç”¨çš„ loader å’Œ pluginï¼š</p>\n<ul>\n<li>Loader åˆ—è¡¨<ul>\n<li><code>less-loader, sass-loader</code>ï¼šå¤„ç†æ ·å¼</li>\n<li><code>url-loader, file-loader</code>ï¼šä¸¤ä¸ªéƒ½å¿…é¡»ç”¨ä¸Šã€‚å¦åˆ™è¶…è¿‡å¤§å°é™åˆ¶çš„å›¾ç‰‡æ— æ³•ç”Ÿæˆåˆ°ç›®æ ‡æ–‡ä»¶å¤¹ä¸­</li>\n<li><code>babel-loaderï¼Œbabel-preset-es2015ï¼Œbabel-preset-react</code>ï¼šjså¤„ç†ï¼Œè½¬ç </li>\n<li><code>expose-loader</code>ï¼š å°†jsæ¨¡å—æš´éœ²åˆ°å…¨å±€</li>\n</ul>\n</li>\n<li>Plugin åˆ—è¡¨<ul>\n<li><code>NormalModuleReplacementPlugin</code>ï¼šåŒ¹é… resourceRegExpï¼Œæ›¿æ¢ä¸º newResource</li>\n<li><code>ContextReplacementPlugin</code>ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶</li>\n<li><code>IgnorePlugin</code>ï¼šä¸æ‰“åŒ…åŒ¹é…æ–‡ä»¶</li>\n<li><code>PrefetchPlugin</code>ï¼šé¢„åŠ è½½çš„æ’ä»¶ï¼Œæé«˜æ€§èƒ½</li>\n<li><code>ResolverPlugin</code>ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶</li>\n<li><code>ContextReplacementPlugin</code>ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶</li>\n<li><code>DedupePlugin</code>ï¼šæ‰“åŒ…çš„æ—¶å€™åˆ é™¤é‡å¤æˆ–è€…ç›¸ä¼¼çš„æ–‡ä»¶</li>\n<li><code>MinChunkSizePlugin</code>ï¼šæŠŠå¤šä¸ªå°æ¨¡å—è¿›è¡Œåˆå¹¶ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°</li>\n<li><code>LimitChunkCountPlugin</code>ï¼šé™åˆ¶æ‰“åŒ…æ–‡ä»¶çš„ä¸ªæ•°</li>\n<li><code>MinChunkSizePlugin</code>ï¼šæ ¹æ® chars å¤§å°ï¼Œå¦‚æœå°äºè®¾å®šçš„æœ€å°å€¼ï¼Œå°±åˆå¹¶è¿™äº›å°æ¨¡å—ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°</li>\n<li><code>OccurrenceOrderPlugin</code>ï¼šæ ¹æ®æ¨¡å—è°ƒç”¨æ¬¡æ•°ï¼Œç»™æ¨¡å—åˆ†é… idsï¼Œå¸¸è¢«è°ƒç”¨çš„idsåˆ†é…æ›´çŸ­çš„ idï¼Œä½¿å¾— ids å¯é¢„æµ‹ï¼Œé™ä½æ–‡ä»¶å¤§å°ï¼Œè¯¥æ¨¡å—æ¨èä½¿ç”¨</li>\n<li><code>UglifyJsPlugin</code>ï¼šå‹ç¼© js</li>\n<li><code>ngAnnotatePlugin</code>ï¼šä½¿ç”¨ ng-annotate æ¥ç®¡ç† AngularJS çš„ä¸€äº›ä¾èµ–</li>\n<li><code>CommonsChunkPlugin</code>ï¼šå¤šä¸ª html å…±ç”¨ä¸€ä¸ªjsæ–‡ä»¶(chunk)</li>\n<li><code>HotModuleReplacementPlugin</code>ï¼šæ¨¡å—çƒ­æ›¿æ¢,å¦‚æœä¸åœ¨ dev-server æ¨¡å¼ä¸‹ï¼Œéœ€è¦è®°å½•æ•°æ®ï¼ŒrecordPathï¼Œç”Ÿæˆæ¯ä¸ªæ¨¡å—çš„çƒ­æ›´æ–°æ¨¡å—</li>\n<li><code>ProgressPlugin</code>ï¼šç¼–è¯‘è¿›åº¦</li>\n<li><code>NoErrorsPlugin</code>ï¼šæŠ¥é”™ä½†ä¸é€€å‡º webpack è¿›ç¨‹</li>\n<li><code>HtmlWebpackPlugin</code>ï¼šç”Ÿæˆ html</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æ‹“å±•é˜…è¯»\"><a href=\"#æ‹“å±•é˜…è¯»\" class=\"headerlink\" title=\"æ‹“å±•é˜…è¯»\"></a>æ‹“å±•é˜…è¯»</h3>","site":{"data":{}},"excerpt":"","more":"<p>Gulp å’Œ webpack ä¹‹é—´çš„å…³ç³»æ˜¯ååˆ†æš§æ˜§çš„ï¼Œå´ä¹Ÿç»å¸¸è¢«äººè¯¯è§£ï¼Œä»¥ä¸ºå®ƒä¿©æ˜¯ç«äº‰å…³ç³»ï¼Œå…¶å®ä¸ç„¶ã€‚</p>\n<p>Gulp æ˜¯ä¸€ä¸ªä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œè®©ç®€å•çš„ä»»åŠ¡æ›´æ¸…æ™°ï¼Œè®©å¤æ‚çš„ä»»åŠ¡æ˜“äºæŒæ§ï¼›è€Œ webpack çš„ç†å¿µæ˜¯ï¼Œä¸€åˆ‡çš†ä¸ºæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åœ¨æ‰“åŒ…çš„æ—¶å€™éƒ½ä¼šç»è¿‡ä¸€ä¸ªå«åš loader çš„ä¸œè¥¿ï¼Œå®ƒå…·å¤‡éå¸¸å¼ºå¤§çš„ç²¾ç»†åŒ–ç®¡ç†èƒ½åŠ›ï¼Œä¸»è¦è§£å†³çš„æ˜¯ä¾èµ–åˆ†æé—®é¢˜ã€‚</p>\n<p>Gulp çš„å­¦ä¹ ï¼Œææ¸…æ¥š <code>gulp.src</code>, <code>gulp.dest</code>, <code>gulp.task</code>, <code>gulp.watch</code> å››ä¸ª API å°±å·®ä¸å¤šäº†ï¼Œå®ƒçš„åº•å±‚åŸç†æ˜¯ä½¿ç”¨ Node çš„ Transform Streamsï¼Œè¿™æ˜¯ä¸€ä¸ªå¯è¯»å¯å†™å¯åšä¸­é—´è½¬æ¢çš„ Streams ç®¡é“ï¼Œç”±äºä» src åˆ° dest è¿‡ç¨‹ä¸­ï¼Œæ–‡ä»¶ä¸€ç›´åœç•™åœ¨ Streams ä¸­ï¼Œæ²¡æœ‰è½åœ°æˆä¸ºå®ä½“æ–‡ä»¶ï¼Œæ‰€ä»¥æ•´ä½“è¿ä½œæ•ˆç‡éå¸¸é«˜ã€‚</p>\n<p>Webpack æ¦‚å¿µå¾ˆå¤šï¼Œä½†ææ¸…æ¥š <code>entry</code>ï¼Œ<code>output</code> å’Œ <code>loader</code> ä¸‰ä¸ªå…³é”®ç‚¹ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è§£å†³ç®€å•çš„é—®é¢˜äº†ï¼Œç¨å¾®å¤æ‚çš„åœºæ™¯ä¸»è¦åŒ…æ‹¬å¯¹èµ„æºçš„åˆå¹¶å¤„ç†ã€åˆ†æ‹†å¤„ç†ã€å¤šæ¬¡æ‰“åŒ…ç­‰ï¼Œéƒ¨åˆ†è¿™æ ·çš„é—®é¢˜å¯ä»¥ä½¿ç”¨æ’ä»¶è¾…åŠ©è§£å†³ï¼Œä½†æ˜¯ Webpack çš„å¼ºå¤§å¹¶ä¸åœ¨æ–‡ä»¶å¤„ç†ï¼Œè€Œæ˜¯ä¾èµ–åˆ†æï¼Œæ‰€ä»¥åœ¨æµç¨‹æ“ä½œç‰¹åˆ«å¤æ‚çš„æƒ…å†µï¼Œwebpack å¹¶ä¸èƒ½èƒœä»»å·¥ä½œï¼Œå¾€å¾€ä¼šè¢«ä½œä¸º gulp çš„ä¸€ä¸ª taskï¼Œæ•´ä½“å·¥ä½œæµäº¤ç»™ gulp ä¸»å¯¼ã€‚</p>\n<h3 id=\"æ’ä»¶æ¨è\"><a href=\"#æ’ä»¶æ¨è\" class=\"headerlink\" title=\"æ’ä»¶æ¨è\"></a>æ’ä»¶æ¨è</h3><p>ä¸‹é¢æ¨èå‡ ä¸ª gulp çš„æ’ä»¶å§ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ï¼š</p>\n<ul>\n<li><code>gulp-load-plugins</code>ï¼šè‡ªåŠ¨åŠ è½½ package.json ä¸­çš„ gulp æ’ä»¶</li>\n<li><code>gulp-rename</code>ï¼š é‡å‘½å</li>\n<li><code>gulp-uglify</code>ï¼šæ–‡ä»¶å‹ç¼©</li>\n<li><code>gulp-concat</code>ï¼šæ–‡ä»¶åˆå¹¶</li>\n<li><code>gulp-less</code>ï¼šç¼–è¯‘ less</li>\n<li><code>gulp-sass</code>ï¼šç¼–è¯‘ sass</li>\n<li><code>gulp-clean-css</code>ï¼šå‹ç¼© CSS æ–‡ä»¶</li>\n<li><code>gulp-htmlmin</code>ï¼šå‹ç¼© HTML æ–‡ä»¶</li>\n<li><code>gulp-babel</code>ï¼šä½¿ç”¨ babel ç¼–è¯‘ JS æ–‡ä»¶</li>\n<li><code>gulp-jshint</code>ï¼šjshint æ£€æŸ¥</li>\n<li><code>gulp-imagemin</code>ï¼šå‹ç¼© jpgã€pngã€gif ç­‰å›¾ç‰‡</li>\n<li><code>gulp-livereload</code>ï¼šå½“ä»£ç å˜åŒ–æ—¶ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ·æ–°é¡µé¢</li>\n</ul>\n<p>ä¹Ÿæ¨èå‡ ä¸ª webpack å¸¸ç”¨çš„ loader å’Œ pluginï¼š</p>\n<ul>\n<li>Loader åˆ—è¡¨<ul>\n<li><code>less-loader, sass-loader</code>ï¼šå¤„ç†æ ·å¼</li>\n<li><code>url-loader, file-loader</code>ï¼šä¸¤ä¸ªéƒ½å¿…é¡»ç”¨ä¸Šã€‚å¦åˆ™è¶…è¿‡å¤§å°é™åˆ¶çš„å›¾ç‰‡æ— æ³•ç”Ÿæˆåˆ°ç›®æ ‡æ–‡ä»¶å¤¹ä¸­</li>\n<li><code>babel-loaderï¼Œbabel-preset-es2015ï¼Œbabel-preset-react</code>ï¼šjså¤„ç†ï¼Œè½¬ç </li>\n<li><code>expose-loader</code>ï¼š å°†jsæ¨¡å—æš´éœ²åˆ°å…¨å±€</li>\n</ul>\n</li>\n<li>Plugin åˆ—è¡¨<ul>\n<li><code>NormalModuleReplacementPlugin</code>ï¼šåŒ¹é… resourceRegExpï¼Œæ›¿æ¢ä¸º newResource</li>\n<li><code>ContextReplacementPlugin</code>ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶</li>\n<li><code>IgnorePlugin</code>ï¼šä¸æ‰“åŒ…åŒ¹é…æ–‡ä»¶</li>\n<li><code>PrefetchPlugin</code>ï¼šé¢„åŠ è½½çš„æ’ä»¶ï¼Œæé«˜æ€§èƒ½</li>\n<li><code>ResolverPlugin</code>ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶</li>\n<li><code>ContextReplacementPlugin</code>ï¼šæ›¿æ¢ä¸Šä¸‹æ–‡çš„æ’ä»¶</li>\n<li><code>DedupePlugin</code>ï¼šæ‰“åŒ…çš„æ—¶å€™åˆ é™¤é‡å¤æˆ–è€…ç›¸ä¼¼çš„æ–‡ä»¶</li>\n<li><code>MinChunkSizePlugin</code>ï¼šæŠŠå¤šä¸ªå°æ¨¡å—è¿›è¡Œåˆå¹¶ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°</li>\n<li><code>LimitChunkCountPlugin</code>ï¼šé™åˆ¶æ‰“åŒ…æ–‡ä»¶çš„ä¸ªæ•°</li>\n<li><code>MinChunkSizePlugin</code>ï¼šæ ¹æ® chars å¤§å°ï¼Œå¦‚æœå°äºè®¾å®šçš„æœ€å°å€¼ï¼Œå°±åˆå¹¶è¿™äº›å°æ¨¡å—ï¼Œä»¥å‡å°‘æ–‡ä»¶çš„å¤§å°</li>\n<li><code>OccurrenceOrderPlugin</code>ï¼šæ ¹æ®æ¨¡å—è°ƒç”¨æ¬¡æ•°ï¼Œç»™æ¨¡å—åˆ†é… idsï¼Œå¸¸è¢«è°ƒç”¨çš„idsåˆ†é…æ›´çŸ­çš„ idï¼Œä½¿å¾— ids å¯é¢„æµ‹ï¼Œé™ä½æ–‡ä»¶å¤§å°ï¼Œè¯¥æ¨¡å—æ¨èä½¿ç”¨</li>\n<li><code>UglifyJsPlugin</code>ï¼šå‹ç¼© js</li>\n<li><code>ngAnnotatePlugin</code>ï¼šä½¿ç”¨ ng-annotate æ¥ç®¡ç† AngularJS çš„ä¸€äº›ä¾èµ–</li>\n<li><code>CommonsChunkPlugin</code>ï¼šå¤šä¸ª html å…±ç”¨ä¸€ä¸ªjsæ–‡ä»¶(chunk)</li>\n<li><code>HotModuleReplacementPlugin</code>ï¼šæ¨¡å—çƒ­æ›¿æ¢,å¦‚æœä¸åœ¨ dev-server æ¨¡å¼ä¸‹ï¼Œéœ€è¦è®°å½•æ•°æ®ï¼ŒrecordPathï¼Œç”Ÿæˆæ¯ä¸ªæ¨¡å—çš„çƒ­æ›´æ–°æ¨¡å—</li>\n<li><code>ProgressPlugin</code>ï¼šç¼–è¯‘è¿›åº¦</li>\n<li><code>NoErrorsPlugin</code>ï¼šæŠ¥é”™ä½†ä¸é€€å‡º webpack è¿›ç¨‹</li>\n<li><code>HtmlWebpackPlugin</code>ï¼šç”Ÿæˆ html</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"æ‹“å±•é˜…è¯»\"><a href=\"#æ‹“å±•é˜…è¯»\" class=\"headerlink\" title=\"æ‹“å±•é˜…è¯»\"></a>æ‹“å±•é˜…è¯»</h3>"},{"layout":"post","title":"Redux Async Function","subtitle":"Async","date":"2017-03-21T16:00:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n# Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\n\nä½œä¸ºreactç¤¾åŒºæœ€çƒ­é—¨çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½å‡†å¤‡ç”šè‡³æ­£åœ¨ä½¿ç”¨Reduxã€‚\n\nç”±äºReduxçš„ç†å¿µéå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰è¿½æ±‚å¤§è€Œå…¨ï¼Œè¿™ä»½æ¶æ„ä¸Šçš„ä¼˜é›…å´åœ¨æŸç§ç¨‹åº¦ä¸Šä¼¤å®³äº†ä½¿ç”¨ä½“éªŒï¼šä¸èƒ½å¼€ç®±å³ç”¨ï¼Œç”šè‡³æ˜¯å¼‚æ­¥è¿™ç§æœ€å¸¸è§çš„åœºæ™¯ä¹Ÿè¦å€ŸåŠ©ç¤¾åŒºæ–¹æ¡ˆã€‚\n\nå¦‚æœä½ å·²ç»æŒ‘èŠ±äº†çœ¼ï¼Œæˆ–è€…æ­£åœ¨æŒ‘ä½†ä¸çŸ¥é“æ˜¯å¦é€‚åˆï¼Œæˆ–è€…å·²ç»æŒ‘äº†ä½†ä¸çŸ¥é“ä¼šä¸ä¼šæœ‰å‘ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥é€‚åˆä½ ã€‚\n\næœ¬æ–‡ä¼šä»ä¸€äº›å¸¸è§çš„Reduxå¼‚æ­¥æ–¹æ¡ˆå‡ºå‘ï¼Œä»‹ç»å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œè¿›è€Œè®¨è®ºä¸€äº›ä¸å¼‚æ­¥ç›¸ä¼´çš„å¸¸è§åœºæ™¯ï¼Œå¸®åŠ©ä½ åœ¨é€‰å‹æ—¶æ›´å¥½åœ°æƒè¡¡åˆ©å¼Šã€‚\n\n\n## ç®€å•æ–¹æ¡ˆ\n### redux-thunkï¼šæŒ‡è·¯å…ˆé©±\n\n[Github](https://github.com/gaearon/redux-thunk)\n\n> Reduxæœ¬èº«åªèƒ½å¤„ç†åŒæ­¥çš„Actionï¼Œä½†å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥æ‹¦æˆªå¤„ç†å…¶å®ƒç±»å‹çš„actionï¼Œæ¯”å¦‚å‡½æ•°(Thunk)ï¼Œå†ç”¨å›è°ƒè§¦å‘æ™®é€šAction\n> ä»è€Œå®ç°å¼‚æ­¥å¤„ç†ï¼Œåœ¨è¿™ç‚¹ä¸Šæ‰€æœ‰Reduxçš„å¼‚æ­¥æ–¹æ¡ˆéƒ½æ˜¯ç±»ä¼¼çš„ã€‚\n\n### redux-promiseï¼šç˜¦èº«è¿‡å¤´\n\nç”±äºredux-thunkå†™èµ·æ¥å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œç¤¾åŒºå½“ç„¶ä¼šæœ‰å…¶å®ƒè½®å­å‡ºç°ã€‚[redux-promise](https://github.com/pburtchaell/redux-promise-middleware)åˆ™æ˜¯å…¶ä¸­æ¯”è¾ƒçŸ¥åçš„ï¼ŒåŒæ ·ä¹Ÿäº«å—äº†å®˜ç½‘å‡ºé•œçš„å¾…é‡ã€‚\n\nå®ƒè‡ªå®šä¹‰äº†ä¸€ä¸ªmiddlewareï¼Œå½“æ£€æµ‹åˆ°æœ‰actionçš„payloadå±æ€§æ˜¯Promiseå¯¹è±¡æ—¶ï¼Œå°±ä¼š:\n\n* è‹¥resolveï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„valueï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€successâ€\n* è‹¥rejectï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„reasonï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€errorâ€\n\n```javascript\n//action types\nconst GET_DATA = 'GET_DATA';\n\n//action creator\nconst getData = function(id) {\n    return {\n        type: GET_DATA,\n        payload: api.getData(id) //payloadä¸ºpromiseå¯¹è±¡\n    }\n}\n\n//reducer\nfunction reducer(oldState, action) {\n    switch(action.type) {\n    case GET_DATA:\n        if (action.status === 'success') {\n            return successState\n        } else {\n               return errorState\n        }\n    }\n}\n```\n\nè¯·ç­‰ç­‰ï¼Œä»»ä½•èƒ½æ˜æ˜¾å‡å°‘ä»£ç é‡çš„æ–¹æ¡ˆï¼Œéƒ½åº”è¯¥å°å¿ƒå®ƒæ˜¯å¦è¿‡åº¦çœç•¥äº†ä»€ä¹ˆä¸œè¥¿ï¼Œå‡è‚¥æ˜¯å¥½äº‹ï¼Œå‡åˆ°éª¨å¤´å°±æ®‹äº†ã€‚\n\n#### åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\n\nå¤šæ•°å¼‚æ­¥åœºæ™¯éƒ½æ˜¯ä¿å®ˆæ›´æ–°çš„ï¼Œå³ç­‰åˆ°è¯·æ±‚æˆåŠŸæ‰æ¸²æŸ“æ•°æ®ã€‚è€Œä¸ä¹‹ç›¸å¯¹çš„ä¹è§‚æ›´æ–°ï¼Œåˆ™æ˜¯ä¸ç­‰å¾…è¯·æ±‚æˆåŠŸï¼Œåœ¨å‘é€è¯·æ±‚çš„åŒæ—¶ç«‹å³æ¸²æŸ“æ•°æ®ã€‚\n\næœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯å¾®ä¿¡ç­‰èŠå¤©å·¥å…·ï¼Œå‘é€æ¶ˆæ¯æ—¶æ¶ˆæ¯ç«‹å³è¿›å…¥äº†å¯¹è¯çª—ï¼Œå¦‚æœå‘é€å¤±è´¥çš„è¯ï¼Œåœ¨æ¶ˆæ¯æ—è¾¹å†ä½œè¡¥å……æç¤ºå³å¯ã€‚è¿™ç§äº¤äº’â€ä¹è§‚â€åœ°ç›¸ä¿¡è¯·æ±‚ä¼šæˆåŠŸï¼Œå› æ­¤ç§°ä½œä¹è§‚æ›´æ–°(Optimistic update)ã€‚\n\nç”±äºä¹è§‚æ›´æ–°å‘ç”Ÿåœ¨ç”¨æˆ·æ“ä½œæ—¶ï¼Œè¦å¤„ç†å®ƒï¼Œæ„å‘³ç€å¿…é¡»æœ‰actionè¡¨ç¤ºç”¨æˆ·çš„åˆå§‹åŠ¨ä½œ\n\nåœ¨ä¸Šé¢redux-thunkçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†GET_DATA, GET_DATA_SUCCESSã€GET_DATA_FAILEDä¸‰ä¸ªactionï¼Œåˆ†åˆ«è¡¨ç¤ºåˆå§‹åŠ¨ä½œã€å¼‚æ­¥æˆåŠŸå’Œå¼‚æ­¥å¤±è´¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªactionä½¿å¾—redux-thunkå…·å¤‡ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚\n\nè€Œåœ¨redux-promiseä¸­ï¼Œæœ€åˆè§¦å‘çš„actionè¢«ä¸­é—´ä»¶æ‹¦æˆªç„¶åè¿‡æ»¤æ‰äº†ã€‚åŸå› å¾ˆç®€å•ï¼Œreduxè®¤å¯çš„actionå¯¹è±¡æ˜¯ plain JavaScript objectsï¼Œå³ç®€å•å¯¹è±¡ï¼Œè€Œåœ¨redux-promiseä¸­ï¼Œåˆå§‹actionçš„payloadæ˜¯ä¸ªPromiseã€‚\n\nå¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨statusè€Œä¸æ˜¯typeæ¥åŒºåˆ†ä¸¤ä¸ªå¼‚æ­¥actionä¹Ÿéå¸¸å€¼å¾—å•†æ¦·ï¼ŒæŒ‰ç…§reduxå¯¹actionçš„å®šä¹‰ä»¥åŠç¤¾åŒºçš„æ™®éå®è·µï¼Œä¸ªäººè¿˜æ˜¯å€¾å‘äºä½¿ç”¨ä¸åŒçš„typeï¼Œç”¨åŒä¸€typeä¸‹çš„ä¸åŒstatusåŒºåˆ†actioné¢å¤–å¢åŠ äº†ä¸€å¥—éšå½¢çš„çº¦å®šï¼Œç”šè‡³ä¸ç¬¦åˆè¯¥redux-promiseä½œè€…è‡ªå·±æ‰€æå€¡çš„FSAï¼Œä½“ç°åœ¨ä»£ç ä¸Šåˆ™æ˜¯åœ¨switch-caseå†…å†å¢åŠ ä¸€å±‚åˆ¤æ–­ã€‚\n\n### redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\n\nredux-promise-middlewareç›¸æ¯”redux-promiseï¼Œé‡‡å–äº†æ›´ä¸ºæ¸©å’Œå’Œæ¸è¿›å¼çš„æ€è·¯ï¼Œä¿ç•™äº†å’Œredux-thunkç±»ä¼¼çš„ä¸‰ä¸ªactionã€‚\n\n```javascript\n//action types\nconst GET_DATA = 'GET_DATA',\n    GET_DATA_PENDING = 'GET_DATA_PENDING',\n    GET_DATA_FULFILLED = 'GET_DATA_FULFILLED',\n    GET_DATA_REJECTED = 'GET_DATA_REJECTED';\n//action creator\nconst getData = function(id) {\n    return {\n        type: GET_DATA,\n        payload: {\n            promise: api.getData(id),\n            data: id\n        }\n    }\n}\n\n//reducer\nconst reducer = function(oldState, action) {\n    switch(action.type) {\n    case GET_DATA_PENDING :\n        return oldState; // å¯é€šè¿‡action.payload.dataè·å–id\n    case GET_DATA_FULFILLED :\n        return successState;\n    case GET_DATA_REJECTED :\n        return errorState;\n    }\n}\n```\n\nå¦‚æœä¸éœ€è¦ä¹è§‚æ›´æ–°ï¼Œaction creatorå¯ä»¥ä½¿ç”¨å’Œredux-promiseå®Œå…¨ä¸€æ ·çš„ï¼Œæ›´ç®€æ´çš„å†™æ³•ï¼Œ\n\n```javascript\nconst getData = function(id) {\n    return {\n        type: GET_DATA,\n        payload: api.getData(id) //ç­‰ä»·äº {promise: api.getData(id)}\n    }\n}\n```\n\næ­¤æ—¶åˆå§‹actionGET_DATA_PENDINGä»ç„¶ä¼šè§¦å‘ï¼Œä½†æ˜¯payloadä¸ºç©ºã€‚\n\nç›¸å¯¹redux-promiseäºç²—æš´åœ°è¿‡æ»¤æ‰æ•´ä¸ªåˆå§‹actionï¼Œredux-promise-middlewareé€‰æ‹©åˆ›å»ºä¸€ä¸ªåªè¿‡æ»¤payloadä¸­çš„promiseå±æ€§çš„XXX_PENDINGä½œä¸ºåˆå§‹actionï¼Œä»¥æ­¤ä¿ç•™ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚\n\nåŒæ—¶åœ¨actionçš„åŒºåˆ†ä¸Šï¼Œå®ƒé€‰æ‹©äº†å›å½’typeçš„â€æ­£é€”â€ï¼Œ_PENDINGã€_FULFILLEDã€_REJECTEDç­‰åç¼€å€Ÿç”¨äº†promiseè§„èŒƒ (å½“ç„¶å®ƒä»¬æ˜¯å¯é…ç½®çš„) ã€‚\n\nå®ƒçš„é—æ†¾åˆ™æ˜¯åªåœ¨actionå±‚å®ç°äº†ç®€åŒ–ï¼Œå¯¹reducerå±‚åˆ™æŸæ‰‹æ— ç­–ã€‚å¦å¤–ï¼Œç›¸æ¯”redux-thunkï¼Œå®ƒè¿˜å¤šå‡ºäº†ä¸€ä¸ª_PENDINGçš„å­—ç¬¦ä¸²æ¨¡æ¿ä»£ç (ä¸‰ä¸ªactionå´éœ€è¦å››ä¸ªtype)ã€‚\n\n> ç¤¾åŒºæœ‰ç±»ä¼¼type-to-reducerè¿™æ ·è¯•å›¾ç®€åŒ–reducerçš„åº“ã€‚ä½†ç”±äºreducerå’Œå¼‚æ­¥actioné€šå¸¸æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„æ–¹æ¡ˆï¼Œreducerç›¸å…³çš„åº“æ— æ³•å»çŒœæµ‹å¼‚æ­¥actionçš„åç¼€æ˜¯ä»€ä¹ˆ(ç”šè‡³æœ‰æ²¡æœ‰åç¼€)ï¼Œç¤¾åŒºä¹Ÿæ²¡æœ‰ç›¸å…³æ ‡å‡†ï¼Œä¹Ÿå°±å¾ˆéš¾å¯¹å¼‚æ­¥åšå‡ºç²¾ç®€å’ŒæŠ½è±¡äº†ã€‚\n\n### redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\n\næ— è®ºæ˜¯redux-thunkè¿˜æ˜¯redux-promise-middlewareï¼Œæ¨¡æ¿ä»£ç éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ¯æ¬¡å†™XXX_COMPLETEDè¿™æ ·çš„ä»£ç éƒ½è§‰å¾—æ˜¯åœ¨æµªè´¹ç”Ÿå‘½â€”â€”ä½ å¾—å…ˆåœ¨å¸¸é‡ä¸­å£°æ˜å®ƒä»¬ï¼Œå†åœ¨actionä¸­å¼•ç”¨ï¼Œç„¶åæ˜¯reducerï¼Œå‡è®¾åƒredux-thunkä¸€æ ·æ¯ä¸ªå¼‚æ­¥actionæœ‰ä¸‰ä¸ªtypeï¼Œä¸‰ä¸ªæ–‡ä»¶åŠ èµ·æ¥ä½ å°±å¾—å†™ä¹æ¬¡!\n\nå›½å¤–å¼€å‘è€…ä¹Ÿæœ‰ç›¸åŒçš„æŠ¥æ€¨ï¼š\n\næœ‰æ²¡æœ‰åŠæ³•è®©ä»£ç æ—¢åƒredux-promiseä¸€æ ·ç®€æ´ï¼Œåˆèƒ½ä¿æŒä¹è§‚æ›´æ–°çš„èƒ½åŠ›å‘¢ï¼Ÿ\n\nredux-action-toolsæ˜¯æˆ‘ç»™å‡ºçš„ç­”æ¡ˆï¼š\n\n```javascript\nconst GET_DATA = 'GET_DATA';\n\n//action creator\nconst getData = createAsyncAction(GET_DATA, function(id) {\n    return api.getData(id)\n})\n\n//reducer\nconst reducer = createReducer()\n    .when(getData, (oldState, action) => oldState)\n    .done((oldState, action) => successState)\n    .failed((oldState, action) => errorState)\n    .build()\n```\n\nredux-action-toolsåœ¨actionå±‚é¢åšçš„äº‹æƒ…ä¸å‰é¢å‡ ä¸ªåº“å¤§åŒå°å¼‚ï¼šåŒæ ·æ˜¯æ´¾å‘äº†ä¸‰ä¸ªactionï¼šGET_DATA/GET_DATA_SUCCESS/GET_DATA_FAILEDã€‚è¿™ä¸‰ä¸ªactionçš„æè¿°è§ä¸‹è¡¨ï¼š\n\ntype When payload meta.asyncPhase ${actionName} å¼‚æ­¥å¼€å§‹å‰ åŒæ­¥è°ƒç”¨å‚æ•° â€˜STARTâ€™ ${actionName}_COMPLETED å¼‚æ­¥æˆåŠŸ value of promise â€˜COMPLETEDâ€™ ${actionName}_FAILED å¼‚æ­¥å¤±è´¥ reason of promise â€˜FAILEDâ€™\ncreateAsyncActionå‚è€ƒäº†redux-promiseä½œè€…å†™çš„redux-actions ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n* actionName å­—ç¬¦ä¸²ï¼Œæ‰€æœ‰æ´¾ç”Ÿactionçš„åå­—éƒ½ä»¥å®ƒä¸ºåŸºç¡€ï¼Œåˆå§‹actionåˆ™ä¸å®ƒåŒå\n* promiseCreator å‡½æ•°ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡\n* metaCreator å‡½æ•°ï¼Œå¯é€‰ï¼Œä½œç”¨åé¢ä¼šæ¼”ç¤ºåˆ°\n\nç›®å‰çœ‹æ¥ï¼Œå…¶å®å’Œredux-promise/redux-promise-middlewareå¤§åŒå°å¼‚ã€‚è€ŒçœŸæ­£ä¸åŒçš„ï¼Œæ˜¯å®ƒåŒæ—¶ç®€åŒ–äº†reducerå±‚! è¿™ç§ç®€åŒ–æ¥è‡ªäºå¯¹å¼‚æ­¥è¡Œä¸ºä»è¯­ä¹‰è§’åº¦çš„æŠ½è±¡ï¼š\n\n> å½“(when)åˆå§‹actionå‘ç”Ÿæ—¶å¤„ç†åŒæ­¥æ›´æ–°ï¼Œè‹¥å¼‚æ­¥æˆåŠŸ(done)åˆ™å¤„ç†æˆåŠŸé€»è¾‘ï¼Œè‹¥å¼‚æ­¥å¤±è´¥(failed)åˆ™å¤„ç†å¤±è´¥é€»è¾‘\n\næŠ½ç¦»å‡ºwhen/done/failedä¸‰ä¸ªå…³é”®è¯ä½œä¸ºapiï¼Œå¹¶ä½¿ç”¨é“¾å¼è°ƒç”¨å°†ä»–ä»¬ä¸²è”èµ·æ¥ï¼šwhenå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šactionNameå’Œhandlerï¼Œå…¶ä¸­handleræ˜¯å¯é€‰çš„ï¼Œdoneå’Œfailedåˆ™åªæ¥æ”¶ä¸€ä¸ªhandlerå‚æ•°ï¼Œå¹¶ä¸”åªèƒ½åœ¨whenä¹‹åè°ƒç”¨â€”â€”ä»–ä»¬åˆ†åˆ«å¤„ç† ${actionName}_SUCCESS å’Œ ${actionName}_FAILED .\n\næ— è®ºæ˜¯actionè¿˜æ˜¯reducerå±‚ï¼ŒXX_SUCCESS/XX_FAILEDç›¸å…³çš„ä»£ç éƒ½è¢«å°è£…äº†èµ·æ¥ï¼Œæ­£å¦‚åœ¨ä¾‹å­ä¸­çœ‹åˆ°çš„â€”â€”ä½ ç”šè‡³ä¸éœ€è¦å£°æ˜å®ƒä»¬! åˆ›å»ºä¸€ä¸ªå¼‚æ­¥actionï¼Œç„¶åå¤„ç†å®ƒçš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µï¼Œäº‹æƒ…æœ¬è¯¥è¿™ä¹ˆç®€å•ã€‚\n\næ›´è¿›ä¸€æ­¥çš„ï¼Œè¿™ä¸‰ä¸ªactioné»˜è®¤éƒ½æ ¹æ®å½“å‰æ‰€å¤„çš„å¼‚æ­¥é˜¶æ®µï¼Œè®¾ç½®äº†ä¸åŒçš„meta(è§ä¸Šè¡¨ä¸­çš„meta.asyncPhase)ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿç”¨åœºæ™¯è¯´è¯ï¼š\n\n#### åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\n\nå®ƒä»¬æ˜¯å¼‚æ­¥ä¸å¯å›é¿çš„ä¸¤ä¸ªåœºæ™¯ï¼Œå‡ ä¹æ¯ä¸ªé¡¹ç›®ä¼šé‡åˆ°ã€‚\nä»¥å¼‚æ­¥è¯·æ±‚çš„å¤±è´¥å¤„ç†ä¸ºä¾‹ï¼Œæ¯ä¸ªé¡¹ç›®é€šå¸¸éƒ½æœ‰ä¸€å¥—æ¯”è¾ƒé€šç”¨çš„ï¼Œé€‚åˆå¤šæ•°åœºæ™¯çš„å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚å¼¹çª—æç¤ºã€‚åŒæ—¶åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œåˆéœ€è¦ç»•è¿‡é€šç”¨é€»è¾‘è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œæ¯”å¦‚è¡¨å•çš„å¼‚æ­¥æ ¡éªŒ\n\nè€Œåœ¨å®ç°é€šç”¨å¤„ç†é€»è¾‘æ—¶ï¼Œå¸¸è§çš„é—®é¢˜æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n\n* åº•å±‚å¤„ç†ï¼Œæ‰©å±•æ€§ä¸è¶³\n\n```javascript\n function fetchWrapper(args) {\n     return fetch.apply(fetch, args)\n         .catch(commonErrorHandler)\n }\n```\n\nåœ¨è¾ƒåº•å±‚å°è£…ajaxåº“å¯ä»¥è½»æ¾å®ç°å…¨å±€å¤„ç†ï¼Œä½†é—®é¢˜ä¹Ÿéå¸¸æ˜æ˜¾ï¼š\n\nä¸€æ˜¯æ‰©å±•æ€§ä¸è¶³ï¼Œæ¯”å¦‚å°‘æ•°åœºæ™¯æƒ³è¦ç»•è¿‡é€šç”¨å¤„ç†é€»è¾‘ï¼Œè¿˜æœ‰ä¸€äº›åœºæ™¯é”™è¯¯æ˜¯å‰ç«¯ç”Ÿæˆè€Œéç›´æ¥æ¥è‡ªäºè¯·æ±‚ï¼›\näºŒæ˜¯ä¸æ˜“ç»„åˆï¼Œæ¯”å¦‚æœ‰çš„åœºæ™¯ä¸€ä¸ªactionéœ€è¦å¤šä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œä½†å¼‚å¸¸å¤„ç†å’Œloadingæ˜¯ä¸éœ€è¦é‡å¤çš„ï¼Œå› ä¸ºç”¨æˆ·ä¸éœ€è¦çŸ¥é“ä¸€ä¸ªåŠ¨ä½œæœ‰å¤šå°‘ä¸ªè¯·æ±‚ã€‚\n\n* ä¸å¤Ÿå†…èšï¼Œä¾µå…¥ä¸šåŠ¡ä»£ç \n\n```javascript\n //action creator\n const getData = createAsyncAction(GET_DATA, function(id) {\n     return api.getData(id)\n         .catch(commonErrorHandler) //è°ƒç”¨é”™è¯¯å¤„ç†å‡½æ•°\n })\n```\n\nåœ¨æœ‰ä¸šåŠ¡æ„ä¹‰çš„actionå±‚è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ—¢èƒ½æŒ‰éœ€è°ƒç”¨ï¼Œåˆä¸å¦¨ç¢å¼‚æ­¥è¯·æ±‚çš„ç»„åˆã€‚ä½†ç”±äºé€šç”¨å¤„ç†å¾€å¾€é€‚ç”¨äºå¤šæ•°åœºæ™¯ï¼Œè¿™æ ·å†™ä¼šå¯¼è‡´ä¸šåŠ¡ä»£ç å˜å¾—å†—ä½™ï¼Œå› ä¸ºå‡ ä¹æ¯ä¸ªactionéƒ½å¾—è¿™ä¹ˆå†™ã€‚\n\n* é«˜è€¦åˆï¼Œé«˜é£é™©\n\nä¹Ÿæœ‰äººæŠŠä¸Šé¢çš„æ–¹æ¡ˆåšä¸ªä¾èµ–åè½¬ï¼Œæ”¹ä¸ºåœ¨é€šç”¨é€»è¾‘é‡Œç›‘å¬ä¸šåŠ¡actionï¼š\n\n```javascript\n function commonErrorReducer(oldState, action) {\n     switch(action.type) {\n     case GET_DATA_FAILED:\n     case PUT_DATA_FAILED:\n     //... tons of action type\n         return commonErrorHandler(action)\n     }\n }\n```\n\nè¿™æ ·åšçš„æœ¬è´¨æ˜¯æŠŠå†—ä½™ä»ä¸šåŠ¡ä»£ç ä¸­æ‹¿å‡ºæ¥é›†ä¸­ç®¡ç†ã€‚\n\né—®é¢˜åœ¨äºæ¯æ·»åŠ ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½éœ€è¦ä¿®æ”¹å…¬å…±ä»£ç ï¼ŒæŠŠå¯¹åº”çš„action typeåŠ è¿›æ¥ã€‚ä¸”ä¸è¯´å¹¶è¡Œå¼€å‘æ—¶mergeå†²çªï¼Œå¦‚æœåŠ äº†ä¸€ä¸ªå¼‚æ­¥actionï¼Œä½†å¿˜äº†å¾€å…¬å…±å¤„ç†æ–‡ä»¶ä¸­æ·»åŠ â€”â€”è¿™æ˜¯å¾ˆå¯èƒ½ä¼šå‘ç”Ÿçš„â€”â€”è€Œå¼‚å¸¸æ˜¯åˆ†æ”¯æµç¨‹ä¸å®¹æ˜“è¢«æµ‹è¯•å‘ç°ï¼Œç­‰åˆ°å‘ç°ï¼Œå¾ˆå¯èƒ½å°±æ˜¯äº‹æ•…è€Œä¸æ˜¯bugäº†ã€‚\n\né€šè¿‡ä»¥ä¸Šå‡ ç§å¸¸è§æ–¹æ¡ˆçš„åˆ†æï¼Œæˆ‘è®¤ä¸ºæ¯”è¾ƒå®Œå–„çš„é”™è¯¯å¤„ç†(LoadingåŒç†)éœ€è¦å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š\n\n* é¢å‘å¼‚æ­¥åŠ¨ä½œ(action)ï¼Œè€Œéç›´æ¥é¢å‘è¯·æ±‚\n* ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç \n* é»˜è®¤ä½¿ç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ— éœ€é¢å¤–ä»£ç \n* å¯ä»¥ç»•è¿‡é€šç”¨é€»è¾‘\n\nè€Œå€ŸåŠ©redux-action-toolsæä¾›çš„meta.asyncPhaseï¼Œå¯ä»¥è½»æ˜“ç”¨middlewareå®ç°ä»¥ä¸Šå…¨éƒ¨éœ€æ±‚!\n\n```javascript\nimport _ from 'lodash'\nimport { ASYNC_PHASES } from 'redux-action-tools'\n\nfunction errorMiddleWare({dispatch}) {\n  return next => action => {\n    const asyncStep = _.get(action, 'meta.asyncStep');\n\n    if (asyncStep === ASYNC_PHASES.FAILED) {\n      dispatch({\n        type: 'COMMON_ERROR',\n        payload: {\n          action\n        }\n      })\n    }\n    next(action);\n  }\n}\n```\n\nä»¥ä¸Šä¸­é—´ä»¶ä¸€æ—¦æ£€æµ‹åˆ°meta.asyncStepå­—æ®µä¸ºFAILEDçš„actionä¾¿è§¦å‘æ–°çš„actionå»è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ã€‚é¢å‘actionã€ä¸ä¾µå…¥ä¸šåŠ¡ã€é»˜è®¤å·¥ä½œ (åªè¦æ˜¯ç”¨createAsyncActionå£°æ˜çš„å¼‚æ­¥) ! è½»æ¾å®ç°äº†ç†æƒ³éœ€æ±‚ä¸­çš„å‰ä¸‰ç‚¹ï¼Œé‚£å¦‚ä½•å®šåˆ¶å‘¢ï¼Ÿæ—¢ç„¶æ‹¦æˆªæ˜¯é¢å‘metaçš„ï¼Œåªè¦åœ¨åˆ›å»ºactionæ—¶æ”¯æŒå¯¹metaçš„è‡ªå®šä¹‰å°±è¡Œäº†ï¼Œè€ŒcreateAsyncActionçš„ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ä¸ºæ­¤å‡†å¤‡çš„ï¼š\n\n```javascript\nimport _ from 'lodash'\nimport { ASYNC_PHASES } from 'redux-action-tools'\n\nconst customizedAction = createAsyncAction(\n  type,\n  promiseCreator, //type å’Œ promiseCreatoræ­¤å¤„æ— ä¸åŒæ•…çœç•¥\n  (payload, defaultMeta) => {\n    return { ...defaultMeta, omitError: true }; //å‘metaä¸­æ·»åŠ é…ç½®å‚æ•°\n  }\n)\n\nfunction errorMiddleWare({dispatch}) {\n  return next => action => {\n    const asyncStep = _.get(action, 'meta.asyncStep');\n    const omitError = _.get(action, 'meta.omitError'); //è·å–é…ç½®å‚æ•°\n\n    if (!omitError && asyncStep === ASYNC_PHASES.FAILED) {\n      dispatch({\n        type: 'COMMON_ERROR',\n        payload: {\n          action\n        }\n      })\n    }\n    next(action);\n  }\n}\n```\n\nç±»ä¼¼çš„ï¼Œä½ å¯ä»¥æƒ³æƒ³å¦‚ä½•å¤„ç†Loadingï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯å»ºè®®å°½é‡ç”¨å¢é‡é…ç½®çš„æ–¹å¼è¿›è¡Œæ‰©å±•ï¼Œè€Œä¸è¦è½»æ˜“åˆ é™¤å’Œä¿®æ”¹meta.asyncPhaseã€‚\næ¯”å¦‚ä¸Šä¾‹å¯ä»¥é€šè¿‡åˆ é™¤meta.asyncPhaseå®ç°åŒæ ·åŠŸèƒ½ï¼Œä½†å¦‚æœåŒæ—¶è¿˜æœ‰å…¶å®ƒåœ°æ–¹ä¹Ÿä¾èµ–meta.asyncPhase(æ¯”å¦‚loadingMiddleware)ï¼Œå°±å¯èƒ½å¯¼è‡´æœ¬æ„æ˜¯å®šåˆ¶é”™è¯¯å¤„ç†ï¼Œå´æ”¹å˜äº†Loadingçš„è¡Œä¸ºï¼Œå®¢è§‚æ¥è®²è¿™å±‚é£é™©æ˜¯åŸºäºmetaæ‹¦æˆªæ–¹æ¡ˆçš„æœ€å¤§ç¼ºç‚¹ï¼Œç„¶è€Œç›¸æ¯”å¤šæ•°åœºæ™¯çš„ä¾¿åˆ©ã€å¥å£®ï¼Œä¸ªäººè®¤ä¸ºç‰¹æ®Šåœºæ™¯çš„é£é™©æ˜¯å¯ä»¥æ¥å—çš„ï¼Œæ¯•ç«Ÿè¿™äº›åœºæ™¯åœ¨æ•´ä¸ªå¼€å‘æµ‹è¯•æµç¨‹å®¹æ˜“è·å¾—æ›´å¤šå…³æ³¨ã€‚\n\n## è¿›é˜¶æ–¹æ¡ˆ\n\nä¸Šé¢æ‰€æœ‰çš„æ–¹æ¡ˆï¼Œéƒ½æŠŠå¼‚æ­¥è¯·æ±‚è¿™ä¸€åŠ¨ä½œæ”¾åœ¨äº†action creatorä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç®€å•ç›´è§‚ï¼Œä¸”å’ŒFluxç¤¾åŒºä¸€è„‰ç›¸æ‰¿(è§ä¸‹å›¾)ã€‚å› æ­¤ä¸ªäººå°†å®ƒä»¬å½’ä¸ºç›¸å¯¹ç®€å•çš„ä¸€ç±»ã€‚\n\nä¸‹é¢å°†è¦ä»‹ç»çš„ï¼Œæ˜¯ç›¸å¯¹å¤æ‚ä¸€ç±»ï¼Œå®ƒä»¬éƒ½é‡‡ç”¨äº†ä¸ä¸Šå›¾ä¸åŒçš„æ€è·¯ï¼Œå»è¿½æ±‚æ›´ä¼˜é›…çš„æ¶æ„ã€è§£å†³æ›´å¤æ‚çš„é—®é¢˜\n\n### redux-loopï¼šåˆ†å½¢! ç»„åˆ!\n\nä¼—æ‰€å‘¨çŸ¥ï¼ŒReduxæ˜¯å€Ÿé‰´è‡ªElmçš„ï¼Œç„¶è€Œåœ¨Elmä¸­ï¼Œå¼‚æ­¥çš„å¤„ç†å´å¹¶ä¸æ˜¯åœ¨action creatorå±‚ï¼Œè€Œæ˜¯åœ¨reducer(Elmä¸­ç§°update)å±‚ï¼š\n\n> å›¾ç‰‡æ¥æºäºï¼š [jarvisaoieong/redux-architecture](https://github.com/jarvisaoieong/redux-architecture)\n\nè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å®ç°å½»åº•çš„å¯ç»„åˆæ€§(composable)ã€‚åœ¨reduxä¸­ï¼Œreducerä½œä¸ºå‡½æ•°æ˜¯å¯ç»„åˆçš„ï¼Œactionæ­£å¸¸æƒ…å†µä¸‹ä½œä¸ºçº¯å¯¹è±¡ä¹Ÿæ˜¯å¯ç»„åˆçš„ï¼Œç„¶è€Œä¸€æ—¦æ¶‰åŠå¼‚æ­¥ï¼Œå½“actionåµŒå¥—ç»„åˆçš„æ—¶å€™ï¼Œä¸­é—´ä»¶å°±æ— æ³•æ­£å¸¸è¯†åˆ«ï¼Œè¿™ä¸ªé—®é¢˜è®©reduxä½œè€…Danä¹Ÿå‘å‡ºæ„Ÿå¹ There is no easy way to compose Redux applicationså¹¶ä¸”å¼€äº†ä¸€ä¸ªè‡³ä»Šä»ç„¶opençš„issueï¼Œå¯¹ç»„åˆã€åˆ†å½¢ä¸reduxçš„æ•…äº‹ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è§‚æ‘©ä»¥ä¸Šé“¾æ¥ï¼Œç”šè‡³äº†è§£ä¸€ä¸‹Elmï¼Œç¯‡å¹…æ‰€é™ï¼Œæœ¬æ–‡éš¾ä»¥å°½è¿°ã€‚\n\nè€Œredux-loopï¼Œåˆ™æ˜¯åœ¨è¿™æ–¹é¢çš„ä¸€ä¸ªå°è¯•ï¼Œå®ƒæ›´å½»åº•çš„æ¨¡ä»¿äº†Elmçš„æ¨¡å¼ï¼šå¼•å…¥Effectsçš„æ¦‚å¿µå¹¶å°†å…¶ç½®å…¥reducerï¼Œå®˜æ–¹ç¤ºä¾‹å¦‚ä¸‹ï¼š\n\n```javascript\nimport { Effects, loop } from 'redux-loop';\nimport { loadingStart, loadingSuccess, loadingFailure } from './actions';\n\nexport function fetchDetails(id) {\n  return fetch(`/api/details/${id}`)\n    .then((r) => r.json())\n    .then(loadingSuccess)\n    .catch(loadingFailure);\n}\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case 'LOADING_START':\n      return loop(\n        { ...state, loading: true },\n        Effects.promise(fetchDetails, action.payload.id)\n      ); // åŒæ—¶è¿”å›çŠ¶æ€ä¸å‰¯ä½œç”¨\n\n    case 'LOADING_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        details: action.payload\n      };\n\n    case 'LOADING_FAILURE':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.message\n      };\n\n    default:\n      return state;\n  }\n}\n```\n\næ³¨æ„åœ¨reducerä¸­ï¼Œå½“å¤„ç†LOADING_STARTæ—¶ï¼Œå¹¶æ²¡æœ‰ç›´æ¥è¿”å›stateå¯¹è±¡ï¼Œè€Œæ˜¯ç”¨loopå‡½æ•°å°†stateå’ŒEffectâ€æ‰“åŒ…â€è¿”å›(å®é™…ä¸Šè¿™ä¸ªè¿”å›å€¼æ˜¯æ•°ç»„[State, Effect]ï¼Œå’ŒElmçš„æ–¹å¼éå¸¸æ¥è¿‘)ã€‚\n\nç„¶è€Œä¿®æ”¹reducerçš„è¿”å›ç±»å‹æ˜¾ç„¶æ˜¯æ¯”è¾ƒæš´åŠ›çš„åšæ³•ï¼Œé™¤éReduxå®˜æ–¹å‡ºé¢ï¼Œå¦åˆ™å¾ˆéš¾è·å¾—ç¤¾åŒºçš„å¹¿æ³›è®¤åŒã€‚æ›´å¤æ‚çš„è¿”å›ç±»å‹ä¼šè®©å¾ˆå¤šå·²æœ‰çš„APIï¼Œä¸‰æ–¹åº“é¢ä¸´å±é™©ï¼Œç”šè‡³combineReduceréƒ½éœ€è¦ç”¨redux-loopæä¾›çš„å®šåˆ¶ç‰ˆæœ¬ï¼Œè¿™ç§â€ç ´åæ€§â€ä¹Ÿæ˜¯Reduxä½œè€…Danæ²¡æœ‰é‡‡çº³redux-loopè¿›å…¥Reduxæ ¸å¿ƒä»£ç çš„åŸå› ï¼šâ€If a solution doesnâ€™t work with vanilla combineReducers(), it wonâ€™t get into Redux coreâ€ã€‚\n\nå¯¹Elmçš„åˆ†å½¢æ¶æ„æœ‰äº†è§£ï¼Œæƒ³åœ¨Reduxä¸Šç»§ç»­å®è·µçš„äººæ¥è¯´ï¼Œredux-loopæ˜¯å¾ˆå¥½çš„å‚è€ƒç´ æï¼Œä½†å¯¹å¤šæ•°äººå’Œé¡¹ç›®è€Œè¨€ï¼Œæœ€å¥½è¿˜æ˜¯æ›´è°¨æ…åœ°çœ‹å¾…\n\n### redux-sagaï¼šéš¾ã€è€Œç¾\n\n[Redux-saga](https://github.com/redux-saga/redux-saga)\n\nå¦ä¸€ä¸ªè‘—åçš„åº“ï¼Œå®ƒè®©å¼‚æ­¥è¡Œä¸ºæˆä¸ºæ¶æ„ä¸­ç‹¬ç«‹çš„ä¸€å±‚(ç§°ä¸ºsaga)ï¼Œæ—¢ä¸åœ¨action creatorä¸­ï¼Œä¹Ÿä¸å’Œreduceræ²¾è¾¹ã€‚\n\nå®ƒçš„å‡ºå‘ç‚¹æ˜¯æŠŠå‰¯ä½œç”¨ (Side effectï¼Œå¼‚æ­¥è¡Œä¸ºå°±æ˜¯å…¸å‹çš„å‰¯ä½œç”¨) çœ‹æˆâ€çº¿ç¨‹â€ï¼Œå¯ä»¥é€šè¿‡æ™®é€šçš„actionå»è§¦å‘å®ƒï¼Œå½“å‰¯ä½œç”¨å®Œæˆæ—¶ä¹Ÿä¼šè§¦å‘actionä½œä¸ºè¾“å‡ºã€‚\n\n```javascript\nimport { takeEvery } from 'redux-saga'\nimport { call, put } from 'redux-saga/effects'\nimport Api from '...'\n\nfunction* getData(action) {\n   try {\n      const response = yield call(api.getData, action.payload.id);\n      yield put({type: \"GET_DATA_SUCCEEDED\", payload: response});\n   } catch (e) {\n      yield put({type: \"GET_DATA_FAILED\", payload: error});\n   }\n}\n\nfunction* mySaga() {\n  yield* takeEvery(\"GET_DATA\", getData);\n}\n\nexport default mySaga;\n```\n\nç›¸æ¯”action creatorçš„æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ä¿è¯ç»„ä»¶è§¦å‘çš„actionæ˜¯çº¯å¯¹è±¡ï¼Œå› æ­¤è‡³å°‘åœ¨é¡¹ç›®èŒƒå›´å†…(middlewareå’Œsagaéƒ½æ˜¯é¡¹ç›®çš„é¡¶å±‚ä¾èµ–ï¼Œè·¨é¡¹ç›®æ— æ³•ä¿è¯)ï¼Œactionçš„ç»„åˆæ€§æ˜æ˜¾æ›´åŠ ä¼˜ç§€ã€‚\n\nè€Œå®ƒæœ€ä¸ºä¸»æ‰“çš„ï¼Œåˆ™æ˜¯`å¯æµ‹è¯•æ€§`å’Œå¼ºå¤§çš„`å¼‚æ­¥æµç¨‹æ§åˆ¶`ã€‚\n\nç”±äºå¼ºåˆ¶æ‰€æœ‰sagaéƒ½å¿…é¡»æ˜¯generatorå‡½æ•°ï¼Œå€ŸåŠ©generatorçš„nextæ¥å£ï¼Œå¼‚æ­¥è¡Œä¸ºçš„æ¯ä¸ªä¸­é—´æ­¥éª¤éƒ½è¢«æš´éœ²ç»™äº†å¼€å‘è€…ï¼Œä»è€Œå®ç°å¯¹å¼‚æ­¥é€»è¾‘â€step by stepâ€çš„æµ‹è¯•ã€‚è¿™åœ¨å…¶å®ƒæ–¹æ¡ˆä¸­æ˜¯å¾ˆå°‘çœ‹åˆ°çš„ (å½“ç„¶ä¹Ÿå¯ä»¥å€Ÿé‰´generatorè¿™ä¸€ç‚¹ï¼Œä½†ç¼ºå°‘çº¦æŸ)ã€‚\n\nè€Œå¼ºå¤§å¾—æœ‰ç‚¹çœ¼èŠ±ç¼­ä¹±çš„APIï¼Œç‰¹åˆ«æ˜¯channelçš„å¼•å…¥ï¼Œåˆ™æä¾›äº†æ­¦è£…åˆ°ç‰™é½¿çº§çš„å¼‚æ­¥æµç¨‹æ§åˆ¶èƒ½åŠ›ã€‚\n\nç„¶è€Œï¼Œå›é¡¾æˆ‘ä»¬åœ¨è®¨è®ºç®€å•æ–¹æ¡ˆæ—¶æåˆ°çš„å„ç§åœºæ™¯ä¸é—®é¢˜ï¼Œredux-sagaå¹¶æ²¡æœ‰å»å°è¯•å›ç­”å’Œè§£å†³å®ƒä»¬ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦è‡ªè¡Œå¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚è€Œgeneratorã€ç›¸å¯¹å¤æ‚çš„APIå’Œå•ç‹¬çš„ä¸€å±‚æŠ½è±¡ä¹Ÿè®©ä¸å°‘äººæœ›è€Œå´æ­¥ã€‚\n\nåŒ…æ‹¬æˆ‘åœ¨å†…ï¼Œå¾ˆå¤šäººéå¸¸æ¬£èµredux-sagaã€‚å®ƒçš„æ¶æ„å’Œæ€è·¯æ¯«æ— ç–‘é—®æ˜¯ä¼˜ç§€ç”šè‡³ä¼˜é›…çš„ï¼Œä½†ä½¿ç”¨å®ƒä¹‹å‰ï¼Œæœ€å¥½æƒ³æ¸…æ¥šå®ƒå¸¦æ¥çš„ä¼˜ç‚¹(å¯æµ‹è¯•æ€§ã€æµç¨‹æ§åˆ¶ã€é«˜åº¦è§£è€¦)ä¸ä»˜å‡ºçš„æˆæœ¬æ˜¯å¦åŒ¹é…ï¼Œç‰¹åˆ«æ˜¯å¼‚æ­¥æ–¹é¢å¤æ‚åº¦å¹¶ä¸é«˜çš„é¡¹ç›®ï¼Œæ¯”å¦‚å¤šæ•°ä»¥CRUDä¸ºä¸»çš„ç®¡ç†ç³»ç»Ÿã€‚\n\n#### åœºæ™¯è§£æï¼šç«æ€\n\nç«æ€ï¼š\n\n```javascript\nfunction fetchFriend(id) {\n    return dispatch => {\n        dispatch({ type: 'FETCH_FRIEND' });\n        return fetch(`http://localhost/api/friend/${id}`)\n            .then(response => response.json())\n            .then(json => dispatch({ type: 'RECEIVE_FRIENDS', payload: json }));\n    }\n}\n```\nå¦‚æœ fetch ä¿®æ”¹ä¸º buttonclickï¼ŒsetTimeout è¿™æ ·çš„å¼€å§‹å¯ä»¥ç¡®å®šé¡ºåºçš„ï¼Œ\nä½†æ˜¯ fetch æ˜¯å’ŒæœåŠ¡å™¨æ²Ÿé€šçš„ï¼ŒæœåŠ¡å™¨å¤„ç†æ•°æ®è¿”å›é¡ºåºæ˜¯ä¸ç¡®å®š\né‚£ä¹ˆæ€ä¹ˆå¤„ç†ï¼Ÿ\n\nå†²çªæµç¨‹å¦‚ä¸‹ï¼š\n ç‚¹å‡»çœ‹å¥½å‹1ä¿¡æ¯\n æœåŠ¡å™¨è¯·æ±‚\n æ²¡ç­‰1è¿”å›ï¼Œ çœ‹å¥½å‹2ä¿¡æ¯ (æˆ‘å°±æƒ³çœ‹è¿™ä¸ª)\n å¥½å‹2æœåŠ¡å™¨è¯·æ±‚è¿”å›æ¯”è¾ƒå¿«(å¯èƒ½åœ¨cacheä¸­)\n æ˜¾ç¤ºå¥½å‹2ä¿¡æ¯äº†\n ç­‰äº†ä¸€ä¼šå„¿1è¿”å›äº†\n è¦†ç›–äº†2   (BOOM!)\n\nç”±äºå¼‚æ­¥è¿”å›æ—¶é—´çš„ä¸ç¡®å®šæ€§ï¼Œåå‘å‡ºçš„è¯·æ±‚å¯èƒ½å…ˆè¿”å›ï¼Œå¦‚ä½•ç¡®ä¿å¼‚æ­¥ç»“æœçš„æ¸²æŸ“æ˜¯æŒ‰ç…§è¯·æ±‚å‘ç”Ÿé¡ºåºï¼Œè€Œä¸æ˜¯è¿”å›é¡ºåºï¼Ÿ\n\nè¿™åœ¨redux-thunkä¸ºä»£è¡¨çš„ç®€å•æ–¹æ¡ˆä¸­æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ï¼š\n\n```javascript\nfunction fetchFriend(id){\n    return (dispatch, getState) => {\n        //æ­¥éª¤1ï¼šåœ¨reducerä¸­ set state.currentFriend = id;\n        dispatch({type: 'FETCH_FIREND', payload: id});\n\n        return fetch(`http://localhost/api/firend/${id}`)\n            .then(response => response.json())\n            .then(json => {\n                //æ­¥éª¤2ï¼šåªå¤„ç†currentFriendçš„å¯¹åº”response\n                const { currentFriend } = getState();\n                (currentFriend === id) && dispatch({type: 'RECEIVE_FIRENDS', playload: json})\n            });\n    }\n}\n```\n\nä»¥ä¸Šåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…ä¸­ä¸ä¸€å®šéœ€è¦ä¾èµ–ä¸šåŠ¡idï¼Œä¹Ÿä¸ä¸€å®šè¦æŠŠidå­˜åˆ°storeé‡Œï¼Œåªè¦ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆkeyï¼Œä»¥ä¾¿å¤„ç†è¯·æ±‚æ—¶èƒ½å¤Ÿå¯¹åº”èµ·æ¥å³å¯ã€‚\n\nè€Œåœ¨redux-sagaä¸­ï¼Œä¸€åˆ‡éå¸¸åœ°ç®€å•ï¼š\n\n```javascript\nimport { takeLatest } from `redux-saga`\n\nfunction* fetchFriend(action) {\n  ...\n}\n\nfunction* watchLastFetchUser() {\n  yield takeLatest('FETCH_FIREND', fetchFriend)\n}\n```\n\nè¿™é‡Œçš„é‡ç‚¹æ˜¯takeLatestï¼Œå®ƒé™åˆ¶äº†åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„é¡ºåºå…³ç³»ã€‚\n\nå¦å¤–è¿˜æœ‰ä¸€äº›åŸºäºå“åº”å¼ç¼–ç¨‹(Reactive Programming)çš„å¼‚æ­¥æ–¹æ¡ˆ(å¦‚redux-observable)ä¹Ÿèƒ½éå¸¸å¥½åœ°å¤„ç†ç«æ€åœºæ™¯ï¼Œå› ä¸ºæè¿°äº‹ä»¶æµä¹‹é—´çš„å…³ç³»ï¼Œæ­£æ˜¯æ•´ä¸ªå“åº”å¼ç¼–ç¨‹çš„æŠ½è±¡åŸºçŸ³ï¼Œè€Œç«æ€åœ¨æœ¬è´¨ä¸Šå°±æ˜¯å¦‚ä½•ä¿è¯åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„å…³ç³»ï¼Œæ­£æ˜¯å“åº”å¼ç¼–ç¨‹çš„ç”¨æ­¦ä¹‹åœ°ã€‚\n\n> å®é™…é¡¹ç›®ä¸­å¯ä»¥ç”¨é«˜é˜¶å‡½æ•°æ¨¡ä»¿takeLatestçš„åŠŸèƒ½ï¼Œredux-thunkç±»æ–¹æ¡ˆä¹Ÿå¯ä»¥è¾ƒä½æˆæœ¬åœ°å¤„ç†ç«æ€\n\n```javascript\nfunction takeLatestAsyncResult(promiseCreator) {\n  var index = 0;\n  return function () {\n    index++;\n    var promise = promiseCreator.apply(this, arguments);\n\n    function guardLatest(func, reqIndex) {\n      return function() {\n        if (reqIndex === index) {\n          func.apply(this, arguments)\n        }\n      }\n    }\n\n    return new Promise(function(resolve, reject) {\n      promise.then(\n        guardLatest(resolve, index),\n        guardLatest(reject, index)\n      );\n    });\n  }\n}\n\nfunction runTimeout(timeout) {\n\treturn new Promise(function(resolve) {\n    setTimeout(function() {\n\t\t\tresolve(timeout);\n    }, timeout)\n  })\n}\n\nfunction getAsyncTaskRunner(label, promiseCreator) {\n  return function(value) {\n    promiseCreator(value).then(function() {\n      console.log(`${label} : ${value}`)\n    })\n  }\n}\n\nfunction runAsyncQue(arr) {\n  arr.map(getAsyncTaskRunner('runAsyncQue', runTimeout));\n}\n\nfunction runLatestAsync(arr) {\n\tvar wrappedTimeout = takeLatestAsyncResult(runTimeout);\n  arr.map(getAsyncTaskRunner('runLatestAsync', wrappedTimeout));\n}\n\nrunAsyncQue([2000, 1000, 3000, 500, 400])\n\nrunLatestAsync([2000, 1000, 3000, 500, 400])\n\n\nfunction takeLatestAsyncResult(promiseCreator) {\n    let index = 0;\n\n    return function(){\n        index++;\n\n        const promise = promiseCreator.apply(this, arguments);\n\n        function guardLatest(func, reqIndex) {\n            return function() {\n                if (reqIndex === index) {\n                    func.apply(this, arguments)\n                }\n            }\n        }\n\n        return new Promise(function(resolve, reject){\n            promise.then(\n                guardLatest(resolve, index),\n                guardLatest(reject, index)\n            )\n        })\n    }\n}\n\n\n\n```\n","source":"_posts/2017-05-06-redux-async.markdown","raw":"---\nlayout:     post\ntitle:      \"Redux Async Function\"\nsubtitle:   \"Async\"\ndate:       2017-03-22\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - Redux\n---\n\n# Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\n\nä½œä¸ºreactç¤¾åŒºæœ€çƒ­é—¨çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½å‡†å¤‡ç”šè‡³æ­£åœ¨ä½¿ç”¨Reduxã€‚\n\nç”±äºReduxçš„ç†å¿µéå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰è¿½æ±‚å¤§è€Œå…¨ï¼Œè¿™ä»½æ¶æ„ä¸Šçš„ä¼˜é›…å´åœ¨æŸç§ç¨‹åº¦ä¸Šä¼¤å®³äº†ä½¿ç”¨ä½“éªŒï¼šä¸èƒ½å¼€ç®±å³ç”¨ï¼Œç”šè‡³æ˜¯å¼‚æ­¥è¿™ç§æœ€å¸¸è§çš„åœºæ™¯ä¹Ÿè¦å€ŸåŠ©ç¤¾åŒºæ–¹æ¡ˆã€‚\n\nå¦‚æœä½ å·²ç»æŒ‘èŠ±äº†çœ¼ï¼Œæˆ–è€…æ­£åœ¨æŒ‘ä½†ä¸çŸ¥é“æ˜¯å¦é€‚åˆï¼Œæˆ–è€…å·²ç»æŒ‘äº†ä½†ä¸çŸ¥é“ä¼šä¸ä¼šæœ‰å‘ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥é€‚åˆä½ ã€‚\n\næœ¬æ–‡ä¼šä»ä¸€äº›å¸¸è§çš„Reduxå¼‚æ­¥æ–¹æ¡ˆå‡ºå‘ï¼Œä»‹ç»å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œè¿›è€Œè®¨è®ºä¸€äº›ä¸å¼‚æ­¥ç›¸ä¼´çš„å¸¸è§åœºæ™¯ï¼Œå¸®åŠ©ä½ åœ¨é€‰å‹æ—¶æ›´å¥½åœ°æƒè¡¡åˆ©å¼Šã€‚\n\n\n## ç®€å•æ–¹æ¡ˆ\n### redux-thunkï¼šæŒ‡è·¯å…ˆé©±\n\n[Github](https://github.com/gaearon/redux-thunk)\n\n> Reduxæœ¬èº«åªèƒ½å¤„ç†åŒæ­¥çš„Actionï¼Œä½†å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥æ‹¦æˆªå¤„ç†å…¶å®ƒç±»å‹çš„actionï¼Œæ¯”å¦‚å‡½æ•°(Thunk)ï¼Œå†ç”¨å›è°ƒè§¦å‘æ™®é€šAction\n> ä»è€Œå®ç°å¼‚æ­¥å¤„ç†ï¼Œåœ¨è¿™ç‚¹ä¸Šæ‰€æœ‰Reduxçš„å¼‚æ­¥æ–¹æ¡ˆéƒ½æ˜¯ç±»ä¼¼çš„ã€‚\n\n### redux-promiseï¼šç˜¦èº«è¿‡å¤´\n\nç”±äºredux-thunkå†™èµ·æ¥å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œç¤¾åŒºå½“ç„¶ä¼šæœ‰å…¶å®ƒè½®å­å‡ºç°ã€‚[redux-promise](https://github.com/pburtchaell/redux-promise-middleware)åˆ™æ˜¯å…¶ä¸­æ¯”è¾ƒçŸ¥åçš„ï¼ŒåŒæ ·ä¹Ÿäº«å—äº†å®˜ç½‘å‡ºé•œçš„å¾…é‡ã€‚\n\nå®ƒè‡ªå®šä¹‰äº†ä¸€ä¸ªmiddlewareï¼Œå½“æ£€æµ‹åˆ°æœ‰actionçš„payloadå±æ€§æ˜¯Promiseå¯¹è±¡æ—¶ï¼Œå°±ä¼š:\n\n* è‹¥resolveï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„valueï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€successâ€\n* è‹¥rejectï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„reasonï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€errorâ€\n\n```javascript\n//action types\nconst GET_DATA = 'GET_DATA';\n\n//action creator\nconst getData = function(id) {\n    return {\n        type: GET_DATA,\n        payload: api.getData(id) //payloadä¸ºpromiseå¯¹è±¡\n    }\n}\n\n//reducer\nfunction reducer(oldState, action) {\n    switch(action.type) {\n    case GET_DATA:\n        if (action.status === 'success') {\n            return successState\n        } else {\n               return errorState\n        }\n    }\n}\n```\n\nè¯·ç­‰ç­‰ï¼Œä»»ä½•èƒ½æ˜æ˜¾å‡å°‘ä»£ç é‡çš„æ–¹æ¡ˆï¼Œéƒ½åº”è¯¥å°å¿ƒå®ƒæ˜¯å¦è¿‡åº¦çœç•¥äº†ä»€ä¹ˆä¸œè¥¿ï¼Œå‡è‚¥æ˜¯å¥½äº‹ï¼Œå‡åˆ°éª¨å¤´å°±æ®‹äº†ã€‚\n\n#### åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\n\nå¤šæ•°å¼‚æ­¥åœºæ™¯éƒ½æ˜¯ä¿å®ˆæ›´æ–°çš„ï¼Œå³ç­‰åˆ°è¯·æ±‚æˆåŠŸæ‰æ¸²æŸ“æ•°æ®ã€‚è€Œä¸ä¹‹ç›¸å¯¹çš„ä¹è§‚æ›´æ–°ï¼Œåˆ™æ˜¯ä¸ç­‰å¾…è¯·æ±‚æˆåŠŸï¼Œåœ¨å‘é€è¯·æ±‚çš„åŒæ—¶ç«‹å³æ¸²æŸ“æ•°æ®ã€‚\n\næœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯å¾®ä¿¡ç­‰èŠå¤©å·¥å…·ï¼Œå‘é€æ¶ˆæ¯æ—¶æ¶ˆæ¯ç«‹å³è¿›å…¥äº†å¯¹è¯çª—ï¼Œå¦‚æœå‘é€å¤±è´¥çš„è¯ï¼Œåœ¨æ¶ˆæ¯æ—è¾¹å†ä½œè¡¥å……æç¤ºå³å¯ã€‚è¿™ç§äº¤äº’â€ä¹è§‚â€åœ°ç›¸ä¿¡è¯·æ±‚ä¼šæˆåŠŸï¼Œå› æ­¤ç§°ä½œä¹è§‚æ›´æ–°(Optimistic update)ã€‚\n\nç”±äºä¹è§‚æ›´æ–°å‘ç”Ÿåœ¨ç”¨æˆ·æ“ä½œæ—¶ï¼Œè¦å¤„ç†å®ƒï¼Œæ„å‘³ç€å¿…é¡»æœ‰actionè¡¨ç¤ºç”¨æˆ·çš„åˆå§‹åŠ¨ä½œ\n\nåœ¨ä¸Šé¢redux-thunkçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†GET_DATA, GET_DATA_SUCCESSã€GET_DATA_FAILEDä¸‰ä¸ªactionï¼Œåˆ†åˆ«è¡¨ç¤ºåˆå§‹åŠ¨ä½œã€å¼‚æ­¥æˆåŠŸå’Œå¼‚æ­¥å¤±è´¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªactionä½¿å¾—redux-thunkå…·å¤‡ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚\n\nè€Œåœ¨redux-promiseä¸­ï¼Œæœ€åˆè§¦å‘çš„actionè¢«ä¸­é—´ä»¶æ‹¦æˆªç„¶åè¿‡æ»¤æ‰äº†ã€‚åŸå› å¾ˆç®€å•ï¼Œreduxè®¤å¯çš„actionå¯¹è±¡æ˜¯ plain JavaScript objectsï¼Œå³ç®€å•å¯¹è±¡ï¼Œè€Œåœ¨redux-promiseä¸­ï¼Œåˆå§‹actionçš„payloadæ˜¯ä¸ªPromiseã€‚\n\nå¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨statusè€Œä¸æ˜¯typeæ¥åŒºåˆ†ä¸¤ä¸ªå¼‚æ­¥actionä¹Ÿéå¸¸å€¼å¾—å•†æ¦·ï¼ŒæŒ‰ç…§reduxå¯¹actionçš„å®šä¹‰ä»¥åŠç¤¾åŒºçš„æ™®éå®è·µï¼Œä¸ªäººè¿˜æ˜¯å€¾å‘äºä½¿ç”¨ä¸åŒçš„typeï¼Œç”¨åŒä¸€typeä¸‹çš„ä¸åŒstatusåŒºåˆ†actioné¢å¤–å¢åŠ äº†ä¸€å¥—éšå½¢çš„çº¦å®šï¼Œç”šè‡³ä¸ç¬¦åˆè¯¥redux-promiseä½œè€…è‡ªå·±æ‰€æå€¡çš„FSAï¼Œä½“ç°åœ¨ä»£ç ä¸Šåˆ™æ˜¯åœ¨switch-caseå†…å†å¢åŠ ä¸€å±‚åˆ¤æ–­ã€‚\n\n### redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\n\nredux-promise-middlewareç›¸æ¯”redux-promiseï¼Œé‡‡å–äº†æ›´ä¸ºæ¸©å’Œå’Œæ¸è¿›å¼çš„æ€è·¯ï¼Œä¿ç•™äº†å’Œredux-thunkç±»ä¼¼çš„ä¸‰ä¸ªactionã€‚\n\n```javascript\n//action types\nconst GET_DATA = 'GET_DATA',\n    GET_DATA_PENDING = 'GET_DATA_PENDING',\n    GET_DATA_FULFILLED = 'GET_DATA_FULFILLED',\n    GET_DATA_REJECTED = 'GET_DATA_REJECTED';\n//action creator\nconst getData = function(id) {\n    return {\n        type: GET_DATA,\n        payload: {\n            promise: api.getData(id),\n            data: id\n        }\n    }\n}\n\n//reducer\nconst reducer = function(oldState, action) {\n    switch(action.type) {\n    case GET_DATA_PENDING :\n        return oldState; // å¯é€šè¿‡action.payload.dataè·å–id\n    case GET_DATA_FULFILLED :\n        return successState;\n    case GET_DATA_REJECTED :\n        return errorState;\n    }\n}\n```\n\nå¦‚æœä¸éœ€è¦ä¹è§‚æ›´æ–°ï¼Œaction creatorå¯ä»¥ä½¿ç”¨å’Œredux-promiseå®Œå…¨ä¸€æ ·çš„ï¼Œæ›´ç®€æ´çš„å†™æ³•ï¼Œ\n\n```javascript\nconst getData = function(id) {\n    return {\n        type: GET_DATA,\n        payload: api.getData(id) //ç­‰ä»·äº {promise: api.getData(id)}\n    }\n}\n```\n\næ­¤æ—¶åˆå§‹actionGET_DATA_PENDINGä»ç„¶ä¼šè§¦å‘ï¼Œä½†æ˜¯payloadä¸ºç©ºã€‚\n\nç›¸å¯¹redux-promiseäºç²—æš´åœ°è¿‡æ»¤æ‰æ•´ä¸ªåˆå§‹actionï¼Œredux-promise-middlewareé€‰æ‹©åˆ›å»ºä¸€ä¸ªåªè¿‡æ»¤payloadä¸­çš„promiseå±æ€§çš„XXX_PENDINGä½œä¸ºåˆå§‹actionï¼Œä»¥æ­¤ä¿ç•™ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚\n\nåŒæ—¶åœ¨actionçš„åŒºåˆ†ä¸Šï¼Œå®ƒé€‰æ‹©äº†å›å½’typeçš„â€æ­£é€”â€ï¼Œ_PENDINGã€_FULFILLEDã€_REJECTEDç­‰åç¼€å€Ÿç”¨äº†promiseè§„èŒƒ (å½“ç„¶å®ƒä»¬æ˜¯å¯é…ç½®çš„) ã€‚\n\nå®ƒçš„é—æ†¾åˆ™æ˜¯åªåœ¨actionå±‚å®ç°äº†ç®€åŒ–ï¼Œå¯¹reducerå±‚åˆ™æŸæ‰‹æ— ç­–ã€‚å¦å¤–ï¼Œç›¸æ¯”redux-thunkï¼Œå®ƒè¿˜å¤šå‡ºäº†ä¸€ä¸ª_PENDINGçš„å­—ç¬¦ä¸²æ¨¡æ¿ä»£ç (ä¸‰ä¸ªactionå´éœ€è¦å››ä¸ªtype)ã€‚\n\n> ç¤¾åŒºæœ‰ç±»ä¼¼type-to-reducerè¿™æ ·è¯•å›¾ç®€åŒ–reducerçš„åº“ã€‚ä½†ç”±äºreducerå’Œå¼‚æ­¥actioné€šå¸¸æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„æ–¹æ¡ˆï¼Œreducerç›¸å…³çš„åº“æ— æ³•å»çŒœæµ‹å¼‚æ­¥actionçš„åç¼€æ˜¯ä»€ä¹ˆ(ç”šè‡³æœ‰æ²¡æœ‰åç¼€)ï¼Œç¤¾åŒºä¹Ÿæ²¡æœ‰ç›¸å…³æ ‡å‡†ï¼Œä¹Ÿå°±å¾ˆéš¾å¯¹å¼‚æ­¥åšå‡ºç²¾ç®€å’ŒæŠ½è±¡äº†ã€‚\n\n### redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\n\næ— è®ºæ˜¯redux-thunkè¿˜æ˜¯redux-promise-middlewareï¼Œæ¨¡æ¿ä»£ç éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ¯æ¬¡å†™XXX_COMPLETEDè¿™æ ·çš„ä»£ç éƒ½è§‰å¾—æ˜¯åœ¨æµªè´¹ç”Ÿå‘½â€”â€”ä½ å¾—å…ˆåœ¨å¸¸é‡ä¸­å£°æ˜å®ƒä»¬ï¼Œå†åœ¨actionä¸­å¼•ç”¨ï¼Œç„¶åæ˜¯reducerï¼Œå‡è®¾åƒredux-thunkä¸€æ ·æ¯ä¸ªå¼‚æ­¥actionæœ‰ä¸‰ä¸ªtypeï¼Œä¸‰ä¸ªæ–‡ä»¶åŠ èµ·æ¥ä½ å°±å¾—å†™ä¹æ¬¡!\n\nå›½å¤–å¼€å‘è€…ä¹Ÿæœ‰ç›¸åŒçš„æŠ¥æ€¨ï¼š\n\næœ‰æ²¡æœ‰åŠæ³•è®©ä»£ç æ—¢åƒredux-promiseä¸€æ ·ç®€æ´ï¼Œåˆèƒ½ä¿æŒä¹è§‚æ›´æ–°çš„èƒ½åŠ›å‘¢ï¼Ÿ\n\nredux-action-toolsæ˜¯æˆ‘ç»™å‡ºçš„ç­”æ¡ˆï¼š\n\n```javascript\nconst GET_DATA = 'GET_DATA';\n\n//action creator\nconst getData = createAsyncAction(GET_DATA, function(id) {\n    return api.getData(id)\n})\n\n//reducer\nconst reducer = createReducer()\n    .when(getData, (oldState, action) => oldState)\n    .done((oldState, action) => successState)\n    .failed((oldState, action) => errorState)\n    .build()\n```\n\nredux-action-toolsåœ¨actionå±‚é¢åšçš„äº‹æƒ…ä¸å‰é¢å‡ ä¸ªåº“å¤§åŒå°å¼‚ï¼šåŒæ ·æ˜¯æ´¾å‘äº†ä¸‰ä¸ªactionï¼šGET_DATA/GET_DATA_SUCCESS/GET_DATA_FAILEDã€‚è¿™ä¸‰ä¸ªactionçš„æè¿°è§ä¸‹è¡¨ï¼š\n\ntype When payload meta.asyncPhase ${actionName} å¼‚æ­¥å¼€å§‹å‰ åŒæ­¥è°ƒç”¨å‚æ•° â€˜STARTâ€™ ${actionName}_COMPLETED å¼‚æ­¥æˆåŠŸ value of promise â€˜COMPLETEDâ€™ ${actionName}_FAILED å¼‚æ­¥å¤±è´¥ reason of promise â€˜FAILEDâ€™\ncreateAsyncActionå‚è€ƒäº†redux-promiseä½œè€…å†™çš„redux-actions ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n* actionName å­—ç¬¦ä¸²ï¼Œæ‰€æœ‰æ´¾ç”Ÿactionçš„åå­—éƒ½ä»¥å®ƒä¸ºåŸºç¡€ï¼Œåˆå§‹actionåˆ™ä¸å®ƒåŒå\n* promiseCreator å‡½æ•°ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡\n* metaCreator å‡½æ•°ï¼Œå¯é€‰ï¼Œä½œç”¨åé¢ä¼šæ¼”ç¤ºåˆ°\n\nç›®å‰çœ‹æ¥ï¼Œå…¶å®å’Œredux-promise/redux-promise-middlewareå¤§åŒå°å¼‚ã€‚è€ŒçœŸæ­£ä¸åŒçš„ï¼Œæ˜¯å®ƒåŒæ—¶ç®€åŒ–äº†reducerå±‚! è¿™ç§ç®€åŒ–æ¥è‡ªäºå¯¹å¼‚æ­¥è¡Œä¸ºä»è¯­ä¹‰è§’åº¦çš„æŠ½è±¡ï¼š\n\n> å½“(when)åˆå§‹actionå‘ç”Ÿæ—¶å¤„ç†åŒæ­¥æ›´æ–°ï¼Œè‹¥å¼‚æ­¥æˆåŠŸ(done)åˆ™å¤„ç†æˆåŠŸé€»è¾‘ï¼Œè‹¥å¼‚æ­¥å¤±è´¥(failed)åˆ™å¤„ç†å¤±è´¥é€»è¾‘\n\næŠ½ç¦»å‡ºwhen/done/failedä¸‰ä¸ªå…³é”®è¯ä½œä¸ºapiï¼Œå¹¶ä½¿ç”¨é“¾å¼è°ƒç”¨å°†ä»–ä»¬ä¸²è”èµ·æ¥ï¼šwhenå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šactionNameå’Œhandlerï¼Œå…¶ä¸­handleræ˜¯å¯é€‰çš„ï¼Œdoneå’Œfailedåˆ™åªæ¥æ”¶ä¸€ä¸ªhandlerå‚æ•°ï¼Œå¹¶ä¸”åªèƒ½åœ¨whenä¹‹åè°ƒç”¨â€”â€”ä»–ä»¬åˆ†åˆ«å¤„ç† ${actionName}_SUCCESS å’Œ ${actionName}_FAILED .\n\næ— è®ºæ˜¯actionè¿˜æ˜¯reducerå±‚ï¼ŒXX_SUCCESS/XX_FAILEDç›¸å…³çš„ä»£ç éƒ½è¢«å°è£…äº†èµ·æ¥ï¼Œæ­£å¦‚åœ¨ä¾‹å­ä¸­çœ‹åˆ°çš„â€”â€”ä½ ç”šè‡³ä¸éœ€è¦å£°æ˜å®ƒä»¬! åˆ›å»ºä¸€ä¸ªå¼‚æ­¥actionï¼Œç„¶åå¤„ç†å®ƒçš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µï¼Œäº‹æƒ…æœ¬è¯¥è¿™ä¹ˆç®€å•ã€‚\n\næ›´è¿›ä¸€æ­¥çš„ï¼Œè¿™ä¸‰ä¸ªactioné»˜è®¤éƒ½æ ¹æ®å½“å‰æ‰€å¤„çš„å¼‚æ­¥é˜¶æ®µï¼Œè®¾ç½®äº†ä¸åŒçš„meta(è§ä¸Šè¡¨ä¸­çš„meta.asyncPhase)ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿç”¨åœºæ™¯è¯´è¯ï¼š\n\n#### åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\n\nå®ƒä»¬æ˜¯å¼‚æ­¥ä¸å¯å›é¿çš„ä¸¤ä¸ªåœºæ™¯ï¼Œå‡ ä¹æ¯ä¸ªé¡¹ç›®ä¼šé‡åˆ°ã€‚\nä»¥å¼‚æ­¥è¯·æ±‚çš„å¤±è´¥å¤„ç†ä¸ºä¾‹ï¼Œæ¯ä¸ªé¡¹ç›®é€šå¸¸éƒ½æœ‰ä¸€å¥—æ¯”è¾ƒé€šç”¨çš„ï¼Œé€‚åˆå¤šæ•°åœºæ™¯çš„å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚å¼¹çª—æç¤ºã€‚åŒæ—¶åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œåˆéœ€è¦ç»•è¿‡é€šç”¨é€»è¾‘è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œæ¯”å¦‚è¡¨å•çš„å¼‚æ­¥æ ¡éªŒ\n\nè€Œåœ¨å®ç°é€šç”¨å¤„ç†é€»è¾‘æ—¶ï¼Œå¸¸è§çš„é—®é¢˜æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n\n* åº•å±‚å¤„ç†ï¼Œæ‰©å±•æ€§ä¸è¶³\n\n```javascript\n function fetchWrapper(args) {\n     return fetch.apply(fetch, args)\n         .catch(commonErrorHandler)\n }\n```\n\nåœ¨è¾ƒåº•å±‚å°è£…ajaxåº“å¯ä»¥è½»æ¾å®ç°å…¨å±€å¤„ç†ï¼Œä½†é—®é¢˜ä¹Ÿéå¸¸æ˜æ˜¾ï¼š\n\nä¸€æ˜¯æ‰©å±•æ€§ä¸è¶³ï¼Œæ¯”å¦‚å°‘æ•°åœºæ™¯æƒ³è¦ç»•è¿‡é€šç”¨å¤„ç†é€»è¾‘ï¼Œè¿˜æœ‰ä¸€äº›åœºæ™¯é”™è¯¯æ˜¯å‰ç«¯ç”Ÿæˆè€Œéç›´æ¥æ¥è‡ªäºè¯·æ±‚ï¼›\näºŒæ˜¯ä¸æ˜“ç»„åˆï¼Œæ¯”å¦‚æœ‰çš„åœºæ™¯ä¸€ä¸ªactionéœ€è¦å¤šä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œä½†å¼‚å¸¸å¤„ç†å’Œloadingæ˜¯ä¸éœ€è¦é‡å¤çš„ï¼Œå› ä¸ºç”¨æˆ·ä¸éœ€è¦çŸ¥é“ä¸€ä¸ªåŠ¨ä½œæœ‰å¤šå°‘ä¸ªè¯·æ±‚ã€‚\n\n* ä¸å¤Ÿå†…èšï¼Œä¾µå…¥ä¸šåŠ¡ä»£ç \n\n```javascript\n //action creator\n const getData = createAsyncAction(GET_DATA, function(id) {\n     return api.getData(id)\n         .catch(commonErrorHandler) //è°ƒç”¨é”™è¯¯å¤„ç†å‡½æ•°\n })\n```\n\nåœ¨æœ‰ä¸šåŠ¡æ„ä¹‰çš„actionå±‚è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ—¢èƒ½æŒ‰éœ€è°ƒç”¨ï¼Œåˆä¸å¦¨ç¢å¼‚æ­¥è¯·æ±‚çš„ç»„åˆã€‚ä½†ç”±äºé€šç”¨å¤„ç†å¾€å¾€é€‚ç”¨äºå¤šæ•°åœºæ™¯ï¼Œè¿™æ ·å†™ä¼šå¯¼è‡´ä¸šåŠ¡ä»£ç å˜å¾—å†—ä½™ï¼Œå› ä¸ºå‡ ä¹æ¯ä¸ªactionéƒ½å¾—è¿™ä¹ˆå†™ã€‚\n\n* é«˜è€¦åˆï¼Œé«˜é£é™©\n\nä¹Ÿæœ‰äººæŠŠä¸Šé¢çš„æ–¹æ¡ˆåšä¸ªä¾èµ–åè½¬ï¼Œæ”¹ä¸ºåœ¨é€šç”¨é€»è¾‘é‡Œç›‘å¬ä¸šåŠ¡actionï¼š\n\n```javascript\n function commonErrorReducer(oldState, action) {\n     switch(action.type) {\n     case GET_DATA_FAILED:\n     case PUT_DATA_FAILED:\n     //... tons of action type\n         return commonErrorHandler(action)\n     }\n }\n```\n\nè¿™æ ·åšçš„æœ¬è´¨æ˜¯æŠŠå†—ä½™ä»ä¸šåŠ¡ä»£ç ä¸­æ‹¿å‡ºæ¥é›†ä¸­ç®¡ç†ã€‚\n\né—®é¢˜åœ¨äºæ¯æ·»åŠ ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½éœ€è¦ä¿®æ”¹å…¬å…±ä»£ç ï¼ŒæŠŠå¯¹åº”çš„action typeåŠ è¿›æ¥ã€‚ä¸”ä¸è¯´å¹¶è¡Œå¼€å‘æ—¶mergeå†²çªï¼Œå¦‚æœåŠ äº†ä¸€ä¸ªå¼‚æ­¥actionï¼Œä½†å¿˜äº†å¾€å…¬å…±å¤„ç†æ–‡ä»¶ä¸­æ·»åŠ â€”â€”è¿™æ˜¯å¾ˆå¯èƒ½ä¼šå‘ç”Ÿçš„â€”â€”è€Œå¼‚å¸¸æ˜¯åˆ†æ”¯æµç¨‹ä¸å®¹æ˜“è¢«æµ‹è¯•å‘ç°ï¼Œç­‰åˆ°å‘ç°ï¼Œå¾ˆå¯èƒ½å°±æ˜¯äº‹æ•…è€Œä¸æ˜¯bugäº†ã€‚\n\né€šè¿‡ä»¥ä¸Šå‡ ç§å¸¸è§æ–¹æ¡ˆçš„åˆ†æï¼Œæˆ‘è®¤ä¸ºæ¯”è¾ƒå®Œå–„çš„é”™è¯¯å¤„ç†(LoadingåŒç†)éœ€è¦å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š\n\n* é¢å‘å¼‚æ­¥åŠ¨ä½œ(action)ï¼Œè€Œéç›´æ¥é¢å‘è¯·æ±‚\n* ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç \n* é»˜è®¤ä½¿ç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ— éœ€é¢å¤–ä»£ç \n* å¯ä»¥ç»•è¿‡é€šç”¨é€»è¾‘\n\nè€Œå€ŸåŠ©redux-action-toolsæä¾›çš„meta.asyncPhaseï¼Œå¯ä»¥è½»æ˜“ç”¨middlewareå®ç°ä»¥ä¸Šå…¨éƒ¨éœ€æ±‚!\n\n```javascript\nimport _ from 'lodash'\nimport { ASYNC_PHASES } from 'redux-action-tools'\n\nfunction errorMiddleWare({dispatch}) {\n  return next => action => {\n    const asyncStep = _.get(action, 'meta.asyncStep');\n\n    if (asyncStep === ASYNC_PHASES.FAILED) {\n      dispatch({\n        type: 'COMMON_ERROR',\n        payload: {\n          action\n        }\n      })\n    }\n    next(action);\n  }\n}\n```\n\nä»¥ä¸Šä¸­é—´ä»¶ä¸€æ—¦æ£€æµ‹åˆ°meta.asyncStepå­—æ®µä¸ºFAILEDçš„actionä¾¿è§¦å‘æ–°çš„actionå»è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ã€‚é¢å‘actionã€ä¸ä¾µå…¥ä¸šåŠ¡ã€é»˜è®¤å·¥ä½œ (åªè¦æ˜¯ç”¨createAsyncActionå£°æ˜çš„å¼‚æ­¥) ! è½»æ¾å®ç°äº†ç†æƒ³éœ€æ±‚ä¸­çš„å‰ä¸‰ç‚¹ï¼Œé‚£å¦‚ä½•å®šåˆ¶å‘¢ï¼Ÿæ—¢ç„¶æ‹¦æˆªæ˜¯é¢å‘metaçš„ï¼Œåªè¦åœ¨åˆ›å»ºactionæ—¶æ”¯æŒå¯¹metaçš„è‡ªå®šä¹‰å°±è¡Œäº†ï¼Œè€ŒcreateAsyncActionçš„ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ä¸ºæ­¤å‡†å¤‡çš„ï¼š\n\n```javascript\nimport _ from 'lodash'\nimport { ASYNC_PHASES } from 'redux-action-tools'\n\nconst customizedAction = createAsyncAction(\n  type,\n  promiseCreator, //type å’Œ promiseCreatoræ­¤å¤„æ— ä¸åŒæ•…çœç•¥\n  (payload, defaultMeta) => {\n    return { ...defaultMeta, omitError: true }; //å‘metaä¸­æ·»åŠ é…ç½®å‚æ•°\n  }\n)\n\nfunction errorMiddleWare({dispatch}) {\n  return next => action => {\n    const asyncStep = _.get(action, 'meta.asyncStep');\n    const omitError = _.get(action, 'meta.omitError'); //è·å–é…ç½®å‚æ•°\n\n    if (!omitError && asyncStep === ASYNC_PHASES.FAILED) {\n      dispatch({\n        type: 'COMMON_ERROR',\n        payload: {\n          action\n        }\n      })\n    }\n    next(action);\n  }\n}\n```\n\nç±»ä¼¼çš„ï¼Œä½ å¯ä»¥æƒ³æƒ³å¦‚ä½•å¤„ç†Loadingï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯å»ºè®®å°½é‡ç”¨å¢é‡é…ç½®çš„æ–¹å¼è¿›è¡Œæ‰©å±•ï¼Œè€Œä¸è¦è½»æ˜“åˆ é™¤å’Œä¿®æ”¹meta.asyncPhaseã€‚\næ¯”å¦‚ä¸Šä¾‹å¯ä»¥é€šè¿‡åˆ é™¤meta.asyncPhaseå®ç°åŒæ ·åŠŸèƒ½ï¼Œä½†å¦‚æœåŒæ—¶è¿˜æœ‰å…¶å®ƒåœ°æ–¹ä¹Ÿä¾èµ–meta.asyncPhase(æ¯”å¦‚loadingMiddleware)ï¼Œå°±å¯èƒ½å¯¼è‡´æœ¬æ„æ˜¯å®šåˆ¶é”™è¯¯å¤„ç†ï¼Œå´æ”¹å˜äº†Loadingçš„è¡Œä¸ºï¼Œå®¢è§‚æ¥è®²è¿™å±‚é£é™©æ˜¯åŸºäºmetaæ‹¦æˆªæ–¹æ¡ˆçš„æœ€å¤§ç¼ºç‚¹ï¼Œç„¶è€Œç›¸æ¯”å¤šæ•°åœºæ™¯çš„ä¾¿åˆ©ã€å¥å£®ï¼Œä¸ªäººè®¤ä¸ºç‰¹æ®Šåœºæ™¯çš„é£é™©æ˜¯å¯ä»¥æ¥å—çš„ï¼Œæ¯•ç«Ÿè¿™äº›åœºæ™¯åœ¨æ•´ä¸ªå¼€å‘æµ‹è¯•æµç¨‹å®¹æ˜“è·å¾—æ›´å¤šå…³æ³¨ã€‚\n\n## è¿›é˜¶æ–¹æ¡ˆ\n\nä¸Šé¢æ‰€æœ‰çš„æ–¹æ¡ˆï¼Œéƒ½æŠŠå¼‚æ­¥è¯·æ±‚è¿™ä¸€åŠ¨ä½œæ”¾åœ¨äº†action creatorä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç®€å•ç›´è§‚ï¼Œä¸”å’ŒFluxç¤¾åŒºä¸€è„‰ç›¸æ‰¿(è§ä¸‹å›¾)ã€‚å› æ­¤ä¸ªäººå°†å®ƒä»¬å½’ä¸ºç›¸å¯¹ç®€å•çš„ä¸€ç±»ã€‚\n\nä¸‹é¢å°†è¦ä»‹ç»çš„ï¼Œæ˜¯ç›¸å¯¹å¤æ‚ä¸€ç±»ï¼Œå®ƒä»¬éƒ½é‡‡ç”¨äº†ä¸ä¸Šå›¾ä¸åŒçš„æ€è·¯ï¼Œå»è¿½æ±‚æ›´ä¼˜é›…çš„æ¶æ„ã€è§£å†³æ›´å¤æ‚çš„é—®é¢˜\n\n### redux-loopï¼šåˆ†å½¢! ç»„åˆ!\n\nä¼—æ‰€å‘¨çŸ¥ï¼ŒReduxæ˜¯å€Ÿé‰´è‡ªElmçš„ï¼Œç„¶è€Œåœ¨Elmä¸­ï¼Œå¼‚æ­¥çš„å¤„ç†å´å¹¶ä¸æ˜¯åœ¨action creatorå±‚ï¼Œè€Œæ˜¯åœ¨reducer(Elmä¸­ç§°update)å±‚ï¼š\n\n> å›¾ç‰‡æ¥æºäºï¼š [jarvisaoieong/redux-architecture](https://github.com/jarvisaoieong/redux-architecture)\n\nè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å®ç°å½»åº•çš„å¯ç»„åˆæ€§(composable)ã€‚åœ¨reduxä¸­ï¼Œreducerä½œä¸ºå‡½æ•°æ˜¯å¯ç»„åˆçš„ï¼Œactionæ­£å¸¸æƒ…å†µä¸‹ä½œä¸ºçº¯å¯¹è±¡ä¹Ÿæ˜¯å¯ç»„åˆçš„ï¼Œç„¶è€Œä¸€æ—¦æ¶‰åŠå¼‚æ­¥ï¼Œå½“actionåµŒå¥—ç»„åˆçš„æ—¶å€™ï¼Œä¸­é—´ä»¶å°±æ— æ³•æ­£å¸¸è¯†åˆ«ï¼Œè¿™ä¸ªé—®é¢˜è®©reduxä½œè€…Danä¹Ÿå‘å‡ºæ„Ÿå¹ There is no easy way to compose Redux applicationså¹¶ä¸”å¼€äº†ä¸€ä¸ªè‡³ä»Šä»ç„¶opençš„issueï¼Œå¯¹ç»„åˆã€åˆ†å½¢ä¸reduxçš„æ•…äº‹ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è§‚æ‘©ä»¥ä¸Šé“¾æ¥ï¼Œç”šè‡³äº†è§£ä¸€ä¸‹Elmï¼Œç¯‡å¹…æ‰€é™ï¼Œæœ¬æ–‡éš¾ä»¥å°½è¿°ã€‚\n\nè€Œredux-loopï¼Œåˆ™æ˜¯åœ¨è¿™æ–¹é¢çš„ä¸€ä¸ªå°è¯•ï¼Œå®ƒæ›´å½»åº•çš„æ¨¡ä»¿äº†Elmçš„æ¨¡å¼ï¼šå¼•å…¥Effectsçš„æ¦‚å¿µå¹¶å°†å…¶ç½®å…¥reducerï¼Œå®˜æ–¹ç¤ºä¾‹å¦‚ä¸‹ï¼š\n\n```javascript\nimport { Effects, loop } from 'redux-loop';\nimport { loadingStart, loadingSuccess, loadingFailure } from './actions';\n\nexport function fetchDetails(id) {\n  return fetch(`/api/details/${id}`)\n    .then((r) => r.json())\n    .then(loadingSuccess)\n    .catch(loadingFailure);\n}\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case 'LOADING_START':\n      return loop(\n        { ...state, loading: true },\n        Effects.promise(fetchDetails, action.payload.id)\n      ); // åŒæ—¶è¿”å›çŠ¶æ€ä¸å‰¯ä½œç”¨\n\n    case 'LOADING_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        details: action.payload\n      };\n\n    case 'LOADING_FAILURE':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.message\n      };\n\n    default:\n      return state;\n  }\n}\n```\n\næ³¨æ„åœ¨reducerä¸­ï¼Œå½“å¤„ç†LOADING_STARTæ—¶ï¼Œå¹¶æ²¡æœ‰ç›´æ¥è¿”å›stateå¯¹è±¡ï¼Œè€Œæ˜¯ç”¨loopå‡½æ•°å°†stateå’ŒEffectâ€æ‰“åŒ…â€è¿”å›(å®é™…ä¸Šè¿™ä¸ªè¿”å›å€¼æ˜¯æ•°ç»„[State, Effect]ï¼Œå’ŒElmçš„æ–¹å¼éå¸¸æ¥è¿‘)ã€‚\n\nç„¶è€Œä¿®æ”¹reducerçš„è¿”å›ç±»å‹æ˜¾ç„¶æ˜¯æ¯”è¾ƒæš´åŠ›çš„åšæ³•ï¼Œé™¤éReduxå®˜æ–¹å‡ºé¢ï¼Œå¦åˆ™å¾ˆéš¾è·å¾—ç¤¾åŒºçš„å¹¿æ³›è®¤åŒã€‚æ›´å¤æ‚çš„è¿”å›ç±»å‹ä¼šè®©å¾ˆå¤šå·²æœ‰çš„APIï¼Œä¸‰æ–¹åº“é¢ä¸´å±é™©ï¼Œç”šè‡³combineReduceréƒ½éœ€è¦ç”¨redux-loopæä¾›çš„å®šåˆ¶ç‰ˆæœ¬ï¼Œè¿™ç§â€ç ´åæ€§â€ä¹Ÿæ˜¯Reduxä½œè€…Danæ²¡æœ‰é‡‡çº³redux-loopè¿›å…¥Reduxæ ¸å¿ƒä»£ç çš„åŸå› ï¼šâ€If a solution doesnâ€™t work with vanilla combineReducers(), it wonâ€™t get into Redux coreâ€ã€‚\n\nå¯¹Elmçš„åˆ†å½¢æ¶æ„æœ‰äº†è§£ï¼Œæƒ³åœ¨Reduxä¸Šç»§ç»­å®è·µçš„äººæ¥è¯´ï¼Œredux-loopæ˜¯å¾ˆå¥½çš„å‚è€ƒç´ æï¼Œä½†å¯¹å¤šæ•°äººå’Œé¡¹ç›®è€Œè¨€ï¼Œæœ€å¥½è¿˜æ˜¯æ›´è°¨æ…åœ°çœ‹å¾…\n\n### redux-sagaï¼šéš¾ã€è€Œç¾\n\n[Redux-saga](https://github.com/redux-saga/redux-saga)\n\nå¦ä¸€ä¸ªè‘—åçš„åº“ï¼Œå®ƒè®©å¼‚æ­¥è¡Œä¸ºæˆä¸ºæ¶æ„ä¸­ç‹¬ç«‹çš„ä¸€å±‚(ç§°ä¸ºsaga)ï¼Œæ—¢ä¸åœ¨action creatorä¸­ï¼Œä¹Ÿä¸å’Œreduceræ²¾è¾¹ã€‚\n\nå®ƒçš„å‡ºå‘ç‚¹æ˜¯æŠŠå‰¯ä½œç”¨ (Side effectï¼Œå¼‚æ­¥è¡Œä¸ºå°±æ˜¯å…¸å‹çš„å‰¯ä½œç”¨) çœ‹æˆâ€çº¿ç¨‹â€ï¼Œå¯ä»¥é€šè¿‡æ™®é€šçš„actionå»è§¦å‘å®ƒï¼Œå½“å‰¯ä½œç”¨å®Œæˆæ—¶ä¹Ÿä¼šè§¦å‘actionä½œä¸ºè¾“å‡ºã€‚\n\n```javascript\nimport { takeEvery } from 'redux-saga'\nimport { call, put } from 'redux-saga/effects'\nimport Api from '...'\n\nfunction* getData(action) {\n   try {\n      const response = yield call(api.getData, action.payload.id);\n      yield put({type: \"GET_DATA_SUCCEEDED\", payload: response});\n   } catch (e) {\n      yield put({type: \"GET_DATA_FAILED\", payload: error});\n   }\n}\n\nfunction* mySaga() {\n  yield* takeEvery(\"GET_DATA\", getData);\n}\n\nexport default mySaga;\n```\n\nç›¸æ¯”action creatorçš„æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ä¿è¯ç»„ä»¶è§¦å‘çš„actionæ˜¯çº¯å¯¹è±¡ï¼Œå› æ­¤è‡³å°‘åœ¨é¡¹ç›®èŒƒå›´å†…(middlewareå’Œsagaéƒ½æ˜¯é¡¹ç›®çš„é¡¶å±‚ä¾èµ–ï¼Œè·¨é¡¹ç›®æ— æ³•ä¿è¯)ï¼Œactionçš„ç»„åˆæ€§æ˜æ˜¾æ›´åŠ ä¼˜ç§€ã€‚\n\nè€Œå®ƒæœ€ä¸ºä¸»æ‰“çš„ï¼Œåˆ™æ˜¯`å¯æµ‹è¯•æ€§`å’Œå¼ºå¤§çš„`å¼‚æ­¥æµç¨‹æ§åˆ¶`ã€‚\n\nç”±äºå¼ºåˆ¶æ‰€æœ‰sagaéƒ½å¿…é¡»æ˜¯generatorå‡½æ•°ï¼Œå€ŸåŠ©generatorçš„nextæ¥å£ï¼Œå¼‚æ­¥è¡Œä¸ºçš„æ¯ä¸ªä¸­é—´æ­¥éª¤éƒ½è¢«æš´éœ²ç»™äº†å¼€å‘è€…ï¼Œä»è€Œå®ç°å¯¹å¼‚æ­¥é€»è¾‘â€step by stepâ€çš„æµ‹è¯•ã€‚è¿™åœ¨å…¶å®ƒæ–¹æ¡ˆä¸­æ˜¯å¾ˆå°‘çœ‹åˆ°çš„ (å½“ç„¶ä¹Ÿå¯ä»¥å€Ÿé‰´generatorè¿™ä¸€ç‚¹ï¼Œä½†ç¼ºå°‘çº¦æŸ)ã€‚\n\nè€Œå¼ºå¤§å¾—æœ‰ç‚¹çœ¼èŠ±ç¼­ä¹±çš„APIï¼Œç‰¹åˆ«æ˜¯channelçš„å¼•å…¥ï¼Œåˆ™æä¾›äº†æ­¦è£…åˆ°ç‰™é½¿çº§çš„å¼‚æ­¥æµç¨‹æ§åˆ¶èƒ½åŠ›ã€‚\n\nç„¶è€Œï¼Œå›é¡¾æˆ‘ä»¬åœ¨è®¨è®ºç®€å•æ–¹æ¡ˆæ—¶æåˆ°çš„å„ç§åœºæ™¯ä¸é—®é¢˜ï¼Œredux-sagaå¹¶æ²¡æœ‰å»å°è¯•å›ç­”å’Œè§£å†³å®ƒä»¬ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦è‡ªè¡Œå¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚è€Œgeneratorã€ç›¸å¯¹å¤æ‚çš„APIå’Œå•ç‹¬çš„ä¸€å±‚æŠ½è±¡ä¹Ÿè®©ä¸å°‘äººæœ›è€Œå´æ­¥ã€‚\n\nåŒ…æ‹¬æˆ‘åœ¨å†…ï¼Œå¾ˆå¤šäººéå¸¸æ¬£èµredux-sagaã€‚å®ƒçš„æ¶æ„å’Œæ€è·¯æ¯«æ— ç–‘é—®æ˜¯ä¼˜ç§€ç”šè‡³ä¼˜é›…çš„ï¼Œä½†ä½¿ç”¨å®ƒä¹‹å‰ï¼Œæœ€å¥½æƒ³æ¸…æ¥šå®ƒå¸¦æ¥çš„ä¼˜ç‚¹(å¯æµ‹è¯•æ€§ã€æµç¨‹æ§åˆ¶ã€é«˜åº¦è§£è€¦)ä¸ä»˜å‡ºçš„æˆæœ¬æ˜¯å¦åŒ¹é…ï¼Œç‰¹åˆ«æ˜¯å¼‚æ­¥æ–¹é¢å¤æ‚åº¦å¹¶ä¸é«˜çš„é¡¹ç›®ï¼Œæ¯”å¦‚å¤šæ•°ä»¥CRUDä¸ºä¸»çš„ç®¡ç†ç³»ç»Ÿã€‚\n\n#### åœºæ™¯è§£æï¼šç«æ€\n\nç«æ€ï¼š\n\n```javascript\nfunction fetchFriend(id) {\n    return dispatch => {\n        dispatch({ type: 'FETCH_FRIEND' });\n        return fetch(`http://localhost/api/friend/${id}`)\n            .then(response => response.json())\n            .then(json => dispatch({ type: 'RECEIVE_FRIENDS', payload: json }));\n    }\n}\n```\nå¦‚æœ fetch ä¿®æ”¹ä¸º buttonclickï¼ŒsetTimeout è¿™æ ·çš„å¼€å§‹å¯ä»¥ç¡®å®šé¡ºåºçš„ï¼Œ\nä½†æ˜¯ fetch æ˜¯å’ŒæœåŠ¡å™¨æ²Ÿé€šçš„ï¼ŒæœåŠ¡å™¨å¤„ç†æ•°æ®è¿”å›é¡ºåºæ˜¯ä¸ç¡®å®š\né‚£ä¹ˆæ€ä¹ˆå¤„ç†ï¼Ÿ\n\nå†²çªæµç¨‹å¦‚ä¸‹ï¼š\n ç‚¹å‡»çœ‹å¥½å‹1ä¿¡æ¯\n æœåŠ¡å™¨è¯·æ±‚\n æ²¡ç­‰1è¿”å›ï¼Œ çœ‹å¥½å‹2ä¿¡æ¯ (æˆ‘å°±æƒ³çœ‹è¿™ä¸ª)\n å¥½å‹2æœåŠ¡å™¨è¯·æ±‚è¿”å›æ¯”è¾ƒå¿«(å¯èƒ½åœ¨cacheä¸­)\n æ˜¾ç¤ºå¥½å‹2ä¿¡æ¯äº†\n ç­‰äº†ä¸€ä¼šå„¿1è¿”å›äº†\n è¦†ç›–äº†2   (BOOM!)\n\nç”±äºå¼‚æ­¥è¿”å›æ—¶é—´çš„ä¸ç¡®å®šæ€§ï¼Œåå‘å‡ºçš„è¯·æ±‚å¯èƒ½å…ˆè¿”å›ï¼Œå¦‚ä½•ç¡®ä¿å¼‚æ­¥ç»“æœçš„æ¸²æŸ“æ˜¯æŒ‰ç…§è¯·æ±‚å‘ç”Ÿé¡ºåºï¼Œè€Œä¸æ˜¯è¿”å›é¡ºåºï¼Ÿ\n\nè¿™åœ¨redux-thunkä¸ºä»£è¡¨çš„ç®€å•æ–¹æ¡ˆä¸­æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ï¼š\n\n```javascript\nfunction fetchFriend(id){\n    return (dispatch, getState) => {\n        //æ­¥éª¤1ï¼šåœ¨reducerä¸­ set state.currentFriend = id;\n        dispatch({type: 'FETCH_FIREND', payload: id});\n\n        return fetch(`http://localhost/api/firend/${id}`)\n            .then(response => response.json())\n            .then(json => {\n                //æ­¥éª¤2ï¼šåªå¤„ç†currentFriendçš„å¯¹åº”response\n                const { currentFriend } = getState();\n                (currentFriend === id) && dispatch({type: 'RECEIVE_FIRENDS', playload: json})\n            });\n    }\n}\n```\n\nä»¥ä¸Šåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…ä¸­ä¸ä¸€å®šéœ€è¦ä¾èµ–ä¸šåŠ¡idï¼Œä¹Ÿä¸ä¸€å®šè¦æŠŠidå­˜åˆ°storeé‡Œï¼Œåªè¦ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆkeyï¼Œä»¥ä¾¿å¤„ç†è¯·æ±‚æ—¶èƒ½å¤Ÿå¯¹åº”èµ·æ¥å³å¯ã€‚\n\nè€Œåœ¨redux-sagaä¸­ï¼Œä¸€åˆ‡éå¸¸åœ°ç®€å•ï¼š\n\n```javascript\nimport { takeLatest } from `redux-saga`\n\nfunction* fetchFriend(action) {\n  ...\n}\n\nfunction* watchLastFetchUser() {\n  yield takeLatest('FETCH_FIREND', fetchFriend)\n}\n```\n\nè¿™é‡Œçš„é‡ç‚¹æ˜¯takeLatestï¼Œå®ƒé™åˆ¶äº†åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„é¡ºåºå…³ç³»ã€‚\n\nå¦å¤–è¿˜æœ‰ä¸€äº›åŸºäºå“åº”å¼ç¼–ç¨‹(Reactive Programming)çš„å¼‚æ­¥æ–¹æ¡ˆ(å¦‚redux-observable)ä¹Ÿèƒ½éå¸¸å¥½åœ°å¤„ç†ç«æ€åœºæ™¯ï¼Œå› ä¸ºæè¿°äº‹ä»¶æµä¹‹é—´çš„å…³ç³»ï¼Œæ­£æ˜¯æ•´ä¸ªå“åº”å¼ç¼–ç¨‹çš„æŠ½è±¡åŸºçŸ³ï¼Œè€Œç«æ€åœ¨æœ¬è´¨ä¸Šå°±æ˜¯å¦‚ä½•ä¿è¯åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„å…³ç³»ï¼Œæ­£æ˜¯å“åº”å¼ç¼–ç¨‹çš„ç”¨æ­¦ä¹‹åœ°ã€‚\n\n> å®é™…é¡¹ç›®ä¸­å¯ä»¥ç”¨é«˜é˜¶å‡½æ•°æ¨¡ä»¿takeLatestçš„åŠŸèƒ½ï¼Œredux-thunkç±»æ–¹æ¡ˆä¹Ÿå¯ä»¥è¾ƒä½æˆæœ¬åœ°å¤„ç†ç«æ€\n\n```javascript\nfunction takeLatestAsyncResult(promiseCreator) {\n  var index = 0;\n  return function () {\n    index++;\n    var promise = promiseCreator.apply(this, arguments);\n\n    function guardLatest(func, reqIndex) {\n      return function() {\n        if (reqIndex === index) {\n          func.apply(this, arguments)\n        }\n      }\n    }\n\n    return new Promise(function(resolve, reject) {\n      promise.then(\n        guardLatest(resolve, index),\n        guardLatest(reject, index)\n      );\n    });\n  }\n}\n\nfunction runTimeout(timeout) {\n\treturn new Promise(function(resolve) {\n    setTimeout(function() {\n\t\t\tresolve(timeout);\n    }, timeout)\n  })\n}\n\nfunction getAsyncTaskRunner(label, promiseCreator) {\n  return function(value) {\n    promiseCreator(value).then(function() {\n      console.log(`${label} : ${value}`)\n    })\n  }\n}\n\nfunction runAsyncQue(arr) {\n  arr.map(getAsyncTaskRunner('runAsyncQue', runTimeout));\n}\n\nfunction runLatestAsync(arr) {\n\tvar wrappedTimeout = takeLatestAsyncResult(runTimeout);\n  arr.map(getAsyncTaskRunner('runLatestAsync', wrappedTimeout));\n}\n\nrunAsyncQue([2000, 1000, 3000, 500, 400])\n\nrunLatestAsync([2000, 1000, 3000, 500, 400])\n\n\nfunction takeLatestAsyncResult(promiseCreator) {\n    let index = 0;\n\n    return function(){\n        index++;\n\n        const promise = promiseCreator.apply(this, arguments);\n\n        function guardLatest(func, reqIndex) {\n            return function() {\n                if (reqIndex === index) {\n                    func.apply(this, arguments)\n                }\n            }\n        }\n\n        return new Promise(function(resolve, reject){\n            promise.then(\n                guardLatest(resolve, index),\n                guardLatest(reject, index)\n            )\n        })\n    }\n}\n\n\n\n```\n","slug":"2017-05-06-redux-async","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhxy001jmmt72fw5ctbd","content":"<h1 id=\"Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\"><a href=\"#Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\" class=\"headerlink\" title=\"Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\"></a>Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹</h1><p>ä½œä¸ºreactç¤¾åŒºæœ€çƒ­é—¨çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½å‡†å¤‡ç”šè‡³æ­£åœ¨ä½¿ç”¨Reduxã€‚</p>\n<p>ç”±äºReduxçš„ç†å¿µéå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰è¿½æ±‚å¤§è€Œå…¨ï¼Œè¿™ä»½æ¶æ„ä¸Šçš„ä¼˜é›…å´åœ¨æŸç§ç¨‹åº¦ä¸Šä¼¤å®³äº†ä½¿ç”¨ä½“éªŒï¼šä¸èƒ½å¼€ç®±å³ç”¨ï¼Œç”šè‡³æ˜¯å¼‚æ­¥è¿™ç§æœ€å¸¸è§çš„åœºæ™¯ä¹Ÿè¦å€ŸåŠ©ç¤¾åŒºæ–¹æ¡ˆã€‚</p>\n<p>å¦‚æœä½ å·²ç»æŒ‘èŠ±äº†çœ¼ï¼Œæˆ–è€…æ­£åœ¨æŒ‘ä½†ä¸çŸ¥é“æ˜¯å¦é€‚åˆï¼Œæˆ–è€…å·²ç»æŒ‘äº†ä½†ä¸çŸ¥é“ä¼šä¸ä¼šæœ‰å‘ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥é€‚åˆä½ ã€‚</p>\n<p>æœ¬æ–‡ä¼šä»ä¸€äº›å¸¸è§çš„Reduxå¼‚æ­¥æ–¹æ¡ˆå‡ºå‘ï¼Œä»‹ç»å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œè¿›è€Œè®¨è®ºä¸€äº›ä¸å¼‚æ­¥ç›¸ä¼´çš„å¸¸è§åœºæ™¯ï¼Œå¸®åŠ©ä½ åœ¨é€‰å‹æ—¶æ›´å¥½åœ°æƒè¡¡åˆ©å¼Šã€‚</p>\n<h2 id=\"ç®€å•æ–¹æ¡ˆ\"><a href=\"#ç®€å•æ–¹æ¡ˆ\" class=\"headerlink\" title=\"ç®€å•æ–¹æ¡ˆ\"></a>ç®€å•æ–¹æ¡ˆ</h2><h3 id=\"redux-thunkï¼šæŒ‡è·¯å…ˆé©±\"><a href=\"#redux-thunkï¼šæŒ‡è·¯å…ˆé©±\" class=\"headerlink\" title=\"redux-thunkï¼šæŒ‡è·¯å…ˆé©±\"></a>redux-thunkï¼šæŒ‡è·¯å…ˆé©±</h3><p><a href=\"https://github.com/gaearon/redux-thunk\" target=\"_blank\" rel=\"external\">Github</a></p>\n<blockquote>\n<p>Reduxæœ¬èº«åªèƒ½å¤„ç†åŒæ­¥çš„Actionï¼Œä½†å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥æ‹¦æˆªå¤„ç†å…¶å®ƒç±»å‹çš„actionï¼Œæ¯”å¦‚å‡½æ•°(Thunk)ï¼Œå†ç”¨å›è°ƒè§¦å‘æ™®é€šAction<br>ä»è€Œå®ç°å¼‚æ­¥å¤„ç†ï¼Œåœ¨è¿™ç‚¹ä¸Šæ‰€æœ‰Reduxçš„å¼‚æ­¥æ–¹æ¡ˆéƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p>\n</blockquote>\n<h3 id=\"redux-promiseï¼šç˜¦èº«è¿‡å¤´\"><a href=\"#redux-promiseï¼šç˜¦èº«è¿‡å¤´\" class=\"headerlink\" title=\"redux-promiseï¼šç˜¦èº«è¿‡å¤´\"></a>redux-promiseï¼šç˜¦èº«è¿‡å¤´</h3><p>ç”±äºredux-thunkå†™èµ·æ¥å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œç¤¾åŒºå½“ç„¶ä¼šæœ‰å…¶å®ƒè½®å­å‡ºç°ã€‚<a href=\"https://github.com/pburtchaell/redux-promise-middleware\" target=\"_blank\" rel=\"external\">redux-promise</a>åˆ™æ˜¯å…¶ä¸­æ¯”è¾ƒçŸ¥åçš„ï¼ŒåŒæ ·ä¹Ÿäº«å—äº†å®˜ç½‘å‡ºé•œçš„å¾…é‡ã€‚</p>\n<p>å®ƒè‡ªå®šä¹‰äº†ä¸€ä¸ªmiddlewareï¼Œå½“æ£€æµ‹åˆ°æœ‰actionçš„payloadå±æ€§æ˜¯Promiseå¯¹è±¡æ—¶ï¼Œå°±ä¼š:</p>\n<ul>\n<li>è‹¥resolveï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„valueï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€successâ€</li>\n<li>è‹¥rejectï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„reasonï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€errorâ€</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//action types</span></div><div class=\"line\"><span class=\"keyword\">const</span> GET_DATA = <span class=\"string\">'GET_DATA'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: GET_DATA,</div><div class=\"line\">        <span class=\"attr\">payload</span>: api.getData(id) <span class=\"comment\">//payloadä¸ºpromiseå¯¹è±¡</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//reducer</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">oldState, action</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA:</div><div class=\"line\">        <span class=\"keyword\">if</span> (action.status === <span class=\"string\">'success'</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> successState</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> errorState</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>è¯·ç­‰ç­‰ï¼Œä»»ä½•èƒ½æ˜æ˜¾å‡å°‘ä»£ç é‡çš„æ–¹æ¡ˆï¼Œéƒ½åº”è¯¥å°å¿ƒå®ƒæ˜¯å¦è¿‡åº¦çœç•¥äº†ä»€ä¹ˆä¸œè¥¿ï¼Œå‡è‚¥æ˜¯å¥½äº‹ï¼Œå‡åˆ°éª¨å¤´å°±æ®‹äº†ã€‚</p>\n<h4 id=\"åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\"><a href=\"#åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\" class=\"headerlink\" title=\"åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\"></a>åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°</h4><p>å¤šæ•°å¼‚æ­¥åœºæ™¯éƒ½æ˜¯ä¿å®ˆæ›´æ–°çš„ï¼Œå³ç­‰åˆ°è¯·æ±‚æˆåŠŸæ‰æ¸²æŸ“æ•°æ®ã€‚è€Œä¸ä¹‹ç›¸å¯¹çš„ä¹è§‚æ›´æ–°ï¼Œåˆ™æ˜¯ä¸ç­‰å¾…è¯·æ±‚æˆåŠŸï¼Œåœ¨å‘é€è¯·æ±‚çš„åŒæ—¶ç«‹å³æ¸²æŸ“æ•°æ®ã€‚</p>\n<p>æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯å¾®ä¿¡ç­‰èŠå¤©å·¥å…·ï¼Œå‘é€æ¶ˆæ¯æ—¶æ¶ˆæ¯ç«‹å³è¿›å…¥äº†å¯¹è¯çª—ï¼Œå¦‚æœå‘é€å¤±è´¥çš„è¯ï¼Œåœ¨æ¶ˆæ¯æ—è¾¹å†ä½œè¡¥å……æç¤ºå³å¯ã€‚è¿™ç§äº¤äº’â€ä¹è§‚â€åœ°ç›¸ä¿¡è¯·æ±‚ä¼šæˆåŠŸï¼Œå› æ­¤ç§°ä½œä¹è§‚æ›´æ–°(Optimistic update)ã€‚</p>\n<p>ç”±äºä¹è§‚æ›´æ–°å‘ç”Ÿåœ¨ç”¨æˆ·æ“ä½œæ—¶ï¼Œè¦å¤„ç†å®ƒï¼Œæ„å‘³ç€å¿…é¡»æœ‰actionè¡¨ç¤ºç”¨æˆ·çš„åˆå§‹åŠ¨ä½œ</p>\n<p>åœ¨ä¸Šé¢redux-thunkçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†GET_DATA, GET_DATA_SUCCESSã€GET_DATA_FAILEDä¸‰ä¸ªactionï¼Œåˆ†åˆ«è¡¨ç¤ºåˆå§‹åŠ¨ä½œã€å¼‚æ­¥æˆåŠŸå’Œå¼‚æ­¥å¤±è´¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªactionä½¿å¾—redux-thunkå…·å¤‡ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚</p>\n<p>è€Œåœ¨redux-promiseä¸­ï¼Œæœ€åˆè§¦å‘çš„actionè¢«ä¸­é—´ä»¶æ‹¦æˆªç„¶åè¿‡æ»¤æ‰äº†ã€‚åŸå› å¾ˆç®€å•ï¼Œreduxè®¤å¯çš„actionå¯¹è±¡æ˜¯ plain JavaScript objectsï¼Œå³ç®€å•å¯¹è±¡ï¼Œè€Œåœ¨redux-promiseä¸­ï¼Œåˆå§‹actionçš„payloadæ˜¯ä¸ªPromiseã€‚</p>\n<p>å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨statusè€Œä¸æ˜¯typeæ¥åŒºåˆ†ä¸¤ä¸ªå¼‚æ­¥actionä¹Ÿéå¸¸å€¼å¾—å•†æ¦·ï¼ŒæŒ‰ç…§reduxå¯¹actionçš„å®šä¹‰ä»¥åŠç¤¾åŒºçš„æ™®éå®è·µï¼Œä¸ªäººè¿˜æ˜¯å€¾å‘äºä½¿ç”¨ä¸åŒçš„typeï¼Œç”¨åŒä¸€typeä¸‹çš„ä¸åŒstatusåŒºåˆ†actioné¢å¤–å¢åŠ äº†ä¸€å¥—éšå½¢çš„çº¦å®šï¼Œç”šè‡³ä¸ç¬¦åˆè¯¥redux-promiseä½œè€…è‡ªå·±æ‰€æå€¡çš„FSAï¼Œä½“ç°åœ¨ä»£ç ä¸Šåˆ™æ˜¯åœ¨switch-caseå†…å†å¢åŠ ä¸€å±‚åˆ¤æ–­ã€‚</p>\n<h3 id=\"redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\"><a href=\"#redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\" class=\"headerlink\" title=\"redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\"></a>redux-promise-middlewareï¼šæ‹”ä¹±åæ­£</h3><p>redux-promise-middlewareç›¸æ¯”redux-promiseï¼Œé‡‡å–äº†æ›´ä¸ºæ¸©å’Œå’Œæ¸è¿›å¼çš„æ€è·¯ï¼Œä¿ç•™äº†å’Œredux-thunkç±»ä¼¼çš„ä¸‰ä¸ªactionã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//action types</span></div><div class=\"line\"><span class=\"keyword\">const</span> GET_DATA = <span class=\"string\">'GET_DATA'</span>,</div><div class=\"line\">    GET_DATA_PENDING = <span class=\"string\">'GET_DATA_PENDING'</span>,</div><div class=\"line\">    GET_DATA_FULFILLED = <span class=\"string\">'GET_DATA_FULFILLED'</span>,</div><div class=\"line\">    GET_DATA_REJECTED = <span class=\"string\">'GET_DATA_REJECTED'</span>;</div><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: GET_DATA,</div><div class=\"line\">        <span class=\"attr\">payload</span>: &#123;</div><div class=\"line\">            <span class=\"attr\">promise</span>: api.getData(id),</div><div class=\"line\">            <span class=\"attr\">data</span>: id</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//reducer</span></div><div class=\"line\"><span class=\"keyword\">const</span> reducer = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">oldState, action</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_PENDING :</div><div class=\"line\">        <span class=\"keyword\">return</span> oldState; <span class=\"comment\">// å¯é€šè¿‡action.payload.dataè·å–id</span></div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_FULFILLED :</div><div class=\"line\">        <span class=\"keyword\">return</span> successState;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_REJECTED :</div><div class=\"line\">        <span class=\"keyword\">return</span> errorState;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>å¦‚æœä¸éœ€è¦ä¹è§‚æ›´æ–°ï¼Œaction creatorå¯ä»¥ä½¿ç”¨å’Œredux-promiseå®Œå…¨ä¸€æ ·çš„ï¼Œæ›´ç®€æ´çš„å†™æ³•ï¼Œ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> getData = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: GET_DATA,</div><div class=\"line\">        <span class=\"attr\">payload</span>: api.getData(id) <span class=\"comment\">//ç­‰ä»·äº &#123;promise: api.getData(id)&#125;</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æ­¤æ—¶åˆå§‹actionGET_DATA_PENDINGä»ç„¶ä¼šè§¦å‘ï¼Œä½†æ˜¯payloadä¸ºç©ºã€‚</p>\n<p>ç›¸å¯¹redux-promiseäºç²—æš´åœ°è¿‡æ»¤æ‰æ•´ä¸ªåˆå§‹actionï¼Œredux-promise-middlewareé€‰æ‹©åˆ›å»ºä¸€ä¸ªåªè¿‡æ»¤payloadä¸­çš„promiseå±æ€§çš„XXX_PENDINGä½œä¸ºåˆå§‹actionï¼Œä»¥æ­¤ä¿ç•™ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚</p>\n<p>åŒæ—¶åœ¨actionçš„åŒºåˆ†ä¸Šï¼Œå®ƒé€‰æ‹©äº†å›å½’typeçš„â€æ­£é€”â€ï¼Œ_PENDINGã€_FULFILLEDã€_REJECTEDç­‰åç¼€å€Ÿç”¨äº†promiseè§„èŒƒ (å½“ç„¶å®ƒä»¬æ˜¯å¯é…ç½®çš„) ã€‚</p>\n<p>å®ƒçš„é—æ†¾åˆ™æ˜¯åªåœ¨actionå±‚å®ç°äº†ç®€åŒ–ï¼Œå¯¹reducerå±‚åˆ™æŸæ‰‹æ— ç­–ã€‚å¦å¤–ï¼Œç›¸æ¯”redux-thunkï¼Œå®ƒè¿˜å¤šå‡ºäº†ä¸€ä¸ª_PENDINGçš„å­—ç¬¦ä¸²æ¨¡æ¿ä»£ç (ä¸‰ä¸ªactionå´éœ€è¦å››ä¸ªtype)ã€‚</p>\n<blockquote>\n<p>ç¤¾åŒºæœ‰ç±»ä¼¼type-to-reducerè¿™æ ·è¯•å›¾ç®€åŒ–reducerçš„åº“ã€‚ä½†ç”±äºreducerå’Œå¼‚æ­¥actioné€šå¸¸æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„æ–¹æ¡ˆï¼Œreducerç›¸å…³çš„åº“æ— æ³•å»çŒœæµ‹å¼‚æ­¥actionçš„åç¼€æ˜¯ä»€ä¹ˆ(ç”šè‡³æœ‰æ²¡æœ‰åç¼€)ï¼Œç¤¾åŒºä¹Ÿæ²¡æœ‰ç›¸å…³æ ‡å‡†ï¼Œä¹Ÿå°±å¾ˆéš¾å¯¹å¼‚æ­¥åšå‡ºç²¾ç®€å’ŒæŠ½è±¡äº†ã€‚</p>\n</blockquote>\n<h3 id=\"redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\"><a href=\"#redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\" class=\"headerlink\" title=\"redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\"></a>redux-action-toolsï¼šè½¯æ–‡é¢„è­¦</h3><p>æ— è®ºæ˜¯redux-thunkè¿˜æ˜¯redux-promise-middlewareï¼Œæ¨¡æ¿ä»£ç éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ¯æ¬¡å†™XXX_COMPLETEDè¿™æ ·çš„ä»£ç éƒ½è§‰å¾—æ˜¯åœ¨æµªè´¹ç”Ÿå‘½â€”â€”ä½ å¾—å…ˆåœ¨å¸¸é‡ä¸­å£°æ˜å®ƒä»¬ï¼Œå†åœ¨actionä¸­å¼•ç”¨ï¼Œç„¶åæ˜¯reducerï¼Œå‡è®¾åƒredux-thunkä¸€æ ·æ¯ä¸ªå¼‚æ­¥actionæœ‰ä¸‰ä¸ªtypeï¼Œä¸‰ä¸ªæ–‡ä»¶åŠ èµ·æ¥ä½ å°±å¾—å†™ä¹æ¬¡!</p>\n<p>å›½å¤–å¼€å‘è€…ä¹Ÿæœ‰ç›¸åŒçš„æŠ¥æ€¨ï¼š</p>\n<p>æœ‰æ²¡æœ‰åŠæ³•è®©ä»£ç æ—¢åƒredux-promiseä¸€æ ·ç®€æ´ï¼Œåˆèƒ½ä¿æŒä¹è§‚æ›´æ–°çš„èƒ½åŠ›å‘¢ï¼Ÿ</p>\n<p>redux-action-toolsæ˜¯æˆ‘ç»™å‡ºçš„ç­”æ¡ˆï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> GET_DATA = <span class=\"string\">'GET_DATA'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = createAsyncAction(GET_DATA, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> api.getData(id)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//reducer</span></div><div class=\"line\"><span class=\"keyword\">const</span> reducer = createReducer()</div><div class=\"line\">    .when(getData, (oldState, action) =&gt; oldState)</div><div class=\"line\">    .done(<span class=\"function\">(<span class=\"params\">oldState, action</span>) =&gt;</span> successState)</div><div class=\"line\">    .failed(<span class=\"function\">(<span class=\"params\">oldState, action</span>) =&gt;</span> errorState)</div><div class=\"line\">    .build()</div></pre></td></tr></table></figure>\n<p>redux-action-toolsåœ¨actionå±‚é¢åšçš„äº‹æƒ…ä¸å‰é¢å‡ ä¸ªåº“å¤§åŒå°å¼‚ï¼šåŒæ ·æ˜¯æ´¾å‘äº†ä¸‰ä¸ªactionï¼šGET_DATA/GET_DATA_SUCCESS/GET_DATA_FAILEDã€‚è¿™ä¸‰ä¸ªactionçš„æè¿°è§ä¸‹è¡¨ï¼š</p>\n<p>type When payload meta.asyncPhase ${actionName} å¼‚æ­¥å¼€å§‹å‰ åŒæ­¥è°ƒç”¨å‚æ•° â€˜STARTâ€™ ${actionName}_COMPLETED å¼‚æ­¥æˆåŠŸ value of promise â€˜COMPLETEDâ€™ ${actionName}_FAILED å¼‚æ­¥å¤±è´¥ reason of promise â€˜FAILEDâ€™<br>createAsyncActionå‚è€ƒäº†redux-promiseä½œè€…å†™çš„redux-actions ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>\n<ul>\n<li>actionName å­—ç¬¦ä¸²ï¼Œæ‰€æœ‰æ´¾ç”Ÿactionçš„åå­—éƒ½ä»¥å®ƒä¸ºåŸºç¡€ï¼Œåˆå§‹actionåˆ™ä¸å®ƒåŒå</li>\n<li>promiseCreator å‡½æ•°ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡</li>\n<li>metaCreator å‡½æ•°ï¼Œå¯é€‰ï¼Œä½œç”¨åé¢ä¼šæ¼”ç¤ºåˆ°</li>\n</ul>\n<p>ç›®å‰çœ‹æ¥ï¼Œå…¶å®å’Œredux-promise/redux-promise-middlewareå¤§åŒå°å¼‚ã€‚è€ŒçœŸæ­£ä¸åŒçš„ï¼Œæ˜¯å®ƒåŒæ—¶ç®€åŒ–äº†reducerå±‚! è¿™ç§ç®€åŒ–æ¥è‡ªäºå¯¹å¼‚æ­¥è¡Œä¸ºä»è¯­ä¹‰è§’åº¦çš„æŠ½è±¡ï¼š</p>\n<blockquote>\n<p>å½“(when)åˆå§‹actionå‘ç”Ÿæ—¶å¤„ç†åŒæ­¥æ›´æ–°ï¼Œè‹¥å¼‚æ­¥æˆåŠŸ(done)åˆ™å¤„ç†æˆåŠŸé€»è¾‘ï¼Œè‹¥å¼‚æ­¥å¤±è´¥(failed)åˆ™å¤„ç†å¤±è´¥é€»è¾‘</p>\n</blockquote>\n<p>æŠ½ç¦»å‡ºwhen/done/failedä¸‰ä¸ªå…³é”®è¯ä½œä¸ºapiï¼Œå¹¶ä½¿ç”¨é“¾å¼è°ƒç”¨å°†ä»–ä»¬ä¸²è”èµ·æ¥ï¼šwhenå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šactionNameå’Œhandlerï¼Œå…¶ä¸­handleræ˜¯å¯é€‰çš„ï¼Œdoneå’Œfailedåˆ™åªæ¥æ”¶ä¸€ä¸ªhandlerå‚æ•°ï¼Œå¹¶ä¸”åªèƒ½åœ¨whenä¹‹åè°ƒç”¨â€”â€”ä»–ä»¬åˆ†åˆ«å¤„ç† ${actionName}_SUCCESS å’Œ ${actionName}_FAILED .</p>\n<p>æ— è®ºæ˜¯actionè¿˜æ˜¯reducerå±‚ï¼ŒXX_SUCCESS/XX_FAILEDç›¸å…³çš„ä»£ç éƒ½è¢«å°è£…äº†èµ·æ¥ï¼Œæ­£å¦‚åœ¨ä¾‹å­ä¸­çœ‹åˆ°çš„â€”â€”ä½ ç”šè‡³ä¸éœ€è¦å£°æ˜å®ƒä»¬! åˆ›å»ºä¸€ä¸ªå¼‚æ­¥actionï¼Œç„¶åå¤„ç†å®ƒçš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µï¼Œäº‹æƒ…æœ¬è¯¥è¿™ä¹ˆç®€å•ã€‚</p>\n<p>æ›´è¿›ä¸€æ­¥çš„ï¼Œè¿™ä¸‰ä¸ªactioné»˜è®¤éƒ½æ ¹æ®å½“å‰æ‰€å¤„çš„å¼‚æ­¥é˜¶æ®µï¼Œè®¾ç½®äº†ä¸åŒçš„meta(è§ä¸Šè¡¨ä¸­çš„meta.asyncPhase)ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿç”¨åœºæ™¯è¯´è¯ï¼š</p>\n<h4 id=\"åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\"><a href=\"#åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\" class=\"headerlink\" title=\"åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\"></a>åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading</h4><p>å®ƒä»¬æ˜¯å¼‚æ­¥ä¸å¯å›é¿çš„ä¸¤ä¸ªåœºæ™¯ï¼Œå‡ ä¹æ¯ä¸ªé¡¹ç›®ä¼šé‡åˆ°ã€‚<br>ä»¥å¼‚æ­¥è¯·æ±‚çš„å¤±è´¥å¤„ç†ä¸ºä¾‹ï¼Œæ¯ä¸ªé¡¹ç›®é€šå¸¸éƒ½æœ‰ä¸€å¥—æ¯”è¾ƒé€šç”¨çš„ï¼Œé€‚åˆå¤šæ•°åœºæ™¯çš„å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚å¼¹çª—æç¤ºã€‚åŒæ—¶åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œåˆéœ€è¦ç»•è¿‡é€šç”¨é€»è¾‘è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œæ¯”å¦‚è¡¨å•çš„å¼‚æ­¥æ ¡éªŒ</p>\n<p>è€Œåœ¨å®ç°é€šç”¨å¤„ç†é€»è¾‘æ—¶ï¼Œå¸¸è§çš„é—®é¢˜æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>\n<ul>\n<li>åº•å±‚å¤„ç†ï¼Œæ‰©å±•æ€§ä¸è¶³</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchWrapper</span>(<span class=\"params\">args</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> fetch.apply(fetch, args)</div><div class=\"line\">        .catch(commonErrorHandler)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>åœ¨è¾ƒåº•å±‚å°è£…ajaxåº“å¯ä»¥è½»æ¾å®ç°å…¨å±€å¤„ç†ï¼Œä½†é—®é¢˜ä¹Ÿéå¸¸æ˜æ˜¾ï¼š</p>\n<p>ä¸€æ˜¯æ‰©å±•æ€§ä¸è¶³ï¼Œæ¯”å¦‚å°‘æ•°åœºæ™¯æƒ³è¦ç»•è¿‡é€šç”¨å¤„ç†é€»è¾‘ï¼Œè¿˜æœ‰ä¸€äº›åœºæ™¯é”™è¯¯æ˜¯å‰ç«¯ç”Ÿæˆè€Œéç›´æ¥æ¥è‡ªäºè¯·æ±‚ï¼›<br>äºŒæ˜¯ä¸æ˜“ç»„åˆï¼Œæ¯”å¦‚æœ‰çš„åœºæ™¯ä¸€ä¸ªactionéœ€è¦å¤šä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œä½†å¼‚å¸¸å¤„ç†å’Œloadingæ˜¯ä¸éœ€è¦é‡å¤çš„ï¼Œå› ä¸ºç”¨æˆ·ä¸éœ€è¦çŸ¥é“ä¸€ä¸ªåŠ¨ä½œæœ‰å¤šå°‘ä¸ªè¯·æ±‚ã€‚</p>\n<ul>\n<li>ä¸å¤Ÿå†…èšï¼Œä¾µå…¥ä¸šåŠ¡ä»£ç </li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = createAsyncAction(GET_DATA, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> api.getData(id)</div><div class=\"line\">        .catch(commonErrorHandler) <span class=\"comment\">//è°ƒç”¨é”™è¯¯å¤„ç†å‡½æ•°</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>åœ¨æœ‰ä¸šåŠ¡æ„ä¹‰çš„actionå±‚è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ—¢èƒ½æŒ‰éœ€è°ƒç”¨ï¼Œåˆä¸å¦¨ç¢å¼‚æ­¥è¯·æ±‚çš„ç»„åˆã€‚ä½†ç”±äºé€šç”¨å¤„ç†å¾€å¾€é€‚ç”¨äºå¤šæ•°åœºæ™¯ï¼Œè¿™æ ·å†™ä¼šå¯¼è‡´ä¸šåŠ¡ä»£ç å˜å¾—å†—ä½™ï¼Œå› ä¸ºå‡ ä¹æ¯ä¸ªactionéƒ½å¾—è¿™ä¹ˆå†™ã€‚</p>\n<ul>\n<li>é«˜è€¦åˆï¼Œé«˜é£é™©</li>\n</ul>\n<p>ä¹Ÿæœ‰äººæŠŠä¸Šé¢çš„æ–¹æ¡ˆåšä¸ªä¾èµ–åè½¬ï¼Œæ”¹ä¸ºåœ¨é€šç”¨é€»è¾‘é‡Œç›‘å¬ä¸šåŠ¡actionï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">commonErrorReducer</span>(<span class=\"params\">oldState, action</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_FAILED:</div><div class=\"line\">    <span class=\"keyword\">case</span> PUT_DATA_FAILED:</div><div class=\"line\">    <span class=\"comment\">//... tons of action type</span></div><div class=\"line\">        <span class=\"keyword\">return</span> commonErrorHandler(action)</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>è¿™æ ·åšçš„æœ¬è´¨æ˜¯æŠŠå†—ä½™ä»ä¸šåŠ¡ä»£ç ä¸­æ‹¿å‡ºæ¥é›†ä¸­ç®¡ç†ã€‚</p>\n<p>é—®é¢˜åœ¨äºæ¯æ·»åŠ ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½éœ€è¦ä¿®æ”¹å…¬å…±ä»£ç ï¼ŒæŠŠå¯¹åº”çš„action typeåŠ è¿›æ¥ã€‚ä¸”ä¸è¯´å¹¶è¡Œå¼€å‘æ—¶mergeå†²çªï¼Œå¦‚æœåŠ äº†ä¸€ä¸ªå¼‚æ­¥actionï¼Œä½†å¿˜äº†å¾€å…¬å…±å¤„ç†æ–‡ä»¶ä¸­æ·»åŠ â€”â€”è¿™æ˜¯å¾ˆå¯èƒ½ä¼šå‘ç”Ÿçš„â€”â€”è€Œå¼‚å¸¸æ˜¯åˆ†æ”¯æµç¨‹ä¸å®¹æ˜“è¢«æµ‹è¯•å‘ç°ï¼Œç­‰åˆ°å‘ç°ï¼Œå¾ˆå¯èƒ½å°±æ˜¯äº‹æ•…è€Œä¸æ˜¯bugäº†ã€‚</p>\n<p>é€šè¿‡ä»¥ä¸Šå‡ ç§å¸¸è§æ–¹æ¡ˆçš„åˆ†æï¼Œæˆ‘è®¤ä¸ºæ¯”è¾ƒå®Œå–„çš„é”™è¯¯å¤„ç†(LoadingåŒç†)éœ€è¦å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>é¢å‘å¼‚æ­¥åŠ¨ä½œ(action)ï¼Œè€Œéç›´æ¥é¢å‘è¯·æ±‚</li>\n<li>ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç </li>\n<li>é»˜è®¤ä½¿ç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ— éœ€é¢å¤–ä»£ç </li>\n<li>å¯ä»¥ç»•è¿‡é€šç”¨é€»è¾‘</li>\n</ul>\n<p>è€Œå€ŸåŠ©redux-action-toolsæä¾›çš„meta.asyncPhaseï¼Œå¯ä»¥è½»æ˜“ç”¨middlewareå®ç°ä»¥ä¸Šå…¨éƒ¨éœ€æ±‚!</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; ASYNC_PHASES &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-action-tools'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">errorMiddleWare</span>(<span class=\"params\">&#123;dispatch&#125;</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">next</span> =&gt;</span> action =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> asyncStep = _.get(action, <span class=\"string\">'meta.asyncStep'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (asyncStep === ASYNC_PHASES.FAILED) &#123;</div><div class=\"line\">      dispatch(&#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'COMMON_ERROR'</span>,</div><div class=\"line\">        <span class=\"attr\">payload</span>: &#123;</div><div class=\"line\">          action</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">    next(action);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä¸­é—´ä»¶ä¸€æ—¦æ£€æµ‹åˆ°meta.asyncStepå­—æ®µä¸ºFAILEDçš„actionä¾¿è§¦å‘æ–°çš„actionå»è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ã€‚é¢å‘actionã€ä¸ä¾µå…¥ä¸šåŠ¡ã€é»˜è®¤å·¥ä½œ (åªè¦æ˜¯ç”¨createAsyncActionå£°æ˜çš„å¼‚æ­¥) ! è½»æ¾å®ç°äº†ç†æƒ³éœ€æ±‚ä¸­çš„å‰ä¸‰ç‚¹ï¼Œé‚£å¦‚ä½•å®šåˆ¶å‘¢ï¼Ÿæ—¢ç„¶æ‹¦æˆªæ˜¯é¢å‘metaçš„ï¼Œåªè¦åœ¨åˆ›å»ºactionæ—¶æ”¯æŒå¯¹metaçš„è‡ªå®šä¹‰å°±è¡Œäº†ï¼Œè€ŒcreateAsyncActionçš„ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ä¸ºæ­¤å‡†å¤‡çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; ASYNC_PHASES &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-action-tools'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> customizedAction = createAsyncAction(</div><div class=\"line\">  type,</div><div class=\"line\">  promiseCreator, <span class=\"comment\">//type å’Œ promiseCreatoræ­¤å¤„æ— ä¸åŒæ•…çœç•¥</span></div><div class=\"line\">  (payload, defaultMeta) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123; ...defaultMeta, <span class=\"attr\">omitError</span>: <span class=\"literal\">true</span> &#125;; <span class=\"comment\">//å‘metaä¸­æ·»åŠ é…ç½®å‚æ•°</span></div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">errorMiddleWare</span>(<span class=\"params\">&#123;dispatch&#125;</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">next</span> =&gt;</span> action =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> asyncStep = _.get(action, <span class=\"string\">'meta.asyncStep'</span>);</div><div class=\"line\">    <span class=\"keyword\">const</span> omitError = _.get(action, <span class=\"string\">'meta.omitError'</span>); <span class=\"comment\">//è·å–é…ç½®å‚æ•°</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (!omitError &amp;&amp; asyncStep === ASYNC_PHASES.FAILED) &#123;</div><div class=\"line\">      dispatch(&#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'COMMON_ERROR'</span>,</div><div class=\"line\">        <span class=\"attr\">payload</span>: &#123;</div><div class=\"line\">          action</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">    next(action);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ç±»ä¼¼çš„ï¼Œä½ å¯ä»¥æƒ³æƒ³å¦‚ä½•å¤„ç†Loadingï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯å»ºè®®å°½é‡ç”¨å¢é‡é…ç½®çš„æ–¹å¼è¿›è¡Œæ‰©å±•ï¼Œè€Œä¸è¦è½»æ˜“åˆ é™¤å’Œä¿®æ”¹meta.asyncPhaseã€‚<br>æ¯”å¦‚ä¸Šä¾‹å¯ä»¥é€šè¿‡åˆ é™¤meta.asyncPhaseå®ç°åŒæ ·åŠŸèƒ½ï¼Œä½†å¦‚æœåŒæ—¶è¿˜æœ‰å…¶å®ƒåœ°æ–¹ä¹Ÿä¾èµ–meta.asyncPhase(æ¯”å¦‚loadingMiddleware)ï¼Œå°±å¯èƒ½å¯¼è‡´æœ¬æ„æ˜¯å®šåˆ¶é”™è¯¯å¤„ç†ï¼Œå´æ”¹å˜äº†Loadingçš„è¡Œä¸ºï¼Œå®¢è§‚æ¥è®²è¿™å±‚é£é™©æ˜¯åŸºäºmetaæ‹¦æˆªæ–¹æ¡ˆçš„æœ€å¤§ç¼ºç‚¹ï¼Œç„¶è€Œç›¸æ¯”å¤šæ•°åœºæ™¯çš„ä¾¿åˆ©ã€å¥å£®ï¼Œä¸ªäººè®¤ä¸ºç‰¹æ®Šåœºæ™¯çš„é£é™©æ˜¯å¯ä»¥æ¥å—çš„ï¼Œæ¯•ç«Ÿè¿™äº›åœºæ™¯åœ¨æ•´ä¸ªå¼€å‘æµ‹è¯•æµç¨‹å®¹æ˜“è·å¾—æ›´å¤šå…³æ³¨ã€‚</p>\n<h2 id=\"è¿›é˜¶æ–¹æ¡ˆ\"><a href=\"#è¿›é˜¶æ–¹æ¡ˆ\" class=\"headerlink\" title=\"è¿›é˜¶æ–¹æ¡ˆ\"></a>è¿›é˜¶æ–¹æ¡ˆ</h2><p>ä¸Šé¢æ‰€æœ‰çš„æ–¹æ¡ˆï¼Œéƒ½æŠŠå¼‚æ­¥è¯·æ±‚è¿™ä¸€åŠ¨ä½œæ”¾åœ¨äº†action creatorä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç®€å•ç›´è§‚ï¼Œä¸”å’ŒFluxç¤¾åŒºä¸€è„‰ç›¸æ‰¿(è§ä¸‹å›¾)ã€‚å› æ­¤ä¸ªäººå°†å®ƒä»¬å½’ä¸ºç›¸å¯¹ç®€å•çš„ä¸€ç±»ã€‚</p>\n<p>ä¸‹é¢å°†è¦ä»‹ç»çš„ï¼Œæ˜¯ç›¸å¯¹å¤æ‚ä¸€ç±»ï¼Œå®ƒä»¬éƒ½é‡‡ç”¨äº†ä¸ä¸Šå›¾ä¸åŒçš„æ€è·¯ï¼Œå»è¿½æ±‚æ›´ä¼˜é›…çš„æ¶æ„ã€è§£å†³æ›´å¤æ‚çš„é—®é¢˜</p>\n<h3 id=\"redux-loopï¼šåˆ†å½¢-ç»„åˆ\"><a href=\"#redux-loopï¼šåˆ†å½¢-ç»„åˆ\" class=\"headerlink\" title=\"redux-loopï¼šåˆ†å½¢! ç»„åˆ!\"></a>redux-loopï¼šåˆ†å½¢! ç»„åˆ!</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒReduxæ˜¯å€Ÿé‰´è‡ªElmçš„ï¼Œç„¶è€Œåœ¨Elmä¸­ï¼Œå¼‚æ­¥çš„å¤„ç†å´å¹¶ä¸æ˜¯åœ¨action creatorå±‚ï¼Œè€Œæ˜¯åœ¨reducer(Elmä¸­ç§°update)å±‚ï¼š</p>\n<blockquote>\n<p>å›¾ç‰‡æ¥æºäºï¼š <a href=\"https://github.com/jarvisaoieong/redux-architecture\" target=\"_blank\" rel=\"external\">jarvisaoieong/redux-architecture</a></p>\n</blockquote>\n<p>è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å®ç°å½»åº•çš„å¯ç»„åˆæ€§(composable)ã€‚åœ¨reduxä¸­ï¼Œreducerä½œä¸ºå‡½æ•°æ˜¯å¯ç»„åˆçš„ï¼Œactionæ­£å¸¸æƒ…å†µä¸‹ä½œä¸ºçº¯å¯¹è±¡ä¹Ÿæ˜¯å¯ç»„åˆçš„ï¼Œç„¶è€Œä¸€æ—¦æ¶‰åŠå¼‚æ­¥ï¼Œå½“actionåµŒå¥—ç»„åˆçš„æ—¶å€™ï¼Œä¸­é—´ä»¶å°±æ— æ³•æ­£å¸¸è¯†åˆ«ï¼Œè¿™ä¸ªé—®é¢˜è®©reduxä½œè€…Danä¹Ÿå‘å‡ºæ„Ÿå¹ There is no easy way to compose Redux applicationså¹¶ä¸”å¼€äº†ä¸€ä¸ªè‡³ä»Šä»ç„¶opençš„issueï¼Œå¯¹ç»„åˆã€åˆ†å½¢ä¸reduxçš„æ•…äº‹ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è§‚æ‘©ä»¥ä¸Šé“¾æ¥ï¼Œç”šè‡³äº†è§£ä¸€ä¸‹Elmï¼Œç¯‡å¹…æ‰€é™ï¼Œæœ¬æ–‡éš¾ä»¥å°½è¿°ã€‚</p>\n<p>è€Œredux-loopï¼Œåˆ™æ˜¯åœ¨è¿™æ–¹é¢çš„ä¸€ä¸ªå°è¯•ï¼Œå®ƒæ›´å½»åº•çš„æ¨¡ä»¿äº†Elmçš„æ¨¡å¼ï¼šå¼•å…¥Effectsçš„æ¦‚å¿µå¹¶å°†å…¶ç½®å…¥reducerï¼Œå®˜æ–¹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; Effects, loop &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-loop'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; loadingStart, loadingSuccess, loadingFailure &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchDetails</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`/api/details/<span class=\"subst\">$&#123;id&#125;</span>`</span>)</div><div class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">r</span>) =&gt;</span> r.json())</div><div class=\"line\">    .then(loadingSuccess)</div><div class=\"line\">    .catch(loadingFailure);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'LOADING_START'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> loop(</div><div class=\"line\">        &#123; ...state, <span class=\"attr\">loading</span>: <span class=\"literal\">true</span> &#125;,</div><div class=\"line\">        Effects.promise(fetchDetails, action.payload.id)</div><div class=\"line\">      ); <span class=\"comment\">// åŒæ—¶è¿”å›çŠ¶æ€ä¸å‰¯ä½œç”¨</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'LOADING_SUCCESS'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        ...state,</div><div class=\"line\">        <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">        <span class=\"attr\">details</span>: action.payload</div><div class=\"line\">      &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'LOADING_FAILURE'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        ...state,</div><div class=\"line\">        <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">        <span class=\"attr\">error</span>: action.payload.message</div><div class=\"line\">      &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">default</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> state;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æ³¨æ„åœ¨reducerä¸­ï¼Œå½“å¤„ç†LOADING_STARTæ—¶ï¼Œå¹¶æ²¡æœ‰ç›´æ¥è¿”å›stateå¯¹è±¡ï¼Œè€Œæ˜¯ç”¨loopå‡½æ•°å°†stateå’ŒEffectâ€æ‰“åŒ…â€è¿”å›(å®é™…ä¸Šè¿™ä¸ªè¿”å›å€¼æ˜¯æ•°ç»„[State, Effect]ï¼Œå’ŒElmçš„æ–¹å¼éå¸¸æ¥è¿‘)ã€‚</p>\n<p>ç„¶è€Œä¿®æ”¹reducerçš„è¿”å›ç±»å‹æ˜¾ç„¶æ˜¯æ¯”è¾ƒæš´åŠ›çš„åšæ³•ï¼Œé™¤éReduxå®˜æ–¹å‡ºé¢ï¼Œå¦åˆ™å¾ˆéš¾è·å¾—ç¤¾åŒºçš„å¹¿æ³›è®¤åŒã€‚æ›´å¤æ‚çš„è¿”å›ç±»å‹ä¼šè®©å¾ˆå¤šå·²æœ‰çš„APIï¼Œä¸‰æ–¹åº“é¢ä¸´å±é™©ï¼Œç”šè‡³combineReduceréƒ½éœ€è¦ç”¨redux-loopæä¾›çš„å®šåˆ¶ç‰ˆæœ¬ï¼Œè¿™ç§â€ç ´åæ€§â€ä¹Ÿæ˜¯Reduxä½œè€…Danæ²¡æœ‰é‡‡çº³redux-loopè¿›å…¥Reduxæ ¸å¿ƒä»£ç çš„åŸå› ï¼šâ€If a solution doesnâ€™t work with vanilla combineReducers(), it wonâ€™t get into Redux coreâ€ã€‚</p>\n<p>å¯¹Elmçš„åˆ†å½¢æ¶æ„æœ‰äº†è§£ï¼Œæƒ³åœ¨Reduxä¸Šç»§ç»­å®è·µçš„äººæ¥è¯´ï¼Œredux-loopæ˜¯å¾ˆå¥½çš„å‚è€ƒç´ æï¼Œä½†å¯¹å¤šæ•°äººå’Œé¡¹ç›®è€Œè¨€ï¼Œæœ€å¥½è¿˜æ˜¯æ›´è°¨æ…åœ°çœ‹å¾…</p>\n<h3 id=\"redux-sagaï¼šéš¾ã€è€Œç¾\"><a href=\"#redux-sagaï¼šéš¾ã€è€Œç¾\" class=\"headerlink\" title=\"redux-sagaï¼šéš¾ã€è€Œç¾\"></a>redux-sagaï¼šéš¾ã€è€Œç¾</h3><p><a href=\"https://github.com/redux-saga/redux-saga\" target=\"_blank\" rel=\"external\">Redux-saga</a></p>\n<p>å¦ä¸€ä¸ªè‘—åçš„åº“ï¼Œå®ƒè®©å¼‚æ­¥è¡Œä¸ºæˆä¸ºæ¶æ„ä¸­ç‹¬ç«‹çš„ä¸€å±‚(ç§°ä¸ºsaga)ï¼Œæ—¢ä¸åœ¨action creatorä¸­ï¼Œä¹Ÿä¸å’Œreduceræ²¾è¾¹ã€‚</p>\n<p>å®ƒçš„å‡ºå‘ç‚¹æ˜¯æŠŠå‰¯ä½œç”¨ (Side effectï¼Œå¼‚æ­¥è¡Œä¸ºå°±æ˜¯å…¸å‹çš„å‰¯ä½œç”¨) çœ‹æˆâ€çº¿ç¨‹â€ï¼Œå¯ä»¥é€šè¿‡æ™®é€šçš„actionå»è§¦å‘å®ƒï¼Œå½“å‰¯ä½œç”¨å®Œæˆæ—¶ä¹Ÿä¼šè§¦å‘actionä½œä¸ºè¾“å‡ºã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; takeEvery &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-saga'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; call, put &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-saga/effects'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Api <span class=\"keyword\">from</span> <span class=\"string\">'...'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">getData</span>(<span class=\"params\">action</span>) </span>&#123;</div><div class=\"line\">   <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> response = <span class=\"keyword\">yield</span> call(api.getData, action.payload.id);</div><div class=\"line\">      <span class=\"keyword\">yield</span> put(&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"GET_DATA_SUCCEEDED\"</span>, <span class=\"attr\">payload</span>: response&#125;);</div><div class=\"line\">   &#125; <span class=\"keyword\">catch</span> (e) &#123;</div><div class=\"line\">      <span class=\"keyword\">yield</span> put(&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"GET_DATA_FAILED\"</span>, <span class=\"attr\">payload</span>: error&#125;);</div><div class=\"line\">   &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">mySaga</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">yield</span>* takeEvery(<span class=\"string\">\"GET_DATA\"</span>, getData);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> mySaga;</div></pre></td></tr></table></figure>\n<p>ç›¸æ¯”action creatorçš„æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ä¿è¯ç»„ä»¶è§¦å‘çš„actionæ˜¯çº¯å¯¹è±¡ï¼Œå› æ­¤è‡³å°‘åœ¨é¡¹ç›®èŒƒå›´å†…(middlewareå’Œsagaéƒ½æ˜¯é¡¹ç›®çš„é¡¶å±‚ä¾èµ–ï¼Œè·¨é¡¹ç›®æ— æ³•ä¿è¯)ï¼Œactionçš„ç»„åˆæ€§æ˜æ˜¾æ›´åŠ ä¼˜ç§€ã€‚</p>\n<p>è€Œå®ƒæœ€ä¸ºä¸»æ‰“çš„ï¼Œåˆ™æ˜¯<code>å¯æµ‹è¯•æ€§</code>å’Œå¼ºå¤§çš„<code>å¼‚æ­¥æµç¨‹æ§åˆ¶</code>ã€‚</p>\n<p>ç”±äºå¼ºåˆ¶æ‰€æœ‰sagaéƒ½å¿…é¡»æ˜¯generatorå‡½æ•°ï¼Œå€ŸåŠ©generatorçš„nextæ¥å£ï¼Œå¼‚æ­¥è¡Œä¸ºçš„æ¯ä¸ªä¸­é—´æ­¥éª¤éƒ½è¢«æš´éœ²ç»™äº†å¼€å‘è€…ï¼Œä»è€Œå®ç°å¯¹å¼‚æ­¥é€»è¾‘â€step by stepâ€çš„æµ‹è¯•ã€‚è¿™åœ¨å…¶å®ƒæ–¹æ¡ˆä¸­æ˜¯å¾ˆå°‘çœ‹åˆ°çš„ (å½“ç„¶ä¹Ÿå¯ä»¥å€Ÿé‰´generatorè¿™ä¸€ç‚¹ï¼Œä½†ç¼ºå°‘çº¦æŸ)ã€‚</p>\n<p>è€Œå¼ºå¤§å¾—æœ‰ç‚¹çœ¼èŠ±ç¼­ä¹±çš„APIï¼Œç‰¹åˆ«æ˜¯channelçš„å¼•å…¥ï¼Œåˆ™æä¾›äº†æ­¦è£…åˆ°ç‰™é½¿çº§çš„å¼‚æ­¥æµç¨‹æ§åˆ¶èƒ½åŠ›ã€‚</p>\n<p>ç„¶è€Œï¼Œå›é¡¾æˆ‘ä»¬åœ¨è®¨è®ºç®€å•æ–¹æ¡ˆæ—¶æåˆ°çš„å„ç§åœºæ™¯ä¸é—®é¢˜ï¼Œredux-sagaå¹¶æ²¡æœ‰å»å°è¯•å›ç­”å’Œè§£å†³å®ƒä»¬ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦è‡ªè¡Œå¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚è€Œgeneratorã€ç›¸å¯¹å¤æ‚çš„APIå’Œå•ç‹¬çš„ä¸€å±‚æŠ½è±¡ä¹Ÿè®©ä¸å°‘äººæœ›è€Œå´æ­¥ã€‚</p>\n<p>åŒ…æ‹¬æˆ‘åœ¨å†…ï¼Œå¾ˆå¤šäººéå¸¸æ¬£èµredux-sagaã€‚å®ƒçš„æ¶æ„å’Œæ€è·¯æ¯«æ— ç–‘é—®æ˜¯ä¼˜ç§€ç”šè‡³ä¼˜é›…çš„ï¼Œä½†ä½¿ç”¨å®ƒä¹‹å‰ï¼Œæœ€å¥½æƒ³æ¸…æ¥šå®ƒå¸¦æ¥çš„ä¼˜ç‚¹(å¯æµ‹è¯•æ€§ã€æµç¨‹æ§åˆ¶ã€é«˜åº¦è§£è€¦)ä¸ä»˜å‡ºçš„æˆæœ¬æ˜¯å¦åŒ¹é…ï¼Œç‰¹åˆ«æ˜¯å¼‚æ­¥æ–¹é¢å¤æ‚åº¦å¹¶ä¸é«˜çš„é¡¹ç›®ï¼Œæ¯”å¦‚å¤šæ•°ä»¥CRUDä¸ºä¸»çš„ç®¡ç†ç³»ç»Ÿã€‚</p>\n<h4 id=\"åœºæ™¯è§£æï¼šç«æ€\"><a href=\"#åœºæ™¯è§£æï¼šç«æ€\" class=\"headerlink\" title=\"åœºæ™¯è§£æï¼šç«æ€\"></a>åœºæ™¯è§£æï¼šç«æ€</h4><p>ç«æ€ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchFriend</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</div><div class=\"line\">        dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'FETCH_FRIEND'</span> &#125;);</div><div class=\"line\">        <span class=\"keyword\">return</span> fetch(<span class=\"string\">`http://localhost/api/friend/<span class=\"subst\">$&#123;id&#125;</span>`</span>)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">json</span> =&gt;</span> dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'RECEIVE_FRIENDS'</span>, <span class=\"attr\">payload</span>: json &#125;));</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>å¦‚æœ fetch ä¿®æ”¹ä¸º buttonclickï¼ŒsetTimeout è¿™æ ·çš„å¼€å§‹å¯ä»¥ç¡®å®šé¡ºåºçš„ï¼Œ<br>ä½†æ˜¯ fetch æ˜¯å’ŒæœåŠ¡å™¨æ²Ÿé€šçš„ï¼ŒæœåŠ¡å™¨å¤„ç†æ•°æ®è¿”å›é¡ºåºæ˜¯ä¸ç¡®å®š<br>é‚£ä¹ˆæ€ä¹ˆå¤„ç†ï¼Ÿ</p>\n<p>å†²çªæµç¨‹å¦‚ä¸‹ï¼š<br> ç‚¹å‡»çœ‹å¥½å‹1ä¿¡æ¯<br> æœåŠ¡å™¨è¯·æ±‚<br> æ²¡ç­‰1è¿”å›ï¼Œ çœ‹å¥½å‹2ä¿¡æ¯ (æˆ‘å°±æƒ³çœ‹è¿™ä¸ª)<br> å¥½å‹2æœåŠ¡å™¨è¯·æ±‚è¿”å›æ¯”è¾ƒå¿«(å¯èƒ½åœ¨cacheä¸­)<br> æ˜¾ç¤ºå¥½å‹2ä¿¡æ¯äº†<br> ç­‰äº†ä¸€ä¼šå„¿1è¿”å›äº†<br> è¦†ç›–äº†2   (BOOM!)</p>\n<p>ç”±äºå¼‚æ­¥è¿”å›æ—¶é—´çš„ä¸ç¡®å®šæ€§ï¼Œåå‘å‡ºçš„è¯·æ±‚å¯èƒ½å…ˆè¿”å›ï¼Œå¦‚ä½•ç¡®ä¿å¼‚æ­¥ç»“æœçš„æ¸²æŸ“æ˜¯æŒ‰ç…§è¯·æ±‚å‘ç”Ÿé¡ºåºï¼Œè€Œä¸æ˜¯è¿”å›é¡ºåºï¼Ÿ</p>\n<p>è¿™åœ¨redux-thunkä¸ºä»£è¡¨çš„ç®€å•æ–¹æ¡ˆä¸­æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchFriend</span>(<span class=\"params\">id</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch, getState</span>) =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"comment\">//æ­¥éª¤1ï¼šåœ¨reducerä¸­ set state.currentFriend = id;</span></div><div class=\"line\">        dispatch(&#123;<span class=\"attr\">type</span>: <span class=\"string\">'FETCH_FIREND'</span>, <span class=\"attr\">payload</span>: id&#125;);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> fetch(<span class=\"string\">`http://localhost/api/firend/<span class=\"subst\">$&#123;id&#125;</span>`</span>)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">json</span> =&gt;</span> &#123;</div><div class=\"line\">                <span class=\"comment\">//æ­¥éª¤2ï¼šåªå¤„ç†currentFriendçš„å¯¹åº”response</span></div><div class=\"line\">                <span class=\"keyword\">const</span> &#123; currentFriend &#125; = getState();</div><div class=\"line\">                (currentFriend === id) &amp;&amp; dispatch(&#123;<span class=\"attr\">type</span>: <span class=\"string\">'RECEIVE_FIRENDS'</span>, <span class=\"attr\">playload</span>: json&#125;)</div><div class=\"line\">            &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…ä¸­ä¸ä¸€å®šéœ€è¦ä¾èµ–ä¸šåŠ¡idï¼Œä¹Ÿä¸ä¸€å®šè¦æŠŠidå­˜åˆ°storeé‡Œï¼Œåªè¦ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆkeyï¼Œä»¥ä¾¿å¤„ç†è¯·æ±‚æ—¶èƒ½å¤Ÿå¯¹åº”èµ·æ¥å³å¯ã€‚</p>\n<p>è€Œåœ¨redux-sagaä¸­ï¼Œä¸€åˆ‡éå¸¸åœ°ç®€å•ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; takeLatest &#125; <span class=\"keyword\">from</span> <span class=\"string\">`redux-saga`</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">fetchFriend</span>(<span class=\"params\">action</span>) </span>&#123;</div><div class=\"line\">  ...</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchLastFetchUser</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">yield</span> takeLatest(<span class=\"string\">'FETCH_FIREND'</span>, fetchFriend)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>è¿™é‡Œçš„é‡ç‚¹æ˜¯takeLatestï¼Œå®ƒé™åˆ¶äº†åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„é¡ºåºå…³ç³»ã€‚</p>\n<p>å¦å¤–è¿˜æœ‰ä¸€äº›åŸºäºå“åº”å¼ç¼–ç¨‹(Reactive Programming)çš„å¼‚æ­¥æ–¹æ¡ˆ(å¦‚redux-observable)ä¹Ÿèƒ½éå¸¸å¥½åœ°å¤„ç†ç«æ€åœºæ™¯ï¼Œå› ä¸ºæè¿°äº‹ä»¶æµä¹‹é—´çš„å…³ç³»ï¼Œæ­£æ˜¯æ•´ä¸ªå“åº”å¼ç¼–ç¨‹çš„æŠ½è±¡åŸºçŸ³ï¼Œè€Œç«æ€åœ¨æœ¬è´¨ä¸Šå°±æ˜¯å¦‚ä½•ä¿è¯åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„å…³ç³»ï¼Œæ­£æ˜¯å“åº”å¼ç¼–ç¨‹çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>\n<blockquote>\n<p>å®é™…é¡¹ç›®ä¸­å¯ä»¥ç”¨é«˜é˜¶å‡½æ•°æ¨¡ä»¿takeLatestçš„åŠŸèƒ½ï¼Œredux-thunkç±»æ–¹æ¡ˆä¹Ÿå¯ä»¥è¾ƒä½æˆæœ¬åœ°å¤„ç†ç«æ€</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">takeLatestAsyncResult</span>(<span class=\"params\">promiseCreator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> index = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    index++;</div><div class=\"line\">    <span class=\"keyword\">var</span> promise = promiseCreator.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">guardLatest</span>(<span class=\"params\">func, reqIndex</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (reqIndex === index) &#123;</div><div class=\"line\">          func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">      promise.then(</div><div class=\"line\">        guardLatest(resolve, index),</div><div class=\"line\">        guardLatest(reject, index)</div><div class=\"line\">      );</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runTimeout</span>(<span class=\"params\">timeout</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve</span>) </span>&#123;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t\tresolve(timeout);</div><div class=\"line\">    &#125;, timeout)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAsyncTaskRunner</span>(<span class=\"params\">label, promiseCreator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    promiseCreator(value).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;label&#125;</span> : <span class=\"subst\">$&#123;value&#125;</span>`</span>)</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsyncQue</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">  arr.map(getAsyncTaskRunner(<span class=\"string\">'runAsyncQue'</span>, runTimeout));</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runLatestAsync</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> wrappedTimeout = takeLatestAsyncResult(runTimeout);</div><div class=\"line\">  arr.map(getAsyncTaskRunner(<span class=\"string\">'runLatestAsync'</span>, wrappedTimeout));</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">runAsyncQue([<span class=\"number\">2000</span>, <span class=\"number\">1000</span>, <span class=\"number\">3000</span>, <span class=\"number\">500</span>, <span class=\"number\">400</span>])</div><div class=\"line\"></div><div class=\"line\">runLatestAsync([<span class=\"number\">2000</span>, <span class=\"number\">1000</span>, <span class=\"number\">3000</span>, <span class=\"number\">500</span>, <span class=\"number\">400</span>])</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">takeLatestAsyncResult</span>(<span class=\"params\">promiseCreator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        index++;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">const</span> promise = promiseCreator.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">guardLatest</span>(<span class=\"params\">func, reqIndex</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (reqIndex === index) &#123;</div><div class=\"line\">                    func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>)</span>&#123;</div><div class=\"line\">            promise.then(</div><div class=\"line\">                guardLatest(resolve, index),</div><div class=\"line\">                guardLatest(reject, index)</div><div class=\"line\">            )</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\"><a href=\"#Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\" class=\"headerlink\" title=\"Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹\"></a>Reduxå¼‚æ­¥æ–¹æ¡ˆé€‰å‹</h1><p>ä½œä¸ºreactç¤¾åŒºæœ€çƒ­é—¨çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½å‡†å¤‡ç”šè‡³æ­£åœ¨ä½¿ç”¨Reduxã€‚</p>\n<p>ç”±äºReduxçš„ç†å¿µéå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰è¿½æ±‚å¤§è€Œå…¨ï¼Œè¿™ä»½æ¶æ„ä¸Šçš„ä¼˜é›…å´åœ¨æŸç§ç¨‹åº¦ä¸Šä¼¤å®³äº†ä½¿ç”¨ä½“éªŒï¼šä¸èƒ½å¼€ç®±å³ç”¨ï¼Œç”šè‡³æ˜¯å¼‚æ­¥è¿™ç§æœ€å¸¸è§çš„åœºæ™¯ä¹Ÿè¦å€ŸåŠ©ç¤¾åŒºæ–¹æ¡ˆã€‚</p>\n<p>å¦‚æœä½ å·²ç»æŒ‘èŠ±äº†çœ¼ï¼Œæˆ–è€…æ­£åœ¨æŒ‘ä½†ä¸çŸ¥é“æ˜¯å¦é€‚åˆï¼Œæˆ–è€…å·²ç»æŒ‘äº†ä½†ä¸çŸ¥é“ä¼šä¸ä¼šæœ‰å‘ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥é€‚åˆä½ ã€‚</p>\n<p>æœ¬æ–‡ä¼šä»ä¸€äº›å¸¸è§çš„Reduxå¼‚æ­¥æ–¹æ¡ˆå‡ºå‘ï¼Œä»‹ç»å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œè¿›è€Œè®¨è®ºä¸€äº›ä¸å¼‚æ­¥ç›¸ä¼´çš„å¸¸è§åœºæ™¯ï¼Œå¸®åŠ©ä½ åœ¨é€‰å‹æ—¶æ›´å¥½åœ°æƒè¡¡åˆ©å¼Šã€‚</p>\n<h2 id=\"ç®€å•æ–¹æ¡ˆ\"><a href=\"#ç®€å•æ–¹æ¡ˆ\" class=\"headerlink\" title=\"ç®€å•æ–¹æ¡ˆ\"></a>ç®€å•æ–¹æ¡ˆ</h2><h3 id=\"redux-thunkï¼šæŒ‡è·¯å…ˆé©±\"><a href=\"#redux-thunkï¼šæŒ‡è·¯å…ˆé©±\" class=\"headerlink\" title=\"redux-thunkï¼šæŒ‡è·¯å…ˆé©±\"></a>redux-thunkï¼šæŒ‡è·¯å…ˆé©±</h3><p><a href=\"https://github.com/gaearon/redux-thunk\" target=\"_blank\" rel=\"external\">Github</a></p>\n<blockquote>\n<p>Reduxæœ¬èº«åªèƒ½å¤„ç†åŒæ­¥çš„Actionï¼Œä½†å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥æ‹¦æˆªå¤„ç†å…¶å®ƒç±»å‹çš„actionï¼Œæ¯”å¦‚å‡½æ•°(Thunk)ï¼Œå†ç”¨å›è°ƒè§¦å‘æ™®é€šAction<br>ä»è€Œå®ç°å¼‚æ­¥å¤„ç†ï¼Œåœ¨è¿™ç‚¹ä¸Šæ‰€æœ‰Reduxçš„å¼‚æ­¥æ–¹æ¡ˆéƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p>\n</blockquote>\n<h3 id=\"redux-promiseï¼šç˜¦èº«è¿‡å¤´\"><a href=\"#redux-promiseï¼šç˜¦èº«è¿‡å¤´\" class=\"headerlink\" title=\"redux-promiseï¼šç˜¦èº«è¿‡å¤´\"></a>redux-promiseï¼šç˜¦èº«è¿‡å¤´</h3><p>ç”±äºredux-thunkå†™èµ·æ¥å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œç¤¾åŒºå½“ç„¶ä¼šæœ‰å…¶å®ƒè½®å­å‡ºç°ã€‚<a href=\"https://github.com/pburtchaell/redux-promise-middleware\" target=\"_blank\" rel=\"external\">redux-promise</a>åˆ™æ˜¯å…¶ä¸­æ¯”è¾ƒçŸ¥åçš„ï¼ŒåŒæ ·ä¹Ÿäº«å—äº†å®˜ç½‘å‡ºé•œçš„å¾…é‡ã€‚</p>\n<p>å®ƒè‡ªå®šä¹‰äº†ä¸€ä¸ªmiddlewareï¼Œå½“æ£€æµ‹åˆ°æœ‰actionçš„payloadå±æ€§æ˜¯Promiseå¯¹è±¡æ—¶ï¼Œå°±ä¼š:</p>\n<ul>\n<li>è‹¥resolveï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„valueï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€successâ€</li>\n<li>è‹¥rejectï¼Œè§¦å‘ä¸€ä¸ªæ­¤actionçš„æ‹·è´ï¼Œä½†payloadä¸ºpromiseçš„reasonï¼Œå¹¶è®¾statuså±æ€§ä¸ºâ€errorâ€</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//action types</span></div><div class=\"line\"><span class=\"keyword\">const</span> GET_DATA = <span class=\"string\">'GET_DATA'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: GET_DATA,</div><div class=\"line\">        <span class=\"attr\">payload</span>: api.getData(id) <span class=\"comment\">//payloadä¸ºpromiseå¯¹è±¡</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//reducer</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">oldState, action</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA:</div><div class=\"line\">        <span class=\"keyword\">if</span> (action.status === <span class=\"string\">'success'</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> successState</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> errorState</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>è¯·ç­‰ç­‰ï¼Œä»»ä½•èƒ½æ˜æ˜¾å‡å°‘ä»£ç é‡çš„æ–¹æ¡ˆï¼Œéƒ½åº”è¯¥å°å¿ƒå®ƒæ˜¯å¦è¿‡åº¦çœç•¥äº†ä»€ä¹ˆä¸œè¥¿ï¼Œå‡è‚¥æ˜¯å¥½äº‹ï¼Œå‡åˆ°éª¨å¤´å°±æ®‹äº†ã€‚</p>\n<h4 id=\"åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\"><a href=\"#åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\" class=\"headerlink\" title=\"åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°\"></a>åœºæ™¯è§£æä¹‹ï¼šä¹è§‚æ›´æ–°</h4><p>å¤šæ•°å¼‚æ­¥åœºæ™¯éƒ½æ˜¯ä¿å®ˆæ›´æ–°çš„ï¼Œå³ç­‰åˆ°è¯·æ±‚æˆåŠŸæ‰æ¸²æŸ“æ•°æ®ã€‚è€Œä¸ä¹‹ç›¸å¯¹çš„ä¹è§‚æ›´æ–°ï¼Œåˆ™æ˜¯ä¸ç­‰å¾…è¯·æ±‚æˆåŠŸï¼Œåœ¨å‘é€è¯·æ±‚çš„åŒæ—¶ç«‹å³æ¸²æŸ“æ•°æ®ã€‚</p>\n<p>æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯å¾®ä¿¡ç­‰èŠå¤©å·¥å…·ï¼Œå‘é€æ¶ˆæ¯æ—¶æ¶ˆæ¯ç«‹å³è¿›å…¥äº†å¯¹è¯çª—ï¼Œå¦‚æœå‘é€å¤±è´¥çš„è¯ï¼Œåœ¨æ¶ˆæ¯æ—è¾¹å†ä½œè¡¥å……æç¤ºå³å¯ã€‚è¿™ç§äº¤äº’â€ä¹è§‚â€åœ°ç›¸ä¿¡è¯·æ±‚ä¼šæˆåŠŸï¼Œå› æ­¤ç§°ä½œä¹è§‚æ›´æ–°(Optimistic update)ã€‚</p>\n<p>ç”±äºä¹è§‚æ›´æ–°å‘ç”Ÿåœ¨ç”¨æˆ·æ“ä½œæ—¶ï¼Œè¦å¤„ç†å®ƒï¼Œæ„å‘³ç€å¿…é¡»æœ‰actionè¡¨ç¤ºç”¨æˆ·çš„åˆå§‹åŠ¨ä½œ</p>\n<p>åœ¨ä¸Šé¢redux-thunkçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†GET_DATA, GET_DATA_SUCCESSã€GET_DATA_FAILEDä¸‰ä¸ªactionï¼Œåˆ†åˆ«è¡¨ç¤ºåˆå§‹åŠ¨ä½œã€å¼‚æ­¥æˆåŠŸå’Œå¼‚æ­¥å¤±è´¥ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªactionä½¿å¾—redux-thunkå…·å¤‡ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚</p>\n<p>è€Œåœ¨redux-promiseä¸­ï¼Œæœ€åˆè§¦å‘çš„actionè¢«ä¸­é—´ä»¶æ‹¦æˆªç„¶åè¿‡æ»¤æ‰äº†ã€‚åŸå› å¾ˆç®€å•ï¼Œreduxè®¤å¯çš„actionå¯¹è±¡æ˜¯ plain JavaScript objectsï¼Œå³ç®€å•å¯¹è±¡ï¼Œè€Œåœ¨redux-promiseä¸­ï¼Œåˆå§‹actionçš„payloadæ˜¯ä¸ªPromiseã€‚</p>\n<p>å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨statusè€Œä¸æ˜¯typeæ¥åŒºåˆ†ä¸¤ä¸ªå¼‚æ­¥actionä¹Ÿéå¸¸å€¼å¾—å•†æ¦·ï¼ŒæŒ‰ç…§reduxå¯¹actionçš„å®šä¹‰ä»¥åŠç¤¾åŒºçš„æ™®éå®è·µï¼Œä¸ªäººè¿˜æ˜¯å€¾å‘äºä½¿ç”¨ä¸åŒçš„typeï¼Œç”¨åŒä¸€typeä¸‹çš„ä¸åŒstatusåŒºåˆ†actioné¢å¤–å¢åŠ äº†ä¸€å¥—éšå½¢çš„çº¦å®šï¼Œç”šè‡³ä¸ç¬¦åˆè¯¥redux-promiseä½œè€…è‡ªå·±æ‰€æå€¡çš„FSAï¼Œä½“ç°åœ¨ä»£ç ä¸Šåˆ™æ˜¯åœ¨switch-caseå†…å†å¢åŠ ä¸€å±‚åˆ¤æ–­ã€‚</p>\n<h3 id=\"redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\"><a href=\"#redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\" class=\"headerlink\" title=\"redux-promise-middlewareï¼šæ‹”ä¹±åæ­£\"></a>redux-promise-middlewareï¼šæ‹”ä¹±åæ­£</h3><p>redux-promise-middlewareç›¸æ¯”redux-promiseï¼Œé‡‡å–äº†æ›´ä¸ºæ¸©å’Œå’Œæ¸è¿›å¼çš„æ€è·¯ï¼Œä¿ç•™äº†å’Œredux-thunkç±»ä¼¼çš„ä¸‰ä¸ªactionã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//action types</span></div><div class=\"line\"><span class=\"keyword\">const</span> GET_DATA = <span class=\"string\">'GET_DATA'</span>,</div><div class=\"line\">    GET_DATA_PENDING = <span class=\"string\">'GET_DATA_PENDING'</span>,</div><div class=\"line\">    GET_DATA_FULFILLED = <span class=\"string\">'GET_DATA_FULFILLED'</span>,</div><div class=\"line\">    GET_DATA_REJECTED = <span class=\"string\">'GET_DATA_REJECTED'</span>;</div><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: GET_DATA,</div><div class=\"line\">        <span class=\"attr\">payload</span>: &#123;</div><div class=\"line\">            <span class=\"attr\">promise</span>: api.getData(id),</div><div class=\"line\">            <span class=\"attr\">data</span>: id</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//reducer</span></div><div class=\"line\"><span class=\"keyword\">const</span> reducer = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">oldState, action</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_PENDING :</div><div class=\"line\">        <span class=\"keyword\">return</span> oldState; <span class=\"comment\">// å¯é€šè¿‡action.payload.dataè·å–id</span></div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_FULFILLED :</div><div class=\"line\">        <span class=\"keyword\">return</span> successState;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_REJECTED :</div><div class=\"line\">        <span class=\"keyword\">return</span> errorState;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>å¦‚æœä¸éœ€è¦ä¹è§‚æ›´æ–°ï¼Œaction creatorå¯ä»¥ä½¿ç”¨å’Œredux-promiseå®Œå…¨ä¸€æ ·çš„ï¼Œæ›´ç®€æ´çš„å†™æ³•ï¼Œ</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> getData = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: GET_DATA,</div><div class=\"line\">        <span class=\"attr\">payload</span>: api.getData(id) <span class=\"comment\">//ç­‰ä»·äº &#123;promise: api.getData(id)&#125;</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æ­¤æ—¶åˆå§‹actionGET_DATA_PENDINGä»ç„¶ä¼šè§¦å‘ï¼Œä½†æ˜¯payloadä¸ºç©ºã€‚</p>\n<p>ç›¸å¯¹redux-promiseäºç²—æš´åœ°è¿‡æ»¤æ‰æ•´ä¸ªåˆå§‹actionï¼Œredux-promise-middlewareé€‰æ‹©åˆ›å»ºä¸€ä¸ªåªè¿‡æ»¤payloadä¸­çš„promiseå±æ€§çš„XXX_PENDINGä½œä¸ºåˆå§‹actionï¼Œä»¥æ­¤ä¿ç•™ä¹è§‚æ›´æ–°çš„èƒ½åŠ›ã€‚</p>\n<p>åŒæ—¶åœ¨actionçš„åŒºåˆ†ä¸Šï¼Œå®ƒé€‰æ‹©äº†å›å½’typeçš„â€æ­£é€”â€ï¼Œ_PENDINGã€_FULFILLEDã€_REJECTEDç­‰åç¼€å€Ÿç”¨äº†promiseè§„èŒƒ (å½“ç„¶å®ƒä»¬æ˜¯å¯é…ç½®çš„) ã€‚</p>\n<p>å®ƒçš„é—æ†¾åˆ™æ˜¯åªåœ¨actionå±‚å®ç°äº†ç®€åŒ–ï¼Œå¯¹reducerå±‚åˆ™æŸæ‰‹æ— ç­–ã€‚å¦å¤–ï¼Œç›¸æ¯”redux-thunkï¼Œå®ƒè¿˜å¤šå‡ºäº†ä¸€ä¸ª_PENDINGçš„å­—ç¬¦ä¸²æ¨¡æ¿ä»£ç (ä¸‰ä¸ªactionå´éœ€è¦å››ä¸ªtype)ã€‚</p>\n<blockquote>\n<p>ç¤¾åŒºæœ‰ç±»ä¼¼type-to-reducerè¿™æ ·è¯•å›¾ç®€åŒ–reducerçš„åº“ã€‚ä½†ç”±äºreducerå’Œå¼‚æ­¥actioné€šå¸¸æ˜¯ä¸¤å¥—ç‹¬ç«‹çš„æ–¹æ¡ˆï¼Œreducerç›¸å…³çš„åº“æ— æ³•å»çŒœæµ‹å¼‚æ­¥actionçš„åç¼€æ˜¯ä»€ä¹ˆ(ç”šè‡³æœ‰æ²¡æœ‰åç¼€)ï¼Œç¤¾åŒºä¹Ÿæ²¡æœ‰ç›¸å…³æ ‡å‡†ï¼Œä¹Ÿå°±å¾ˆéš¾å¯¹å¼‚æ­¥åšå‡ºç²¾ç®€å’ŒæŠ½è±¡äº†ã€‚</p>\n</blockquote>\n<h3 id=\"redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\"><a href=\"#redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\" class=\"headerlink\" title=\"redux-action-toolsï¼šè½¯æ–‡é¢„è­¦\"></a>redux-action-toolsï¼šè½¯æ–‡é¢„è­¦</h3><p>æ— è®ºæ˜¯redux-thunkè¿˜æ˜¯redux-promise-middlewareï¼Œæ¨¡æ¿ä»£ç éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œæ¯æ¬¡å†™XXX_COMPLETEDè¿™æ ·çš„ä»£ç éƒ½è§‰å¾—æ˜¯åœ¨æµªè´¹ç”Ÿå‘½â€”â€”ä½ å¾—å…ˆåœ¨å¸¸é‡ä¸­å£°æ˜å®ƒä»¬ï¼Œå†åœ¨actionä¸­å¼•ç”¨ï¼Œç„¶åæ˜¯reducerï¼Œå‡è®¾åƒredux-thunkä¸€æ ·æ¯ä¸ªå¼‚æ­¥actionæœ‰ä¸‰ä¸ªtypeï¼Œä¸‰ä¸ªæ–‡ä»¶åŠ èµ·æ¥ä½ å°±å¾—å†™ä¹æ¬¡!</p>\n<p>å›½å¤–å¼€å‘è€…ä¹Ÿæœ‰ç›¸åŒçš„æŠ¥æ€¨ï¼š</p>\n<p>æœ‰æ²¡æœ‰åŠæ³•è®©ä»£ç æ—¢åƒredux-promiseä¸€æ ·ç®€æ´ï¼Œåˆèƒ½ä¿æŒä¹è§‚æ›´æ–°çš„èƒ½åŠ›å‘¢ï¼Ÿ</p>\n<p>redux-action-toolsæ˜¯æˆ‘ç»™å‡ºçš„ç­”æ¡ˆï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> GET_DATA = <span class=\"string\">'GET_DATA'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = createAsyncAction(GET_DATA, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> api.getData(id)</div><div class=\"line\">&#125;)</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//reducer</span></div><div class=\"line\"><span class=\"keyword\">const</span> reducer = createReducer()</div><div class=\"line\">    .when(getData, (oldState, action) =&gt; oldState)</div><div class=\"line\">    .done(<span class=\"function\">(<span class=\"params\">oldState, action</span>) =&gt;</span> successState)</div><div class=\"line\">    .failed(<span class=\"function\">(<span class=\"params\">oldState, action</span>) =&gt;</span> errorState)</div><div class=\"line\">    .build()</div></pre></td></tr></table></figure>\n<p>redux-action-toolsåœ¨actionå±‚é¢åšçš„äº‹æƒ…ä¸å‰é¢å‡ ä¸ªåº“å¤§åŒå°å¼‚ï¼šåŒæ ·æ˜¯æ´¾å‘äº†ä¸‰ä¸ªactionï¼šGET_DATA/GET_DATA_SUCCESS/GET_DATA_FAILEDã€‚è¿™ä¸‰ä¸ªactionçš„æè¿°è§ä¸‹è¡¨ï¼š</p>\n<p>type When payload meta.asyncPhase ${actionName} å¼‚æ­¥å¼€å§‹å‰ åŒæ­¥è°ƒç”¨å‚æ•° â€˜STARTâ€™ ${actionName}_COMPLETED å¼‚æ­¥æˆåŠŸ value of promise â€˜COMPLETEDâ€™ ${actionName}_FAILED å¼‚æ­¥å¤±è´¥ reason of promise â€˜FAILEDâ€™<br>createAsyncActionå‚è€ƒäº†redux-promiseä½œè€…å†™çš„redux-actions ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>\n<ul>\n<li>actionName å­—ç¬¦ä¸²ï¼Œæ‰€æœ‰æ´¾ç”Ÿactionçš„åå­—éƒ½ä»¥å®ƒä¸ºåŸºç¡€ï¼Œåˆå§‹actionåˆ™ä¸å®ƒåŒå</li>\n<li>promiseCreator å‡½æ•°ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡</li>\n<li>metaCreator å‡½æ•°ï¼Œå¯é€‰ï¼Œä½œç”¨åé¢ä¼šæ¼”ç¤ºåˆ°</li>\n</ul>\n<p>ç›®å‰çœ‹æ¥ï¼Œå…¶å®å’Œredux-promise/redux-promise-middlewareå¤§åŒå°å¼‚ã€‚è€ŒçœŸæ­£ä¸åŒçš„ï¼Œæ˜¯å®ƒåŒæ—¶ç®€åŒ–äº†reducerå±‚! è¿™ç§ç®€åŒ–æ¥è‡ªäºå¯¹å¼‚æ­¥è¡Œä¸ºä»è¯­ä¹‰è§’åº¦çš„æŠ½è±¡ï¼š</p>\n<blockquote>\n<p>å½“(when)åˆå§‹actionå‘ç”Ÿæ—¶å¤„ç†åŒæ­¥æ›´æ–°ï¼Œè‹¥å¼‚æ­¥æˆåŠŸ(done)åˆ™å¤„ç†æˆåŠŸé€»è¾‘ï¼Œè‹¥å¼‚æ­¥å¤±è´¥(failed)åˆ™å¤„ç†å¤±è´¥é€»è¾‘</p>\n</blockquote>\n<p>æŠ½ç¦»å‡ºwhen/done/failedä¸‰ä¸ªå…³é”®è¯ä½œä¸ºapiï¼Œå¹¶ä½¿ç”¨é“¾å¼è°ƒç”¨å°†ä»–ä»¬ä¸²è”èµ·æ¥ï¼šwhenå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šactionNameå’Œhandlerï¼Œå…¶ä¸­handleræ˜¯å¯é€‰çš„ï¼Œdoneå’Œfailedåˆ™åªæ¥æ”¶ä¸€ä¸ªhandlerå‚æ•°ï¼Œå¹¶ä¸”åªèƒ½åœ¨whenä¹‹åè°ƒç”¨â€”â€”ä»–ä»¬åˆ†åˆ«å¤„ç† ${actionName}_SUCCESS å’Œ ${actionName}_FAILED .</p>\n<p>æ— è®ºæ˜¯actionè¿˜æ˜¯reducerå±‚ï¼ŒXX_SUCCESS/XX_FAILEDç›¸å…³çš„ä»£ç éƒ½è¢«å°è£…äº†èµ·æ¥ï¼Œæ­£å¦‚åœ¨ä¾‹å­ä¸­çœ‹åˆ°çš„â€”â€”ä½ ç”šè‡³ä¸éœ€è¦å£°æ˜å®ƒä»¬! åˆ›å»ºä¸€ä¸ªå¼‚æ­¥actionï¼Œç„¶åå¤„ç†å®ƒçš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µï¼Œäº‹æƒ…æœ¬è¯¥è¿™ä¹ˆç®€å•ã€‚</p>\n<p>æ›´è¿›ä¸€æ­¥çš„ï¼Œè¿™ä¸‰ä¸ªactioné»˜è®¤éƒ½æ ¹æ®å½“å‰æ‰€å¤„çš„å¼‚æ­¥é˜¶æ®µï¼Œè®¾ç½®äº†ä¸åŒçš„meta(è§ä¸Šè¡¨ä¸­çš„meta.asyncPhase)ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿç”¨åœºæ™¯è¯´è¯ï¼š</p>\n<h4 id=\"åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\"><a href=\"#åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\" class=\"headerlink\" title=\"åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading\"></a>åœºæ™¯è§£æï¼šå¤±è´¥å¤„ç†ä¸Loading</h4><p>å®ƒä»¬æ˜¯å¼‚æ­¥ä¸å¯å›é¿çš„ä¸¤ä¸ªåœºæ™¯ï¼Œå‡ ä¹æ¯ä¸ªé¡¹ç›®ä¼šé‡åˆ°ã€‚<br>ä»¥å¼‚æ­¥è¯·æ±‚çš„å¤±è´¥å¤„ç†ä¸ºä¾‹ï¼Œæ¯ä¸ªé¡¹ç›®é€šå¸¸éƒ½æœ‰ä¸€å¥—æ¯”è¾ƒé€šç”¨çš„ï¼Œé€‚åˆå¤šæ•°åœºæ™¯çš„å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚å¼¹çª—æç¤ºã€‚åŒæ—¶åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œåˆéœ€è¦ç»•è¿‡é€šç”¨é€»è¾‘è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œæ¯”å¦‚è¡¨å•çš„å¼‚æ­¥æ ¡éªŒ</p>\n<p>è€Œåœ¨å®ç°é€šç”¨å¤„ç†é€»è¾‘æ—¶ï¼Œå¸¸è§çš„é—®é¢˜æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>\n<ul>\n<li>åº•å±‚å¤„ç†ï¼Œæ‰©å±•æ€§ä¸è¶³</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchWrapper</span>(<span class=\"params\">args</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> fetch.apply(fetch, args)</div><div class=\"line\">        .catch(commonErrorHandler)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>åœ¨è¾ƒåº•å±‚å°è£…ajaxåº“å¯ä»¥è½»æ¾å®ç°å…¨å±€å¤„ç†ï¼Œä½†é—®é¢˜ä¹Ÿéå¸¸æ˜æ˜¾ï¼š</p>\n<p>ä¸€æ˜¯æ‰©å±•æ€§ä¸è¶³ï¼Œæ¯”å¦‚å°‘æ•°åœºæ™¯æƒ³è¦ç»•è¿‡é€šç”¨å¤„ç†é€»è¾‘ï¼Œè¿˜æœ‰ä¸€äº›åœºæ™¯é”™è¯¯æ˜¯å‰ç«¯ç”Ÿæˆè€Œéç›´æ¥æ¥è‡ªäºè¯·æ±‚ï¼›<br>äºŒæ˜¯ä¸æ˜“ç»„åˆï¼Œæ¯”å¦‚æœ‰çš„åœºæ™¯ä¸€ä¸ªactionéœ€è¦å¤šä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œä½†å¼‚å¸¸å¤„ç†å’Œloadingæ˜¯ä¸éœ€è¦é‡å¤çš„ï¼Œå› ä¸ºç”¨æˆ·ä¸éœ€è¦çŸ¥é“ä¸€ä¸ªåŠ¨ä½œæœ‰å¤šå°‘ä¸ªè¯·æ±‚ã€‚</p>\n<ul>\n<li>ä¸å¤Ÿå†…èšï¼Œä¾µå…¥ä¸šåŠ¡ä»£ç </li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//action creator</span></div><div class=\"line\"><span class=\"keyword\">const</span> getData = createAsyncAction(GET_DATA, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> api.getData(id)</div><div class=\"line\">        .catch(commonErrorHandler) <span class=\"comment\">//è°ƒç”¨é”™è¯¯å¤„ç†å‡½æ•°</span></div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n<p>åœ¨æœ‰ä¸šåŠ¡æ„ä¹‰çš„actionå±‚è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ—¢èƒ½æŒ‰éœ€è°ƒç”¨ï¼Œåˆä¸å¦¨ç¢å¼‚æ­¥è¯·æ±‚çš„ç»„åˆã€‚ä½†ç”±äºé€šç”¨å¤„ç†å¾€å¾€é€‚ç”¨äºå¤šæ•°åœºæ™¯ï¼Œè¿™æ ·å†™ä¼šå¯¼è‡´ä¸šåŠ¡ä»£ç å˜å¾—å†—ä½™ï¼Œå› ä¸ºå‡ ä¹æ¯ä¸ªactionéƒ½å¾—è¿™ä¹ˆå†™ã€‚</p>\n<ul>\n<li>é«˜è€¦åˆï¼Œé«˜é£é™©</li>\n</ul>\n<p>ä¹Ÿæœ‰äººæŠŠä¸Šé¢çš„æ–¹æ¡ˆåšä¸ªä¾èµ–åè½¬ï¼Œæ”¹ä¸ºåœ¨é€šç”¨é€»è¾‘é‡Œç›‘å¬ä¸šåŠ¡actionï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">commonErrorReducer</span>(<span class=\"params\">oldState, action</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> GET_DATA_FAILED:</div><div class=\"line\">    <span class=\"keyword\">case</span> PUT_DATA_FAILED:</div><div class=\"line\">    <span class=\"comment\">//... tons of action type</span></div><div class=\"line\">        <span class=\"keyword\">return</span> commonErrorHandler(action)</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>è¿™æ ·åšçš„æœ¬è´¨æ˜¯æŠŠå†—ä½™ä»ä¸šåŠ¡ä»£ç ä¸­æ‹¿å‡ºæ¥é›†ä¸­ç®¡ç†ã€‚</p>\n<p>é—®é¢˜åœ¨äºæ¯æ·»åŠ ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½éœ€è¦ä¿®æ”¹å…¬å…±ä»£ç ï¼ŒæŠŠå¯¹åº”çš„action typeåŠ è¿›æ¥ã€‚ä¸”ä¸è¯´å¹¶è¡Œå¼€å‘æ—¶mergeå†²çªï¼Œå¦‚æœåŠ äº†ä¸€ä¸ªå¼‚æ­¥actionï¼Œä½†å¿˜äº†å¾€å…¬å…±å¤„ç†æ–‡ä»¶ä¸­æ·»åŠ â€”â€”è¿™æ˜¯å¾ˆå¯èƒ½ä¼šå‘ç”Ÿçš„â€”â€”è€Œå¼‚å¸¸æ˜¯åˆ†æ”¯æµç¨‹ä¸å®¹æ˜“è¢«æµ‹è¯•å‘ç°ï¼Œç­‰åˆ°å‘ç°ï¼Œå¾ˆå¯èƒ½å°±æ˜¯äº‹æ•…è€Œä¸æ˜¯bugäº†ã€‚</p>\n<p>é€šè¿‡ä»¥ä¸Šå‡ ç§å¸¸è§æ–¹æ¡ˆçš„åˆ†æï¼Œæˆ‘è®¤ä¸ºæ¯”è¾ƒå®Œå–„çš„é”™è¯¯å¤„ç†(LoadingåŒç†)éœ€è¦å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>\n<ul>\n<li>é¢å‘å¼‚æ­¥åŠ¨ä½œ(action)ï¼Œè€Œéç›´æ¥é¢å‘è¯·æ±‚</li>\n<li>ä¸ä¾µå…¥ä¸šåŠ¡ä»£ç </li>\n<li>é»˜è®¤ä½¿ç”¨é€šç”¨å¤„ç†é€»è¾‘ï¼Œæ— éœ€é¢å¤–ä»£ç </li>\n<li>å¯ä»¥ç»•è¿‡é€šç”¨é€»è¾‘</li>\n</ul>\n<p>è€Œå€ŸåŠ©redux-action-toolsæä¾›çš„meta.asyncPhaseï¼Œå¯ä»¥è½»æ˜“ç”¨middlewareå®ç°ä»¥ä¸Šå…¨éƒ¨éœ€æ±‚!</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; ASYNC_PHASES &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-action-tools'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">errorMiddleWare</span>(<span class=\"params\">&#123;dispatch&#125;</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">next</span> =&gt;</span> action =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> asyncStep = _.get(action, <span class=\"string\">'meta.asyncStep'</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (asyncStep === ASYNC_PHASES.FAILED) &#123;</div><div class=\"line\">      dispatch(&#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'COMMON_ERROR'</span>,</div><div class=\"line\">        <span class=\"attr\">payload</span>: &#123;</div><div class=\"line\">          action</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">    next(action);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä¸­é—´ä»¶ä¸€æ—¦æ£€æµ‹åˆ°meta.asyncStepå­—æ®µä¸ºFAILEDçš„actionä¾¿è§¦å‘æ–°çš„actionå»è°ƒç”¨é€šç”¨å¤„ç†é€»è¾‘ã€‚é¢å‘actionã€ä¸ä¾µå…¥ä¸šåŠ¡ã€é»˜è®¤å·¥ä½œ (åªè¦æ˜¯ç”¨createAsyncActionå£°æ˜çš„å¼‚æ­¥) ! è½»æ¾å®ç°äº†ç†æƒ³éœ€æ±‚ä¸­çš„å‰ä¸‰ç‚¹ï¼Œé‚£å¦‚ä½•å®šåˆ¶å‘¢ï¼Ÿæ—¢ç„¶æ‹¦æˆªæ˜¯é¢å‘metaçš„ï¼Œåªè¦åœ¨åˆ›å»ºactionæ—¶æ”¯æŒå¯¹metaçš„è‡ªå®šä¹‰å°±è¡Œäº†ï¼Œè€ŒcreateAsyncActionçš„ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ä¸ºæ­¤å‡†å¤‡çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> _ <span class=\"keyword\">from</span> <span class=\"string\">'lodash'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; ASYNC_PHASES &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-action-tools'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">const</span> customizedAction = createAsyncAction(</div><div class=\"line\">  type,</div><div class=\"line\">  promiseCreator, <span class=\"comment\">//type å’Œ promiseCreatoræ­¤å¤„æ— ä¸åŒæ•…çœç•¥</span></div><div class=\"line\">  (payload, defaultMeta) =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> &#123; ...defaultMeta, <span class=\"attr\">omitError</span>: <span class=\"literal\">true</span> &#125;; <span class=\"comment\">//å‘metaä¸­æ·»åŠ é…ç½®å‚æ•°</span></div><div class=\"line\">  &#125;</div><div class=\"line\">)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">errorMiddleWare</span>(<span class=\"params\">&#123;dispatch&#125;</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">next</span> =&gt;</span> action =&gt; &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> asyncStep = _.get(action, <span class=\"string\">'meta.asyncStep'</span>);</div><div class=\"line\">    <span class=\"keyword\">const</span> omitError = _.get(action, <span class=\"string\">'meta.omitError'</span>); <span class=\"comment\">//è·å–é…ç½®å‚æ•°</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (!omitError &amp;&amp; asyncStep === ASYNC_PHASES.FAILED) &#123;</div><div class=\"line\">      dispatch(&#123;</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'COMMON_ERROR'</span>,</div><div class=\"line\">        <span class=\"attr\">payload</span>: &#123;</div><div class=\"line\">          action</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">    next(action);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ç±»ä¼¼çš„ï¼Œä½ å¯ä»¥æƒ³æƒ³å¦‚ä½•å¤„ç†Loadingï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯å»ºè®®å°½é‡ç”¨å¢é‡é…ç½®çš„æ–¹å¼è¿›è¡Œæ‰©å±•ï¼Œè€Œä¸è¦è½»æ˜“åˆ é™¤å’Œä¿®æ”¹meta.asyncPhaseã€‚<br>æ¯”å¦‚ä¸Šä¾‹å¯ä»¥é€šè¿‡åˆ é™¤meta.asyncPhaseå®ç°åŒæ ·åŠŸèƒ½ï¼Œä½†å¦‚æœåŒæ—¶è¿˜æœ‰å…¶å®ƒåœ°æ–¹ä¹Ÿä¾èµ–meta.asyncPhase(æ¯”å¦‚loadingMiddleware)ï¼Œå°±å¯èƒ½å¯¼è‡´æœ¬æ„æ˜¯å®šåˆ¶é”™è¯¯å¤„ç†ï¼Œå´æ”¹å˜äº†Loadingçš„è¡Œä¸ºï¼Œå®¢è§‚æ¥è®²è¿™å±‚é£é™©æ˜¯åŸºäºmetaæ‹¦æˆªæ–¹æ¡ˆçš„æœ€å¤§ç¼ºç‚¹ï¼Œç„¶è€Œç›¸æ¯”å¤šæ•°åœºæ™¯çš„ä¾¿åˆ©ã€å¥å£®ï¼Œä¸ªäººè®¤ä¸ºç‰¹æ®Šåœºæ™¯çš„é£é™©æ˜¯å¯ä»¥æ¥å—çš„ï¼Œæ¯•ç«Ÿè¿™äº›åœºæ™¯åœ¨æ•´ä¸ªå¼€å‘æµ‹è¯•æµç¨‹å®¹æ˜“è·å¾—æ›´å¤šå…³æ³¨ã€‚</p>\n<h2 id=\"è¿›é˜¶æ–¹æ¡ˆ\"><a href=\"#è¿›é˜¶æ–¹æ¡ˆ\" class=\"headerlink\" title=\"è¿›é˜¶æ–¹æ¡ˆ\"></a>è¿›é˜¶æ–¹æ¡ˆ</h2><p>ä¸Šé¢æ‰€æœ‰çš„æ–¹æ¡ˆï¼Œéƒ½æŠŠå¼‚æ­¥è¯·æ±‚è¿™ä¸€åŠ¨ä½œæ”¾åœ¨äº†action creatorä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç®€å•ç›´è§‚ï¼Œä¸”å’ŒFluxç¤¾åŒºä¸€è„‰ç›¸æ‰¿(è§ä¸‹å›¾)ã€‚å› æ­¤ä¸ªäººå°†å®ƒä»¬å½’ä¸ºç›¸å¯¹ç®€å•çš„ä¸€ç±»ã€‚</p>\n<p>ä¸‹é¢å°†è¦ä»‹ç»çš„ï¼Œæ˜¯ç›¸å¯¹å¤æ‚ä¸€ç±»ï¼Œå®ƒä»¬éƒ½é‡‡ç”¨äº†ä¸ä¸Šå›¾ä¸åŒçš„æ€è·¯ï¼Œå»è¿½æ±‚æ›´ä¼˜é›…çš„æ¶æ„ã€è§£å†³æ›´å¤æ‚çš„é—®é¢˜</p>\n<h3 id=\"redux-loopï¼šåˆ†å½¢-ç»„åˆ\"><a href=\"#redux-loopï¼šåˆ†å½¢-ç»„åˆ\" class=\"headerlink\" title=\"redux-loopï¼šåˆ†å½¢! ç»„åˆ!\"></a>redux-loopï¼šåˆ†å½¢! ç»„åˆ!</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒReduxæ˜¯å€Ÿé‰´è‡ªElmçš„ï¼Œç„¶è€Œåœ¨Elmä¸­ï¼Œå¼‚æ­¥çš„å¤„ç†å´å¹¶ä¸æ˜¯åœ¨action creatorå±‚ï¼Œè€Œæ˜¯åœ¨reducer(Elmä¸­ç§°update)å±‚ï¼š</p>\n<blockquote>\n<p>å›¾ç‰‡æ¥æºäºï¼š <a href=\"https://github.com/jarvisaoieong/redux-architecture\" target=\"_blank\" rel=\"external\">jarvisaoieong/redux-architecture</a></p>\n</blockquote>\n<p>è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å®ç°å½»åº•çš„å¯ç»„åˆæ€§(composable)ã€‚åœ¨reduxä¸­ï¼Œreducerä½œä¸ºå‡½æ•°æ˜¯å¯ç»„åˆçš„ï¼Œactionæ­£å¸¸æƒ…å†µä¸‹ä½œä¸ºçº¯å¯¹è±¡ä¹Ÿæ˜¯å¯ç»„åˆçš„ï¼Œç„¶è€Œä¸€æ—¦æ¶‰åŠå¼‚æ­¥ï¼Œå½“actionåµŒå¥—ç»„åˆçš„æ—¶å€™ï¼Œä¸­é—´ä»¶å°±æ— æ³•æ­£å¸¸è¯†åˆ«ï¼Œè¿™ä¸ªé—®é¢˜è®©reduxä½œè€…Danä¹Ÿå‘å‡ºæ„Ÿå¹ There is no easy way to compose Redux applicationså¹¶ä¸”å¼€äº†ä¸€ä¸ªè‡³ä»Šä»ç„¶opençš„issueï¼Œå¯¹ç»„åˆã€åˆ†å½¢ä¸reduxçš„æ•…äº‹ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è§‚æ‘©ä»¥ä¸Šé“¾æ¥ï¼Œç”šè‡³äº†è§£ä¸€ä¸‹Elmï¼Œç¯‡å¹…æ‰€é™ï¼Œæœ¬æ–‡éš¾ä»¥å°½è¿°ã€‚</p>\n<p>è€Œredux-loopï¼Œåˆ™æ˜¯åœ¨è¿™æ–¹é¢çš„ä¸€ä¸ªå°è¯•ï¼Œå®ƒæ›´å½»åº•çš„æ¨¡ä»¿äº†Elmçš„æ¨¡å¼ï¼šå¼•å…¥Effectsçš„æ¦‚å¿µå¹¶å°†å…¶ç½®å…¥reducerï¼Œå®˜æ–¹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; Effects, loop &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-loop'</span>;</div><div class=\"line\"><span class=\"keyword\">import</span> &#123; loadingStart, loadingSuccess, loadingFailure &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./actions'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchDetails</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> fetch(<span class=\"string\">`/api/details/<span class=\"subst\">$&#123;id&#125;</span>`</span>)</div><div class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">r</span>) =&gt;</span> r.json())</div><div class=\"line\">    .then(loadingSuccess)</div><div class=\"line\">    .catch(loadingFailure);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'LOADING_START'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> loop(</div><div class=\"line\">        &#123; ...state, <span class=\"attr\">loading</span>: <span class=\"literal\">true</span> &#125;,</div><div class=\"line\">        Effects.promise(fetchDetails, action.payload.id)</div><div class=\"line\">      ); <span class=\"comment\">// åŒæ—¶è¿”å›çŠ¶æ€ä¸å‰¯ä½œç”¨</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'LOADING_SUCCESS'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        ...state,</div><div class=\"line\">        <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">        <span class=\"attr\">details</span>: action.payload</div><div class=\"line\">      &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'LOADING_FAILURE'</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> &#123;</div><div class=\"line\">        ...state,</div><div class=\"line\">        <span class=\"attr\">loading</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">        <span class=\"attr\">error</span>: action.payload.message</div><div class=\"line\">      &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">default</span>:</div><div class=\"line\">      <span class=\"keyword\">return</span> state;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>æ³¨æ„åœ¨reducerä¸­ï¼Œå½“å¤„ç†LOADING_STARTæ—¶ï¼Œå¹¶æ²¡æœ‰ç›´æ¥è¿”å›stateå¯¹è±¡ï¼Œè€Œæ˜¯ç”¨loopå‡½æ•°å°†stateå’ŒEffectâ€æ‰“åŒ…â€è¿”å›(å®é™…ä¸Šè¿™ä¸ªè¿”å›å€¼æ˜¯æ•°ç»„[State, Effect]ï¼Œå’ŒElmçš„æ–¹å¼éå¸¸æ¥è¿‘)ã€‚</p>\n<p>ç„¶è€Œä¿®æ”¹reducerçš„è¿”å›ç±»å‹æ˜¾ç„¶æ˜¯æ¯”è¾ƒæš´åŠ›çš„åšæ³•ï¼Œé™¤éReduxå®˜æ–¹å‡ºé¢ï¼Œå¦åˆ™å¾ˆéš¾è·å¾—ç¤¾åŒºçš„å¹¿æ³›è®¤åŒã€‚æ›´å¤æ‚çš„è¿”å›ç±»å‹ä¼šè®©å¾ˆå¤šå·²æœ‰çš„APIï¼Œä¸‰æ–¹åº“é¢ä¸´å±é™©ï¼Œç”šè‡³combineReduceréƒ½éœ€è¦ç”¨redux-loopæä¾›çš„å®šåˆ¶ç‰ˆæœ¬ï¼Œè¿™ç§â€ç ´åæ€§â€ä¹Ÿæ˜¯Reduxä½œè€…Danæ²¡æœ‰é‡‡çº³redux-loopè¿›å…¥Reduxæ ¸å¿ƒä»£ç çš„åŸå› ï¼šâ€If a solution doesnâ€™t work with vanilla combineReducers(), it wonâ€™t get into Redux coreâ€ã€‚</p>\n<p>å¯¹Elmçš„åˆ†å½¢æ¶æ„æœ‰äº†è§£ï¼Œæƒ³åœ¨Reduxä¸Šç»§ç»­å®è·µçš„äººæ¥è¯´ï¼Œredux-loopæ˜¯å¾ˆå¥½çš„å‚è€ƒç´ æï¼Œä½†å¯¹å¤šæ•°äººå’Œé¡¹ç›®è€Œè¨€ï¼Œæœ€å¥½è¿˜æ˜¯æ›´è°¨æ…åœ°çœ‹å¾…</p>\n<h3 id=\"redux-sagaï¼šéš¾ã€è€Œç¾\"><a href=\"#redux-sagaï¼šéš¾ã€è€Œç¾\" class=\"headerlink\" title=\"redux-sagaï¼šéš¾ã€è€Œç¾\"></a>redux-sagaï¼šéš¾ã€è€Œç¾</h3><p><a href=\"https://github.com/redux-saga/redux-saga\" target=\"_blank\" rel=\"external\">Redux-saga</a></p>\n<p>å¦ä¸€ä¸ªè‘—åçš„åº“ï¼Œå®ƒè®©å¼‚æ­¥è¡Œä¸ºæˆä¸ºæ¶æ„ä¸­ç‹¬ç«‹çš„ä¸€å±‚(ç§°ä¸ºsaga)ï¼Œæ—¢ä¸åœ¨action creatorä¸­ï¼Œä¹Ÿä¸å’Œreduceræ²¾è¾¹ã€‚</p>\n<p>å®ƒçš„å‡ºå‘ç‚¹æ˜¯æŠŠå‰¯ä½œç”¨ (Side effectï¼Œå¼‚æ­¥è¡Œä¸ºå°±æ˜¯å…¸å‹çš„å‰¯ä½œç”¨) çœ‹æˆâ€çº¿ç¨‹â€ï¼Œå¯ä»¥é€šè¿‡æ™®é€šçš„actionå»è§¦å‘å®ƒï¼Œå½“å‰¯ä½œç”¨å®Œæˆæ—¶ä¹Ÿä¼šè§¦å‘actionä½œä¸ºè¾“å‡ºã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; takeEvery &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-saga'</span></div><div class=\"line\"><span class=\"keyword\">import</span> &#123; call, put &#125; <span class=\"keyword\">from</span> <span class=\"string\">'redux-saga/effects'</span></div><div class=\"line\"><span class=\"keyword\">import</span> Api <span class=\"keyword\">from</span> <span class=\"string\">'...'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">getData</span>(<span class=\"params\">action</span>) </span>&#123;</div><div class=\"line\">   <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">      <span class=\"keyword\">const</span> response = <span class=\"keyword\">yield</span> call(api.getData, action.payload.id);</div><div class=\"line\">      <span class=\"keyword\">yield</span> put(&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"GET_DATA_SUCCEEDED\"</span>, <span class=\"attr\">payload</span>: response&#125;);</div><div class=\"line\">   &#125; <span class=\"keyword\">catch</span> (e) &#123;</div><div class=\"line\">      <span class=\"keyword\">yield</span> put(&#123;<span class=\"attr\">type</span>: <span class=\"string\">\"GET_DATA_FAILED\"</span>, <span class=\"attr\">payload</span>: error&#125;);</div><div class=\"line\">   &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">mySaga</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">yield</span>* takeEvery(<span class=\"string\">\"GET_DATA\"</span>, getData);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> mySaga;</div></pre></td></tr></table></figure>\n<p>ç›¸æ¯”action creatorçš„æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥ä¿è¯ç»„ä»¶è§¦å‘çš„actionæ˜¯çº¯å¯¹è±¡ï¼Œå› æ­¤è‡³å°‘åœ¨é¡¹ç›®èŒƒå›´å†…(middlewareå’Œsagaéƒ½æ˜¯é¡¹ç›®çš„é¡¶å±‚ä¾èµ–ï¼Œè·¨é¡¹ç›®æ— æ³•ä¿è¯)ï¼Œactionçš„ç»„åˆæ€§æ˜æ˜¾æ›´åŠ ä¼˜ç§€ã€‚</p>\n<p>è€Œå®ƒæœ€ä¸ºä¸»æ‰“çš„ï¼Œåˆ™æ˜¯<code>å¯æµ‹è¯•æ€§</code>å’Œå¼ºå¤§çš„<code>å¼‚æ­¥æµç¨‹æ§åˆ¶</code>ã€‚</p>\n<p>ç”±äºå¼ºåˆ¶æ‰€æœ‰sagaéƒ½å¿…é¡»æ˜¯generatorå‡½æ•°ï¼Œå€ŸåŠ©generatorçš„nextæ¥å£ï¼Œå¼‚æ­¥è¡Œä¸ºçš„æ¯ä¸ªä¸­é—´æ­¥éª¤éƒ½è¢«æš´éœ²ç»™äº†å¼€å‘è€…ï¼Œä»è€Œå®ç°å¯¹å¼‚æ­¥é€»è¾‘â€step by stepâ€çš„æµ‹è¯•ã€‚è¿™åœ¨å…¶å®ƒæ–¹æ¡ˆä¸­æ˜¯å¾ˆå°‘çœ‹åˆ°çš„ (å½“ç„¶ä¹Ÿå¯ä»¥å€Ÿé‰´generatorè¿™ä¸€ç‚¹ï¼Œä½†ç¼ºå°‘çº¦æŸ)ã€‚</p>\n<p>è€Œå¼ºå¤§å¾—æœ‰ç‚¹çœ¼èŠ±ç¼­ä¹±çš„APIï¼Œç‰¹åˆ«æ˜¯channelçš„å¼•å…¥ï¼Œåˆ™æä¾›äº†æ­¦è£…åˆ°ç‰™é½¿çº§çš„å¼‚æ­¥æµç¨‹æ§åˆ¶èƒ½åŠ›ã€‚</p>\n<p>ç„¶è€Œï¼Œå›é¡¾æˆ‘ä»¬åœ¨è®¨è®ºç®€å•æ–¹æ¡ˆæ—¶æåˆ°çš„å„ç§åœºæ™¯ä¸é—®é¢˜ï¼Œredux-sagaå¹¶æ²¡æœ‰å»å°è¯•å›ç­”å’Œè§£å†³å®ƒä»¬ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦è‡ªè¡Œå¯»æ‰¾è§£å†³æ–¹æ¡ˆã€‚è€Œgeneratorã€ç›¸å¯¹å¤æ‚çš„APIå’Œå•ç‹¬çš„ä¸€å±‚æŠ½è±¡ä¹Ÿè®©ä¸å°‘äººæœ›è€Œå´æ­¥ã€‚</p>\n<p>åŒ…æ‹¬æˆ‘åœ¨å†…ï¼Œå¾ˆå¤šäººéå¸¸æ¬£èµredux-sagaã€‚å®ƒçš„æ¶æ„å’Œæ€è·¯æ¯«æ— ç–‘é—®æ˜¯ä¼˜ç§€ç”šè‡³ä¼˜é›…çš„ï¼Œä½†ä½¿ç”¨å®ƒä¹‹å‰ï¼Œæœ€å¥½æƒ³æ¸…æ¥šå®ƒå¸¦æ¥çš„ä¼˜ç‚¹(å¯æµ‹è¯•æ€§ã€æµç¨‹æ§åˆ¶ã€é«˜åº¦è§£è€¦)ä¸ä»˜å‡ºçš„æˆæœ¬æ˜¯å¦åŒ¹é…ï¼Œç‰¹åˆ«æ˜¯å¼‚æ­¥æ–¹é¢å¤æ‚åº¦å¹¶ä¸é«˜çš„é¡¹ç›®ï¼Œæ¯”å¦‚å¤šæ•°ä»¥CRUDä¸ºä¸»çš„ç®¡ç†ç³»ç»Ÿã€‚</p>\n<h4 id=\"åœºæ™¯è§£æï¼šç«æ€\"><a href=\"#åœºæ™¯è§£æï¼šç«æ€\" class=\"headerlink\" title=\"åœºæ™¯è§£æï¼šç«æ€\"></a>åœºæ™¯è§£æï¼šç«æ€</h4><p>ç«æ€ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchFriend</span>(<span class=\"params\">id</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</div><div class=\"line\">        dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'FETCH_FRIEND'</span> &#125;);</div><div class=\"line\">        <span class=\"keyword\">return</span> fetch(<span class=\"string\">`http://localhost/api/friend/<span class=\"subst\">$&#123;id&#125;</span>`</span>)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">json</span> =&gt;</span> dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">'RECEIVE_FRIENDS'</span>, <span class=\"attr\">payload</span>: json &#125;));</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>å¦‚æœ fetch ä¿®æ”¹ä¸º buttonclickï¼ŒsetTimeout è¿™æ ·çš„å¼€å§‹å¯ä»¥ç¡®å®šé¡ºåºçš„ï¼Œ<br>ä½†æ˜¯ fetch æ˜¯å’ŒæœåŠ¡å™¨æ²Ÿé€šçš„ï¼ŒæœåŠ¡å™¨å¤„ç†æ•°æ®è¿”å›é¡ºåºæ˜¯ä¸ç¡®å®š<br>é‚£ä¹ˆæ€ä¹ˆå¤„ç†ï¼Ÿ</p>\n<p>å†²çªæµç¨‹å¦‚ä¸‹ï¼š<br> ç‚¹å‡»çœ‹å¥½å‹1ä¿¡æ¯<br> æœåŠ¡å™¨è¯·æ±‚<br> æ²¡ç­‰1è¿”å›ï¼Œ çœ‹å¥½å‹2ä¿¡æ¯ (æˆ‘å°±æƒ³çœ‹è¿™ä¸ª)<br> å¥½å‹2æœåŠ¡å™¨è¯·æ±‚è¿”å›æ¯”è¾ƒå¿«(å¯èƒ½åœ¨cacheä¸­)<br> æ˜¾ç¤ºå¥½å‹2ä¿¡æ¯äº†<br> ç­‰äº†ä¸€ä¼šå„¿1è¿”å›äº†<br> è¦†ç›–äº†2   (BOOM!)</p>\n<p>ç”±äºå¼‚æ­¥è¿”å›æ—¶é—´çš„ä¸ç¡®å®šæ€§ï¼Œåå‘å‡ºçš„è¯·æ±‚å¯èƒ½å…ˆè¿”å›ï¼Œå¦‚ä½•ç¡®ä¿å¼‚æ­¥ç»“æœçš„æ¸²æŸ“æ˜¯æŒ‰ç…§è¯·æ±‚å‘ç”Ÿé¡ºåºï¼Œè€Œä¸æ˜¯è¿”å›é¡ºåºï¼Ÿ</p>\n<p>è¿™åœ¨redux-thunkä¸ºä»£è¡¨çš„ç®€å•æ–¹æ¡ˆä¸­æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fetchFriend</span>(<span class=\"params\">id</span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">dispatch, getState</span>) =&gt;</span> &#123;</div><div class=\"line\">        <span class=\"comment\">//æ­¥éª¤1ï¼šåœ¨reducerä¸­ set state.currentFriend = id;</span></div><div class=\"line\">        dispatch(&#123;<span class=\"attr\">type</span>: <span class=\"string\">'FETCH_FIREND'</span>, <span class=\"attr\">payload</span>: id&#125;);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> fetch(<span class=\"string\">`http://localhost/api/firend/<span class=\"subst\">$&#123;id&#125;</span>`</span>)</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> response.json())</div><div class=\"line\">            .then(<span class=\"function\"><span class=\"params\">json</span> =&gt;</span> &#123;</div><div class=\"line\">                <span class=\"comment\">//æ­¥éª¤2ï¼šåªå¤„ç†currentFriendçš„å¯¹åº”response</span></div><div class=\"line\">                <span class=\"keyword\">const</span> &#123; currentFriend &#125; = getState();</div><div class=\"line\">                (currentFriend === id) &amp;&amp; dispatch(&#123;<span class=\"attr\">type</span>: <span class=\"string\">'RECEIVE_FIRENDS'</span>, <span class=\"attr\">playload</span>: json&#125;)</div><div class=\"line\">            &#125;);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šåªæ˜¯ç¤ºä¾‹ï¼Œå®é™…ä¸­ä¸ä¸€å®šéœ€è¦ä¾èµ–ä¸šåŠ¡idï¼Œä¹Ÿä¸ä¸€å®šè¦æŠŠidå­˜åˆ°storeé‡Œï¼Œåªè¦ä¸ºæ¯ä¸ªè¯·æ±‚ç”Ÿæˆkeyï¼Œä»¥ä¾¿å¤„ç†è¯·æ±‚æ—¶èƒ½å¤Ÿå¯¹åº”èµ·æ¥å³å¯ã€‚</p>\n<p>è€Œåœ¨redux-sagaä¸­ï¼Œä¸€åˆ‡éå¸¸åœ°ç®€å•ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> &#123; takeLatest &#125; <span class=\"keyword\">from</span> <span class=\"string\">`redux-saga`</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">fetchFriend</span>(<span class=\"params\">action</span>) </span>&#123;</div><div class=\"line\">  ...</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span>* <span class=\"title\">watchLastFetchUser</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">yield</span> takeLatest(<span class=\"string\">'FETCH_FIREND'</span>, fetchFriend)</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>è¿™é‡Œçš„é‡ç‚¹æ˜¯takeLatestï¼Œå®ƒé™åˆ¶äº†åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„é¡ºåºå…³ç³»ã€‚</p>\n<p>å¦å¤–è¿˜æœ‰ä¸€äº›åŸºäºå“åº”å¼ç¼–ç¨‹(Reactive Programming)çš„å¼‚æ­¥æ–¹æ¡ˆ(å¦‚redux-observable)ä¹Ÿèƒ½éå¸¸å¥½åœ°å¤„ç†ç«æ€åœºæ™¯ï¼Œå› ä¸ºæè¿°äº‹ä»¶æµä¹‹é—´çš„å…³ç³»ï¼Œæ­£æ˜¯æ•´ä¸ªå“åº”å¼ç¼–ç¨‹çš„æŠ½è±¡åŸºçŸ³ï¼Œè€Œç«æ€åœ¨æœ¬è´¨ä¸Šå°±æ˜¯å¦‚ä½•ä¿è¯åŒæ­¥äº‹ä»¶ä¸å¼‚æ­¥è¿”å›äº‹ä»¶çš„å…³ç³»ï¼Œæ­£æ˜¯å“åº”å¼ç¼–ç¨‹çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>\n<blockquote>\n<p>å®é™…é¡¹ç›®ä¸­å¯ä»¥ç”¨é«˜é˜¶å‡½æ•°æ¨¡ä»¿takeLatestçš„åŠŸèƒ½ï¼Œredux-thunkç±»æ–¹æ¡ˆä¹Ÿå¯ä»¥è¾ƒä½æˆæœ¬åœ°å¤„ç†ç«æ€</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">takeLatestAsyncResult</span>(<span class=\"params\">promiseCreator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> index = <span class=\"number\">0</span>;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    index++;</div><div class=\"line\">    <span class=\"keyword\">var</span> promise = promiseCreator.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">guardLatest</span>(<span class=\"params\">func, reqIndex</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (reqIndex === index) &#123;</div><div class=\"line\">          func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</div><div class=\"line\">      promise.then(</div><div class=\"line\">        guardLatest(resolve, index),</div><div class=\"line\">        guardLatest(reject, index)</div><div class=\"line\">      );</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runTimeout</span>(<span class=\"params\">timeout</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve</span>) </span>&#123;</div><div class=\"line\">    setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">\t\t\tresolve(timeout);</div><div class=\"line\">    &#125;, timeout)</div><div class=\"line\">  &#125;)</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAsyncTaskRunner</span>(<span class=\"params\">label, promiseCreator</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">value</span>) </span>&#123;</div><div class=\"line\">    promiseCreator(value).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;label&#125;</span> : <span class=\"subst\">$&#123;value&#125;</span>`</span>)</div><div class=\"line\">    &#125;)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runAsyncQue</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">  arr.map(getAsyncTaskRunner(<span class=\"string\">'runAsyncQue'</span>, runTimeout));</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">runLatestAsync</span>(<span class=\"params\">arr</span>) </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">var</span> wrappedTimeout = takeLatestAsyncResult(runTimeout);</div><div class=\"line\">  arr.map(getAsyncTaskRunner(<span class=\"string\">'runLatestAsync'</span>, wrappedTimeout));</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">runAsyncQue([<span class=\"number\">2000</span>, <span class=\"number\">1000</span>, <span class=\"number\">3000</span>, <span class=\"number\">500</span>, <span class=\"number\">400</span>])</div><div class=\"line\"></div><div class=\"line\">runLatestAsync([<span class=\"number\">2000</span>, <span class=\"number\">1000</span>, <span class=\"number\">3000</span>, <span class=\"number\">500</span>, <span class=\"number\">400</span>])</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">takeLatestAsyncResult</span>(<span class=\"params\">promiseCreator</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> index = <span class=\"number\">0</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        index++;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">const</span> promise = promiseCreator.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">guardLatest</span>(<span class=\"params\">func, reqIndex</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (reqIndex === index) &#123;</div><div class=\"line\">                    func.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>)</span>&#123;</div><div class=\"line\">            promise.then(</div><div class=\"line\">                guardLatest(resolve, index),</div><div class=\"line\">                guardLatest(reject, index)</div><div class=\"line\">            )</div><div class=\"line\">        &#125;)</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"layout":"post","title":"Throttle and Debounce","subtitle":"javascript","date":"2017-03-21T16:00:00.000Z","author":"Asher","header-img":"home-bg.jpg","header-mask":0.3,"catalog":true,"_content":"\n# throttle\n\n> ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œtæ—¶é—´åå…³é—¨ã€‚\n\n```javascript\n/**\n* é¢‘ç‡æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œaction æ‰§è¡Œé¢‘ç‡é™å®šä¸º æ¬¡ / delay\n* @param delay  {number}    å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’\n* @param action {function}  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°\n* @return {function}    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°\n*/\nthrottle(delay,action)\n\nvar throttle = function(delay, action){\n  var last = 0\n  return function(){\n    var curr = +new Date()\n    if (curr - last > delay){\n      action.apply(this, arguments)\n      last = curr\n    }\n  }\n}\n\n _.throttle = function(func, wait, options) {\n    /* optionsçš„é»˜è®¤å€¼\n     *  è¡¨ç¤ºé¦–æ¬¡è°ƒç”¨è¿”å›å€¼æ–¹æ³•æ—¶ï¼Œä¼šé©¬ä¸Šè°ƒç”¨funcï¼›å¦åˆ™ä»…ä¼šè®°å½•å½“å‰æ—¶åˆ»ï¼Œå½“ç¬¬äºŒæ¬¡è°ƒç”¨çš„æ—¶é—´é—´éš”è¶…è¿‡waitæ—¶ï¼Œæ‰è°ƒç”¨funcã€‚\n     *  options.leading = true;\n     * è¡¨ç¤ºå½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæœªåˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å»¶è¿Ÿè°ƒç”¨funcå‡½æ•°ï¼Œè‹¥åç»­åœ¨æ—¢æœªè¾¾åˆ°waitæŒ‡å®šçš„æ—¶é—´é—´éš”å’Œfuncå‡½æ•°åˆæœªè¢«è°ƒç”¨çš„æƒ…å†µä¸‹è°ƒç”¨è¿”å›å€¼æ–¹æ³•ï¼Œåˆ™è¢«è°ƒç”¨è¯·æ±‚å°†è¢«ä¸¢å¼ƒã€‚\n     *  options.trailing = true;\n     * æ³¨æ„ï¼šå½“options.trailing = falseæ—¶ï¼Œæ•ˆæœä¸ä¸Šé¢çš„ç®€å•å®ç°æ•ˆæœç›¸åŒ\n     */\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      // è®¡ç®—å‰©ä½™æ—¶é—´\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      // å½“åˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™è°ƒç”¨funcå‡½æ•°\n      // ç²¾å½©ä¹‹å¤„ï¼šæŒ‰ç†æ¥è¯´remaining <= 0å·²ç»è¶³å¤Ÿè¯æ˜å·²ç»åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†è¿™é‡Œè¿˜è€ƒè™‘åˆ°å‡å¦‚å®¢æˆ·ç«¯ä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´åˆ™é©¬ä¸Šæ‰§è¡Œfuncå‡½æ•°ã€‚\n      if (remaining <= 0 || remaining > wait) {\n        // ç”±äºsetTimeoutå­˜åœ¨æœ€å°æ—¶é—´ç²¾åº¦é—®é¢˜ï¼Œå› æ­¤ä¼šå­˜åœ¨åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†ä¹‹å‰è®¾ç½®çš„setTimeoutæ“ä½œè¿˜æ²¡è¢«æ‰§è¡Œï¼Œå› æ­¤ä¸ºä¿é™©èµ·è§ï¼Œè¿™é‡Œå…ˆæ¸…ç†setTimeoutæ“ä½œ\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        // options.trailing=trueæ—¶ï¼Œå»¶æ—¶æ‰§è¡Œfuncå‡½æ•°\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n```\n\n# debounce\n\n> ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œä¹‹åå†æ¬¡è¿›å…¥äººï¼Œé‡æ–°è®¡æ—¶ã€‚tæ—¶é—´åå…³é—¨ã€‚\n\n```javascript\n/**\n* ç©ºé—²æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äº idleï¼Œaction æ‰ä¼šæ‰§è¡Œ\n* @param idle   {number}    ç©ºé—²æ—¶é—´ï¼Œå•ä½æ¯«ç§’\n* @param action {function}  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°\n* @return {function}    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°\n*/\ndebounce(idle,action)\n\nvar debounce = function(idle, action){\n  var last\n  return function(){\n    var ctx = this, args = arguments\n    clearTimeout(last)\n    last = setTimeout(function(){\n        action.apply(ctx, args)\n    }, idle)\n  }\n}\n\n_.debounce = function(func, wait, immediate) {\n    // immediateé»˜è®¤ä¸ºfalse\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      // å½“waitæŒ‡å®šçš„æ—¶é—´é—´éš”æœŸé—´å¤šæ¬¡è°ƒç”¨_.debounceè¿”å›çš„å‡½æ•°ï¼Œåˆ™ä¼šä¸æ–­æ›´æ–°timestampçš„å€¼ï¼Œå¯¼è‡´last < wait && last >= 0ä¸€ç›´ä¸ºtrueï¼Œä»è€Œä¸æ–­å¯åŠ¨æ–°çš„è®¡æ—¶å™¨å»¶æ—¶æ‰§è¡Œfunc\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      // ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¸”immediateä¸ºtrueï¼Œåˆ™è°ƒç”¨funcå‡½æ•°\n      var callNow = immediate && !timeout;\n      // åœ¨waitæŒ‡å®šçš„æ—¶é—´é—´éš”å†…é¦–æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å®šæ—¶è°ƒç”¨funcå‡½æ•°\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n```\n","source":"_posts/2017-05-10-throttle-debounce.markdown","raw":"---\nlayout:     post\ntitle:      \"Throttle and Debounce\"\nsubtitle:   \"javascript\"\ndate:       2017-03-22\nauthor:     \"Asher\"\nheader-img: \"home-bg.jpg\"\nheader-mask: 0.3\ncatalog:    true\ntags:\n    - javascript\n---\n\n# throttle\n\n> ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œtæ—¶é—´åå…³é—¨ã€‚\n\n```javascript\n/**\n* é¢‘ç‡æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œaction æ‰§è¡Œé¢‘ç‡é™å®šä¸º æ¬¡ / delay\n* @param delay  {number}    å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’\n* @param action {function}  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°\n* @return {function}    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°\n*/\nthrottle(delay,action)\n\nvar throttle = function(delay, action){\n  var last = 0\n  return function(){\n    var curr = +new Date()\n    if (curr - last > delay){\n      action.apply(this, arguments)\n      last = curr\n    }\n  }\n}\n\n _.throttle = function(func, wait, options) {\n    /* optionsçš„é»˜è®¤å€¼\n     *  è¡¨ç¤ºé¦–æ¬¡è°ƒç”¨è¿”å›å€¼æ–¹æ³•æ—¶ï¼Œä¼šé©¬ä¸Šè°ƒç”¨funcï¼›å¦åˆ™ä»…ä¼šè®°å½•å½“å‰æ—¶åˆ»ï¼Œå½“ç¬¬äºŒæ¬¡è°ƒç”¨çš„æ—¶é—´é—´éš”è¶…è¿‡waitæ—¶ï¼Œæ‰è°ƒç”¨funcã€‚\n     *  options.leading = true;\n     * è¡¨ç¤ºå½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæœªåˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å»¶è¿Ÿè°ƒç”¨funcå‡½æ•°ï¼Œè‹¥åç»­åœ¨æ—¢æœªè¾¾åˆ°waitæŒ‡å®šçš„æ—¶é—´é—´éš”å’Œfuncå‡½æ•°åˆæœªè¢«è°ƒç”¨çš„æƒ…å†µä¸‹è°ƒç”¨è¿”å›å€¼æ–¹æ³•ï¼Œåˆ™è¢«è°ƒç”¨è¯·æ±‚å°†è¢«ä¸¢å¼ƒã€‚\n     *  options.trailing = true;\n     * æ³¨æ„ï¼šå½“options.trailing = falseæ—¶ï¼Œæ•ˆæœä¸ä¸Šé¢çš„ç®€å•å®ç°æ•ˆæœç›¸åŒ\n     */\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      // è®¡ç®—å‰©ä½™æ—¶é—´\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      // å½“åˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™è°ƒç”¨funcå‡½æ•°\n      // ç²¾å½©ä¹‹å¤„ï¼šæŒ‰ç†æ¥è¯´remaining <= 0å·²ç»è¶³å¤Ÿè¯æ˜å·²ç»åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†è¿™é‡Œè¿˜è€ƒè™‘åˆ°å‡å¦‚å®¢æˆ·ç«¯ä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´åˆ™é©¬ä¸Šæ‰§è¡Œfuncå‡½æ•°ã€‚\n      if (remaining <= 0 || remaining > wait) {\n        // ç”±äºsetTimeoutå­˜åœ¨æœ€å°æ—¶é—´ç²¾åº¦é—®é¢˜ï¼Œå› æ­¤ä¼šå­˜åœ¨åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†ä¹‹å‰è®¾ç½®çš„setTimeoutæ“ä½œè¿˜æ²¡è¢«æ‰§è¡Œï¼Œå› æ­¤ä¸ºä¿é™©èµ·è§ï¼Œè¿™é‡Œå…ˆæ¸…ç†setTimeoutæ“ä½œ\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        // options.trailing=trueæ—¶ï¼Œå»¶æ—¶æ‰§è¡Œfuncå‡½æ•°\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n```\n\n# debounce\n\n> ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œä¹‹åå†æ¬¡è¿›å…¥äººï¼Œé‡æ–°è®¡æ—¶ã€‚tæ—¶é—´åå…³é—¨ã€‚\n\n```javascript\n/**\n* ç©ºé—²æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äº idleï¼Œaction æ‰ä¼šæ‰§è¡Œ\n* @param idle   {number}    ç©ºé—²æ—¶é—´ï¼Œå•ä½æ¯«ç§’\n* @param action {function}  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°\n* @return {function}    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°\n*/\ndebounce(idle,action)\n\nvar debounce = function(idle, action){\n  var last\n  return function(){\n    var ctx = this, args = arguments\n    clearTimeout(last)\n    last = setTimeout(function(){\n        action.apply(ctx, args)\n    }, idle)\n  }\n}\n\n_.debounce = function(func, wait, immediate) {\n    // immediateé»˜è®¤ä¸ºfalse\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      // å½“waitæŒ‡å®šçš„æ—¶é—´é—´éš”æœŸé—´å¤šæ¬¡è°ƒç”¨_.debounceè¿”å›çš„å‡½æ•°ï¼Œåˆ™ä¼šä¸æ–­æ›´æ–°timestampçš„å€¼ï¼Œå¯¼è‡´last < wait && last >= 0ä¸€ç›´ä¸ºtrueï¼Œä»è€Œä¸æ–­å¯åŠ¨æ–°çš„è®¡æ—¶å™¨å»¶æ—¶æ‰§è¡Œfunc\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      // ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¸”immediateä¸ºtrueï¼Œåˆ™è°ƒç”¨funcå‡½æ•°\n      var callNow = immediate && !timeout;\n      // åœ¨waitæŒ‡å®šçš„æ—¶é—´é—´éš”å†…é¦–æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å®šæ—¶è°ƒç”¨funcå‡½æ•°\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n```\n","slug":"2017-05-10-throttle-debounce","published":1,"updated":"2017-05-27T01:50:29.000Z","comments":1,"photos":[],"link":"","_id":"cj3f8dhy2001lmmt75gr90d9v","content":"<h1 id=\"throttle\"><a href=\"#throttle\" class=\"headerlink\" title=\"throttle\"></a>throttle</h1><blockquote>\n<p>ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œtæ—¶é—´åå…³é—¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">* é¢‘ç‡æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œaction æ‰§è¡Œé¢‘ç‡é™å®šä¸º æ¬¡ / delay</div><div class=\"line\">* @param delay  &#123;number&#125;    å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’</div><div class=\"line\">* @param action &#123;function&#125;  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°</div><div class=\"line\">* @return &#123;function&#125;    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°</div><div class=\"line\">*/</div><div class=\"line\">throttle(delay,action)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> throttle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">delay, action</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> last = <span class=\"number\">0</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> curr = +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</div><div class=\"line\">    <span class=\"keyword\">if</span> (curr - last &gt; delay)&#123;</div><div class=\"line\">      action.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</div><div class=\"line\">      last = curr</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"> _.throttle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, options</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">/* optionsçš„é»˜è®¤å€¼</span></div><div class=\"line\">     *  è¡¨ç¤ºé¦–æ¬¡è°ƒç”¨è¿”å›å€¼æ–¹æ³•æ—¶ï¼Œä¼šé©¬ä¸Šè°ƒç”¨funcï¼›å¦åˆ™ä»…ä¼šè®°å½•å½“å‰æ—¶åˆ»ï¼Œå½“ç¬¬äºŒæ¬¡è°ƒç”¨çš„æ—¶é—´é—´éš”è¶…è¿‡waitæ—¶ï¼Œæ‰è°ƒç”¨funcã€‚</div><div class=\"line\">     *  options.leading = true;</div><div class=\"line\">     * è¡¨ç¤ºå½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæœªåˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å»¶è¿Ÿè°ƒç”¨funcå‡½æ•°ï¼Œè‹¥åç»­åœ¨æ—¢æœªè¾¾åˆ°waitæŒ‡å®šçš„æ—¶é—´é—´éš”å’Œfuncå‡½æ•°åˆæœªè¢«è°ƒç”¨çš„æƒ…å†µä¸‹è°ƒç”¨è¿”å›å€¼æ–¹æ³•ï¼Œåˆ™è¢«è°ƒç”¨è¯·æ±‚å°†è¢«ä¸¢å¼ƒã€‚</div><div class=\"line\">     *  options.trailing = true;</div><div class=\"line\">     * æ³¨æ„ï¼šå½“options.trailing = falseæ—¶ï¼Œæ•ˆæœä¸ä¸Šé¢çš„ç®€å•å®ç°æ•ˆæœç›¸åŒ</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">var</span> context, args, result;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> previous = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!options) options = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      previous = options.leading === <span class=\"literal\">false</span> ? <span class=\"number\">0</span> : _.now();</div><div class=\"line\">      timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">      result = func.apply(context, args);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> now = _.now();</div><div class=\"line\">      <span class=\"keyword\">if</span> (!previous &amp;&amp; options.leading === <span class=\"literal\">false</span>) previous = now;</div><div class=\"line\">      <span class=\"comment\">// è®¡ç®—å‰©ä½™æ—¶é—´</span></div><div class=\"line\">      <span class=\"keyword\">var</span> remaining = wait - (now - previous);</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      <span class=\"comment\">// å½“åˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™è°ƒç”¨funcå‡½æ•°</span></div><div class=\"line\">      <span class=\"comment\">// ç²¾å½©ä¹‹å¤„ï¼šæŒ‰ç†æ¥è¯´remaining &lt;= 0å·²ç»è¶³å¤Ÿè¯æ˜å·²ç»åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†è¿™é‡Œè¿˜è€ƒè™‘åˆ°å‡å¦‚å®¢æˆ·ç«¯ä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´åˆ™é©¬ä¸Šæ‰§è¡Œfuncå‡½æ•°ã€‚</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</div><div class=\"line\">        <span class=\"comment\">// ç”±äºsetTimeoutå­˜åœ¨æœ€å°æ—¶é—´ç²¾åº¦é—®é¢˜ï¼Œå› æ­¤ä¼šå­˜åœ¨åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†ä¹‹å‰è®¾ç½®çš„setTimeoutæ“ä½œè¿˜æ²¡è¢«æ‰§è¡Œï¼Œå› æ­¤ä¸ºä¿é™©èµ·è§ï¼Œè¿™é‡Œå…ˆæ¸…ç†setTimeoutæ“ä½œ</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (timeout) &#123;</div><div class=\"line\">          clearTimeout(timeout);</div><div class=\"line\">          timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        previous = now;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!timeout &amp;&amp; options.trailing !== <span class=\"literal\">false</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// options.trailing=trueæ—¶ï¼Œå»¶æ—¶æ‰§è¡Œfuncå‡½æ•°</span></div><div class=\"line\">        timeout = setTimeout(later, remaining);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div></pre></td></tr></table></figure>\n<h1 id=\"debounce\"><a href=\"#debounce\" class=\"headerlink\" title=\"debounce\"></a>debounce</h1><blockquote>\n<p>ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œä¹‹åå†æ¬¡è¿›å…¥äººï¼Œé‡æ–°è®¡æ—¶ã€‚tæ—¶é—´åå…³é—¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">* ç©ºé—²æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äº idleï¼Œaction æ‰ä¼šæ‰§è¡Œ</div><div class=\"line\">* @param idle   &#123;number&#125;    ç©ºé—²æ—¶é—´ï¼Œå•ä½æ¯«ç§’</div><div class=\"line\">* @param action &#123;function&#125;  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°</div><div class=\"line\">* @return &#123;function&#125;    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°</div><div class=\"line\">*/</div><div class=\"line\">debounce(idle,action)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> debounce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">idle, action</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> last</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> ctx = <span class=\"keyword\">this</span>, args = <span class=\"built_in\">arguments</span></div><div class=\"line\">    clearTimeout(last)</div><div class=\"line\">    last = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        action.apply(ctx, args)</div><div class=\"line\">    &#125;, idle)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_.debounce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// immediateé»˜è®¤ä¸ºfalse</span></div><div class=\"line\">    <span class=\"keyword\">var</span> timeout, args, context, timestamp, result;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"comment\">// å½“waitæŒ‡å®šçš„æ—¶é—´é—´éš”æœŸé—´å¤šæ¬¡è°ƒç”¨_.debounceè¿”å›çš„å‡½æ•°ï¼Œåˆ™ä¼šä¸æ–­æ›´æ–°timestampçš„å€¼ï¼Œå¯¼è‡´last &lt; wait &amp;&amp; last &gt;= 0ä¸€ç›´ä¸ºtrueï¼Œä»è€Œä¸æ–­å¯åŠ¨æ–°çš„è®¡æ—¶å™¨å»¶æ—¶æ‰§è¡Œfunc</span></div><div class=\"line\">      <span class=\"keyword\">var</span> last = _.now() - timestamp;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (last &lt; wait &amp;&amp; last &gt;= <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        timeout = setTimeout(later, wait - last);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!immediate) &#123;</div><div class=\"line\">          result = func.apply(context, args);</div><div class=\"line\">          <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      timestamp = _.now();</div><div class=\"line\">      <span class=\"comment\">// ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¸”immediateä¸ºtrueï¼Œåˆ™è°ƒç”¨funcå‡½æ•°</span></div><div class=\"line\">      <span class=\"keyword\">var</span> callNow = immediate &amp;&amp; !timeout;</div><div class=\"line\">      <span class=\"comment\">// åœ¨waitæŒ‡å®šçš„æ—¶é—´é—´éš”å†…é¦–æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å®šæ—¶è°ƒç”¨funcå‡½æ•°</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) timeout = setTimeout(later, wait);</div><div class=\"line\">      <span class=\"keyword\">if</span> (callNow) &#123;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"throttle\"><a href=\"#throttle\" class=\"headerlink\" title=\"throttle\"></a>throttle</h1><blockquote>\n<p>ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œtæ—¶é—´åå…³é—¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">* é¢‘ç‡æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œaction æ‰§è¡Œé¢‘ç‡é™å®šä¸º æ¬¡ / delay</div><div class=\"line\">* @param delay  &#123;number&#125;    å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½æ¯«ç§’</div><div class=\"line\">* @param action &#123;function&#125;  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°</div><div class=\"line\">* @return &#123;function&#125;    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°</div><div class=\"line\">*/</div><div class=\"line\">throttle(delay,action)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> throttle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">delay, action</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> last = <span class=\"number\">0</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> curr = +<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()</div><div class=\"line\">    <span class=\"keyword\">if</span> (curr - last &gt; delay)&#123;</div><div class=\"line\">      action.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</div><div class=\"line\">      last = curr</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"> _.throttle = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, options</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">/* optionsçš„é»˜è®¤å€¼</span></div><div class=\"line\">     *  è¡¨ç¤ºé¦–æ¬¡è°ƒç”¨è¿”å›å€¼æ–¹æ³•æ—¶ï¼Œä¼šé©¬ä¸Šè°ƒç”¨funcï¼›å¦åˆ™ä»…ä¼šè®°å½•å½“å‰æ—¶åˆ»ï¼Œå½“ç¬¬äºŒæ¬¡è°ƒç”¨çš„æ—¶é—´é—´éš”è¶…è¿‡waitæ—¶ï¼Œæ‰è°ƒç”¨funcã€‚</div><div class=\"line\">     *  options.leading = true;</div><div class=\"line\">     * è¡¨ç¤ºå½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæœªåˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å»¶è¿Ÿè°ƒç”¨funcå‡½æ•°ï¼Œè‹¥åç»­åœ¨æ—¢æœªè¾¾åˆ°waitæŒ‡å®šçš„æ—¶é—´é—´éš”å’Œfuncå‡½æ•°åˆæœªè¢«è°ƒç”¨çš„æƒ…å†µä¸‹è°ƒç”¨è¿”å›å€¼æ–¹æ³•ï¼Œåˆ™è¢«è°ƒç”¨è¯·æ±‚å°†è¢«ä¸¢å¼ƒã€‚</div><div class=\"line\">     *  options.trailing = true;</div><div class=\"line\">     * æ³¨æ„ï¼šå½“options.trailing = falseæ—¶ï¼Œæ•ˆæœä¸ä¸Šé¢çš„ç®€å•å®ç°æ•ˆæœç›¸åŒ</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">var</span> context, args, result;</div><div class=\"line\">    <span class=\"keyword\">var</span> timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> previous = <span class=\"number\">0</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!options) options = &#123;&#125;;</div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      previous = options.leading === <span class=\"literal\">false</span> ? <span class=\"number\">0</span> : _.now();</div><div class=\"line\">      timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">      result = func.apply(context, args);</div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> now = _.now();</div><div class=\"line\">      <span class=\"keyword\">if</span> (!previous &amp;&amp; options.leading === <span class=\"literal\">false</span>) previous = now;</div><div class=\"line\">      <span class=\"comment\">// è®¡ç®—å‰©ä½™æ—¶é—´</span></div><div class=\"line\">      <span class=\"keyword\">var</span> remaining = wait - (now - previous);</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      <span class=\"comment\">// å½“åˆ°è¾¾waitæŒ‡å®šçš„æ—¶é—´é—´éš”ï¼Œåˆ™è°ƒç”¨funcå‡½æ•°</span></div><div class=\"line\">      <span class=\"comment\">// ç²¾å½©ä¹‹å¤„ï¼šæŒ‰ç†æ¥è¯´remaining &lt;= 0å·²ç»è¶³å¤Ÿè¯æ˜å·²ç»åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†è¿™é‡Œè¿˜è€ƒè™‘åˆ°å‡å¦‚å®¢æˆ·ç«¯ä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´åˆ™é©¬ä¸Šæ‰§è¡Œfuncå‡½æ•°ã€‚</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</div><div class=\"line\">        <span class=\"comment\">// ç”±äºsetTimeoutå­˜åœ¨æœ€å°æ—¶é—´ç²¾åº¦é—®é¢˜ï¼Œå› æ­¤ä¼šå­˜åœ¨åˆ°è¾¾waitçš„æ—¶é—´é—´éš”ï¼Œä½†ä¹‹å‰è®¾ç½®çš„setTimeoutæ“ä½œè¿˜æ²¡è¢«æ‰§è¡Œï¼Œå› æ­¤ä¸ºä¿é™©èµ·è§ï¼Œè¿™é‡Œå…ˆæ¸…ç†setTimeoutæ“ä½œ</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (timeout) &#123;</div><div class=\"line\">          clearTimeout(timeout);</div><div class=\"line\">          timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        previous = now;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!timeout &amp;&amp; options.trailing !== <span class=\"literal\">false</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">// options.trailing=trueæ—¶ï¼Œå»¶æ—¶æ‰§è¡Œfuncå‡½æ•°</span></div><div class=\"line\">        timeout = setTimeout(later, remaining);</div><div class=\"line\">      &#125;</div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div></pre></td></tr></table></figure>\n<h1 id=\"debounce\"><a href=\"#debounce\" class=\"headerlink\" title=\"debounce\"></a>debounce</h1><blockquote>\n<p>ç­–ç•¥ç”µæ¢¯ï¼Œå½“ç¬¬ä¸€ä¸ªäººè¿›å…¥æ—¶å¼€å§‹è®¡æ—¶ï¼Œä¹‹åå†æ¬¡è¿›å…¥äººï¼Œé‡æ–°è®¡æ—¶ã€‚tæ—¶é—´åå…³é—¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">* ç©ºé—²æ§åˆ¶ è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äº idleï¼Œaction æ‰ä¼šæ‰§è¡Œ</div><div class=\"line\">* @param idle   &#123;number&#125;    ç©ºé—²æ—¶é—´ï¼Œå•ä½æ¯«ç§’</div><div class=\"line\">* @param action &#123;function&#125;  è¯·æ±‚å…³è”å‡½æ•°ï¼Œå®é™…åº”ç”¨éœ€è¦è°ƒç”¨çš„å‡½æ•°</div><div class=\"line\">* @return &#123;function&#125;    è¿”å›å®¢æˆ·è°ƒç”¨å‡½æ•°</div><div class=\"line\">*/</div><div class=\"line\">debounce(idle,action)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> debounce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">idle, action</span>)</span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> last</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> ctx = <span class=\"keyword\">this</span>, args = <span class=\"built_in\">arguments</span></div><div class=\"line\">    clearTimeout(last)</div><div class=\"line\">    last = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">        action.apply(ctx, args)</div><div class=\"line\">    &#125;, idle)</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">_.debounce = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// immediateé»˜è®¤ä¸ºfalse</span></div><div class=\"line\">    <span class=\"keyword\">var</span> timeout, args, context, timestamp, result;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"comment\">// å½“waitæŒ‡å®šçš„æ—¶é—´é—´éš”æœŸé—´å¤šæ¬¡è°ƒç”¨_.debounceè¿”å›çš„å‡½æ•°ï¼Œåˆ™ä¼šä¸æ–­æ›´æ–°timestampçš„å€¼ï¼Œå¯¼è‡´last &lt; wait &amp;&amp; last &gt;= 0ä¸€ç›´ä¸ºtrueï¼Œä»è€Œä¸æ–­å¯åŠ¨æ–°çš„è®¡æ—¶å™¨å»¶æ—¶æ‰§è¡Œfunc</span></div><div class=\"line\">      <span class=\"keyword\">var</span> last = _.now() - timestamp;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">if</span> (last &lt; wait &amp;&amp; last &gt;= <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        timeout = setTimeout(later, wait - last);</div><div class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        timeout = <span class=\"literal\">null</span>;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!immediate) &#123;</div><div class=\"line\">          result = func.apply(context, args);</div><div class=\"line\">          <span class=\"keyword\">if</span> (!timeout) context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      context = <span class=\"keyword\">this</span>;</div><div class=\"line\">      args = <span class=\"built_in\">arguments</span>;</div><div class=\"line\">      timestamp = _.now();</div><div class=\"line\">      <span class=\"comment\">// ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¸”immediateä¸ºtrueï¼Œåˆ™è°ƒç”¨funcå‡½æ•°</span></div><div class=\"line\">      <span class=\"keyword\">var</span> callNow = immediate &amp;&amp; !timeout;</div><div class=\"line\">      <span class=\"comment\">// åœ¨waitæŒ‡å®šçš„æ—¶é—´é—´éš”å†…é¦–æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™å¯åŠ¨è®¡æ—¶å™¨å®šæ—¶è°ƒç”¨funcå‡½æ•°</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (!timeout) timeout = setTimeout(later, wait);</div><div class=\"line\">      <span class=\"keyword\">if</span> (callNow) &#123;</div><div class=\"line\">        result = func.apply(context, args);</div><div class=\"line\">        context = args = <span class=\"literal\">null</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> result;</div><div class=\"line\">    &#125;;</div><div class=\"line\">  &#125;;</div></pre></td></tr></table></figure>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cj3f8dhvn0001mmt78ori14o9","tag_id":"cj3f8dhvy0005mmt7uqv5r8ze","_id":"cj3f8dhwe000cmmt72hl4yiic"},{"post_id":"cj3f8dhvt0003mmt7fknsh0u3","tag_id":"cj3f8dhwd000bmmt7iflctjd1","_id":"cj3f8dhwk000hmmt7w8pwg14p"},{"post_id":"cj3f8dhwi000gmmt713uysnf6","tag_id":"cj3f8dhwh000fmmt76xmh5823","_id":"cj3f8dhwo000kmmt7r1zxjc9p"},{"post_id":"cj3f8dhw20006mmt7j5qi84y2","tag_id":"cj3f8dhwh000fmmt76xmh5823","_id":"cj3f8dhwr000mmmt7p9lazls2"},{"post_id":"cj3f8dhw90008mmt71iy4la9f","tag_id":"cj3f8dhwo000jmmt7ate2prfd","_id":"cj3f8dhxd000qmmt7l838w0r2"},{"post_id":"cj3f8dhwt000nmmt7slq5wzth","tag_id":"cj3f8dhvy0005mmt7uqv5r8ze","_id":"cj3f8dhxf000smmt7bgzxa02b"},{"post_id":"cj3f8dhwc000ammt7mxe1aa6t","tag_id":"cj3f8dhww000ommt7xaz3a7hw","_id":"cj3f8dhxh000vmmt7bhnbte7d"},{"post_id":"cj3f8dhwe000dmmt7u237xe3r","tag_id":"cj3f8dhxg000ummt7d7py5rdx","_id":"cj3f8dhxm0010mmt78ap4qj3x"},{"post_id":"cj3f8dhwg000emmt75gymutue","tag_id":"cj3f8dhxl000ymmt7qyn58zu4","_id":"cj3f8dhxo0014mmt7qjtn9vtp"},{"post_id":"cj3f8dhwm000immt78urbu23c","tag_id":"cj3f8dhxn0012mmt7sdpx9w6z","_id":"cj3f8dhxr0018mmt7whbgy60y"},{"post_id":"cj3f8dhwp000lmmt7y8wcxrim","tag_id":"cj3f8dhxp0016mmt7hdqp28tz","_id":"cj3f8dhxu001cmmt7dv48ezux"},{"post_id":"cj3f8dhxs001ammt7mvkoxvcv","tag_id":"cj3f8dhxn0012mmt7sdpx9w6z","_id":"cj3f8dhxv001emmt7oatyfmxs"},{"post_id":"cj3f8dhx4000pmmt7e7kpqwkg","tag_id":"cj3f8dhxt001bmmt7ftf09jah","_id":"cj3f8dhxy001immt79ffit1z0"},{"post_id":"cj3f8dhxe000rmmt7ugk5m2dr","tag_id":"cj3f8dhxw001gmmt7y5spjakx","_id":"cj3f8dhy4001mmmt72y95cskf"},{"post_id":"cj3f8dhy2001lmmt75gr90d9v","tag_id":"cj3f8dhxp0016mmt7hdqp28tz","_id":"cj3f8dhy4001ommt7ns6z7tvo"},{"post_id":"cj3f8dhxf000tmmt74nn1221q","tag_id":"cj3f8dhxg000ummt7d7py5rdx","_id":"cj3f8dhy4001pmmt7sltuvwsa"},{"post_id":"cj3f8dhxh000wmmt7y0hz1zwc","tag_id":"cj3f8dhy4001nmmt7w569x56k","_id":"cj3f8dhy5001rmmt71v7os9cv"},{"post_id":"cj3f8dhxj000xmmt7vdb3w5sg","tag_id":"cj3f8dhy4001qmmt784hki0xt","_id":"cj3f8dhy5001tmmt7pnyst9d6"},{"post_id":"cj3f8dhxl000zmmt7c7qjqiw8","tag_id":"cj3f8dhy5001smmt7trpu7qpo","_id":"cj3f8dhy7001vmmt7y3erigsx"},{"post_id":"cj3f8dhxm0011mmt79q7csbut","tag_id":"cj3f8dhxn0012mmt7sdpx9w6z","_id":"cj3f8dhy8001xmmt7r4xo1mqb"},{"post_id":"cj3f8dhxn0013mmt71tof0973","tag_id":"cj3f8dhy7001wmmt75zpwsu33","_id":"cj3f8dhy9001zmmt7354zjvwf"},{"post_id":"cj3f8dhxo0015mmt79ykmel8g","tag_id":"cj3f8dhy7001wmmt75zpwsu33","_id":"cj3f8dhy90021mmt78ctfb261"},{"post_id":"cj3f8dhxp0017mmt7ywv0gx12","tag_id":"cj3f8dhy90020mmt71jc7fric","_id":"cj3f8dhya0025mmt7xv8kypjt"},{"post_id":"cj3f8dhxp0017mmt7ywv0gx12","tag_id":"cj3f8dhy90022mmt7mxzm2r6v","_id":"cj3f8dhya0026mmt7ylbqi9e2"},{"post_id":"cj3f8dhxp0017mmt7ywv0gx12","tag_id":"cj3f8dhya0023mmt7zprefxko","_id":"cj3f8dhyb0028mmt7yyrcdvje"},{"post_id":"cj3f8dhxr0019mmt7e6p5jb6r","tag_id":"cj3f8dhya0024mmt7wn27uei0","_id":"cj3f8dhyb0029mmt70chqe1tt"},{"post_id":"cj3f8dhxu001dmmt7zprdexcq","tag_id":"cj3f8dhya0027mmt724gcqjkj","_id":"cj3f8dhyb002bmmt7gvsyvrt2"},{"post_id":"cj3f8dhxv001fmmt7xa7f9hn1","tag_id":"cj3f8dhyb002ammt7o2tivh2z","_id":"cj3f8dhyb002dmmt7q764gvrh"},{"post_id":"cj3f8dhxx001hmmt70mzuus0b","tag_id":"cj3f8dhyb002cmmt7nrqa1qs4","_id":"cj3f8dhyc002fmmt7dzmc6vq1"},{"post_id":"cj3f8dhxy001jmmt72fw5ctbd","tag_id":"cj3f8dhyc002emmt7vdl01vmg","_id":"cj3f8dhyc002gmmt7z5i9r3fj"}],"Tag":[{"name":"WebPack","_id":"cj3f8dhvy0005mmt7uqv5r8ze"},{"name":"React","_id":"cj3f8dhwd000bmmt7iflctjd1"},{"name":"HTML","_id":"cj3f8dhwh000fmmt76xmh5823"},{"name":"CSS","_id":"cj3f8dhwo000jmmt7ate2prfd"},{"name":"å›å¿†","_id":"cj3f8dhww000ommt7xaz3a7hw"},{"name":"å‰ç«¯å·¥å…·","_id":"cj3f8dhxg000ummt7d7py5rdx"},{"name":"Github","_id":"cj3f8dhxl000ymmt7qyn58zu4"},{"name":"Frontend","_id":"cj3f8dhxn0012mmt7sdpx9w6z"},{"name":"javascript","_id":"cj3f8dhxp0016mmt7hdqp28tz"},{"name":"Jekyll","_id":"cj3f8dhxt001bmmt7ftf09jah"},{"name":"Vue","_id":"cj3f8dhxw001gmmt7y5spjakx"},{"name":"understore","_id":"cj3f8dhy4001nmmt7w569x56k"},{"name":"NodeJS","_id":"cj3f8dhy4001qmmt784hki0xt"},{"name":"Guide","_id":"cj3f8dhy5001smmt7trpu7qpo"},{"name":"Javascript","_id":"cj3f8dhy7001wmmt75zpwsu33"},{"name":"å‰ç«¯å¼€å‘","_id":"cj3f8dhy90020mmt71jc7fric"},{"name":"JavaScript","_id":"cj3f8dhy90022mmt7mxzm2r6v"},{"name":"PWA","_id":"cj3f8dhya0023mmt7zprefxko"},{"name":"Promise","_id":"cj3f8dhya0024mmt7wn27uei0"},{"name":"Functional","_id":"cj3f8dhya0027mmt724gcqjkj"},{"name":"Mobx","_id":"cj3f8dhyb002ammt7o2tivh2z"},{"name":"Gulp and Markdown","_id":"cj3f8dhyb002cmmt7nrqa1qs4"},{"name":"Redux","_id":"cj3f8dhyc002emmt7vdl01vmg"}]}}