<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          Functional Program - AsherJia的博客 | AsherJia&#39;s Blog
        
    </title>

    <link rel="canonical" href="http://blog.asherjia.com/2017/03/09/functional-program/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Asher&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archives/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/news/">News</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Image to hack wechat -->
<!-- <img src="http://blog.asherjia.com/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('home-bg.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#Functional" title="Functional">Functional</a>
                        
                    </div>
                    <h1>Functional Program</h1>
                    <h2 class="subheading">Functional</h2>
                    <span class="meta">
                        Posted by Asher on
                        2017-03-09
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <p>// <a href="https://github.com/shfshanyue/fp-jargon-zh#arity" target="_blank" rel="external">https://github.com/shfshanyue/fp-jargon-zh#arity</a></p>
<h1 id="Arity"><a href="#Arity" class="headerlink" title="Arity"></a>Arity</h1><p>函数参数的个数。来自于单词 unary, binary, ternary 等等。这个单词是由 -ary 与 -ity 两个后缀拼接而成。例如，一个带有两个参数的函数被称为二元函数或者它的 arity 是2。它也被那些更喜欢希腊词根而非拉丁词根的人称为 dyadic。同样地，带有可变数量参数的函数被称为 variadic，而二元函数只能带两个参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</div><div class="line"><span class="keyword">const</span> arity = sum.length</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'arity: '</span>, arity)</div></pre></td></tr></table></figure>
<h1 id="高阶函数-Higher-Order-Function-HOF"><a href="#高阶函数-Higher-Order-Function-HOF" class="headerlink" title="高阶函数 (Higher-Order Function/HOF)"></a>高阶函数 (Higher-Order Function/HOF)</h1><p>以函数为参数或/和返回值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> filter = <span class="function">(<span class="params">predicate, xs</span>) =&gt;</span> xs.filter(predicte)</div><div class="line"><span class="keyword">const</span> is = <span class="function">(<span class="params">type</span>) =&gt;</span> (x) =&gt; <span class="built_in">Object</span>(x) <span class="keyword">instanceof</span> type</div><div class="line">filter(is(<span class="built_in">Number</span>), [<span class="number">0</span>, <span class="string">'1'</span>, <span class="number">2</span>, <span class="literal">null</span>])</div></pre></td></tr></table></figure>
<h1 id="偏函数-Partial-Function"><a href="#偏函数-Partial-Function" class="headerlink" title="偏函数 (Partial Function)"></a>偏函数 (Partial Function)</h1><p>对原始函数预设参数作为一个新的函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> partical = <span class="function">(<span class="params">f, ...args</span>) =&gt;</span> (...moreArgs) =&gt; f(...args, ...moreArgs)</div><div class="line"></div><div class="line"><span class="keyword">const</span> add3 = <span class="function">(<span class="params">a, b, c</span>) =&gt;</span> a + b + c</div><div class="line"></div><div class="line"><span class="keyword">const</span> fivePlus = partical(add3, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line"></div><div class="line">fivePlus(<span class="number">4</span>)</div><div class="line"></div><div class="line"><span class="comment">// 也可以使用Function.prototype.bind实现偏函数</span></div><div class="line"><span class="keyword">const</span> add1More = add3.bind(<span class="literal">null</span>, <span class="number">2</span>, <span class="number">3</span>)</div></pre></td></tr></table></figure>
<h1 id="柯里化-Currying"><a href="#柯里化-Currying" class="headerlink" title="柯里化 (Currying)"></a>柯里化 (Currying)</h1><p>讲一个多元函数转变为一元函数的过程。每当函数被调用时，它仅仅接收一个 参数并且返回带有一个参数的函数，直接传递完所有的参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</div><div class="line"><span class="keyword">const</span> curriedSum = <span class="function">(<span class="params">a</span>) =&gt;</span> (b) =&gt; a + b</div><div class="line"></div><div class="line">curriedSum(<span class="number">3</span>)(<span class="number">4</span>)</div><div class="line"></div><div class="line"><span class="keyword">const</span> add2 = curriedSum(<span class="number">2</span>)</div><div class="line">add2(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<h1 id="自动柯里化-Auto-Currying"><a href="#自动柯里化-Auto-Currying" class="headerlink" title="自动柯里化 (Auto Currying)"></a>自动柯里化 (Auto Currying)</h1><p><code>lodash</code>, <code>understore</code>和<code>ramda</code>有<code>curry</code>函数可以自动完成柯里化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y</div><div class="line"><span class="keyword">const</span> curriedAdd = _.curry(add)</div><div class="line"></div><div class="line">curriedAdd(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">curriedAdd(<span class="number">1</span>)(<span class="number">2</span>)</div><div class="line">curriedAdd(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h3 id="进一步阅读"><a href="#进一步阅读" class="headerlink" title="进一步阅读"></a>进一步阅读</h3><ul>
<li><a href="http://fr.umio.us/favoring-curry/" target="_blank" rel="external">Favoring Curry</a></li>
<li><a href="https://www.youtube.com/watch?v=m3svKOdZijA" target="_blank" rel="external">Hey Underscore, You’re Doing It Wrong!</a></li>
</ul>
<h1 id="函数组合-Function-Composing"><a href="#函数组合-Function-Composing" class="headerlink" title="函数组合 (Function Composing)"></a>函数组合 (Function Composing)</h1><p>接收多个函数作为参数，从右到左，一个函数的输入为另一个函数的输出</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">f, g</span>) =&gt;</span> (a) =&gt; f(g(a))</div><div class="line"><span class="keyword">const</span> floorAndToString = compose(<span class="function">(<span class="params">val</span>) =&gt;</span> val.toString(), <span class="built_in">Math</span>.floor)</div><div class="line">floorAndToString(<span class="number">12.12</span>)</div></pre></td></tr></table></figure>
<p>Continuation</p>
<p>在一个程序执行的任意时刻, 尚未执行的代码成为Continuation.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> printAsString = <span class="function">(<span class="params">num</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`Given <span class="subst">$&#123;num&#125;</span>`</span>)</div><div class="line"></div><div class="line"><span class="keyword">const</span> addOneAndContinue = <span class="function">(<span class="params">num, cc</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> result = num + <span class="number">1</span></div><div class="line">    cc(result)</div><div class="line">&#125;</div><div class="line"></div><div class="line">andOneAndContinue(<span class="number">2</span>, printAsString)</div></pre></td></tr></table></figure>
<p>Continuation 在异步编程中很常见, 比如当程序需要接收到数据才能继续执行。请求的相应同城作为代码的剩余执行部分，一旦接收到数据，对数据的处理被作为Continuation.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> continueProgramWith = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;&#125;</div><div class="line">readFileAsync(<span class="string">'path/to/file'</span>, (response, error) =&gt; &#123;</div><div class="line">    <span class="keyword">if</span> (error) &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    continueProgramWith(response)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="纯函数-Purity"><a href="#纯函数-Purity" class="headerlink" title="纯函数 (Purity)"></a>纯函数 (Purity)</h1><p>输出仅由输入决定，且不产生副作用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> greet = <span class="function">(<span class="params">name</span>) =&gt;</span> <span class="string">`hello, <span class="subst">$&#123;name&#125;</span>`</span></div><div class="line">greet(<span class="string">'world'</span>)</div></pre></td></tr></table></figure>
<p>以一下代码不是纯函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">window</span>.name = <span class="string">'Brianne'</span></div><div class="line"><span class="keyword">const</span> greet = <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">`Hi, <span class="subst">$&#123;<span class="built_in">window</span>.name&#125;</span>`</span> <span class="comment">//函数依赖外部状态。</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">let</span> greeting</div><div class="line"></div><div class="line"><span class="keyword">const</span> greet = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</div><div class="line">    greeting = <span class="string">`Hi, <span class="subst">$&#123;name&#125;</span>`</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">greet(<span class="string">'Brianne'</span>)</div><div class="line">greeting</div></pre></td></tr></table></figure>
<h1 id="副作用-Side-effects"><a href="#副作用-Side-effects" class="headerlink" title="副作用(Side effects)"></a>副作用(Side effects)</h1><p>如果函数与外部可变状态进行交互，则它是有副作用的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> differentEveryTime = <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'IO is a side effect!'</span>)</div></pre></td></tr></table></figure>
<h1 id="幂等行-Idempotent"><a href="#幂等行-Idempotent" class="headerlink" title="幂等行(Idempotent)"></a>幂等行(Idempotent)</h1><p>如果一个函数执行多次皆返回相同的结果，则它是幂等性的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">f(f(x)) = f(x)</div><div class="line"><span class="built_in">Math</span>.abs(<span class="built_in">Math</span>.abs(<span class="number">10</span>))</div><div class="line">sort(sort(sort([<span class="number">2</span>, <span class="number">1</span>])))</div></pre></td></tr></table></figure>
<h1 id="Point-Free-风格-Point-Free-Style"><a href="#Point-Free-风格-Point-Free-Style" class="headerlink" title="Point-Free 风格(Point-Free Style)"></a>Point-Free 风格(Point-Free Style)</h1><p>定义函数时，不显式的支出函数所带参数。这种风格通常需要柯里化或者高阶函数。也叫Tacit programming。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> map = <span class="function">(<span class="params">fn</span>) =&gt;</span> (list) =&gt; list.map(fn)</div><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a</span>) =&gt;</span> (b) =&gt; a + b</div><div class="line"></div><div class="line"><span class="keyword">const</span> incrementAll = <span class="function">(<span class="params">numbers</span>) =&gt;</span> map(add(<span class="number">1</span>))(numbers)</div><div class="line"><span class="keyword">const</span> incrementAll2 = map(add(<span class="number">1</span>))</div></pre></td></tr></table></figure>
<h1 id="谓词-Predicate"><a href="#谓词-Predicate" class="headerlink" title="谓词 (Predicate)"></a>谓词 (Predicate)</h1><p>根据输入返回true或false. 通常用在Array.prototype.filter的回调函数中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> predicate = <span class="function">(<span class="params">a</span>) =&gt;</span> a &gt; <span class="number">2</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].filter(predicate)</div></pre></td></tr></table></figure>
<h1 id="契约-Contracts"><a href="#契约-Contracts" class="headerlink" title="契约 (Contracts)"></a>契约 (Contracts)</h1><p>契约保证了函数或者表达式在运行时的行为。当违反了契约时，将跑出一个错误。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> contract  = <span class="function">(<span class="params">input</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> input === <span class="string">'number'</span>) <span class="keyword">return</span> <span class="literal">true</span></div><div class="line"></div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Contract Violated: expected int -&gt; int'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> addOne = <span class="function">(<span class="params">num</span>) =&gt;</span> contract(num) &amp;&amp; num + <span class="number">1</span></div><div class="line"></div><div class="line">addOne(<span class="number">2</span>)</div><div class="line">addOne(<span class="string">'hello'</span>)</div></pre></td></tr></table></figure>
<h1 id="范畴-Category"><a href="#范畴-Category" class="headerlink" title="范畴 (Category)"></a>范畴 (Category)</h1><p>在范畴论中，范畴是指对象集合及它们之间的态射 (morphism)。在编程中，数据类型作为对象，函数作为态射。</p>
<p>一个有效的范畴遵从以下三个原则：</p>
<ul>
<li>必有一个 identity 态射，使得 map 一个对象是它自身。a 是范畴里的一个对象时，必有一个函数使 a -&gt; a。</li>
<li>态射必是可组合的。a，b，c 是范畴里的对象，f 是态射 a -&gt; b，g 是 b -&gt; c 态射。g(f(x)) 一定与 (g ● f)(x)</li>
<li>组合满足结合律。f ● (g ● h) 与 (f ● g) ● h 是等价的。</li>
</ul>
<p>这些准则是非常抽象的，范畴论对与发现组合的新方法是伟大的。</p>
<p>进一步阅读</p>
<p><a href="https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/" target="_blank" rel="external">Category Theory for Programmers</a></p>
<h1 id="值-Value"><a href="#值-Value" class="headerlink" title="值 (Value)"></a>值 (Value)</h1><p>赋值给变量的值称作Value</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="number">5</span></div><div class="line"><span class="built_in">Object</span>.freeze(&#123;<span class="attr">name</span>: <span class="string">'John'</span>, <span class="attr">age</span>: <span class="number">30</span>&#125;)</div><div class="line">;<span class="function">(<span class="params">a</span>) =&gt;</span> a</div><div class="line">;[<span class="number">1</span>]</div><div class="line"><span class="literal">undefined</span></div></pre></td></tr></table></figure>
<h1 id="常量-Constant"><a href="#常量-Constant" class="headerlink" title="常量 (Constant)"></a>常量 (Constant)</h1><p>一旦定义不可重新赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> five = <span class="number">5</span></div><div class="line"><span class="keyword">const</span> john = <span class="built_in">Object</span>.freeze(&#123;<span class="attr">name</span>: <span class="string">'John'</span>, <span class="attr">age</span>: <span class="number">30</span>&#125;)</div></pre></td></tr></table></figure>
<p>常量是<a href="https://github.com/shfshanyue/fp-jargon-zh#referential-transparency" target="_blank" rel="external">引用透明</a>的，因此它们可以被它们所代表的值替代而不影响结果。</p>
<p>对于以上两个常量，以下语句总会返回 true。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">john.age + five === (&#123;<span class="attr">name</span>: <span class="string">'John'</span>, <span class="attr">age</span>: <span class="number">30</span>&#125;).age + (<span class="number">5</span>)</div></pre></td></tr></table></figure>
<h1 id="函子-Functor"><a href="#函子-Functor" class="headerlink" title="函子 (Functor)"></a>函子 (Functor)</h1><p>一个实现了map 函数的对象，map 会遍历对象中的每个值并生成一个新的对象。遵守两个准则</p>
<h3 id="一致性-Preserves-identity"><a href="#一致性-Preserves-identity" class="headerlink" title="一致性 (Preserves identity)"></a>一致性 (Preserves identity)</h3><p>object.map(x =&gt; x) ≍ object</p>
<h3 id="组合性-Composable"><a href="#组合性-Composable" class="headerlink" title="组合性 (Composable)"></a>组合性 (Composable)</h3><p>object.map(compose(f, g)) ≍ object.map(g).map(f)  // f, g 为任意函数<br>在 javascript 中一个常见的函子是 Array, 因为它遵守因子的两个准则。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> f = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span></div><div class="line"><span class="keyword">const</span> g = <span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span></div><div class="line"></div><div class="line">;[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> f(g(x)))</div><div class="line">;[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(g).map(f)</div></pre></td></tr></table></figure>
<h1 id="Pointed-Functor"><a href="#Pointed-Functor" class="headerlink" title="Pointed Functor"></a>Pointed Functor</h1><p>一个实现了 of 函数的对象。</p>
<p>ES2015 添加了 Array.of，使 Array 成为了 Pointed Functor。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<h1 id="Lift"><a href="#Lift" class="headerlink" title="Lift"></a>Lift</h1><h1 id="引用透明性-Referential-Transparency"><a href="#引用透明性-Referential-Transparency" class="headerlink" title="引用透明性 (Referential Transparency)"></a>引用透明性 (Referential Transparency)</h1><p>一个表达式能够被它的值替代而不改变程序的行为成为引用透明。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> greet = <span class="function"><span class="params">()</span> =&gt;</span> <span class="string">'hello, world.'</span></div></pre></td></tr></table></figure>
<h1 id="匿名函数-Lambda"><a href="#匿名函数-Lambda" class="headerlink" title="匿名函数 (Lambda)"></a>匿名函数 (Lambda)</h1><p>匿名函数被视作一个值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> a + <span class="number">1</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line">;<span class="function">(<span class="params">a</span>) =&gt;</span> a + <span class="number">1</span></div></pre></td></tr></table></figure>
<p>匿名函数通常作为高阶函数的参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>].map(<span class="function">(<span class="params">a</span>) =&gt;</span> a + <span class="number">1</span>)</div></pre></td></tr></table></figure>
<p>可以把 Lambda 赋值给一个变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> add1 = <span class="function">(<span class="params">a</span>) =&gt;</span> a + <span class="number">1</span></div></pre></td></tr></table></figure>
<h1 id="Lambda-Caculus"><a href="#Lambda-Caculus" class="headerlink" title="Lambda Caculus"></a>Lambda Caculus</h1><p>数学的一个分支，使用函数创造 <a href="https://en.wikipedia.org/wiki/Lambda_calculus" target="_blank" rel="external">通过计算模型</a></p>
<h1 id="惰性求值-Lazy-evaluation"><a href="#惰性求值-Lazy-evaluation" class="headerlink" title="惰性求值 (Lazy evaluation)"></a>惰性求值 (Lazy evaluation)</h1><p>按需求值机制，只有当需要计算所得值时才会计算</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> rand = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</div><div class="line">        <span class="keyword">yield</span> <span class="built_in">Math</span>.random()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> randIter = rand()</div><div class="line">randIter.next()</div></pre></td></tr></table></figure>
<h1 id="Monoid"><a href="#Monoid" class="headerlink" title="Monoid"></a>Monoid</h1><p>一个对象拥有一个函数用来连接相同类型的对象。</p>
<p>数值加法是一个简单的 Monoid<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> + <span class="number">1</span>   <span class="comment">// 2</span></div></pre></td></tr></table></figure></p>
<p>以上示例中，数值是对象而 + 是函数。</p>
<p>与另一个值结合而不会改变它的值必须存在，称为 identity。</p>
<p>加法的 identity 值为 0:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> + <span class="number">0</span>   <span class="comment">// 1</span></div></pre></td></tr></table></figure></p>
<p>需要满足结合律<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span> + (<span class="number">2</span> + <span class="number">3</span>) === (<span class="number">1</span> + <span class="number">2</span>) + <span class="number">3</span> <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<p>数组的结合也是 Monoid<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">;[<span class="number">1</span>, <span class="number">2</span>].concat([<span class="number">3</span>, <span class="number">4</span>])</div></pre></td></tr></table></figure></p>
<p>identity 值为空数组</p>
<p>;[1, 2].concat([])<br>identity 与 compose 函数能够组成 monoid<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> identity = <span class="function">(<span class="params">a</span>) =&gt;</span> a</div><div class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">f, g</span>) =&gt;</span> (x) =&gt; f(g(x))</div></pre></td></tr></table></figure></p>
<p>foo 是只带一个参数的任意函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">compose(foo, identity) ≍ compose(identity, foo) ≍ foo</div></pre></td></tr></table></figure></p>
<h1 id="Monad"><a href="#Monad" class="headerlink" title="Monad"></a>Monad</h1><p>拥有 of 和 chain 函数的对象。chain 很像 map， 除了用来铺平嵌套数据。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.chain = <span class="function"><span class="keyword">function</span> (<span class="params">f</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.reduce(<span class="function">(<span class="params">acc, it</span>) =&gt;</span> acc.concat(f(it)), [])</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// ['cat', 'dog', 'fish', 'bird']</span></div><div class="line">;<span class="built_in">Array</span>.of(<span class="string">'cat,dog'</span>, <span class="string">'fish,bird'</span>).chain(<span class="function"><span class="params">s</span> =&gt;</span> s.split(<span class="string">','</span>))</div><div class="line"></div><div class="line"><span class="comment">// [['cat', 'dog'], ['fish', 'bird']]</span></div><div class="line">;<span class="built_in">Array</span>.of(<span class="string">'cat,dog'</span>, <span class="string">'fish,bird'</span>).map(<span class="function"><span class="params">s</span> =&gt;</span> s.split(<span class="string">','</span>))</div></pre></td></tr></table></figure>
<p>在有些语言中，of 也称为 return，chain 也称为 flatmap 与 bind。</p>
<h1 id="Comonad"><a href="#Comonad" class="headerlink" title="Comonad"></a>Comonad</h1><p>拥有 extract 与 extend 函数的对象。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">const CoIdentity = (v) =&gt; (&#123;</div><div class="line">    val: v,</div><div class="line">    extract () &#123;</div><div class="line">        return this.val</div><div class="line">    &#125;,</div><div class="line">    extend (f) &#123;</div><div class="line">        return CoIdentity(f(this))</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">CoIdentity(1).extract()</div><div class="line">CoIdentity(1).extend(x =&gt; x.extract() + 1)   # CoIdentity(2)</div></pre></td></tr></table></figure>
<h1 id="Applicative-Functor"><a href="#Applicative-Functor" class="headerlink" title="Applicative Functor"></a>Applicative Functor</h1><p>一个拥有 ap 函数的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 实现</span></div><div class="line"><span class="built_in">Array</span>.prototype.ap = <span class="function"><span class="keyword">function</span> (<span class="params">xs</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.reduce(<span class="function">(<span class="params">acc, f</span>) =&gt;</span> acc.concat(xs.map(f)), [])</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 示例</span></div><div class="line">;[<span class="function">(<span class="params">a</span>) =&gt;</span> a + <span class="number">1</span>].ap([<span class="number">1</span>]) <span class="comment">// [2]</span></div></pre></td></tr></table></figure>
<p>如果你有两个对象，并需要对他们的元素执行一个二元函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// Arrays that you want to combine</span></div><div class="line"><span class="keyword">const</span> arg1 = [<span class="number">1</span>, <span class="number">3</span>]</div><div class="line"><span class="keyword">const</span> arg2 = [<span class="number">4</span>, <span class="number">5</span>]</div><div class="line"></div><div class="line"><span class="comment">// combining function - must be curried for this to work</span></div><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class="line"></div><div class="line"><span class="keyword">const</span> partiallyAppliedAdds = [add].ap(arg1) <span class="comment">// [(y) =&gt; 1 + y, (y) =&gt; 3 + y]</span></div></pre></td></tr></table></figure>
<p>由此得到了一个函数数组，并且可以调用 ap 函数得到结果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">partiallyAppliedAdds.ap(arg2) <span class="comment">// [5, 6, 7, 8]</span></div></pre></td></tr></table></figure>
<h1 id="Applicative-Functor-1"><a href="#Applicative-Functor-1" class="headerlink" title="Applicative Functor"></a>Applicative Functor</h1><p>一个拥有 ap 函数的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 实现</span></div><div class="line"><span class="built_in">Array</span>.prototype.ap = <span class="function"><span class="keyword">function</span> (<span class="params">xs</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.reduce(<span class="function">(<span class="params">acc, f</span>) =&gt;</span> acc.concat(xs.map(f)), [])</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 示例</span></div><div class="line">;[<span class="function">(<span class="params">a</span>) =&gt;</span> a + <span class="number">1</span>].ap([<span class="number">1</span>]) <span class="comment">// [2]</span></div></pre></td></tr></table></figure>
<p>如果你有两个对象，并需要对他们的元素执行一个二元函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// Arrays that you want to combine</span></div><div class="line"><span class="keyword">const</span> arg1 = [<span class="number">1</span>, <span class="number">3</span>]</div><div class="line"><span class="keyword">const</span> arg2 = [<span class="number">4</span>, <span class="number">5</span>]</div><div class="line"></div><div class="line"><span class="comment">// combining function - must be curried for this to work</span></div><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class="line"></div><div class="line"><span class="keyword">const</span> partiallyAppliedAdds = [add].ap(arg1) <span class="comment">// [(y) =&gt; 1 + y, (y) =&gt; 3 + y]</span></div></pre></td></tr></table></figure>
<h1 id="态射-Morphism"><a href="#态射-Morphism" class="headerlink" title="态射 (Morphism)"></a>态射 (Morphism)</h1><p>一个变形的函数。</p>
<h1 id="自同态-Endomorphism"><a href="#自同态-Endomorphism" class="headerlink" title="自同态 (Endomorphism)"></a>自同态 (Endomorphism)</h1><p>输入输出是相同类型的函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// uppercase :: String -&gt; String</span></div><div class="line"><span class="keyword">const</span> uppercase = <span class="function">(<span class="params">str</span>) =&gt;</span> str.toUpperCase()</div><div class="line"></div><div class="line"><span class="comment">// decrement :: Number -&gt; Number</span></div><div class="line"><span class="keyword">const</span> decrement = <span class="function">(<span class="params">x</span>) =&gt;</span> x - <span class="number">1</span></div></pre></td></tr></table></figure>
<h1 id="同构-Isomorphism"><a href="#同构-Isomorphism" class="headerlink" title="同构 (Isomorphism)"></a>同构 (Isomorphism)</h1><p>不用类型对象的变形，保持结构并且不丢失数据。</p>
<p>例如，一个二维坐标既可以表示为数组 [2, 3]，也可以表示为对象 {x: 2, y: 3}。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 提供函数在两种类型间互相转换</span></div><div class="line"><span class="keyword">const</span> pairToCoords = <span class="function">(<span class="params">pair</span>) =&gt;</span> (&#123;<span class="attr">x</span>: pair[<span class="number">0</span>], <span class="attr">y</span>: pair[<span class="number">1</span>]&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> coordsToPair = <span class="function">(<span class="params">coords</span>) =&gt;</span> [coords.x, coords.y]</div><div class="line"></div><div class="line">coordsToPair(pairToCoords([<span class="number">1</span>, <span class="number">2</span>])) <span class="comment">// [1, 2]</span></div><div class="line"></div><div class="line">pairToCoords(coordsToPair(&#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>&#125;)) <span class="comment">// &#123;x: 1, y: 2&#125;</span></div></pre></td></tr></table></figure>
<h1 id="Setoid"><a href="#Setoid" class="headerlink" title="Setoid"></a>Setoid</h1><p>拥有 equals 函数的对象。equals 可以用来和其它对象比较。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.equals = <span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</div><div class="line"><span class="keyword">const</span> len = <span class="keyword">this</span>.length</div><div class="line"><span class="keyword">if</span> (len !== arr.length) &#123;</div><div class="line"><span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line"><span class="keyword">if</span> (<span class="keyword">this</span>[i] !== arr[i]) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">;[<span class="number">1</span>, <span class="number">2</span>].equals([<span class="number">1</span>, <span class="number">2</span>])   <span class="comment">// true</span></div><div class="line">;[<span class="number">1</span>, <span class="number">2</span>].equals([<span class="number">3</span>, <span class="number">4</span>])   <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h1 id="半群-Semigroup"><a href="#半群-Semigroup" class="headerlink" title="半群 (Semigroup)"></a>半群 (Semigroup)</h1><p>An object that has a concat function that combines it with another object of the same type.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">;[<span class="number">1</span>].concat([<span class="number">2</span>]) <span class="comment">// [1, 2]</span></div></pre></td></tr></table></figure>
<h1 id="Foldable"><a href="#Foldable" class="headerlink" title="Foldable"></a>Foldable</h1><p>An object that has a reduce function that can transform that object into some other type.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">const</span> sum = <span class="function"><span class="params">list</span> =&gt;</span> list.reduce(<span class="function">(<span class="params">account, value</span>) =&gt;</span> account + value, <span class="number">0</span>)</div><div class="line">sum([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div></pre></td></tr></table></figure>
<h1 id="Traversbale"><a href="#Traversbale" class="headerlink" title="Traversbale"></a>Traversbale</h1><p>TODO</p>
<h1 id="Type-Signatures"><a href="#Type-Signatures" class="headerlink" title="Type Signatures"></a>Type Signatures</h1><p>Often functions in JavaScript will include comments that indicate the types of their arguments and return values.</p>
<p>There’s quite a bit of variance across the community but they often follow the following patterns:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// functionName :: firstArgType -&gt; secondArgType -&gt; returnType</span></div><div class="line"></div><div class="line"><span class="comment">// add :: Number -&gt; Number -&gt; Number</span></div><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x</span>) =&gt;</span> (y) =&gt; x + y</div><div class="line"></div><div class="line"><span class="comment">// increment :: Number -&gt; Number</span></div><div class="line"><span class="keyword">const</span> increment = <span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span></div></pre></td></tr></table></figure>
<p>If a function accepts another function as an argument it is wrapped in parentheses.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// call :: (a -&gt; b) -&gt; a -&gt; b</span></div><div class="line"><span class="keyword">const</span> call = <span class="function">(<span class="params">f</span>) =&gt;</span> (x) =&gt; f(x)</div></pre></td></tr></table></figure>
<p>The letters a, b, c, d are used to signify that the argument can be of any type. The following version of map takes a function that transforms a value of some type a into another type b, an array of values of type a, and returns an array of values of type b.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// map :: (a -&gt; b) -&gt; [a] -&gt; [b]</span></div><div class="line"><span class="keyword">const</span> map = <span class="function">(<span class="params">f</span>) =&gt;</span> (list) =&gt; list.map(f)</div></pre></td></tr></table></figure>
<p>Further reading</p>
<ul>
<li><a href="https://github.com/ramda/ramda/wiki/Type-Signatures" target="_blank" rel="external">Ramda’s type signatures</a></li>
<li><a href="https://drboolean.gitbooks.io/mostly-adequate-guide/content/ch7.html#whats-your-type" target="_blank" rel="external">Mostly Adequate Guide</a></li>
<li><a href="http://stackoverflow.com/questions/399312/what-is-hindley-milner/399392#399392" target="_blank" rel="external">What is Hindley-Milner?</a> on Stack Overflow</li>
</ul>
<h1 id="Union-type"><a href="#Union-type" class="headerlink" title="Union type"></a>Union type</h1><p>A union type is the combination of two types together into another one.</p>
<p>JS doesn’t have static types but let’s say we invent a type NumOrString which is a sum of String and Number.</p>
<p>The + operator in JS works on strings and numbers so we can use this new type to describe its inputs and outputs:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// add :: (NumOrString, NumOrString) -&gt; NumOrString</span></div><div class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</div><div class="line"></div><div class="line">add(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// Returns number 3</span></div><div class="line">add(<span class="string">'Foo'</span>, <span class="number">2</span>) <span class="comment">// Returns string "Foo2"</span></div><div class="line">add(<span class="string">'Foo'</span>, <span class="string">'Bar'</span>) <span class="comment">// Returns string "FooBar"</span></div></pre></td></tr></table></figure>
<p>Union types are also known as algebraic types, tagged unions, or sum types.</p>
<p>There’s a couple libraries in JS which help with defining and using union types.</p>
<ul>
<li><a href="https://github.com/paldepind/union-type" target="_blank" rel="external">union-type</a></li>
<li><a href="https://github.com/fantasyland/daggy" target="_blank" rel="external">daggy</a></li>
</ul>
<h1 id="Product-type"><a href="#Product-type" class="headerlink" title="Product type"></a>Product type</h1><p>A product type combines types together in a way you’re probably more familiar with:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// point :: (Number, Number) -&gt; &#123;x: Number, y: Number&#125;</span></div><div class="line"><span class="keyword">const</span> point = <span class="function">(<span class="params">x, y</span>) =&gt;</span> (&#123;<span class="attr">x</span>: x, <span class="attr">y</span>: y&#125;)</div></pre></td></tr></table></figure>
<p>It’s called a product because the total possible values of the data structure is the product of the different values.</p>
<p>See also <a href="https://en.wikipedia.org/wiki/Set_theory" target="_blank" rel="external">Set theory</a>.</p>
<h1 id="Option"><a href="#Option" class="headerlink" title="Option"></a>Option</h1><p>Option is a union type with two cases often called Some and None.</p>
<p>Option is useful for composing functions that might not return a value.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// Naive definition</span></div><div class="line"></div><div class="line">    <span class="keyword">const</span> Some = <span class="function">(<span class="params">v</span>) =&gt;</span> (&#123;</div><div class="line">        <span class="attr">val</span>: v,</div><div class="line">        map (f) &#123;</div><div class="line">            <span class="keyword">return</span> Some(f(<span class="keyword">this</span>.val))</div><div class="line">        &#125;,</div><div class="line">        chain (f) &#123;</div><div class="line">            <span class="keyword">return</span> f(<span class="keyword">this</span>.val)</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    <span class="keyword">const</span> None = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</div><div class="line">        map (f) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">        &#125;,</div><div class="line">        chain (f) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    <span class="comment">// maybeProp :: (String, &#123;a&#125;) -&gt; Option a</span></div><div class="line">    <span class="keyword">const</span> maybeProp = <span class="function">(<span class="params">key, obj</span>) =&gt;</span> <span class="keyword">typeof</span> obj[key] === <span class="string">'undefined'</span> ? None() : Some(obj[key])</div></pre></td></tr></table></figure>
<p>Use <code>chain</code> to sequence functions that return <code>Options</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// getItem :: Cart -&gt; Option CartItem</span></div><div class="line"><span class="keyword">const</span> getItem = <span class="function">(<span class="params">cart</span>) =&gt;</span> maybeProp(<span class="string">'item'</span>, cart)</div><div class="line"></div><div class="line"><span class="comment">// getPrice :: Item -&gt; Option Number</span></div><div class="line"><span class="keyword">const</span> getPrice = <span class="function">(<span class="params">item</span>) =&gt;</span> maybeProp(<span class="string">'price'</span>, item)</div><div class="line"></div><div class="line"><span class="comment">// getNestedPrice :: cart -&gt; Option a</span></div><div class="line"><span class="keyword">const</span> getNestedPrice = <span class="function">(<span class="params">cart</span>) =&gt;</span> getItem(obj).chain(getPrice)</div><div class="line"></div><div class="line">getNestedPrice(&#123;&#125;) <span class="comment">// None()</span></div><div class="line">getNestedPrice(&#123;<span class="attr">item</span>: &#123;<span class="attr">foo</span>: <span class="number">1</span>&#125;&#125;) <span class="comment">// None()</span></div><div class="line">getNestedPrice(&#123;<span class="attr">item</span>: &#123;<span class="attr">price</span>: <span class="number">9.99</span>&#125;&#125;) <span class="comment">// Some(9.99)</span></div></pre></td></tr></table></figure>
<p><code>Option</code> is also known as <code>Maybe</code>. <code>Some</code> is sometimes called <code>Just</code>. <code>None</code> is sometimes called <code>Nothing</code>.</p>
<h1 id="Functional-Programming-Libraries-in-JavaScript"><a href="#Functional-Programming-Libraries-in-JavaScript" class="headerlink" title="Functional Programming Libraries in JavaScript"></a>Functional Programming Libraries in JavaScript</h1><ul>
<li><a href="https://github.com/swannodette/mori" target="_blank" rel="external">mori</a></li>
<li><a href="https://github.com/facebook/immutable-js/" target="_blank" rel="external">Immutable</a></li>
<li><a href="https://github.com/ramda/ramda" target="_blank" rel="external">Ramda</a></li>
<li><a href="http://folktalejs.org/" target="_blank" rel="external">Folktale</a></li>
<li><a href="https://cwmyers.github.io/monet.js/" target="_blank" rel="external">monet.js</a></li>
<li><a href="https://github.com/lodash/lodash" target="_blank" rel="external">lodash</a></li>
<li><a href="https://github.com/jashkenas/underscore" target="_blank" rel="external">Underscore.js</a></li>
<li><a href="https://github.com/dtao/lazy.js" target="_blank" rel="external">Lazy.js</a></li>
<li><a href="https://github.com/sjsyrek/maryamyriameliamurphies.js" target="_blank" rel="external">maryamyriameliamurphies.js</a></li>
<li><a href="https://github.com/casualjavascript/haskell-in-es6" target="_blank" rel="external">Haskell in ES6</a></li>
</ul>


                <hr>

                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2017/03/16/mobx/" data-toggle="tooltip" data-placement="top" title="Mobx">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2017/02/09/nextgen-web-pwa/" data-toggle="tooltip" data-placement="top" title="下一代 Web 应用模型 —— Progressive Web App">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                

                
                <!-- disqus 评论框 start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus 评论框 end -->
                

            </div>
    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Functional" title="Functional">Functional</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://blog.kaijun.rocks" target="_blank">Kaijun&#39;s Blog</a></li>
                    
                        <li><a href="http://huangxuan.me" target="_blank">Hux Blog</a></li>
                    
                        <li><a href="#" target="_blank">Foo</a></li>
                    
                        <li><a href="#" target="_blank">Bar</a></li>
                    
                        <li><a href="#" target="_blank">Example Friends</a></li>
                    
                        <li><a href="#" target="_blank">It helps SEO</a></li>
                    
                </ul>
                
            </div>

        </div>
    </div>
</article>




<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "blog-asherjia-com";
    var disqus_identifier = "http://blog.asherjia.com/2017/03/09/functional-program/";
    var disqus_url = "http://blog.asherjia.com/2017/03/09/functional-program/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus 公共JS代码 end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/asherjia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/asherjia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/asherjia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/asherjia">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Asher&#39;s Blog 2018 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://blog.asherjia.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->


<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog (selector) {
        var P = $('div.post-container'),a,n,t,l,i,c;
        a = P.find('h1,h2,h3,h4,h5,h6');
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#"+$(this).prop('id');
            t = $(this).text();
            c = $('<a href="'+i+'" rel="nofollow">'+t+'</a>');
            l = $('<li class="'+n+'_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;    
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function(e){
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>





<!-- Image to hack wechat -->
<img src="http://blog.asherjia.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
